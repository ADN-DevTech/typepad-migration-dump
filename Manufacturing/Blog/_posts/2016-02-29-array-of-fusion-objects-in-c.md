---
layout: "post"
title: "Array of Fusion objects in C++"
date: "2016-02-29 05:12:42"
author: "Adam Nagy"
categories:
  - "Adam Nagy"
  - "Fusion 360"
original_url: "https://adndevblog.typepad.com/manufacturing/2016/02/array-of-fusion-objects-in-c.html "
typepad_basename: "array-of-fusion-objects-in-c"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/manufacturing/adam-nagy.html" target="_self">Adam Nagy</a></p>
<p>In languages like <strong>JavaScript</strong> it&#39;s very easy to use&#0160;an array:</p>
<pre>var objects = [];
objects[1] = object1;
objects[2] = object2;
// etc.</pre>
<p>In <strong>C++</strong> it&#39;s not too difficult either but takes a bit more code to create and delete such an array:</p>
<div style="line-height: 120%; color: #000; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 10pt;">
<div style="background-color: #ffffff; overflow: auto; padding: 2px 5px; white-space: nowrap;"><span style="background: #ffffff; color: #000000;">app = </span><span style="background: #ffffff; color: #2b91af;">Application</span><span style="background: #ffffff; color: #000000;">::get();</span><br /> <span style="background: #ffffff; color: #0000ff;">if</span><span style="background: #ffffff; color: #000000;"> (!app)</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #0000ff;">return</span> <span style="background: #ffffff; color: #0000ff;">false</span><span style="background: #ffffff; color: #000000;">;</span><br /> <br /> <span style="background: #ffffff; color: #000000;">ui = app-&gt;userInterface();</span><br /> <span style="background: #ffffff; color: #0000ff;">if</span><span style="background: #ffffff; color: #000000;"> (!ui)</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #0000ff;">return</span> <span style="background: #ffffff; color: #0000ff;">false</span><span style="background: #ffffff; color: #000000;">;</span><br /> <br /> <span style="background: #ffffff; color: #008000;">// Get selected entities</span><br /> <span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Selections</span><span style="background: #ffffff; color: #000000;">&gt; sel = ui-&gt;activeSelections();</span><br /> <span style="background: #ffffff; color: #0000ff;">int</span><span style="background: #ffffff; color: #000000;"> selCount = sel-&gt;count();</span><br /> <br /> <span style="background: #ffffff; color: #008000;">// Create array for storing objects</span><br /> <span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Base</span><span style="background: #ffffff; color: #000000;">&gt; * objects = </span><span style="background: #ffffff; color: #0000ff;">new</span> <span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Base</span><span style="background: #ffffff; color: #000000;">&gt;[selCount]; </span><br /> <br /> <span style="background: #ffffff; color: #008000;">// Store the objects in the array</span><br /> <span style="background: #ffffff; color: #0000ff;">for</span><span style="background: #ffffff; color: #000000;">( </span><span style="background: #ffffff; color: #0000ff;">int</span><span style="background: #ffffff; color: #000000;"> i = 0; i &lt; selCount; i++)</span><br /> <span style="background: #ffffff; color: #000000;">{</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;objects[i] = sel-&gt;item(i)-&gt;entity(); </span><br /> <span style="background: #ffffff; color: #000000;">}</span><br /> <br /> <span style="background: #ffffff; color: #008000;">// Retrieve items from the array</span><br /> <span style="background: #ffffff; color: #0000ff;">for</span><span style="background: #ffffff; color: #000000;">(</span><span style="background: #ffffff; color: #0000ff;">int</span><span style="background: #ffffff; color: #000000;"> i = 0; i &lt; selCount; i++)</span><br /> <span style="background: #ffffff; color: #000000;">{</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">ConstructionPoint</span><span style="background: #ffffff; color: #000000;">&gt; pt = objects[i];</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #0000ff;">const</span> <span style="background: #ffffff; color: #0000ff;">char</span><span style="background: #ffffff; color: #000000;"> * ot = objects[i]-&gt;objectType();</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #0000ff;">if</span><span style="background: #ffffff; color: #000000;"> (pt)</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;{</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;&#0160;&#0160;</span><span style="background: #ffffff; color: #008000;">// Do something...</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;}</span><br /> <span style="background: #ffffff; color: #000000;">}</span><br /> <br /> <span style="background: #ffffff; color: #008000;">// Delete array</span><br /> <span style="background: #ffffff; color: #0000ff;">for</span><span style="background: #ffffff; color: #000000;">(</span><span style="background: #ffffff; color: #0000ff;">int</span><span style="background: #ffffff; color: #000000;"> i = 0; i &lt; selCount; i++)</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;objects[i].detach();</span><br /> <span style="background: #ffffff; color: #0000ff;">delete</span><span style="background: #ffffff; color: #000000;"> objects;</span></div>
</div>
<p>An even nicer solution could be using a vector:</p>
<div style="line-height: 120%; color: #000; font-family: &#39;Courier New&#39;, Courier, Monospace; font-size: 10pt;">
<div style="background-color: #ffffff; overflow: auto; padding: 2px 5px; white-space: nowrap;"><span style="background: #ffffff; color: #000000;">std::</span><span style="background: #ffffff; color: #2b91af;">vector</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Base</span><span style="background: #ffffff; color: #000000;">&gt;&gt; objects(selCount);</span><br /> <br /> <span style="background: #ffffff; color: #0000ff;">for</span><span style="background: #ffffff; color: #000000;">(</span><span style="background: #ffffff; color: #0000ff;">int</span><span style="background: #ffffff; color: #000000;"> i = 0; i &lt; selCount; i++)</span><br /> <span style="background: #ffffff; color: #000000;">{</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #2b91af;">Ptr</span><span style="background: #ffffff; color: #000000;">&lt;</span><span style="background: #ffffff; color: #2b91af;">Base</span><span style="background: #ffffff; color: #000000;">&gt; obj = sel-&gt;item(i)-&gt;entity();</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;</span><span style="background: #ffffff; color: #0000ff;">if</span><span style="background: #ffffff; color: #000000;"> (obj)</span><br /> <span style="background: #ffffff; color: #000000;">&#0160;&#0160;&#0160;&#0160;objects[i] = obj;</span><br /> <span style="background: #ffffff; color: #000000;">}</span></div>
</div>
