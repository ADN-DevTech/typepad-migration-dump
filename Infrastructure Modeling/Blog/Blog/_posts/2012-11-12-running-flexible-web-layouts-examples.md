---
layout: "post"
title: "Running Flexible Web Layouts Examples"
date: "2012-11-12 22:06:02"
author: "Daniel Du"
categories:
  - "AIMS 2013"
  - "Daniel Du"
  - "Web"
original_url: "https://adndevblog.typepad.com/infrastructure/2012/11/running-flexible-web-layouts-examples.html "
typepad_basename: "running-flexible-web-layouts-examples"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/daniel-du.html">Daniel Du</a></p>  <p>I am following the “Flexible Web Layouts Examples” on MapServer 2013 <a href="http://wikihelp.autodesk.com/Infr._Map_Server/enu/2013/Help/0005-Develope0/0105-Flexible105">wikihelp</a>, and found that this wiki page is a little out-dated. I do not have time to fix them all, so I am just trying to blog how I make some of the examples running. In case you don’t know, the source code of these examples is available on the installation DVD in Samples\FlexibleWebLayoutsSamples. </p>  <p>&#160;</p>  <p>The zip file, FlexibleWebLayoutsExamples.zip, contains source files. Unzip this into the<em>installDir</em>\WebServerExtensions\www folder with “Use folder names” selected in WinZip. It installs the following files:</p>  <p><a name="WS1A9193826455F5FF-6507591011913E8F4B8-470D"></a></p>  <ul>   <li>fusion\templates\mapguide\examples\* </li>    <li>fusion\widgets\Example*.js </li>    <li>fusion\widgets\widgetinfo\example*.xml </li>    <li>fusion\widgets\example*\* </li> </ul>  <p>&#160;</p>  <p>Run Example 1:</p>  <p>Example 1 demos how to create the simplest widget. After installing the code, you will find a new widget name “Example1” available in flexible web layout editor.</p>  <p>1. Create a new flexible web layout in Infrastructure Studio 2013 by c, select a template, I am using slate. Of cause, please make sure MapServer is running first.</p>  <p>2. Assign a map for the Map Tab, I am using the Sheboygan dataset.</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017d3d95e8b5970c-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_b71eee.jpg" width="415" height="158" /></a></p>  <p>3. I would like to add my test widget into “Toobar(Main Menu)”, you can also put it into other menu if you’d like to, so I switch to “Toobar(Main Menu)” tab, and click “New” in components available in this layout section: </p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017c33675f3d970b-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_6c5687.jpg" width="442" height="114" /></a></p>  <p>4. You should see a mater type names as “Example1”, if not, try refresh. If it does not appear even after refreshing, then your probably made some mistakes at installation, a common problem is to install the JS/xml files into wrong folder, so please make sure you have same folder structure with the existing widgets. Select “Example1” as master type then click OK button.</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017c33676014970b-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_dfa3f1.jpg" width="433" height="315" /></a></p>  <p>5. Now I have a new component in the flexible web layout, you can change the ID as you will, I am using the default ID “Example1”:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017d3d95ebb6970c-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_31f6fb.jpg" width="443" height="213" /></a></p>  <p>6. Add this component into layout UI, dragging “Example1” into the window left side, a new button is created in main menu toolbar:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017d3d95ed7c970c-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_b86784.jpg" width="451" height="146" /></a></p>  <p>7. view in browser, and click “Example1” button in main menu toolbar, the “hello word” message shows up:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017d3d95efdb970c-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_54d751.jpg" width="460" height="205" /></a></p>  <p>&#160;</p>  <p>Running Example2</p>  <p>Example 1 is pretty simple, I will move next to Example2. Example 2 is a widget that is designed to be called as a command from a menu, it output the information of selected feature. It requires Mozilla<sup>®</sup> Firefox<sup>®</sup> 3.6 or higher and the Firebug extension because it writes to the <strong>Firebug console</strong>.</p>  <p>I am following the same process as example1 to add a new button into main menu toolbar, and browse it in Firefox this time. To run this example, I need to select some features first, then click&#160; the “Example2 ” button.</p>  <p>Oops! I got an error message:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017ee50b1009970d-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_fc8047.jpg" width="473" height="158" /></a></p>  <p><font size="1">Fusion Error:      <br />WARNING: Exception occurred in AJAX callback.       <br />Message: <font style="background-color: #ffff00"><strong>theMap.getMapName is not a function</strong></font>       <br />Location: </font><a href="http://localhost/mapserver2013/fusion/widgets/Example2.js"><font size="1">http://localhost/mapserver2013/fusion/widgets/Example2.js</font></a><font size="1"> (47)      <br />Response: {&quot;layers&quot;:[&quot;Parcels&quot;],&quot;extents&quot;:{&quot;minx&quot;:-87.739602320342,&quot;miny&quot;:43.765720296224,&quot;maxx&quot;:-87.737804056497,&quot;maxy&quot;:43.766709329904},&quot;Parcels&quot;:{&quot;propertynames&quot;:[&quot;RLDESCR1&quot;,&quot;RTYPE&quot;,&quot;RACRE&quot;,&quot;RLOT&quot;,&quot;RNAME&quot;,&quot;RLDESCR2&quot;,&quot;RLDESCR3&quot;,&quot;RBILAD&quot;,&quot;RSQFT&quot;,&quot;RLDESCR4&quot;],&quot;propertyvalues&quot;:[&quot;Description1&quot;,&quot;Zone&quot;,&quot;Acreage&quot;,&quot;Lot Dimensions&quot;,&quot;Owner&quot;,&quot;Description2&quot;,&quot;Description3&quot;,&quot;Billing Address&quot;,&quot;Lot Size (SqFt)&quot;,&quot;Description4&quot;],&quot;propertytypes&quot;:[9,9,9,9,9,9,9,9,7,9],&quot;metadatanames&quot;:[&quot;dimension&quot;,&quot;bbox&quot;,&quot;center&quot;,&quot;area&quot;,&quot;length&quot;],&quot;numelements&quot;:15,&quot;values&quot;:[[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.17&quot;,&quot;60X124&quot;,&quot;THIEME, ELAINE M&quot;,&quot;LOT 11 BLK 3&quot;,&quot;&quot;,&quot;2008 N. 25TH ST.&quot;,&quot;7440&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.25&quot;,&quot;80X135&quot;,&quot;RAFFEL, JAMES E&quot;,&quot;LOT 3 &amp;amp; THE N 20\\' OF LOT 4&quot;,&quot;BLK 2&quot;,&quot;2006 N. 24TH ST.&quot;,&quot;10800&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.25&quot;,&quot;80X135&quot;,&quot;FUERST, ROBERT O&quot;,&quot;N 30\\' OF LOT 23 &amp;amp; S 50\\' OF&quot;,&quot;LOT 24 BLK 2&quot;,&quot;2005 N. 25TH ST.&quot;,&quot;10800&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.17&quot;,&quot;60X124&quot;,&quot;TUPPER, ANSEL JR&quot;,&quot;LOT 12 BLK 3&quot;,&quot;&quot;,&quot;2002 N. 25TH ST.&quot;,&quot;7440&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.22&quot;,&quot;70X135&quot;,&quot;YANG, SHOUA PAO&quot;,&quot;THE S 40\\' OF LOT 4 &amp;amp; THE N&quot;,&quot;30\\' OF LOT 5 BLK 2&quot;,&quot;2002 N. 24TH ST.&quot;,&quot;9450&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.23&quot;,&quot;75X135&quot;,&quot;RAKOW, GLEN J.&quot;,&quot;N 45\\' OF LOT 22 &amp;amp; S 30\\' OF&quot;,&quot;LOT 23 BLK 2&quot;,&quot;1919 N. 25TH ST.&quot;,&quot;10125&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.17&quot;,&quot;60X124&quot;,&quot;MATELKO, RICHARD A.&quot;,&quot;LOT 13 BLK 3&quot;,&quot;&quot;,&quot;1918 N. 25TH ST.&quot;,&quot;7440&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.28&quot;,&quot;90X135&quot;,&quot;CASTELLAN, MARY&quot;,&quot;THE S 30\\' OF LOT 5 &amp;amp; ALL OF&quot;,&quot;LOT 6 BLK 2&quot;,&quot;1914 N. 24TH ST.&quot;,&quot;12150&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.23&quot;,&quot;75X135&quot;,&quot;ROERDINK, JAMES P.&quot;,&quot;LOT 21 &amp;amp; S 15\\' OF LOT 22 BLK&quot;,&quot;2&quot;,&quot;1913 N. 25TH ST.&quot;,&quot;10125&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.22&quot;,&quot;75X125&quot;,&quot;PIONTKOWSKI, JOHN A.&quot;,&quot;S 45\\' OF LOT 15 &amp;amp; N 30\\' OF&quot;,&quot;LOT 16 BLK 3&quot;,&quot;1904 N. 25TH ST.&quot;,&quot;9375&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.19&quot;,&quot;60X135&quot;,&quot;HAMER, MARGARET J&quot;,&quot;LOT 19 BLK 2&quot;,&quot;&quot;,&quot;1849 N. 25TH ST.&quot;,&quot;8100&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.19&quot;,&quot;60X135&quot;,&quot;BOPHA, DAVID &amp;amp; MANYP&quot;,&quot;LOT 8 BLK 2&quot;,&quot;&quot;,&quot;1850 N. 24TH ST.&quot;,&quot;8100&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.22&quot;,&quot;75X125&quot;,&quot;HORWITZ, DONALD&quot;,&quot;LOT 14 &amp;amp; THE N 15\\' OF LOT 15&quot;,&quot;BLK 3&quot;,&quot;1912 N. 25TH ST.&quot;,&quot;9375&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.19&quot;,&quot;60X135&quot;,&quot;ABRAHAM, ROBERT A.&quot;,&quot;LOT 20 BLK 2&quot;,&quot;&quot;,&quot;1905 N. 25TH ST.&quot;,&quot;8100&quot;,&quot;&quot;],[&quot;BRAND SUBD&quot;,&quot;RES&quot;,&quot;0.19&quot;,&quot;60X135&quot;,&quot;LAMB, DANIEL F&quot;,&quot;LOT 7 BLK 2&quot;,&quot;&quot;,&quot;1906 N. 24TH ST.&quot;,&quot;8100&quot;,&quot;&quot;]],&quot;metadata&quot;:[[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],[&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;]]}}</font></p>  <p>&#160;</p>  <p>You may get scared with such a long error message at first glance, To be frankly, I got a high blood pressure as well when I saw this first time <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-smile" alt="Smile" src="/assets/image_078c53.jpg" />. But let’s clam down and looked into the error again, I highlighted and marked it as bold. Message: <font style="background-color: #ffff00"><strong>theMap.getMapName is not a function</strong></font> , it seems that theMap object does not have a method “getMapName”. So I looked into the source code of map widget, which is C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion\lib\Map.js by default. Yes, that’s the reason, getMapName method is missing, so I went ahead to add this method as below, around line 1247:</p>  <p>&#160;</p>  <p>//Added by Daniel 2012/11/01    <br />getMapName: function() {     <br />&#160;&#160;&#160; return this.aMaps[0]._sMapname;     <br />},</p>  <p>&#160;</p>  <p>It is pretty simple one.&#160; </p>  <p>As I said earlier, I am using Slate as my template when testing these examples, and the slate template is referring to a compressed single file of fusion library. To apply my changes, I need to edit the JavaScript reference in C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion\templates\mapguide\slate\index.html, please refer to <a href="http://adndevblog.typepad.com/infrastructure/2012/04/debugging-fusion-viewer-or-mobile-viewer-of-aims-in-firebug.html">this blog post</a> for more information about this:</p>  <p>&lt;script type=&quot;text/javascript&quot; src=&quot;../../../lib/<strong>fusion.js</strong>&quot;&gt;&lt;/script&gt;</p>  <p>Now let’s refresh the page and test again, the information about the selection has been written to the firebug console:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017ee50b14d5970d-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_eb69a5.jpg" width="475" height="220" /></a></p>  <p>Look at it closer:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017c33676dab970b-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/assets/image_f04331.jpg" width="476" height="371" /></a></p>  <p>&#160;</p>  <p>Okay, I would like to stop here since I am busy with other stuff and do not have time to try the others examples, you may want to keep trying the following examples yourself. I found Example3 does not work as expected, and this has been reported to engineering team, they will take care of it in future. If you are interested in investigating more, you can debug it yourself with help of Firebug, as introduced <a href="http://adndevblog.typepad.com/infrastructure/2012/04/debugging-fusion-viewer-or-mobile-viewer-of-aims-in-firebug.html">in this post</a>. All source code of fusion is released with the product(C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 2013\www\fusion). Hopefully you can work them out yourself. </p>  <p>&#160;</p>  <p>Good luck!</p>
