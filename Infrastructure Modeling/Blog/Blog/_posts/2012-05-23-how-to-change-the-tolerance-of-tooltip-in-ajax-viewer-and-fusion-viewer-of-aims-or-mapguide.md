---
layout: "post"
title: "How to change the tolerance of tooltip in Ajax viewer and Fusion viewer of AIMS or MapGuide"
date: "2012-05-23 01:19:00"
author: "Daniel Du"
categories:
  - "AIMS 2012"
  - "AIMS 2013"
  - "Daniel Du"
  - "MapGuide Enterprise 2011"
original_url: "https://adndevblog.typepad.com/infrastructure/2012/05/how-to-change-the-tolerance-of-tooltip-in-ajax-viewer-and-fusion-viewer-of-aims-or-mapguide.html "
typepad_basename: "how-to-change-the-tolerance-of-tooltip-in-ajax-viewer-and-fusion-viewer-of-aims-or-mapguide"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/daniel-du.html">Daniel Du</a></p>  <p>Have you ever run into following scenario? When I have tool tips enabled in the point data, I have to be exactly right on the center for the tool tip to show.&#160; There doesn't seem to be any tolerance on the center or symbol.&#160; Is there a way to increase the tolerance or sensitivity for the tool tip in the code?</p>  <p>Yes, There is. If you are using Ajax viewer (basic web layout), it can be done by making changes in: ajaxmappane.templ which is in Viewerfiles.</p>  <div style="font-family: ; color: ">   <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt; color: "><font color="#0000ff"><font style="font-size: 8pt">function</font></font></span><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> RequestHyperLinkData(id, x, y, exec) {</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">if</font></span><span style="line-height: 11pt"><font color="#000000"> (lastMapRcv != mapId) </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">return</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">if</font></span><span style="line-height: 11pt"><font color="#000000"> (isPopupOpen(tbMenu) || isPopupOpen(ctxMenu)) </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">return</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; req = CreateRequestHandler();</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; req.open(</font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;POST&quot;</font></span><span style="line-height: 11pt"><font color="#000000">, webAgent, </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">true</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">);</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; req.setRequestHeader(</font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;Content-Type&quot;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">, </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;application/x-www-form-urlencoded&quot;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">);</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#008000">// default tolerance is 2 pixies, you can edit this line</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#008000">// to change the tolerance</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#008000">// x1 = x - 2; x2 = x + 2; (original. changed to show tooltip)</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#008000">// y1 = y - 2; y2 = y + 2; (original) </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#008000">//Change the tolerance to 5 pixies</font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; x1 = x - 5; x2 = x + 5;</font></font></span></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; y1 = y - 5; y2 = y + 5;</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; pt1 = ScreenToMapUnits(x1, y1);</font></font></span></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; pt2 = ScreenToMapUnits(x2, y2);</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; geom = MakeWktPolygon(pt1.X, pt1.Y, pt2.X, pt2.Y);</font></font></span></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; reqParams = </font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#a31515">&quot;OPERATION=QUERYMAPFEATURES&amp;VERSION=1.0.0</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;PERSIST=0&amp;MAPNAME=</font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#a31515">&quot; </font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160; +encodeURIComponent(mapName)</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; + </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;&amp;SESSION=&quot;</font></span><span style="line-height: 11pt"><font color="#000000"> + sessionId + </font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#a31515">&quot;&amp;SEQ=&quot;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; + Math.random() + </font></font></span><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#a31515">&quot;&amp;LAYERNAMES=&quot;</font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160; + encodeURIComponent(GetVisLayers())</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; + </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;&amp;GEOMETRY=&quot;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> + geom</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; + </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">&quot;&amp;SELECTIONVARIANT=INTERSECTS&amp;MAXFEATURES=1&quot;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000">;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; obj = </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">new</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> HlRequest(id, x, y, req, exec);</font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; req.onreadystatechange = obj.OnHl;</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">try</font></span><span style="line-height: 11pt"><font color="#000000"> { req.send(reqParams); } </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">catch</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> (e) { }</font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">} </font></font></span></p> </div>  <p>&#160;</p>  <p>For fusion viewer (flexible web layout), the configuration of map tip tolerance is stored in the application definition (flexible web layout) which is stored in repository.</p>  <p>To solve your problem, you need to edit the ApplicationDefinition resource in repository directly. It can be done by Resource Service API(MgResourceService:GetResourceContent and MgResourceService.SetResource), or by MapAgent, or <a href="http://trac.osgeo.org/mapguide/wiki/maestro" target="_blank">Maestro</a>, which is an open source tool and not supported by DevTech.</p>  <p>Here is a snippet of application definition resource content, you can increase the value of &lt;Tolerance&gt; tag of MapTip . </p>  <div style="font-family: ; color: ">   <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt; color: "><font color="#0000ff"><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">Widget</font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Name</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span><span style="line-height: 11pt"><font color="#000000">Maptip</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Name</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Type</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span><span style="line-height: 11pt"><font color="#000000">Maptip</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Type</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Location</font></span><span style="line-height: 11pt"><font color="#000000"> </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">/&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Extension</font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="background-color: #ffff00"><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Tolerance</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span><span style="line-height: 11pt"><font color="#000000">2</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Tolerance</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Target</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span><span style="line-height: 11pt"><font color="#000000">MaptipWindow</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Target</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">WinFeatures</font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p>    <p style="margin: 0px"><span style="line-height: 11pt"><font face="Courier New"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; menubar=no,location=no,resizable=no,status=no</font></font></span></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">WinFeatures</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Delay</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span><span style="line-height: 11pt"><font color="#000000">350</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Delay</font></span><span style="line-height: 11pt; color: "><font color="#0000ff">&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Layer</font></span><span style="line-height: 11pt"><font color="#000000"> </font></span><span style="line-height: 11pt; color: "><font color="#0000ff">/&gt;</font></span></font><span style="line-height: 11pt"><font style="font-size: 8pt" color="#000000"> </font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt"><font color="#000000"><font style="font-size: 8pt">&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#0000ff">&lt;/</font></span><span style="line-height: 11pt; color: "><font color="#a31515">Extension</font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p>    <p style="margin: 0px"><font face="Courier New"><span style="line-height: 11pt; color: "><font color="#0000ff"><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="line-height: 11pt; color: "><font color="#a31515">Widget</font></span></font><span style="line-height: 11pt; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p> </div>  <p>&#160;</p>  <p>Hope this helps.</p>
