---
layout: "post"
title: "Workaround for displacement of base map layer and dynamic layer"
date: "2014-08-11 03:42:53"
author: "Daniel Du"
categories:
  - "AIMS 2013"
  - "AIMS 2014"
  - "Daniel Du"
original_url: "https://adndevblog.typepad.com/infrastructure/2014/08/workaround-for-displacement-of-base-map-layer-and-dynamic-layer.html "
typepad_basename: "workaround-for-displacement-of-base-map-layer-and-dynamic-layer"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/daniel-du.html">Daniel Du</a></p>  <p>To improve viewing performance of Autodesk Infrastructure Map Server, you can set some layers into base layer group so that they can be rendering as tile. The tile size is 300*300 by default, which is defined in serverconfig.ini(in C:\Program Files\Autodesk\Autodesk Infrastructure Map Server 201x\Bin folder by default).&#160; </p>  <p>&#160;</p>  <p>[TileServiceProperties]    <br /># *****************************************************************************     <br /># T I L E&#160; S E R V I C E     <br />#     <br /># Property Name&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Description     <br /># -----------------------------------------------------------------------------     <br /># RenderOnly&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Renders the tile only     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0 = false and 1 = true     <br /># TileCachePath&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Root path of the image tile cache     <br /># TileColumnsPerFolder&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Number of columns of tiles per folder     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0 &lt; Value &lt;= 1000     <br /># TileRowsPerFolder&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Number of rows of tiles per folder     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 0 &lt; Value &lt;= 1000     <br /># DefaultTileSizeX&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Width of generated tiles in pixels     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 50 &lt; value &lt;= 10000     <br /># DefaultTileSizeY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Height of generated tiles in pixels     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; 50 &lt; value &lt;= 10000     <br /># ImageFormat&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Image format for generated tiles     <br />#&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; PNG, PNG8, GIF or JPG     <br /># *****************************************************************************     <br />RenderOnly&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = 0     <br />TileCachePath&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; =C:\Program Files\Autodesk\Autodesk Infrastructure Map Server 2014\Repositories\TileCache\     <br />TileColumnsPerFolder&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = 30     <br />TileRowsPerFolder&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = 30     <br /><strong>DefaultTileSizeX&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = 300      <br />DefaultTileSizeY&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = 300</strong>     <br />ImageFormat&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; = PNG</p>  <p>&#160;</p>  <p>You may find some issues if you are using flexible web layout when changing the default tile size, there is a displacement between base map layer and dynamic layer, it works fine in basic layout. Here is the workaround to fix this issue: </p>  <p>1. Open file fusionSF-compressed.js with NotePad. By default, the file is in C:\Program Files\Autodesk\Autodesk Infrastructure Web Server Extension 201x\www\fusion\lib</p>  <p>2. Find text ‘<i>defaultSize:new OpenLayers.Size(300,300)</i>’. There is only one occurrence.</p>  <p>3. Update (300,300) to the value that you defined on server side. </p>  <p>4. Clear the tile cache, the default folder is C:\Program Files\Autodesk\Autodesk Infrastructure Map Server 201x\Repositories\TileCache</p>  <p>5. Restart Map Server.</p>  <p>&#160;</p>  <p>Hope this helps if you run into this issue.</p>
