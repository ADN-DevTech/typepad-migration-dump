---
layout: "post"
title: "Network Pipe/Structure data fields"
date: "2015-03-13 03:45:23"
author: "Augusto Goncalves"
categories:
  - ".NET"
  - "Augusto Goncalves"
  - "AutoCAD Civil 3D 2015"
  - "Civil 3D"
original_url: "https://adndevblog.typepad.com/infrastructure/2015/03/network-pipestructure-data-fields.html "
typepad_basename: "network-pipestructure-data-fields"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>Civil 3D has different ways to store custom data on different objects. On the specific case of Network Parts (Pipe or Structure), a user can store custom property values as described on <a href="http://beingcivil.typepad.com/my_weblog/2010/07/assigning-optional-properties-to-a-part-size.html">this blog post</a>. In this case, the information is stored under the <strong>Part.PartData</strong> property, that contains a list/array of <strong>PartDataField</strong> objects. An easy way to output this data is using the code below:</p>  <pre style="font-size: 13px; font-family: consolas; background: white; color: black">[<span style="color: #2b91af">CommandMethod</span>(<span style="color: #a31515">&quot;pipedatafield&quot;</span>)]<br /><span style="color: blue">public</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: blue">void</span> CmdSelectPipe()<br />{<br />&#160; <span style="color: #2b91af">Editor</span> ed = <span style="color: #2b91af">Application</span>.DocumentManager.MdiActiveDocument.Editor;<br />&#160; <span style="color: #2b91af">PromptEntityOptions</span> peo = <span style="color: blue">new</span>&#160;<span style="color: #2b91af">PromptEntityOptions</span>(<span style="color: #a31515">&quot;\nSelect network part: &quot;</span>);<br />&#160; peo.SetRejectMessage(<span style="color: #a31515">&quot;\nOnly network parts&quot;</span>);<br />&#160; peo.AddAllowedClass(<span style="color: blue">typeof</span>(<span style="color: #2b91af">Part</span>), <span style="color: blue">false</span>);<br />&#160; <span style="color: #2b91af">PromptEntityResult</span> per = ed.GetEntity(peo);<br />&#160; <span style="color: blue">if</span> (per.Status != <span style="color: #2b91af">PromptStatus</span>.OK) <span style="color: blue">return</span>;<br />&#160; <span style="color: #2b91af">ObjectId</span> partId = per.ObjectId;<br /> <br />&#160; <span style="color: #2b91af">Database</span> db = <span style="color: #2b91af">Application</span>.DocumentManager.MdiActiveDocument.Database;<br />&#160; <span style="color: blue">using</span> (<span style="color: #2b91af">Transaction</span> trans = db.TransactionManager.StartTransaction())<br />&#160; {<br />&#160;&#160;&#160; <span style="color: #2b91af">Part</span> p = trans.GetObject(partId, <span style="color: #2b91af">OpenMode</span>.ForRead) <span style="color: blue">as</span>&#160;<span style="color: #2b91af">Part</span>;<br />&#160;&#160;&#160; <span style="color: #2b91af">PartDataField</span>[] fields = p.PartData.GetAllDataFields();<br />&#160;&#160;&#160; <span style="color: blue">foreach</span>(<span style="color: #2b91af">PartDataField</span> field <span style="color: blue">in</span> fields)<br />&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160; ed.WriteMessage(<span style="color: #a31515">&quot;\n{0}: {1}&quot;</span>, field.Description, field.Value);<br />&#160;&#160;&#160; }<br />&#160; }<br />}</pre>
