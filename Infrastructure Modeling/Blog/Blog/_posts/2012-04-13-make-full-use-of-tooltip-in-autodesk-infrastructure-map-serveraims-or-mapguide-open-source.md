---
layout: "post"
title: "Make full use of tooltip in Autodesk Infrastructure Map Server(AIMS) or MapGuide Open Source"
date: "2012-04-13 01:23:22"
author: "Daniel Du"
categories:
  - "AIMS 2012"
  - "AIMS 2013"
  - "Daniel Du"
  - "MapGuide Enterprise 2011"
original_url: "https://adndevblog.typepad.com/infrastructure/2012/04/make-full-use-of-tooltip-in-autodesk-infrastructure-map-serveraims-or-mapguide-open-source.html "
typepad_basename: "make-full-use-of-tooltip-in-autodesk-infrastructure-map-serveraims-or-mapguide-open-source"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/daniel-du.html" target="_self">Daniel Du</a></p>
<p>My colleague Partha wrote up an <a href="http://adndevblog.typepad.com/infrastructure/2012/04/multiline-tool-tip-in-autodesk-infrastructure-map-server-mapguide-enterprise.html" target="_blank">post</a> about creating multiline mouse over Tool tip for your map in Autodesk Infrastructure Map Server / MapGuide Enterprise, in this post, I would dive deeper to introduce more interesting ways to make full use of tool-tip in AIMS, it also applies to MapGuide Open Source. I posted some articles about this topic in Chinese in my <a href="http://www.cnblogs.com/junqilian/" target="_blank">personal blog</a> years ago, but I am kind of obligated to rewrite it in English to spread to more audience.</p>
<p>&nbsp;</p>
<h3>Improvement of CONCAT</h3>
<p>Before we start, here is a tip you want to know to make your life easier. As you know, to join multiple components in Advanced mode, we can use “concat”. For example:</p>
<blockquote>
<p><a name="WS1A9193826455F5FFBA679E112A6A1900464CD"></a>concat(State_Name, concat(‘: ‘,Population))</p>
</blockquote>
<p>But you may get lost if you have so many components to join, it may make you crazy with so many “contact” and brackets. The good news is, contact function is improved from MapGuide Enterprise 2011/Map 3D 2011. CONCAT takes any number of arguments, which can be any property type except Geometry or Raster. The return value uses the String data type.Use ‘\n’ to insert a line break. To include static text labels or spaces, surround them with single quotes. When you use CONCAT with a Boolean property, the operation generates 1/0 (not True/False) as a result.</p>
<p><strong>Syntax</strong></p>
<p><a name="WS73099cc142f48755-6ab6cd0115aeafde51-7bd1"></a></p>
<p>CONCAT(Property, Property, ...)</p>
<p><strong>Example</strong></p>
<p><a name="WS73099cc142f48755-6ab6cd0115aeafde51-7bd0"></a></p>
<pre class="csharpcode">CONCAT(First_Name, <span class="str">' ', </span>Last_Name,
      <span class="str">'\n Address: '</span>, Street_number, <span class="str">' '</span>,<br />       Street_name, <span class="str">' '</span>, Suffix) </pre>
<p><a name="WS73099cc142f487553bd5b66812435c29801-62d6"></a></p>
<p>Here is the result：</p>
<p><a name="WS73099cc142f487553bd5b66812435c29801-62d5"></a></p>
<blockquote>
<p>John Smith</p>
<p><a name="WS73099cc142f487553bd5b66812435c29801-62d4"></a></p>
<p>Address: 123 Maple Street</p>
</blockquote>
<p>&nbsp;</p>
<h3>Embed hyperlink into tooltip</h3>
<p>Tooltip is implemented in the viewer as HTML div containers, that means you can embed any HTML tags in tooltip to create many pretty cool stuffs in tooltip with your basic HTML knowledge. We can add a hyperlink in tooltip by following code snippet to tooltip of parcel layer.</p>
<p>Double click parcels from Site Explorer in Infrastructure Studio to open the layer editor,</p>
<pre class="csharpcode">concat(<span class="str">'Parcel\nName: '</span>, RNAME, 
<span class="str">'\nAddress: '</span>, RBILAD,<span class="str">'
\nfeatid:'</span>, Autogenerated_SDF_ID ,
<span class="str">'\n &lt;a href="http://www.google.com" target=_blank&gt;     
     Click here to launch google search 
    &lt;/a&gt;'</span>)</pre>
<p>It will look like:</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0168e9ebfdf9970c-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_f40411.jpg" border="0" alt="image" width="454" height="231" /></a></p>
<p>&nbsp;</p>
<h3>Embed image into tooltip</h3>
<p>Now, let’s add an &lt;image&gt; tag to embed an image into the tooltip, at the same time, add a hyperlink to this image.</p>
<pre class="csharpcode">concat(<span class="str">'Parcel\nName: '</span>, RNAME, 
<span class="str">'\nAddress: '</span>, RBILAD,<span class="str">'
\nfeatid:'</span>, Autogenerated_SDF_ID ,
<span class="str">'\n &lt;a href="http://www.google.com" target=_blank&gt;     
   Click here to launch google search &lt;/a&gt;'</span>,
<span class="str">'\n &lt;a href=http://www.autodesk.com target=_blank&gt;      
      &lt;image src="http://img1.mediabea.com/images
        /3/37/Autodesk_logo.jpg"
       alt="Autodesk" height=50, width=100&gt;
     &lt;/image&gt;
   &lt;/a&gt;'</span>)</pre>
<p>It will look like:</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0168e9ebfe16970c-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_64504e.jpg" border="0" alt="image" width="442" height="218" /></a></p>
<p>&nbsp;</p>
<h3>Embed other tags</h3>
<p>Now I believe you’ve got the idea. we can embed any HTML tag into tooltip, so just use your imagination! <img class="wlEmoticon wlEmoticon-smile" style="border-style: none;" src="/assets/image_81e296.jpg" alt="Smile" /></p>
<p>&nbsp;</p>
<h3>Let’s do something cool—Display Chart/Pie in tooltip</h3>
<p>I do know many people are trying to display chart on map, and it is not easy to do with native MapGuide API. I was suffering this as well until I came across <a href="https://developers.google.com/chart/image/docs/making_charts?hl=zh-CN" target="_blank">Google Chart API</a>. The Google Chart API returns a chart image in response to a URL GET or POST request. The API can generate many kinds of charts, from pie or line charts to QR codes and formulas. All the information about the chart that you want, such as chart data, size, colors, and labels, are part of the URL. To make the simplest chart possible, all your URL needs to specify is the chart type, data, and size. You can type this URL directly in your browser, or point to it with an <code>&lt;img&gt;</code> tag in your web page. For example, follow this link for a pie chart:</p>
<p><a href="https://chart.googleapis.com/chart?chs=250x100&amp;chd=t:60,40&amp;cht=p3&amp;chl=Hello|World">https://chart.googleapis.com/chart?chs=250x100&amp;chd=t:60,40&amp;cht=p3&amp;chl=Hello|World</a></p>
<p>You will get a chart image:</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016303f73960970d-pi"><img style="background-image: none; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_3862a4.jpg" border="0" alt="image" width="244" height="113" /></a></p>
<p>&nbsp;</p>
<p>As per our discussion above, you can create the chart image and embed it into tooltip of MapGuide. MapGuide Open Source guru Jackie Ng created <a href="http://themapguyde.blogspot.com/2009/07/expressive-power-of-mapguide-tooltips.html" target="_blank">a post</a> to demonstrate how to do this. please refer to <a href="http://themapguyde.blogspot.com/" target="_blank">his blog</a> for more information.</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0168e9eceb0f970c-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_c2daa1.jpg" border="0" alt="image" width="394" height="144" /></a>&nbsp;</p>
<p>&nbsp;</p>
<h3>Display more comprehensive information in tooltip</h3>
<p>You may find it too complicated by joining contacting HTML tag directly if you want display more complicated information in tooltip. In this case, we can create a separate page then embed this page into tooltip with &lt;iframe&gt; tag.</p>
<p>Here is an example, I an trying to display detailed feature information in tooltip, so I created a web page named&nbsp; as FeatureInformation.aspx to retrieve detailed information of feature by feature ID, then embed it into tooltip:</p>
<pre class="csharpcode">concat(<span class="str">'Parcel\nName: '</span>, RNAME, 
<span class="str">'\nAddress: '</span>, RBILAD,<span class="str">'
\nfeatid:'</span>, Autogenerated_SDF_ID ,
<span class="str">'\n &lt;a href="http://www.google.com" target=_blank&gt;<br />     Click here to launch google search &lt;/a&gt;'</span>,
<span class="str">'\n &lt;a href=<a href="http://www.autodesk.com">http://www.autodesk.com</a> target=_blank&gt;<br />      &lt;image src="http://img1.mediabea.com/images<br />                          </span><span class="str">/3/37/Autodesk_logo.jpg" <br />             alt="Autodesk" height=50, width=100&gt;<br />      &lt;/image&gt;<br />    &lt;/a&gt;'</span>,
<span class="str">'\n&lt;iframe width=500 height=500 <br />      src= http://localhost/WebcastDemo/<br />              FeatureInformation.aspx?MyFeatID='</span>, <br />                           Autogenerated_SDF_ID ,<br />                           <span class="str">'&amp;session='</span>,<br />                           URLENCODE(SESSION()),</pre>
<pre class="csharpcode"><span class="str">'&gt;&lt;/iframe&gt;'</span>)</pre>
<p>&nbsp;</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016764eaadbf970b-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_704c62.jpg" border="0" alt="image" width="498" height="393" /></a></p>
<p>Actually I can display any information this page, I can even query information from other system, like ERP/CRM, to implement the integration of MapGuide and other systems.</p>
<p>Did I mention that the it works for both Ajax viewer and Fusion viewer?</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016764eb9942970b-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_dfee6d.jpg" border="0" alt="image" width="493" height="295" /></a></p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016764eb997e970b-pi"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" src="/assets/image_9c2d51.jpg" border="0" alt="image" width="501" height="302" /></a></p>
<p>&nbsp;</p>
<p>I know someone is trying to add panoramic image and video into tooltip, do you have any other ideas to make full use of tooltip?</p>
<p>&nbsp;</p>
