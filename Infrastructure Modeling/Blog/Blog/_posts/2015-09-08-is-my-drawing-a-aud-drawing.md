---
layout: "post"
title: "Is my drawing a AUD drawing?"
date: "2015-09-08 06:25:54"
author: "Augusto Goncalves"
categories:
  - ".NET"
  - "Augusto Goncalves"
original_url: "https://adndevblog.typepad.com/infrastructure/2015/09/is-my-drawing-a-aud-drawing.html "
typepad_basename: "is-my-drawing-a-aud-drawing"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/infrastructure/augusto-goncalves.html">Augusto Goncalves</a> (<a href="https://twitter.com/augustomaia">@augustomaia</a>)</p>  <p>It’s possible to check if a drawing was created using Civil 3D by checking its Named Objects Dictionary for a ‘root’ key, as demonstrated by <a href="http://civilizeddevelopment.typepad.com/civilized-development/2011/07/is-my-drawing-a-civil-3d-drawing.html">Isaac at this blog post</a>. Now we want the same for Autodesk Utility Design, is it possible?</p>  <p>Indeed the same approach should work, just need to check for a different key, in this case UUDMDICTIONARY. There is also one additional step, check for “Configuration:RUS” custom property on the drawing. </p>  <p>The following code sample demonstrate this approach. It can be used as an extension method for Database.</p>  <pre style="font-size: 13px; font-family: consolas; background: white; color: black"><span style="color: blue">public</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: blue">bool</span> IsAUDDatabase(<span style="color: blue">this</span>&#160;<span style="color: #2b91af">Database</span> db)<br />{<br />&#160; <span style="color: blue">using</span> (<span style="color: #2b91af">Transaction</span> trans = db.TransactionManager.StartOpenCloseTransaction())<br />&#160; {<br />&#160;&#160;&#160; <span style="color: green">// must have this NOD key</span><br />&#160;&#160;&#160; <span style="color: #2b91af">DBDictionary</span> namedObjectDict = trans.GetObject(db.NamedObjectsDictionaryId,<br />&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">OpenMode</span>.ForRead) <span style="color: blue">as</span>&#160;<span style="color: #2b91af">DBDictionary</span>;<br />&#160;&#160;&#160; <span style="color: blue">if</span> (!namedObjectDict.Contains(<span style="color: #a31515">&quot;UUDMDICTIONARY&quot;</span>)) <span style="color: blue">return</span>&#160;<span style="color: blue">false</span>;<br /> <br />&#160;&#160;&#160; <span style="color: green">// must also have a &quot;Configuration:RUS&quot; custom property</span><br />&#160;&#160;&#160; <span style="color: #2b91af">IDictionaryEnumerator</span> summary = db.SummaryInfo.CustomProperties;<br />&#160;&#160;&#160; <span style="color: blue">while</span> (summary.MoveNext()) <br />&#160;&#160;&#160; {<br />&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (summary.Key.ToString().Equals(<span style="color: #a31515">&quot;CONFIGURATION&quot;</span>, <span style="color: #2b91af">StringComparison</span>.OrdinalIgnoreCase) &amp;&amp;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; summary.Value.ToString().Equals(<span style="color: #a31515">&quot;RUS&quot;</span>, <span style="color: #2b91af">StringComparison</span>.OrdinalIgnoreCase))<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span>&#160;<span style="color: blue">true</span>; <span style="color: green">// found it!</span><br />&#160;&#160;&#160; } <br /> <br />&#160;&#160;&#160; <span style="color: blue">return</span>&#160;<span style="color: blue">false</span>;<br />&#160; }<br />}</pre>
