---
layout: "post"
title: "Adding Geopositionmarker To Different Location Through API"
date: "2016-04-19 04:12:28"
author: "Madhukar Moogala"
categories:
  - "AutoCAD"
  - "Madhukar Moogala"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2016/04/adding-geopositionmarker-to-different-location-through-api.html "
typepad_basename: "adding-geopositionmarker-to-different-location-through-api"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/Madhukar-Moogala.html" target="_self">Madhukar Moogala</a></p>
<p>Recently, I have received a query from an ADN partner about positioning Geomaps on AutoCAD, you can add GeoLocationData to AutoCAD drawing, this geolocation data is stored under Modelspace’s extension dictionary.</p>
<p>To can create programmatically GeoLocationData, please find this helpful <a href="http://through-the-interface.typepad.com/through_the_interface/2014/06/attaching-geo-location-data-to-an-autocad-drawing-using-net.html">blog</a>.</p>
<p>In the current blog we ‘ll see how we can add new position marker to different place in the drawing with Geolocationdata.</p>
<p>At the end of code, I have uploaded a screencast, which shows moving from <a href="https://www.google.com.sg/maps/place/17%C2%B026&#39;04.5%22N+78%C2%B023&#39;03.9%22E/@17.4345911,78.3822133,1080m/data=!3m1!1e3!4m2!3m1!1s0x0:0x0?hl=en">Autodesk’s Hyderabad Office</a> to <a href="https://www.google.com.sg/maps/place/12%C2%B057&#39;44.3%22N+77%C2%B035&#39;57.9%22E/@12.9622382,77.5990981,231m/data=!3m1!1e3!4m2!3m1!1s0x0:0x0?hl=en">Autodesk’s Bangalore Office</a>.</p>
<div style="font-size: 9pt; font-family: consolas; background: #1e1e1e; color: #dcdcdc;">
<p style="margin: 0px;"><span style="color: #569cd6; line-height: 140%;">void</span> <span style="color: #c8c8c8; line-height: 140%;">addMarker</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">ads_point</span> <span style="color: #7f7f7f; line-height: 140%;">wcsPoint</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbDatabase</span> <span style="color: #b4b4b4; line-height: 140%;">*</span><span style="color: #c8c8c8; line-height: 140%;">pDb</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">acdbHostApplicationServices</span><span style="color: #b4b4b4; line-height: 140%;">()-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">workingDatabase</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pDb</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #bd63c5; line-height: 140%;">NULL</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcGePoint3d</span> <span style="color: #c8c8c8; line-height: 140%;">pt</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #7f7f7f; line-height: 140%;">wcsPoint</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">],</span> <span style="color: #7f7f7f; line-height: 140%;">wcsPoint</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">1</span><span style="color: #b4b4b4; line-height: 140%;">],</span> <span style="color: #7f7f7f; line-height: 140%;">wcsPoint</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">2</span><span style="color: #b4b4b4; line-height: 140%;">]);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">struct</span> <span style="color: #4ec9b0; line-height: 140%;">resbuf</span> <span style="color: #c8c8c8; line-height: 140%;">buf</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">double</span> <span style="color: #c8c8c8; line-height: 140%;">geoPositionMarkerRaidus</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #b5cea8; line-height: 140%;">0.0</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">acedGetVar</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;GEOMARKPOSITIONSIZE&quot;</span><span style="color: #b4b4b4; line-height: 140%;">),</span> <span style="color: #b4b4b4; line-height: 140%;">&amp;</span><span style="color: #c8c8c8; line-height: 140%;">buf</span><span style="color: #b4b4b4; line-height: 140%;">)</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #bd63c5; line-height: 140%;">RTNORM</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">geoPositionMarkerRaidus</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">buf</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">resval</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">rreal</span> <span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #b5cea8; line-height: 140%;">0</span> <span style="color: #b4b4b4; line-height: 140%;">?</span><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">buf</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">resval</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">rreal</span> <span style="color: #b4b4b4; line-height: 140%;">:</span> <span style="color: #b5cea8; line-height: 140%;">1.0</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">double</span> <span style="color: #c8c8c8; line-height: 140%;">radius</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">geoPositionMarkerRaidus</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbSmartObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoPositionMarker</span> <span style="color: #b4b4b4; line-height: 140%;">*</span><span style="color: #c8c8c8; line-height: 140%;">tmpMarker</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #569cd6; line-height: 140%;">new</span> <span style="color: #4ec9b0; line-height: 140%;">AcDbGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pt</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">radius</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">radius</span><span style="color: #b4b4b4; line-height: 140%;">/</span><span style="color: #b5cea8; line-height: 140%;">2</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">acquire</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">tmpMarker</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">eOkVerify</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">openStatus</span><span style="color: #b4b4b4; line-height: 140%;">()))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">//set to current layer</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setLayer</span><span style="color: #b4b4b4; line-height: 140%;">(</span> <span style="color: #c8c8c8; line-height: 140%;">pDb</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">clayer</span><span style="color: #b4b4b4; line-height: 140%;">()</span> <span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span> <span style="color: #c8c8c8; line-height: 140%;">modelSpaceId</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">acdbSymUtil</span><span style="color: #b4b4b4; line-height: 140%;">()-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">blockModelSpaceId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pDb</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbSmartObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbBlockTableRecord</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #c8c8c8; line-height: 140%;">modelSpaceBTR</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">modelSpaceId</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kForWrite</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(!</span><span style="color: #bd63c5; line-height: 140%;">eOkVerify</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">modelSpaceBTR</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">openStatus</span><span style="color: #b4b4b4; line-height: 140%;">()))</span> <span style="color: #569cd6; line-height: 140%;">return</span> <span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">//add position marker into db</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">Acad</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #4ec9b0; line-height: 140%;">ErrorStatus</span> <span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #4ec9b0; line-height: 140%;">Acad</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">eOk</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span> <span style="color: #c8c8c8; line-height: 140%;">newPositionMarkerId</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">modelSpaceBTR</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">appendAcDbEntity</span><span style="color: #b4b4b4; line-height: 140%;">(</span> <span style="color: #c8c8c8; line-height: 140%;">newPositionMarkerId</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoPositionMarker</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(!</span><span style="color: #bd63c5; line-height: 140%;">eOkVerify</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">es</span><span style="color: #b4b4b4; line-height: 140%;">))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="color: #569cd6; line-height: 140%;">void</span> <span style="color: #c8c8c8; line-height: 140%;">InsertMarker</span><span style="color: #b4b4b4; line-height: 140%;">()</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">CString</span> <span style="color: #c8c8c8; line-height: 140%;">prompt</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">2</span><span style="color: #b4b4b4; line-height: 140%;">];</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">prompt</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">]</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;Latitude&quot;</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">prompt</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">1</span><span style="color: #b4b4b4; line-height: 140%;">]</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;Longitude&quot;</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">CString</span> <span style="color: #c8c8c8; line-height: 140%;">keyword</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;eXit&quot;</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">int</span> <span style="color: #c8c8c8; line-height: 140%;">limits</span><span style="color: #b4b4b4; line-height: 140%;">[]</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #b4b4b4; line-height: 140%;">{</span><span style="color: #b5cea8; line-height: 140%;">90</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #b5cea8; line-height: 140%;">180</span><span style="color: #b4b4b4; line-height: 140%;">};</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">double</span> <span style="color: #c8c8c8; line-height: 140%;">latLon</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">2</span><span style="color: #b4b4b4; line-height: 140%;">];</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">TCHAR</span> <span style="color: #c8c8c8; line-height: 140%;">result</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">133</span><span style="color: #b4b4b4; line-height: 140%;">];</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">int</span> <span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Get Lat and Long from user*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">while</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #b5cea8; line-height: 140%;">2</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">RTERROR</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #c8c8c8; line-height: 140%;">acedInitGet</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #b8d7a3; line-height: 140%;">RSG_OTHER</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">keyword</span><span style="color: #b4b4b4; line-height: 140%;">))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #bd63c5; line-height: 140%;">assert</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #569cd6; line-height: 140%;">false</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">int</span> <span style="color: #c8c8c8; line-height: 140%;">status</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">acedGetKword</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">prompt</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">],</span> <span style="color: #c8c8c8; line-height: 140%;">result</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">status</span><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #bd63c5; line-height: 140%;">RTNORM</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">double</span> <span style="color: #c8c8c8; line-height: 140%;">radian</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_tcsicmp</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #608b4e; line-height: 140%;">/*MSG0*/</span><span style="color: #d69d85; line-height: 140%;">&quot;eXit&quot;</span><span style="color: #b4b4b4; line-height: 140%;">),</span> <span style="color: #c8c8c8; line-height: 140%;">result</span><span style="color: #b4b4b4; line-height: 140%;">)</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">else</span> <span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">acdbRawAngToF</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">result</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #b4b4b4; line-height: 140%;">&amp;</span><span style="color: #c8c8c8; line-height: 140%;">radian</span><span style="color: #b4b4b4; line-height: 140%;">)</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #bd63c5; line-height: 140%;">RTNORM</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">double</span> <span style="color: #c8c8c8; line-height: 140%;">degree</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #b5cea8; line-height: 140%;">180</span><span style="color: #b4b4b4; line-height: 140%;">*</span><span style="color: #c8c8c8; line-height: 140%;">radian</span><span style="color: #b4b4b4; line-height: 140%;">/</span><span style="color: #bd63c5; line-height: 140%;">M_PI</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">fabs</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">degree</span><span style="color: #b4b4b4; line-height: 140%;">)</span> <span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #c8c8c8; line-height: 140%;">limits</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">])</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">acutPrintf</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;\nInvalidInput&quot;</span><span style="color: #b4b4b4; line-height: 140%;">));</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">else</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">latLon</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">]</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">degree</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">i</span><span style="color: #b4b4b4; line-height: 140%;">++;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">else</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">acutPrintf</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;\nInvalidInput&quot;</span><span style="color: #b4b4b4; line-height: 140%;">));</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">else</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span> <span style="color: #c8c8c8; line-height: 140%;">geoDataId</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">eOkTest</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">acdbGetGeoDataObjId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">acdbHostApplicationServices</span><span style="color: #b4b4b4; line-height: 140%;">()-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">workingDatabase</span><span style="color: #b4b4b4; line-height: 140%;">(),</span> <span style="color: #c8c8c8; line-height: 140%;">geoDataId</span><span style="color: #b4b4b4; line-height: 140%;">)))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbSmartObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoData</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">geoDataId</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kForRead</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">eOkTest</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">openStatus</span><span style="color: #b4b4b4; line-height: 140%;">()))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcGePoint3d</span> <span style="color: #c8c8c8; line-height: 140%;">location</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">eOkTest</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">transformFromLonLatAlt</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">latLon</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">1</span><span style="color: #b4b4b4; line-height: 140%;">],</span> <span style="color: #c8c8c8; line-height: 140%;">latLon</span><span style="color: #b4b4b4; line-height: 140%;">[</span><span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">],</span> <span style="color: #b5cea8; line-height: 140%;">0</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">location</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">x</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">location</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">y</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">location</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">z</span><span style="color: #b4b4b4; line-height: 140%;">)))</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">addMarker</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">asDblArray</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">location</span><span style="color: #b4b4b4; line-height: 140%;">));</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
</div>
<p><iframe allowfullscreen="" frameborder="0" height="420" src="https://screencast.autodesk.com/Embed/Timeline/dcb91e68-bb46-43a0-a6a0-43fb82ca61ae?t=0m00s" webkitallowfullscreen="" width="320"></iframe></p>
