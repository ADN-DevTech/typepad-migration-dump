---
layout: "post"
title: "Positioning GeographicMarker Using ObjectARX"
date: "2016-04-19 17:57:00"
author: "Madhukar Moogala"
categories:
  - "2014"
  - "2015"
  - "2016"
  - "AutoCAD"
  - "Madhukar Moogala"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2016/04/positioning-geographicmarker-using-objectarxx.html "
typepad_basename: "positioning-geographicmarker-using-objectarxx"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/Madhukar-Moogala.html" target="_self">Madhukar Moogala</a></p>
<p>In addition to previous blog <a href="http://adndevblog.typepad.com/autocad/2016/04/adding-geopositionmarker-to-different-location-through-api.html">post</a> we saw how we can add a GeoPositionMarker to a drawing with already GeographicMarker enabled.</p>
<p>In current blog we will see how we can leverage ObjectARX API to create GeoCoordinate system and place it in the drawing with user defined Latitudes and Longtitudes.</p>
<p>For this sample, I’m creating an UTM84-43N GIS coordinate system, Universal Transverse Mercator is not a single map projection, but divided in to sixty zones.</p>
<p>Here is an excerpt from <a href="https://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system">Wikipedia</a> about UTM.</p>
<blockquote>
<p>The <strong>Universal Transverse Mercator</strong> (<strong>UTM</strong>) <a href="https://en.wikipedia.org/wiki/Map_projection#Projections_by_preservation_of_a_metric_property">conformal projection</a> uses a <a href="https://en.wikipedia.org/wiki/2-dimensional">2-dimensional</a> <a href="https://en.wikipedia.org/wiki/Cartesian_coordinate_system">Cartesian coordinate system</a> to give locations on the surface of the <a href="https://en.wikipedia.org/wiki/Earth">Earth</a>. Like the traditional method of <a href="https://en.wikipedia.org/wiki/Latitude">latitude</a> and <a href="https://en.wikipedia.org/wiki/Longitude">longitude</a>, it is a<a href="https://en.wikipedia.org/wiki/Horizontal_position_representation">horizontal position representation</a>, i.e. it is used to identify locations on the Earth independently of <a href="https://en.wikipedia.org/wiki/Altitude">vertical position</a>. However, it differs from that method in several respects.</p>
<p>The UTM system is not a single <a href="https://en.wikipedia.org/wiki/Map_projection">map projection</a>. The system instead divides the Earth into sixty zones, each being a six-degree band of longitude, and uses a <a href="https://en.wikipedia.org/wiki/Secant_line">secant</a> <a href="https://en.wikipedia.org/wiki/Transverse_Mercator_projection">transverse Mercator projection</a> in each zone.</p>
</blockquote>
<p>I’m using Latitude and Longitude values of our <a href="https://www.google.co.in/maps/place/17%C2%B026&#39;04.5%22N+78%C2%B023&#39;03.9%22E/@17.4345911,78.3822133,1080m/data=!3m1!1e3!4m2!3m1!1s0x0:0x0?hl=en">Autodesk’ Hyderabad office.</a> : 17.434586,78.384402</p>
<p>Thanks to Tat-Lee for helping with suggestion while I was struggling to generate a Live map programmatically.</p>
<p>Do make note :</p>
<ul>
<li>AcGePoint3d is expected to be (long, lat) and not (lat, long)</li>
<li>Reference point is in the coordinates of the projected coordinate system and not in geodetic.</li>
<li>Design point is in model-space coordinates</li>
</ul>
<p>C++ code:</p>
<div style="font-size: 10pt; font-family: consolas; background: #1e1e1e; color: #dcdcdc;">
<p style="margin: 0px;"><span style="color: #569cd6; line-height: 140%;">void</span> <span style="color: #c8c8c8; line-height: 140%;">GeographicLocationMarker</span><span style="color: #b4b4b4; line-height: 140%;">(</span> <span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Map Projection type*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">const</span> <span style="color: #4ec9b0; line-height: 140%;">AcString</span> <span style="color: #c8c8c8; line-height: 140%;">csId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: white; line-height: 140%;">L</span><span style="color: #d69d85; line-height: 140%;">&quot;UTM84-43N&quot;</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Creating the projected Coordinate Sytem */</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">Acad</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #4ec9b0; line-height: 140%;">ErrorStatus</span> <span style="color: #c8c8c8; line-height: 140%;">es</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoCoordinateSystem</span><span style="color: #b4b4b4; line-height: 140%;">*</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoCS</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoCoordinateSystem</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">create</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">csId</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoCS</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">NULL</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoCS</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcString</span> <span style="color: #c8c8c8; line-height: 140%;">xmlStr</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Get XML type*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoCS</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">getXmlRepresentation</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">xmlStr</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Checking the output of CRS*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">acutPrintf</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;\ncrsName: %s&quot;</span><span style="color: #b4b4b4; line-height: 140%;">),</span><span style="color: #c8c8c8; line-height: 140%;">xmlStr</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">kACharPtr</span><span style="color: #b4b4b4; line-height: 140%;">());</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">xmlStr</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">isEmpty</span><span style="color: #b4b4b4; line-height: 140%;">())</span> <span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span> <span style="color: #c8c8c8; line-height: 140%;">geoId</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoData</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbDatabase</span><span style="color: #b4b4b4; line-height: 140%;">*</span> <span style="color: #c8c8c8; line-height: 140%;">pDb</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">acdbHostApplicationServices</span><span style="color: #b4b4b4; line-height: 140%;">()-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">workingDatabase</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">acdbGetGeoDataObjId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pDb</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">geoId</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Post our Geodata to Database, </span></p>
<p style="margin: 0px;"><span style="color: #608b4e; line-height: 140%;">&#0160; AcDbGeoData is not an Entity, it is stored in Model-Space&#39;s Extension Dictionary*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">geoId</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">isNull</span><span style="color: #b4b4b4; line-height: 140%;">())</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">create</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setBlockTableRecordId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">acdbSymUtil</span><span style="color: #b4b4b4; line-height: 140%;">()-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">blockModelSpaceId</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pDb</span><span style="color: #b4b4b4; line-height: 140%;">));</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">postToDb</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">geoId</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">else</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">open</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">geoId</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kForWrite</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">if</span> <span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">NULL</span> <span style="color: #b4b4b4; line-height: 140%;">==</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">object</span><span style="color: #b4b4b4; line-height: 140%;">())</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/* The spatial coordinate system string.</span></p>
<p style="margin: 0px;"><span style="color: #608b4e; line-height: 140%;">&#0160; It can be the id of the coordinate system or the XML/WKT representation*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setCoordinateSystem</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">xmlStr</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/* The design coordinate system is considered to be local, aka</span></p>
<p style="margin: 0px;"><span style="color: #608b4e; line-height: 140%;">&#0160;&#0160;&#0160;&#0160; an engineering coordinate system.*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setCoordinateType</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcDbGeoData</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kCoordTypLocal</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setHorizontalUnits</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kUnitsMillimeters</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setVerticalUnits</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kUnitsMillimeters</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setDesignPoint</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcGePoint3d</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">kOrigin</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">es</span> <span style="color: #b4b4b4; line-height: 140%;">=</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setUpDirection</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcGeVector3d</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">kZAxis</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Lat and Long of Hyderabad : 17.434586,78.384402*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Note: AcGePoint3d expected to be Long,Lat,alt*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #4ec9b0; line-height: 140%;">AcGePoint3d</span> <span style="color: #c8c8c8; line-height: 140%;">refPtInUTM84</span><span style="color: #b4b4b4; line-height: 140%;">,</span> <span style="color: #c8c8c8; line-height: 140%;">refPtInLatLong</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #b5cea8; line-height: 140%;">78.384402</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #b5cea8; line-height: 140%;">17.434586</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #b5cea8; line-height: 140%;">0.0</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*Get WCS point*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">transformFromLonLatAlt</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">refPtInLatLong</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #c8c8c8; line-height: 140%;">refPtInUTM84</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setReferencePoint</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">refPtInUTM84</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">setNorthDirectionVector</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #4ec9b0; line-height: 140%;">AcGeVector2d</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">kYAxis</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: #608b4e; line-height: 140%;">/*clean up*/</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #569cd6; line-height: 140%;">delete</span> <span style="color: #c8c8c8; line-height: 140%;">pGeoCS</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160;&#0160;&#0160; </span><span style="color: #c8c8c8; line-height: 140%;">pGeoData</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">close</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;">&#0160;</p>
<p style="margin: 0px;"><span style="line-height: 140%;">&#0160; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p>
</div>
<p>&#0160;</p>
<p>After the code,&#0160; turn on GEOMAP from ribbon or command, set type to Aerial view.</p>
<p>If you find difficult in loading Maps, make sure if you have logged in A360.</p>
<p>Here are few troubleshooting tips to generate Maps perfectly.</p>
<ol>
<li>Log out of A360.</li>
<li>Quit AutoCAD.</li>
<li>Right-click the Autodesk 360 icon in the Windows system tray and choose&#0160; Exit.</li>
<li>Run&#0160; Windows Task manager and terminate the processes <em>AcSettingsSync.exe and AdSync.exe</em> if they are running.</li>
<li>Open a Windows File Explorer window and navigate to the following folder:<br /><em>%localappdata%\Autodesk </em><br /><em>Note: </em>You can also paste &quot;%localappdata%&quot; into the address bar of a Windows File Explorer.</li>
<li>Delete the folder <em>C:\Users\....\AppData\Local\Autodesk\Web Services.</em></li>
<li>Restart AutoCAD.</li>
</ol>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b7c83fd9c4970b-pi"><img alt="HyderbadOffice" border="0" height="150" src="/assets/image_872409.jpg" style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="HyderbadOffice" width="244" /></a></p>
