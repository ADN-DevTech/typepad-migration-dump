---
layout: "post"
title: "Determine if text is annotative"
date: "2013-01-09 10:41:13"
author: "Augusto Goncalves"
categories:
  - "Augusto Goncalves"
  - "AutoCAD"
  - "LISP"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/determine-if-text-is-annotative.html "
typepad_basename: "determine-if-text-is-annotative"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>It is possible to check the DXF code and the XDATA of the text to determine if a text entity is annotative. Annotative text has XDATA with an application name &quot;AcadAnnotative&quot;. Also the second 1070 DXF code will be 1. </p>  <p>To determine if text is annotative, get the XDATA with the application name and check the second 1070 DXF code. This approach will also apply to other objects that support the annotative feature. </p>  <p>The following lisp code determines if a selected entity is annotative. </p>  <p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> IsAnnotative <span style="color: #ff0000">(</span><span style="color: #ff0000">)</span>      <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> elst <span style="color: #ff0000">(</span><span style="color: #0000ff">entget</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">car</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">entsel</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span> '<span style="color: #ff0000">(</span><span style="color: #ff00ff">&quot;AcadAnnotative&quot;</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> xlst <span style="color: #ff0000">(</span><span style="color: #0000ff">assoc</span> -3 elst<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">if</span>&#160;<span style="color: #ff0000">(</span>= xlst nil<span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">print</span>&#160;<span style="color: #ff00ff">&quot;It's NOT annotative!&quot;</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">progn</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> xlst1 <span style="color: #ff0000">(</span><span style="color: #0000ff">nth</span>&#160;<span style="color: #008000">1</span> xlst<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> bAnnotative <span style="color: #ff0000">(</span><span style="color: #0000ff">cdr</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">nth</span>&#160;<span style="color: #008000">4</span> xlst1<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">if</span>&#160;<span style="color: #ff0000">(</span>= bAnnotative <span style="color: #008000">0</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">print</span>&#160;<span style="color: #ff00ff">&quot;It's NOT annotative!&quot;</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">print</span>&#160;<span style="color: #ff00ff">&quot;It's annotative!&quot;</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160; <span style="color: #ff0000">)</span>      <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">princ</span><span style="color: #ff0000">)</span>      <br /><span style="color: #ff0000">)</span></span></p>
