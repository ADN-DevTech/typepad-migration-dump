---
layout: "post"
title: "Simple drawable overrule skeleton"
date: "2015-04-22 11:33:45"
author: "Augusto Goncalves"
categories:
  - ".NET"
  - "Augusto Goncalves"
  - "AutoCAD"
original_url: "https://adndevblog.typepad.com/autocad/2015/04/simple-drawable-overrule-skeleton.html "
typepad_basename: "simple-drawable-overrule-skeleton"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>We have a <a href="https://www.google.com.br/search?q=DrawableOverrule&amp;btnG=%C2%BB&amp;domains=adndevblog.typepad.com/autocad&amp;sitesearch=adndevblog.typepad.com/autocad">few samples of our blog</a> showing how create drawable overrule. But what’s the skeleton to set up? This is actually a recurrent question on our support, so I decided to share what is my recommendation. </p>  <p>To make it work you’ll need a class that implements the DrawableOverrule class and the WorldDraw method (and the ViewportDraw is more specific). I prefer have a command to active/deactivate the overrule and make it as startup command (<a href="http://adndevblog.typepad.com/autocad/2012/04/autoloader-the-startupcommand-parameter.html">using bundle format</a>). The command will check the variable and Add or Remove the overrule. Finally, remember to call Regen(), otherwise the new geometry will not appear.</p>  <p>The sample below should work for MText (for other types, just replace the class name).</p>  <pre style="font-size: 13px; font-family: consolas; background: white; color: black">[<span style="color: #2b91af">CommandMethod</span>(<span style="color: #a31515">&quot;simpleOverrule&quot;</span>)]<br /><span style="color: blue">public</span>&#160;<span style="color: blue">void</span> CmdSimpleOverrule()<br />{<br />&#160; <span style="color: blue">if</span> (_overrule == <span style="color: blue">null</span>)<br />&#160; {<br />&#160;&#160;&#160; _overrule = <span style="color: blue">new</span>&#160;<span style="color: #2b91af">TextOverrule</span>();<br />&#160;&#160;&#160; <span style="color: #2b91af">Overrule</span>.AddOverrule(<br />&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">RXClass</span>.GetClass(<span style="color: blue">typeof</span>(<span style="color: #2b91af">MText</span>)),<br />&#160;&#160;&#160;&#160;&#160; _overrule, <span style="color: blue">false</span>);<br />&#160; }<br />&#160; <span style="color: blue">else</span><br />&#160; {<br />&#160;&#160;&#160; <span style="color: #2b91af">Overrule</span>.RemoveOverrule(<br />&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">RXClass</span>.GetClass(<span style="color: blue">typeof</span>(<span style="color: #2b91af">MText</span>)),<br />&#160;&#160;&#160;&#160;&#160; _overrule);<br />&#160;&#160;&#160; _overrule = <span style="color: blue">null</span>;<br />&#160; }<br />&#160; <span style="color: #2b91af">Application</span>.DocumentManager.MdiActiveDocument.Editor.Regen();<br />}<br /> <br /><span style="color: blue">private</span>&#160;<span style="color: blue">static</span>&#160;<span style="color: #2b91af">TextOverrule</span> _overrule = <span style="color: blue">null</span>;<br /> <br /><span style="color: blue">public</span>&#160;<span style="color: blue">class</span>&#160;<span style="color: #2b91af">TextOverrule</span> : <span style="color: #2b91af">DrawableOverrule</span><br />{<br />&#160; <span style="color: blue">public</span>&#160;<span style="color: blue">override</span>&#160;<span style="color: blue">bool</span> WorldDraw(<span style="color: #2b91af">Drawable</span> drawable, <span style="color: #2b91af">WorldDraw</span> wd)<br />&#160; {<br />&#160;&#160;&#160; <span style="color: green">// draw the base class</span><br />&#160;&#160;&#160; <span style="color: blue">bool</span> ret = <span style="color: blue">base</span>.WorldDraw(drawable, wd);<br /> <br />&#160;&#160;&#160; <span style="color: green">// your custom code here</span><br />&#160;&#160;&#160; <span style="color: green">//</span><br />&#160;&#160;&#160; <span style="color: green">//</span><br /> <br />&#160;&#160;&#160; <span style="color: green">// return the base</span><br />&#160;&#160;&#160; <span style="color: blue">return</span> ret;<br />&#160; }<br />}</pre>
