---
layout: "post"
title: "Most common mistakes developing custom entities"
date: "2013-01-23 11:06:33"
author: "Augusto Goncalves"
categories:
  - "Augusto Goncalves"
  - "AutoCAD"
  - "ObjectARX"
  - "RealDWG"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/most-common-mistakes-developing-custom-entities.html "
typepad_basename: "most-common-mistakes-developing-custom-entities"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>Please check the most common errors made from developers while creating custom   <br />objects/entities</p>  <ul>   <li><strong>Do you use appropriate macros ACRX_DECLARE_MEMBERS / ACRX_DXF_DEFINE_MEMBERS ?       <br /></strong>From cut and paste of other source code you may declare a wrong parent object in ACRX_DXF_DEFINE_MEMBERS. e.g. a custom class may be derived from AcDbEntity but in the macro AcDbObject is written.      <br /></li>    <li><strong>Do you initialize the custom classes while your ObjectDBX module is loaded ?       <br /></strong></li>    <div style="font-family: ; background: white">     <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">MyClass::rxInit();</font></font></p>      <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">acrxBuildClassHierarchy();           <br /></font></font>        <br /></p>   </div>    <li><strong>Unregister custom classes</strong>      <br />Make also sure that you unregister your class if you unload your application deleteAcRxClass(MyClass::desc()). Otherwise you may encounter a crash later on.      <br /></li>    <li><strong>Read/write permissions on dwgIn/OutFields       <br /></strong>Do you call assertWriteEnabled() in dwgInFields and assertReadEnabled() in      <br />dwgOutFields first?      <br /></li>    <li><strong>Do you call dwgIn/OutFields of the correct parent object ?</strong>      <br />If you have a member variable declared as &quot;int&quot; make sure that you write it out      <br />as Adesk::UIntXX or declare your integer variable as such, otherwise will be written on other format, as shown below:      <br /></li>    <div style="font-family: ; background: white">     <p style="margin: 0px"><font face="Courier New"><span><font color="#0000ff"><font style="font-size: 8pt">int</font></font></span><font style="font-size: 8pt" color="#000000"> m_mumber;</font></font></p>      <p style="margin: 0px"><font face="Courier New"><font color="#000000"><font style="font-size: 8pt">pFiler-&gt;writeItem(m_number) </font></font><span><font style="font-size: 8pt" color="#008000">// will be written as boolean</font></span></font></p>   </div> </ul>  <p>   <br /></p>  <ul>   <li><strong>When cut/copy and paste code, check that you don't write out an address.</strong></li>    <div style="font-family: ; background: white">     <p style="margin: 0px">       <br /></p>      <div style="font-family: ; background: white">       <p style="margin: 0px"><font face="Courier New"><span><font color="#0000ff"><font style="font-size: 8pt">double</font></font></span><font style="font-size: 8pt" color="#000000"> m_value;</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">dwgInFields(AcDbDwgFiler *pFiler)</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">...</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">pFiler-&gt;(&amp;m_value)</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">dwgOutFields(AcDbDwgFiler *pFiler)</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font style="font-size: 8pt" color="#000000">...</font></font></p>        <p style="margin: 0px"><font face="Courier New"><font color="#000000"><font style="font-size: 8pt">pFiler-&gt;(&amp;m_value) </font></font><span><font style="font-size: 8pt" color="#008000">// copied from dwgInFields - remove &amp; operator</font></span></font>          <br />          <br /></p>     </div>   </div>    <li><strong>A function which you override is not called?       <br /></strong>Check that you use the correct syntax. e.g. explode() is defined as      <br /><font face="Courier New"><font color="#000000"><font style="font-size: 8pt">Acad::ErrorStatus explode(AcDbVoidPtrArray&amp; entitySet) </font></font><span><font style="font-size: 8pt" color="#0000ff">const</font></span></font>      <br />if you miss the const declaration your explode() function will not be called.      <br /></li>    <li><strong>Please consider an extra member variable which stores the version of your object.       <br /></strong>You might get problems later on if you have to expand the member variables of your custom entity.</li> </ul>
