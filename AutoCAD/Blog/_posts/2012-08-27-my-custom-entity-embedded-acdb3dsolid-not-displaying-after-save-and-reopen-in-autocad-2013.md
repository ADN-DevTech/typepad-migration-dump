---
layout: "post"
title: "My Custom Entity Embedded AcDb3dSolid not displaying after save and reopen in AutoCAD 2013"
date: "2012-08-27 14:19:43"
author: "Fenton Webb"
categories:
  - "2013"
  - "AutoCAD"
  - "Fenton Webb"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2012/08/my-custom-entity-embedded-acdb3dsolid-not-displaying-after-save-and-reopen-in-autocad-2013.html "
typepad_basename: "my-custom-entity-embedded-acdb3dsolid-not-displaying-after-save-and-reopen-in-autocad-2013"
typepad_status: "Publish"
---

<p>by <a href="http://adndevblog.typepad.com/autocad/fenton-webb.html">Fenton Webb</a></p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">In AutoCAD 2013 and RealDWG 2013 based applications, ASM based entities (AcDb3dSolid, AcDbRegion, AcDbBody, AcDbSurface and classes derived from it) have their ASM data stored separately from the entity.&#160; ASM based entities without an ObjectId were not saving their ASM data to a file.&#160; For entities added to a BlockTableRecord this isn't a problem since they have ObjectIds.        </font></p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">The problem is with entities embedded within other custom entities; embedded entities do not have ObjectIds.        </font></p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">To address this, we have added a new protocol extension class:        </font></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">class</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black"> : </span><span style="font-size: 8pt; font-family: consolas; color: blue">public</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcRxObject</span><span style="font-size: 8pt; font-family: consolas; color: black">         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">public</span><span style="font-size: 8pt; font-family: consolas; color: black">:         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">ACRX_DECLARE_MEMBERS</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">ACDB_PORT</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: blue">void</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">setIsEmbeddedEnt</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbObject</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pObj</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: blue">bool</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">bIsEmbedded</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: blue">true</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">};         </span></p>  <p style="background: white; margin: 0in 0in 0pt">   <p><font color="#000000" size="3" face="Times New Roman">&#160;</font></p> </p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">This new protocol extension class is only present on the ASM based entity classes.&#160; Custom entities that embed ASM based entities, should use this new protocol extension class to set a flag in the embedded ASM based entities indicating that they are embedded.&#160; During a save, when this flag is set, the ASM data will be saved as part of the ASM based entity as was done prior to the 2013 release.         </font></p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">That takes care of the saving part.&#160; BUT, for reading in, some additional checking must be done to determine if the host application's acdb19.dll has the new protocol extension class.&#160; If it does not, then that host application cannot properly read in the saved data of the embedded ASM based entity, so the custom entity should return an ErrorStatus of Acad::eMakeMeAProxy from its dwgInFields() instead of calling dwgInFields() on the embedded ASM based entity.&#160; This will cause the custom entity to become a proxy and the ASM based entity will remain as an unprocessed data blob within the proxy.         </font></p>  <p class="MsoNormal" style="margin: 0in 0in 10pt"><font color="#000000">For dxfInFields(), there is no way to force the custom entity to be made a proxy, so the custom entity should return any non-eOk ErrorStatus instead of calling dxfInFields() on the embedded ASM based entity.&#160; This will abort the dxfin operation. Here's a very simple example of a custom entity class with an embedded AcDb3dSolid that has the necessary changes to make use of the new protocol extension:         </font></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">class</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black"> : </span><span style="font-size: 8pt; font-family: consolas; color: blue">public</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">public</span><span style="font-size: 8pt; font-family: consolas; color: black">:         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">ACRX_DECLARE_MEMBERS</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> ~</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDwgFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDwgFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">) </span><span style="font-size: 8pt; font-family: consolas; color: blue">const</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Adesk</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">Boolean</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">subWorldDraw</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcGiWorldDraw</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pWd</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfInFields</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDxfFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">virtual</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDxfFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">) </span><span style="font-size: 8pt; font-family: consolas; color: blue">const</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">void</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">initializeSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">()         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">) {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">setDatabaseDefaults</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">createSphere</span><span style="font-size: 8pt; font-family: consolas; color: black">(400);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">static</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">private</span><span style="font-size: 8pt; font-family: consolas; color: black">:         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb3dSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">};         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">()         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">static</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">NULL</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">static</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: blue">bool</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">bInit</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: blue">true</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// We only need to do this once per session because the protocol extension </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// is loaded at AcDb initialization, so if it isn't already present, it won't </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// be for the rest of the session. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">bInit</span><span style="font-size: 8pt; font-family: consolas; color: black">) {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">bInit</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: blue">false</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcRxClass</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pCls</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb3dSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">desc</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// We get the AcDbEmbeddedASMEntityPropsPE AcRxClass object pointer from the </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// dictionary instead of using AcDbEmbeddedASMEntityPropsPE::desc() so that we </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// don't have a dependency on AcDbEmbeddedASMEntityPropsPE::desc() that would </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// prevent loading our app into a host application that does not have the </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// fixed acdb19.dll. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcRxClass</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPECls</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcRxClass</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">cast</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">acrxClassDictionary</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">at</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">L</span><span style="font-size: 8pt; font-family: consolas; color: #a31515">&quot;AcDbEmbeddedASMEntPropsPE&quot;</span><span style="font-size: 8pt; font-family: consolas; color: black">));         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">pCls</span><span style="font-size: 8pt; font-family: consolas; color: black"> &amp;&amp; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPECls</span><span style="font-size: 8pt; font-family: consolas; color: black">) {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black"> = (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">*)</span><span style="font-size: 8pt; font-family: consolas; color: #010001">pCls</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">queryX</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPECls</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">ACRX_DXF_DEFINE_MEMBERS</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kDHL_CURRENT</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kMReleaseCurrent</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbProxyEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kNoOperation</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">,         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidTest</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">()         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: blue">new</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb3dSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEmbeddedASMEntPropsPE</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black"> &amp;&amp; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pPE</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">setIsEmbeddedEnt</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::~</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">()         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">delete</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDwgFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOutOfMemory</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// If the embeddedASM protocol extension is not present, then we cannot </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// read in from file because the necessary code is not present in acdb. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// So, we return the error eMakeMeAProxy to force acdb to make us a proxy </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// and not require reading in the data on a per-class basis. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">() &amp;&amp; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filerType</span><span style="font-size: 8pt; font-family: consolas; color: black">() == </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kFileFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eMakeMeProxy</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">assertWriteEnabled</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDwgFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">) </span><span style="font-size: 8pt; font-family: consolas; color: blue">const</span><span style="font-size: 8pt; font-family: consolas; color: black">         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOutOfMemory</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">assertReadEnabled</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dwgOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfInFields</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDxfFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">)\         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOutOfMemory</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// If the embeddedASM protocol extension is not present, then we cannot </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// read in from file because the necessary code is not present in acdb. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// So, we return an error.&#160; Unfortunately, we can't get dxf to turn us </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// into a proxy - any return other than eOk will just cause the dxf to </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// be aborted. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">()) {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">setError</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eMissingDxfField</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">L</span><span style="font-size: 8pt; font-family: consolas; color: #a31515">&quot;Missing necessary ASM protocol extension&quot;</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eInvalidContext</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">assertWriteEnabled</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">atEmbeddedObjectStart</span><span style="font-size: 8pt; font-family: consolas; color: black">())         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfInFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">else</span><span style="font-size: 8pt; font-family: consolas; color: black">         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">setError</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eMissingDxfField</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">L</span><span style="font-size: 8pt; font-family: consolas; color: #a31515">&quot;Missing expected embeddedObject marker&quot;</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filerStatus</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbDxfFiler</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">) </span><span style="font-size: 8pt; font-family: consolas; color: blue">const</span><span style="font-size: 8pt; font-family: consolas; color: black">         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOutOfMemory</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">assertReadEnabled</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">writeEmbeddedObjectStart</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">dxfOutFields</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">filer</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: #010001">Adesk</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">Boolean</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">subWorldDraw</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcGiWorldDraw</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pWd</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pWd</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">geometry</span><span style="font-size: 8pt; font-family: consolas; color: black">().</span><span style="font-size: 8pt; font-family: consolas; color: #010001">draw</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">mpSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Adesk</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kTrue</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: blue">void</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">creatCustomEnt</span><span style="font-size: 8pt; font-family: consolas; color: black">()         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">{         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// If we don't have the necessary support to save the ASM data, </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// then don't allow creatining one of our entities. </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: green">// </span><span style="font-size: 8pt; font-family: consolas; color: black">        </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (!</span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getEmbedPE</span><span style="font-size: 8pt; font-family: consolas; color: black">())         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pTestSolid</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: blue">new</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">EmbeddedSolidWrapper</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pTestSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">initializeSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">NULL</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ErrorStatus</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">acdbHostApplicationServices</span><span style="font-size: 8pt; font-family: consolas; color: black">()-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">workingDatabase</span><span style="font-size: 8pt; font-family: consolas; color: black">()-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">pBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kForRead</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbBlockTableRecord</span><span style="font-size: 8pt; font-family: consolas; color: black">* </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pRecord</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">NULL</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">getAt</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">ACDB_MODEL_SPACE</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pRecord</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDb</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">kForWrite</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">)         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pBlockTable</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">close</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">AcDbObjectId</span><span style="font-size: 8pt; font-family: consolas; color: black"> </span><span style="font-size: 8pt; font-family: consolas; color: #010001">retId</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> = </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pRecord</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">appendAcDbEntity</span><span style="font-size: 8pt; font-family: consolas; color: black">(</span><span style="font-size: 8pt; font-family: consolas; color: #010001">retId</span><span style="font-size: 8pt; font-family: consolas; color: black">, </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pTestSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">);         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pRecord</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">close</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">if</span><span style="font-size: 8pt; font-family: consolas; color: black"> (</span><span style="font-size: 8pt; font-family: consolas; color: #010001">es</span><span style="font-size: 8pt; font-family: consolas; color: black"> != </span><span style="font-size: 8pt; font-family: consolas; color: #010001">Acad</span><span style="font-size: 8pt; font-family: consolas; color: black">::</span><span style="font-size: 8pt; font-family: consolas; color: #010001">eOk</span><span style="font-size: 8pt; font-family: consolas; color: black">) {         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160;&#160;&#160; </span><span style="font-size: 8pt; font-family: consolas; color: blue">return</span><span style="font-size: 8pt; font-family: consolas; color: black">;         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; }         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">&#160; </span><span style="font-size: 8pt; font-family: consolas; color: #010001">pTestSolid</span><span style="font-size: 8pt; font-family: consolas; color: black">-&gt;</span><span style="font-size: 8pt; font-family: consolas; color: #010001">close</span><span style="font-size: 8pt; font-family: consolas; color: black">();         </span></p>  <p style="background: white; margin: 0in 0in 0pt"><span style="font-size: 8pt; font-family: consolas; color: black">}        </span></p>  <p><span style="font-size: 8pt; font-family: consolas; color: black; line-height: 115%; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-fareast-language: en-us; mso-ansi-language: en-gb; mso-bidi-language: ar-sa">&#160;</span></p>
