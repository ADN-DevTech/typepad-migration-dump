---
layout: "post"
title: "How does DocVars.dataVars() work in ObjectARX?"
date: "2013-01-15 15:18:16"
author: "Gopinath Taget"
categories:
  - "2010"
  - "2011"
  - "2012"
  - "2013"
  - "AutoCAD"
  - "Gopinath Taget"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/how-does-docvarsdatavars-work-in-objectarx.html "
typepad_basename: "how-does-docvarsdatavars-work-in-objectarx"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/gopinath-taget.html">Gopinath Taget</a></p>  <p>You might find some of the behavior of the DocData class generated by the ObjectARX Wizard puzzling:</p>  <ol>   <li>When you try to access one of your document specific data items, the CDocData constructor called many timesï»¿</li>    <li>The values that you initialized in my CDocData constructor seem to get lost, as if the initialization never happened.</li> </ol>  <p>The reason for this kind of behavior is that in the asdkDataManager template, we are using the Standard Template library (STL) &quot;std::map&quot; to hold all of your application's Document specific data. This &quot;map&quot; is a what is known as a balanced binary tree and is created on the fly using the address of the AcApDocument (AcApDocument&#160; *) associated with the drawing as a key.</p>  <p>Because the tree is made on the fly, i.e. when you first try to access DocVars.docData() it will create new entries for you in the tree (as you would expect) but also, it will try and balance the tree so that access time is made extremely fast. It does this balancing by testing each key that it has to see if it's lower or higher than the others it has already stored, it then makes the decision to sort the tree of not. The continual calling of your constructors is the std::map tree creating temporary objects so that it can copy them around and thus balance the tree. There is lots of information on STL on CodeGuru.com.</p>  <p>About the values being lost or appear uninitialized, this is likely because you have not implemented the same initialization in the CDocData::CDocData(CDocData &amp;) copy constructor. This constructor is what STL mainly uses to create temporary objects for sorting purposes.</p>
