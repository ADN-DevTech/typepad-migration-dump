---
layout: "post"
title: "Create an AcDbArc from three points using ObjectARX"
date: "2013-01-07 13:58:26"
author: "Fenton Webb"
categories:
  - "2010"
  - "2011"
  - "2012"
  - "2013"
  - "AutoCAD"
  - "Fenton Webb"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/create-an-acdbarc-from-three-points-using-objectarx.html "
typepad_basename: "create-an-acdbarc-from-three-points-using-objectarx"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/fenton-webb.html">Fenton Webb</a></p>  <p>Before we get started with this one, aside from the original issue and solution text, notice the function for converting AcGeCurve objects into AcDbCurve equivalents <span style="color: "><font color="#010001" face="Consolas">createFromAcGeCurve() </font></span>– very useful…</p>  <p><b>Issue</b></p>  <p>Similar to command line creation of an arc, how to create an AcDbArc in   <br />ARX by specifying a startpoint, midpoint and endpoint ?</p>  <p><a name="section2"></a></p>  <p><b>Solution</b></p>  <p>You can emulate this AutoCAD-editor feature by using the AcGe helper classes:</p>  <div style="font-family: ; background: white; color: ">   <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">void</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#010001">test2</font></span><font color="#000000">() </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">{&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// get the points</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">p1</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">p2</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">p3</font></span><font color="#000000">;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">RTNORM</font></span><font color="#000000"> != </font><span style="color: "><font color="#010001">acedGetPoint</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">NULL</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">L</font></span><span style="color: "><font color="#a31515">&quot;First point: &quot;</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">asDblArray</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">p1</font></span><font color="#000000">))&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt"> || </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">RTNORM</font></span><font color="#000000"> != </font><span style="color: "><font color="#010001">acedGetPoint</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">NULL</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">L</font></span><span style="color: "><font color="#a31515">&quot;Second point: &quot;</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">asDblArray</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">p2</font></span><font color="#000000">))&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; || </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">RTNORM</font></span><font color="#000000"> != </font><span style="color: "><font color="#010001">acedGetPoint</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">NULL</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">L</font></span><span style="color: "><font color="#a31515">&quot;Third point: &quot;</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">asDblArray</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">p3</font></span><font color="#000000">)))&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; { </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">acutPrintf</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">L</font></span><span style="color: "><font color="#a31515">&quot;\nFunction canceled\n&quot;</font></span><font color="#000000"> );&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">return</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; }&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// create an AcGeCirc</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeCircArc3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">geArc</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">p1</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">p2</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">p3</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbArc</font></span><font color="#000000"> *</font><span style="color: "><font color="#010001">pArc</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">NULL</font></span><font color="#000000">;</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// now convert the AcGeCirc to an AcDbArc</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbCurve</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">createFromAcGeCurve</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">geArc</font></span><font color="#000000">, (</font><span style="color: "><font color="#010001">AcDbCurve</font></span><font color="#000000">*&amp;) </font><span style="color: "><font color="#010001">pArc</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// now cast to a smart pointer so we don't have to worry about</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// closing or freeing</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbObjectPointer</font></span><font color="#000000">&lt;</font><span style="color: "><font color="#010001">AcDbArc</font></span><font color="#000000">&gt; </font><span style="color: "><font color="#010001">arc</font></span><font color="#000000">;</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">arc</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">acquire</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">pArc</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// get the current database</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbDatabase</font></span><font color="#000000"> *</font><span style="color: "><font color="#010001">db</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">curDoc</font></span><font color="#000000">()-&gt;</font><span style="color: "><font color="#010001">database</font></span><font color="#000000">();</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbBlockTableRecordPointer</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">curSpace</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">db</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">currentSpaceId</font></span><font color="#000000">(), </font><span style="color: "><font color="#010001">AcDb</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kForWrite</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">curSpace</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">openStatus</font></span><font color="#000000">() == </font><span style="color: "><font color="#010001">Acad</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">eOk</font></span><font color="#000000">)</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">curSpace</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">appendAcDbEntity</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">arc</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">object</font></span><font color="#000000">());</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></p> </div>
