---
layout: "post"
title: "How To Get Colors Of SUN"
date: "2016-06-02 22:03:00"
author: "Madhukar Moogala"
categories:
  - "Madhukar Moogala"
  - "ObjectARX"
original_url: "https://adndevblog.typepad.com/autocad/2016/06/how-to-get-colors-of-sun.html "
typepad_basename: "how-to-get-colors-of-sun"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/Madhukar-Moogala.html" target="_self">Madhukar Moogala</a></p> <p>The colour of SUN is calculated algorithmically based on geographic location and date \time of that day.</p> <p>With ObjectARX 2017, we have an API to get color same as that appear on Sun properties palette.</p> <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d1f1d92c970c-pi"><img title="SUNprops" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="SUNprops" src="/assets/image_737450.jpg" width="230" height="408"></a></p> <p>The code is self explanatory.</p> <p>The API may come of us, if users want to create an artificial light want to set same as sun colour with going much complexity of calculation colour values.</p> <div style="font-family: Consolas; font-size: 10pt; color: #dcdcdc; background: #1e1e1e;"><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">static</span><span style="line-height: 140%;"> </span><span style="color: #569cd6; line-height: 140%;">void</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">sunColor</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #569cd6; line-height: 140%;">void</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #608b4e; line-height: 140%;">/*make sure is SUN enabled */</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #608b4e; line-height: 140%;">/*Set SUNSTATUS to 1*/</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">curVportId</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">kNull</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">curVportId</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">acedActiveViewportId</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">struct</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">resbuf</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">rb</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">int</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">rt</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">acedGetVar</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;CVPORT&quot;</span><span style="color: #b4b4b4; line-height: 140%;">),</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">&amp;</span><span style="color: #c8c8c8; line-height: 140%;">rb</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">rt</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">!=</span><span style="line-height: 140%;"> </span><span style="color: #bd63c5; line-height: 140%;">RTNORM</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">acutPrintf</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;\nError acquiring sysvar \&quot;CVPORT\&quot; value.&quot;</span><span style="color: #b4b4b4; line-height: 140%;">));</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">return</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">int</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">vportNum</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">rb</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">resval</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">rint</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbViewportTableRecord</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">curVTR</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">curVportId</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kForWrite</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">curVTR</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">openStatus</span><span style="color: #b4b4b4; line-height: 140%;">()</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">==</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">Acad</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">eOk</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">curVTR</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">sunId</span><span style="color: #b4b4b4; line-height: 140%;">()</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">!=</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectId</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #c8c8c8; line-height: 140%;">kNull</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #608b4e; line-height: 140%;">/*Sun enabled, try to get color of AutoCAD sun*/</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #4ec9b0; line-height: 140%;">AcDbObjectPointer</span><span style="color: #b4b4b4; line-height: 140%;">&lt;</span><span style="color: #4ec9b0; line-height: 140%;">AcDbSun</span><span style="color: #b4b4b4; line-height: 140%;">&gt;</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">pSun</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">curVTR</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: #c8c8c8; line-height: 140%;">sunId</span><span style="color: #b4b4b4; line-height: 140%;">(),</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">AcDb</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">kForRead</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">if</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #c8c8c8; line-height: 140%;">pSun</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">openStatus</span><span style="color: #b4b4b4; line-height: 140%;">()</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">==</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">Acad</span><span style="color: #b4b4b4; line-height: 140%;">::</span><span style="color: #b8d7a3; line-height: 140%;">eOk</span><span style="color: #b4b4b4; line-height: 140%;">)</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">{</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">const</span><span style="line-height: 140%;"> </span><span style="color: #4ec9b0; line-height: 140%;">AcGiColorRGB</span><span style="color: #b4b4b4; line-height: 140%;">&amp;</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">sunColor</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">pSun</span><span style="color: #b4b4b4; line-height: 140%;">-&gt;</span><span style="color: white; line-height: 140%;">sunColorPhotometric</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #b5cea8; line-height: 140%;">1.0</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">double</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">factor</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #b5cea8; line-height: 140%;">255.0</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">double</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">r</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">sunColor</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">red</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">*</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">factor</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">double</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">g</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">sunColor</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">green</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">*</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">factor</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #569cd6; line-height: 140%;">double</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">b</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">=</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">sunColor</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #dadada; line-height: 140%;">blue</span><span style="line-height: 140%;"> </span><span style="color: #b4b4b4; line-height: 140%;">*</span><span style="line-height: 140%;"> </span><span style="color: #c8c8c8; line-height: 140%;">factor</span><span style="color: #b4b4b4; line-height: 140%;">;</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">acutPrintf</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #bd63c5; line-height: 140%;">_T</span><span style="color: #b4b4b4; line-height: 140%;">(</span><span style="color: #d69d85; line-height: 140%;">&quot;R[%f],G[%f],B[%f]&quot;</span><span style="color: #b4b4b4; line-height: 140%;">),</span><span style="color: #c8c8c8; line-height: 140%;">r</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #c8c8c8; line-height: 140%;">g</span><span style="color: #b4b4b4; line-height: 140%;">,</span><span style="color: #c8c8c8; line-height: 140%;">b</span><span style="color: #b4b4b4; line-height: 140%;">);</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">pSun</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">close</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #c8c8c8; line-height: 140%;">curVTR</span><span style="color: #b4b4b4; line-height: 140%;">.</span><span style="color: #c8c8c8; line-height: 140%;">close</span><span style="color: #b4b4b4; line-height: 140%;">();</span></p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p><p style="margin: 0px;">&nbsp;</p><p style="margin: 0px;"><span style="line-height: 140%;">&nbsp; </span><span style="color: #b4b4b4; line-height: 140%;">}</span></p></div>
