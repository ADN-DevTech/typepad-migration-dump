---
layout: "post"
title: "Detect when a sysvar is changed"
date: "2012-12-21 01:25:17"
author: "Xiaodong Liang"
categories:
  - "AutoCAD"
  - "ObjectARX"
  - "Xiaodong Liang"
original_url: "https://adndevblog.typepad.com/autocad/2012/12/detect-when-a-sysvar-is-changed.html "
typepad_basename: "detect-when-a-sysvar-is-changed"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/xiaodong-liang.html" target="_self">Xiaodong Liang</a></p>  <p>AcEditorReactor.sysVarWillChange and AcEditorReactor.sysVarChanged&#160; allow you to watch the events when the sysvar will change or is changed. Following is a small demo.</p>  <div style="font-family: courier new; background: white; color: black; font-size: 9pt">   <p style="margin: 0px"><span style="line-height: 140%; color: blue">class</span><span style="line-height: 140%"> clsEditorReactor : </span><span style="line-height: 140%; color: blue">public</span><span style="line-height: 140%"> AcEditorReactor2 </span></p>    <p style="margin: 0px"><span style="line-height: 140%">{</span></p>    <p style="margin: 0px"><span style="line-height: 140%; color: blue">public</span><span style="line-height: 140%">:</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; clsEditorReactor() </span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; {</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="line-height: 140%; color: green">// add the reactor to editor</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; acedEditor-&gt;addReactor(</span><span style="line-height: 140%; color: blue">this</span><span style="line-height: 140%">);</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; }</span></p>    <p style="margin: 0px">&#160;</p>    <blockquote>     <p style="margin: 0px"><span style="line-height: 140%; color: blue">virtual</span><span style="line-height: 140%"> </span><span style="line-height: 140%; color: blue">void</span><span style="line-height: 140%">&#160;&#160;&#160; sysVarChanged(</span></p>      <p style="margin: 0px"><span style="line-height: 140%"></span><span style="line-height: 140%; color: blue">&#160;&#160;&#160; const</span><span style="line-height: 140%"> TCHAR * varName,</span><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></p>      <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; Adesk::Boolean success)</span></p>   </blockquote>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; {</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="line-height: 140%; color: green">// inform the sysvar is changed</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; acutPrintf(L</span><span style="line-height: 140%; color: #a31515">&quot;[ %s ]&#160; changed&quot;</span><span style="line-height: 140%">,varName);</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; }</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; </span><span style="line-height: 140%; color: blue">virtual</span><span style="line-height: 140%"> </span><span style="line-height: 140%; color: blue">void</span><span style="line-height: 140%">&#160; sysVarWillChange(</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="line-height: 140%; color: blue">const</span><span style="line-height: 140%"> TCHAR * varName)</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; {</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span><span style="line-height: 140%; color: green">// inform the sysvar will change</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160;&#160;&#160;&#160;&#160; acutPrintf(L</span><span style="line-height: 140%; color: #a31515">&quot;[ %s ] will change&quot;</span><span style="line-height: 140%">,varName);</span></p>    <p style="margin: 0px"><span style="line-height: 140%">&#160;&#160;&#160; }</span></p>    <p style="margin: 0px">&#160;</p>    <p style="margin: 0px"><span style="line-height: 140%">};</span></p>    <p style="margin: 0px">&#160;</p>    <p style="margin: 0px"><span style="line-height: 140%; color: green">// create a new instance of the reactor</span></p>    <p style="margin: 0px"><span style="line-height: 140%; color: green">// reactor will start</span></p> </div>  <p></p>  <div style="font-family: courier new; background: white; color: black; font-size: 9pt">   <p style="margin: 0px"><span style="line-height: 140%">clsEditorReactor *myReactor = </span><span style="line-height: 140%; color: blue">new</span><span style="line-height: 140%">&#160; clsEditorReactor();</span></p> </div>  <p></p>  <p>&#160;</p>  <p>In the past, there are some variables that do not generate notification if they are modified from within another command, especially transparent commands.If you meet such sysvar in the latest release, the workaround is to plant an AcEditorReactor, overriding commandWillStart() and commandEnded(). With the   <br />Inside commandWillStart() you can cache the variables that you want to check. Inside commandEnded(), compare the cached values with the current ones. If they are different, then you can do what you want to in your sysVarChanged function.</p>
