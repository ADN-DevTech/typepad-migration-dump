---
layout: "post"
title: "Get raster image variables"
date: "2012-11-13 10:45:29"
author: "Augusto Goncalves"
categories:
  - "Augusto Goncalves"
  - "AutoCAD"
  - "LISP"
original_url: "https://adndevblog.typepad.com/autocad/2012/11/get-raster-image-variables.html "
typepad_basename: "get-raster-image-variables"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>Is it possible to access, from AutoLISP, the raster image variables <strong>IMAGEFRAME</strong> and <strong>IMAGEQUALITY</strong>? It seems there are no 'real' AutoCAD variables and that I am not able to access them via (getvar) and (setvar).</p>  <p>The ImageEngine stores these variables in an AutoCAD dictionary. The dictionary has the name &quot;ACAD_IMAGE_VARS&quot;. To access this dictionary, you have to get the named object dictionary with (namedobjdict).</p>  <p>The following function gets the &quot;ACAD_IMAGE_VARS&quot; dictionary:</p>  <p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> GetImageVarsDict <span style="color: #ff0000">(</span><span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> dict <span style="color: #ff0000">(</span>dictsearch <span style="color: #ff0000">(</span>namedobjdict<span style="color: #ff0000">)</span>&#160;<span style="color: #ff00ff">&quot;ACAD_IMAGE_VARS&quot;</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160; <br /><span style="color: #ff0000">)</span></span></p>  <p>Group code 70 contains the value of IMAGEFRAME. If it is '0', the frames are off, if it is '1', the frames are on. Group code 71 contains the value of IMAGEQUALITY. If it is '0', the quality is &lt;draft&gt;, if it is '1', the quality is &lt;high&gt;.</p>  <p>To get the current settings, you can use the following:</p>  <p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> GetImageFrame <span style="color: #ff0000">(</span><span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> frames <span style="color: #ff0000">(</span><span style="color: #0000ff">cdr</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">assoc</span>&#160;<span style="color: #008000">70</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160; <br /><span style="color: #ff0000">)</span>      <br />      <br /><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> GetImageQuality <span style="color: #ff0000">(</span><span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> quality <span style="color: #ff0000">(</span><span style="color: #0000ff">cdr</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">assoc</span>&#160;<span style="color: #008000">71</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160; <br /><span style="color: #ff0000">)</span>      <br />      <br /></span></p>  <p>To change the settings, use the following code:</p>  <p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> SetImageFrame <span style="color: #ff0000">(</span>flag<span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span>entmod <span style="color: #ff0000">(</span>subst <span style="color: #ff0000">(</span>cons <span style="color: #008000">70</span> flag<span style="color: #ff0000">)       <br /></span></span><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">&#160;</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">assoc</span>&#160;<span style="color: #008000">70</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">princ</span><span style="color: #ff0000">)</span>&#160; <br /><span style="color: #ff0000">)</span>      <br />      <br /><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> SetImageQuality <span style="color: #ff0000">(</span>flag<span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span>entmod <span style="color: #ff0000">(</span>subst <span style="color: #ff0000">(</span>cons <span style="color: #008000">71</span> flag<span style="color: #ff0000">)       <br />&#160;</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">assoc</span>&#160;<span style="color: #008000">71</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160;<span style="color: #ff0000">(</span>GetImageVarsDict<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>&#160; <br />&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">princ</span><span style="color: #ff0000">)</span>&#160; <br /><span style="color: #ff0000">)</span></span></p>  <p>NOTE: You have to update the AutoCAD display list if you change IMAGEFRAME. You can do this with a REGEN, or you can select all images with (ssget) and update the single raster images with (entupd).</p>
