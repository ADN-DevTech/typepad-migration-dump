---
layout: "post"
title: "What&rsquo;s the meaning of getallobjects() in the context of nested transactions?"
date: "2012-08-27 06:52:46"
author: "Philippe Leefsma"
categories:
  - "AutoCAD"
  - "ObjectARX"
  - "Philippe Leefsma"
original_url: "https://adndevblog.typepad.com/autocad/2012/08/whats-the-meaning-of-getallobjects-in-the-context-of-nested-transactions.html "
typepad_basename: "whats-the-meaning-of-getallobjects-in-the-context-of-nested-transactions"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/philippe-leefsma.html" target="_self">Philippe Leefsma</a></p>  <p><b>Q:</b></p>  <p>Can you explain to me how getAllObjects() suppose to work in a nested transaction scenario? I can't find any related topics in the OARX Developer's Reference/Guide.</p>  <p><a name="section2"></a></p>  <p><b>A:</b></p>  <p>Let's say you have a scenario like this (in pseudo-code, all transactions are of AcDbTransaction type),</p>  <p><font color="#ffffff">-</font>    <br /><strong><em>T1       <br />&#160;&#160;&#160; ...        <br />&#160;&#160;&#160; T1-&gt;getAllObjects();        <br />&#160;&#160;&#160; T2        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; ...&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T1-&gt;getAllObjects();        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T3        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ...        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T3-&gt;getAllObjects();        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T1-&gt;getAllObjects();        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; end T3        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();        <br />&#160;&#160;&#160; end T2        <br />&#160;&#160;&#160; T1-&gt;getAllObjects();</em></strong></p>  <p><strong><em>end T1</em></strong>    <br /><font color="#ffffff">-</font></p>  <p>The<em> AcDbTransaction::getAllObjects()</em> method gets only those objects in the object list of the transaction on which the method is called. So, the real question is what objects are in a transaction's object list.</p>  <p>When an object is opened in a transaction (or a newly created object is added to a transaction), it can only be opened/added to the current transaction. So, in the above example, transaction T1 will only have objects that were opened/added before transaction T2 was created. Transaction T2 will only have objects that were opened/added after T2 was started, but before T3 was started. And, T3 will only have objects opened/added after it was started.</p>  <p>That covers what happens before any transaction is ended. When a nested transaction is ended, all the objects in that transaction are moved over to the transaction next up in the nesting. So, when T3 is ended, all its objects become part of T2's object list, and when T2 ends, all its objects become part of T1's object list.</p>  <p>So, within the above scenario,</p>  <p><font color="#ffffff">-</font>    <br /><strong><em>T1       <br />&#160;&#160;&#160; ...        <br />&#160;&#160;&#160; T1-&gt;getAllObjects();&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; //only T1 objects        <br />&#160;&#160;&#160; T2        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; ...&#160;&#160;&#160; <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();&#160;&#160;&#160;&#160;&#160;&#160;&#160; //only T2 objects        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T1-&gt;getAllObjects();&#160;&#160;&#160;&#160;&#160;&#160;&#160; //only T1 objects        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T3        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; ...        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T3-&gt;getAllObjects();&#160;&#160;&#160; //only T3 objects        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();&#160;&#160;&#160; //only T2 objects        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; T1-&gt;getAllObjects();&#160;&#160;&#160; //only T1 objects        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; end T3        <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; T2-&gt;getAllObjects();&#160;&#160;&#160;&#160;&#160;&#160;&#160; //both T2 and T3 objects        <br />&#160;&#160;&#160; end T2        <br />&#160;&#160;&#160; T1-&gt;getAllObjects();&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; //T1, T2 and T3 objects&#160;&#160; <br />end T1</em></strong>    <br /></p>  <p>If you use the <em>AcTransactionManager::getAllObjects()</em> method, then you will get all objects from all transactions active at the time of the call.</p>
