---
layout: "post"
title: "Mouse right button click and grips when using grread?"
date: "2013-01-18 08:56:15"
author: "Augusto Goncalves"
categories:
  - "Augusto Goncalves"
  - "AutoCAD"
  - "LISP"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/mouse-right-button-click-and-grips-when-using-grread.html "
typepad_basename: "mouse-right-button-click-and-grips-when-using-grread"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/augusto-goncalves.html">Augusto Goncalves</a></p>  <p>Using (grread) in a Lisp application to track user input. How to determine if the right mouse button has been pressed, and how get AutoCAD to display the grips of entities that were previously selected while (grread) is active?</p>  <p>If you right click, (grread) returns a list beginning with '25', so there should be no problem getting this information.</p>  <p>If you want to display the grip points of some entities, use (sssetfirst). There you can specify a selection set. AutoCAD then displays the grip points of every entity specified in the selection set.</p>  <p>Look at the following function to see how to get the right mouse button click is handled and how the grips of some entities are displayed. The function tests if there is an entity under the current cursor position and, if there is an entity, it displays the grips .To exit the (grread) loop, you have to press the right mouse button.</p>  <p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt"><span style="color: #ff0000">(</span><span style="color: #0000ff">defun</span> c:test <span style="color: #ff0000">(</span><span style="color: #ff0000">)</span>      <br />&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> run T<span style="color: #ff0000">)</span>      <br />&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">while</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">equal</span> run T<span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> res <span style="color: #ff0000">(</span>grread T<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> code <span style="color: #ff0000">(</span><span style="color: #0000ff">car</span> res<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />      <br />&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; 'normal' mouse move?       <br /></span>&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">if</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">equal</span> code <span style="color: #008000">5</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">progn</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; get the current cursor position       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> pt <span style="color: #ff0000">(</span><span style="color: #0000ff">car</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">cdr</span> res<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; is there something at the       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; current position?       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> ss <span style="color: #ff0000">(</span>ssget pt<span style="color: #ff0000">)</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">if</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">/</span>= ss nil<span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; yes, there is something.       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; show the grip points.       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span>sssetfirst nil ss<span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />      <br />&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; right mouse click?       <br /></span>&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">if</span>&#160;<span style="color: #ff0000">(</span><span style="color: #0000ff">equal</span> code <span style="color: #008000">25</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">progn</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; right mouse button clicked.       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background-color: #e6e6e6; color: #800080">;; exit the loop.       <br /></span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">princ</span>&#160;<span style="color: #ff00ff">&quot;\nRight mouse click.\n&quot;</span><span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">(</span><span style="color: #0000ff">setq</span> run nil<span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160;&#160;&#160;&#160;&#160; <span style="color: #ff0000">)</span>      <br />&#160;&#160; <span style="color: #ff0000">)</span>      <br /><span style="color: #ff0000">)</span></span></p> If (grread) returns a list beginning with 25 (right mouse button click), the function ends. If the returned list begins with 5, the rest of the list is the current coordinate.
