---
layout: "post"
title: "Convert 3dface to polyline"
date: "2013-01-03 03:51:00"
author: "Xiaodong Liang"
categories:
  - "AutoCAD"
  - "LISP"
  - "Xiaodong Liang"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/convert-3dface-to-polyline.html "
typepad_basename: "convert-3dface-to-polyline"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/xiaodong-liang.html" target="_self">Xiaodong Liang</a></p>
<p>To convert 3dFaces to polylines, what you&#39;ll need to do is    <br />collect the 3dFace vertex data, and create a polyline using that information. Since a 3dFace will probably be construced with differing X,Y, and Z coordinates you can only re-create them as a 3dPolyline. If the face&#39;s Z coordinates are on the same elevation, you could re-create them as a 2d polyline. Here&#39;s some lisp     <br />code to demonstrate this:</p>
<p><span style="line-height: 120%; font-family: &#39;courier new&#39;, courier; font-size: 8pt;">defun C:3DFtoPL<span style="color: #ff0000;">(</span><span style="color: #0000ff;">/</span> ss1 sl i<span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> ss1 <span style="color: #ff0000;">(</span>ssget <span style="color: #ff00ff;">&quot;X&quot;</span>&#0160;<span style="color: #ff0000;">(</span>list <span style="color: #ff0000;">(</span>cons &#39;0 <span style="color: #ff00ff;">&quot;3DFACE&quot;</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> sl <span style="color: #ff0000;">(</span>sslength ss1<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> i <span style="color: #008000;">0</span><span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">while</span>&#0160;<span style="color: #ff0000;">(</span>&lt; i sl<span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> ent1 <span style="color: #ff0000;">(</span><span style="color: #0000ff;">entget</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> e1 <span style="color: #ff0000;">(</span>ssname ss1 i<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> pt1 <span style="color: #ff0000;">(</span><span style="color: #0000ff;">cdr</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">assoc</span> &#39;10 ent1<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> pt2 <span style="color: #ff0000;">(</span><span style="color: #0000ff;">cdr</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">assoc</span> &#39;11 ent1<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> pt3 <span style="color: #ff0000;">(</span><span style="color: #0000ff;">cdr</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">assoc</span> &#39;12 ent1<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> pt4 <span style="color: #ff0000;">(</span><span style="color: #0000ff;">cdr</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">assoc</span> &#39;13 ent1<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="background-color: #e6e6e6; color: #800080;">;&#0160; Plain 2D Polylines       <br /></span>&#0160;&#0160;&#0160;&#0160; <span style="background-color: #e6e6e6; color: #800080;">;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">command</span>&#0160;<span style="color: #ff00ff;">&quot;PLINE&quot;</span> pt1 pt2 pt3<span style="color: #ff0000;">)</span>        <br /></span>&#0160;&#0160;&#0160;&#0160; <span style="background-color: #e6e6e6; color: #800080;">; 3dPolylines -&gt;       <br /></span>&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">command</span>&#0160;<span style="color: #ff00ff;">&quot;3DPOLY&quot;</span> pt1 pt2 pt3<span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">if</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">/</span>= pt3 pt4<span style="color: #ff0000;">)</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">command</span> pt4 <span style="color: #ff00ff;">&quot;c&quot;</span><span style="color: #ff0000;">)</span>&#0160;<span style="color: #ff0000;">(</span><span style="color: #0000ff;">command</span>&#0160;<span style="color: #ff00ff;">&quot;c&quot;</span><span style="color: #ff0000;">)</span>&#0160;<span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span>entdel e1<span style="color: #ff0000;">)</span>      <br />&#0160;&#0160;&#0160;&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> i <span style="color: #ff0000;">(</span><span style="color: #0000ff;">1+</span> i<span style="color: #ff0000;">)</span><span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">setq</span> ss1 nil<span style="color: #ff0000;">)</span>      <br />&#0160; <span style="color: #ff0000;">(</span><span style="color: #0000ff;">princ</span><span style="color: #ff0000;">)</span>      <br /><span style="color: #ff0000;">)</span>      <br />      <br /><span style="color: #ff0000;">(</span><span style="color: #0000ff;">princ</span>&#0160;<span style="color: #ff00ff;">&quot;\nC:3DFtoPL loaded, to run type 3DFtoPL.&quot;</span><span style="color: #ff0000;">)</span>      <br /><span style="color: #ff0000;">(</span><span style="color: #0000ff;">princ</span><span style="color: #ff0000;">)</span></span></p>
