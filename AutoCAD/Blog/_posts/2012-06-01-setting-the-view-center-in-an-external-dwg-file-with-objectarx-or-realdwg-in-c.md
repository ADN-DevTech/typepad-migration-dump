---
layout: "post"
title: "Setting the View Center in an external DWG file with ObjectARX or RealDWG in C++"
date: "2012-06-01 16:08:44"
author: "Fenton Webb"
categories:
  - "2010"
  - "2011"
  - "2012"
  - "2013"
  - "AutoCAD"
  - "Fenton Webb"
  - "ObjectARX"
  - "RealDWG"
original_url: "https://adndevblog.typepad.com/autocad/2012/06/setting-the-view-center-in-an-external-dwg-file-with-objectarx-or-realdwg-in-c.html "
typepad_basename: "setting-the-view-center-in-an-external-dwg-file-with-objectarx-or-realdwg-in-c"
typepad_status: "Publish"
---

<p>by <a href="http://adndevblog.typepad.com/autocad/fenton-webb.html">Fenton Webb</a></p>  <p>In raw AutoCAD setting the View center is really easy, just set the VIEWCTR sysvar using acedSetVar(“VIEWCTR”). If you want to set the View center in a DWG file that is not loaded into the AutoCAD editor, it takes a little more work.</p>  <p>Here’s how you do it…</p>  <div style="font-family: ; background: white; color: ">   <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">#include</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font></font><span style="color: "><font style="font-size: 8pt" color="#a31515">&quot;dbents.h&quot;</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">#include</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#a31515">&quot;dbobjptr2.h&quot;</font></span><font color="#000000">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// include the smart pointer template</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">static</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#0000ff">void</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">Wcs2Dcs</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">AcDbViewportTableRecord</font></span><font color="#000000"> *</font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> &amp;</font><span style="color: "><font color="#010001">resultMat</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><span style="color: "><font face="Consolas"><font style="font-size: 8pt" color="#008000">// set the viewctr outside of the AutoCAD Editor </font></font></span></p>    <p style="margin: 0px"><span style="color: "><font face="Consolas"><font style="font-size: 8pt" color="#008000">// by Fenton Webb, DevTech, Autodesk 01/06/2012</font></font></span></p>    <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">void</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#010001">setViewCenter</font></span><font color="#000000">()</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">{ </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// open some dwg file</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbDatabase</font></span><font color="#000000"> *</font><span style="color: "><font color="#010001">dwg</font></span><font color="#000000"> = </font><span style="color: "><font color="#0000ff">new</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">AcDbDatabase</font></span><font color="#000000">(</font><span style="color: "><font color="#0000ff">false</font></span><font color="#000000">, </font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000"> (</font><span style="color: "><font color="#010001">dwg</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">readDwgFile</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">_T</font></span><font color="#000000">(</font><span style="color: "><font color="#a31515">&quot;c:\\temp\\fenton.dwg&quot;</font></span><font color="#000000">)) == </font><span style="color: "><font color="#010001">Acad</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">eOk</font></span><font color="#000000">)</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; {</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// read in the whole file, don't cache</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">dwg</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">closeInput</font></span><font color="#000000">();</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// start by getting the viewport table id</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbObjectId</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">id</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">dwg</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">viewportTableId</font></span><font color="#000000">();</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; {</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbSmartObjectPointer</font></span><font color="#000000">&lt;</font><span style="color: "><font color="#010001">AcDbViewportTable</font></span><font color="#000000">&gt; </font><span style="color: "><font color="#010001">pVt</font></span><font color="#000000"> (</font><span style="color: "><font color="#010001">id</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">AcDb</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kForRead</font></span><font color="#000000">);</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// if ok</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000"> (</font><span style="color: "><font color="#010001">pVt</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">openStatus</font></span><font color="#000000">() == </font><span style="color: "><font color="#010001">Acad</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">eOk</font></span><font color="#000000">)</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160; {</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbObjectId</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">vpId</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// get the active viewport</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">pVt</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">getAt</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">_T</font></span><font color="#000000">(</font><span style="color: "><font color="#a31515">&quot;*Active&quot;</font></span><font color="#000000">), </font><span style="color: "><font color="#010001">vpId</font></span><font color="#000000">);&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// and open for write</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcDbViewportTableRecordPointer</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">vpId</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">AcDb</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kForWrite</font></span><font color="#000000">);&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// if ok</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000"> (</font><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">openStatus</font></span><font color="#000000">() == </font><span style="color: "><font color="#010001">Acad</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">eOk</font></span><font color="#000000">)</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">wcs2dcs</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">newCenter</font></span><font color="#000000">(100,100,0);&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">Wcs2Dcs</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">object</font></span><font color="#000000">(), </font><span style="color: "><font color="#010001">wcs2dcs</font></span><font color="#000000">);&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">newCenter</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">wcs2dcs</font></span><font color="#000000">*</font><span style="color: "><font color="#010001">newCenter</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// gives position of new pt in DCS wrt view center</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint2d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">oldCenter</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">centerPoint</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">setCenterPoint</font></span><font color="#000000">(</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint2d</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">newCenter</font></span><font color="#000000">[</font><span style="color: "><font color="#010001">X</font></span><font color="#000000">]+</font><span style="color: "><font color="#010001">oldCenter</font></span><font color="#000000">[</font><span style="color: "><font color="#010001">X</font></span><font color="#000000">],</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">newCenter</font></span><font color="#000000">[</font><span style="color: "><font color="#010001">Y</font></span><font color="#000000">]+</font><span style="color: "><font color="#010001">oldCenter</font></span><font color="#000000">[</font><span style="color: "><font color="#010001">Y</font></span><font color="#000000">]));&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// just set the view direction to show that also...</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">pOldVTR</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">setViewDirection</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">(-1,-1,1));&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160;&#160;&#160; }</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;&#160;&#160; }</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// save the changes</font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">Acad</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">ErrorStatus</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">es</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">dwg</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">saveAs</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">_T</font></span><font color="#000000">(</font><span style="color: "><font color="#a31515">&quot;c:\\temp\\fenton2.dwg&quot;</font></span><font color="#000000">));</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; }</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><span style="color: "><font face="Consolas"><font style="font-size: 8pt" color="#008000">/////////////////////////////////////////////////////////////////</font></font></span></p>    <p style="margin: 0px"><font face="Consolas"><span style="color: "><font color="#0000ff"><font style="font-size: 8pt">void</font></font></span><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#010001">Wcs2Dcs</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">AcDbViewportTableRecord</font></span><font color="#000000"> *</font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> &amp;</font><span style="color: "><font color="#010001">resultMat</font></span><font color="#000000">) </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">{&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// first get all the data&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">viewDirection</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">viewDirection</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint2d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">centre2d</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">centerPoint</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">viewCenter</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">centre2d</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">x</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">centre2d</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">y</font></span><font color="#000000">, 0);&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">viewTarget</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">target</font></span><font color="#000000"> ();&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">twistAngle</font></span><font color="#000000"> = -</font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">viewTwist</font></span><font color="#000000">();&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">height</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">height</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">width</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">width</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">lensLength</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">lensLength</font></span><font color="#000000">(); </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// prepare the transformation&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">yAxis</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">viewDirection</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">normal</font></span><font color="#000000">();&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kZAxis</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">crossProduct</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">viewDirection</font></span><font color="#000000"> );&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000">( !</font><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">isZeroLength</font></span><font color="#000000">() ) </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; {&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">normalize</font></span><font color="#000000">();&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">yAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">crossProduct</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000"> );&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; } </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">else</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">if</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">z</font></span><font color="#000000"> &lt; 0 ) </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; {&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000"> = -</font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kXAxis</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">yAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kYAxis</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000"> = -</font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kZAxis</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; } </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">else</font></span><font color="#000000"> </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; {&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kXAxis</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">yAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kYAxis</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeVector3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kZAxis</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; }&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// display coordinate system (DCS) to world coordinate system (WCS)&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// then adjust to the viewCenter&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">translation</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">viewCenter</font></span><font color="#000000"> - </font><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kOrigin</font></span><font color="#000000">);&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// Then transform for the view direction&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">matCoords</font></span><font color="#000000">;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">matCoords</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">setCoordSystem</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kOrigin</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">xAxis</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">yAxis</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000">);&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">matCoords</font></span><font color="#000000"> * </font><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// Then adjust for the viewTarget&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">translation</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">viewTarget</font></span><font color="#000000"> - </font><span style="color: "><font color="#010001">AcGePoint3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">kOrigin</font></span><font color="#000000">) * </font><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// Then the twist angle&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000">::</font><span style="color: "><font color="#010001">rotation</font></span><font color="#000000">(</font><span style="color: "><font color="#010001">twistAngle</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">zAxis</font></span><font color="#000000">, </font><span style="color: "><font color="#010001">viewTarget</font></span><font color="#000000"> ) * </font><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">AcGeMatrix3d</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000">;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000">( </font><span style="color: "><font color="#010001">pVp</font></span><font color="#000000">-&gt;</font><span style="color: "><font color="#010001">perspectiveEnabled</font></span><font color="#000000">()) </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; {&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><span style="color: "><font style="font-size: 8pt" color="#008000">// we do special perspective handling&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">viewSize</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">height</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">aspectRatio</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">width</font></span><font color="#000000"> / </font><span style="color: "><font color="#010001">height</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">adjustFactor</font></span><font color="#000000"> = 1.0 / 42.0;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">adjustedLensLength</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">viewSize</font></span><font color="#000000"> * </font><span style="color: "><font color="#010001">lensLength</font></span><font color="#000000"> * </font><span style="color: "><font color="#010001">sqrt</font></span><font color="#000000"> ( 1.0 + </font><span style="color: "><font color="#010001">aspectRatio</font></span><font color="#000000"> * </font><span style="color: "><font color="#010001">aspectRatio</font></span><font color="#000000"> ) * </font><span style="color: "><font color="#010001">adjustFactor</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">eyeDistance</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">viewDirection</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">length</font></span><font color="#000000">();&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">lensDistance</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">eyeDistance</font></span><font color="#000000"> - </font><span style="color: "><font color="#010001">adjustedLensLength</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">ed</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">eyeDistance</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">adjustedLensLength</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">double</font></span><font color="#000000"> </font><span style="color: "><font color="#010001">l</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">lensDistance</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">entry</font></span><font color="#000000">[2][2] = (</font><span style="color: "><font color="#010001">ll</font></span><font color="#000000"> - </font><span style="color: "><font color="#010001">l</font></span><font color="#000000"> ) / </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">entry</font></span><font color="#000000">[2][3] = </font><span style="color: "><font color="#010001">l</font></span><font color="#000000"> * ( </font><span style="color: "><font color="#010001">ed</font></span><font color="#000000"> - </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000"> ) / </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">entry</font></span><font color="#000000">[3][2] = -1.0 / </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000">;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">entry</font></span><font color="#000000">[3][3] = </font><span style="color: "><font color="#010001">ed</font></span><font color="#000000"> / </font><span style="color: "><font color="#010001">ll</font></span><font color="#000000">;&#160;&#160; </font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160; }&#160;&#160; </font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font color="#000000"><font style="font-size: 8pt">&#160; </font></font><font style="font-size: 8pt"><span style="color: "><font color="#010001">resultMat</font></span><font color="#000000"> = </font><span style="color: "><font color="#010001">perspMat</font></span><font color="#000000"> * </font><span style="color: "><font color="#010001">dcs2wcs</font></span><font color="#000000">.</font><span style="color: "><font color="#010001">inverse</font></span><font color="#000000">();</font></font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></p>    <p style="margin: 0px"><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></p> </div>
