---
layout: "post"
title: "LISPï»¿: (ssadd) returns nil if it encounters an error"
date: "2013-01-16 18:35:04"
author: "Gopinath Taget"
categories:
  - "2010"
  - "2011"
  - "2012"
  - "2013"
  - "AutoCAD"
  - "Gopinath Taget"
  - "LISP"
original_url: "https://adndevblog.typepad.com/autocad/2013/01/lisp-ssadd-returns-nil-if-it-encounters-an-error.html "
typepad_basename: "lisp-ssadd-returns-nil-if-it-encounters-an-error"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/autocad/gopinath-taget.html">Gopinath Taget</a></p>  <p>In older versions of AutoCAD (prior to 2004), (ssadd) did not return nil upon error (i.e. if SEQEND was added to the selection set, (ssadd) still returned the selection set).&#160; Since AutoCAD 2004, (ssadd) returns nil for error (i.e. if SEQEND is added to the selection set, (ssadd) now returns nil):</p>  <p>(setq ss (ssadd na ss)) ; fails because (ssadd) returns nil for error.</p>  <p>Just doing (ssadd na ss) ; works because ss may be modified but is never set to nil. The 'nil' error return can be ignored.</p>  <p>You can code the routine without SETQing the return and it will work just fine:</p>  <p><font size="1"><font face="Courier New"><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">command </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;_.plinetype&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#ff8000">0</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">command </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;_.pline&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;0,0&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;5,5&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;5,4&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;12,5&quot;</font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;&quot;</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font face="Courier New"><font color="#000000" size="1">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">defun</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> foo</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">()</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">setq</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> na </font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">entlast</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">))</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">setq</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> ss </font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">ssadd</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">))</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font face="Courier New"><font size="1"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">while na </font></span></font></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160;&#160;&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">ssadd na ss</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160;&#160;&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">setq</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> na </font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">entnext na</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">))</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><font size="1"><font face="Courier New"><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">princ</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#808080">&quot;\n(sslength ss): &quot;</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">princ</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000"> </font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">(</font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#000000">sslength ss</font></span><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">))(</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0000ff">princ</font></span></b><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font color="#0080c0">)</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; background: white" class="MsoNormal"><b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"><font face="Courier New"><font color="#0080c0" size="1">)</font></font></span></b><span style="font-family: ; mso-fareast-font-family: &#39;Times New Roman&#39;"></span></p>  <p style="line-height: 13pt; margin: 0in 0in 10pt" class="MsoNormal"><font face="Calibri"><font style="font-size: 11pt" color="#000000">&#160;</font></font></p>  <p style="line-height: 13pt; margin: 0in 0in 10pt" class="MsoNormal">This changed behavior resulted from fixing a known issue.&#160; (ssadd) is a LISP &quot;Special Form&quot;.&#160; It modifies the second argument and returns a value.&#160; It modifies the selection set passed as the second argument, and returns the modified selection set or nil as error.&#160; Lisp users should develop the habit of using the side-effect of (ssadd) to check for success or failure, but *not* to redefine the selection set.</p>
