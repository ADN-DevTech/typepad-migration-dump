---
layout: "post"
title: "System Families Filter and Beach Aerial Picture."
date: "2014-08-07 12:45:44"
author: "Jaime Rosales"
categories:
  - "Jaime Rosales"
  - "Revit"
  - "Revit MEP"
original_url: "https://adndevblog.typepad.com/aec/2014/08/system-families-filter-and-beach-aerial-picture.html "
typepad_basename: "system-families-filter-and-beach-aerial-picture"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/aec/jaime-rosales.html">Jaime Rosales</a>&#0160;</p>  <p style="text-align: justify">Saying hello from my home country Guatemala, where I’m one week away from getting married, but that doesn’t stop me from continuing my passion for aerial photography. Here is a picture I took over the weekend with my drone “the toy” and my Hero 3+ GoPro at the Pacific Ocean beach in Guatemala.</p>  <p>&#0160;<a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a73e100fb0970d-pi" target="_blank"><img alt="DCIM\100GOPRO" border="0" height="337" src="/assets/image_708939.jpg" style="border-top: 0px; border-right: 0px; border-bottom: 0px; margin-left: 0px; border-left: 0px; display: inline; margin-right: 0px" title="DCIM\100GOPRO" width="490" /></a></p>  <p>Back to Revit API, this week one that caught my eye came from the Autodesk Community Forum, from one of our distinguished contributors.</p>  <p><strong>Question:”</strong> Is it possible to filter just for System Families and ignore Component Families? I have used this example, however despite the heading, it actually returns all families.</p>  <p><a href="http://adndevblog.typepad.com/aec/2012/05/accessing-system-families-in-a-revit-template.html">http://adndevblog.typepad.com/aec/2012/05/accessing-system-families-in-a-revit-template.html</a></p>  <p>I know that I can filter by a specified Type:</p>  <pre style="font-size: 13px; font-family: consolas; background: #1e1e1e; color: gainsboro"><span style="color: #4ec9b0">FilteredElementCollector</span>&#0160;<span style="color: white">coll</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: #569cd6">new</span>&#0160;<span style="color: #4ec9b0">FilteredElementCollector</span>(<span style="color: white">pDoc</span>);<br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// get all the wall types as wall type objects: </span><br />&#0160;&#0160;&#0160; <span style="color: white">coll</span><span style="color: #b4b4b4">.</span><span style="color: white">OfClass</span>(<span style="color: #569cd6">typeof</span>(<span style="color: #4ec9b0">WallType</span>));<br />&#0160;&#0160;&#0160; <span style="color: #b8d7a3">IEnumerable</span><span style="color: #b4b4b4">&lt;</span><span style="color: #4ec9b0">WallType</span><span style="color: #b4b4b4">&gt;</span>&#0160;<span style="color: white">types</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: white">coll</span><span style="color: #b4b4b4">.</span><span style="color: white">Cast</span><span style="color: #b4b4b4">&lt;</span><span style="color: #4ec9b0">WallType</span><span style="color: #b4b4b4">&gt;</span>();</pre>

<p>What I need is to return all Types that are System Families. Any and all suggestions appreciated; I have Googled to a standstill.”</p>

<p>The Answer came from our Revit API Engineering Team.</p>

<p><strong>Answer:</strong> Sure – try .WhereElementIsElementType() plus new ElementClassFilter(typeof(FamilySymbol), true /* inverted */)</p>

<p>You can apply these two sequentially and that should get what they asked for.</p>

<p>Followed by that answer I tried a small piece of code to check how to get back what our customer was asking for.</p>

<pre style="font-size: 13px; font-family: consolas; background: #1e1e1e; color: gainsboro">[<span style="color: #4ec9b0">Transaction</span>(<span style="color: #b8d7a3">TransactionMode</span><span style="color: #b4b4b4">.</span><span style="color: white">Manual</span>)]<br /><span style="color: #569cd6">public</span>&#0160;<span style="color: #569cd6">class</span>&#0160;<span style="color: #4ec9b0">Command</span> : <span style="color: #b8d7a3">IExternalCommand</span><br />{<br /><span style="color: #569cd6">public</span>&#0160;<span style="color: #b8d7a3">Result</span>&#0160;<span style="color: white">Execute</span>(<br />&#0160; <span style="color: #4ec9b0">ExternalCommandData</span>&#0160;<span style="color: white">commandData</span>,<br />&#0160; <span style="color: #569cd6">ref</span>&#0160;<span style="color: #569cd6">string</span>&#0160;<span style="color: white">message</span>,<br />&#0160; <span style="color: #4ec9b0">ElementSet</span>&#0160;<span style="color: white">elements</span>)<br />&#0160; {<br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">UIApplication</span>&#0160;<span style="color: white">uiapp</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: white">commandData</span><span style="color: #b4b4b4">.</span><span style="color: white">Application</span>;<br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">UIDocument</span>&#0160;<span style="color: white">uidoc</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: white">uiapp</span><span style="color: #b4b4b4">.</span><span style="color: white">ActiveUIDocument</span>;<br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">Application</span>&#0160;<span style="color: white">app</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: white">uiapp</span><span style="color: #b4b4b4">.</span><span style="color: white">Application</span>;<br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">Document</span>&#0160;<span style="color: white">doc</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: white">uidoc</span><span style="color: #b4b4b4">.</span><span style="color: white">Document</span>;<br /> <br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// WhereElementIsElementType is pretty self explanatory&#0160; </span><br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// since it will give back only elements that are ElementType</span><br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">FilteredElementCollector</span>&#0160;<span style="color: white">coll</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<span style="color: #569cd6">new</span>&#0160;<span style="color: #4ec9b0">FilteredElementCollector</span>(<span style="color: white">doc</span>)<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; <span style="color: #b4b4b4">.</span><span style="color: white">WhereElementIsElementType</span>();<br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// the true value after the typeof will give back the </span><br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// inverted of what it was asked</span><br />&#0160;&#0160;&#0160; <span style="color: #4ec9b0">ElementClassFilter</span>&#0160;<span style="color: white">filterInv</span>&#0160;<span style="color: #b4b4b4">=</span>&#0160;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; <span style="color: #569cd6">new</span>&#0160;<span style="color: #4ec9b0">ElementClassFilter</span>(<span style="color: #569cd6">typeof</span>(<span style="color: #4ec9b0">FamilySymbol</span>), <span style="color: #569cd6">true</span>);<br />&#0160;&#0160;&#0160; <span style="color: #608b4e">// add a watch to coll.WherePasses(filterInv) when debugging, </span><br />&#0160;&#0160;&#0160; <span style="color: #608b4e">//when the result is checked every inverted FamilySymbol will </span><br />&#0160;&#0160;&#0160; <span style="color: #608b4e">//get displayed.</span><br />&#0160;&#0160;&#0160; <span style="color: white">coll</span><span style="color: #b4b4b4">.</span><span style="color: white">WherePasses</span>(<span style="color: white">filterInv</span>); <br />&#0160;&#0160;&#0160; <span style="color: #569cd6">return</span>&#0160;<span style="color: #b8d7a3">Result</span><span style="color: #b4b4b4">.</span><span style="color: white">Succeeded</span>;<br />&#0160; }<br />}</pre>

<p>The Result of coll.WherePasses(filterInv); when is added to Watch in debug will give you back a list of all the Types that are ElementType and inverted from what the Component Families will return you.</p>
