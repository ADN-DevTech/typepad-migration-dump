---
layout: "post"
title: "API コンソールの利用方法"
date: "2014-11-14 01:54:54"
author: "Toshiaki Isezaki"
categories:
  - "API カスタマイズ"
  - "クラウドサービス"
original_url: "https://adndevblog.typepad.com/technology_perspective/2014/11/api-console-usage.html "
typepad_basename: "api-console-usage"
typepad_status: "Publish"
---

<p>A360 View and Data Web サービス API は、<a href="http://apigee.com/docs/ja/api-platform/content/apigee-api-%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%A8%E3%81%AF" target="_blank">Apigee プラットフォーム</a>を利用して公開されています。これによって、REST API をシミュレーションすることが出来る <a href="https://developer.autodesk.com/api-console" target="_blank"><strong>API Console</strong></a>（API コンソール）を利用することが可能になっています。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d0893c1a970c-pi" style="display: inline;"><img alt="Api_console" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d0893c1a970c image-full img-responsive" src="/assets/image_86958.jpg" title="Api_console" /></a></p>
<p>API Console を利用することで、REST API を利用して View and Data API や認証システムをテストすることが出来ます。実際にプログラムを記述し始める前でも、既にコードを持っている場合でも、最新の API を評価できるので、API 側の更新（バージョンアップ）の変更点を容易に把握することができます。</p>
<p>API Console 左手には、あたらじめ&#0160;View and Data API で利用することになる REST API がプリセットされています。どれかを選択することで、GET、POST、PUT、DELETE といった REST API のリクエスト タイプとともに、必要になるヘッダーやボディを入力する項目が表示されます。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d0893d5b970c-pi" style="display: inline;"><img alt="Preset" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d0893d5b970c image-full img-responsive" src="/assets/image_604187.jpg" title="Preset" /></a></p>
<p>それでは、いくつかのサービスを API Conole で試してみましょう。まず、 認証を得る必要があります。<strong><a href="http://developer.autodesk.com/" target="_blank">Autodesk Web Services ポータル</a></strong>&#0160;で Consumer Key と Consumer Secret を取得する必要があります。取得手順については、以前の <a href="http://adndevblog.typepad.com/technology_perspective/2014/10/a360-view-data-service-api-startup-guide.html" target="_blank"><strong>ブログ記事</strong></a> で紹介していますのでご参照ください。</p>
<p>API Console のプリセットから <strong>authenticate</strong> を選択すると、Body タブに <strong>*</strong> （アスタリスク）が付いた状態でリクエストが設定されます。* 記号は、リクエストに必須となる情報であることを意味します。ここでは、Consuer Key と Consumer Secret を、それぞれ、client_id と client_secret に入力します。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d0893e0d970c-pi" style="display: inline;"><img alt="Authenticate" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d0893e0d970c image-full img-responsive" src="/assets/image_602528.jpg" title="Authenticate" /></a></p>
<p>入力が完了したら、画面右上の <span style="color: #fdeee0; background-color: #ff4040;">&#0160;Send </span>&#0160;ボタンをクリックすると、右下の Response 欄に REST API の応答が表示されるはずです。200 が正常終了を示すステータスです。この中に、その後の API アクセスで必要になる <strong>アクセス トークン</strong> です。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01bb07a47fc6970d-pi" style="display: inline;"><img alt="Got_access_token" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01bb07a47fc6970d image-full img-responsive" src="/assets/image_608544.jpg" title="Got_access_token" /></a></p>
<p style="text-align: left;">ここで使った authentication REST API の詳細は、Autodesk Developer ポータルの<a href="http://developer.api.autodesk.com/documentation/v1/auth/authentication.html#authenticate" target="_blank">ドキュメント</a>に記載されています。&#0160;</p>
<p style="text-align: left;">次に、現在の View and Data API がサポートするファイル形式をチェックする <strong>get supported extentions info</strong> を利用してみます。ここで利用するのは、<a href="http://developer.api.autodesk.com/documentation/v1/viewing_service.html#supported-api" target="_blank"><strong>Supported API</strong></a> です。プリセットを選択すると、Headers タブに * が付いているはずです。Headers タブには、先の認証レスポンスで取得したアクセス トークンを指定します。この時、トークン タイプである ”Bearer” を半角スペースを挟んで指定してください。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d089473a970c-pi" style="display: inline;"><img alt="Got_supported_extentions" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d089473a970c image-full img-responsive" src="/assets/image_702403.jpg" title="Got_supported_extentions" /></a>&#0160;</p>
<p style="text-align: left;">先程と同様に、&#0160;&#0160;Send&#0160;&#0160;ボタンをクリックすればサポートされているファイル拡張子の一覧を Response 欄で確認することが出来るはずです。プログラムでは、これらは Json 形式で取得することになります（2014年11月3日現在）。</p>
<p style="padding-left: 30px;">{</p>
<p style="padding-left: 60px;">&quot;extensions&quot;: [</p>
<p style="padding-left: 90px;">&quot;ipt&quot;,<br /> &quot;neu&quot;,<br /> &quot;stla&quot;,<br /> &quot;stl&quot;,<br /> &quot;xlsx&quot;,<br /> &quot;jt&quot;,<br /> &quot;jpg&quot;,<br /> &quot;skp&quot;,<br /> &quot;prt&quot;,<br /> &quot;dwf&quot;,<br /> &quot;xls&quot;,<br /> &quot;png&quot;,<br /> &quot;sldasm&quot;,<br /> &quot;step&quot;,<br /> &quot;dwg&quot;,<br /> &quot;zip&quot;,<br /> &quot;nwc&quot;,<br /> &quot;model&quot;,<br /> &quot;sim&quot;,<br /> &quot;stp&quot;,<br /> &quot;ste&quot;,<br /> &quot;f3d&quot;,<br /> &quot;pdf&quot;,<br /> &quot;iges&quot;,<br /> &quot;dwt&quot;,<br /> &quot;catproduct&quot;,<br /> &quot;csv&quot;,<br /> &quot;igs&quot;,<br /> &quot;sldprt&quot;,<br /> &quot;cgr&quot;,<br /> &quot;3dm&quot;,<br /> &quot;sab&quot;,<br /> &quot;obj&quot;,<br /> &quot;pptx&quot;,<br /> &quot;cam360&quot;,<br /> &quot;jpeg&quot;,<br /> &quot;bmp&quot;,<br /> &quot;exp&quot;,<br /> &quot;ppt&quot;,<br /> &quot;doc&quot;,<br /> &quot;wire&quot;,<br /> &quot;ige&quot;,<br /> &quot;rcp&quot;,<br /> &quot;txt&quot;,<br /> &quot;dae&quot;,<br /> &quot;x_b&quot;,<br /> &quot;3ds&quot;,<br /> &quot;rtf&quot;,<br /> &quot;rvt&quot;,<br /> &quot;g&quot;,<br /> &quot;sim360&quot;,<br /> &quot;iam&quot;,<br /> &quot;asm&quot;,<br /> &quot;dlv3&quot;,<br /> &quot;x_t&quot;,<br /> &quot;pps&quot;,<br /> &quot;session&quot;,<br /> &quot;xas&quot;,<br /> &quot;xpr&quot;,<br /> &quot;docx&quot;,<br /> &quot;catpart&quot;,<br /> &quot;stlb&quot;,<br /> &quot;tiff&quot;,<br /> &quot;nwd&quot;,<br /> &quot;sat&quot;,<br /> &quot;fbx&quot;,<br /> &quot;smb&quot;,<br /> &quot;smt&quot;,<br /> &quot;ifc&quot;,<br /> &quot;dwfx&quot;,<br /> &quot;tif&quot;</p>
<p style="padding-left: 60px;">],<br /> &quot;channelMapping&quot;: {</p>
<p style="padding-left: 90px;">&quot;ipt&quot;: &quot;viewing-inventor-lmv&quot;,<br /> &quot;neu&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;stla&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;stl&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;xlsx&quot;: &quot;extraction-tika&quot;,<br /> &quot;jt&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;jpg&quot;: &quot;extraction-tika&quot;,<br /> &quot;skp&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;prt&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;dwf&quot;: &quot;viewing-dwf-lmv&quot;,<br /> &quot;xls&quot;: &quot;extraction-tika&quot;,<br /> &quot;png&quot;: &quot;extraction-tika&quot;,<br /> &quot;sldasm&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;step&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;dwg&quot;: &quot;viewing-dwg-lmv&quot;,<br /> &quot;zip&quot;: &quot;viewing-assimp&quot;,<br /> &quot;nwc&quot;: &quot;viewing-nwd-lmv&quot;,<br /> &quot;model&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;sim&quot;: &quot;viewing-sim-lmv&quot;,<br /> &quot;stp&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;ste&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;f3d&quot;: &quot;viewing-f3d-lmv&quot;,<br /> &quot;pdf&quot;: &quot;extraction-tika&quot;,<br /> &quot;iges&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;dwt&quot;: &quot;viewing-dwg-lmv&quot;,<br /> &quot;catproduct&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;csv&quot;: &quot;extraction-tika&quot;,<br /> &quot;igs&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;sldprt&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;cgr&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;3dm&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;sab&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;obj&quot;: &quot;viewing-assimp&quot;,<br /> &quot;pptx&quot;: &quot;extraction-tika&quot;,<br /> &quot;cam360&quot;: &quot;viewing-cam-lmv&quot;,<br /> &quot;jpeg&quot;: &quot;extraction-tika&quot;,<br /> &quot;bmp&quot;: &quot;extraction-tika&quot;,<br /> &quot;exp&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;ppt&quot;: &quot;extraction-tika&quot;,<br /> &quot;doc&quot;: &quot;extraction-tika&quot;,<br /> &quot;wire&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;ige&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;rcp&quot;: &quot;viewing-rcp-lmv&quot;,<br /> &quot;txt&quot;: &quot;extraction-tika&quot;,<br /> &quot;dae&quot;: &quot;viewing-assimp&quot;,<br /> &quot;x_b&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;3ds&quot;: &quot;viewing-assimp&quot;,<br /> &quot;rtf&quot;: &quot;extraction-tika&quot;,<br /> &quot;rvt&quot;: &quot;viewing-rvt-lmv&quot;,<br /> &quot;g&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;sim360&quot;: &quot;viewing-sim-lmv&quot;,<br /> &quot;iam&quot;: &quot;viewing-inventor-lmv&quot;,<br /> &quot;asm&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;dlv3&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;x_t&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;pps&quot;: &quot;extraction-tika&quot;,<br /> &quot;session&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;xas&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;xpr&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;docx&quot;: &quot;extraction-tika&quot;,<br /> &quot;catpart&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;stlb&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;tiff&quot;: &quot;extraction-tika&quot;,<br /> &quot;nwd&quot;: &quot;viewing-nwd-lmv&quot;,<br /> &quot;sat&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;fbx&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;smb&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;smt&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;ifc&quot;: &quot;viewing-nwd-lmv&quot;,<br /> &quot;dwfx&quot;: &quot;viewing-dwf-lmv&quot;,<br /> &quot;tif&quot;: &quot;extraction-tika&quot;</p>
<p style="padding-left: 60px;">},<br /> &quot;regExp&quot;: {</p>
<p style="padding-left: 90px;">&quot;prt\\.\\d+$&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;neu\\.\\d+$&quot;: &quot;viewing-atf-lmv&quot;,<br /> &quot;asm\\.\\d+$&quot;: &quot;viewing-atf-lmv&quot;</p>
<p style="padding-left: 60px;">},<br /> &quot;formatMapping&quot;: {}</p>
<p style="padding-left: 30px;">}</p>
<p style="text-align: left;">より複雑なリクエストを利用する場合には、Body に直接 Json を記載することも可能です。例えば、<strong>create bucket</strong> の例を見てみましょう。<a href="http://developer.api.autodesk.com/documentation/v1/oss.html#create-bucket-api" target="_blank"><strong>Create Bucket API</strong>&#0160;</a>のドキュメント記述では、Bucket のポリシーとともに、リクエストのパラメータが Json 形式で記載されていることがわかります。</p>
<p style="padding-left: 30px;">POST /oss/v1/buckets HTTP/1.1<br />Content-Type: application/json</p>
<p style="padding-left: 30px;">{<br />&quot;bucketKey&quot; : &quot;afs_my_us&quot;,<br />&quot;policy&quot; : &quot;transient&quot;<br />}</p>
<p>この情報を API Console に入力する場合には、Headers タブと Body タブに、それぞれ、次のように入力します。</p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b7c6ff44ca970b-pi" style="display: inline;"><img alt="Create_bucket_headers" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b7c6ff44ca970b image-full img-responsive" src="/assets/image_664469.jpg" title="Create_bucket_headers" /></a></p>
<p style="text-align: center;"><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d089486d970c-pi" style="display: inline;"><img alt="Create_bucket_body" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d089486d970c image-full img-responsive" src="/assets/image_199188.jpg" title="Create_bucket_body" /></a></p>
<p style="text-align: left;">簡単な紹介でしたが、API Console では、このような方法で REST API をテストすることが出来ます。より深い操作をおこなう場合には、API Console よりも、プログラムをコーディングしてプロトタイプでテストしていくほうが効率的かもしれません。View and Data API の REST API 部分は、<a href="https://github.com/Developer-Autodesk/autodesk-view-and-data-api-samples" target="_blank"><strong>GitHub</strong></a> 上でも <a href="https://github.com/Developer-Autodesk/library-javascript-view.and.data.api" target="_blank">JavaScript 版</a>&#0160;と <a href="https://github.com/Developer-Autodesk/library-dotnet-view.and.data.api" target="_blank">.NET 版</a>のライブラリが公開されていますので、ぜひ参照してみてください。</p>
<p style="text-align: left;">By Toshiaki Isezaki</p>
<p style="text-align: left;">&#0160;</p>
