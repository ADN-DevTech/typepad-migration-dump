---
layout: "post"
title: "Web アプリのデプロイ：Azure へのデプロイ"
date: "2019-05-20 00:06:15"
author: "Toshiaki Isezaki"
categories:
  - "API カスタマイズ"
  - "クラウドサービス"
original_url: "https://adndevblog.typepad.com/technology_perspective/2019/05/deploy-web-app-to-azure.html "
typepad_basename: "deploy-web-app-to-azure"
typepad_status: "Publish"
---

<p><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a48848ee200d-pi" style="float: right;"><img alt="Azure" class="asset  asset-image at-xid-6a0167607c2431970b0240a48848ee200d img-responsive" src="/assets/image_42818.jpg" style="width: 200px; margin: 0px 0px 5px 5px;" title="Azure" /></a><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4803aa7200d-pi" style="float: right;"></a>今回は、デプロイの一例として、<strong><a href="https://adndevblog.typepad.com/technology_perspective/2019/05/push-web-app-to-github-using-github-desktop.html" rel="noopener" target="_blank">GitHub Desktop を使った Web アプリの GitHub へのプッシュ</a></strong> でご紹介した GitHub リモート リポジトリの Web アプリ（<strong>NodejsWebApp1</strong>）を、Microsoft Azure へデプロイしていきたいと思います。</p>
<p>言うまでもなく、Microsoft が運用するクラウド プラットフォームで、Windows 仮想環境だけでなく、Web アプリの運用もカバーする多様なサービスを提供しています。</p>
<p><span style="background-color: #ffff00;">※ ご紹介する画面遷移は2019年4月時点のものです。今後当該サービスプロバイダーによって変更される可能性があります。</span></p>
<hr />
<p><strong>GitHub リモート リポジトリのデプロイ</strong></p>
<ol>
<li>GitHub 同様、Azure を利用するために Microsoft アカウントが必要です。Microsoft アカウントをお持ちでなければ、<a href="https://azure.microsoft.com/ja-jp/free/" rel="noopener" target="_blank" title="https://azure.microsoft.com/ja-jp/free/"><strong>https://azure.microsoft.com/ja-jp/free/</strong></a> からアカウントを作成してください（無償）。</li>
<li>Microsoft アカウントで&#0160; <strong><a href="https://portal.azure.com/" rel="noopener" target="_blank">Azure ポータル（https://portal.azure.com/）</a></strong>にサインインしたら、ページ左から「App Service」を選択します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4570d9a200c-pi" style="display: inline;"><img alt="Azure_portal" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4570d9a200c image-full img-responsive" src="/assets/image_893262.jpg" title="Azure_portal" /></a></li>
<li>App Service ページが表示されたら、「<strong><span style="color: #4040ff;">＋</span> 追加</strong>」を見つけてクリックします。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a4e0fa200b-pi" style="display: inline;"><img alt="Add_app_service" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a4e0fa200b image-full img-responsive" src="/assets/image_101254.jpg" title="Add_app_service" /></a></li>
<li>Web App 作成ページが表示されます。「アプリ名」欄にデプロイするアプリの名前を入力してください。この入力が新規作成する「<a href="https://docs.microsoft.com/ja-jp/azure/azure-resource-manager/manage-resources-portal" rel="noopener" target="_blank">リソースグループ</a>」の名前と「Application Insight」に反映されるだけでなく、URL の一部になる点にも配慮してください（例：<strong><em>aaa</em></strong> とした場合、https://<em><strong>aaa</strong></em>.azurewebsites.net/ になる）。ここは、GitHub 上のリモート リポジトリ NodejsWebApp1 にしたいところですが、既に他の開発者が同じアプリ名でデプロイ済のようなので、<strong>NodejsWebApp1-app</strong> としておきます。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4803f0a200d-pi" style="display: inline;"><img alt="Create_web_app" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4803f0a200d image-full img-responsive" src="/assets/image_163495.jpg" title="Create_web_app" /></a></li>
<li><span style="background-color: #4040ff; color: #ffffff;">[作 成]</span> ボタンをクリックしてアプリの仮想環境を作成します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a4eeb6200b-pi" style="display: inline;"><img alt="Create_web_app_button" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a4eeb6200b image-full img-responsive" src="/assets/image_760013.jpg" title="Create_web_app_button" /></a></li>
<li>デプロイが進行中である旨、メッセージが表示されます。デプロイが完了するのに少し時間がかかりますので、そのままお待ちください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a480417a200d-pi" style="display: inline;"><img alt="Deplying_app" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a480417a200d image-full img-responsive" src="/assets/image_934368.jpg" title="Deplying_app" /></a></li>
<li>デプロイした Web アプリとともに、他の Web アプリ（もし、あれば）が一覧表示されるはずです。ここでは、いまデプロイした Web アプリを設定していきますので、アプリ名 <span style="color: #4040ff;"><strong>NodejsWebApp1-app</strong></span> のリンクをクリックしてください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4571218200c-pi" style="display: inline;"><img alt="Deployed_app" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4571218200c image-full img-responsive" src="/assets/image_110375.jpg" title="Deployed_app" /></a></li>
<li>NodejsWebApp1-app アプリの構成ページが表示されます。左手の<strong>デプロイ センター</strong>をクリックしてください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a48042b2200d-pi" style="display: inline;"><img alt="Deploy_center_link" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a48042b2200d image-full img-responsive" src="/assets/image_314240.jpg" title="Deploy_center_link" /></a></li>
<li>デプロイ センター ページでは、デプロイ済の <strong>NodejsWebApp1-app</strong> アプリと GitHub リモート リポジトリ <strong>NodejsWebApp1-app</strong> を関連付けをおこないます。ページ中の [GitHub] をクリックして（①）、ページ下の <span style="background-color: #4040ff; color: #ffffff;">[続 行]</span> をクリックしてください（②）。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a457c3d0200c-pi" style="display: inline;"><img alt="Github_link" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a457c3d0200c image-full img-responsive" src="/assets/image_358401.jpg" title="Github_link" /></a><br />
<ol style="list-style-type: lower-alpha;">
<li>もし、初めて GitHub との接続をする場合には、<span style="background-color: #4040ff; color: #ffffff;">[承認]</span> ボタンが表示されます。ここでは、Azure が GitHub リポジトリを利用出来るように認可を与える必要があるので、<span style="background-color: #4040ff; color: #ffffff;">[承認]</span> ボタンをクリックしてください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a480f040200d-pi" style="display: inline;"><img alt="Authenticate_github" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a480f040200d image-full img-responsive" src="/assets/image_119240.jpg" title="Authenticate_github" /></a></li>
<li>GitHub アカウントでのサインインを求められるので、適切なユーザ名とパスワードを入力してサインインします。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a594ba200b-pi" style="display: inline;"><img alt="Github_signin" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a594ba200b image-full img-responsive" src="/assets/image_646764.jpg" title="Github_signin" /></a></li>
<li>[Authorize Azure App Service] ページが表示されたら、<span style="background-color: #00bf00; color: #ffffff;">[Authorize AzureAppService]</span> ボタンをクリックして、Azure の GitHub アクセスを認可します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a594be200b-pi" style="display: inline;"><img alt="Authorize_github_access" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a594be200b image-full img-responsive" src="/assets/image_321585.jpg" title="Authorize_github_access" /></a></li>
</ol>
</li>
<li>[App Service のビルド サービス] をクリックして（①）、ページ下の <span style="background-color: #4040ff; color: #ffffff;">[続 行]</span> をクリックしてください（②）。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a45713b0200c-pi" style="display: inline;"><img alt="Deploy_center1" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a45713b0200c image-full img-responsive" src="/assets/image_777282.jpg" title="Deploy_center1" /></a></li>
<li>GitHub アカウント名（ユーザ名）、リモート リポジトリ名、ブランチ名を入力/選択して（①）、<span style="background-color: #4040ff; color: #ffffff;">[続 行]</span> をクリックします（②）。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a4e6f0200b-pi" style="display: inline;"><img alt="Deploy_center2" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a4e6f0200b image-full img-responsive" src="/assets/image_982878.jpg" title="Deploy_center2" /></a></li>
<li>ここまで操作・設定したサマリーが表示されるので、内容を確認後、<span style="background-color: #4040ff; color: #ffffff;">[完了]</span> をクリックします。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a4e979200b-pi" style="display: inline;"><img alt="Deploy_center3" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a4e979200b image-full img-responsive" src="/assets/image_868982.jpg" title="Deploy_center3" /></a></li>
<li>しばらく時間がかかりますが、設定した内容がデプロイに反映されます。処理完了（セットアップのデプロイ完了）のメッセージが表示されたら、NodejsWebApp1-app アプリの「概要」をクリックして（①）、デプロイ済の URL をクリックしてください（②）。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a48046e7200d-pi" style="display: inline;"><img alt="Summary" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a48046e7200d image-full img-responsive" src="/assets/image_79213.jpg" title="Summary" /></a></li>
<li>デプロイ済の NodejsWebApp1-app の URL&#0160; <a href="https://nodejswebapp1-app.azurewebsites.net/" rel="noopener" target="_blank"><strong>https://nodejswebapp1-app.azurewebsites.net/</strong></a>&#0160;でアプリが実行されるはずです。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a48046f9200d-pi" style="display: inline;"><img alt="Nodejswebapp1" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a48046f9200d image-full img-responsive" src="/assets/image_284396.jpg" title="Nodejswebapp1" /></a></li>
</ol>
<hr />
<p><strong>他の Azure Web App Serviceu 環境</strong></p>
<p style="padding-left: 40px;">今回は Node.js を使ったアプリをデプロイしましたが、Azure の App Service には他にもさまざまな環境が用意されています。必要に応じて <strong><a href="https://docs.microsoft.com/ja-jp/azure/app-service/" rel="noopener" target="_blank">https://docs.microsoft.com/ja-jp/azure/app-service/</a></strong>を確認してみてください。</p>
<p style="padding-left: 40px;"><a class="asset-img-link" href="https://docs.microsoft.com/ja-jp/azure/app-service/" rel="noopener" style="display: inline;" target="_blank"><img alt="Azure_app_service" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4803cbb200d image-full img-responsive" src="/assets/image_46317.jpg" title="Azure_app_service" /></a></p>
<hr />
<p>Azure へのデプロイには他にもいくつか方法があります。もし、Web アプリの開発作業に Visual Studio をお使いであれば、Visual Studio から直接デプロイすることが可能です。次回は、その方法をご紹介します。</p>
<p>By Toshiaki Isezaki</p>
