---
layout: "post"
title: "AWS Cloud9 仮想環境で Forge チュートリアル"
date: "2018-06-27 03:48:26"
author: "Toshiaki Isezaki"
categories:
  - "API カスタマイズ"
  - "クラウドサービス"
original_url: "https://adndevblog.typepad.com/technology_perspective/2018/06/forge-tutorial-on-cloud9-environment.html "
typepad_basename: "forge-tutorial-on-cloud9-environment"
typepad_status: "Publish"
---

<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad356a1f1200c-pi" style="float: right;"></a> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad37c9647200d-pi" style="float: right;"><img alt="AWSCloud9_logo_color_200x200" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad37c9647200d img-responsive" src="/assets/image_296885.jpg" style="margin: 0px 0px 5px 5px;" title="AWSCloud9_logo_color_200x200" /></a>以前、<strong><a href="http://adndevblog.typepad.com/technology_perspective/2016/04/view-and-data-api-tutorial-on-virtualized-cloud9-environment.html" rel="noopener noreferrer" target="_blank">Cloud9 仮想環境で View and Data API チュートリアル</a></strong> で、クラウド上の仮想開発環境構築サービスである Cloud9 を利用した Forge サンプルのテスト方法をご紹介したことがあります。当時は、まだ Forge 登場前で、 View and Data API&#0160; が現在の OAuth API、Data Management API、Model Derivative API、Forge Viewer に分離される前のサンプルを使ってのご案内でした。</p>
<p>Cloud9 は、Web ブラウザをフロント エンド ユーザ インタフェースに持つ、非常に便利なクラウド時代らしい統合開発環境ですが、前回のブログ記事の公開後、一昨年、<strong><a href="https://c9.io/announcement" rel="noopener noreferrer" target="_blank">Amazon Web Services（AWS） に買収</a></strong>されて、昨年、<strong><a href="https://aws.amazon.com/jp/blogs/news/aws-cloud9-cloud-developer-environments/" rel="noopener noreferrer" target="_blank">AWS Cloud9</a></strong> として生まれ変わっています。AWS に統合されて操作手順も変わってしまっているので、今回は、Forge サンプルを使って改めて利用手順をご紹介したいと思います。</p>
<hr />
<ol>
<li>AWS Cloud9 を利用するには、<strong><a href="https://aws.amazon.com/jp/" rel="noopener noreferrer" target="_blank">https://aws.amazon.com/jp/</a></strong> にアクセスして、画面右上の <strong>[コンソールにログイン &gt;&gt;]</strong> ボタンから AWS マネジメント コンソールにログインしてください。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad37c5db1200d-pi" style="display: inline;"><img alt="Login" class="asset  asset-image at-xid-6a0167607c2431970b022ad37c5db1200d img-responsive" src="/assets/image_520825.jpg" style="width: 500px;" title="Login" /></a><br />もし、AWS アカウントをお持ちでないようであればアカウントを作成してください。アカウント作成は、ログイン ページにある <strong><a href="https://signin.aws.amazon.com/signin?client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fhomepage&amp;redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fconsole%2Fhome%3Fstate%3DhashArgs%2523%26isauthcode%3Dtrue&amp;page=resolve" rel="noopener noreferrer" target="_blank">別のアカウントにサインインする</a></strong> をクリックして、次に表示されるページの&#0160; <strong>[新しい AWS アカウントの作成]</strong> ボタンから作成することが出来ます。もし、この手順でアカウント作成が出来ないようなら、<strong><a href="https://aws.amazon.com/jp/cloud9/getting-started/" rel="noopener noreferrer" target="_blank">AWS Cloud9 の開始方法</a></strong> もご参照ください。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad39c437c200b-pi" style="display: inline;"><img alt="Account_creation" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad39c437c200b image-full img-responsive" src="/assets/image_692958.jpg" title="Account_creation" /></a><br /><br /></li>
<li>マネジメント コンソール ページが表示されたら、画面下部の開発者用ツールにある <strong>Cloud9</strong> をクリックします。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad3566c95200c-pi" style="display: inline;"><img alt="Cloud9_service" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad3566c95200c image-full img-responsive" src="/assets/image_700340.jpg" title="Cloud9_service" /></a></li>
<li>Cloud9 ダッシュボードが表示されます。次に、<span style="background-color: #ec7200; color: #ffffff;"><strong>[Create environment]</strong></span> ボタンをクリックして、新しい仮想環境を作成します。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad39c46ac200b-pi" style="display: inline;"><img alt="Cloud9_dashboard" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad39c46ac200b image-full img-responsive" src="/assets/image_763757.jpg" title="Cloud9_dashboard" /></a></li>
<li>仮想環境の名前と概要説明を入力します。この情報は複数登録出来る Cloud9 仮想環境を識別するもので、あまり深い意味はありません。次のページが表示されたら、環境の名前（<strong>Name</strong>）と説明（<strong>Description</strong>）に任意に記入後、<span style="background-color: #ec7200; color: #ffffff;"><strong>[Next step]</strong></span> ボタンをクリックします。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad37c60d2200d-pi" style="display: inline;"><img alt="Step1" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad37c60d2200d image-full img-responsive" src="/assets/image_45036.jpg" title="Step1" /></a></li>
<li>Cloud9 を実行する&#0160;<strong><a href="https://aws.amazon.com/jp/ec2/" rel="noopener noreferrer" target="_blank">EC2</a></strong>&#0160;インスタンスを新規に作成、指定していきます。ここでは、可能な限り無償枠での利用を想定しているため、既定値のまま最小構成になるようにしています。いままで一度も AWS サービスを利用したことがない場合には、Network settings の VPC と Subnet 欄が空白になっているはずです。その場合、<strong>[Create new VPC]</strong> をクリックして、画面の指示に従って Cloud9 で使用する <a href="https://aws.amazon.com/jp/vpc/" rel="noopener noreferrer" target="_blank"><strong>VPC（Virtual Private Cloud）</strong></a> を作成してください。作成後には、VPC 欄と Subnet 欄が設定されます。すべての設定が完了したら、<span style="background-color: #ec7200; color: #ffffff;"><strong>[Next step]</strong></span> ボタンをクリックします。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad3566eb6200c-pi" style="display: inline;"><img alt="Step2" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad3566eb6200c image-full img-responsive" src="/assets/image_490724.jpg" title="Step2" /></a><br />なお、AWS Cloud9 EC2 インスタンスには、Git&#0160; などのよく使用される開発ツールがあらかじめインストールされています。また、Node.js や Python などの多くの一般的なプログラミング言語の言語ランタイムとパッケージマネージャも含まれているので、以前の Cloud9 のように、環境作成時のそれらを個別に指定する必要はありません。</li>
<li>ここまでの設定を反映したプレビュー ページが表示されます。問題なければ<span style="background-color: #ec7200; color: #ffffff;"><strong>&#0160;[Create environment]</strong>&#0160;</span>ボタンで環境を構築を開始します。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad3566f35200c-pi" style="display: inline;"><img alt="Step3" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad3566f35200c image-full img-responsive" src="/assets/image_13947.jpg" title="Step3" /><br /></a>次の画面が表示されたら、環境の作成中であることを意味します。環境の構築にはしばらく時間がかかります。<br /><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad3566f65200c-pi" style="display: inline;"><img alt="Creating" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad3566f65200c image-full img-responsive" src="/assets/image_81414.jpg" title="Creating" /></a></li>
<li>環境が作成されると、次のようなページが表示されます。画面下部の <strong><a href="https://ja.wikipedia.org/wiki/Bash" rel="noopener noreferrer" target="_blank">Bash</a></strong> を使って、<strong><a href="http://adndevblog.typepad.com/technology_perspective/2017/11/revised-new-forge-viewer-tutorial-part1.html" rel="noopener noreferrer" target="_blank">新しい Forge Viewer チュートリアル改定版 ～ その1</a></strong> でご紹介している Forge サンプルを GitHub リポジトリから Cloud9 環境にクローンしていきます。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad39c49e5200b-pi" style="display: inline;"><img alt="Clone1" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad39c49e5200b image-full img-responsive" src="/assets/image_633441.jpg" title="Clone1" /></a></li>
<li><strong><a href="http://adndevblog.typepad.com/technology_perspective/2017/11/revised-new-forge-viewer-tutorial-part1.html" rel="noopener noreferrer" target="_blank">新しい Forge Viewer チュートリアル改定版 ～ その1</a></strong>&#0160;の 6. にある <strong><a href="https://ja.wikipedia.org/wiki/Git" rel="noopener noreferrer" target="_blank">git</a></strong> コマンドを <strong><a href="https://ja.wikipedia.org/wiki/Bash" rel="noopener noreferrer" target="_blank">Bash</a></strong> 上に入力して実行します。<strong>git clone https://github.com/Autodesk-Forge/viewer-nodejs-tutorial.git</strong>&#0160;と入力してください。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad39c4a5b200b-pi" style="display: inline;"><img alt="Cloned" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad39c4a5b200b image-full img-responsive" src="/assets/image_82158.jpg" title="Cloned" /></a></li>
<li><strong><a href="http://adndevblog.typepad.com/technology_perspective/2017/11/revised-new-forge-viewer-tutorial-part1.html" rel="noopener noreferrer" target="_blank">新しい Forge Viewer チュートリアル改定版 ～ その1</a></strong>&#0160;の 7. の処理を実行します。viewer-nodejs-tutorial フォルダが作成されていることを確認の上、コマンド プロンプトで&#0160;<strong>cd viewer-nodejs-tutorial</strong>&#0160;と入力してカレント フォルダを変更してください。</li>
<li><strong><a href="http://adndevblog.typepad.com/technology_perspective/2017/11/revised-new-forge-viewer-tutorial-part1.html" rel="noopener noreferrer" target="_blank">新しい Forge Viewer チュートリアル改定版 ～ その1</a></strong>&#0160;の 8. の処理を実行します。<strong><a href="https://ja.wikipedia.org/wiki/Npm_(%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E7%AE%A1%E7%90%86%E3%83%84%E3%83%BC%E3%83%AB)" rel="noopener noreferrer" target="_blank">ノード パッケージ マネージャ（npm）</a></strong>を利用し、package.json 内に記載された依存関係に沿って 、Node.js 機能を拡張するパッケージ（ミドルウェア）をインストールしていきます。&#0160;<strong>npm install</strong>&#0160;と入力してください。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad37c64e2200d-pi" style="display: inline;"><img alt="Npm_install" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad37c64e2200d image-full img-responsive" src="/assets/image_281822.jpg" title="Npm_install" /></a></li>
<li><strong><a href="http://adndevblog.typepad.com/technology_perspective/2017/11/revised-new-forge-viewer-tutorial-part1.html" rel="noopener noreferrer" target="_blank">新しい Forge Viewer チュートリアル改定版 ～ その1</a></strong>&#0160;の 9. ～ 12. の内容を実装します。画面右にはクローンされたリポジトリ内容が表示されているので、順次ファイルを開いて必要な項目を入力してください。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad35670bb200c-pi" style="display: inline;"><img alt="Editor" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad35670bb200c image-full img-responsive" src="/assets/image_992604.jpg" title="Editor" /></a></li>
<li>&#0160;Client ID、Client Secret、URN 等の指定が完了したら、Node.js の Web サーバーを起動します。<strong><a href="https://ja.wikipedia.org/wiki/Bash" rel="noopener noreferrer" target="_blank">Bash</a></strong>&#0160;上で<strong>&#0160;npm run dev</strong>&#0160;と入力してください。<strong>Node start.js</strong>&#0160;と入力しても Web サーバーを起動することが出来ます。この時、カレント フォルダが&#0160;<strong>viewer-nodejs-tutorial</strong>&#0160; になっていないと、Node.js を正しく起動出来ないの注意してください（上記、9. の手順）。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad3567123200c-pi" style="display: inline;"><img alt="Npm_run" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad3567123200c image-full img-responsive" src="/assets/image_449580.jpg" title="Npm_run" /></a></li>
<li>Node.js が起動してから画面上部の Run ボタンをクリックすると、作成した仮想環境上で Forge サンプルのビューアが表示されるはずです。<br /> <a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b022ad37c659f200d-pi" style="display: inline;"><img alt="Running" border="0" class="asset  asset-image at-xid-6a0167607c2431970b022ad37c659f200d image-full img-responsive" src="/assets/image_405860.jpg" title="Running" /></a></li>
</ol>
<hr />
<p>ローカルな環境を使わずに、仮想環境上でサンプルの評価が出来るのは魅力的と思います。無償枠は AWS が用意する内容が適用されるほか、使用出来るポート番号にも制約がありますので、詳しくは AWS ブログ記事&#0160;<strong><a href="https://aws.amazon.com/jp/blogs/news/aws-cloud9-cloud-developer-environments/" rel="noopener noreferrer" target="_blank">AWS Cloud9 – クラウド開発環境 </a></strong>や <strong><a href="https://aws.amazon.com/jp/cloud9/pricing/" rel="noopener noreferrer" target="_blank">Cloud9 料金表</a></strong>、<strong><a href="https://aws.amazon.com/jp/cloud9/faqs/" rel="noopener noreferrer" target="_blank">Cloud9 に関するよくある質問</a></strong>、<strong><a href="https://aws.amazon.com/jp/documentation/cloud9/?id=docs_gateway" rel="noopener noreferrer" target="_blank">Cloud9 ドキュメント</a></strong>&#0160;などを確認してみてください。</p>
<p>By Toshiaki Isezaki</p>
