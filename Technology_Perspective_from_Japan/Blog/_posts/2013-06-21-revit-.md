---
layout: "post"
title: "Revit ファミリ作成の秘訣"
date: "2013-06-21 10:44:00"
author: "Mikako Harada"
categories:
  - "その他カスタマイズ"
  - "デスクトップ製品"
original_url: "https://adndevblog.typepad.com/technology_perspective/2013/06/revit-%E3%83%95%E3%82%A1%E3%83%9F%E3%83%AA%E4%BD%9C%E6%88%90%E3%81%AE%E7%A7%98%E8%A8%A3.html "
typepad_basename: "revit-ファミリ作成の秘訣"
typepad_status: "Publish"
---

<p>今回は、ファミリの作成にあたって、プログラミング以前にまず理解しておくとよい概念のお話をしたいと思います。これは、以前ボストン郊外で行ったAEC　Developer　Campで、オートデスクのコンテンツマネージャであるスティーブ&#0160; キャンベルと私がいっしょに行ったプレゼンテーションをもとにしています。</p>
<p>Revit のファミリは、その作成自体APIなしでも高度にカスタマイズ可能な機能です。もちろん、APIも公開されていますが、使用するにあたっては、UIでどのように動作するかを理解することは、APIを用いての作成する場合も、成功の鍵となります。<br />ファミリ作成のコミュニティとしては2つのタイプがあると思います。</p>
<ul>
<li>ファミリをUIでは熟知しているが、Revitのプログラミングに精通していない人</li>
<li>プログラミングに堪能しているが、UIに慣れていない人</li>
</ul>
<p>仕事がら、これからRevitのAPIに取り組もうという方から、どこからスタートすればよいかと相談を受けますが、時折プログラマーの方で、「私は、プログラマーだ、Revtに関しては何も知らない」と自信をもって宣言される方がいらっしゃいますが、ファミリーは、エンドユーザー、プログラマにかかわらず、Revitを使いこなす上で避けては通れない概念です。あるいは、UIでファミリをすでに何度となく作成されている方のなかでも、まだすっきりとマスターしたと感じていらっしゃらない場合は、もしかすると、ここでお話しすることがお役に立つかもしれません。</p>
<p><strong>Revitのファミリーとは</strong></p>
<p>まずは、Revitのファミリの基本としてその定義を理解することが重要です。Revitの中でファミリとは建物のオブジェクトやシンボルをグラフィカルに表現したものです。これらは、2次元または3次元の幾何学的なオブジェクトであったり、またデータオブジェクトである可能性があります。ファミリには次の3種類があります：</p>
<ol>
<li>システムファミリ -　プロジェクトテンプレートに保存されています。壁、屋根、床、天井といったオブジェクトが、このカテゴリに含まれています。RFAファイルは持たず、別途作成することはできません。</li>
<li>標準ファミリ – 　独立したRFAファイルを使用します。窓、ドア、家具、梁といったオブジェクトがこのカテゴリに含まれています。</li>
<li>インプレイスファミリ - 　この3つ目のカテゴリーは、プロジェクトに保存されるファミリで、繰り返しりようされない、唯一のオブジェクトを作成します。</li>
</ol>
<p>いわゆるファミリAPI は2番目のカテゴリーのAPIで、標準のファミリをサポートします。</p>
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01901dcc13b5970b-pi" style="display: inline;"><img alt="2013 0623 famiry basics" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01901dcc13b5970b image-full" src="/assets/image_639932.jpg" title="2013 0623 famiry basics" /></a></p>
<p><strong>ファミリの作成　－　どこから開始するのか</strong></p>
<p>UIまたはAPIを使用しているかどうかにかかわりなく、まず最初に決定しなくてはならないのは、どのテンプレート、あるいはファミリファイルからスタートするかです。</p>
<ul>
<li>ファミリのテンプレートから開始する</li>
<li>あるいは、既存のファミリのファイルから開始することができます。</li>
</ul>
<p>多くのテンプレートが用意されていますが、開始するテンプレートを決定する必要があります。通常は、以下のような項目を考慮必要があります：</p>
<ul>
<li>ファミリは2Dか、3Dか？モデルや詳細か？</li>
<li>ホストを必要とするファミリか？たとえば、壁、天井、面といったホストをひつようとするのか？</li>
<li>どういったカテゴリのファミリなのか？</li>
<li>どのようにファミリを配置するのか？プロジェクトのどこにでも配置できるのか？2点選択で配置するのか？</li>
<li>特殊なファミリ？トラスや鉄筋などといった構造や設備系の特殊なもの</li>
</ul>
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b019103c20ed6970c-pi" style="display: inline;"><img alt="2013 0623 family open dialog" border="0" class="asset  asset-image at-xid-6a0167607c2431970b019103c20ed6970c image-full" src="/assets/image_745226.jpg" title="2013 0623 family open dialog" /></a></p>
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0192ab8a93db970d-pi" style="display: inline;"><img alt="2013 0623 family window" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0192ab8a93db970d image-full" src="/assets/image_517738.jpg" title="2013 0623 family window" /></a></p>
<p><strong>Revitファミリ のフレーバー</strong></p>
<p>製品と同様、ファミリもまた3つのフレーバを持っています。機能のほとんどは、Revit Architectureと同じです。</p>
<p><span style="text-decoration: underline;">Revit Architecture</span></p>
<p>Revit Architectureの中のファミリは、モデルの際に簡単なインターアクションを含む基本的なビルディング•コンポーネントをサポートしています。</p>
<ul>
<li>拘束されずに自由に配置可能なオブジェクト - ケースワーク、家具など</li>
<li>&quot;2点&quot;配置オブジェクト - 梁、細部の部品など</li>
<li>ホストされるオブジェクト - 窓、ドア、柱（階から階にわたる）、天井や壁に配置される照明器具など</li>
</ul>
<p><span style="text-decoration: underline;">Revit Structure</span></p>
<p>他のオブジェクトとのより複雑な相互作用を介する追加のコンポーネントを含みます。 とくに解析モデルをサポートするものを含みます。</p>
<ul>
<li>構造のフレーミング –&#0160; 梁（梁間、梁から柱）、柱</li>
<li>トラス -トラス梁のレイアウト、境界条件</li>
<li>スパン方向のシンボル、鉄筋のシンボル – パス鉄筋や、エリア鉄筋は、エッジを認識する必要があります。</li>
</ul>
<p><span style="text-decoration: underline;">Revit　MEP</span></p>
<p>MEPでは、コネクタ を考慮する必要があります。オブジェクトは、それらが接続されているものに基づいてサイズを変更できるようにしています。</p>
<p><strong>Revit ファミリ エディタ</strong></p>
<p>Revitでは以下の6つ基本的なファミリのエディタを提供しています：</p>
<ul>
<li>3Dモデル</li>
<li>注釈</li>
<li>詳細</li>
<li>鉄筋</li>
<li>トラス</li>
<li>コンセプト マス　</li>
</ul>
<p>エディタによっては、ビルディングブロックを作成するために利用可能なツールや異なったツールセットが表示されます。たとえば、モデルエディタでは、フォームを作成するためのツールが表示されますが、注釈ファミリではそれは表示されません。トラスエディタを使用している場合は、トップ/ボトム弦が表示されます。 </p>
<p>各ファミリエディタは特定のツールセットを提供し、それは、選択したファミリテンプレートに関連付けられています。</p>
<ul>
<li>ジオメトリ - 押し出し、ブレンド、スイープ、回転、スイープブレンド</li>
<li>ライン - モデル、シンボル、詳細</li>
<li>基本的なツール - コピー、ミラー、ペイント、接続・非接続、ジオメトリを切り取り/非切り取り</li>
<li>参照 - 参照面、参照ライン</li>
<li>注釈ツール - ラベル</li>
<li>高度なツール - 数式、ネスティング、配列、タイプカタログ</li>
<li>MEPツール - コネクタの追加</li>
</ul>
<p><strong>Revit ファミリ ベスト プラクティス</strong></p>
<p>ファミリは　Revitの強力な機能です。その作成はいったん習得すると、実にパワフルで、楽しい作業かもしれませんが、また、それだけパワーを持つ分、複雑になるかもしれません。複雑になる場合には、適切な計画を必要とします。以下に、Autodesk のRevitのコンテンツマネージャー スティーブ•キャンベルによるファミリを構築する場合、認識しておくとよい手順を示します。</p>
<p>まず、ファミリ構築のための「プロセス」は、習得しなければならない最も大切な概念です。</p>
<p><span style="text-decoration: underline;">プロセスの順序：</span></p>
<ol>
<li>計画（挿入ポイント、パラメーターの原点）</li>
<li>参照面（リファレンス 面）のレイアウト（「骨格」）</li>
<li>パラメータを追加 （筋肉）</li>
<li>複数のホスト厚タイプを追加（ホストされたファミリをテストするため）</li>
<li>2つ以上のタイプを追加</li>
<li>タイプとホストを「フレックス」-フレックスとはパラメータを変更させて、参照面が値の変化に追従して正しく変更されるかを確認します（テスト手順）</li>
<li>1つのレベルのジオメトリを追加　（スキン）</li>
<li>結果に満足されるまで、手順6と7を繰り返す</li>
<li>プロジェクト環境でのテスト（テストプロジェクトを作成します）</li>
</ol>
<p>スティーブはしばしばこれを、人の体にたとえて説明してくれます。参照面が骨格、パラメータが筋肉、そして、ジェオメトリはスキンのようなものだというのです。形の元となるのは、ジェオメトリではなく、その下にある、参照面。また、パラメータによってその動き、変化の範囲が定義されます。そして、ジェオメトリは単にそれらを包むスキンのようなもので、それ自体に、動きや変化の原動となる力はもちません。</p>
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0192ab8aa653970d-pi" style="display: inline;"><img alt="20130623 arm pic" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0192ab8aa653970d" height="251" src="/assets/image_956726.jpg" title="20130623 arm pic" width="330" /></a></p>
<p>AutoCADといったようなドラフティングのソフトでは、そもそも、パラメトリックではなく、固定されたジェオメトリの定義によってモデルが定義されますが、Revitのような、要素間に関連があるモデラーでは、それは、あくまで、参照面、パラメータが意図するように定義されたうえで、追加されるものなのです。AutoCAD等を経験したことがあるかたが、最初に定義しようとなさるのは、どうしても、ジェオメトリとなり、その後、うまくいかずに四苦八苦なさるかたが多いようです。実は、わたしも、その一人で、スティーブによるファミリーを作成方法のクラスに参加してからは、上記のプロセスに忠実に従い、まるでバイブルのように機会があるごとに見返しています。</p>
<p><strong>ファミリ でどこまで可能か</strong></p>
<p>ファミリを使いこなすと、非常に複雑なオブジェクトを作成することができます。以下がその例です。</p>
<ul>
<li>フォーミュラ(数式) - 動作、可視、配列を制御するために使用することができます。例えば、プレートの大きさに応じてボルトの配列を定義したりできます。<br /><br /><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b019103c22f34970c-pi" style="display: inline;"><img alt="2013 0623 plate" border="0" class="asset  asset-image at-xid-6a0167607c2431970b019103c22f34970c" height="170" src="/assets/image_362726.jpg" title="2013 0623 plate" width="183" /></a><br /><br /></li>
<li>配列とネスト – ネストされたコンポーネントを配列すると、ユーザの入力やルールに基づいてサイズや配列要素を変更したりしてファミリを作成することができます。配列をもちた棚、たとえば、本棚などがつくれます。長さと高さに基づいて調整した鉄骨の接続部などもその例です。<br /><br /><br /><br /><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0192ab8ab10f970d-pi" style="display: inline;"><img alt="2013 0623 nest" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0192ab8ab10f970d image-full" src="/assets/image_128731.jpg" title="2013 0623 nest" /></a></li>
<li>高度なネスティング -ファミリータイプパラメータで入れ子になったファミリを使用すると、スワップ可能なパネルやコンポーネントを考慮にいれたモデルも作成できます。たとえば、以下のイメージは香港のユーザーさんが作成した遊具のデザインの例ですが、一つのファミリで、いろいろな組合わせが定義されています。<br /><br /><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b019103c2333b970c-pi" style="display: inline;"></a><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b019103c23786970c-pi" style="display: inline;"><img alt="2013 0623 child play" border="0" class="asset  asset-image at-xid-6a0167607c2431970b019103c23786970c image-full" src="/assets/image_928757.jpg" title="2013 0623 child play" /></a><br /><br /><br /></li>
<li>参照線 、アングル（角度）の利用- 参照（リファレンス）ラインでジオメトリは角度をもって動くことができます。2つのエンドポイントを含み、それらを作業面（ワークプレイン）をもちいてパラメトリックに制御することができます。簡単な例としては、ドアスイング開口角度を変更することができます。複雑な例としては、3つ以上のピボットポイントをもつショベルアームといったものも定義可能です。<br /><br /><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b019103c238fb970c-pi" style="display: inline;"><img alt="2013 0623 crane" border="0" class="asset  asset-image at-xid-6a0167607c2431970b019103c238fb970c image-full" src="/assets/image_808390.jpg" title="2013 0623 crane" /></a></li>
</ul>
<p><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=13376394" target="_self" title="Family Guide">一般的な、ファミリガイドは、ここにポストされています。</a>これからファミリーをマスターしようとお考えのかた、ぜひお試しください。</p>
<p>原田</p>
