---
layout: "post"
title: "Web アプリのデプロイ：Heroku へのデプロイ"
date: "2019-05-15 00:12:37"
author: "Toshiaki Isezaki"
categories:
  - "API カスタマイズ"
  - "クラウドサービス"
original_url: "https://adndevblog.typepad.com/technology_perspective/2019/05/deploy-web-app-to-heroku.html "
typepad_basename: "deploy-web-app-to-heroku"
typepad_status: "Publish"
---

<p><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4abb19d200b-pi" style="display: inline;"> </a><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4abb1a9200b-pi" style="float: right;"><img alt="Heroku" class="asset  asset-image at-xid-6a0167607c2431970b0240a4abb1a9200b img-responsive" src="/assets/image_974285.jpg" style="width: 180px; margin: 0px 0px 5px 5px;" title="Heroku" /></a><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4abb19d200b-pi" style="display: inline;"></a>今回は、デプロイの一例として、<strong><a href="https://adndevblog.typepad.com/technology_perspective/2019/05/push-web-app-to-github-using-github-desktop.html" rel="noopener" target="_blank">GitHub Desktop を使った Web アプリの GitHub へのプッシュ</a></strong> でご紹介した GitHub リモート リポジトリの Web アプリ（<strong>NodejsWebApp1</strong>）を、Heroku へデプロイしていきたいと思います。</p>
<p>Heroku はクラウドベースの PaaS（Platform As A Service）で、開発者が作成した Web アプリを Heroku の仮想環境で実行して、サービスとしてエンドユーザが利用する環境を提供します。デプロイ時には Web アプリを呼び出す URL が割り当てられるので、誰もがアクセス出来るようになります。</p>
<p><span style="background-color: #ffff00;">※ ご紹介する画面遷移は2019年4月時点のものです。今後当該サービスプロバイダーによって変更される可能性があります。</span></p>
<hr />
<p><strong>GitHub リモート リポジトリのデプロイ</strong></p>
<ol>
<li>GitHub 同様、Heroku を利用するために Heroku アカウントが必要です。Heroku アカウントをお持ちでなければ、<strong><a href="https://signup.heroku.com/login" rel="noopener" target="_blank">https://signup.heroku.com/login</a></strong> からアカウントを作成してください（無償）。</li>
<li><a href="https://id.heroku.com/login" rel="noopener" target="_blank"><strong>https://id.heroku.com/login</strong></a> から Heroku アカウントでサインインします。</li>
<li>ページ右上の [New ⇕] ボタンをクリックして、ドロップダウンから [Create new app] を選択してください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a454da8b200c-pi" style="display: inline;"><img alt="Create_new_app" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a454da8b200c image-full img-responsive" src="/assets/image_247395.jpg" title="Create_new_app" /></a></li>
<li>Create New App ページで「App name」欄に Web アプリ名を入力します。ここでは半角英字、数字と半角ハイフンしか利用出来ないので、nodewebapp1 と入力して、<span style="background-color: #8080ff; color: #ffffff;">[Create app ]</span> ボタンをクリックしてください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a454db22200c-pi" style="display: inline;"><img alt="Create_new_app_page" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a454db22200c image-full img-responsive" src="/assets/image_496101.jpg" title="Create_new_app_page" /></a></li>
<li>&#0160;nodewebapp1 アプリのデプロイ情報を定義していきます。[Deploy] タブの「Deployment method」欄で [GitHub] を選択します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a2b49a200b-pi" style="display: inline;"><img alt="Nodewebapp1_1" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a2b49a200b image-full img-responsive" src="/assets/image_248648.jpg" title="Nodewebapp1_1" /></a></li>
<li>「Connect to GitHub」欄で [Connect to GitHub] ボタンをクリックします。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a47e101d200d-pi" style="display: inline;"><img alt="Nodewebapp1_2" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a47e101d200d image-full img-responsive" src="/assets/image_470843.jpg" title="Nodewebapp1_2" /></a></li>
<li>GitHub アカウントでサインインして、Heroku が GitHub リポジトリを利用出来るように認可を与えます。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a47e1bc2200d-pi" style="display: inline;"><img alt="Github_authorization_signin" class="asset  asset-image at-xid-6a0167607c2431970b0240a47e1bc2200d img-responsive" src="/assets/image_624648.jpg" title="Github_authorization_signin" /></a></li>
<li>「Connect to GitHub」欄に Heroku でデプロイする GitHub アカウント名が表示されるので（①）、<span style="background-color: #8080ff; color: #ffffff;">[Search]</span> ボタンをクリックして（②）、同アカウント上のリモート リポジトリの一覧を表示させます。一覧からデプロイするリポジトリ NodejsWebApp1 を見つけて、右横の [Connect] ボタンをクリックしてください。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a2c217200b-pi" style="display: inline;"><img alt="Nodewebapp1_3" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a2c217200b image-full img-responsive" src="/assets/image_31022.jpg" title="Nodewebapp1_3" /></a></li>
<li>「Connect to GitHub」欄の名前が「App connected to GitHub」に変わり、NodejsWebApp1 リポジトリに接続が完了します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a2c28d200b-pi" style="display: inline;"><img alt="Nodewebapp1_4" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a2c28d200b image-full img-responsive" src="/assets/image_966880.jpg" title="Nodewebapp1_4" /></a></li>
<li>そのまま [Deploy] タブの画面を下方向にスクロールして、「Manual deploy」欄の <span style="background-color: #033d21; color: #ffffff;">[Deploy Branch]</span> ボタンで master ブランチのデプロイを開始します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a47e1d2f200d-pi" style="display: inline;"><img alt="Nodewebapp1_5" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a47e1d2f200d image-full img-responsive" src="/assets/image_818888.jpg" title="Nodewebapp1_5" /></a></li>
<li>デプロイ中のログ情報が順次表示されていきます。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a45d9b27200c-pi" style="display: inline;"><img alt="Deploying" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a45d9b27200c image-full img-responsive" src="/assets/image_342140.jpg" title="Deploying" /></a></li>
<li>デプロイが正常に完了すると、「<strong>Your app was successfully deployed.</strong>」メッセージが表示されます。メッセージ下の [View] ボタンをクリックすると、デプロイされた Web アプリが起動します。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a486c9bf200d-pi" style="display: inline;"><img alt="Finish_deployment" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a486c9bf200d image-full img-responsive" src="/assets/image_765328.jpg" title="Finish_deployment" /></a><br /><br />今回は <a href="https://nodejswebapp1.herokuapp.com/" rel="noopener" target="_blank">https://nodejswebapp1.herokuapp.com/</a> の URL が自動的に適用されているはずです（<strong><em>アプリ名.herokuapp.com</em></strong>）。<a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a36784200b-pi" style="display: inline;"><img alt="Deployed_web_app" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a4a36784200b image-full img-responsive" src="/assets/image_797090.jpg" title="Deployed_web_app" /></a><br />デプロイされた Web アプリは、デバイスやプラットフォームを問わず、どこからでもアクセス出来ます。<br /><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a45590ca200c-pi" style="display: inline;"><img alt="Deployed_web_app_on_platforms" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a45590ca200c image-full img-responsive" src="/assets/image_130434.jpg" title="Deployed_web_app_on_platforms" /></a><a class="asset-img-link" href="https://adndevblog.typepad.com/.a/6a0167607c2431970b0240a4a2c3df200b-pi" style="display: inline;"><br /></a></li>
</ol>
<hr />
<p><strong>Web アプリ更新時の再デプロイ</strong></p>
<p style="padding-left: 40px;">Web アプリのソースコードを変更/更新した場面では、ローカル リポジトリへのコミットとリモート リポジトリへのプッシュを経て、GitHub 上に更新された状態を確認後、Heroku で再デプロイをおこなってください。この際には、Heroku 上に作成済の Web アプリは GitHub リモート リポジトリに接続された状態を維持しているので、上記手順の 10. にある [Deploy] タブでのデプロイ操作をおこなうだけです。</p>
<hr />
<p><strong>他の Heroku 環境</strong></p>
<p style="padding-left: 40px;">今回は Node.js を使ったアプリをデプロイしましたが、Heroku には他の環境やデータベース オプションなども用意されています。必要に応じて <strong><a href="https://devcenter.heroku.com/start" rel="noopener" target="_blank">https://devcenter.heroku.com/start</a></strong>を確認してみてください。</p>
<p style="padding-left: 40px;"><a class="asset-img-link" href="https://devcenter.heroku.com/start" rel="noopener" style="display: inline;" target="_blank"><img alt="Other_language_on_heroku" border="0" class="asset  asset-image at-xid-6a0167607c2431970b0240a48039c9200d image-full img-responsive" src="/assets/image_89251.jpg" title="Other_language_on_heroku" /></a></p>
<hr style="padding-left: 40px;" />
<p>今回デプロイした Web アプリは Forge を利用していませんが、デプロイまでの手順はおおまかに把握いただけるものと思います。</p>
<p>By Toshiaki Isezaki</p>
