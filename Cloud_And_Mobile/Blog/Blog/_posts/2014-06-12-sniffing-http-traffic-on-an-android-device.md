---
layout: "post"
title: "Sniffing HTTP traffic on an Android device"
date: "2014-06-12 15:14:59"
author: "Philippe Leefsma"
categories:
  - "Android"
  - "Cloud"
  - "Philippe Leefsma"
original_url: "https://adndevblog.typepad.com/cloud_and_mobile/2014/06/sniffing-http-traffic-on-an-android-device.html "
typepad_basename: "sniffing-http-traffic-on-an-android-device"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/cloud_and_mobile/philippe-leefsma.html">Philippe Leefsma</a></p>  <p>Hey Folks! Today we are up to some sniffing on Android, great! … What for? Well, if you develop Cloud-related Apps, I mean by that an App that is going to use a REST Web API, then sooner or later you may want to observe the http traffic on your device for debugging purposes.</p>  <p>Telerik provides that great freeware named <a href="http://www.telerik.com/fiddler">Fiddler</a>, a powerful web debugger that can, among other things, log the http traffic. Basically Fiddler runs on Windows and can be used to debug a desktop App performing web requests. We are going to see how Fiddler can be used to also watch web requests performed from an Android device.</p>  <p>If you search for the topic on the web, you will find many resources, blog posts and questions about it, that’s what I did. However in most of them the information was just partial and I had to struggle a bit to get it working on my side, so I decided to produce my own post on the topic.</p>  <p>Prerequisites:</p>  <p>- A Windows machine (physical or virtual)</p>  <p>- An Android device </p>  <p>- A Wi-Fi connection</p>  <p><strong>I – Observing HTTP Traffic from the Android device</strong></p>  <p>You need to install Fiddler from the link below on your Windows machine. Start the program and go to <em>Tools</em> –&gt; <em>Fiddler Options …</em></p>  <p>On the <em>HTTPS</em> Tab, check the <em>Decrypt HTTPS traffic</em>, you will have to install a certificate for that and restart Fiddler</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a511cc9484970c-pi"><img title="https" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="https" src="/assets/image_5b39d1.jpg" width="485" height="323" /></a></p>  <p>On the <em>Connections</em> Tab then, make sure the <em>Allow remote computers to connect</em> is checked.</p>  <p>Set a port for Fiddler, by default <em>8888</em> is set up, you can leave it like that - or change it to something else if you are anti-conformist.</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a73dd7cb08970d-pi"><img title="connections" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="connections" src="/assets/image_365b41.jpg" width="482" height="323" /></a></p>  <p>Now check what IP address Fiddler and your Windows machine are running on: you can simply hover over Fiddler upper-right corner <em>Online</em> icon:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a511cc9499970c-pi"><img title="Screen Shot 2014-06-12 at 4.16.17 PM" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="Screen Shot 2014-06-12 at 4.16.17 PM" src="/assets/image_09a242.jpg" width="310" height="337" /></a></p>  <p>On the Android device now:</p>  <p>Make sure the device is connected to the same Wi-Fi network than your Windows machine. </p>  <p>Go to <em>Settings –&gt; Wi-Fi</em> –&gt; Long press on the connected network (usually the first one in the list) –&gt; <em>Modify Network</em></p>  <p>This should bring an option dialog, scroll down and check <em>“Show advanced options”</em></p>  <p>This lets you set the <em>“PROXY SETTINGS”</em> to <em>“Manual”</em></p>  <p>Then set <em>PROXY HOSTNAME</em> = the IP address from above (192.168.1.110) and <em>PROXY PORT</em> = the Fiddler port you use (8888)</p>  <p>Save and fire a browser on your device, you should now see the web requests logged in Fiddler. However this is not enough to log requests from an App on the device, you will need to install a certificate on Android now:</p>  <p>In the browser type the following url (of course update with your own values): </p>  <p><a href="http://192.168.1.110:8888/FiddlerRoot.cer">http://192.168.1.110:8888/FiddlerRoot.cer</a></p>  <p>You should see a dialog prompting your to install the certificate, I use a fancy name: “Fiddler”</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a73dd7cb10970d-pi"><img title="Screen Shot 2014-06-12 at 4.49.35 PM" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="Screen Shot 2014-06-12 at 4.49.35 PM" src="/assets/image_43da61.jpg" width="357" height="419" /></a></p>  <p>And that should be it …You can now see http traffic from your App in Fiddler:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a511cc961c970c-pi"><img title="traffic" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="traffic" src="/assets/image_e5ea79.jpg" width="494" height="331" /></a></p>  <p><strong>II – Observing HTTP Traffic from the Android Emulator</strong></p>  <p>What if you don’t have an Android device between your hands? No worries, you can get that done from the emulator as well. </p>  <p>The set up on Windows is the same, just start your Android emulator, you can do that from Eclipse, Android Studio or the command line<em> “emulator –avd virtual_device_name”</em></p>  <p>Once the emulator is running do the following:</p>  <p><em>Settings –&gt; Wireless controls –&gt; Mobile Networks –&gt; Access Point Names</em> (there should be one by default) –&gt; click the APN to configure it</p>  <p>Set the <em>Proxy</em> and <em>Port</em> fields as previously with your IP and Fiddler port. Navigate back to home screen, fire up a browser and do the certificate thing like before.</p>  <p>Fiddler should now log the traffic of your device and having installed the certificate, your web App should be fully ready to be debugged…</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01a3fd1d0e43970b-pi"><img title="Screen Shot 2014-06-12 at 4.55.51 PM" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="Screen Shot 2014-06-12 at 4.55.51 PM" src="/assets/image_fe0906.jpg" width="462" height="368" /></a></p>
