---
layout: "post"
title: "Creating a cloud based viewer &ndash; Part I"
date: "2012-07-13 08:23:48"
author: "Philippe Leefsma"
categories:
  - "Cloud"
  - "Philippe Leefsma"
  - "Server"
original_url: "https://adndevblog.typepad.com/cloud_and_mobile/2012/07/creating-a-cloud-based-viewer-part-i.html "
typepad_basename: "creating-a-cloud-based-viewer-part-i"
typepad_status: "Publish"
---

<p>By <a href="http://adndevblog.typepad.com/cloud_and_mobile/philippe-leefsma.html" target="_self">Philippe Leefsma</a></p>  <p>Here is the first post of a series that aims at dissecting the various aspects and technologies that can be used in order to create a cloud based viewer for models extracted from some of the major Autodesk desktop applications, namely Inventor, AutoCAD and Revit.</p>  <p>The diagram below illustrates the general concept:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536dfa970d-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="archi_thumb[5]" border="0" alt="archi_thumb[5]" src="/assets/image_d3785c.jpg" width="477" height="363" /></a></p>  <p>Some explanations about it: The desktop computer on the top left corner is running one of the mentioned above desktop application plus a custom add-in that acts like a management console, allowing users to upload models to a cloud based service or delete existing models hosted on the cloud. </p>  <p>The models are meshed on the console side, then the data is uploaded through a WCF web service to a cloud hosted server. Through the use of Amazon technology, the model data is stored onto the cloud and information relative to which models are hosted is kept in a database, so it can be retrieved without having to examine the model data itself. A series a client viewer applications will be implemented, allowing to visualize the 3d models on various platforms: desktop computers, Android and iOS devices, and Web browsers supporting WebGL technology.</p>  <p>This first post illustrates how to create the two first components of our cloud viewer, which are the WCF service and for testing a desktop executable that consumes that service. In this series I want to demonstrate how to put in place a framework rather than showing in details the complexity of the actual viewer. For that reason I chose to focus on a simplified version of the viewer. Instead of uploading Autodesk models, our viewer will work with image files (jpg, png, bmp). The complete implementation of the viewer will be provided at a later time (around December 2012 timeframe), as it is still a work in progress at the moment.</p>  <p><strong>I – Creating a WCF Service</strong></p>  <p>First we need to create a new project, I use C# as it is my favorite programming language. Select the “WCF Service Application”, as we want to host our service in IIS. I name it “AdnCloudViewerService”:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0176166d4a34970c-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut1_thumb[3]" border="0" alt="tut1_thumb[3]" src="/assets/image_dee969.jpg" width="642" height="326" /></a></p>  <p>I also create a Winform Standalone Executable application that will be used as client to test the service once it’s running.</p>  <p>After a bit of renaming my project architecture looks as follow:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0176166d4a56970c-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut2_thumb[2]" border="0" alt="tut2_thumb[2]" src="/assets/image_39c8a0.jpg" width="351" height="384" /></a></p>  <p>The implementation for my “<em>AdnCloudViewerSrv</em>” service is at the moment a dummy one: it will return an hardcoded array of “<em>ModelInfo</em>” elements.</p>  <p>Here is the declaration of my interface and data structure:</p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">namespace</font></font></span><span style="font-family: "><font style="font-size: 8pt" color="#000000"> AdnCloudViewerService</font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">{</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">ServiceContract</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">interface</font></span><font color="#000000"> </font></font><span style="color: "><font style="font-size: 8pt" color="#2b91af">IAdnCloudViewerSrv</font></span></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">OperationContract</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">ModelInfo</font></span><font color="#000000">[] GetDbModelInfo();</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">DataContract</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">class</font></span><font color="#000000"> </font></font><span style="color: "><font style="font-size: 8pt" color="#2b91af">ModelInfo</font></span></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> ModelInfo(</font><span style="color: "><font color="#0000ff">int</font></span><font color="#000000"> height, </font><span style="color: "><font color="#0000ff">int</font></span><font color="#000000"> width, </font><span style="color: "><font color="#0000ff">string</font></span><font color="#000000"> ext, </font><span style="color: "><font color="#0000ff">string</font></span><font color="#000000"> id)</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">Height = height;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">Width = width;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">FileExt = ext;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">ModelId = id;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">DataMember</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">int</font></span><font color="#000000"> Height</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">get</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">private</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">set</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">DataMember</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">int</font></span><font color="#000000"> Width</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">get</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">private</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">set</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">DataMember</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">string</font></span><font color="#000000"> FileExt</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">get</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">private</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">set</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">[</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">DataMember</font></span><font color="#000000">]</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">public</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">string</font></span><font color="#000000"> ModelId</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">get</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">private</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">set</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal">&#160;</p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font color="#000000" face="Consolas"></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">You can notice the presence of WCF specific attributes “<em>ServiceContract</em>”, “<em>OperationContract</em>”, “<em>DataContract</em>” and “<em>DataMember</em>”. </font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">The ServiceContract contains the methods you want to expose for a service, using the OperationContract will expose that method to the service clients. The custom data structures used by the service must also be exposed using the DataContract / DataMember attributes. </font><font color="#000000">For the actual implementation of “<em>AdnCloudViewerSrv</em>”, I let you refer to the attached sample.</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">We now need to run our web service. In that first post, we are just going to host it locally. There are several options to host a WCF service:</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <blockquote>   <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">- Hosting the service in a standalone .Net executable (this is done through the “ServiceHost” functionality)</font></p> </blockquote>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <blockquote>   <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">- Hosting in a windows service</font></p> </blockquote>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <blockquote>   <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">- Hosting in IIS 7.0</font></p> </blockquote>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">The most flexible and easiest method is probably using IIS, as it doesn’t require any extra coding at the moment. So we will go ahead and use IIS.</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"><strong>II – Hosting WCF Service in IIS</strong></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><strong><font color="#ffffff">-</font></strong></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><strong><font color="#000000"></font></strong></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">The Visual Studio project template generate for us a default web.config file that will work straight away if we host the service in IIS, so at the moment we don’t need to modify it at all. We will do it in later posts in order to add endpoints to our service and use different protocols.</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">This default config file looks as follow. Notice the presence of the “<font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt"><span style="mso-spacerun: yes"></span>&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceMetadata</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">httpGetEnabled</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff">/&gt;</font></span></span></font>” tag that enables our service to expose its metadata:</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">&lt;?</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">xml</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">version</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">1.0</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff">?&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">configuration</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.web</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">compilation</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">debug</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff"> </font></span><span style="color: "><font color="#ff0000">targetFramework</font></span><span style="color: "><font color="#0000ff">=</font></span><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">4.0</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff"> /&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.web</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.serviceModel</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">behaviors</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceBehaviors</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">behavior</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;!--</font></font></span><span style="font-family: ; color: "><font style="font-size: 8pt" color="#008000"> To avoid disclosing metadata information, </font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><font face="Consolas"><font color="#008000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">set the value below to false and remove the </font></font></font></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#008000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">metadata endpoint above before deployment </font></font></span><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">--&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceMetadata</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">httpGetEnabled</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff">/&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;!--</font></font></span><span style="font-family: ; color: "><font style="font-size: 8pt" color="#008000"> To receive exception details in faults for </font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><font face="Consolas"><font color="#008000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">debugging purposes, set the value below to true.</font><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span></font></font></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><font face="Consolas"><font color="#008000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">Set to false before deployment to avoid </font></font></font></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#008000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">disclosing exception information </font></font></span><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">--&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceDebug</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">includeExceptionDetailInFaults</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">false</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff">/&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">behavior</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceBehaviors</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">behaviors</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160;&#160;&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">serviceHostingEnvironment</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">multipleSiteBindingsEnabled</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff"> /&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160;&#160;&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.serviceModel</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;</font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.webServer</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">&lt;</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">modules</font></span><span style="font-family: ; color: "><font color="#0000ff"> </font></span><span style="font-family: ; color: "><font color="#ff0000">runAllManagedModulesForAllRequests</font></span><span style="font-family: ; color: "><font color="#0000ff">=</font></span></font><span style="font-family: "><font style="font-size: 8pt"><font color="#000000">&quot;</font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">&quot;</font></font><span style="color: "><font style="font-size: 8pt" color="#0000ff">/&gt;</font></span></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160; </font></span><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">system.webServer</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: ; color: "><span style="mso-spacerun: yes"><font face="Consolas"><font style="font-size: 8pt" color="#0000ff">&#160; </font></font></span></span><span style="font-family: "></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">&lt;/</font></font></span><font style="font-size: 8pt"><span style="font-family: ; color: "><font color="#a31515">configuration</font></span></font><span style="font-family: ; color: "><font style="font-size: 8pt" color="#0000ff">&gt;</font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal">&#160;</p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font face="Calibri"><font style="font-size: 11pt" color="#000000"></font></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">We now need to build a deployment package for easy deployment on IIS. Let’s create a publish settings for that. Go to that little control, it should be somewhere in the Visual Studio toolbars, then select &lt;New…&gt;:</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536e5a970d-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Screen shot 2012-07-12 at 10.56.41 PM_thumb[2]" border="0" alt="Screen shot 2012-07-12 at 10.56.41 PM_thumb[2]" src="/assets/image_1f3a1d.jpg" width="256" height="94" /></a></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal">&#160;</p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000">Select the “Web Deploy Package” method and fill up the location and site fields. I name my application with a fancy name: “AdnCloudViewer”:</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#ffffff">-</font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016768786f39970b-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut3_thumb[3]" border="0" alt="tut3_thumb[3]" src="/assets/image_75a983.jpg" width="471" height="313" /></a></p>  <p style="line-height: normal; margin: 0in 0in 0pt" class="MsoNormal"><font color="#000000"></font></p>  <p>Then “Publish” the package. If the build is successful it should produce a zip file that can easily be deployed in IIS.</p>  <p>Now fire IIS management console and go to “<em>Default Web Site</em>” &gt; “<em>Deploy</em>” &gt; “<em>Import</em> <em>Application</em>…” </p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536e9e970d-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Screen shot 2012-07-12 at 11.02.20 PM_thumb[1]" border="0" alt="Screen shot 2012-07-12 at 11.02.20 PM_thumb[1]" src="/assets/image_7d6821.jpg" width="474" height="445" /></a></p>  <p>You need to have <a href="http://www.iis.net/download/WebDeploy">Web Deploy</a> installed on the machine for that option to be available.</p>  <p>Browse to your zipped package and accept all the default settings, you should see the following dialog at the end:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536ed3970d-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut4_thumb[1]" border="0" alt="tut4_thumb[1]" src="/assets/image_8593fd.jpg" width="473" height="356" /></a></p>  <p>Fire a web browser and go to the address: </p>  <p><a href="http://localhost:80/AdnCloudViewer/AdnCloudViewerSrv.svc">http://localhost:80/AdnCloudViewer/AdnCloudViewerSrv.svc</a>, if you see something like the following, bingo! our web service is up and running… locally.</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0176166d4add970c-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut5_thumb[1]" border="0" alt="tut5_thumb[1]" src="/assets/image_bd14f6.jpg" width="478" height="470" /></a></p>  <p><strong>III – Creating a desktop client application</strong></p>  <p>Let’s now consume our web service by creating a simple desktop .Net client.</p>  <p>I create a winform that looks like below in order to be able to list the various models we have hosted on the cloud, in a left side TreeView control, a PropertyGrid to display the various fields and a PictureBox for the later versions to display the images:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0176166d4b03970c-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut8_thumb[2]" border="0" alt="tut8_thumb[2]" src="/assets/image_4ba39d.jpg" width="477" height="381" /></a></p>  <p>First thing is to reference our service, so go the “<em>Add Service Reference</em>…” from the right-click menu and input the address of our running service, you should get the following result if the service can be reached:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536f2f970d-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut6_thumb[1]" border="0" alt="tut6_thumb[1]" src="/assets/image_8da132.jpg" width="482" height="390" /></a></p>  <p>Customize the “<em>Namespace</em>” field to whatever you want, and select the “<em>Advanced</em>…” option that brings a second dialog. There make sure you tick the “<em>Generate asynchronous operations</em>” box, this saves us a lot of work in order to be able to perform asynchronous calls to our service:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b0176166d4b38970c-pi"><img style="background-image: none; border-right-width: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="tut7_thumb[1]" border="0" alt="tut7_thumb[1]" src="/assets/image_7944c1.jpg" width="486" height="221" /></a></p>  <p>The code to connect to our service is very straightforward, we have a unique endpoint at the moment, so a single line is requested:</p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">bool</font></font></span><span style="font-family: "><font style="font-size: 8pt" color="#000000"> ConnectService()</font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">{</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt"></font></font></span><span style="color: "><font style="font-size: 8pt" color="#0000ff">&#160;&#160;&#160; try</font></span></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160; {</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; _viewerClient = </font></font><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">new</font></span><font color="#000000"> </font><span style="color: "><font color="#2b91af">AdnCloudViewerSrvClient</font></span><font color="#000000">();</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000"></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt"></font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">&#160;&#160;&#160;&#160;&#160;&#160;&#160; return</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">true</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160; }</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt"></font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">&#160;&#160;&#160; catch</font></span><font color="#000000"> (</font><span style="color: "><font color="#2b91af">Exception</font></span><font color="#000000"> ex)</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160; {</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; System.Windows.Forms.</font></font><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">MessageBox</font></span><font color="#000000">.Show(ex.Message);</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000"></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt"></font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">&#160;&#160;&#160;&#160;&#160;&#160;&#160; return</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">false</font></span><font color="#000000">;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt"></font></span><font style="font-size: 8pt">&#160;&#160;&#160; }</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></span></p>  <p>From our “<span style="color: "><font color="#2b91af">AdnCloudViewerSrvClient</font></span>” we could now simply call the “GetDbModelInfo” and place a break point to see that our service is working as expected:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b016768787011970b-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Screen shot 2012-07-13 at 1.17.28 AM_thumb[3]" border="0" alt="Screen shot 2012-07-13 at 1.17.28 AM_thumb[3]" src="/assets/image_7d709f.jpg" width="495" height="247" /></a></p>  <p>However invoking that method directly result in a synchronous call. Most of the time you will want to perform asynchronous call to a web service, due to the latency the UI will look frozen otherwise.</p>  <p>The following code illustrates how to achieve the asynchronous call, it is slightly more complex, but the asynchronous wrappers have already been generated by Visual Studio:</p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">private</font></font></span><span style="font-family: "><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#0000ff">void</font></span><font color="#000000"> BeginRefreshCloudModels()</font></font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">{</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">_tvModels.Nodes.Clear();</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">TreeNode</font></span><font color="#000000"> root = _tvModels.Nodes.Add(</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#a31515">&quot;_cloudModelsKey&quot;</font></span><font color="#000000">, </font><span style="color: "><font color="#a31515">&quot;Cloud Models&quot;</font></span><font color="#000000">, 0, 0);</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">_viewerClient.BeginGetDbModelInfo(</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">new</font></span><font color="#000000"> </font><span style="color: "><font color="#2b91af">AsyncCallback</font></span><font color="#000000">(GetDbModelInfoAsyncResponder),</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">null</font></span><font color="#000000">);</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">private</font></font></span><span style="font-family: "><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#0000ff">void</font></span><font color="#000000"> EndRefreshCloudModels(</font><span style="color: "><font color="#2b91af">ModelInfo</font></span><font color="#000000">[] infos)</font></font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">{</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">TreeNode</font></span><font color="#000000"> root = _tvModels.Nodes[0];</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">foreach</font></span><font color="#000000"> (</font><span style="color: "><font color="#2b91af">ModelInfo</font></span><font color="#000000"> info </font><span style="color: "><font color="#0000ff">in</font></span><font color="#000000"> infos)</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">TreeNode</font></span><font color="#000000"> node = root.Nodes.Add(info.ModelId);</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">node.Tag = info;</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">root.Expand();</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">private</font></font></span><span style="font-family: "><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#0000ff">delegate</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">void</font></span><font color="#000000"> </font><span style="color: "><font color="#2b91af">RefreshCloudModelsDelegate</font></span><font color="#000000">(</font><span style="color: "><font color="#2b91af">ModelInfo</font></span><font color="#000000">[] infos);</font></font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><font face="Consolas"><span style="font-family: ; color: "><font color="#0000ff"><font style="font-size: 8pt">private</font></font></span><span style="font-family: "><font style="font-size: 8pt"><font color="#000000"> </font><span style="color: "><font color="#0000ff">void</font></span><font color="#000000"> GetDbModelInfoAsyncResponder(</font><span style="color: "><font color="#2b91af">IAsyncResult</font></span><font color="#000000"> result)</font></font></span></font></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">{</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><span style="color: "><font style="font-size: 8pt" color="#0000ff">try</font></span></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#2b91af">ModelInfo</font></span><font color="#000000">[] infos = _viewerClient.EndGetDbModelInfo(result);</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">if</font></span><font color="#000000"> (result.IsCompleted)</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">this</font></span><font color="#000000">.Invoke(</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">new</font></span><font color="#000000"> </font><span style="color: "><font color="#2b91af">RefreshCloudModelsDelegate</font></span><font color="#000000">(EndRefreshCloudModels),</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">new</font></span><font color="#000000"> </font><span style="color: "><font color="#0000ff">object</font></span><font color="#000000">[] { infos });</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 8pt">&#160;&#160;&#160; </font></font></span><font style="font-size: 8pt"><span style="color: "><font color="#0000ff">catch</font></span><font color="#000000"> (</font><span style="color: "><font color="#2b91af">Exception</font></span><font color="#000000"> ex)</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">{</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">&#160;</font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 8pt">&#160;&#160;&#160; </font></span><font style="font-size: 8pt">}</font></font></font></span></p>  <p style="line-height: normal; margin: 0in 0in 0pt; text-autospace: ; mso-layout-grid-align: none" class="MsoNormal"><span style="font-family: "><font face="Consolas"><font style="font-size: 8pt" color="#000000">}</font></font></span></p>  <p>With that we can finish the implementation of our desktop viewer and test it:</p>  <p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b017743536f74970d-pi"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="res_thumb[1]" border="0" alt="res_thumb[1]" src="/assets/image_47da6e.jpg" width="315" height="359" /></a></p>  <p>That’s it for today folks. In the next post we will take a look at two Amazon APIs SimpleDb and S3, and add further functionalities to our web service in order to upload actual images and retrieve them from the client…</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:fb3a1972-4489-4e52-abe7-25a00bb07fdf:930d758c-5f2c-44e1-9072-16ecc88333f8" class="wlWriterEditableSmartContent"><p> <a href="http://adndevblog.typepad.com/adncloudviewertutorial-2.zip" target="_blank">AdnCloudViewerTutorial.zip</a></p></div>
