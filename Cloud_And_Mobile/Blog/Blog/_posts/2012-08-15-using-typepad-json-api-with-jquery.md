---
layout: "post"
title: "Using typepad JSON API with jQuery"
date: "2012-08-15 05:39:50"
author: "Adam Nagy"
categories:
  - "Adam Nagy"
  - "Javascript"
original_url: "https://adndevblog.typepad.com/cloud_and_mobile/2012/08/using-typepad-json-api-with-jquery.html "
typepad_basename: "using-typepad-json-api-with-jquery"
typepad_status: "Publish"
---

<p>We have our various Developer Blogs on <a href="http://www.typepad.com/" target="_self">typepad.com</a>, including the one this is posted on :),&#0160;and it is interesting to gather some statistics about our activities. So I had a look at what the <a href="http://developer.typepad.com/api/" target="_self">typepad API</a> offers.</p>
<p>Since it is RESTful like many other services on the web, it is quite easy to use it from almost any programming environment. I thought I&#39;d try something lightweight and stumbled upon <a href="http://jquery.com/" target="_self">jQuery</a> which I used in conjunction with JavaScript inside an html page. I just wanted to get information about our posts and then place the results in a simple html table.</p>
<p>When checking if jQuery had any support in Visual Studio I ran into <a href="http://blogs.msdn.com/b/brunoterkaly/archive/2011/11/17/how-to-consume-restful-services-using-jquery-and-or-javascript.aspx" target="_self">this sample</a>, which did not actually retrieve results (I think the service it is trying to talk to is down or I was supposed to create the service as well), but at least it&#39;s given me an idea about what a basic application would look like and also to simply start with an <strong>ASP.NET Web Application</strong>&#0160;project. I just had to add an <strong>HTML Page</strong> item to the project and paste the sample in it.</p>
<p>After reading <a href="http://weblogs.asp.net/scottgu/archive/2008/11/21/jquery-intellisense-in-vs-2008.aspx" target="_self">this article</a> I just replaced the <strong>&lt;script&gt;</strong> tag&#39;s <strong>src</strong> attribute in the code to point at the <strong>jquery-1.4.1.js</strong> file which was part of the project by default and the intellisense for jQuery started working.</p>
<p>When I hit <strong>Debug (F5)</strong> then the html page automatically started on the localhost and I could step through the code to see what&#39;s going on. If you want to take advantage of <strong>console.log()</strong> then you have to make sure that before trying to use that, the <strong>Developer Tools</strong> window is open in IE - click <strong>Tools &gt; Developer Tools (F12)</strong>. To see the logs just select <strong>Script</strong> tab on the left side of the Developer Tools window and <strong>Console</strong> on the right side. To avoid error popping up when you forget to start Developer Tools, best thing is to create you own log function and use that - maybe something like this:</p>
<p><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"><span style="color: #0000ff;">function</span> log(text) { </span><br /><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"><span style="color: #0000ff;"> &#0160; try</span> {</span><br /><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"> &#0160; &#0160; console.log(text);</span><br /><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"> &#0160; }</span><br /><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"><span style="color: #0000ff;"> &#0160; catch</span> (e) { }</span><br /><span style="font-family: &#39;courier new&#39;, courier; font-size: 8pt;"> } <span style="color: #007f40;">// function log()</span></span></p>
<p>I wanted to get a list of who posted on which blog and when. The only way I&#39;ve found to achieve that was using the <strong><a href="http://www.typepad.com/services/apidocs/endpoints/blogs/%253Cid%253E/post-assets" target="_self">/blogs/&lt;id&gt;/post-assets</a></strong> endpoint, which means that I&#39;m retrieving complete articles/posts not just some basic information about them - maybe there is a less traffic intensive way? I haven&#39;t found one.</p>
<p>In order to use the above, I needed to find out the id of the blogs I wanted to gather information about. There may be a programmatic way, but since it won&#39;t change anyway and there are not so many of them I just used the <a href="http://www.typepad.com/services/idfinder" target="_self">id finder</a> of typepad - you just need to type in the URL of one of the articles posted on the blog you want to get the id of.</p>
<p>Now I just had to run an <strong><a href="http://api.jquery.com/jQuery.ajax/" target="_self">$.ajax()</a></strong> query on the above mentioned endpoints to get the blog posts from them. As it turned out the maximum number of results was 50, so if I want to check more, I need to keep querying starting with a different index. You need to use the&#0160;<strong>start-index</strong> query string argument for that.</p>
<p>I wrote the functionality so that I can specify how many days back I want to check. Based on the returned results I could see that the post at the first index was the newest article and the others were coming in chronological order going back to the oldest one. So  if I reached an article which was older than the ones I was interested in then I could just stop querying further. Also as soon as I reach such an article I could stop the loop. When using <strong>$.each()</strong> to iterate through items you can just return <strong>false</strong> from the function you pass in to achieve just that.</p>
<p>One nice thing about using jQuery is that the received JSON data can be accessed as properties. E.g. in case of the JSON structure <strong>/blogs/&lt;id&gt;/post-assets</strong> retrieves I can just say <strong>data.entries[0].container.displayName</strong> to get the name of the blog that the article was posted on :)</p>
<p>Sometimes when debugging the html page it did not contain the latest code. Simply clicking refresh in IE once it popped up seemed to solve this issue.<br />I also ran into some other nice little issues like in IE you <a href="http://support.microsoft.com/kb/239832" target="_self">cannot set the &lt;table&gt; content through innerHTML</a>, if you turn off <strong>cache</strong> for the <strong>$.ajax()</strong> call it will add some extra query string that typepad does not like, etc, but I got there in the end. :)</p>
<p>Attached is the code I came up with. You can easily modify it to retrieve information about your own typepad blog or other ones:&#0160; <span class="asset  asset-generic at-xid-6a0167607c2431970b0176173e57c6970c"><a href="http://adndevblog.typepad.com/files/devblogstats_2012-08-15.zip">Download DevBlogStats_2012-08-15</a></span></p>
