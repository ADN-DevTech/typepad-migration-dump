---
layout: "post"
title: "Windows Authentication"
date: "2009-10-14 16:23:40"
author: "Doug Redmond"
categories:
  - "Tips and Tricks"
original_url: "https://justonesandzeros.typepad.com/blog/2009/10/windows-authentication.html "
typepad_basename: "windows-authentication"
typepad_status: "Publish"
---

<p><strong><img src="/assets/TipsAndTricks2.png" /> </strong></p>
<p><strong>Do not send Windows usernames and passwords to Vault!!!</strong></p>
<p>Yes, I know the login dialog makes it look like this information is going to Vault, but thatâ€™s not how it works at the API level.&#0160; <br /><img src="/assets/Login.png" /> </p>
<p>What is really going on is that the Win Auth Service is used to sign in to Vault instead of the Security Service.</p>
<p>When you sign in through the Win Auth Service, you do <strong>not</strong> pass in any usernames or passwords.&#0160; Instead you indicate that you want to use Windows credentials when making the HTTP request.&#0160; Once signed in, the security credentials can be copied over to the other web service objects, just like with the Security Service.</p>
<p>Here, have some sample code.&#0160; Note that only the Vault name is passed in to SignIn().</p>
<p>C#:</p>
<table border="2" cellpadding="2" cellspacing="0" width="480">
<tbody>
<tr>
<td valign="top"><span style="FONT-SIZE: 8pt; COLOR: green; FONT-FAMILY: &#39;Courier New&#39;">// login to the Vault and set up the document service</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">WinAuthService winAuthSvc = <span style="COLOR: blue">new</span> WinAuthService();</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">&#0160;</span> <br /><span style="FONT-SIZE: 8pt; COLOR: green; FONT-FAMILY: &#39;Courier New&#39;">// NOTE:&#0160; The WinAuthService is in a different folder than the other services</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.Url = <span style="COLOR: #a31515">&quot;http://localhost/AutodeskDM/Services/WinAuth/WinAuthService.asmx&quot;</span>;</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.UseDefaultCredentials = <span style="COLOR: blue">true</span>;</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.SecurityHeaderValue = <span style="COLOR: blue">new</span> WinAuth.SecurityHeader();</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.SignIn(<span style="COLOR: #a31515">&quot;Vault&quot;</span>);</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">&#0160;</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">DocumentServiceWse docSvc = <span style="COLOR: blue">new</span> DocumentServiceWse();</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.Url = <span style="COLOR: #a31515">&quot;http://localhost/AutodeskDM/Services/DocumentService.asmx&quot;</span>;</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue = <span style="COLOR: blue">new</span> Document.SecurityHeader();</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue.Ticket = winAuthSvc.SecurityHeaderValue.Ticket;</span> <br /><span style="FONT-SIZE: 8pt; LINE-HEIGHT: 115%; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue.UserId = winAuthSvc.SecurityHeaderValue.UserId;</span> <br /></td></tr></tbody></table>
<br />
<p>VB.NET:</p>
<p></p>
<table border="2" cellpadding="2" cellspacing="0" width="480">
<tbody>
<tr>
<td valign="top"><span style="FONT-SIZE: 8pt; COLOR: green; FONT-FAMILY: &#39;Courier New&#39;">&#39; login to the Vault and set up the document service</span> <br /><span style="FONT-SIZE: 8pt; COLOR: blue; FONT-FAMILY: &#39;Courier New&#39;">dim</span><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;"> winAuthSvc <span style="COLOR: blue">as</span> WinAuthService&#0160; = <span style="COLOR: blue">new</span> WinAuthService()</span> <span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">&#0160;</span> <br /><span style="FONT-SIZE: 8pt; COLOR: green; FONT-FAMILY: &#39;Courier New&#39;"><br />&#39; NOTE:&#0160; The WinAuthService is in a different folder than the other services</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.Url = <span style="COLOR: #a31515">&quot;http://localhost/AutodeskDM/Services/WinAuth/WinAuthService.asmx&quot;</span></span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.UseDefaultCredentials = <span style="COLOR: blue">true</span></span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.SecurityHeaderValue = <span style="COLOR: blue">new </span>WinAuth.SecurityHeader()</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">winAuthSvc.SignIn(<span style="COLOR: #a31515">&quot;Vault&quot;</span>)</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">&#0160;</span> <br /><span style="FONT-SIZE: 8pt; COLOR: blue; FONT-FAMILY: &#39;Courier New&#39;">dim</span><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;"> docSvc <span style="COLOR: blue">as</span> DocumentServiceWse&#0160; = <span style="COLOR: blue">new</span> DocumentServiceWse()</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.Url = <span style="COLOR: #a31515">&quot;http://localhost/AutodeskDM/Services/DocumentService.asmx&quot;</span></span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue = <span style="COLOR: blue">new</span> Document.SecurityHeader()</span> <br /><span style="FONT-SIZE: 8pt; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue.Ticket = winAuthSvc.SecurityHeaderValue.Ticket</span> <br /><span style="FONT-SIZE: 8pt; LINE-HEIGHT: 115%; FONT-FAMILY: &#39;Courier New&#39;">docSvc.SecurityHeaderValue.UserId = winAuthSvc.SecurityHeaderValue.UserId</span> <br /></td></tr></tbody></table>
