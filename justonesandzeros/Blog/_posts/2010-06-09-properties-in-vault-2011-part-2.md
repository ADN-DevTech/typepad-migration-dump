---
layout: "post"
title: "Properties in Vault 2011 - Part 2"
date: "2010-06-09 07:44:10"
author: "Doug Redmond"
categories:
  - "Concepts"
original_url: "https://justonesandzeros.typepad.com/blog/2010/06/properties-in-vault-2011---part-2.html "
typepad_basename: "properties-in-vault-2011---part-2"
typepad_status: "Publish"
---

<p><img src="/assets/Concepts2.png" /> </p> <p>Before you read this, I suggest reading my post on <a href="http://justonesandzeros.typepad.com/blog/2010/05/entities.html">entities</a> then reading <a href="http://justonesandzeros.typepad.com/blog/2010/06/properties-in-vault-2011---part-1.html">part 1 on properties</a>.&#0160; If not, I&#39;m not legally responsible for any brain damage that may occur.</p> <p><strong>File Properties</strong>   <br />In my last article, I mentioned how the properties concept spans multiple entity classes.&#0160; However there are still implementation details that are unique to each class.&#0160; In this article, I will focus specifically on file properties.</p> <p><strong>Content Source Properties</strong>   <br />In the context of Files, a content source property represents a property within the file.&#0160; This might be a title block attribute from an AutoCAD file, or an iProperty from an Inventor file, or a structured storage property from a Microsoft Office file.&#0160; A property may even be something more abstract, such as the number of colors in a JPG file.&#0160; The point is that the property lives <em>inside</em> the file, and Vault needs a way to read and write this information.&#0160; </p> <p>As I mentioned in my last article, the content source provider is the glue that reads and writes content source properties from a file and maps them to Vault UDPs.&#0160; Because each file type is different, there are multiple providers, broken up by file type.</p> <p>The &quot;All Files&quot; provider is a special case.&#0160; It&#39;s the one that gets used when no other provider is available.&#0160; This provider works by using the Windows iFilter mechanism to read the content source properties.&#0160; If no suitable iFilter is found, then content source properties cannot be read for that file type.&#0160; The &quot;All Files&quot; provider cannot be used to write content source properties.</p> <p><strong>Mappings</strong>   <br />Content Source Properties are useless to Vault unless they are mapped to a UDP.&#0160; If you&#39;ve seen the Properties dialog, you have probably noticed a bunch of complex options.&#0160; </p> <p><img src="/assets/mappingtab_scaled.png" /> </p> <p>Mappings between content source properties and UDPs have a direction component.&#0160; You can have mappings from content to UDP, or from UDP to content, or bi-directional mappings.&#0160; Not all properties support all 3 mapping types.&#0160; The provider decides which mappings are supported.&#0160; When writing to content, there is a &quot;create&quot; option which means the provider can create the property in the file if the property does not already exist.&#0160; If the value is NO, the provider will only update an existing property.&#0160; </p> <table border="1" cellpadding="2" cellspacing="0" width="450"><tbody>   <tr>    <td valign="top" width="225">Mapping Type</td>    <td valign="top" width="225">What it means for files</td>   </tr>   <tr>    <td valign="top" width="225">Content -&gt; UDP</td>    <td valign="top" width="225">When a file is versioned, the file property value is copied to the UDP value.</td>   </tr>   <tr>    <td valign="top" width="225">UDP -&gt; Content</td>    <td valign="top" width="225">When a &quot;writeback&quot; operation occurs in Vault, the UDP value is written to the file.&#0160; This process creates a new file version.</td>   </tr>   <tr>    <td valign="top" width="225">Bi-directional</td>    <td valign="top" width="225">UDP is updated with a new file version and the content property is updated on writeback. </td>   </tr>  </tbody></table> <p><strong>Setting up a mapping   <br /></strong>In order to set up the mapping, you must have a file that contains the content source property you want to map.&#0160; In Vault Explorer, you select the file, which can either be in Vault already or on your local disk.&#0160; Next, you are presented with the possible properties that you can map to.&#0160; Once you select the file property, you can choose the direction of the mapping.</p> <p>When you click OK, Vault updates the UDP with information about the mapped content source property.</p> <p><img src="/assets/ImportProperties.png" /> </p> <p>You should also notice that A) you can have several providers mapped to the same UDP and B) each mapping is independent of the other mappings.&#0160; A given file will map to 1 and only 1 provider, so there is no danger of conflict.&#0160; </p> <p><strong>Monikers</strong>   <br />This is a good time to talk about monikers.&#0160; A moniker is a string that the provider uses to locate the property.&#0160; Outside the provider, the moniker is just opaque metadata.&#0160; For example, &quot;15!{D5CDD502-2E9C-101B-9397-08002B2CF9AE}!nvarchar&quot; is the moniker that the Inventor provider uses to locate the Company iProperty.&#0160; That string is meaningless to you and me, it is meaningless to Vault and it is meaningless to the other providers.&#0160;&#0160;&#0160; </p> <p>The only thing that Vault does with the moniker string is to store it with the mapped UDP.&#0160; Whenever Vault needs to read or write a content source property, it passes the moniker in to the provider so that it can locate the correct property.</p> <p><strong>Coming up...</strong>   <br />An article on <strong>item properties</strong>, followed by an article on <strong>common workflows</strong> (with sample code).</p>
