---
layout: "post"
title: "Entities"
date: "2010-05-25 08:50:34"
author: "Doug Redmond"
categories:
  - "Concepts"
original_url: "https://justonesandzeros.typepad.com/blog/2010/05/entities.html "
typepad_basename: "entities"
typepad_status: "Publish"
---

<p><img alt="" src="/assets/Concepts3.png" /></p>
<p>Update:&#0160; This article has been re-written for Vault 2012. In my opinion, <a href="http://justonesandzeros.typepad.com/blog/2011/09/entities-and-behaviors.html" target="_self">the new article </a>does a better job of explaining the major concepts.</p>
<hr noshade="noshade" style="color: #5acb04;" />
<p>In the Vault 2011 API, many of the features are driven by an Entity concept.&#0160; In fact, entire services use Entities as their common currency.&#0160; Specifically the Behavior, Category, Property, Replication, Revision and Security services.&#0160; So what are Entities?&#0160; How do you use them?</p>
<table border="1" cellpadding="2" cellspacing="0" width="450">
<tbody>
<tr>
<td valign="top" width="450">Quick Definition: An Entity allows a feature to be applied to multiple object types.</td>
</tr>
</tbody>
</table>
<p>The closest analogy I can come up with is the Object base class in .NET.&#0160; It&#39;s kind of like a top-level base class which can be used to manipulated objects in an abstract way.&#0160;</p>
<p>For Vault, this means that there can be a single function that operates on multiple object types.&#0160; In earlier versions of Vault, separate functions had to be created for each item type.</p>
<p>For example, in Vault 2010, there are 5 functions for looking up property values:  <br /><span style="font-size: xx-small;">&#0160;&#0160; PropInst [] DocumentService.GetProperties (Long [] fileIds, Long [] propertyDefinitionIds)   <br />&#0160;&#0160; PropInst [] ItemService.GetItemProperties (Long [] itemIds, Long [] propertyDefIDs)    <br />&#0160;&#0160; PropInst [] ItemService.GetReferenceDesignatorProperties (Long [] itemRefDesIds, Long [] propertyDefIDs)    <br />&#0160;&#0160; PropInst [] ChangeOrderService.GetChangeOrderProperties (Long [] changeOrderIds, Long [] propertyListIds)    <br />&#0160;&#0160; PropInst [] ForumService.GetMessageProperties (Long [] messageIds, Long [] propertyListIds)</span> <br /> <br />In Vault 2011, the same functionality is contained in a single function:   <br />&#0160;&#0160; <span style="font-size: xx-small;">PropInst [] PropertyService.GetProperties (String entityClassId, Long [] entityIds, Long [] propertyDefIds)</span></p>
<p><strong>Not everything is an Entity</strong> <br />Most of the major objects are Entities, such as Files and Folders.&#0160; But some things are not, like Users and Groups.&#0160; I don&#39;t want to go into why some things are Entities and some things are not.&#0160; That explanation would require me to go deep into the database architecture.&#0160; <strong>The general rule is to assume that everything is not an Entity unless explicitly stated.</strong></p>
<p><strong>Some objects contain multiple Entities</strong> <br />A File object actually has 2 Entities contained inside it.&#0160; The &quot;File Version&quot; Entity and the &quot;File Master&quot; Entity.&#0160; These are uniquely identified by the Id and MasterId properties respectively.&#0160; The function parameter will usually tell you which ID to pass in.  <br />For Item objects, there are 3 Entities:&#0160; Item Version, Item Revision and Item Master.</p>
<p><strong>The list of Entities   <br /></strong>Here is the list of Entities that are in use for the Vault 2011 API:</p>
<ul>
<li>File Version </li>
<li>File Master </li>
<li>Folder </li>
<li>Item Version </li>
<li>Item Revision </li>
<li>Item Master </li>
<li>Reference Designator </li>
<li>Change Order </li>
<li>Forum Message </li>
</ul>
<p>Internal to the database, there are more Entity types, but they can&#39;t be used as Entities at the API level.</p>
<p><strong>Functions do not support all Entity types</strong> <br />Just because a function takes an EntityId doesn&#39;t mean the function will work with all Entity types.&#0160; For example, if you pass in a Folder.Id to GetProperites, it will fail because Vault does not support properties on Folders.&#0160; <br />So there is some burden on the programmer to know which functions work on which Entity types.&#0160; Knowledge of the Vault product itself should be sufficient to deduce this information.</p>
<p><strong>Entity IDs are unique across a given Vault</strong> <br />All Entity ID values are taken from the same numbering system.&#0160; For example, if you have a Folder with an ID of 5, there will be no Files with an ID of 5 for the Vault.</p>
<p><strong>API terms</strong> <br /><strong>EntityId</strong> - This is the ID value of the Entity.&#0160; Usually this is the &#39;Id&#39; property on the object.&#0160; If there are multiple Entities in the object, then pass in the one that relates to a specific version (ex.&#0160; File.Id or Folder.Id)   <br /><strong>EntityMasterId</strong> - This is the ID value that matches to the master concept, which refers to all versions of the object (ex.&#0160; File.MasterId).&#0160; If the object isn&#39;t a type that is versioned, just pass in the regular &#39;Id&#39; property (ex. Folder.Id).   <br /><strong>EntityClassId</strong> - This is a string value that tells what type of object to work with.&#0160; Some functions require this information and some do not.&#0160; Call AdminService.GetServerConfiguration() to see the list of legal values.&#0160; <br />NOTE:&#0160; Folder is noticeably absent from the list.&#0160; The reason is that there are are no functions that require an EntityClassId of &quot;FOLDER&quot;.</p>
<p><img alt="" src="/assets/Concepts3-1.png" /></p>
