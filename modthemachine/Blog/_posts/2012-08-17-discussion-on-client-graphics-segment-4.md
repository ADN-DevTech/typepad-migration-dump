---
layout: "post"
title: "Discussion on Client Graphics &ndash; Segment 4"
date: "2012-08-17 21:37:52"
author: "Wayne Brill"
categories:
  - "Assemblies"
  - "Drawings"
  - "Inventor"
  - "Parts"
  - "Wayne"
original_url: "https://modthemachine.typepad.com/my_weblog/2012/08/discussion-on-client-graphics-segment-4.html "
typepad_basename: "discussion-on-client-graphics-segment-4"
typepad_status: "Publish"
---

<p>Here is the last of four articles on Client Graphics. This was originally in a technical paper written by Autodesk Developer Network engineer Xiaodong Liang.</p>
<p>Note: Segment 3 is <a href="http://modthemachine.typepad.com/my_weblog/2012/08/discussion-on-client-graphics-segment-3.html" target="_blank">here</a>.</p>
<p><strong>This zip file has a VB.NET project with the examples discussed in this section.</strong></p>
<p><strong><span class="asset  asset-generic at-xid-6a00e553fcbfc6883401676956114b970b"><a href="http://modthemachine.typepad.com/files/clientgraphics_segment_4.zip">Download ClientGraphics_Segment_4</a></span></strong></p>
<p><strong>Start of segment 4</strong></p>
<p><strong>Interaction Client Graphics <br /></strong>Interaction Client Graphics operate in a similar manner to regular ClientGraphics, except that it all happens in the context of InteractionEvents. ClientGraphics created via InteractionGraphics are optimized for this environment, and run much faster. They are well suited to real-time feedback during a command. As the client graphics are displayed in the context of an InteractionEvents object, they can take advantage of mouse movement information, selection information, in fact, any events supported by the InteractionEvents objects. These graphics are automatically removed once the associated InteractionEvents object stops.</p>
<p>The interaction graphics can be Preview or Overlay. Preview graphics are equivalent to regular Client Graphics. The only difference between Overlay and Preview graphics is that Overlay graphics can be drawn independently, in a single view (window), and then merged with the last full redraw of the scene by drawing the graphics in a special &quot;overlay&quot; plane. It doesn&#39;t mean that the graphics are always drawn on top. You can position them anywhere you want and you can toggle the &quot;burn through&quot; option. In short, anything you can do with preview graphics you can do with overlay graphics.</p>
<p>The creation of interaction graphics is not transacted. This is done for performance reasons, and to avoid some side effects, like clearing of the selection set. This also means that transacting operations cannot be mixed with preview graphics.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834016769560f80970b-pi"><img alt="image" border="0" height="273" src="/assets/image_662360.jpg" style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" width="479" /></a></p>
<p>&#0160;</p>
<p style="line-height: 140%; font-family: arial; background: #eeeeee; color: black; font-size: 9pt;"><span style="color: #0000ff;">‘&lt;code snippet: interaction events (Overlay)&gt; <br /></span>‘start interaction event and get the overlay graphics <br />Dim oIE As InteractionEvents <br />Set oIE = ThisApplication.CommandManager.CreateInteractionEvents <br />oIE.Start <br /><br />Dim oClientGraphics As ClientGraphics <br />Set oClientGraphics = oIG.OverlayClientGraphics <br /><br /><span style="color: #0000ff;">‘create line strip graphics <br /></span>Dim oLineStrip As LineStripGraphics <br />Set oLineStrip = oLineStripNode.AddLineStripGraphics <br />&#0160;&#0160;&#0160; <br /><span style="color: #0000ff;">&#39; Assign the same coordinate set to the line strip. <br /></span>oLineStrip.CoordinateSet = oCoordSet <br /><br /><span style="color: #0000ff;">&#39; Update the view to see the resulting spiral. <br /></span>oIG.UpdateOverlayGraphics ThisApplication.ActiveView</p>
<p><strong>&#0160;</strong></p>
<p><strong>Store Client Graphics <br /></strong>In general, ClientGraphics will be maintained and transformed by Inventor for the duration of the session only. Using the GraphicsDataSetsCollection.Add method will allow the data to be saved with the file. When the document is opened, the ClientGraphics are persisted, and are still available to be further manipulated.</p>
<p>In Part or Assembly documents, you can attach client graphics to ClientFeature objects, so the graphics will be stored with document. The presumption is the graphics data is created by GraphicsDataSetsCollection.Add. In Drawing documents only the data can be saved. A developer’s application has to redraw the graphics using the client graphics data after the Drawing document has been re-opened. <br /><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc688340176174a5ec8970c-pi"><img alt="image" border="0" height="272" src="/assets/image_727287.jpg" style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" width="464" /></a></p>
<p>&#0160;</p>
<p style="line-height: 140%; font-family: arial; background: #eeeeee; color: black; font-size: 9pt;"><span style="color: #0000ff;">‘&lt;code snippet: store client graphics with client feature&gt; <br /></span>Dim invCF As ClientFeature <br /><span style="color: #0000ff;">‘get/create ClientFeature <br /></span>Dim invCFD As ClientFeatureDefinition <br />invCFD = invCF.Definition <br /><br /><span style="color: #0000ff;">‘Create &amp; store graphics data <br /></span>Dim oGraphicsData As GraphicsDataSets <br />Set oGraphicsData = oDoc.GraphicsDataSetsCollection.Add2(&quot;TestCG_StoreData&quot;, True) <br /><br />&#0160;<span style="color: #0000ff;">‘create graphics in the ClientFeature <br /></span>Dim oClientGraphics As Inventor.ClientGraphics <br />Set oClientGraphics = invCFD.ClientGraphicsCollection(&quot;ClientFeatureTest&quot;) <br /><br /><br /><span style="color: #0000ff;">‘create graphics node <br /></span>Dim oGraphicsNode As GraphicsNode <br />Set oGraphicsNode = oClientGraphics.AddNode(oClientGraphics.count + 1) <br /><br />Dim oPointCoords(11) As Double &#39;create 4 points <br />&#0160; oPointCoords(0) = 0: oPointCoords(1) = 0: oPointCoords(2) = 0 <br />&#0160; oPointCoords(3) = 1: oPointCoords(4) = 1: oPointCoords(5) = 0 <br />&#0160; oPointCoords(6) = 2: oPointCoords(7) = 0: oPointCoords(8) = 0 <br />&#0160; oPointCoords(9) = 3: oPointCoords(10) = 1: oPointCoords(11) = 0 <br />&#0160; Call oCoordSet.PutCoordinates(oPointCoords) <br /><br />&#0160;&#0160; &#39;Lines: totally, 2 lines <br />&#0160; Dim oGraphic As LineGraphics <br />&#0160; Set oGraphic = oGraphicsNode.AddLineGraphics&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; <br />&#0160; oGraphic.CoordinateSet = oCoordSet</p>
<p>&#0160;</p>
<p><strong>Advanced Functionality <br /><em>Slice <br /></em></strong>This provides the functionality that slices the graphics based on the input planes and optionally caps the sliced end. <br /><strong><em>Texture mapping <br /></em></strong>Texture mapping provides the ability to more accurately define color mapping to the model.&#0160; For example, with the previous functionality you were limited to assigning colors to vertices and then relying on Inventor to interpolate the color across the triangle.&#0160; If you had a plane constructed of two triangles you would not be able to define any intermediate colors between the vertices.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc688340176174a5edd970c-pi"><img alt="image" border="0" height="283" src="/assets/image_540279.jpg" style="background-image: none; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border-width: 0px;" title="image" width="493" /></a></p>
<p>This is the end of this series. These posts will also be of interest:</p>
<p><a href="http://au.autodesk.com/?nd=class&amp;session_id=9027" target="_blank">AU Session - Client Graphics API Exposed</a></p>
<p>MFG DevBlog post - <a href="http://adndevblog.typepad.com/manufacturing/2012/07/complete-clientfeature-example-in-c.html" target="_blank">Complete ClientFeature example in C#</a></p>
<p>The <a href="http://adndevblog.typepad.com/manufacturing/" target="_blank">Manufacturing DevBlog</a> has other posts on Client Graphics as well. Also don’t forget the help file. It has examples for ClientGraphics too.</p>
<p>- Wayne</p>
