---
layout: "post"
title: "Understanding File References"
date: "2008-11-06 22:51:29"
author: "Adam Nagy"
categories:
  - "Assemblies"
  - "Brian"
original_url: "https://modthemachine.typepad.com/my_weblog/2008/11/understanding-file-references.html "
typepad_basename: "understanding-file-references"
typepad_status: "Publish"
---

<p>It&#39;s been a long time since my last post.&#0160; I&#39;ve been busy with Autodesk University preparation and the next release of Inventor.</p>
<p>I thought I would take some time to discuss something that is related to some questions I recently saw on the newsgroup and see come up frequently.&#0160; The topic is file references.</p>
<p><strong>Overview</strong></p>
<p>To start let&#39;s look at a very simple case of creating an assembly.&#0160; When you first create the assembly (Assembly.iam in this example) it is empty and doesn&#39;t have any references to other files.&#0160;&#0160;&#0160; When you place a part into the assembly there are two things that Inventor creates.&#0160; It creates the occurrence that you see in the graphics window and as a node in the browser, and it also creates a reference to the part file.&#0160; The file reference isn&#39;t something you see in the user interface but is an internal action that takes place.</p>
<p>To make sense of the file reference concept, I visualize the references as a table in each Inventor document.&#0160; The table is a list of all of the files that file references.&#0160; The table doesn&#39;t know why the reference exists (in this example because of an occurrence being placed), but just that there is a reference to a certain file.&#0160; Below is a picture that illustrates this.&#0160; It&#39;s the assembly with a single instance of Part1.ipt.&#0160; We see the part in the graphics window and in the browser.&#0160; It also shows a representation of the internal table that contains a list of the referenced files, which in this case has a single file in the list.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535df3e58970c-pi"><img alt="FileReferences1" border="0" height="259" src="/assets/image_671458.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="404" /></a> </p>
<p>Now I&#39;ve added a second part to the assembly, Part2.ipt, with the result shown below.&#0160; The result shouldn&#39;t be surprising; a new occurrence in the graphics window and browser and another file in the reference table.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535df3e66970c-pi"><img alt="FileReferences2" border="0" height="259" src="/assets/image_189395.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="404" /></a> </p>
<p>Now I&#39;ve added two more instances of Part1.ipt.&#0160; You see the additional occurrences in the graphics window and the browser but the reference table hasn&#39;t changed.&#0160; That&#39;s because there was already a reference to Part1.ipt.&#0160; There&#39;s never more than one reference for a particular file.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535df3e73970c-pi"><img alt="FileReferences3" border="0" height="259" src="/assets/image_210029.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="404" /></a> </p>
<p>When this assembly is opened, Inventor reads the referenced file table, finds the actual file on disk, and opens it.&#0160; Inventor can then use the contents of that file for whatever the reference is used for; assembly occurrences, drawing views, derived parts, etc.</p>
<p><strong>File References and Where Used</strong></p>
<p>One important thing to highlight here&#0160; is that the files being referenced, (Part1.ipt and Part2.ipt in this example) don&#39;t know they&#39;re referenced by another file.&#0160; Referencing a file doesn&#39;t change it in any way.&#0160; This is important because a part can be used in any number of assemblies or drawings.&#0160; Also a file might be read-only because of being an approved part and not available for edit or because the file exists on a read-only media.&#0160; </p>
<p>A couple of the recent questions on the newsgroup had to do with determining where a file is used.&#0160; Given Part1.ipt they want to know where it is used.&#0160; It&#39;s a reasonable question, but as you can see from the discussion above, it&#39;s not a question that Part1.ipt can answer because it doesn&#39;t know.&#0160; Design Assistant supports <em>where used</em> functionality but it does this within the limitations we&#39;ve just discussed.&#0160; Design Assistant looks through all of the files in a specified set of directories and reads the referenced file list within each file to see if that file references the file you want the where used information for.&#0160; This has the limitation that it&#39;s only reporting for the files in the searched directories.&#0160; PDM applications will typically save file reference information in a database when files are checked in and use this data to determine where used information.</p>
<p><strong>Projects</strong></p>
<p>Another topic that&#39;s important to understand relative to file references is <em>projects</em>.&#0160; In the previous example, I explained that when the assembly is opened Inventor reads the referenced file list and then finds and opens the referenced files.&#0160; To find the files Inventor uses the project information.&#0160; The easy way to visualize a project is that it defines a list of directories to search.&#0160; When Inventor reads Part1.ipt from the referenced file list it looks through the directories specified by the project to find Part1.ipt.&#0160; Because of the flexibility of defining where files are you can easily move files around and as long as the project points to the new location Inventor will find and open the file.&#0160; The file reference stored is basically just the file name, not the path because the path is dynamically defined by the current project.</p>
<p><strong>Changing References</strong></p>
<p>A common task is to change a file reference.&#0160; Here&#39;s a simple example to illustrate.&#0160; It starts with the assembly from the previous example where it references two parts; Part1.ipt and Part2.ipt.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535d860e1970b-pi"><img alt="FileReferences4" border="0" height="254" src="/assets/image_141269.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="300" /></a> </p>
<p>I want to make a revision to Part1.ipt so I make a copy to Part1_Rev1.ipt and make the required changes.&#0160; The picture below illustrates the current situation.&#0160; The assembly is unchanged but I have a new file, Part1_Rev1.ipt, sitting on my disk.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535d860e6970b-pi"><img alt="FileReferences5" border="0" height="269" src="/assets/image_402693.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="450" /></a>&#0160;</p>
<p>I want my assembly to use the Part1_Rev1.ipt instead of Part1.ipt, as shown below.&#0160; There are a few ways to accomplish this but the result is that the reference in the assembly is changed to another file.&#0160; The occurrences that use that reference automatically reflect the new file.</p>
<p><a href="http://modthemachine.typepad.com/.a/6a00e553fcbfc68834010535d860ec970b-pi"><img alt="FileReferences6" border="0" height="275" src="/assets/image_115118.jpg" style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" width="300" /></a> </p>
<p>There are a few ways to get the result shown above.&#0160; Within Inventor you do it using the <strong>Replace Component</strong> or <strong>Replace All</strong> command, which indirectly will edit the referenced file list.&#0160; You can also accomplish this using Design Assistant.&#0160; Finally Inventor&#39;s API lets you change the file references.&#0160; In fact, from the API you have direct access to the reference file table, which is also what Design Assistant uses internally. </p>
<p><strong>Limitation</strong></p>
<p>There is one limitation to be aware when attempting to change a file reference.&#0160; The general rule is that the new file must be a descendent of the original file.&#0160; In the example above, Part1_Rev1.ipt is a descendent of Part1.ipt because it was created by copying Part.ipt and then subsequently edited.&#0160; Because of this when the reference is changed, assembly constraints are able to compute correctly and the assembly behaves as expected.</p>
