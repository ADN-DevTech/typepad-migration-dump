---
layout: "post"
title: "Setting up Mac OS X developing environment with VSCode and makefile"
date: "2017-09-05 18:23:16"
author: "Cheng Xi Li"
categories:
  - "Cheng Xi Li"
  - "Mac"
  - "Maya"
original_url: "https://around-the-corner.typepad.com/adn/2017/09/setting-up-mac-os-x-developing-environment-with-vscode-and-makefile.html "
typepad_basename: "setting-up-mac-os-x-developing-environment-with-vscode-and-makefile"
typepad_status: "Publish"
---

<p>I have recently refreshed my working laptop to a 2016 MBP. My previous Dell is a great laptop except it is way too big and heavy to carry around with me and I need OS X environment for supporting sometimes, so I decided to make my Mac a daily working machine and my previous laptop became a supplemental machine for windows and linux platform.&#0160;<br /> <br /> The new MBP comes with OS X 10.12 Sierra. When I tried to start Xcode 6.1.1 first time, it gave me this dialog.</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c91d3986970b-pi" style="display: inline;"><img alt="Vscode1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c91d3986970b image-full img-responsive" src="/assets/image_a28637.jpg" title="Vscode1" /></a></div>
<p><br /> <br /> Although I could use Xcode 8.3 with OS X SDK 10.9, but I am not very familiar with Xcode&#39;s building configuration and I can&#39;t find a good way to switch between clang 8.0 and clang 6.0. It&#39;s not critical for just trial and debug for myself most of the time, but it is still not same as recommended environment. I tried xcode-select with specified platform SDK and it works well when building Maya debug builds on my Sierra Mac, so I&#39;ve decided to try another way in the document - the makefile approach. It will create an output bundle directly at the sample&#39;s directory with make and clean the outputs with make clean. Since I&#39;ve been using Visual Studio for almost two decades, I&#39;d like to keep using it on the Mac.&#0160;<br /> <br /> Microsoft has release VSCode on Multiplatform, it is quite different from the regular Visual Studio on Windows. You&#39;ll have to install extensions and write configurations for launching, debugging and building in json format. I did some research and found that I&#39;d be better to stick with the makefile comes with SDK and make some modifications. Here are the steps for setting up a simple Maya development environment on Mac in an alternative way.<br /> <br /> VSCode shipped with json support only and you&#39;ll need to install C++ extension to make intellisense and other stuff working with C++.&#0160;<br /> <br /> The first comes with build. Unlike regular VS on windows using build configure, &#0160;VSCode uses tasks.json for setting up build targets. To make it simple, I use it to set up environment variables for building multiple Maya version and call make to build with makefile. I&#39;ll do it later when the makefile has been done.<br /> <br /> Maya&#39;s makefile comes with two parts, general building configuration inside devkit/plug-ins folder and makefile inside each &#0160;plugin folder. The makefile refers to the buildrules and buildconfig in the parent folder, let&#39;s begin with buildrules first.</p>
<pre id="eHZACAxz90Y">#-<br /># ==========================================================================<br /># Copyright (c) 2011 Autodesk, Inc.<br /># All rights reserved.<br /># <br /># These coded instructions, statements, and computer programs contain<br /># unpublished proprietary information written by Autodesk, Inc., and are<br /># protected by Federal copyright law. They may not be disclosed to third<br /># parties or copied or duplicated in any form, in whole or in part, without<br /># the prior written consent of Autodesk, Inc.<br /># ==========================================================================<br />#+<br /><br />INCL_BUILDRULES := 1<br /><br />#Add directories variables<br />OBJBASEDIR := ./objects<br />OBJDIR := ./objects/$(mayaVersion)<br />OUTPUTBASEDIR := ./output<br />OUTPUTDIR := ./output/$(mayaVersion)<br /><br /><br />include $(TOP)/buildconfig<br /><br />##################<br /># Generic Rules &#0160;#<br />##################<br /><br />.PHONY &#0160; &#0160;: all plugins depend clean Clean<br />.DEFAULT &#0160;: all<br /><br />all : plugins<br /><br /># Pre-built binaries of some plugins are shipped with Maya. We don&#39;t<br /># want to build them by default with all the others because then there<br /># would be two versions of the same plugin and unless you know exactly<br /># what you are doing the wrong one might get loaded.<br />#<br /># The top-level makefile of the devkit won&#39;t recurse by default into<br /># the sub-directory of prebuilt plugins. So if you want to build one<br /># of these you must do so explicitly by invoking make from the given<br /># sub-directory or invoke the prebuiltPlugins rules from the top-level<br /># makefile.<br />.PHONY &#0160;: prebuiltPlugins<br /><br /># The top-level makefile of the devkit won&#39;t recurse by default into<br /># the sub-directory of plugins depending on third-party components. So<br /># if you want to build one of these you must do so explicitly by<br /># invoking make from the given sub-directory or invoke the<br /># thirdPartyPlugins rules from the top-level makefile. For example:<br />.PHONY &#0160; &#0160;: thirdPartyPlugins<br /><br /><br />##################<br /># Generic Rules &#0160;#<br />##################<br /><br />#Creating directories<br />directories: $(OBJDIR) $(OUTPUTDIR)&#0160; &#0160; &#0160; &#0160;&#0160;<br /><br />$(OBJDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OBJDIR)<br /><br />$(OUTPUTDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OUTPUTDIR)<br /><br />#Change object output directory<br />$(OBJDIR)/%.o : %.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />$(OBJDIR)/%.o : %.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@<br /><br />%.o : &#0160; &#0160;%.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />%.o : &#0160; &#0160;%.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@<br /><br />%.i : &#0160; &#0160;%.cpp<br />&#0160;&#0160; &#0160;$(CXX) -E $(INCLUDES) $(C++FLAGS) $*.cpp &gt; $*.i</pre>
<p><br /> The original makefile will generate the output bundle at the same directory where makefile is, it is kind of messy in my opinion and not suitable for building for multiple platforms. Adding directories becomes my first priority.</p>
<pre id="eHZACAwWOeG">#Add directories variables&#0160;<br />OBJBASEDIR := ./objects<br />OBJDIR := ./objects/$(mayaVersion)<br />OUTPUTBASEDIR := ./output<br />OUTPUTDIR := ./output/$(mayaVersion)</pre>
<p>I&#39;ll create two directories for object and output files. For different version of Maya I&#39;ll also create a subfolder inside of the each directory according to target version.<br /> <br /> Then, I&#39;ll add a target for creating directories:</p>
<pre id="eHZACA5aHGt">#Creating directories<br />directories: $(OBJDIR) $(OUTPUTDIR)&#0160; &#0160; &#0160; &#0160;&#0160;<br /><br />$(OBJDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OBJDIR)<br /><br />$(OUTPUTDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OUTPUTDIR)</pre>
<p>The target is called directories and it has to targets, object director and output directory. -p will let mkdir create directories recursively. Next is updating object targets.</p>
<pre id="eHZACA6W1OW">#Change object output directory<br />$(OBJDIR)/%.o : %.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />$(OBJDIR)/%.o : %.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@</pre>
<p>Adding object target&#39;s directory in front of object output will put them in the directory I created earlier.<br /> <br /> Buildrules is done now, the next will be buildconfig. Here is the full buildconfig</p>
<pre id="eHZACAiCVOR">#-<br /># ==========================================================================<br /># Copyright 2012 Autodesk, Inc. All rights reserved.<br />#<br /># Use of this software is subject to the terms of the Autodesk<br /># license agreement provided at the time of installation or download,<br /># or which otherwise accompanies this software in either electronic<br /># or hard copy form.<br /># ==========================================================================<br />#+<br /><br /># If you have Maya installed in a non-standard location, uncomment the<br /># following line and set the path to the &#39;Maya.app/Contents&#39; directory of<br /># your Maya installation:<br /># MAYA_LOCATION = /my/path/to/Maya.app/Contents<br /># export MAYA_LOCATION<br /><br /># Make sure these are in your path.<br />CC &#0160; &#0160; &#0160; &#0160; &#0160;= clang<br />CXX &#0160; &#0160; &#0160; &#0160; = clang++<br />LD &#0160; &#0160; &#0160; &#0160; &#0160;= clang++<br /><br /># By default, we will try to build a universal binary to match the same<br /># architectures as the installed Maya binary. If you only want one specific<br /># architecture (e.g i386 or x86_64) then set it below.<br />PREFERRED_ARCHITECTURE &#0160; &#0160;=<br /><br />ifneq ($(MAKECMDGOALS), clean)<br />&#0160;&#0160; &#0160;#-------------------------------------------------------------<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# &#0160; &#0160; &#0160; Try to find Maya<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;#-------------------------------------------------------------<br />&#0160;&#0160; &#0160;ifeq ($(MAYA_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160;MAYA_LOCATION = /Applications/Autodesk/maya$(mayaVersion)/Maya.app/Contents<br />&#0160;&#0160; &#0160; &#0160; &#0160;# downloaded devkit can be located outside of Maya install tree<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifeq ($(DEVKIT_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(MAYA_LOCATION)/../../devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_LOCATION = $(MAYA_LOCATION)/../../include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(DEVKIT_LOCATION)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(DEVKIT)/include<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;ifeq ($(wildcard $(DEVKIT_INCLUDE)/maya/MTypes.h),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error Cannot find Maya ${mayaVersion}. Please uncomment the \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;MAYA_LOCATION setting near the top of &#39;buildconfig&#39; and set \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;it to point to the Maya.app/Contents directory of your \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Maya ${mayaVersion} installation)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifneq ($(DEVKIT_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(DEVKIT_LOCATION)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(DEVKIT)/include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else ifneq ($(wildcard $(MAYA_LOCATION)/../../include/maya/MTypes.h),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(MAYA_LOCATION)/../../devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(MAYA_LOCATION)/../../include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error The MAYA_LOCATION environment variable does not point to the \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;directory where Maya is installed)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;# Make sure that MAYA_LOCATION is pointing at the correct version of<br />&#0160;&#0160; &#0160; &#0160; &#0160;# Maya.<br />&#0160;&#0160; &#0160; &#0160; &#0160;#<br />&#0160;&#0160; &#0160; &#0160; &#0160;# Matching subversions (e.g. 2013.5) is not possible without a lookup<br />&#0160;&#0160; &#0160; &#0160; &#0160;# table, so if this is a sub-version then just make sure that we&#39;ve<br />&#0160;&#0160; &#0160; &#0160; &#0160;# got the right base version. Not perfect, but better than nothing.<br />&#0160;&#0160; &#0160; &#0160; &#0160;baseMayaVersion := $(shell echo $(mayaVersion) | sed &#39;s/\..*//&#39;)<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;apiVersion := $(shell grep &#39;define.*MAYA_API_VERSION&#39; $(DEVKIT_INCLUDE)/maya/MTypes.h | sed &#39;s/^[^0-9]*\([0-9]...\).*$$/\1/&#39;)<br /><br />&#0160;&#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160;DEVKIT_ALEMBIC_INCDIR = $(DEVKIT)/Alembic/include<br />&#0160;&#0160; &#0160;DEVKIT_ALEMBIC_LIBDIR = $(DEVKIT)/Alembic/lib<br /><br />&#0160;&#0160; &#0160;# Determine the architectures to build.<br />&#0160;&#0160; &#0160;ARCH_FLAGS =<br />&#0160;&#0160; &#0160;MAYABIN = ${MAYA_LOCATION}/bin/maya<br />&#0160;&#0160; &#0160;MAYA_ARCHES = $(shell lipo -info $(MAYABIN) | sed &#39;s/^.*://&#39;)<br /><br />&#0160;&#0160; &#0160;ifneq ($(PREFERRED_ARCHITECTURE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifneq ($(filter $(PREFERRED_ARCHITECTURE),$(MAYA_ARCHES)),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ARCH_FLAGS = -arch $(PREFERRED_ARCHITECTURE)<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error $(MAYABIN) does not support the &#39;$(PREFERRED_ARCHITECTURE)&#39; architecture.)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160;ARCH_FLAGS = $(patsubst %,-arch %,$(MAYA_ARCHES))<br />&#0160;&#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160;# Settings, added several extra flags<br />&#0160;&#0160; &#0160;CFLAGS &#0160; &#0160; &#0160; &#0160;= -DCC_GNU_ -DOSMac_ -DOSMacOSX_ $(EXTRA_ARCH_FLAG)\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-DOSMac_MachO_ -O3 $(ARCH_FLAGS) &#0160;-D_LANGUAGE_C_PLUS_PLUS\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-mmacosx-version-min=10.8<br />&#0160;&#0160; &#0160;C++FLAGS &#0160; &#0160; &#0160;= $(CFLAGS) $(CXX_LIB_FLAG) $(WARNFLAGS) $(ERROR_FLAGS) -fno-gnu-keywords -fpascal-strings<br />&#0160;&#0160; &#0160;INCLUDES &#0160; &#0160; &#0160;= -I$(SRCDIR) -I&quot;$(DEVKIT_INCLUDE)&quot;<br />&#0160;&#0160; &#0160;DYNLIB_LOCATION = $(MAYA_LOCATION)/MacOS<br /><br />&#0160;&#0160; &#0160;LFLAGS &#0160;= $(CXX_LIB_FLAG) -fno-gnu-keywords -fpascal-strings &#0160;\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-isysroot $(XCODE_PLATFORM_SDK_PATH) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(ARCH_FLAGS) -headerpad_max_install_names \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework System -framework SystemConfiguration \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework CoreServices -framework Carbon \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework Cocoa -framework ApplicationServices \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework IOKit \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-bundle<br /><br />&#0160;&#0160; &#0160;# When compiling plug-ins for Maya, we make sure to export only the<br />&#0160;&#0160; &#0160;# symbols for the initializePlugin(MObject) and<br />&#0160;&#0160; &#0160;# uninitializePlugin(MObject) functions. In particular, this<br />&#0160;&#0160; &#0160;# prevents the plug-ins from exporting symbols coming from static<br />&#0160;&#0160; &#0160;# libaries against which the plug-ins is linked.<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Here&#39;s why:<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Plug-ins are written by separate developers. Each of them might<br />&#0160;&#0160; &#0160;# want to use various libraries to implement their plug-ins. At<br />&#0160;&#0160; &#0160;# times, it occurs that plug-ins written by different developers are<br />&#0160;&#0160; &#0160;# using different and &quot;incompatible&quot; versions of the same library. To<br />&#0160;&#0160; &#0160;# support this, we recommend that plug-ins be linked against static<br />&#0160;&#0160; &#0160;# versions of these libraries. And, by hidding the symbols of these<br />&#0160;&#0160; &#0160;# libraries, we prevent the two incompatible versions of the library<br />&#0160;&#0160; &#0160;# from interferring with each others.<br />&#0160;&#0160; &#0160;LFLAGS += -Wl,-exported_symbol,$(INITIALIZE_SYMBOL) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-Wl,-exported_symbol,$(UNINITIALIZE_SYMBOL) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-Wl,-exported_symbol,_MApiVersion<br /><br /><br />&#0160;&#0160; &#0160;LREMAP &#0160;= -Wl,-executable_path,&quot;$(DYNLIB_LOCATION)&quot;<br />&#0160;&#0160; &#0160;LFLAGS += -L&quot;$(DYNLIB_LOCATION)&quot; $(LREMAP)<br />&#0160;&#0160; &#0160;LIBS &#0160; &#0160;= &#0160;<br /><br />&#0160;&#0160; &#0160;EXT &#0160; &#0160; = bundle<br /><br />&#0160;&#0160; &#0160;#Detect current clang xdk and choose correct sdk<br />&#0160;&#0160; &#0160;CLANG_VERSION := $(shell gcc --version | grep -o &quot;version [0-9\.]*&quot;)<br />&#0160;&#0160; &#0160;ifneq (&quot;$(CLANG_VERSION)&quot;,&quot;$(TARGET_CLANG_VERSION)&quot;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;$(shell sudo xcode-select -s $(XCODE_PATH))<br />&#0160;&#0160; &#0160;endif<br />&#0160;&#0160; &#0160; &#0160;<br /><br /><br />&#0160;&#0160; &#0160;# Makedepend flags<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Ignore dependencies on system header files.<br />&#0160;&#0160; &#0160;MDFLAGS = -Y<br /><br />&#0160;&#0160; &#0160;# Find out if the Qt development tools are installed.<br />&#0160;&#0160; &#0160;# we want to use the &#0160;qmake file provided by Maya, not the system<br />&#0160;&#0160; &#0160;ifneq ($(wildcard $(DEVKIT_LOCATION)/devkit/bin/qmake),)<br />&#0160; &#0160; #Maya 2017+<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;QMAKE = $(DEVKIT_LOCATION)/devkit/bin/qmake<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ifneq ($(QMAKE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; # We want to generate a Makefile, not an xcode project. &#0160;&#0160;<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; QMAKE += -spec $(DEVKIT)/mkspecs/macx-clang<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; endif<br />&#0160;&#0160; &#0160;else<br />&#0160; &#0160; #Maya 2016, 2016.5<br />&#0160; &#0160; #qmake wasn&#39;t in 2016/2016.5 devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;QMAKE = $(shell which qmake 2&gt; /dev/null)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ifneq ($(QMAKE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;# We want to generate a Makefile, not an xcode project.<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;# QMAKE for 2016/2016.5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; QMAKE += -spec macx-g++<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;endif<br />endif</pre>
<p>To make it support Maya 2016~2018, I&#39;ll need to add several flags for specifying C++ library, Xcode, qmake and exported symbols for initialize/uninitialize plugin. I also removed mayaVersion to make it configurable in the tasks.json. Most of the changes are just replacing values with variables which should be same for the linux platform except the xcode-select part.</p>
<pre id="eHZACA31WIL">&#0160;&#0160; &#0160;#Detect current clang xdk and choose correct sdk<br />&#0160;&#0160; &#0160;CLANG_VERSION := $(shell gcc --version | grep -o &quot;version [0-9\.]*&quot;)<br />&#0160;&#0160; &#0160;ifneq (&quot;$(CLANG_VERSION)&quot;,&quot;$(TARGET_CLANG_VERSION)&quot;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;$(shell sudo xcode-select -s $(XCODE_PATH))<br />&#0160;&#0160; &#0160;endif</pre>
<p><br /> You could choose default clang you want to use with it. It requires root privilege so you might need to input password during building.<br /> <br /> The last part is makefile itself. Unlike buildconfig and buildrules, it needs to be tweaked from projects to projects, so it is stored inside of project&#39;s directory.</p>
<pre id="eHZACA5feCo">#-<br /># ==========================================================================<br /># Copyright (c) 2011 Autodesk, Inc.<br /># All rights reserved.<br /># <br /># These coded instructions, statements, and computer programs contain<br /># unpublished proprietary information written by Autodesk, Inc., and are<br /># protected by Federal copyright law. They may not be disclosed to third<br /># parties or copied or duplicated in any form, in whole or in part, without<br /># the prior written consent of Autodesk, Inc.<br /># ==========================================================================<br />#+<br /><br />ifndef INCL_BUILDRULES<br /><br />#<br /># Include platform specific build settings<br />#<br />TOP := ..<br />include $(TOP)/buildrules<br /><br /><br />#<br /># Always build the local plug-in when make is invoked from the<br /># directory.<br />#<br />all : plugins<br /><br />endif<br /><br />#<br /># Variable definitions<br />#<br /><br />SRCDIR := .<br />DSTDIR := $(OUTPUTDIR)<br /><br /># Adding all cpp files as source file<br />SOURCES &#0160;:= $(wildcard *.cpp) $(wildcard **/*.cpp)<br />OBJECTS &#0160;:= $(addprefix $(OBJDIR)/,$(patsubst %.cpp, %.o, $(SOURCES)))<br /><br />PLUGIN &#0160; := $(DSTDIR)/$(PROJECT_NAME).$(EXT)<br />MAKEFILE := $(SRCDIR)/Makefile<br /><br />#<br /># Include the optional per-plugin Makefile.inc<br />#<br /># &#0160; &#0160;The file can contain macro definitions such as:<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_CFLAGS<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_C++FLAGS<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_INCLUDES<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_LIBS<br />-include $(SRCDIR)/Makefile.inc<br /><br /><br />#<br /># Set target specific flags.<br />#<br /><br />$(OBJECTS): CFLAGS &#0160; := $(CFLAGS) &#0160; $(EXTRA_CFLAGS)<br />$(OBJECTS): C++FLAGS := $(C++FLAGS) $(EXTRA_C++FLAGS)<br />$(OBJECTS): INCLUDES := $(INCLUDES) $(EXTRA_INCLUDES)<br /><br />depend_mayaProject: &#0160; &#0160; INCLUDES := $(INCLUDES) $(EXTRA_INCLUDES)<br /><br />$(PLUGIN): &#0160;LFLAGS &#0160; := $(LFLAGS) $(EXTRA_LFLAGS) <br />$(PLUGIN): &#0160;LIBS &#0160; &#0160; := $(LIBS) &#0160; -lOpenMaya -lOpenMayaUI -lOpenMayaRender -lFoundation -framework AGL -framework OpenGL $(EXTRA_LIBS) <br /><br />#<br /># Rules definitions<br />#<br /><br />.PHONY: depend_mayaProject clean_mayaProject Clean_mayaProject<br /><br /><br />$(PLUGIN): $(OBJECTS) <br />&#0160;&#0160; &#0160;-rm -f $@<br />&#0160;&#0160; &#0160;$(LD) -o $@ $(LFLAGS) $^ $(LIBS) <br /><br />depend_mayaProject :<br />&#0160;&#0160; &#0160;makedepend $(INCLUDES) $(MDFLAGS) -f$(DSTDIR)/Makefile $(SOURCES)<br /><br />clean_mayaProject:<br />&#0160;&#0160; &#0160;-rm -rf $(OBJBASEDIR)<br />&#0160;&#0160; &#0160;-rm -rf $(OUTPUTBASEDIR)<br /><br />Clean_mayaProject:<br />&#0160;&#0160; &#0160;-rm -f $(MAKEFILE).bak $(OBJECTS) $(PLUGIN)<br /><br /><br />plugins: directories $(PLUGIN)<br />depend: &#0160; &#0160; depend_mayaProject<br />clean: &#0160; &#0160; clean_mayaProject<br />Clean: &#0160; &#0160; Clean_mayaProject<br /><br /></pre>
<p>I took a little bit cheat here, I made it compile all cpp files inside my working directory.</p>
<pre id="eHZACARQ8Jk">SOURCES &#0160;:= $(wildcard *.cpp) $(wildcard **/*.cpp)<br />OBJECTS &#0160;:= $(addprefix $(OBJDIR)/,$(patsubst %.cpp, %.o, $(SOURCES)))<br /><br />PLUGIN &#0160; := $(DSTDIR)/$(PROJECT_NAME).$(EXT)<br />MAKEFILE := $(SRCDIR)/Makefile</pre>
<p>I&#39;ve heard of that globstar(**) is only good for OS X Sierra by default. For Linux, you&#39;ll need to enable globstar option with following command.</p>
<pre id="eHZACAs87bR">shopt -s globstar</pre>
<p>It is only available after bash 4, so if you are running with earlier version of bash, you might want to update it. Otherwise, you&#39;ll need to use for loop for subdirectories instead.<br /> <br /> $(PROJECT_NAME) is an environment variable comes from VSCode, I made it same as workspace&#39;s name, which usually is the folder&#39;s name. From debugging perspective, it is good enough for me.<br /> <br /> After makefile is done, you could test them manually in terminal with environment variables set. You could also use other ide tools. Here is the VSCode way. I&#39;ll show two tasks here, clean and build for Maya 2016.&#0160;</p>
<pre id="eHZACAcSCIg">{<br />&#0160;&#0160; &#0160;// See https://go.microsoft.com/fwlink/?LinkId=733558<br />&#0160;&#0160; &#0160;// for the documentation about the tasks.json format<br />&#0160;&#0160; &#0160;&quot;version&quot;: &quot;2.0.0&quot;,<br />&#0160;&#0160; &#0160;&quot;command&quot;: &quot;make&quot;,<br />&#0160;&#0160; &#0160;&quot;type&quot;: &quot;shell&quot;,<br />&#0160;&#0160; &#0160;&quot;echoCommand&quot;: true,<br />&#0160;&#0160; &#0160;&quot;suppressTaskName&quot;: true,<br />&#0160;&#0160; &#0160;&quot;tasks&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;clean&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;args&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;clean&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: { &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: &quot;$msCompile&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;Build for maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;options&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;env&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;mayaVersion&quot;: &quot;2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MAYA_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016/Maya.app/Contents&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;DEVKIT_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PLATFORM_SDK_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;TARGET_CLANG_VERSION&quot;: &quot;version 6.0&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;PROJECT_NAME&quot;: &quot;${workspaceRootFolderName}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;INITIALIZE_SYMBOL&quot;: &quot;__Z16initializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;UNINITIALIZE_SYMBOL&quot; : &quot;__Z18uninitializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;CXX_LIB_FLAG&quot; : &quot;-stdlib=libstdc++&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;EXTRA_ARCH_FLAG&quot;: &quot;-DREQUIRE_IOSTREAM&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;owner&quot;: &quot;cpp&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;fileLocation&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;relative&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;${workspaceRoot}&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;pattern&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;regexp&quot;: &quot;^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;file&quot;: 1,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;line&quot;: 2,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;column&quot;: 3,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;severity&quot;: 4,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;message&quot;: 5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160;}]<br />}</pre>
<p>I&#39;ve decided to reuse makefiles from devkit, so the command here is&#0160;“make” and it is running from&#0160;“shell”(type). Then there is an array of tasks.</p>
<pre id="eHZACAcnioY">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;clean&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;args&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;clean&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: { &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: &quot;$msCompile&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;}</pre>
<p>Clean is simple, the task&#39;s name is clean and it has an argument for make which is also clean. The group variable tells VSCode it is a build task so you could find it when hitting CMD+Shift+B. The problemMatcher is special for VSCode. Because it doesn&#39;t support C++ first, the builder can&#39;t grab any C++ warning and error messages. It requires user to write a matcher for it. For clean, we don&#39;t really need a matcher so I&#39;ll just use default msCompile one. In next part, I&#39;ve found myself a C++ matcher on Stack overflow:)</p>
<pre id="eHZACA1oy92">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;Build for Maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;options&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;env&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;mayaVersion&quot;: &quot;2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MAYA_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016/Maya.app/Contents&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;DEVKIT_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PLATFORM_SDK_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;TARGET_CLANG_VERSION&quot;: &quot;version 6.0&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;PROJECT_NAME&quot;: &quot;${workspaceRootFolderName}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;INITIALIZE_SYMBOL&quot;: &quot;__Z16initializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;UNINITIALIZE_SYMBOL&quot; : &quot;__Z18uninitializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;CXX_LIB_FLAG&quot; : &quot;-stdlib=libstdc++&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;EXTRA_ARCH_FLAG&quot;: &quot;-DREQUIRE_IOSTREAM&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;owner&quot;: &quot;cpp&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;fileLocation&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;relative&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;${workspaceRoot}&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;pattern&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;regexp&quot;: &quot;^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;file&quot;: 1,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;line&quot;: 2,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;column&quot;: 3,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;severity&quot;: 4,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;message&quot;: 5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160;}</pre>
<p>We have more environment settings for actual building task, there are small differences between most of Maya versions, you&#39;ll need to check with the makefile and buildconfig comes with each devkit. The problem matcher here is a regular expression. It grabs warning and error and show them in certain order.&#0160;<br /> <br /> Now it will build like below:</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c07068970d-pi" style="display: inline;"><img alt="Vscode2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb09c07068970d image-full img-responsive" src="/assets/image_5ee01b.jpg" title="Vscode2" /></a></div>
<p>I&#39;ve also added tasks for 2016.5 to 2018 so I could make it work with all these versions when I have to check if a plugin is working on different versions like regular Visual Studio build configurations. <br /> <br /> Next step is intellisense and debug. Intellisense is an easy one, you&#39;ll just need to open .c_cpp_propertities.json inside .vscode folder and add Maya include path in it. Unlike Visual Studio, you could have extra include directories with each config to make intellisense working properly all the time, VSCode can&#39;t switch extra include directories on the fly. I make it base on Maya 2018 and take some cautions with previous versions. If you had a better solution for this, please let me know.<br /> <br /> The last part is launch.json, it is quite simple. With cpp extension, it will generate a template item for you and you&#39;ll need to update path to it.</p>
<pre id="eHZACAwuYT3">{ &#0160; &quot;version&quot;: &quot;0.2.0&quot;,<br />&#0160;&#0160; &#0160;&quot;configurations&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160;{ <br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;name&quot;: &quot;Attach to Maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;type&quot;: &quot;cppdbg&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;request&quot;: &quot;attach&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;program&quot;: &quot;/Applications/Autodesk/Maya2016/Maya.app/Contents/bin/maya&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;processId&quot;: &quot;${command:pickProcess}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MIMode&quot;: &quot;lldb&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160;]<br />}</pre>
<p>Like tasks, you could have multiple debug configures. Choose a correct one before launching the debugger.</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c0707a970d-pi" style="display: inline;"><img alt="Vscode3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb09c0707a970d img-responsive" src="/assets/image_d8ff0f.jpg" title="Vscode3" /></a></div>
<p>You could specify launch tasks for different workspaces or adding a default launch configuration to make it available for all workspaces in settings. Workspace&#39;s launch configure will always override the default config if it exists.<br /> <br /> The setup is done now, When you are creating a new project, just create a subfolder in the one with buildconfig and buildrules then copy makefile and .vscode folder in previous workspace. I&#39;ve also created a small sample on my <a href="https://github.com/iamsleepy/Maya-VSCode-Bootstrap-Mac">GitHub</a>, you could also use it as a bootstrap.</p>
