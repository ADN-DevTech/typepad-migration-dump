---
layout: "post"
title: "MFnBase class copy constructor is now private"
date: "2012-08-23 23:00:00"
author: "Cyrille Fauvel"
categories:
  - "C++"
  - "Cyrille Fauvel"
  - "Maya"
original_url: "https://around-the-corner.typepad.com/adn/2012/08/mfnbase-class-copy-constructor-is-now-private.html "
typepad_basename: "mfnbase-class-copy-constructor-is-now-private"
typepad_status: "Publish"
---

<p>In Maya 2013 devkit, some changes in C++ headers were required to avoid problems in Maya internals when C++ plug-ins were using the API. This changes will require to do some code change and recompile the affected plug-ins. One of this change is the copy constructor becoming private for the MFnBase class and all its descendant classes such as MFnDepencyNode, MFnDagNode, etc... where it used to be public by default in the past. I said &#39;by default&#39; because the class definition never explicitly define the copy constructor, but instead the C++ compiler automatically generated a &#39;memory&#39; copy constructor.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e0bbc970b-pi" style="display: inline;"><img alt="MFnBase" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c316e0bbc970b" src="/assets/image_d9a151.jpg" style="display: block; margin-left: auto; margin-right: auto;" title="MFnBase" /></a></p>
<p>Unfortunately, this is an intentional change. The copy constructor on functionsets was never meant to be public but was automatically being generated by the compiler. Use of the copy constructor on functionsets results in internal corruption within Maya (which is also why the assignment operator has always been private).
</p>
<p>The only good and safe approach is to initialize another instance of the functionset on the same object. I.e.:</p>
<pre class="brush: cpp; toolbar: false;">MFnDependencyNode anotherFnDepNode (fnDepNode.object ()) ;
</pre>
<p>If you want a functionset to be passed as a method&#39; argument, use a reference. I.e.:</p>
<pre class="brush: cpp; toolbar: false;">void myFunction (MFnDependencyNode &amp;fnDepNode) {
   ...
}
</pre>
<p>&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e1a47970b-pi" style="display: inline;"><img alt="Dontdoit" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c316e1a47970b" src="/assets/image_cfb494.jpg" title="Dontdoit" /></a></p>
<p>Don&#39;t do this, but if you are desperate for a quick solution while your code was running ok for many years, you can use that trick to recompile your plug-in. But still I would strongly recommend you to make the require code change if you do not want to be in trouble later.</p>
<p>Here is what you could do - simply edit the MFnBase.h class and put the copy constructor back to public. Then the compiler will stop complaining and you will be able to recompile without code change, but corrupt Maya internals like in the past.</p>
