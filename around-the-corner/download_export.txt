AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2026 API Update guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: markdown
ALLOW PINGS: 0
BASENAME: maya-2026-api-update-guide
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2025/03/maya-2026-api-update-guide.html 
DATE: 03/25/2025 10:21:46 PM
-----
BODY:
<p>The guide is based on What’s New in the Maya Devkit in Maya 2026 with some extra info. The details could be found <a href="https://help.autodesk.com/view/MAYADEV/2026/ENU/">here</a>.</p>

<h2>Building environment</h2>

<p>On the macOS, Xcode has been updated to 14.3 or higher. Other platforms remain the same as Maya 2025.</p>

<ul>
<li>Windows - Visual Studio 2022 (17.8.3 or higher)      </li>
<li><strong>macOS</strong> - <strong>Xcode version 14.3 or higher</strong>       </li>
<li>Linux - RHEL 8.6 or higher, DTS-11 with gcc 11.2.1 </li>
</ul>

<h2>The minimum version of CMake required is 3.27.3.</h2>

<h2>SDK/Devkit Changes</h2>

<p>SDK Changes for Maya 2026</p>

<p>Here are some API changes in the SDK for Maya 2026:</p>

<ul>
<li>Added TBB to the Devkit</li>
<li>Python has been updated from 3.11.4 to 3.11.9</li>
<li>Alembic has been updated</li>
<li>Updated the usage of <strong>canMakeLive</strong> method in <strong>gpuCacheShapeNode.cpp</strong></li>
<li>Updated the dx11Shader to make it reload the shader after loading the file the for security reasons.</li>
<li>The stock standard material has been replaced with stock OpenPBR in several samples.</li>
<li>Added a method to get matrix for matching local matrix in <strong>MDagPath</strong>.</li>
<li>Added a method for locking/unlocking the plug in <strong>MDGModifier</strong>.</li>
<li>Added two methods to get color and values at positions in <strong>MRampAttribute</strong>.</li>
<li>Added a method for extracting geometry in <strong>MGeometryExtractor</strong>.</li>
<li>Using MObject instead of MDagPath in the <strong>MGeometryExtractorConstructHelper</strong></li>
<li>Added enums for supporting boolean operations and a method for boolean operations in <strong>MFnMesh</strong>.</li>
<li>Added the three methods for selected objects in <strong>M3dView</strong>. Fixed a typo of parameter in the <strong>getM3dViewFromModelPanel</strong> method.</li>
<li>Added an enum and a method for setting axis of faces in <strong>MFnVolumeLight</strong>.</li>
<li>Added an enumeration and methods for setting and getting culling modes <em>MHWGeometry</em>*.</li>
<li>Added two stock shaders for <strong>MShaderManager</strong>.</li>
<li>Added a pointer to a callback function which takes a string and a boolean in <strong>MMessage</strong>.</li>
<li>Added a callback to be notified when the view selected state or view selected objects for any 3D view changes in <strong>MUiMessage</strong> (not available in .NET). </li>
<li>Added flip the image from left to right or upside down <strong>MPxImagePlane</strong>.</li>
<li>Added a function that returns if the shading node can handle consolidated geometry and methods to get fragment name or update shader based if a fragment or shader is textured in <strong>MPxShadingNodeOverride</strong>.</li>
</ul>

<p>For the full details about devkit changes, please refer to the <a href="https://help.autodesk.com/view/MAYADEV/2026/ENU/?guid=2026-Whats-New-in-API">What's new in the Maya 2026 devkit</a>.</p>

-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2025 API Update guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: markdown
ALLOW PINGS: 0
BASENAME: maya-2025-api-update-guide
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2024/03/maya-2025-api-update-guide.html 
DATE: 03/26/2024 06:21:06 PM
-----
BODY:
<p>The guide is based on What’s New in the Maya Devkit in Maya 2025 with some extra info. The details could be found <a href="https://help.autodesk.com/view/MAYADEV/2025/ENU/?guid=2025-Whats-New-in-API">here in the document</a>.</p>

<h2>Building environment</h2>

<p>In Maya 2025, the building environment changes on Mac.</p>

<p>Operating System   Requirements </p>

<p>Windows            Visual Studio 2022 (17.8.3 or higher) |
macOS              Xcode version 14.3 or higher |
Linux              RHEL or Rocky Linux 8.6 or higher, DTS-11 with gcc 11.2.1 |</p>

<p>The minimum version of CMake required is 3.27.3.</p>

<h2>Migration to Qt6 and PySide6</h2>

<p>Maya has moved from Qt5 and PySide2 to Qt6 and PySide6.</p>

<p>There are official migration guides for <a href="https://doc.qt.io/qt-6/portingguide.html">C++</a> and <a href="https://doc.qt.io/qtforpython-6/gettingstarted/porting_from2.html">Python</a>.</p>

<p>For more details, please check out our <a href="https://help.autodesk.com/view/MAYADEV/2025/ENU/?guid=Qt6Migration">Maya Qt6 Migration</a> page.</p>

<p>If you want to use PyQt6, please install <em>PyQt6==6.5.3</em> with pip.</p>

<h2>Maya is moving to .NET 8</h2>

<p>Maya 2025 is moving to .NET 8, and .NET 8 is now the default version of .NET used by Maya.</p>

<p>For more details, please check out our <a href="https://help.autodesk.com/view/MAYADEV/2025/ENU/?guid=DotNet8">Maya is moving to .NET 8</a> section.</p>

<h2>SDK Changes for Maya 2025</h2>

<p>Here are some API changes in the SDK for Maya 2025:</p>

<ul>
<li>Three new methods have been added to <strong>MFnAttribute</strong>.</li>
<li>Two new methods have been added to <strong>MFnGeometryFilter</strong>.</li>
<li>Two new color management methods have been added.</li>
<li><strong>addPostDuplicateNodeListCallback()</strong> added to <strong>MModelMessage</strong>.</li>
<li><strong>extendSelectionFromComponents()</strong> has been added to <strong>MPxSurfaceShape</strong>.</li>
<li><strong>MQtUtil::resourceGLContext()</strong> now returns <strong>QOpenGLContext</strong>.</li>
<li><strong>MFnWeightGeometryFilter</strong> has been added to Python API 2.0.</li>
<li>Some samples in the devkit have been updated.</li>
</ul>

<p>For the full details about devkit changes, please refer to the <a href="https://help.autodesk.com/view/MAYADEV/2025/ENU/?guid=NewInAPI">SDK changes for Maya 2025</a>.</p>

<h2>Bonustools</h2>

<p>Bonustools is shipping with Maya 2025 now. You don't need to get it separately.</p>

-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Using Maya template for creating deformer UI
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: using-maya-template-for-creating-deformer-ui
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2023/06/using-maya-template-for-creating-deformer-ui.html 
DATE: 06/29/2023 01:33:22 AM
-----
BODY:
<p>Recently, a customer asked a question about creating UI for deformers. The deformer nodes in Maya are created with a table for deformer attributes e.g.,</p>
<p><a class="asset-img-link" href="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02c1b25803c4200d-pi" style="display: inline;"><img alt="MayaMorph" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d02c1b25803c4200d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02c1b25803c4200d-800wi" title="MayaMorph" /></a></p>
<p>But for deformer plugins, if you don’t have an AETemplate assigned for it, it looks like this, which is not as easy to understand and has extra, but unnecessary details…</p>
<p><a class="asset-img-link" href="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02b751a99071200c-pi" style="display: inline;"><img alt="NaiveBasicMorph" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d02b751a99071200c image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02b751a99071200c-800wi" title="NaiveBasicMorph" /></a></p>
<p>The first thought is about reusing the AETemplates in scripts. Unfortunately, it wasn’t created with MEL and you can’t find it inside of scripts/AETemplates. AETemplate of some nodes in Maya were created with Python and Qt and stored inside Python/Lib/site-packages/maya/internal/nodes/morph.</p>
<pre><code data-origin="&lt;pre&gt;&lt;code&gt;import maya
maya.utils.loadStringResourcesForModule(__name__)

import maya.internal.common.ae.template as aetemplate
import maya.internal.nodes.weightgeometryfilter.ae_template as ae
import maya.cmds as cmds

class AETemplate(ae.AETemplate):
    def buildUI(self, nodeName):
    ...
&lt;/code&gt;&lt;/pre&gt;">import maya
maya.utils.loadStringResourcesForModule(__name__)

import maya.internal.common.ae.template as aetemplate
import maya.internal.nodes.weightgeometryfilter.ae_template as ae
import maya.cmds as cmds

class AETemplate(ae.AETemplate):
    def buildUI(self, nodeName):
    ...
</code></pre>
<p>As you can see, it inherits from another AETemplate from weightgeometryfilter and the latter geometryfilter. All we want to do is to create our AETemplate based on geometryfilter template, like below:</p>
<pre><code data-origin="&lt;pre&gt;&lt;code&gt;import maya.internal.common.ae.template as aetemplate
import maya.internal.nodes.geometryfilter.ae_template as ae

class AETemplate(ae.AETemplate):
    def buildUI(self, nodeName):
        self.suppress(&#39;weightList&#39;)
        super(AETemplate, self).buildUI(nodeName)
&lt;/code&gt;&lt;/pre&gt;">import maya.internal.common.ae.template as aetemplate
import maya.internal.nodes.geometryfilter.ae_template as ae

class AETemplate(ae.AETemplate):
    def buildUI(self, nodeName):
        self.suppress(&#39;weightList&#39;)
        super(AETemplate, self).buildUI(nodeName)
</code></pre>
<p>Save it to a place where Maya Python can load it as a package(e.g., site-packages), and create a __init__.py for it like below. My package name is myaetemplates and the module name is AEbasicMorphTemplate.</p>
<pre><code data-origin="&lt;pre&gt;&lt;code&gt;from . import AEbasicMorphTemplate
&lt;/code&gt;&lt;/pre&gt;">from . import AEbasicMorphTemplate
</code></pre>
<p>At last, we want to register for basicMorph node in Maya. To make things easier, we can use Flux, the UI library for Mash to register it.</p>
<pre><code data-origin="&lt;pre&gt;&lt;code&gt;import maya.app.flux.ae.api as loader

loader.registerTemplate(&#39;myaetemplates.AEbasicMorphTemplate.AETemplate&#39;, &#39;basicMorph&#39;)
&lt;/code&gt;&lt;/pre&gt;">import maya.app.flux.ae.api as loader

loader.registerTemplate(&#39;myaetemplates.AEbasicMorphTemplate.AETemplate&#39;, &#39;basicMorph&#39;)
</code></pre>
<p>Now, we have a much better interface to start with.<br /><a class="asset-img-link" href="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02c1a6cc2227200b-pi" style="display: inline;"><img alt="AEBasicMorph" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d02c1a6cc2227200b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d02c1a6cc2227200b-800wi" title="AEBasicMorph" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Maya 2024
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-maya-2024
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2023/03/how-to-build-pyqt5-for-maya-2024.html 
DATE: 03/28/2023 06:48:03 PM
-----
BODY:
<div style="font-family: &#39;Roboto Condensed&#39;, Tauri, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, STHeiti, SimSun, &#39;Lucida Grande&#39;, &#39;Lucida Sans Unicode&#39;, &#39;Lucida Sans&#39;, &#39;Segoe UI&#39;, AppleSDGothicNeo-Medium, &#39;Malgun Gothic&#39;, Verdana, Tahoma, sans-serif; font-size: 15px; overflow-x: hidden; overflow-y: auto; margin: 0px !important; padding: 20px; background-color: #ffffff; color: #222222; line-height: 1.6; -webkit-font-smoothing: antialiased; background: #ffffff;">
<p style="margin: 1em 0px; word-wrap: break-word;">Maya 2024 is shipped with Python 3.10 <strong>only</strong> on all platforms. Although pip is shipped with Maya 2024, <strong>we still can&#39;t use it to install PyQt5 on Mac or Linux</strong>. On windows, pip installed packages could work. However, it has its own Qt5 libraries installed and it may lead to problems. You may want to replace them with the ones shipped with Maya. I didn&#39;t encounter any problems during my testing with the original pip packages. If you find any problems with it, you can build your own with this guide.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">When I am writing this guide, I am building with <strong>PyQt5-5.15.9</strong>, <strong>sip-6.7.7</strong>, <strong>PyQt5_sip-12.11.1</strong> and <strong>PyQt-builder-1.14.1</strong>.</p>
<h2 id="windows:" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#windows:" name="windows:" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Windows:</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">We are going to build it with VS2022 which is same as Maya 2024&#39;s developing environment on Windows. If you&#39;ve installed a path needs Administrator Privileges, please run <strong>x64 Native Tools Command Prompt for VS 2022</strong> as Administrator. I&#39;ve installed my Maya 2024 to default location and I&#39;ve extracted devkit to g:\case\devkitBase\2024. Please update it with the paths on your computer. Here are the steps:</p>
<p style="margin: 1em 0px; word-wrap: break-word;">1. Subst your maya install folder to a dedicate drive if there is a space inside your maya installation path. I am going to subst it to drive v e.g.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;subst v: &quot;C:\Program files\Autodesk\maya2024&quot;
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">subst v: &quot;C:\Program files\Autodesk\maya2024&quot;
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">2. Add your <strong>Maya2024\Python\scripts and Maya2024\bin</strong> to your system path. If your&#39;ve created a subst drive, please use the path with drive. e.g.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;set path=%path%;v:\bin;v:\Python\Scripts
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">set path=%path%;v:\bin;v:\Python\Scripts
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">3. Copy <strong>include\Python310\Python</strong> inside Maya2024 installation to <strong>Python\include</strong>. You&#39;ll need to create the destination folder.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">4. Copy <strong>lib\python310.lib</strong> inside Maya2024 installation to <strong>Python\libs</strong>. You&#39;ll need to create the destination folder. Once you&#39;ve copied the libarary, please duplicate one and name it as <strong>python3.lib</strong>.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">5. Go to sip source folder. Use mayapy install sip. e.g.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;
v:\bin\mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">v:\bin\mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">6. install PyQt-builder and PyQt5-sip with pip</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;
mayapy -m pip install PyQt-builder

mayapy -m pip install PyQt5-sip
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">mayapy -m pip install PyQt-builder
mayapy -m pip install PyQt5-sip
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">7. Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">8. Update <strong>mkspecs/common/msvc-desktop.conf</strong> in the mkspecs, enable shell and add COM libraries to build config.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;QMAKE_LIBS              = ole32.lib OleAut32.lib

QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">QMAKE_LIBS              = ole32.lib OleAut32.lib
QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">9. Go to PyQt5 source folder. Use following command to install PyQt5. Please update the devkit path with the one on your computer.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;
sip-install --jobs 32 --no-designer-plugin --spec g:\case\devkitBase\2024\mkspecs\win32-msvc --qmake g:\case\devkitBase\2024\devkit\bin\qmake.exe --verbose
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sip-install --jobs 32 --no-designer-plugin --spec g:\case\devkitBase\2024\mkspecs\win32-msvc --qmake g:\case\devkitBase\2024\devkit\bin\qmake.exe --verbose
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">The jobs count shouldn&#39;t be more than the count of your logical processors. I am using a 5950x which has 32 logical processors so the jobs is 32 here. If you don&#39;t want debug output, please remove the <strong>—verbose</strong> flag in the end.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">Vola, it works.</p>
<h2 id="mac:" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#mac:" name="mac:" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Mac:</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">If you are going to install it on MacOS Ventura or above, please install the latest Xcode 14. I&#39;ve installed Maya 2024 to default path and extract devkit and PyQt5 source codes into <strong>~/Documents/pyqt5.2024/</strong>. Please update the path in the scripts if you are using a different location. I am building it on Xcode 14 with Ventura. If you had encountered issue on a different building environment, please let us know.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">1. Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">2. As the day I&#39;ve written this blog, the sip-install can&#39;t add python libraries correctly on my testing environment with XCode 14.1 on Ventura. So, I&#39;ve added them manually. Open <strong>mkspecs\common\clang-mac.conf</strong>. add</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;-lpython3.10 -L/Applications/Autodesk/maya2024/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">-lpython3.10 -L/Applications/Autodesk/maya2024/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">to the and of QMAKE_LFLAGS. I tried to use <strong>-F</strong> flag to add framework path and it was failed. I&#39;ve created a temporary Python framework at <strong>/Library/Frameworks/Python.framework</strong> with <strong>ln</strong></p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo ln -s /Applications/Autodesk/maya2024/Maya.app/Contents/Frameworks/Python.framework/Python Python
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo ln -s /Applications/Autodesk/maya2024/Maya.app/Contents/Frameworks/Python.framework/Python Python
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">3. Install required Python packages.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo ./mayapy -m pip install ply
sudo ./mayapy -m pip install toml 
sudo ./mayapy -m pip install packaging
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo ./mayapy -m pip install ply
sudo ./mayapy -m pip install toml 
sudo ./mayapy -m pip install packaging
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">4. Go to sip source code folder. Build and install sip. e.g.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">5. Go to PyQt5_sip folder, install PyQt5_sip</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">6. Go to PyQt builder folder, install PyQt builder.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">7. Go to PyQt5 source folder and install PyQt5 with following command.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/PyQt5.2024/devkit/mkspecs/macx-clang --qmake ~/PyQt5.2024/devkit/devkit/bin/qmake --verbose
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /Applications/Autodesk/Maya2024/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/PyQt5.2024/devkit/mkspecs/macx-clang --qmake ~/PyQt5.2024/devkit/devkit/bin/qmake --verbose
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">That&#39;s it.</p>
<h2 id="linux" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#linux" name="linux" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Linux</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">If you are going to install it on MacOS Ventura or above, please install the latest Xcode 14. I&#39;ve installed Maya 2024 to default path and extract devkit and PyQt5 source codes into <strong>~/maya/2024/</strong> separately. Please update the path in the scripts if you are using a different location. I am building it on Almalinux 8.7. If you had encountered issue on a different building environment, please let us know.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">1. Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">2. Enable gcc-toolset-11</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;scl enable gcc-toolset-11 bash
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">scl enable gcc-toolset-11 bash
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">3. Duplicate Python 3.10 include. The compiler will find the python libraries in maya2024/include/python3.10. Maya2024 ship it path maya2024/include/Python310/Python. We&#39;ll need to duplicate it to make it work.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;cd /usr/autodesk/maya2024/include
sudo mkdir python3.10
sudo cp ../Python310/Python/* . -r
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">cd /usr/autodesk/maya2024/include
sudo mkdir python3.10
sudo cp ../Python310/Python/* . -r
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">4. Install required Python packages.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo ./mayapy -m pip install ply
sudo ./mayapy -m pip install toml 
sudo ./mayapy -m pip install packaging
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo ./mayapy -m pip install ply
sudo ./mayapy -m pip install toml 
sudo ./mayapy -m pip install packaging
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">5. Go to sip source code folder. Build and install sip. e.g.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">6. Go to PyQt5_sip folder, install PyQt5_sip</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">7. Go to PyQt builder folder, install PyQt builder.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /usr/autodesk/maya2024/bin/mayapy setup.py install
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">8. Go to PyQt5 source folder and install PyQt5 with following command.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;sudo /usr/autodesk/maya2024/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/PyQt5.2024/devkit/mkspecs/macx-clang --qmake ~/PyQt5.2024/devkit/devkit/bin/qmake --verbose
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">sudo /usr/autodesk/maya2024/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/PyQt5.2024/devkit/mkspecs/macx-clang --qmake ~/PyQt5.2024/devkit/devkit/bin/qmake --verbose
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">We have finished installing PyQt5 for Maya 2024 on Linux.</p>
<h2 id="test-your-installation" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#test-your-installation" name="test-your-installation" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Test your installation</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">After install PyQt5, you can use following script to test your installation.</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;import sys
from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton)
from PyQt5.QtGui import QFont    

class Example(QWidget):    
    def __init__(self):
        super(Example,self).__init__()       
        self.initUI()


    def initUI(self):        
        QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))        
        self.setToolTip(&#39;This is a &amp;lt;b&amp;gt;QWidget&amp;lt;/b&amp;gt; widget&#39;)        
        btn = QPushButton(&#39;Button&#39;, self)
        btn.setToolTip(&#39;This is a &amp;lt;b&amp;gt;QPushButton&amp;lt;/b&amp;gt; widget&#39;)
        btn.resize(btn.sizeHint())
        btn.move(50, 50)               
        self.setGeometry(300, 300, 300, 200)
        self.setWindowTitle(&#39;Tooltips&#39;)    
        self.show()      

ex = Example()
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">import sys
from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton)
from PyQt5.QtGui import QFont    

class Example(QWidget):    
    def __init__(self):
        super(Example,self).__init__()       
        self.initUI()


    def initUI(self):        
        QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))        
        self.setToolTip(&#39;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#39;)        
        btn = QPushButton(&#39;Button&#39;, self)
        btn.setToolTip(&#39;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#39;)
        btn.resize(btn.sizeHint())
        btn.move(50, 50)               
        self.setGeometry(300, 300, 300, 200)
        self.setWindowTitle(&#39;Tooltips&#39;)    
        self.show()      

ex = Example()
</code></pre>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Maya, Qt, Python, PyQt5
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2024 API Update guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2024-api-update-guide
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2023/03/maya-2024-api-update-guide.html 
DATE: 03/28/2023 06:46:46 PM
-----
BODY:
<div style="font-family: &#39;Roboto Condensed&#39;, Tauri, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, STHeiti, SimSun, &#39;Lucida Grande&#39;, &#39;Lucida Sans Unicode&#39;, &#39;Lucida Sans&#39;, &#39;Segoe UI&#39;, AppleSDGothicNeo-Medium, &#39;Malgun Gothic&#39;, Verdana, Tahoma, sans-serif; font-size: 15px; overflow-x: hidden; overflow-y: auto; margin: 0px !important; padding: 20px; background-color: #ffffff; color: #222222; line-height: 1.6; -webkit-font-smoothing: antialiased; background: #ffffff;">
<p style="margin: 1em 0px; word-wrap: break-word;"><a id="top" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>The guide is based on What’s New in the Maya Devkit in Maya 2024 with some extra info. For more details including commands and scripts changes, please checkout the <a href="http://help.autodesk.com/view/MAYAUL/2024/ENU/" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">documentation</a> for more details.</p>
<h2 id="building-environments" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#building-environments" name="building-environments" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Building environments</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">In Maya 2024, we made significent changes on the building environment. The minimum supported version of CMake has been updated to 3.22.1.</p>
<table style="padding: 0px; border-collapse: collapse; border-spacing: 0px; margin-bottom: 16px; background-color: #fafafa;">
<thead>
<tr>
<th style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Platform</th>
<th style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">OS</th>
<th style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Building Environment</th>
</tr>
</thead>
<tbody>
<tr>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Windows</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">-</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Visual studio 2022, .NET 4.8.1</td>
</tr>
<tr style="background-color: #f2f2f2;">
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Linux</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">RHEL 8.6+</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">DTS-11 + gcc 11.2.1</td>
</tr>
<tr>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Mac</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">-</td>
<td style="border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Xcode 13.4+, macOS 11(Big Sur) and Python 3.10.6</td>
</tr>
</tbody>
</table>
<p style="margin: 1em 0px; word-wrap: break-word;">If you are working with <strong>MFnAnimCurve::evaluate()</strong>, <strong>MFnAnimCurve::addKey()</strong>, <strong>MFnAnimCurve</strong> or using <strong>glFunctionTable</strong>, you’ll need to check the update document. There are some changes for these classes may break your plugin.</p>
<p style="margin: 1em 0px; word-wrap: break-word;"><a href="#top" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Back to top</a></p>
<h2 id="python-api-changes" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#python-api-changes" name="python-api-changes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Python API Changes</h2>
<ul>
<li>Python API 2.0 now includes <strong>MFnAssembly</strong>.</li>
<li>Python hash support has been added to <strong>MObjectHandle</strong>. Objects of type MObjectHandle can now be used as keys in Python containers that require hashing.</li>
</ul>
<h2 id="new-build-instructions-for-apple-silicon-machines-running-the-mac-ub2-build" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#new-build-instructions-for-apple-silicon-machines-running-the-mac-ub2-build" name="new-build-instructions-for-apple-silicon-machines-running-the-mac-ub2-build" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New build instructions for Apple Silicon machines running the Mac UB2 build</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">You’ll need to specify building platform on Apple Silicon. e.g., to generate Intel86_64 binaries use:</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;cmake -H. -Bbuild -G Xcode -DCMAKE_OSX_ARCHITECTURES=x86_64
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">cmake -H. -Bbuild -G Xcode -DCMAKE_OSX_ARCHITECTURES=x86_64
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;">And to generate binaries for both Intel86_64 and arm64 use:</p>
<pre style="border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; border: 1px solid #cccccc; overflow: auto; padding: 0.5em;"><code data-origin="&lt;pre&gt;&lt;code&gt;cmake -H. -Bbuild -G Xcode -DCMAKE_OSX_ARCHITECTURES=&quot;x86_64;arm64&quot;
&lt;/code&gt;&lt;/pre&gt;" style="border: 1px solid #cccccc; display: block; font-family: Consolas, Inconsolata, Courier, monospace; font-weight: bold; white-space: pre; margin: 0px 2px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; word-wrap: break-word; padding: 0px 5px; font-size: 1em; letter-spacing: -1px;">cmake -H. -Bbuild -G Xcode -DCMAKE_OSX_ARCHITECTURES=&quot;x86_64;arm64&quot;
</code></pre>
<p style="margin: 1em 0px; word-wrap: break-word;"><a href="#top" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Back to top</a></p>
<h2 id="devkit-changes" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#devkit-changes" name="devkit-changes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Devkit changes</h2>
<ul>
<li>Each Qt example is now located in its own directory under the <strong>plug-ins</strong> directory</li>
<li>Fixed a bug in cvColorNode</li>
<li>The apiMeshShape example has been updated to use OpenGL. It provides information on how to migrate your code to use OpenGL calls instead of <strong>glFunctionTable</strong>.</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;"><a href="#top" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Back to top</a></p>
<h2 id="api-changes" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#api-changes" name="api-changes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>API Changes</h2>
<ul>
<li>A bug in the <strong>evaluate()</strong> and <strong>addKey()</strong> methods of <strong>MFnAnimCurve</strong> caused <strong>MTime</strong> to be handled as ticks instead of time has been fixed.</li>
<li><strong>MDisplayLayerMessage</strong> registers callbacks for display layer membership changes.</li>
<li><strong>MFnDisplayLayer</strong> is the function set for querying the contents of a display layer.</li>
<li><strong>MFnDisplayLayerManager</strong> is the function set used to query which display layer a Ufe item is a member of.</li>
<li><strong>inAlternateContext()</strong> and <strong>doExitRegion()</strong> added to <strong>MPxContext</strong>.<br style="clear: both;" />inAlternateContext() returns true when an alternate context is active. doExitRegion() is called when the mouse exits the viewport.</li>
<li><strong>indexMapper()</strong> and <strong>envelopeWeights()</strong> added to <strong>MPxDeformerNode</strong>.<br style="clear: both;" />indexMapper() returns the indexMapper of the deformer, and envelopeWeights() returns the deformer’s envelope weights, which are a combination of painted weights and falloff weights.</li>
<li><strong>indexMapper()</strong> has been added to <strong>MPxGeometryFilter</strong>.</li>
<li><strong>setOverrideBlendState()</strong> added to <strong>MUIDrawManager</strong>. setOverrideBlendState() lets you specify a new blend state to override the default blend state of the UI painter. It applies to mesh-like UI objects, not text or icons.</li>
<li><strong>lastEvaluatedOnGPU()</strong> added to <strong>MPxGPUDeformer</strong>. This method returns true if the previous evaluation of this node was on the GPU.</li>
<li><strong>isExactlyEqual()</strong> added to <strong>MPlug</strong>. This method is used to compare multi-indices instead of the == and != operators.</li>
<li><strong>balanceTransformation()</strong> has been added to <strong>MFnTransform</strong>. This method balances a transformation when applying a world matrix to a joint.</li>
<li><strong>isHideOnPlayback()</strong>, <strong>setHideOnPlayback()</strong>, <strong>setDrawLast()</strong> and <strong>isDrawLast()</strong>, have been added to MRenderItem.</li>
<li><strong>getDisplayStyleOfAllViewports()</strong> has been added to <strong>MHWRender::MFrameContext</strong>. This method returns the union of the display style of all active visible 3d viewports.</li>
<li>Four const method has been added to <strong>MPxGPUStandardDeformer</strong>, <strong>multiIndex()</strong>, <strong>inputPlug()</strong>, <strong>indexMapper()</strong>, <strong>passThroughWithZeroEnvelope()</strong></li>
<li><strong>k119_88FPS</strong> has been added to the <strong>MTime::Unit</strong> enum. It corresponds to a framerate of 119fps.</li>
<li><strong>kPolyUnsubdivide</strong>, <strong>kOpaqueAttribute</strong> types are added to MFn.</li>
<li><strong>MSelectInfo</strong>, <strong>MPxSurfaceShapeUI</strong> are deprecated.</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;"><a href="#top" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Back to top</a></p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Maya, Python, C++
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Maya 2023
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-maya-2023
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2022/03/how-to-build-pyqt5-for-maya-2023.html 
DATE: 03/30/2022 05:25:20 PM
-----
BODY:
<p>Maya 2023 is shipped with Python 3.9 <strong>only</strong> on all platforms. Although pip is shipped with Maya 2023, <strong>we still can’t use it to install PyQt5 on Mac</strong>. Unlike Maya 2023 on windows, pip installed packages could work. However, it has its own Qt5 libraries installed. You may want to replace them with the ones shipped with Maya. I didn’t encounter any problems during my testing with the original pip packages. If you find any problems with it, you can build your own with this guide.</p>
<p>When I am writing this guide, I am building with <strong>PyQt5-5.15.6</strong>, <strong>sip-6.5.1</strong>, <strong>PyQt5_sip-12.9.1</strong> and <strong>PyQt-builder-1.12.2</strong>.</p>
<h2 id="windows:"><a name="windows:" href="#windows:"></a>Windows:</h2>
<p>We are going to build it with VS2019 which is same as Maya 2023’s developing environment on Windows. If you’ve installed a path needs Administrator Privileges, please run <strong>x64 Native Tools Command Prompt for VS 2019</strong> as Administrator. I’ve installed my Maya 2023 to default location and I’ve extracted devkit to g:\case\devkitBase\2023. Please update it with the paths on your computer. Here are the steps:</p>
<p>1. Subst your maya install folder to a dedicate drive if there is a space inside your maya installation path. I am going to subst it to drive v e.g.</p>
<pre><code>subst v: &quot;C:\Program files\Autodesk\maya2023&quot;
</code></pre><p>2. Add your <strong>Maya2023\Python\scripts and Maya2023\bin</strong> to your system path. If you’ve created a subst drive, please use the path with drive. e.g.</p>
<pre><code>set path=%path%;v:\bin;v:\Python\Scripts
</code></pre><p>3. Copy <strong>include\Python39\Python</strong> inside Maya2023 installation to <strong>Python\include</strong>. You’ll need to create the destination folder.</p>
<p>4. Copy <strong>lib\python39.lib</strong> inside Maya2023 installation to <strong>Python\libs</strong>. You’ll need to create the destination folder. Once you’ve copied the libarary, please duplicate one and name it as <strong>python3.lib</strong>.</p>
<p>5. Go to sip source folder. Use mayapy install sip. e.g.</p><pre><code>v:\bin\mayapy setup.py install
</code></pre><p>6. install PyQt-builder and PyQt5-sip with pip</p><pre><code>mayapy -m pip install PyQt-builder

mayapy -m pip install PyQt5-sip
</code></pre><p>7. Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p>
<p>8. Update <strong>mkspecs/common/msvc-desktop.conf</strong> in the mkspecs, enable shell and add COM libraries to build config.</p>
<pre><code>QMAKE_LIBS              = ole32.lib OleAut32.lib

QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32
</code></pre><p>9.  Go to PyQt5 source folder. Use following command to install PyQt5. Please update the devkit path with the one on your computer.</p>
<pre><code>sip-install --jobs 32 --no-designer-plugin --spec g:\case\devkitBase\2023\mkspecs\win32-msvc --qmake g:\case\devkitBase\2023\devkit\bin\qmake.exe --verbose
</code></pre><p>The jobs count shouldn’t be more than the count of your logical processors. I am using a 5950x which has 32 logical processors so the jobs is 32 here. If you don’t want debug output, please remove the <strong>—verbose</strong> flag in the end.</p>
<p>Vola, it works.</p>
<h2 id="mac:"><a name="mac:" href="#mac:"></a>Mac:</h2>
<p>If you are going to install it on MacOSX Catalina or above, please install the latest Xcode 11. I’ve installed Maya 2023 to default path and extract devkit and PyQt5 source codes into <strong>~/Documents/pyqt5.2023/</strong>. Please update the path in the scripts if you are using a different location. I am building it on Xcode 11 with Big Sur. If you had encountered issue on a different building environment, please let us know.</p>
<p>1. Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p>
<p>2. Install required Python packages.</p>
<pre><code>sudo ./mayapy -m pip install toml 
sudo ./mayapy -m pip install packaging
</code></pre><p>3. Go to sip source code folder. Build and install sip. e.g.</p>
<pre><code>sudo /Applications/Autodesk/Maya2023/Maya.app/Contents/bin/mayapy setup.py install
</code></pre><p>4. Go to PyQt5_sip folder, install PyQt5_sip</p>
<pre><code>sudo /Applications/Autodesk/Maya2023/Maya.app/Contents/bin/mayapy setup.py install
</code></pre><p>5. Go to PyQt builder folder, install PyQt builder.</p>
<pre><code>sudo /Applications/Autodesk/Maya2023/Maya.app/Contents/bin/mayapy setup.py install
</code></pre><p>6. Use following script to build PyQt5. Please update the path with your Maya 2023 installation path.</p>
<pre><code>#!/usr/bin/env bash
export PYTHONHOME=/Applications/Autodesk/maya2023/Maya.app/Contents/Frameworks/Python.framework/Versions/Current
export DYLD_LIBRARY_PATH=/Applications/Autodesk/maya2023/Maya.app/Contents/MacOS:$DYLD_LIBRARY_PATH
export DYLD_FRAMEWORK_PATH=/Applications/Autodesk/maya2023/Maya.app/Contents/Frameworks:$DYLD_FRAMEWORK_PATH
/Applications/Autodesk/Maya2023/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/PyQt5.2023/devkit/mkspecs/macx-clang --qmake ~/PyQt5.2023/devkit/devkit/bin/qmake --verbose
</code></pre><p>Copy these scripts into a script file inside the directory of PyQt5 source files and execute it with sudo. If you can’t execute it, please use <strong>chmod +x <em>filename</em> </strong> to make it executable.</p>
<p>That’s it.</p>
<h2 id="linux"><a name="linux" href="#linux"></a>Linux</h2>
<p>You can use pip to install PyQt5. e.g.</p>
<pre><code>sudo mayapy -m pip install PyQt5
</code></pre><h2 id="test-your-installation"><a name="test-your-installation" href="#test-your-installation"></a>Test your installation</h2>
<p>After install PyQt5, you can use following script to test your installation.</p>
<pre><code>import sys
from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton)
from PyQt5.QtGui import QFont    

class Example(QWidget):    
    def __init__(self):
        super(Example,self).__init__()       
        self.initUI()


    def initUI(self):        
        QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))        
        self.setToolTip(&#39;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#39;)        
        btn = QPushButton(&#39;Button&#39;, self)
        btn.setToolTip(&#39;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#39;)
        btn.resize(btn.sizeHint())
        btn.move(50, 50)               
        self.setGeometry(300, 300, 300, 200)
        self.setWindowTitle(&#39;Tooltips&#39;)    
        self.show()      

ex = Example()
</code></pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2023 API Update guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: maya-2023-api-update-guide
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2022/03/maya-2023-api-update-guide.html 
DATE: 03/30/2022 05:12:18 PM
-----
BODY:
<p><a id="top"></a>The guide is based on What’s New in the Maya Devkit in Maya 2023 with some extra info. For more details including commands and scripts changes, please checkout the <a href="http://help.autodesk.com/view/MAYAUL/2023/ENU/">documentation</a> for more details.</p>
<p>Our Maya documentation team is also interested to know how impactful Developer documentation improvements have been over the past few releases. If you have a moment, <a href="https://autodeskfeedback.az1.qualtrics.com/jfe/form/SV_ai4bX5owgz9nihU">please take this short survey</a> to help us improve and know what is most important for you.</p>
<h2 id="building-environments"><a name="building-environments" href="#building-environments"></a>Building environments</h2>
<p>The building environment remains unchanged.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Platform</th>
<th style="text-align:center">OS</th>
<th style="text-align:center">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Windows</td>
<td style="text-align:center">Windows 10 x64</td>
<td style="text-align:center">Visual Studio 2019.7.8 <br/> Windows SDK Version 10.0.10586.0</td>
</tr>
<tr>
<td style="text-align:center">Mac</td>
<td style="text-align:center">Mojave 10.14.x</td>
<td style="text-align:center">XCode 10.2.1</td>
</tr>
<tr>
<td style="text-align:center">Linux</td>
<td style="text-align:center">CentOS/RHEL 7.x(x&gt;=6)</td>
<td style="text-align:center">gcc 9.3.1 (DTS 9.1)</td>
</tr>
</tbody>
</table>
<p><a href="#top">Back to top</a></p>
<h2 id="devkit-changes"><a name="devkit-changes" href="#devkit-changes"></a>Devkit changes</h2>
<ul>
<li>Alembic libraries have moved, using the find_alembic macro in your CMakeLists.txt files.</li><li>Devkit examples now require cmake version <strong>3.13</strong> or later to compile.</li><li>The <strong>py1ArrayAttrBlenderNode.py</strong> example has been added to demonstrate how to implement array attributes in a straightforward way.</li><li>The <strong>py1MoveTool.py</strong> example has been updated from using VP1 to using VP2, and updated to use Python API 2.0. It has been renamed to <strong>py2MoveTool.py</strong>.</li><li>The <strong>customImagePlane</strong> example has been updated to fix an issue where images were not animated when scrubbing.</li><li>The <strong>gpuCache</strong> example has been updated to use the new <strong>kSelectionHighlighting</strong> enum.</li><li>The <strong>rockingTransform</strong> example has been updated to use the new <strong>preRotation()</strong> method in <strong>MPxTransformationMatrix</strong>.</li><li>The <strong>offsetNode</strong> example has been updated to use the new <a href="#enhanced-gpu-deformer-apis">GPU deformer API</a>.</li><li>The <strong>apiMeshShape</strong> example has been updated to remove deprecated code and to fix a bug in the example.</li></ul>
<p><a href="#top">Back to top</a></p>
<h2 id="python-changes"><a name="python-changes" href="#python-changes"></a>Python Changes</h2>
<h3 id="python-updated-to-version-3.9.7"><a name="python-updated-to-version-3.9.7" href="#python-updated-to-version-3.9.7"></a>Python updated to version 3.9.7</h3>
<p>Python has been updated to 3.9 from 3.7. Code compatibility is not guaranteed between these two version and you may encounter issues when porting your scripts from Python 3.7 to Python 3.9. There are several deprecated methods removed in Python 3.9. Consult <a href="https://docs.python.org/3/whatsnew/3.8.html">What’s New in Python 3.8</a> and <a href="https://docs.python.org/3/whatsnew/3.9.html">What’s New in Python 3.9</a> for details.</p>
<p>The ABI is not compatible between these 2 versions neither. Depending on which method is used (pybind11, swig, boost.python or CPython), it is necessary to review and recompile Python extensions.</p>
<p>PySide is now also built with Python 3.9.<br><a href="#top">Back to top</a></p>
<h3 id="new-python-site-packages-directory"><a name="new-python-site-packages-directory" href="#new-python-site-packages-directory"></a>New Python site-packages directory</h3>
<p>Maya will use a site-packages directory specific to its release version.</p>
<table>
<thead>
<tr>
<th>Operating system</th>
<th>Path to new site-packages location</th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS</td>
<td>Preferences/Autodesk/maya/2023/scripts/site-packages</td>
</tr>
<tr>
<td>linux</td>
<td>/local/users/<username>/maya/2023/scripts/site-packages</td>
</tr>
<tr>
<td>Windows</td>
<td>C:/Users/<username>/Documents/maya/2023/scripts/site-packages</td>
</tr>
</tbody>
</table>
<p>This is an added directory. Packages will not be moved to this directory, and this directory will not replace any existing directories. However, packages in this directory will be prioritized over Maya’s own site-packages directory.</p>
<p>Use the <strong>pip —target</strong> option to install packages to this location:</p>
<pre><code>mayapy -m pip install &lt;package_name&gt; --target &lt;full_path_to_maya_2023_site-packages&gt;
</code></pre><p><a href="#top">Back to top</a></p>
<h3 id="generating-python-code-from-ui-files-using-pyside2-uic"><a name="generating-python-code-from-ui-files-using-pyside2-uic" href="#generating-python-code-from-ui-files-using-pyside2-uic"></a>Generating Python code from ui files using pyside2-uic</h3>
<p><strong>pyside2-uic</strong> and <strong>pyside2-rcc</strong> are now included with Maya.</p>
<p>Users can now use <strong>pyside2-uic</strong> to generate Python code from <strong>.ui</strong> files.</p>
<h3 id="maya.api.openmaya.mfnmesh()-handles-empty-meshes-same-as-python-api-1.0-now."><a name="maya.api.openmaya.mfnmesh()-handles-empty-meshes-same-as-python-api-1.0-now." href="#maya.api.openmaya.mfnmesh()-handles-empty-meshes-same-as-python-api-1.0-now."></a>maya.api.OpenMaya.MFnMesh() handles empty meshes same as Python API 1.0 now.</h3>
<h3 id="methods-added-to-the-python-api-2.0"><a name="methods-added-to-the-python-api-2.0" href="#methods-added-to-the-python-api-2.0"></a>Methods added to the Python API 2.0</h3>
<p>The Python counterparts of the following C++ methods have been added to the Python API 2.0:</p>
<pre><code>virtual void MPxNode::getCacheSetup(const MEvaluationNode&amp;, MNodeCacheDisablingInfo&amp;, MNodeCacheSetupInfo&amp;, MObjectArray&amp;) const

virtual void MPxNode::configCache(const MEvaluationNode&amp;, MCacheSchema&amp;) const

virtual MTimeRange MPxNode::transformInvalidationRange(const MPlug&amp; source, const MTimeRange&amp; input) const

bool MPxNode::hasInvalidationRangeTransformation() const

virtual void MPxGeometryOverride::configCache(const MEvaluationNode&amp;, MCacheSchema&amp;) const
</code></pre><p><a href="#top">Back to top</a></p>
<h2 id="api-changes"><a name="api-changes" href="#api-changes"></a>API Changes</h2>
<h4 id="enhanced-gpu-deformer-apis"><a name="enhanced-gpu-deformer-apis" href="#enhanced-gpu-deformer-apis"></a>Enhanced GPU deformer APIs</h4>
<p>The <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_open_c_l_utils.html">MOpenCLUtils</a>, <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_open_c_l_kernel_info.html">MOpenCLKernelInfo</a>, and <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_px_g_p_u_standard_deformer.html">MPxGPUStandardDeformer</a> classes have been added.</p>
<p>One new method has been added to <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_g_p_u_deformer_registration_info.html">MGPUDeformerRegistrationInfo</a>:</p>
<pre><code>virtual bool isGeometryFilter() const
</code></pre><p>And four new methods have been added to <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_px_g_p_u_deformer.html">MPxGPUDeformer</a>:</p>
<pre><code>static bool isBufferUpdateNeeded(const MOpenCLBuffer&amp; buffer, const MEvaluationNode&amp; evaluationNode, const MObject&amp; attribute)

cl_int uploadFixedSetupData(const MString&amp; name, MOpenCLBuffer&amp; buffer, cl_int&amp; errorCode, unsigned int* arrayLength)

static MFnGeometryData::SubsetState getSubsetState(MDataBlock&amp; block, unsigned int multiIndex, MStatus* ReturnStatus = NULL)

static const char* className()
</code></pre><p>The <strong>offsetNode</strong> example has been updated to use these new classes and methods.</p>
<h4 id="two-new-methods,-[mcolorpickerutilities::applyviewtransform()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#a1de9fd7aa122ca60308005e760342ff0),-and-[mcolorpickerutilities::grabcolor()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#ae78601c9aff49c253c60975440875564)-and-a-new-class-[mcolormixingspacehelper](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_mixing_space_helper.html),-have-been-added-for-creating-a-color-managed-color-picker-using-the-api."><a name="two-new-methods,-[mcolorpickerutilities::applyviewtransform()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#a1de9fd7aa122ca60308005e760342ff0),-and-[mcolorpickerutilities::grabcolor()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#ae78601c9aff49c253c60975440875564)-and-a-new-class-[mcolormixingspacehelper](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_mixing_space_helper.html),-have-been-added-for-creating-a-color-managed-color-picker-using-the-api." href="#two-new-methods,-[mcolorpickerutilities::applyviewtransform()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#a1de9fd7aa122ca60308005e760342ff0),-and-[mcolorpickerutilities::grabcolor()](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_picker_utilities.html#ae78601c9aff49c253c60975440875564)-and-a-new-class-[mcolormixingspacehelper](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_color_mixing_space_helper.html),-have-been-added-for-creating-a-color-managed-color-picker-using-the-api."></a>Two new methods,  <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_color_picker_utilities.html#a1de9fd7aa122ca60308005e760342ff0">MColorPickerUtilities::applyViewTransform()</a>, and <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_color_picker_utilities.html#ae78601c9aff49c253c60975440875564">MColorPickerUtilities::grabColor()</a> and a new class <a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_color_mixing_space_helper.html">MColorMixingSpaceHelper</a>, have been added for creating a color managed color picker using the API.</h4>
<pre><code>MColorPickerUtilities::applyViewTransform (const MColor &amp;inputColor, Direction direction)

MColor MColorPickerUtilities::grabColor(MStatus * returnedStatus = nullptr)
</code></pre><h4 id="improvement-to-the-preference-system"><a name="improvement-to-the-preference-system" href="#improvement-to-the-preference-system"></a>Improvement to the preference system</h4>
<p>Three new methods have been added to <strong>MGlobal</strong>:</p>
<pre><code>static bool initOptionVar(const MString&amp; name, int value, const MString&amp; category)
static bool initOptionVar(const MString&amp; name, double value, const MString&amp; category)
static bool initOptionVar(const MString&amp; name, MString value, const MString&amp; category)
</code></pre><h4 id="[mtimeslidercustomdrawmanager](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_time_slider_custom_draw_manager.html)-class-has-been-added-to-the-maya-api.-this-class-provides-a-way-to-draw-custom-items-on-the-timeline."><a name="[mtimeslidercustomdrawmanager](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_time_slider_custom_draw_manager.html)-class-has-been-added-to-the-maya-api.-this-class-provides-a-way-to-draw-custom-items-on-the-timeline." href="#[mtimeslidercustomdrawmanager](http://help.autodesk.com/cloudhelp/2023/enu/maya-sdk/cpp_ref/class_m_time_slider_custom_draw_manager.html)-class-has-been-added-to-the-maya-api.-this-class-provides-a-way-to-draw-custom-items-on-the-timeline."></a><a href="http://help.autodesk.com/cloudhelp/2023/ENU/Maya-SDK/cpp_ref/class_m_time_slider_custom_draw_manager.html">MTimeSliderCustomDrawManager</a> class has been added to the Maya API. This class provides a way to draw custom items on the timeline.</h4>
<p>Three callback methods were added:</p>
<pre><code>void setStopPrimitiveEditFunction(MCustomDrawID id, MSharedPtr&lt; MStopPrimitiveEditingFct &gt; fct)
void setStartPrimitiveEditFunction(MCustomDrawID id, MSharedPtr&lt; MStartPrimitiveEditingFct &gt; fct)
void setEditPrimitiveFunction(MCustomDrawID id, MSharedPtr&lt; MEditPrimitiveFct &gt; fct)
</code></pre><p>The three abstract classes, <strong>MStopPrimitiveEditingFct</strong>, <strong>MStartPrimitiveEditingFct</strong>, and <strong>MEditPrimitiveFct</strong>, were added to support these callbacks.</p>
<h4 id="three-new-selection-levels-have-been-added-to-the-mintersection::selectionlevel()-and-mselectioncontext::selectionlevel-in-openmayarender"><a name="three-new-selection-levels-have-been-added-to-the-mintersection::selectionlevel()-and-mselectioncontext::selectionlevel-in-openmayarender" href="#three-new-selection-levels-have-been-added-to-the-mintersection::selectionlevel()-and-mselectioncontext::selectionlevel-in-openmayarender"></a>Three new selection levels have been added to the MIntersection::SelectionLevel() and MSelectionContext::SelectionLevel in OpenMayaRender</h4>
<p><strong>kFace</strong>, <strong>kEdge</strong>, <strong>kVertex</strong> were added. Plug-ins that test the selection level of a selection hit against the <strong>kComponent</strong> level should be updated to test against the three new levels instead.</p>
<h4 id="reset()-methods-in-mitmeshpolygon,-mitmeshedge,-and-mitmeshvertex-have-been-modified-to-remove-invalid-component-ids-automatically"><a name="reset()-methods-in-mitmeshpolygon,-mitmeshedge,-and-mitmeshvertex-have-been-modified-to-remove-invalid-component-ids-automatically" href="#reset()-methods-in-mitmeshpolygon,-mitmeshedge,-and-mitmeshvertex-have-been-modified-to-remove-invalid-component-ids-automatically"></a>reset() methods in MItMeshPolygon, MItMeshEdge, and MItMeshVertex have been modified to remove invalid component IDs automatically</h4>
<h4 id="**getprerotation()**-and-**prerotation()**-have-been-added-to-mpxtransform-and-mpxtransformationmatrix"><a name="**getprerotation()**-and-**prerotation()**-have-been-added-to-mpxtransform-and-mpxtransformationmatrix" href="#**getprerotation()**-and-**prerotation()**-have-been-added-to-mpxtransform-and-mpxtransformationmatrix"></a><strong>getPreRotation()</strong> and <strong>preRotation()</strong> have been added to MPxTransform and MPxTransformationMatrix</h4>
<p>The <strong>rockingTransform</strong> example has been modified to use this new functionality.</p>
<h4 id="**isproxy**-and-**proxied**-have-been-added-to-mplug"><a name="**isproxy**-and-**proxied**-have-been-added-to-mplug" href="#**isproxy**-and-**proxied**-have-been-added-to-mplug"></a><strong>isProxy</strong> and <strong>proxied</strong> have been added to MPlug</h4>
<h4 id="snaptoactive()-added-to-mselectioninfo"><a name="snaptoactive()-added-to-mselectioninfo" href="#snaptoactive()-added-to-mselectioninfo"></a>snapToActive() added to MSelectionInfo</h4>
<h4 id="kselectionhighlighting-added-to-mgeometry::drawmode"><a name="kselectionhighlighting-added-to-mgeometry::drawmode" href="#kselectionhighlighting-added-to-mgeometry::drawmode"></a>kSelectionHighlighting added to MGeometry::DrawMode</h4>
<p>The <strong>gpuCache</strong> devkit example has been updated to use this new enum.</p>
<h4 id="a-drawpass-enum,-**begindrawpass()**-and-**enddrawpass()**-have-been-added-to-muidrawmanager"><a name="a-drawpass-enum,-**begindrawpass()**-and-**enddrawpass()**-have-been-added-to-muidrawmanager" href="#a-drawpass-enum,-**begindrawpass()**-and-**enddrawpass()**-have-been-added-to-muidrawmanager"></a>A DrawPass enum, <strong>beginDrawPass()</strong> and <strong>endDrawPass()</strong> have been added to MUIDrawManager</h4>
<h4 id="two-new-parameters,-**inputcolorspace**-and-**alphadiscardthreshold**-have-been-added-to-muidrawmanager::settexture()"><a name="two-new-parameters,-**inputcolorspace**-and-**alphadiscardthreshold**-have-been-added-to-muidrawmanager::settexture()" href="#two-new-parameters,-**inputcolorspace**-and-**alphadiscardthreshold**-have-been-added-to-muidrawmanager::settexture()"></a>Two new parameters, <strong>inputColorSpace</strong> and <strong>alphaDiscardThreshold</strong> have been added to MUIDrawManager::setTexture()</h4>
<p><strong>inputColorSpace</strong> is the color space of the texture that will be used to create a shader override when converting texture color to render space color.</p>
<p><strong>alphaDiscardThreshold</strong> controls the shader that draws textured UI objects. Any parts of the texture that have an alpha value lower than the threshold will not be drawn. A threshold of 0.0 means everything will be drawn while 1.0 means nothing will be. </p>
<h4 id="**defaultmaterialfiltering**,-**setdefaultmaterialhandling()**,-and-**getdefaultmaterialhandling()**-were-added-so-that-a-**mrenderitem**-can-be-filtered-based-on-the-default-material-setting-of-the-viewport."><a name="**defaultmaterialfiltering**,-**setdefaultmaterialhandling()**,-and-**getdefaultmaterialhandling()**-were-added-so-that-a-**mrenderitem**-can-be-filtered-based-on-the-default-material-setting-of-the-viewport." href="#**defaultmaterialfiltering**,-**setdefaultmaterialhandling()**,-and-**getdefaultmaterialhandling()**-were-added-so-that-a-**mrenderitem**-can-be-filtered-based-on-the-default-material-setting-of-the-viewport."></a><strong>DefaultMaterialFiltering</strong>, <strong>setDefaultMaterialHandling()</strong>, and <strong>getDefaultMaterialHandling()</strong> were added so that a <strong>MRenderItem</strong> can be filtered based on the default material setting of the viewport.</h4>
<p>A new enum and three new methods have been added to <strong>MHWRender::MRenderItem</strong>.</p>
<h4 id="**muint64-mrenderitem::internalobjectid()-const**-returns-a-unique-identifier-for-a-render-item."><a name="**muint64-mrenderitem::internalobjectid()-const**-returns-a-unique-identifier-for-a-render-item." href="#**muint64-mrenderitem::internalobjectid()-const**-returns-a-unique-identifier-for-a-render-item."></a><strong>MUint64 MRenderItem::InternalObjectId() const</strong> returns a unique identifier for a render item.</h4>
<h4 id="the-default-tolerance-of-**mfnmesh::getpointsatuv()**-was-changed-from-0-to-0.001.-if-no-points-are-found,-the-method-will-no-longer-fail.-instead-its-arrays-of-points-polygon-ids-will-be-empty."><a name="the-default-tolerance-of-**mfnmesh::getpointsatuv()**-was-changed-from-0-to-0.001.-if-no-points-are-found,-the-method-will-no-longer-fail.-instead-its-arrays-of-points-polygon-ids-will-be-empty." href="#the-default-tolerance-of-**mfnmesh::getpointsatuv()**-was-changed-from-0-to-0.001.-if-no-points-are-found,-the-method-will-no-longer-fail.-instead-its-arrays-of-points-polygon-ids-will-be-empty."></a>The default tolerance of <strong>MFnMesh::getPointsAtUV()</strong> was changed from 0 to 0.001. If no points are found, the method will no longer fail. Instead its arrays of points polygon IDs will be empty.</h4>
<h4 id="the-methods-**edgeborderinfo()**,-**getuvborderedges()**,-and-**getmeshshellids()**,-**getrawuvs()**,-as-well-as-the-enum,-**borderinfo**,-have-been-added-to-**mfnmesh**."><a name="the-methods-**edgeborderinfo()**,-**getuvborderedges()**,-and-**getmeshshellids()**,-**getrawuvs()**,-as-well-as-the-enum,-**borderinfo**,-have-been-added-to-**mfnmesh**." href="#the-methods-**edgeborderinfo()**,-**getuvborderedges()**,-and-**getmeshshellids()**,-**getrawuvs()**,-as-well-as-the-enum,-**borderinfo**,-have-been-added-to-**mfnmesh**."></a>The methods <strong>edgeBorderInfo()</strong>, <strong>getUVBorderEdges()</strong>, and <strong>getMeshShellIds()</strong>, <strong>getRawUVs()</strong>, as well as the enum, <strong>BorderInfo</strong>, have been added to <strong>MFnMesh</strong>.</h4>
<h4 id="the-boolclassification-enum-indicates-whether-to-use-edge-classification-or-normal-classification-when-computing-booleans-between-meshes-using-the-booleanops()-method."><a name="the-boolclassification-enum-indicates-whether-to-use-edge-classification-or-normal-classification-when-computing-booleans-between-meshes-using-the-booleanops()-method." href="#the-boolclassification-enum-indicates-whether-to-use-edge-classification-or-normal-classification-when-computing-booleans-between-meshes-using-the-booleanops()-method."></a>The BoolClassification enum indicates whether to use edge classification or normal classification when computing booleans between meshes using the booleanOps() method.</h4>
<h4 id="four-new-overloaded-**create()**-and-two-new-overloaded-**createinplace()**-methods-have-been-added-to-**mfnmesh**.-the-new-methods-mirror-the-mesh-creation-used-by-mayaascii-and-mayabinary-file-readers."><a name="four-new-overloaded-**create()**-and-two-new-overloaded-**createinplace()**-methods-have-been-added-to-**mfnmesh**.-the-new-methods-mirror-the-mesh-creation-used-by-mayaascii-and-mayabinary-file-readers." href="#four-new-overloaded-**create()**-and-two-new-overloaded-**createinplace()**-methods-have-been-added-to-**mfnmesh**.-the-new-methods-mirror-the-mesh-creation-used-by-mayaascii-and-mayabinary-file-readers."></a>Four new overloaded <strong>create()</strong> and two new overloaded <strong>createInPlace()</strong> methods have been added to <strong>MFnMesh</strong>. The new methods mirror the mesh creation used by mayaAscii and mayaBinary file readers.</h4>
<h4 id="getmemberpaths()-has-been-added-to-mfnsets-to-get-an-array-of-dagpaths-that-are-members-of-the-set."><a name="getmemberpaths()-has-been-added-to-mfnsets-to-get-an-array-of-dagpaths-that-are-members-of-the-set." href="#getmemberpaths()-has-been-added-to-mfnsets-to-get-an-array-of-dagpaths-that-are-members-of-the-set."></a>getMemberPaths() has been added to MFnSets to get an array of dagPaths that are members of the set.</h4>
<h4 id="isincrashhandler()-has-been-added-to-mglobal-to-query-where-or-not-maya-has-crashed."><a name="isincrashhandler()-has-been-added-to-mglobal-to-query-where-or-not-maya-has-crashed." href="#isincrashhandler()-has-been-added-to-mglobal-to-query-where-or-not-maya-has-crashed."></a>isInCrashHandler() has been added to MGlobal to query where or not Maya has crashed.</h4>
<h4 id="isvalidreference()-added-to-mfnreference-to-validate-a-file-reference-before-passing-it-to-other-methods,-such-as-**mfnreferemce::isloaded()**,-to-avoid-triggering-an-exception."><a name="isvalidreference()-added-to-mfnreference-to-validate-a-file-reference-before-passing-it-to-other-methods,-such-as-**mfnreferemce::isloaded()**,-to-avoid-triggering-an-exception." href="#isvalidreference()-added-to-mfnreference-to-validate-a-file-reference-before-passing-it-to-other-methods,-such-as-**mfnreferemce::isloaded()**,-to-avoid-triggering-an-exception."></a>isValidReference() added to MFnReference to validate a file reference before passing it to other methods, such as <strong>MFnReferemce::isLoaded()</strong>, to avoid triggering an exception.</h4>
<h4 id="uniquename()-added-to-mfndependencynode"><a name="uniquename()-added-to-mfndependencynode" href="#uniquename()-added-to-mfndependencynode"></a>uniqueName() added to MFnDependencyNode</h4>
<h4 id="devicepixelratio()-has-been-added-to-m3dview-to-return-ratio-of-qt-logical-pixels-to-viewport-rendering-pixels-for-the-device."><a name="devicepixelratio()-has-been-added-to-m3dview-to-return-ratio-of-qt-logical-pixels-to-viewport-rendering-pixels-for-the-device." href="#devicepixelratio()-has-been-added-to-m3dview-to-return-ratio-of-qt-logical-pixels-to-viewport-rendering-pixels-for-the-device."></a>devicePixelRatio() has been added to M3dView to return ratio of Qt logical pixels to viewport rendering pixels for the device.</h4>
<h4 id="isempty()-added-to-mstring"><a name="isempty()-added-to-mstring" href="#isempty()-added-to-mstring"></a>isEmpty() added to MString</h4>
<h4 id="mstatus-mfileio::getreferencenodes(const-mstring-&-filename,-mstringarray-&-nodes,-bool-dagpath)-has-been-added-to-mfileio"><a name="mstatus-mfileio::getreferencenodes(const-mstring-&-filename,-mstringarray-&-nodes,-bool-dagpath)-has-been-added-to-mfileio" href="#mstatus-mfileio::getreferencenodes(const-mstring-&-filename,-mstringarray-&-nodes,-bool-dagpath)-has-been-added-to-mfileio"></a>MStatus MFileIO::getReferenceNodes(const MString &amp; fileName, MStringArray &amp; nodes, bool dagPath) has been added to MFileIO</h4>
<h4 id="the-return-type-of-**mindexmapper::affectmap()**-has-changed-from-**mintarray**-to-**muintarray**"><a name="the-return-type-of-**mindexmapper::affectmap()**-has-changed-from-**mintarray**-to-**muintarray**" href="#the-return-type-of-**mindexmapper::affectmap()**-has-changed-from-**mintarray**-to-**muintarray**"></a>The return type of <strong>MIndexMapper::affectMap()</strong> has changed from <strong>MIntArray</strong> to <strong>MUintArray</strong></h4>
<p><a href="#top">Back to top</a></p>

-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Maya 2022
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: markdown
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-maya-2022
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2021/03/how-to-build-pyqt5-for-maya-2022.html 
DATE: 03/29/2021 08:04:47 PM
-----
BODY:
<p>Maya 2022 is shipped with Python 3.7 and Python 2.7 on Windows/Linux. Since Python 2 is no longer supported by the Python community, we encourge you to update to Python 3. This guide will only cover how to build and install PyQt5 for Maya 2022 with Python 3.</p>

<p>Although pip is shipped with Maya 2022, <strong>we can use it to install PyQt5 on Linux only</strong>. For Windows and Mac, we'll still need to build it manually.</p>

<p>When I am writing this guide, I am building with <strong>PyQt5-5.15.4.dev2103021428</strong> and <strong>sip-6.0.3.dev2103021424</strong>.  You can get them from <a href="https://riverbankcomputing.com/software/pyqt/download">Riverbank computing</a>'s website.</p>

<h2>Windows:</h2>

<p>We are going to build it with VS2019 which is same as Maya 2022's developing environment on Windows. If you've installed a path needs Administrator Privileges, please run <strong>x64 Native Tools Command Prompt for VS 2019</strong> as Administrator. I've installed my Maya 2022 to default location and I've extracted devkit to g:\case\devkitBase\2022. Please update it with the paths on your computer. Here are the steps:</p>

<ol>
<li><p>Subst your maya install folder to a dedicate drive if there is a space inside your maya installation path. I am going to subst it to drive v e.g.</p>

<pre><code>subst v: "c:\program files\autodesk\maya2022"
</code></pre></li>
<li><p>Add your <strong>maya2022\Python37\scripts and maya2022\bin</strong> to your system path. If your've created a subst drive, please use the path with drive. e.g.</p>

<pre><code>set path=%path%;v:\bin;v:\Python37\Scripts
</code></pre></li>
<li><p>Copy <strong>include\Python37\Python</strong> inside Maya2022 installation as <strong>Python37\include</strong>.</p></li>
<li><p>Copy <strong>lib\python37.lib</strong> inside Maya2022 installation to <strong>Python37\libs</strong>. You'll need to create the destination folder. Once you've copied the libarary, please duplicate one and name it as <strong>python3.lib</strong>.</p></li>
<li><p>Use mayapy to install packaging and toml. e.g.</p>

<pre><code>mayapy -m pip install toml
mayapy -m pip install packaging
</code></pre></li>
<li><p>Go to sip source folder. Use mayapy to install sip. e.g.</p>

<pre><code>v:\bin\mayapy setup.py install
</code></pre></li>
<li><p>install PyQt-builder and PyQt5-sip with pip</p>

<pre><code>mayapy -m pip install PyQt-builder
mayapy -m pip install PyQt5-sip
</code></pre></li>
<li><p>Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p></li>
<li><p>Update <strong>mkspecs/common/msvc-desktop.conf</strong> in the mkspecs, enable shell and add COM libraries to build config.</p>

<pre><code>QMAKE_LIBS              = ole32.lib OleAut32.lib
QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32
</code></pre></li>
<li><p>Go to PyQt5 source folder. Use following command to install PyQt5. Please update the devkit path with the one on your computer.</p>

<pre><code>sip-install --jobs 32 --no-designer-plugin --spec g:\case\devkitBase\2022\mkspecs\win32-msvc --qmake g:\case\devkitBase\2022\devkit\bin\qmake.exe --verbose
</code></pre>

<p>The jobs count shouldn't be more than the count of your logical processors. I am using a 5950x which has 32 logical processors so the jobs is 32 here. If you don't want debug output, please remove the <strong>--verbose</strong> flag in the end.</p></li>
</ol>

<p>Vola, it works.</p>

<h2>Mac:</h2>

<p>If you are going to install it on MacOSX Catalina, please install the latest Xcode 11. As I am writing this guide, there will be warning when using Xcode 12 to build and install PyQt5. Since Xcode 12 is required by BigSur, please install it on MacOSX Catalina or Mojave if possible. I've installed Maya 2022 to default path and extract devkit and PyQt5 source codes into <strong>~/Documents/pyqt5.2022/</strong>. Please update the path in the scripts if you are using a different location. </p>

<ol>
<li><p>Download devkit, unzip the mkspec in the mkspec folder directly into its directory. Unzip the Qt include files into the include directory directly. Rename <strong>include\qtnfc</strong> to <strong>qtnfc.disabled</strong>.</p></li>
<li><p>Go to sip source code folder. Build and install sip. e.g.</p>

<pre><code>sudo /Applications/Autodesk/Maya2022/Maya.app/Contents/bin/mayapy setup.py install
</code></pre></li>
<li><p>Use pip to install PyQt-builder and PyQt5-sip. e.g.</p>

<pre><code>sudo /Applications/Autodesk/Maya2022/Maya.app/Contents/bin/mayapy -m pip install PyQt-builder
sudo /Applications/Autodesk/Maya2022/Maya.app/Contents/bin/mayapy -m pip install PyQt5-sip
</code></pre></li>
<li><p>Use following script to build PyQt5. Please update the path with your Maya 2022 installation path.</p>

<pre><code>#!/usr/bin/env bash
export PYTHONHOME=/Applications/Autodesk/maya2022/Maya.app/Contents/Frameworks/Python.framework/Versions/Current
export DYLD_LIBRARY_PATH=/Applications/Autodesk/maya2022/Maya.app/Contents/MacOS:$DYLD_LIBRARY_PATH
export DYLD_FRAMEWORK_PATH=/Applications/Autodesk/maya2022/Maya.app/Contents/Frameworks:$DYLD_FRAMEWORK_PATH
/Applications/Autodesk/Maya2022/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/bin/sip-install --jobs 16 --no-designer-plugin --spec ~/Documents/pyqt5.2022/devkit/mkspecs/macx-clang --qmake ~/Documents/pyqt5.2022/devkit/devkit/bin/qmake --verbose
</code></pre>

<p>Copy these scripts into a script file inside the directory of PyQt5 source files and execute it with sudo. If you can't execute it, please use <em><em>chmod +x *filename</em> *</em> to make it executable.</p></li>
<li><p>Go to build folder, remove the install-distinfo from the install target in the <strong>Makefile</strong>, e.g.</p>

<pre><code>install:install_subtargets install_uic install_init install_scripts install-distinfo FORCE
</code></pre>

<p>to</p>

<pre><code>install:install_subtargets install_uic install_init install_scripts FORCE
</code></pre></li>
<li><p>Install the build first.</p>

<pre><code>sudo make install
</code></pre></li>
<li><p>Use following script to execute install-distinfo target. Please update it with your local paths.</p>

<pre><code>#!/usr/bin/env bash
export PYTHONHOME=/Applications/Autodesk/maya2022/Maya.app/Contents/Frameworks/Python.framework/Versions/Current
export DYLD_LIBRARY_PATH=/Applications/Autodesk/maya2022/Maya.app/Contents/MacOS:$DYLD_LIBRARY_PATH
export DYLD_FRAMEWORK_PATH=/Applications/Autodesk/maya2022/Maya.app/Contents/Frameworks:$DYLD_FRAMEWORK_PATH
/Applications/Autodesk/Maya2022/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/bin/sip-distinfo --inventory /Users/lichengxi/Documents/pyqt5.2022/PyQt5-5.15.4.dev2103021428/build/inventory.txt --project-root /Users/lichengxi/Documents/pyqt5.2022/PyQt5-5.15.4.dev2103021428 --prefix "" --generator sip-build --console-script pylupdate5=PyQt5.pylupdate_main:main --console-script pyrcc5=PyQt5.pyrcc_main:main --console-script pyuic5=PyQt5.uic.pyuic:main --requires-dist "PyQt5-sip (&gt;=12.8, &lt;13)" /Applications/Autodesk/maya2022/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python3.7/site-packages/PyQt5-5.15.4.dev2103021428.dist-info
</code></pre>

<p>Copy these scripts into a script file and execute it with sudo.</p></li>
</ol>

<p>That's it.</p>

<h2>Linux</h2>

<p>You can use pip to install PyQt5. e.g.
    sudo mayapy -m pip install PyQt5</p>

<h2>Test your installation</h2>

<p>After install PyQt5, you can use following script to test your installation.</p>

<pre><code>import sys
from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton)
from PyQt5.QtGui import QFont    

class Example(QWidget):    
    def __init__(self):
        super(Example,self).__init__()       
        self.initUI()


    def initUI(self):        
        QToolTip.setFont(QFont('SansSerif', 10))        
        self.setToolTip('This is a &lt;b&gt;QWidget&lt;/b&gt; widget')        
        btn = QPushButton('Button', self)
        btn.setToolTip('This is a &lt;b&gt;QPushButton&lt;/b&gt; widget')
        btn.resize(btn.sizeHint())
        btn.move(50, 50)               
        self.setGeometry(300, 300, 300, 200)
        self.setWindowTitle('Tooltips')    
        self.show()      

ex = Example()
</code></pre>

<p>If PyQt5 is properly installed, you will see a popup window with a button.</p>

-----
EXTENDED BODY:

-----
EXCERPT:
How to build and install PyQt5 for Maya 2022 Python 3.
-----
KEYWORDS:
PyQt5, Maya 2022, PyQt, Python
-----
--------
AUTHOR: Lanh Hong
AUTHOR EMAIL: lanh.hong@autodesk.com
TITLE: Maya 2022 API Updates
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2022-api-updates
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2021/03/maya-2022-api-updates.html 
DATE: 03/24/2021 05:17:53 PM
-----
BODY:
<h1 class="code-line" data-line="0" id="maya-2022-api-update-guide">Maya 2022 API Update guide</h1>
<p class="code-line" data-line="2">The guide is based on What&#39;s New in the Maya Devkit in Maya 2022 with some extra info. Check the Maya documentation for the most up to date information.</p>
<h2 class="code-line" data-line="4" id="build-environment">Build environment:</h2>
<p class="code-line" data-line="6">The build environments have been upgraded. Mac still uses Mojave 10.14.x with Xcode 10.x, and Windows remains Windows 10 with an upgrade to VS2019.&#0160;<strong>Linux has been updated to CentOS/RHEL 7.6 or above and DTS 9.1</strong>.</p>
<table border="1" style="border-collapse: collapse; width: 100%; height: 72px;">
<tbody>
<tr style="height: 18px;">
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;"><strong>Platform</strong></span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;"><strong>OS</strong></span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;"><strong>Compiler</strong></span></td>
</tr>
<tr style="height: 18px;">
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Windows</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Windows 10 x64</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Visual Studio 2019</span></td>
</tr>
<tr style="height: 18px;">
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Mac</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Mojave 10.14.x</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">XCode 10.2.1</span></td>
</tr>
<tr style="height: 18px;">
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">Linux</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">CentOS/RHEL 7.6+ and 8.2+</span><br /><span style="font-family: verdana, geneva; font-size: 11pt;">(8.0 and 8.1 are missing some system packages)</span></td>
<td style="width: 33.3333%; height: 18px; text-align: center;"><span style="font-family: verdana, geneva; font-size: 11pt;">gcc 9.3.1 (DTS 9.1)</span></td>
</tr>
</tbody>
</table>
<h2 class="code-line" data-line="14" id="developer-resources">Developer resources</h2>
<ul>
<li class="code-line" data-line="16">
<p class="code-line" data-line="16">The Maya docs are being updated with API changes. You can find the most up to date information for the API in the&#0160;<a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_html" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_html" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_html">What&#39;s New / What&#39;s Changed</a>&#0160;section.</p>
</li>
<li class="code-line" data-line="18">
<p class="code-line" data-line="18">For those who are part of the Feedback community, there is an additional resource to help determine if your plug-in needs to be recompiled for Maya 2022. The product team is posting&#0160;<a data-href="https://feedback.autodesk.com/project/forum/thread.html?cap=037743fd817049f18d3a9e014e771fd6&amp;forid=%7Bf93ee204-9670-4c0e-ae43-c67b5008e28f%7D&amp;topid=%7BD7D47D19-B419-4294-B524-9B215517BCD5%7D" href="https://feedback.autodesk.com/project/forum/thread.html?cap=037743fd817049f18d3a9e014e771fd6&amp;forid=%7Bf93ee204-9670-4c0e-ae43-c67b5008e28f%7D&amp;topid=%7BD7D47D19-B419-4294-B524-9B215517BCD5%7D" title="https://feedback.autodesk.com/project/forum/thread.html?cap=037743fd817049f18d3a9e014e771fd6&amp;forid=%7Bf93ee204-9670-4c0e-ae43-c67b5008e28f%7D&amp;topid=%7BD7D47D19-B419-4294-B524-9B215517BCD5%7D">API compatibility reports</a>&#0160;in the Feedback forum for every PR release so check it out.</p>
</li>
</ul>
<h2 class="code-line" data-line="20" id="changes-in-maya-2022-at-a-glance">Changes in Maya 2022 at a glance</h2>
<ul>
<li class="code-line" data-line="21">
<p class="code-line" data-line="21"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-3-support" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-3-support" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-3-support">Python 3 support</a>&#0160;- Python 3 support is now available for all OS. Python 2 is still supported on Linux and Windows only.</p>
</li>
<li class="code-line" data-line="23">
<p class="code-line" data-line="23"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#notable-changes-to-third-party-components" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#notable-changes-to-third-party-components" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#notable-changes-to-third-party-components">Changes to third party components</a>&#0160;- Qt and PySide updated to version 5.15.2. Updates made to Alembic and OpenEXR libraries. Qt Creator Tools will not be distributed in their entirety. The pysideuic module has been deprecated by QtC and replaced by the pyside2-uic script.</p>
</li>
<li class="code-line" data-line="25">
<p class="code-line" data-line="25"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#the-maya-script-editor-now-fully-supports-unicode-characters" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#the-maya-script-editor-now-fully-supports-unicode-characters" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#the-maya-script-editor-now-fully-supports-unicode-characters">Unicode characters support in Script Editor</a>&#0160;- Scripts are now saved using UTF-8 encoding as prescibed by PEP-263.</p>
</li>
<li class="code-line" data-line="27">
<p class="code-line" data-line="27"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-environment-variables" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-environment-variables" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-environment-variables">New environment variables</a>&#0160;- Two new environment variables added to control what is the output to stderr and stdout:&#0160;<code>MAYA_BATCH_STDOUT_LOGGING_LEVEL</code>&#0160;and&#0160;<code>MAYA_BATCH_STDERR_LOGGING_LEVEL.</code></p>
</li>
<li class="code-line" data-line="29">
<p class="code-line" data-line="29"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#opting-out-of-analytics-when-starting-maya-in-batch-mode" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#opting-out-of-analytics-when-starting-maya-in-batch-mode" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#opting-out-of-analytics-when-starting-maya-in-batch-mode">Opting out of analytics in batch mode</a>&#0160;- Analytics will run by default when Maya starts in batch mode. Set&#0160;<code>MAYA_DISABLE_ADP</code>&#0160;to 1 to opt out of analytics.</p>
</li>
<li class="code-line" data-line="31">
<p class="code-line" data-line="31"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#autoloadonce-option-added-to-packagecontent-xml" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#autoloadonce-option-added-to-packagecontent-xml" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#autoloadonce-option-added-to-packagecontent-xml">AutoLoadOnce added to PackageContent.xml</a>&#0160;- A new option,&#0160;<code>AutoLoadOnce</code>&#0160;has been added to&#0160;<code>PackageContents.xml</code>&#0160;that is used when distributing plug-ins using the App Store format.</p>
</li>
<li class="code-line" data-line="33">
<p class="code-line" data-line="33"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#api-changes" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#api-changes" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#api-changes">API changes</a>&#0160;- New smart pointer, classes, methods, and attributes have been added along with some changes made to the API.</p>
</li>
<li class="code-line" data-line="35">
<p class="code-line" data-line="35"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-devkit-examples" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-devkit-examples" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-devkit-examples">Changes to Devkit examples</a>&#0160;- Several examples have new node IDs. Python examples have been renamed and moved. New examples added to the Devkit and some have been updated.</p>
</li>
<li class="code-line" data-line="37">
<p class="code-line" data-line="37"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#scripting-changes" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#scripting-changes" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#scripting-changes">Scripting changes</a>&#0160;- Some commands now accept UFE path strings. Two new commands:&#0160;<code>FBXExtPlugin</code>&#0160;and&#0160;<code>mimicManipulation</code>. Several new flags and options were added along with changes to some.</p>
</li>
</ul>
<h2 class="code-line" data-line="41" id="python-updates">Python Updates</h2>
<h3 class="code-line" data-line="43" id="maya-starts-up-in-python-3-by-default">Maya starts up in Python 3 by default</h3>
<p class="code-line" data-line="45"><strong>Note: Maya on Windows and Linux supports both Python 2 and Python 3. Maya on macOS only supports Python 3.</strong></p>
<p class="code-line" data-line="47">To ways to start Maya in Python 2 mode:</p>
<ol>
<li class="code-line" data-line="49">Start Maya from the command line with&#0160;<code>-pythonver 2</code>. For example, run&#0160;<code>maya.exe -pythonver 2</code>&#0160;on command window.</li>
<li class="code-line" data-line="50">Set the environment variable&#0160;<code>MAYA_PYTHON_VERSION</code>&#0160;to 2. For example, set&#0160;<code>MAYA_PYTHON_VERSION</code>&#0160;to 2 in the command window, then start Maya from the same command window.</li>
</ol>
<h3 class="code-line" data-line="53" id="renderexe-and-rendersh-can-now-run-in-either-python-2-or-python-3-mode">Render.exe and Render.sh can now run in either Python 2 or Python 3 mode</h3>
<ul>
<li class="code-line" data-line="55">Python 2: Run&#0160;<code>Render.exe -pythonver 2</code>&#0160;on Windows or&#0160;<code>./Render -pythonver 2</code></li>
<li class="code-line" data-line="56">Python 3: Run&#0160;<code>Render.exe -pythonver 3</code>&#0160;on Windows or&#0160;<code>./Render -pythonver 3</code>.</li>
</ul>
<h3 class="code-line" data-line="59" id="new-pip-support">New pip support</h3>
<p class="code-line" data-line="61"><code>mayapy</code>&#0160;now supports installing Python 3 modules with pip. To use pip with&#0160;<code>mayapy</code>, use the follow command:</p>
<ul>
<li class="code-line" data-line="63">Linux and macOS:&#0160;<code>./mayapy -m pip &lt;command&gt;</code></li>
<li class="code-line" data-line="64">Windows:&#0160;<code>mayapy -m pip &lt;command&gt;</code></li>
</ul>
<h2 class="code-line" data-line="67" id="api-updates">API Updates</h2>
<ul>
<li class="code-line" data-line="69">
<p class="code-line" data-line="69"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-smart-pointer" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-smart-pointer" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-smart-pointer">New smart pointer</a>&#0160;-&#0160;<code>MSharedPtr&lt;&gt;</code>&#0160;has been added to Maya. They are used in the Maya API to make object ownership explicit.</p>
</li>
<li class="code-line" data-line="71">
<p class="code-line" data-line="71"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-validator-for-decimal-indicators" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-validator-for-decimal-indicators" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-validator-for-decimal-indicators">New validator for decimal indicators</a>&#0160;-&#0160;<code>MayaQclocaleDoubleValidator</code>&#0160;was added to&#0160;<code>maya.internal.common.qt.doubleValidator</code>&#0160;to accomodate locales where decimal values use commas instead of periods.</p>
</li>
<li class="code-line" data-line="73">
<p class="code-line" data-line="73"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-in-openmayaanim-module" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-in-openmayaanim-module" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-in-openmayaanim-module">New class in OpenMayaAnim module</a>&#0160;-&#0160;<code>MFalloffContext</code></p>
</li>
<li class="code-line" data-line="75">
<p class="code-line" data-line="75"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-added-as-part-of-the-gpu-deformer-upgrades" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-added-as-part-of-the-gpu-deformer-upgrades" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-added-as-part-of-the-gpu-deformer-upgrades">New class added as part of the GPU deformer upgrades</a>&#0160;-&#0160;<code>MFnFloatVectorArrayData</code>&#0160;has been added to provide access to&#0160;<code>MFloatVectorArray</code>.</p>
</li>
<li class="code-line" data-line="77">
<p class="code-line" data-line="77"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-and-methods-to-perform-mrenderitem-specific-evaluations" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-and-methods-to-perform-mrenderitem-specific-evaluations" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-class-and-methods-to-perform-mrenderitem-specific-evaluations">New class and methods to perform MRenderItem-specific evaluations</a>&#0160;-&#0160;<code>MPxViewportComputeItem</code>,&#0160;<code>MRenderItem::addViewportComputeItem()</code>, and&#0160;<code>MRenderItem::viewportComputeItem()</code>.</p>
</li>
<li class="code-line" data-line="79">
<p class="code-line" data-line="79"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-syntax-for-python-iterators" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-syntax-for-python-iterators" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-syntax-for-python-iterators">New syntax for Python iterators</a>&#0160;- The newly-added syntax calls&#0160;<code>next</code>&#0160;with the iterator as the parameter:&#0160;<code>next(iterator)</code>.</p>
</li>
<li class="code-line" data-line="81">
<p class="code-line" data-line="81"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-behavior-for-mglobal-setactiveselectionlist-" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-behavior-for-mglobal-setactiveselectionlist-" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-behavior-for-mglobal-setactiveselectionlist-">Changed behavior for MGlobal::setActiveSelectionList()</a>&#0160;-&#0160;<code>MGlobal::setActiveSelectionList()</code>&#0160;will behave as expected: when it is called with an empty selection list, it will delete the list if&#0160;<code>ListAdjustment</code>&#0160;is set to&#0160;<code>kReplaceList</code>, otherwise it will do nothing.</p>
</li>
<li class="code-line" data-line="83">
<p class="code-line" data-line="83"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#deprecated-method-and-changed-behavior-in-mcacheschema" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#deprecated-method-and-changed-behavior-in-mcacheschema" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#deprecated-method-and-changed-behavior-in-mcacheschema">Deprecated method and changed behavior in MCacheSchema</a>&#0160;- The method&#0160;<code>reset()</code>&#0160;has been deprecated and&#0160;<code>attributes()&#0160;</code>is now a range over&#0160;<code>MObject</code>&#0160;rather than&#0160;<code>MPlug</code>.</p>
</li>
<li class="code-line" data-line="85">
<p class="code-line" data-line="85"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mitgeometry-constructors" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mitgeometry-constructors" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mitgeometry-constructors">Changes to MItGeometry constructors</a>&#0160;- Two new constructors have been added for&#0160;<code>MItGeometry</code>.</p>
</li>
<li class="code-line" data-line="87">
<p class="code-line" data-line="87"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mrenderitem" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mrenderitem" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mrenderitem">Changes to MRenderItem</a>&#0160;- Six new methods have been added to&#0160;<code>MRenderItem</code>. Three methods have been deprecated.</p>
</li>
<li class="code-line" data-line="89">
<p class="code-line" data-line="89"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-attribute-and-method-added-to-mpxgeometryfilter" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-attribute-and-method-added-to-mpxgeometryfilter" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-attribute-and-method-added-to-mpxgeometryfilter">New attribute and method added to MPxGeometryFilter</a>&#0160;- The&#0160;<code>componentTagExpression</code>&#0160;attribute has been added to&#0160;<code>MPxGeometryFilter</code>&#0160;in the&#0160;<code>OpenMayaAnim</code>&#0160;module.</p>
</li>
<li class="code-line" data-line="91">
<p class="code-line" data-line="91"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-interface-added-to-mrenderoverride-in-the-openmayarender-module" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-interface-added-to-mrenderoverride-in-the-openmayarender-module" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-interface-added-to-mrenderoverride-in-the-openmayarender-module">New interface added to MRenderOverride in the OpenMayaRender module</a>&#0160;- New interface added to&#0160;<code>MRenderOverride</code>&#0160;to override the default Viewport 2.0 selection</p>
</li>
<li class="code-line" data-line="93">
<p class="code-line" data-line="93"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mselectioninfo-in-the-openmayarender-module" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mselectioninfo-in-the-openmayarender-module" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mselectioninfo-in-the-openmayarender-module">New methods added to MSelectionInfo in the OpenMayaRender module</a>&#0160;- Two new methods were added to&#0160;<code>MSelectionInfo</code>.</p>
</li>
<li class="code-line" data-line="95">
<p class="code-line" data-line="95"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mfngeometrydata-to-support-component-tags" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mfngeometrydata-to-support-component-tags" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mfngeometrydata-to-support-component-tags">New methods and types added to MFnGeometryData to support component tags</a>&#0160;- Several new methods and types added to&#0160;<code>MFnGeometryData</code>&#0160;to support component tags</p>
</li>
<li class="code-line" data-line="97">
<p class="code-line" data-line="97"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mitdependencygraph" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mitdependencygraph" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-and-types-added-to-mitdependencygraph">New methods and types added to MItDependencyGraph</a>&#0160;- Several new methods and types have been added to&#0160;<code>MItDependencyGraph</code>&#0160;to allow for traversing on graphs based on different relations.</p>
</li>
<li class="code-line" data-line="99">
<p class="code-line" data-line="99"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mfragmentmanager" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mfragmentmanager" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mfragmentmanager">New methods added to MFragmentManager</a>&#0160;- Two new methods were added to&#0160;<code>MFragmentManager</code>&#0160;to add and remove, respectively, a specific shader stage&#39;s input parameters. Three new methods were added to manage the mapping between parameter names and transient names.</p>
</li>
<li class="code-line" data-line="101">
<p class="code-line" data-line="101"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mselectionlist" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mselectionlist" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mselectionlist">New method added to MSelectionList</a>&#0160;-&#0160;<code>getPlug()</code>&#0160;have been added to&#0160;<code>MSelectionList</code>.</p>
</li>
<li class="code-line" data-line="103">
<p class="code-line" data-line="103"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mdgmodifier" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mdgmodifier" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mdgmodifier">New method added to MDGModifier</a>&#0160;-&#0160;<code>deleteNode()</code>&#0160;has been added to&#0160;<code>MDGModifier</code>.</p>
</li>
<li class="code-line" data-line="105">
<p class="code-line" data-line="105"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxgpudeformer" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxgpudeformer" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxgpudeformer">New methods added to MPxGPUDeformer</a>&#0160;- Two new methods have been added to&#0160;<code>MPxGPUDeformer</code>.</p>
</li>
<li class="code-line" data-line="107">
<p class="code-line" data-line="107"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mfnnurbscurve" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mfnnurbscurve" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-method-added-to-mfnnurbscurve">New method added to MFnNurbsCurve</a>&#0160;-&#0160;<code>findParamFromLength()</code>&#0160;has been added to&#0160;<code>MFnNurbsCurve</code>.</p>
</li>
<li class="code-line" data-line="109">
<p class="code-line" data-line="109"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mevaluationnode" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mevaluationnode" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mevaluationnode">New methods added to MEvaluationNode</a>&#0160;- Two new methods have been added to&#0160;<code>MEvaluationNode</code>. A new example,&#0160;<code>simpleSkipNode</code>, has been added to demonstrate the use of these new methods.</p>
</li>
<li class="code-line" data-line="111">
<p class="code-line" data-line="111"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxcustomevaluator" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxcustomevaluator" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mpxcustomevaluator">New methods added to MPxCustomEvaluator</a>&#0160;- Two new methods have been added to&#0160;<code>MPxCustomEvaluator</code>. A new example, evaluationPruningEvaluator, has been added to demonstrate the use of these new methods.</p>
</li>
<li class="code-line" data-line="113">
<p class="code-line" data-line="113"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mgpudeformerregistrationinfo" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mgpudeformerregistrationinfo" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-methods-added-to-mgpudeformerregistrationinfo">New methods added to MGPUDeformerRegistrationInfo</a>&#0160;- Four new methods have been added to&#0160;<code>MGPUDeformerRegistrationInfo</code>.</p>
</li>
<li class="code-line" data-line="115">
<p class="code-line" data-line="115"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mgpudeformerbuffer" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mgpudeformerbuffer" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changes-to-mgpudeformerbuffer">Changes to MGPUDeformerBuffer</a>&#0160;- Two new methods added to&#0160;<code>MGPUDeformerBuffer</code>, and the signature for&#0160;<code>MGPUDeformerBuffer()</code>&#0160;has been changed.</p>
</li>
<li class="code-line" data-line="117">
<p class="code-line" data-line="117"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#signature-changes-in-mgpudeformerdata-and-mpxgpudeformer-classes" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#signature-changes-in-mgpudeformerdata-and-mpxgpudeformer-classes" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#signature-changes-in-mgpudeformerdata-and-mpxgpudeformer-classes">Signature changes in MGPUDeformerData and MPxGPUDeformer classes</a>&#0160;- The signature for&#0160;<code>MGPUDeformerData::getBuffer()</code>&#0160;and&#0160;<code>MPxGPUDeformer::evaluate()</code>&#0160;has changed.</p>
</li>
<li class="code-line" data-line="119">
<p class="code-line" data-line="119"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-argument-added-to-mpxcommand-setresult" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-argument-added-to-mpxcommand-setresult" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-argument-added-to-mpxcommand-setresult">New argument added to MPxCommand.setResult</a>&#0160;- A new argument,&#0160;<code>append</code>, has been added to&#0160;<code>MPxCommand.setResult</code>&#0160;in Python API 2.0</p>
</li>
<li class="code-line" data-line="121">
<p class="code-line" data-line="121"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-new-methods" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-new-methods" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-new-methods">Other new methods</a></p>
</li>
<li class="code-line" data-line="123">
<p class="code-line" data-line="123"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-deprecated-methods" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-deprecated-methods" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#other-deprecated-methods">Other deprecated methods</a></p>
</li>
</ul>
<h2 class="code-line" data-line="126" id="devkit-updates">Devkit Updates</h2>
<ul>
<li class="code-line" data-line="128">
<p class="code-line" data-line="128"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-node-ids-for-several-examples" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-node-ids-for-several-examples" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-node-ids-for-several-examples">New node IDs for several examples</a>&#0160;- Changes were made to ensure that the node IDs used in all examples were unique. Examples with node ID changes will need to be recompiled.</p>
</li>
<li class="code-line" data-line="130">
<p class="code-line" data-line="130"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-examples-have-been-moved-and-renamed" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-examples-have-been-moved-and-renamed" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#python-examples-have-been-moved-and-renamed">Python examples have been moved and renamed</a>&#0160;- Python 1.0 examples have been renamed to have&#0160;<code>py1</code>&#0160;prefix and Python 2.0 examples have&#0160;<code>py2</code>&#0160;prefix. Python examples have been moved from&#0160;<code>scripting</code>&#0160;directory to&#0160;<code>python</code>&#0160;directory.</p>
</li>
<li class="code-line" data-line="132">
<p class="code-line" data-line="132"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-examples" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-examples" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-examples">New examples</a>&#0160;- Six new examples added to the devkit:&#0160;<code>customComponentTagNode</code>,&#0160;<code>exampleFalloff</code>,&#0160;<code>basicMorphNode</code>,&#0160;<code>simpleSkipNode</code>,&#0160;<code>evaluationPruningEvaluator</code>, and&#0160;<code>narrowPolyRenderOverride</code></p>
</li>
<li class="code-line" data-line="134">
<p class="code-line" data-line="134"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#updated-examples" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#updated-examples" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#updated-examples">Updated examples</a>&#0160;- Six examples have been updated:&#0160;<code>offsetNode</code>,&#0160;<code>threadingLockTests</code>,&#0160;<code>moveManip.py</code>,&#0160;<code>blindDoubleDataCmd.py</code>,&#0160;<code>glslShader</code>, and&#0160;<code>manipOverride</code>.</p>
</li>
<li class="code-line" data-line="136">
<p class="code-line" data-line="136"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#alembic-examples-updated-to-only-support-ogawa-alembic-files" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#alembic-examples-updated-to-only-support-ogawa-alembic-files" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#alembic-examples-updated-to-only-support-ogawa-alembic-files">Alembic examples updated to only support Ogawa Alembic files</a>&#0160;- Maya no longer supports HDF5 variants of Alembic. These examples now only support Ogawa Alembic files:&#0160;<code>gpuCache</code>,&#0160;<code>AbcBullet</code>,&#0160;<code>AbcImport</code>,&#0160;<code>AbcExport</code></p>
</li>
<li class="code-line" data-line="138">
<p class="code-line" data-line="138"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-examples" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-examples" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-examples">Removed examples</a>&#0160;- Two examples removed from the devkit:&#0160;<code>exampleCameraSetView</code>,&#0160;<code>narrowPolyViewer</code></p>
</li>
</ul>
<h2 class="code-line" data-line="141" id="scripting-updates">Scripting Updates</h2>
<ul>
<li class="code-line" data-line="143">
<p class="code-line" data-line="143"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#ufe-aware-commands" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#ufe-aware-commands" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#ufe-aware-commands">UFE-aware commands</a>&#0160;- Some commands now accept UFE path strings. Commands that are UFE-aware will have different syntax than non-UFE-aware commands.</p>
</li>
<li class="code-line" data-line="145">
<p class="code-line" data-line="145"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-plug-ins" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-plug-ins" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-plug-ins">New plug-ins</a>&#0160;- Three new plug-ins:&#0160;<code>convertToComponentTags.py</code>,&#0160;<code>snapTransform.py</code>, and&#0160;<code>gameVertexCount</code></p>
</li>
<li class="code-line" data-line="147">
<p class="code-line" data-line="147"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-commands" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-commands" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-commands">New commands</a>&#0160;- Two new commands:&#0160;<code>FBXExtPlugin</code>,&#0160;<code>mimicManipulation</code></p>
</li>
<li class="code-line" data-line="149">
<p class="code-line" data-line="149"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-flags-and-options" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-flags-and-options" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#new-flags-and-options">New flags and options</a>&#0160;New flags and options added to these commands:&#0160;<code>file</code>,&#0160;<code>outlinerEditor</code>,&#0160;<code>sets</code>,&#0160;<code>deformerEvaluator</code>,&#0160;<code>filterCurve</code>,&#0160;<code>optVar</code>,&#0160;<code>geometryAttrInfo</code>,&#0160;<code>deformableShape</code>, and&#0160;<code>ghosting</code></p>
</li>
<li class="code-line" data-line="151">
<p class="code-line" data-line="151"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-flags-and-options" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-flags-and-options" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#changed-flags-and-options">Changed flags and options</a>&#0160;- Changes made to:&#0160;<code>deformableShape</code>,&#0160;<code>deleteAttr</code>,&#0160;<code>affectedNet</code>,&#0160;<code>dynExpression</code>, and&#0160;<code>cutKey</code></p>
</li>
<li class="code-line" data-line="153">
<p class="code-line" data-line="153"><a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-script" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-script" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html#removed-script">Removed script</a>&#0160;-&#0160;<code>performSkinCluster.mel</code>&#0160;have been removed.</p>
</li>
</ul>
<p class="code-line code-active-line" data-line="157">Please refer to&#0160;<a data-href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html" href="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html" title="https://help.autodesk.com/view/MAYAUL/2022/ENU/?guid=Maya_SDK_What_s_New_What_s_Changed_2022_Whats_New_in_API_html">What&#39;s New / What&#39;s Changed</a>&#0160;in the Developer Help documentation for details.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Lanh Hong
AUTHOR EMAIL: lanh.hong@autodesk.com
TITLE: DevKit hotfix for Maya 2020
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: devkit-hotfix-for-maya-2020
CATEGORY: Linux
CATEGORY: Maya
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2020/02/devkit-hotfix-for-maya-2020.html 
DATE: 02/10/2020 11:57:02 AM
-----
BODY:
<p>With the release of Maya 2020, there was a minor change to the IMF library names. &#0160;It was previously named<strong> IMFbase.lib</strong>, but it’s been changed to <strong>adskIMF.lib</strong>. This caused a few problems in producing the DevKit and even in the Maya lib installation folder.</p>
<p>For both the Linux and Windows platforms, the IMF library file is missing in the DevKit and Maya installation folder. For Mac OS, the IMF library was included with the Maya installation, but is missing in the DevKit.</p>
<p>To address this issue, the Maya product team has released a hotfix DevKit for the Windows and Linux platforms that include the missing IMF library.</p>
<p>Additionally, the Linux distribution had some problematic symbolic links pointing to missing library files. The updated Linux DevKit also has this resolved.</p>
<p>ADN members can find the updated DevKits on the ADN member site at <a href="adn.autodesk.com">adn.autodesk.com</a>. You can also download them from the public Maya Developer center at <a href="http://www.autodesk.com/developmaya">autodesk.com/developmaya</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2020 API update guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: maya-2020-api-update-guide
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/12/maya-2020-api-update-guide.html 
DATE: 12/10/2019 05:08:12 AM
-----
BODY:
<div style="font-family: 'Roboto Condensed', Tauri, 'Hiragino Sans GB', 'Microsoft YaHei', STHeiti, SimSun, 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', 'Segoe UI', AppleSDGothicNeo-Medium, 'Malgun Gothic', Verdana, Tahoma, sans-serif; font-size: 15px; overflow-x: hidden; overflow-y: auto; margin: 0px !important; padding: 20px; background-color: #ffffff; color: #222222; line-height: 1.6; -webkit-font-smoothing: antialiased; background: #ffffff;">
<p style="margin: 1em 0px; word-wrap: break-word;">The guide is based on What's New in the Maya Devkit in Maya 2020 with some extra info. Check the Maya documentation for the most up to date information.</p>
<p style="margin: 1em 0px; word-wrap: break-word;"><strong>For Mac users, Apple has introduced notarization since OS X 10.14.5 and it is going to be enforced for Applications after 10.15. It requires the host application to declare entitlements for the plug-ins. Although Maya is the parent application, you should be aware that it may cause your plug-in to fail in these Mac releases if Maya didn't declare the entitlement. Please test your plug-in in both 10.14.5 and 10.15 if possible. For more details please check <a href="https://developer.apple.com/documentation/security/notarizing_your_app_before_distribution" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Notarizing Your App Before Distribution</a> from Apple.</strong></p>
<h2 id="build-environment:" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#build-environment:" name="build-environment:" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Build environment:</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">The build environments have been upgraded. Mac has been updated to Mojave 10.14.x with Xcode 10.2.1, and Windows has been updated to Windows 10 with VS2017. Linux remains unchanged.</p>
<table style="padding: 0px; border-collapse: collapse; border-spacing: 0px; margin-bottom: 16px; background-color: #fafafa;">
<thead>
<tr>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Platform</th>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">OS</th>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">Windows</strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">Windows 10 x64</strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px;">Visual Studio 2017</strong> <br style="clear: both; margin-bottom: 0px;" />Windows SDK Version 10.0.10586.0</td>
</tr>
<tr style="background-color: #f2f2f2;">
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">Mac</strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">Mojave 10.14.x</strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">XCode 10.2.1</strong></td>
</tr>
<tr>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Linux</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">CentOS/RHEL 7.3(x&gt;=3)</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">gcc 6.3.1(DTS 6.1)</td>
</tr>
</tbody>
</table>
<h2 id="developer-resources" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#developer-resources" name="developer-resources" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Developer resources</h2>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">The Maya docs are being updated with API changes. You can find the most up to date information for the API in the <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_What_s_New_What_s_Changed_2020_Whats_New_in_API_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">What's New / What's Changed</a> section.</p>
</li>
</ul>
<h2 id="autodesk-standard-surface-shader" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#autodesk-standard-surface-shader" name="autodesk-standard-surface-shader" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Autodesk Standard Surface Shader</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;"><strong>Introduction</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">In Maya 2020, a new Maya node called <em>standardSurface</em> will be shipped as a new surface shading node.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">Based on the <a href="https://autodesk.github.io/standard-surface/" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Autodesk Standard Surface specification</a>, it is a renderer agnostic uber surface shader that aims to provide a material representation capable of accurately modeling the vast majority of materials used in practical visual effects and feature animation productions. The next release of Maya will have an implementation of the Autodesk Standard Surface based on version v1.0.1 of the specification.</p>
<p style="margin: 1em 0px; word-wrap: break-word;"><strong>Purpose and Scope</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">Using the Standard Surface node will allow more flexibility for rendering and for data interchange between applications.</p>
<ul>
<li>Allows multiple renderers to get similar rendering results by using the same native Maya surface node.</li>
<li>Allows scene importer/exporter plugins to keep as much shading information.</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;"><strong>Compatibility</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">The Standard Surface specification is a common base that can be extended (or reduced) by render engines that support it. For example, the Arnold Standard Surface shader has some additional parameters like <em>subsurface_type</em> or <em>exittobackground</em> not defined in the specification. The Arnold renderer plugin for Maya (MtoA) is responsible for extending the Maya Standard Surface node with those specific parameters. On the other side of the spectrum, some real-time renderers might not support some advanced parameters. In this scenario, some simplification can be done by zeroing the combination weights of the unsupported layers like <em>transmission</em> or <em>subsurface</em> for example. See the <a href="https://autodesk.github.io/standard-surface/#layeredmixturemodel/compatibilitymode" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Compatibility section</a> in the Autodesk Standard Surface specification.</p>
<p style="margin: 1em 0px; word-wrap: break-word;"><strong>Roadmap</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">Deprecating the Lambert shader in favor of the Standard Surface as the de facto default surface shader in Maya is the final goal. However since the Lambert shader has been used since the very first version of Maya, we decided to keep it as the default surface shader for now. You can experiment using the standardSurface as the default surface shader in the next release of Maya by setting the environment variable "MAYA_DEFAULT_SURFACE_SHADER" to "standardSurface".</p>
<p style="margin: 1em 0px; word-wrap: break-word;"><strong>API Updates</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">The following classes, methods, and types were added to the Viewport 2.0 API to support the new shader.</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New classes</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MFnStandardSurfaceShader</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New types</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MFn.kStandardSurface<br style="clear: both;" />k3dStandardSurfaceShader in MStockShader</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New methods</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MShaderInstance::addInputFragmentForMultiParams()</p>
</blockquote>
</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">Refer to <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_What_s_New_What_s_Changed_2020_Whats_New_in_API_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">What's New / What's Changed</a> and <a href="https://autodesk.github.io/standard-surface/" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">Autodesk Standard Surface specification</a> for details.</p>
<h2 id="devkit-updates" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#devkit-updates" name="devkit-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Devkit updates</h2>
<h5 id="new-samples" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-samples" name="new-samples" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New samples</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">basicBlendShapeDeformer - Deformer Subsetting: MPxBlendShape plugins<br style="clear: both;" />simpleSimulationNode - Cached playback support<br style="clear: both;" />pyPanelCanvasInfo.py - Graph Editor overlay drawing support<br style="clear: both;" />pyPanelCanvas.py - Graph Editor overlay drawing support</p>
</blockquote>
<h5 id="samples-updated" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#samples-updated" name="samples-updated" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Samples updated</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">apiMeshShape - Added component selection support to the example and Light plugin enhancements following internal changes to vizualization of objectSets<br style="clear: both;" />apiMeshSubSceneOverride - Selection update<br style="clear: both;" />viewObjectSetOverride - Light plugin enhancements following internal changes to vizualization of objectSets<br style="clear: both;" />footPrintNode_GeometryOverride - rewrite for better caching support<br style="clear: both;" />footPrintNode_GeometryOverride_AnimatedMaterial - requireRenderItemUpdate default value to false<br style="clear: both;" />geometryOverrideExample1 - requireRenderItemUpdate default value to false<br style="clear: both;" />geometryOverrideExample2 - requireRenderItemUpdate default value to false<br style="clear: both;" />customImagePlane - Revisited plugin after deprecation of MPxImagePlaneOverride</p>
</blockquote>
<h5 id="samples-removed-from-devkit/plug-ins" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#samples-removed-from-devkit/plug-ins" name="samples-removed-from-devkit/plug-ins" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Samples removed from devkit/plug-ins</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">geometryOverrideHighPerformance<br style="clear: both;" />AnimEngine - A similar AnimX example is available from <a href="https://github.com/Autodesk/animx" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">https://github.com/Autodesk/animx</a></p>
</blockquote>
<h5 id="headers-removed-from-devkit" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#headers-removed-from-devkit" name="headers-removed-from-devkit" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Headers removed from devkit</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MRenderSetupPrivate.h</p>
</blockquote>
<h5 id="new-headers-included" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-headers-included" name="new-headers-included" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New headers included</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MCacheMode.h<br style="clear: both;" />MCacheSchema.h<br style="clear: both;" />MPlugin.h<br style="clear: both;" />MTimeRange.h</p>
</blockquote>
<h3 id="api-updates-in-maya-2020" style="clear: both; font-size: 1.6em; font-weight: bold; margin: 1.125em 0px 0.75em;"><a href="#api-updates-in-maya-2020" name="api-updates-in-maya-2020" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>API Updates in Maya 2020</h3>
<h5 id="graph-editor-overlay-drawing" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#graph-editor-overlay-drawing" name="graph-editor-overlay-drawing" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Graph Editor overlay drawing</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">This feature allow users to draw primitives over the Graph Editor. Several new classes, methods, and examples were added to the API to support Graph Editor overlay drawing.</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New C++ and Python classes</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPanelCanvas<br style="clear: both;" />MPanelCanvasInfo</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New Python samples</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">pyPanelCanvasInfo.py<br style="clear: both;" />pyPanelCanvas.py</p>
</blockquote>
</li>
</ul>
<h5 id="cached-playback-support" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#cached-playback-support" name="cached-playback-support" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Cached Playback Support</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Your plug-in can now support Cached Playback. These new classes and methods have been added to the API to make it easier for you to define and configure your node for Cached Playback.</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New classes</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MNodeCacheDisablingInfo<br style="clear: both;" />MNodeCacheDisablingInfoHelper<br style="clear: both;" />MNodeCacheSetupInfo<br style="clear: both;" />MCacheMode<br style="clear: both;" />MCacheSchema<br style="clear: both;" />MTimeRange</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New methods</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxGeometryOverride::configCache()<br style="clear: both;" />MPxNode::configCache()<br style="clear: both;" />MPxNode::transformInvalidRange()<br style="clear: both;" />MPxNode::hasInvalidationRangeTransformation()<br style="clear: both;" />MPxNode::getCacheSetup()<br style="clear: both;" />MPxLocatorNode::getCacheSetup()<br style="clear: both;" />MNodeCacheDisablingInfo::setUnsafeNode()</p>
</blockquote>
</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">simpleSimulationNode example have been added to the devkit to showcase the new cached playback APIs.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">Refer to <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_cpp_ref_index_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">C++ API reference</a> for details.</p>
<h5 id="other-new-classes-and-methods" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#other-new-classes-and-methods" name="other-new-classes-and-methods" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Other New Classes and Methods</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Here are a few more classes and methods that have been added to the API. They're new classes and methods to help with your deformer, selection pass rendering, and iterating over geometry data.</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New C++ classes</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MGPUEventList<br style="clear: both;" />MIndexMapper</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New methods for selection pass rendering</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxSubSceneOverride::enableUpdateForSelection()<br style="clear: both;" />MFrameContext::getSelectionInfo()</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">apiMeshSubSceneOverride example have been updated to use the new methods.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New method added to MItGeometry</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MItGeometry::positionIndex()</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New Python 2.0 classes</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MItGeometry<br style="clear: both;" />MPyIterObject</p>
</blockquote>
</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">Refer to <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_What_s_New_What_s_Changed_2020_Whats_New_in_API_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">What's New / What's Changed</a> and the <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_cpp_ref_index_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">C++ API reference</a> for details.</p>
<h5 id="fixes-and-changes" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#fixes-and-changes" name="fixes-and-changes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Fixes and Changes</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Several third party libraries have been updated. Some methods which have been changed or fixed as well. If your plug-in uses the following methods, check the docs to see what's been fixed or changed.</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Third party libraries</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px;">Boost has been updated to 1.61. Maya is replacing boost with std, some headers have been removed from the boost library shipped with Maya.</p>
<p style="margin: 1em 0px; word-wrap: break-word; margin-bottom: 0px;">Qt has been updated to Qt 5.12.5.</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">OSX Plugin export symbols<br style="clear: both;" />If you wanted to update your existing plugin makefile for Mac, here are the export symbols.</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">__Z16initializePluginN8Autodesk4Maya16OpenMaya202000007MObjectE<br style="clear: both;" />__Z18uninitializePluginN8Autodesk4Maya16OpenMaya202000007MObjectE</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Fixed feature</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxTransform::boundingBox() and MPxTransform::isBounded()</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Change in signature</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MFnPlugin::registerEvaluator()<br style="clear: both;" />MPxNode::configCache()<br style="clear: both;" />MFnPlugin::registerImageFile()<br style="clear: both;" />MeshIntersector::create()</p>
</blockquote>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Change in default value</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxGeometryOverride::requireRenderItemUpdate</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">footPrintNode_GeometryOverride_AnimatedMaterial, geometryOverrideExample1, and geometryOverrideExample2 examples have been updated to reflect this change.</p>
</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">Refer to <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_What_s_New_What_s_Changed_2020_Whats_New_in_API_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">What's New / What's Changed</a> for details.</p>
<h5 id="deprecated-classes" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#deprecated-classes" name="deprecated-classes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Deprecated classes</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Creating custom image plane has been simplified. If you’re creating a custom image plane, you may want to update your plug-in because the following class have been deprecated.</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxImagePlaneOverride</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">Refer to <a href="http://help.autodesk.com/view/MAYAUL/2020/ENU/?guid=Maya_SDK_MERGED_What_s_New_What_s_Changed_2020_Whats_New_in_API_html" style="text-decoration: none; vertical-align: baseline; color: #3269a0;">What's New / What's Changed</a> for details.<br style="clear: both;" />`</p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Autodesk Maya 2020
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-autodesk-maya-2020
CATEGORY: Cheng Xi Li
CATEGORY: Lanh Long
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/12/how-to-build-pyqt5-for-autodesk-maya-2020.html 
DATE: 12/09/2019 10:36:51 PM
-----
BODY:
<p><span style="color: #333333; font-family: Helvetica, sans-serif; font-size: 12.5pt;">Written by Cyrille Fauvel – Autodesk Developer Network (April 2013)&#0160;</span></p>
<div class="WordSection1">
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Updated by Chengxi Li and Lanh Hong - Autodesk Developer Network (December 2019)&#0160;<br /><br /><br />Building SIP and PyQt for Maya 2020 is a python binding to the Qt library. Because Maya uses Qt internally, you can use the PyQt modules in Maya python scripts to create custom UI. PyQt does not have the same licensing as Maya, Qt, or Python. Please consult the PyQt website for information about licensing for PyQt [</span><a href="http://www.riverbankcomputing.com/"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;;">http://www.riverbankcomputing.com/</span></a><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">].</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />Maya 2020 uses Qt5.12.5 which is binary compatible with the latest version of PyQt - 5.13.2 / SIP - 4.19.19<br /><br />Use the Maya modified version of the Qt source code. A copy of the customized Qt 5.12.5 source is available from Autodesk&#39;s Open Source web-site [</span><a href="http://www.autodesk.com/lgplsource"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;;">http://www.autodesk.com/lgplsource</span></a><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">] and includes text files describing how to configure, build and install Qt for each platform supported by Maya.<br /><br /><strong style="mso-bidi-font-weight: normal;">Note</strong>: There is no need to build PySide since it comes with Maya by default, nor have to rebuild Qt since the main Qt tools to build PyQt are now included in the Maya distributions (i.e. qmake, moc, …). Also coming by default in the Maya include and lib folders are libxml, openSSL, OpenAL, python2.7, qt-5.12.5, and tbb so you do not need to rebuild any of those libraries unless you have a very specific need.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 22.5pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Instructions</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Here are the instructions for building a copy of the PyQt5 modules for Maya 2020.</span></p>
<p class="MsoNormal" style="background: white;"><s><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><span style="text-decoration: none;">&#0160;</span></span></s></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Follow the instructions from the Maya Documentation (Maya Developer Help &gt; Setting up your build environment) to setup your Windows, macOS, or Linux build environment. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Since Maya 2020 ships without the devkit, you can get the Maya 2020 devkit from the Maya Develop Center </span><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #006699;">[</span></u><a href="https://www.autodesk.com/developmaya"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;;">https://www.autodesk.com/developmaya</span></a><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #006699;">]</span></u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">. Download the devkit and unzip the files. Make sure to read the instructions in the Maya Documentation to install the devkit properly on your system.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Download SIP and PyQt source. I downloaded <strong style="mso-bidi-font-weight: normal;">&#39;sip-4.19.19&#39;</strong> and <strong style="mso-bidi-font-weight: normal;">&#39;PyQt5-5.13.2&#39;</strong>. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">PyQt5:&#0160;</span><a href="https://www.riverbankcomputing.com/software/pyqt/download5"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #006699;">https://www.riverbankcomputing.com/software/pyqt/download5</span></a><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />SIP:&#0160;</span><a href="http://www.riverbankcomputing.com/software/sip/download"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #006699;">http://www.riverbankcomputing.com/software/sip/download</span></a></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">The next steps are specific to your environment so follow the instructions for Mac, Linux or Windows.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Note:</span></strong><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"> The scripts used in this document are posted on&#0160;</span><a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #006699;">Github</span></a><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="mso-outline-level: 2; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 22.5pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Mac</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Unzip SIP and PyQt into one local folder </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">(e.g. <em>/Users/&lt;username&gt;/Maya2020/Scripts/</em>).</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">/Users/&lt;username&gt;/Maya2020/Scripts/sip-4.19.19</span></em></p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">/Users/&lt;username&gt;/Maya2020/Scripts/PyQt5-5.13.2</span></em></p>
<p class="MsoNormal" style="mso-outline-level: 2; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />If you have multiple installation of Xcode and would like to use Xcode 10.X to compile it, backup /Applications/Xcode.app and use Xcode 10.X to replace it.&#0160;<br /><br />Use xcode-select to change active xcode like below:<br /></span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">sudo xcode-select&#0160;-switch&#0160;/Applications/Xcode.app/Contents/Developer</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />The <strong style="mso-bidi-font-weight: normal;">qt.con</strong>f file uses&#0160;<strong>MAYA_LOCATION</strong>&#0160;and&#0160;<strong>DEVKIT_LOCATION</strong>&#0160;to locate the expected header/library files. Therefore, you must set both environment variables before building PyQt5. Follow the Maya Documentation to properly set up your environment variables.<br /><br /><strong style="mso-bidi-font-weight: normal;">DEVKIT_LOCATION</strong> should point to the directory where the devkit include, mkspecs, cmake directories are located. Please make sure DEVKIT_LOCATION/devkit/bin/moc and qmake are executable. <br /><br />Modify <strong>/</strong><strong style="mso-bidi-font-weight: normal;">devkit/bin/qt.conf</strong> as below:&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">qt.conf</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">[Paths]<br />Prefix=<br />Libraries=$(MAYA_LOCATION)/MacOS<br />Binaries=$(DEVKIT_LOCATION)/devkit/bin<br />Headers=$(DEVKIT_LOCATION)/include/Qt<br />ArchData=$(DEVKIT_LOCATION)<br />Data=$(DEVKIT_LOCATION)<br />HostData=$(DEVKIT_LOCATION)<br />HostBinaries=$(DEVKIT_LOCATION)/devkit/bin<br />HostLibraries=$(MAYA_LOCATION)/MacOS</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Untar the <strong>/</strong><strong style="mso-bidi-font-weight: normal;">include/qt-5.12.5-include.tar.gz</strong> into <strong>/</strong><strong style="mso-bidi-font-weight: normal;">include/Qt</strong><span style="mso-bidi-font-weight: bold;">.</span><br /><br />Untar the <strong>/mkspecs/</strong><strong style="mso-bidi-font-weight: normal;">qt-5.12.5-mkspecs.tar.gz</strong> into<strong style="mso-bidi-font-weight: normal;"> /mkspecs</strong>. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You can update <strong style="mso-bidi-font-weight: normal;">qconfig.pri</strong> to make the project compile only release by removing or replace debug flags with release.</span></p>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build Prerequisite for PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You’ll need to build <strong>setuptools</strong> and <strong>enum34</strong> before installing SIP. You can find the source in PyPI.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">After extracting the source code, use the following command to install them individually. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">sudo /Applications/Autodesk/Maya2020/maya.app/Contents/bin/mayapy setup.py install</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install SIP</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">sip</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.19<br />export MAYA_LOCATION=/Applications/Autodesk/Maya2020<br />&#0160;<br />pushd $SIPDIR<br />$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64 --sip-module PyQt5.sip<br />make<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">pyqt</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export MAYA_LOCATION=/Applications/Autodesk/Maya2020/Maya.app/Contents<br />export DEVKIT_LOCATION=/Applications/Autodesk/Maya2020<br />export QTDIR=$DEVKIT_LOCATION/devkit<br />export QMAKESPEC=$DEVKIT_LOCATION/mkspecs/macx-clang<br />export INCDIR_QT=$DEVKIT_LOCATION/include/Qt<br />export LIBDIR_QT=$MAYA_LOCATION/MacOS<br /><br />error=0<br />if [ ! -f $QMAKESPEC/qmake.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to install qt-5.12.5-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;<br />&#0160;&#0160;error=1<br />fi<br />if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br />then<br />&#0160;&#0160;echo &quot;You need to uncompress $MAYA_LOCATION/devkit/include/qt-5.12.5-include.tar.gz in $INCDIR_QT !&quot;<br />&#0160;&#0160;error=1<br />fi<br /># qt.conf - /Applications/Autodesk/Maya2020/Maya.app/Contents/Resources<br />if [ ! -f $QTDIR/bin/qt.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;<br />&#0160;&#0160;error=1<br />fi<br />&#0160;<br />test=`grep &#39;Data=$(DEVKIT_LOCATION)&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Data=\$(DEVKIT_LOCATION)&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br />test=`grep &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=\$(DEVKIT_LOCATION)/include/Qt&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br />test=`grep &#39;Libraries=$(MAYA_LOCATION)/MacOS&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Libraries=\$(MAYA_LOCATION)/MacOS&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br />if [ $error -eq 1 ];<br />then<br />&#0160;&#0160; &#0160;exit<br />fi<br />&#0160;<br />export DYLD_LIBRARY_PATH=$MAYA_LOCATION/MacOS<br />export DYLD_FRAMEWORK_PATH=$MAYA_LOCATION/Frameworks<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.19<br />export PYQTDIR=$MAYAQTBUILD/PyQt5-5.13.2<br />&#0160;<br />export SIP_EXE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/bin/sip<br />export SIP_INCLUDE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/include/python2.7<br /><br />pushd $PYQTDIR<br />export PATH=$QTDIR/bin:$PATH<br /><br />echo <br />echo Environment<br />echo -----------<br />set<br />echo -----------<br />echo QT Settings<br />echo -----------<br />qmake -query<br />echo -----------<br />echo<br />$MAYA_LOCATION/bin/mayapy ./configure.py QMAKE_MAC_SDK=macosx10.14 QMAKE_RPATHDIR+=$LIBDIR_QT --sip=$SIP_EXE --sip-incdir=$SIP_INCLUDE -w --no-designer-plugin <br />make -j 8<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p class="MsoNormal" style="background: white;"><strong><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Note:</span></strong><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"> I am compiling against Mac OS X SDK 10.14 which is same as the developer environment. If you want to compile against other versions, modify the script (macosx10.14).<br /><br />You&#39;re done! Please check the testing paragraph at the end of the article.</span></p>
<p class="MsoNormal" style="background: white;">&#0160;</p>
<p class="MsoNormal" style="mso-outline-level: 2; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 22.5pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Linux</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Unzip SIP and PyQt into one local folder </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">(e.g. <em>/home/&lt;username&gt;/Maya2020/Scripts/</em>).</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">/home/&lt;username&gt;/Maya2020/Scripts/sip-4.19.19</span></em></p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">/home/&lt;username&gt;/Maya2020/Scripts/PyQt5-5.13.2</span></em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br /><br /><br />The <strong style="mso-bidi-font-weight: normal;">qt.conf</strong> file uses&#0160;<strong>MAYA_LOCATION</strong>&#0160;and&#0160;<strong>DEVKIT_LOCATION</strong>&#0160;to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5. Follow the Maya Documentation to properly set up your environment variables.<br /><br /><strong style="mso-bidi-font-weight: normal;">DEVKIT_LOCATION</strong> should point to the directory where the devkit include, mkspecs, cmake directories are located. <br /><br />Please backup your <strong style="mso-bidi-font-weight: normal;">qt.conf </strong>first, you&#39;ll need to restore it after building PyQt5. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Replace <strong style="mso-bidi-font-weight: normal;">…/bin/qt.conf</strong> with below:</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">qt.conf</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">[Paths] <br />Prefix= <br />Libraries=$(MAYA_LOCATION)/lib&#0160;<br />Binaries=$(DEVKIT_LOCATION)/bin<br />Headers=$(DEVKIT_LOCATION)/include/Qt <br />ArchData=$(DEVKIT_LOCATION) <br />Data=$(DEVKIT_LOCATION) <br />HostData=$(DEVKIT_LOCATION) <br />HostBinaries=$(DEVKIT_LOCATION)/bin</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Untar the <strong style="mso-bidi-font-weight: normal;">/include/qt-5.12.5-include.tar.gz</strong> into <strong style="mso-bidi-font-weight: normal;">/include/Qt</strong><span style="mso-bidi-font-weight: bold;">.</span><br />Untar the <strong style="mso-bidi-font-weight: normal;">/mkspecs/qt-5.12.5-mkspecs.tar.gz</strong> into <strong style="mso-bidi-font-weight: normal;">/mkspecs</strong><span style="mso-bidi-font-weight: bold;">.</span><br />Make <strong>qmake</strong> and <strong>moc</strong> into executables from the Maya bin directory.&#0160;<br /></span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">sudo chmod aog+x /usr/autodesk/Maya2020/bin/moc <br />sudo chmod aog+x /usr/autodesk/Maya2020/bin/qmake</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build Prerequisite for PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You’ll need to build <strong>setuptools</strong> and <strong>enum34</strong> before installing SIP. You can find the source in PyPI.</span></p>
<p class="MsoNormal" style="background: white;"><span style="mso-bookmark: _Hlk535248249;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">After extracting the source code, use the following command to install them individually. </span></span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="mso-bookmark: _Hlk535248249;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">sudo /usr/autodesk/Maya2020/bin/mayapy setup.py install</span></span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install SIP&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP.</span></p>
<p class="MsoNormal" style="background: white;"><span style="mso-bookmark: _Hlk535248298;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">PyQt requires to build private sip module since 5.11. You’ll need to add “–sip-module PyQt5.sip” to the configuration</span></span><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">In Maya2020 release, the include/Python2.7 folder has been renamed to Python, so we’ll create a softlink for it.</span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">sudo ln -s /usr/autodesk/Maya2020/include/Python /usr/autodesk/Maya2020/include/python2.7</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">sip</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.19<br />export MAYA_LOCATION=/usr/autodesk/Maya2020<br />&#0160;<br />pushd $SIPDIR<br />$MAYA_LOCATION/bin/mayapy ./configure.py --sip-module PyQt5.sip<br />make<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt. You’ll need to install OpenGL headers before compiling the PyQt. You could install it by installing mesa-libGL-devel or simply install glew and glew-devel to make sure nothing is missing. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">pyqt</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export MAYA_LOCATION=/usr/autodesk/Maya2020<br />export QTDIR=$MAYA_LOCATION<br />export DEVKIT_LOCATION=$MAYA_LOCATION<br />export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64<br />export INCDIR_QT=$MAYA_LOCATION/include/Qt<br />export LIBDIR_QT=$QTDIR/lib<br /><br />error=0<br />if [ ! -f $QMAKESPEC/qmake.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to install qt-5.12.5-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;<br />&#0160;&#0160;error=1<br />fi<br />if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br />then<br />&#0160;&#0160;echo &quot;You need to uncompress $MAYA_LOCATION/include/qt-5.12.5-include.tar.gz in $INCDIR_QT !&quot;<br />&#0160;&#0160;error=1<br />fi<br /># qt.conf - $QTDIR/bin/qt.conf<br />if [ ! -f $QTDIR/bin/qt.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br /># The grep string should be in single quote(&#39;), if it is in double quote (&quot;&quot;), <br /># shell will expand the variable, hence the intension of the below grep will fail <br />test=`grep &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br />if [ $error -eq 1 ];<br />then<br />&#0160;&#0160; &#0160;exit<br />fi<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.19<br />export PYQTDIR=$MAYAQTBUILD/PyQt5-5.13.2<br />&#0160;<br />pushd $PYQTDIR<br />export PATH=$QTDIR/bin:$PATH<br />$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin <br />#change 8 to the count of cores your computer</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">make -j 8<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You&#39;re done! Please check the testing paragraph at the end of the article.<br /><br /></span></p>
<p class="MsoNormal" style="mso-outline-level: 1; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 27.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333; mso-font-kerning: 18.0pt;">Windows</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Unzip SIP and PyQt into one local folder </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">(e.g. <em>C:\Users\&lt;username&gt;\Maya2020\Scripts\</em>).</span></p>
<p class="MsoNormal" style="background: white;">&#0160;</p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">C:\Users\&lt;username&gt;\Maya2020\Scripts\sip-4.19.19</span></em></p>
<p class="MsoNormal" style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">C:\Users\&lt;username&gt;\Maya2020\Scripts\yQt5-5.13.2</span></em></p>
<p class="MsoNormal" style="mso-outline-level: 2; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />Please backup your <strong style="mso-bidi-font-weight: normal;">qt.conf</strong> first, you&#39;ll need to restore it after building PyQt5. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Replace <strong style="mso-bidi-font-weight: normal;">…\bin\qt.conf</strong> with below:</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">qt.conf</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">[Paths]<br />Prefix=$(MAYA_LOCATION)<br />Libraries=lib <br />Binaries=bin <br />Headers=include/Qt<br />Data=.<br />Plugins=qt-plugins <br />Translations=qt-translations <br />Qml2Imports=qml</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />Unzip the <strong style="mso-bidi-font-weight: normal;">\include\qt-5.12.5-include.tar.gz</strong> into <strong style="mso-bidi-font-weight: normal;">\include\Qt</strong>&#0160;<br /><br />Unzip the <strong style="mso-bidi-font-weight: normal;">\mkspecs\qt-5.12.5-mkspecs.tar.gz</strong> into <strong style="mso-bidi-font-weight: normal;">\mkspecs. </strong></span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You can update <strong style="mso-bidi-font-weight: normal;">qconfig.pri</strong> to make the project compile only release by removing or replace debug flags with release.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Modify \<strong>mkspecs\common\msvc-destop.conf</strong>. Find <strong>QMAKE_LIBS_QT_ENTRY</strong> and make sure it is assigned to <strong style="mso-bidi-font-weight: normal;"><em style="mso-bidi-font-style: normal;">-lqtmain -lshell32.<br /></em></strong></span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Rename the folder inside <strong>\include\Qt\QtNfc</strong> to <strong>QtNfc.disabled</strong>.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />Run following build scripts with VS2017 x64 Native Tools&#0160;Command Prompt. If your Maya is installed in folders that requires administrator privilege (e.g. Program files), please run the command prompt as Administrator.<br style="mso-special-character: line-break;" /><br /></span></p>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Environment Setup</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to setup the environment. </span></p>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">setup.bat</span></u></strong><u></u></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">@echo off<br /><br />set MAYAVERSION=</span><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: DengXian; mso-fareast-theme-font: minor-fareast; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333; mso-fareast-language: ZH-CN;">2020</span><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;"><br />set ADSKQTVERSION=5.12.5<br />set SIPVERSION=4.19.19<br />set PYQTVERSION=5.13.2<br />set MAYADRIVE=m:<br />set BUILDDRIVE=v:<br /><br />if exist %MAYADRIVE%\nul subst %MAYADRIVE% /d<br />subst %MAYADRIVE% &quot;C:\Program Files\Autodesk\Maya%MAYAVERSION%&quot;<br />set MAYA_LOCATION=%MAYADRIVE%<br /><br />set MAYAPYQTBUILD=%~dp0<br />rem Removing trailing \<br />set MAYAPYQTBUILD=%MAYAPYQTBUILD:~0,-1%<br /><br />if exist %BUILDDRIVE%\nul subst %BUILDDRIVE% /d<br />subst %BUILDDRIVE% &quot;%MAYAPYQTBUILD%&quot;<br /><br />set SIPDIR=%BUILDDRIVE%\sip-%SIPVERSION%<br />set PYQTDIR=%BUILDDRIVE%\PyQt5-%PYQTVERSION%<br />rem set ADSKQTDIR=%BUILDDRIVE%\qt-%ADSKQTVERSION%<br />set QTDIR=%MAYA_LOCATION%<br /><br />set PATH=%QTDIR%\bin;%PATH%<br />set MSVC_VERSION=201</span><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: DengXian; mso-fareast-theme-font: minor-fareast; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333; mso-fareast-language: ZH-CN;">7</span><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;"><br />set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 14.0<br />set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc<br />set _QMAKESPEC_=win32-msvc<br /><br />if [&quot;%LIBPATH%&quot;]==[&quot;&quot;] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64<br /><br />set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python<br />set LIB=%LIB%;%MAYA_LOCATION%\lib</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build Prerequisite for PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">You’ll need to build <strong>setuptools</strong> and <strong>enum34</strong> before installing SIP. You can find the source in PyPI.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">After extracting the source code, use the following command with administrator privilege to install them individually. </span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">&quot;C:\Program Files\Autodesk\Maya2020\bin\mayapy.exe&quot; setup.py install</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install SIP</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP. </span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">sip.bat</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">@echo off<br />set XXX=%~dp0<br />if [&quot;%MAYAPYQTBUILD%&quot;]==[&quot;&quot;] call &quot;%XXX%setup.bat&quot;<br /><br />pushd %SIPDIR%<br />rem &quot;%MAYA_LOCATION%\bin\mayapy&quot; configure-ng.py --spec %_QMAKESPEC_%<br />&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py --sip-module PyQt5.sip<br />nmake<br />nmake install<br />popd</span></p>
</div>
<p class="MsoNormal" style="mso-outline-level: 3; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Build &amp; Install PyQt</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt.</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">&#0160;</span></p>
<p class="MsoNormal" style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">pyqt.bat</span></u></strong></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">@echo off<br />set XXX=%~dp0<br />if [&quot;%MAYAPYQTBUILD%&quot;]==[&quot;&quot;] call &quot;%XXX%setup.bat&quot;<br /><br />set QMAKESPEC=%QTDIR%\mkspecs\%_QMAKESPEC_%<br />if not exist &quot;%QMAKESPEC%\qmake.conf&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to uncompress %MAYA_LOCATION%\mkspecs\qt-5.12.5-mkspecs.tar.gz !&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />if not exist &quot;%MAYA_LOCATION%\include\Qt\QtCore\qdir.h&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to uncompress %MAYA_LOCATION%\include\qt-5.12.5-include.tar.gz in %MAYA_LOCATION%\include\Qt !&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />findstr /L /C:&quot;Headers=include/Qt&quot; &quot;%MAYA_LOCATION%\bin\qt.conf&quot; &gt;nul 2&gt;&amp;1<br />if ERRORLEVEL 1 (<br />&#0160;&#0160; &#0160;echo &quot;You need to edit %MAYA_LOCATION%\bin\qt.conf to use &#39;Headers=include/Qt&#39;&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />findstr /L /C:&quot;-lqtmain -lshell32&quot; &quot;%QTDIR%\mkspecs\common\msvc-desktop.conf&quot; &gt;nul 2&gt;&amp;1<br />if ERRORLEVEL 1 (<br />&#0160;&#0160; &#0160;echo &quot;You need to edit %QTDIR%\mkspecs\common\msvc-desktop.conf to use &#39;QMAKE_LIBS_QT_ENTRY &#0160; &#0160; = -lqtmain -lshell32&#39;&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />if not exist &quot;%MAYA_LOCATION%\include\Qt\qtnfc.disabled&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to rename %MAYA_LOCATION%\include\Qt\qtnfc to %MAYA_LOCATION\include\Qt\qtnfc.disabled&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />&#0160;&#0160; &#0160;<br />pushd %PYQTDIR%<br /><br />&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py --spec %QMAKESPEC% LIBDIR_QT=&quot;%QTDIR%\lib&quot; INCDIR_QT=&quot;%QTDIR%\include\Qt&quot; MOC=&quot;%QTDIR%\bin\moc.exe&quot; --sip=&quot;%QTDIR%\Python\sip.exe&quot; --sip-incdir=&quot;%QTDIR%\Python\include&quot; -w --no-designer-plugin<br />nmake<br />nmake install<br />popd<br /><br />:end</span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />You&#39;re done! Please check the testing paragraph at the end of the article.<br /></span></p>
<p class="MsoNormal" style="mso-outline-level: 1; background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 27.0pt; font-family: &#39;Georgia&#39;,serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333; mso-font-kerning: 18.0pt;">Testing</span></p>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;">Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:<br /></span></p>
<div style="mso-element: para-border-div; border: solid #CCCCCC 1.0pt; mso-border-alt: solid #CCCCCC .75pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p class="MsoNormal" style="margin-bottom: 7.5pt; tab-stops: 45.8pt 91.6pt 137.4pt 183.2pt 229.0pt 274.8pt 320.6pt 366.4pt 412.2pt 458.0pt 503.8pt 549.6pt 595.4pt 641.2pt 687.0pt 732.8pt; background: whitesmoke; word-break: break-all; border: none; mso-border-alt: solid #CCCCCC .75pt; padding: 0in; mso-padding-alt: 7.0pt 7.0pt 7.0pt 7.0pt;"><span style="font-size: 10.0pt; font-family: Monaco; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;; color: #333333;">import sys <br />from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton) <br />from PyQt5.QtGui import QFont &#0160; &#0160; <br />&#0160;<br />class Example(QWidget):<br />&#0160;&#0160; &#0160;def __init__(self):<br />&#0160;&#0160; &#0160; &#0160; &#0160;super(Example,self).__init__()<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.initUI()<br /><br />&#0160;&#0160; &#0160;def initUI(self):<br />&#0160;&#0160; &#0160; &#0160; &#0160;QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setToolTip(&#39;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn = QPushButton(&#39;Button&#39;, self)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.setToolTip(&#39;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.resize(btn.sizeHint())<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.move(50, 50) <br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setGeometry(300, 300, 300, 200)<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setWindowTitle(&#39;Tooltips&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.show()<br />&#0160;&#0160; &#0160; &#0160; &#0160;<br />ex = Example() </span></p>
</div>
<p class="MsoNormal" style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Times New Roman&#39;; color: #333333;"><br />If you see the dialog showing, you are all set.</span></p>
<p class="MsoNormal">&#0160;</p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Lanh Hong
AUTHOR EMAIL: lanh.hong@autodesk.com
TITLE: SIGGRAPH 2019
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: siggraph-2019
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/07/siggraph-2019.html 
DATE: 07/23/2019 11:11:58 AM
-----
BODY:
<p><a class="asset-img-link" href="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0240a499a2b1200d-pi" style="display: inline;"><img alt="Siggraph2019" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0240a499a2b1200d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0240a499a2b1200d-800wi" title="Siggraph2019" /></a></p>
<p>The Forge DevTech M&amp;E team will be attending SIGGRAPH this year! You can find <a href="https://twitter.com/lanhhong">me</a>, Cheng Xi Li, <a href="https://twitter.com/kevinvandecar">Kevin Vandecar</a>, and <a href="https://twitter.com/Apprentice3d">Denis Grigor</a> at the Autodesk booth (#1211) in the Exhibition. Come to our booth to check out our demos and learn more about Forge. At the Autodesk booth, you can also find Maya, 3ds Max, and other Autodesk product teams there.</p>
<p>The Exhibition hours are Tue (7/30) 9:30 AM - 6 PM, Wed (7/31) 9:30 AM - 6 PM, and Thu (8/1) 9:30 AM – 3:30 PM. The Autodesk booth will be open during those hours. For the Forge DevTech M&amp;E team, our hours are: </p>
<ul>
<li>Tue (7/30): 11-12 PM, 2-3 PM, 5-6 PM</li>
<li>Wed (7/31): 11-12 PM, 2-3 PM, 5-6 PM</li>
<li>Thu (8/1): 11-12 PM, 2-3 PM</li>
</ul>
<p>Autodesk will also have a series of presentations hosted by our product teams called the Autodesk Vision Series. Kevin Vandecar will be <a href="https://s2019.siggraph.org/session/?sess=sess461">presenting about Forge</a> on Tue (7/30) 9:30-10 AM in Room 404A. Check out the <a href="https://area.autodesk.com/events/siggraph2019/">AREA</a> for the full schedule and more information about the other Autodesk sessions.&#0160;<br /><br /></p>
<p>I hope to see you all there!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Lanh Hong
AUTHOR EMAIL: lanh.hong@autodesk.com
TITLE: Cached Playback issues and their workarounds
STATUS: Publish
ALLOW COMMENTS: 2
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: cached-playback-issues-and-their-workarounds
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/04/cached-playback-issues-and-their-workarounds.html 
DATE: 04/25/2019 10:04:15 AM
-----
BODY:
<p><a href="http://help.autodesk.com/view/MAYAUL/2019/ENU/?guid=GUID-C9DB1549-B9C0-4FC2-B984-91B7DCE3141B">Cached playback</a> is a new feature that is available in Maya 2019, and it’s a major performance upgrade from previous releases. However, sometimes with new features, you may run into some issues while developing your plugins.</p>
<p>Our engineers are actively working on building the Cached Playback API in C++ and Python which will make it easier to deal with the common issues that plugin developers are running into, and you will see those improvements in the future.</p>
<p>Here are a couple of common problems and how to handle them.</p>
<p>&#0160;</p>
<h3>Unsupported Nodes</h3>
<p>One of the limitations to the cached playback is the list of unsupported nodes. If your scene contains any unsupported nodes, it will trigger Safe Mode which will disable caching for you and notifies you automatically. Unfortunately, this only applies to built-in nodes in Maya. For custom node plugins that are unsupported and does not interact well with cached playback, you have to do the inconvenient work by manually disabling the cache and printing your own message.</p>
<p>The workaround for this issue is to have your plugin disable caching by executing the following command when the plugin gets loaded or when plugin node gets created. Then print your own warning message.</p>
<p>&#0160;</p>
<p><code>cmds.evaluator(name=’cache’, enable=0)</code></p>
<p>&#0160;</p>
<p><span style="text-decoration: underline;">NOTE:</span> Unlike Safe Mode, this workaround does not prevent the user from enabling cached playback again. So be aware that the user can still manually turn on cached playback and possibly corrupting the entire scene.</p>
<p>&#0160;</p>
<h3>Shape Nodes Not Caching</h3>
<p>If you are developing a custom shape node, you may encounter an issue where your node isn’t caching by default when cached playback is enabled. This is an expected behavior for now.</p>
<p>The workaround requires you to use the <a href="https://help.autodesk.com/view/MAYAUL/2019/ENU/?guid=__CommandsPython_cacheEvaluator_html">cacheEvaluator MEL/Python command</a> to control caching configuration. Even though the C++/Python API is not out yet, the cacheEvaluator command encapsulates the API for cached playback. Using this command, you can configure the caching rules and add your custom shape node to support caching.</p>
<p>&#0160;</p>
<p><code>cmds.cacheEvaluator(</code><br /><code>&#0160;&#0160;&#0160;&#0160;newFiler=’nodeTypes’,</code><br /><code>&#0160;&#0160;&#0160;&#0160;newFilterParam=’types=+myCustomType’,</code><br /><code>&#0160;&#0160;&#0160;&#0160;newAction=’enableEvaluationCache’</code><br /><code>)</code></p>
<p>&#0160;</p>
<p><span style="text-decoration: underline;">NOTE:</span> This command must be re-executed every time the scene reopens, caching type changes, caching turns on and off, and caching rule resets.</p>
<p>To make it easier for your users, there is a hack that can make it more permanent so that the user does not have to configure the caching rules themselves. Have your plugin edit the caching rules using the follow code when the plugin gets loaded. This way, your plugin will support caching right out of the box.</p>
<p>&#0160;</p>
<p><code>import maya.plugin.evaluator.CacheEvaluatorManager</code><br /><code># Define a new rule to enable Evaluation Cache on a custom node type.</code><br /><code>new_rule_to_add = {</code><br /><code>&#0160;&#0160;&#0160;&#0160;&quot;newFilter&quot;: &quot;nodeTypes&quot;,</code><br /><code>&#0160;&#0160;&#0160;&#0160;&quot;newFilterParam&quot;: &quot;types=+myCustomType&quot;,</code><br /><code>&#0160;&#0160;&#0160;&#0160;&quot;newAction&quot;: &quot;enableEvaluationCache&quot;</code><br /><code>}</code><br /><code># Add this rule to the built-in caching mode.</code><br /><code>maya.plugin.evaluator.CacheEvaluatorManager.CACHE_STANDARD_MODE_EVAL.insert(0, new_rule_to_add)</code></p>
<p>&#0160;</p>
<p>The default built-in caching modes used by Maya are defined in <em>Python\Lib\site-packages\maya\plugin\evaluator\CacheEvaluatorManager.py</em>. They are:</p>
<p>&#0160;</p>
<p><code>- CACHE_STANDARD_MODE_VP2_HW</code><br /><code>- CACHE_STANDARD_MODE_VP2_SW</code><br /><code>- CACHE_STANDARD_MODE_EVAL</code></p>
<p><br />Hopefully these common issues can be resolved and improved when the Cached Playback API becomes available. For more information and details, you can check out the <a href="http://download.autodesk.com/us/company/files/MayaCachedPlayback/2019/MayaCachedPlaybackWhitePaper.html">Cached Playback whitepaper</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Lanh Hong
STATUS: Publish
ALLOW COMMENTS: 0
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: lanh-hong

UNIQUE URL: https://around-the-corner.typepad.com/adn/lanh-hong.html 
DATE: 04/25/2019 07:02:55 AM
-----
BODY:
<p><img src="https://around-the-corner.typepad.com/adn/lanh-hong.jpg" /></p>
<p>Lanh joined Autodesk as an intern in the summer of 2017 and knew she wanted to come back after graduation. Upon finishing her bachelor’s in Computer Science at the University of California, Davis in 2018, she was given the opportunity to join Autodesk as a Developer Technical Consultant working closely with the Autodesk Maya API.</p>
<p>Lanh's team provides direct support for the Autodesk Developer Network (ADN) members as well as educating the public community about our APIs. Currently, Lanh primary focus is on Maya and Autodesk Forge to support customers customizing and extending Maya’s functionalities using the C++ and Python API.</p>
<p>Lanh can be contacted <a href="mailto:lanh.hong@autodesk.com">by email</a>, but please don't expect her to provide support: if you need support for our products or APIs, please visit Autodesk's <a href="http://support.autodesk.com/">support website</a>, use our <a href="http://discussion.autodesk.com/">discussion groups</a> or post a question via your reseller or the <a href="http://adn.autodesk.com/">Autodesk Developer Network website</a>, if you're a member.</p>
<p><strong>Disclaimer</strong><br />If you need an official Autodesk company response or a contact for press-related activities please contact <a href="http://www.autodesk.com/pressroom">Autodesk Public Relations</a>.</p>
<p>The contents of this site are my own personal opinions and do not represent my employer's view in any way. In addition, my thoughts and opinions often change, and as a weblog is intended to provide a semi-permanent point-in-time snapshot you should not consider out-of-date posts to reflect my current thoughts and opinions.</p>
<p>The code provided in this blog is provided "as is" and with all faults. I (and my employer) specifically disclaim any implied warranty of merchantability or fitness for a particular use. The operation of the code provided is not warranted to be uninterrupted or error free.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Autodesk Maya 2019
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-autodesk-maya-2019
CATEGORY: Cheng Xi Li
CATEGORY: Lanh Long
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/01/how-to-build-pyqt5-for-autodesk-maya-2019.html 
DATE: 01/15/2019 01:34:41 AM
-----
BODY:
<div>
<p style="margin-bottom: 7.5pt; background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Written by Cyrille Fauvel - Autodesk Developer Network (April 2013)&#0160;<br />Updated by Lanh Hong and Chengxi Li - Autodesk Developer Network (January 2019)&#0160;<br /><br /><br />Building SIP and PyQt for Maya 2019 is a python binding to the Qt library. Because Maya uses Qt internally, you can use the PyQt modules in Maya python scripts to create custom UI. PyQt does not have the same licensing as Maya, Qt, or Python. Please consult the PyQt website for information about licensing for PyQt [<a href="http://www.riverbankcomputing.com/">http://www.riverbankcomputing.com/</a>].</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">The following are instructions for building a copy of the PyQt modules that have been known to work with Maya.<br /><br />Maya 2019 uses Qt5.6.1 which is binary compatible with the latest version of PyQt 5.11.3 / SIP - 4.19.13<br /><br />Use the Maya modified version of the Qt source code. A copy of the customized Qt 5.6.1 source is available from Autodesk&#39;s Open Source web-site [<a href="http://www.autodesk.com/lgplsource">http://www.autodesk.com/lgplsource</a>] and includes text files describing how to configure, build and install Qt for each platform supported by Maya.<br /><br /><strong>Note</strong>: With Maya 2019, there is no need to build PySide2 since it is coming by default in Maya, nor have to rebuild Qt since the main Qt tools to build PyQt are now included in the Maya distributions (i.e. qmake, moc, ...­). Also coming by default in the Maya include and lib folders are libxml, openSSL, OpenAL, python2.7, qt-5.6.1, and tbb so you do not need to rebuild any of those libraries like before unless you have a very specific need.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><strong>Important</strong>: Maya 2019 ships without the devkit, include and mkspecs folders. You can get the Maya 2019 devkit from the Maya Develop Center </span><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #006699;">[<a href="https://www.autodesk.com/developmaya">https://www.autodesk.com/developmaya</a>] </span></u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">for Windows, OSX, and Linux. Download the devkit and unzip the files into your Maya root folder. Make sure to read the instructions in the Maya Documentation to install the devkit, include and mkspecs folders properly on your system (Maya Developer Help &gt; Setting up your build environment).</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /></span><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">The scripts used in this document are posted on&#0160;<a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Download SIP and PyQt source. I downloaded <strong>&#39;sip-4.19.13&#39;</strong> and <strong>&#39;PyQt5_gpl-5.11.3&#39;</strong>. Unzip them into one folder.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">PyQt5:&#0160;</span><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #006699;"><a href="https://www.riverbankcomputing.com/software/pyqt/download5"><span style="color: #006699;">https://www.riverbankcomputing.com/software/pyqt/download5</span></a></span></u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />SIP:&#0160;</span><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #006699;"><a href="http://www.riverbankcomputing.com/software/sip/download"><span style="color: #006699;">http://www.riverbankcomputing.com/software/sip/download</span></a></span></u></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Note:</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Thanks to Temujin2887 suggested that --no-designer-plugin could be removed since Maya 2018. If you need the QtDesigner plugin, please modify pyqt script file and remove this flag. I tested to build PyQt5.11.3 for Maya 2019 without this flag and it is built without any problems.&#0160;<br /></span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 22.5pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Mac</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Download SIP and PyQt and unzip them into one local folder.</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">/Users/cyrille/Documents/_Maya2019/Scripts/</span></em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;being my local folder.&#0160;<br /><em>/Users/cyrille/Documents/_Maya2019/Scripts/sip-4.19.13<br />/Users/cyrille/Documents/_Maya2019/Scripts/PyQt5_gpl-5.11.3<br /></em><br /><br />Here are the instructions and scripts for building SIP and PyQt. <br /><br />Follow the instructions from the Maya Documentation to setup your environment (Maya Developer Help &gt; Setting up your build environment &gt; Mac OS X environment)&#0160;<br /><br />If you would like to use Xcode 7.3.1 to compile it and you are having multiple installation of Xcode. Please backup /Applications/Xcode.app and use Xcode 7.3.1 to replace it.&#0160;<br /><br />Use xcode-select to change active xcode like below:<br /><br /></span></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">sudo xcode-select&#0160;-switch&#0160;/Applications/Xcode.app/Contents/Developer</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />The <strong>qt.conf</strong> file uses&#0160;<strong>MAYA_LOCATION</strong>&#0160;and&#0160;<strong>DEVKIT_LOCATION</strong>&#0160;to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br /><br /><strong>DEVKIT_LOCATION</strong> should point to the directory where the devkit include, mkspecs, cmake directories are located.<br /><br />Modify <strong>devkit/bin/qt.conf</strong> as below:&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">qt.conf</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">[Paths]<br />Prefix=<br />Libraries=$(MAYA_LOCATION)/MacOS<br />Binaries=$(DEVKIT_LOCATION)/devkit/bin<br />Headers=$(DEVKIT_LOCATION)/include/Qt<br />ArchData=$(DEVKIT_LOCATION)<br />Data=$(DEVKIT_LOCATION)<br />HostData=$(DEVKIT_LOCATION)<br />HostBinaries=$(DEVKIT_LOCATION)/devkit/bin<br />HostLibraries=$(MAYA_LOCATION)/MacOS</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Untar the <strong>include/qt-5.6.1-include.tar.gz</strong> into <strong>/include/Qt</strong><br /><br />Untar the <strong>qt-5.6.1-mkspecs.tar.gz</strong> into <strong>/Applications/Autodesk/maya2019/mkspecs</strong>. Make sure the <strong>qconfig.pri</strong> looks like this:<br /><br /><strong><u>qconfig.pri</u></strong><br /><br /></span></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">#configuration<br />CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework <br />QT_ARCH = macosx <br />QT_EDITION = OpenSource <br />QT_CONFIG += minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework<br />#versioning <br />QT_VERSION = 5.6.1 <br />QT_MAJOR_VERSION = 5 <br />QT_MINOR_VERSION = 6 <br />QT_PATCH_VERSION = 1<br /><br />#namespaces <br />QT_LIBINFIX =<br />QT_NAMESPACE = <br />QT_NAMESPACE_MAC_CRC =</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build Prerequisite for PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">You&#39;ll need to build setuptools and enum34 before installing SIP. Please find the source on the PyPI.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">After extracting the source code, please use commands like <strong><em>sudo /Applications/Autodesk/maya2019/maya.app/Contents/bin/mayapy setup.py install </em></strong>to install them. </span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">&#0160;</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install SIP</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">sip.sh</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.13<br />export MAYA_LOCATION=/Applications/Autodesk/maya2019<br />&#0160;<br />pushd $SIPDIR<br />$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64 --sip-module PyQt5.sip<br />make<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">pyqt.sh</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export MAYA_LOCATION=/Applications/Autodesk/maya2019/Maya.app/Contents<br />export DEVKIT_LOCATION=/Applications/Autodesk/maya2019<br />export QTDIR=$DEVKIT_LOCATION/devkit<br />export QMAKESPEC=$DEVKIT_LOCATION/mkspecs/macx-clang<br />export INCDIR_QT=$DEVKIT_LOCATION/include/Qt<br />export LIBDIR_QT=$MAYA_LOCATION/MacOS<br /><br />error=0<br />if [ ! -f $QMAKESPEC/qmake.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;<br />&#0160;&#0160;error=1<br />fi<br />if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br />then<br />&#0160;&#0160;echo &quot;You need to uncompress $MAYA_LOCATION/devkit/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !&quot;<br />&#0160;&#0160;error=1<br />fi<br /># qt.conf - /Applications/Autodesk/maya2019/Maya.app/Contents/Resources<br />if [ ! -f $QTDIR/bin/qt.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;<br />&#0160;&#0160;error=1<br />fi<br />&#0160;<br />test=`grep &#39;Data=$(DEVKIT_LOCATION)&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Data=\$(DEVKIT_LOCATION)&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br />test=`grep &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=\$(DEVKIT_LOCATION)/include/Qt&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br />test=`grep &#39;Libraries=$(MAYA_LOCATION)/MacOS&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Libraries=\$(MAYA_LOCATION)/MacOS&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br />if [ $error -eq 1 ];<br />then<br />&#0160;&#0160; &#0160;exit<br />fi<br />&#0160;<br />export DYLD_LIBRARY_PATH=$MAYA_LOCATION/MacOS<br />export DYLD_FRAMEWORK_PATH=$MAYA_LOCATION/Frameworks<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.13<br />export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.11.3<br />&#0160;<br />export SIP_EXE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/bin/sip<br />export SIP_INCLUDE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/include/python2.7<br /><br />pushd $PYQTDIR<br />export PATH=$QTDIR/bin:$PATH<br /><br />echo <br />echo Environment<br />echo -----------<br />set<br />echo -----------<br />echo QT Settings<br />echo -----------<br />qmake -query<br />echo -----------<br />echo<br />$MAYA_LOCATION/bin/mayapy ./configure.py QMAKE_MAC_SDK=macosx10.11 QMAKE_RPATHDIR+=$LIBDIR_QT --sip=$SIP_EXE --sip-incdir=$SIP_INCLUDE -w --no-designer-plugin <br />make -j 8<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Note that I am compiling against Mac OS X SDK 10.11 which is same as the developer environment. If you want to compile against other versions, please modify the script (macosx10.11).<br /><br />You&#39;re done! Please check the testing paragraph at the end of the article.<br /><br /></span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 22.5pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Linux</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Download SIP and PyQt and unzip them into one local folder.</span></p>
<p style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">/home/li/Documents/</span></em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Maya2019/Scripts being my local folder.&#0160;<br /><em>/home/li/Documents/Maya2019/Scripts/sip-4.19.13&#0160;<br />/home/li/Documents/Maya2019/Scripts/PyQt5_gpl-5.11.3</em><br /><br /><br />Here are the instructions and scripts for building SIP and PyQt.<br /><br />Follow the instructions from the Maya Documentation to setup your environment (Maya Developer Help &gt; Setting up your build environment &gt; Linux environment).<br /><br />The <strong>qt.conf</strong> file uses&#0160;<strong>MAYA_LOCATION</strong>&#0160;and&#0160;<strong>DEVKIT_LOCATION</strong>&#0160;to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br /><br /><strong>DEVKIT_LOCATION</strong> should point to the directory where the devkit include, mkspecs, cmake directories are located.<br /><br />Please backup your <strong>qt.conf </strong>first, you&#39;ll need to restore it after building PyQt5. Replace <strong>­/bin/qt.conf</strong> with below:</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">qt.conf</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">[Paths] <br />Prefix= <br />Libraries=$(MAYA_LOCATION)/lib&#0160;<br />Binaries=$(DEVKIT_LOCATION)/bin<br />Headers=$(DEVKIT_LOCATION)/include/Qt <br />ArchData=$(DEVKIT_LOCATION) <br />Data=$(DEVKIT_LOCATION) <br />HostData=$(DEVKIT_LOCATION) <br />HostBinaries=$(DEVKIT_LOCATION)/bin</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Untar the <strong>/include/qt-5.6.1-include.tar.gz</strong> into <strong>/include/Qt</strong><br /><br />Untar the <strong>/mkspecs/qt-5.6.1-mkspecs.tar.gz</strong> into <strong>/mkspecs</strong><br /><br />Make qmake, moc executables from the Maya bin directory&#0160;<br /><br /></span></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">sudo chmod aog+x /usr/autodesk/maya2019/bin/moc <br />sudo chmod aog+x /usr/autodesk/maya2019/bin/qmake</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build Prerequisite for PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">You&#39;ll need to build setuptools and enum34 before installing SIP. Please find the source on the PyPI.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">After extracting the source code, please use commands like <strong><em>sudo /usr/autodesk/maya2019/bin/mayapy setup.py install </em></strong>to install them. </span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install SIP&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP. PyQt requires to build private sip module since 5.11. You&#39;ll need to add --sip-module PyQt5.sip to the configuration. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">sip.sh</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.13<br />export MAYA_LOCATION=/usr/autodesk/maya2019<br />&#0160;<br />pushd $SIPDIR<br />$MAYA_LOCATION/bin/mayapy ./configure.py --sip-module PyQt5.sip<br />make<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt. You&#39;ll need to install OpenGL headers before compiling the PyQt. You could install it by installing mesa-libGL-devel or simply install glew and glew-devel to make sure nothing is missing. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">pyqt.sh</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">#!/usr/bin/env bash<br />&#0160;<br />MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative<br />export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized<br />pushd $MAYAQTBUILD<br />&#0160;<br />export MAYA_LOCATION=/usr/autodesk/maya2019<br />export QTDIR=$MAYA_LOCATION<br />export DEVKIT_LOCATION=$MAYA_LOCATION<br />export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64<br />export INCDIR_QT=$MAYA_LOCATION/include/Qt<br />export LIBDIR_QT=$QTDIR/lib<br /><br />error=0<br />if [ ! -f $QMAKESPEC/qmake.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;<br />&#0160;&#0160;error=1<br />fi<br />if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br />then<br />&#0160;&#0160;echo &quot;You need to uncompress $MAYA_LOCATION/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !&quot;<br />&#0160;&#0160;error=1<br />fi<br /># qt.conf - $QTDIR/bin/qt.conf<br />if [ ! -f $QTDIR/bin/qt.conf ];<br />then<br />&#0160;&#0160;echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br /># The grep string should be in single quote(&#39;), if it is in double quote (&quot;&quot;), <br /># shell will expand the variable, hence the intension of the below grep will fail <br />test=`grep &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39; $QTDIR/bin/qt.conf`<br />if [ -z &quot;$test&quot; ];<br />then<br />&#0160;&#0160;echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=$(DEVKIT_LOCATION)/include/Qt&#39;&quot;<br />&#0160;&#0160;error=1<br />fi<br /><br />if [ $error -eq 1 ];<br />then<br />&#0160;&#0160; &#0160;exit<br />fi<br />&#0160;<br />export SIPDIR=$MAYAQTBUILD/sip-4.19.13<br />export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.11.3<br />&#0160;<br />pushd $PYQTDIR<br />export PATH=$QTDIR/bin:$PATH<br />$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin <br />#change 8 to the count of cores your computer</span></p>
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">make -j 8<br />sudo make install<br />popd<br /><br />popd</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">You&#39;re done! Please check the testing paragraph at the end of the article.<br /><br /><br /></span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 27.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Windows</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />Download SIP and PyQt and unzip them into one local folder.</span></p>
<p style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">D:\__sdkext\_Maya2019\Scripts</span></em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;being my local folder.&#0160;</span></p>
<p style="background: white;"><em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">D:\__sdkext\_Maya2019\Scripts\sip-4.19.13<br />D:\__sdkext\_Maya2019\Scripts\PyQt5_gpl-5.11.3</span></em><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /><br />Here are the instructions and scripts for building SIP and PyQt.<br /><br />Follow the instructions from the Maya Documentation to setup your environment (Maya Developer Help &gt; Setting up your build environment &gt; Windows environment (64-bit))<br /><br />Please backup your <strong>qt.conf</strong> first, you&#39;ll need to restore it after building PyQt5. </span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Replace <strong>/bin/qt.conf</strong> with below:</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">qt.conf</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">[Paths]<br />Prefix=$(MAYA_LOCATION)<br />Libraries=lib <br />Binaries=bin <br />Headers=include/Qt<br />Data=.<br />Plugins=qt-plugins <br />Translations=qt-translations <br />Qml2Imports=qml</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />Unzip the <strong>/include/qt-5.6.1-include.tar.gz</strong> into <strong>/include/Qt</strong>&#0160;<br /><br />Unzip the <strong>/mkspecs/qt-5.6.1-mkspecs.tar.gz</strong> into <strong>/mkspecs</strong></span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Modify the mkspecs\common\msvc-destop.conf. Find QMAKE_LIBS_QT_ENTRY and make sure is <strong><em>-lqtmain -lshell32.<br /><br /></em></strong></span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Rename the folder inside /include/Qt/qtnfc to qtnfc.disabled.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />Please run following build scripts with VS2015 x64 Native Tools&#0160;Command Prompt. If your Maya is installed in folders that requires administrator privilege (e.g. Program files), please run the command prompt as Administrator.<br /><br /></span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Environment Setup</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to setup the environment. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">setup.bat</span></u></strong></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">@echo off<br /><br />set MAYAVERSION=2019<br />set ADSKQTVERSION=5.6.1<br />set SIPVERSION=4.19.13<br />set PYQTVERSION=5.11.3<br />set MAYADRIVE=m:<br />set BUILDDRIVE=v:<br /><br />if exist %MAYADRIVE%\nul subst %MAYADRIVE% /d<br />subst %MAYADRIVE% &quot;C:\Program Files\Autodesk\Maya%MAYAVERSION%&quot;<br />set MAYA_LOCATION=%MAYADRIVE%<br /><br />set MAYAPYQTBUILD=%~dp0<br />rem Removing trailing \<br />set MAYAPYQTBUILD=%MAYAPYQTBUILD:~0,-1%<br /><br />if exist %BUILDDRIVE%\nul subst %BUILDDRIVE% /d<br />subst %BUILDDRIVE% &quot;%MAYAPYQTBUILD%&quot;<br /><br />set SIPDIR=%BUILDDRIVE%\sip-%SIPVERSION%<br />set PYQTDIR=%BUILDDRIVE%\PyQt5_gpl-%PYQTVERSION%<br />rem set ADSKQTDIR=%BUILDDRIVE%\qt-%ADSKQTVERSION%<br />set QTDIR=%MAYA_LOCATION%<br /><br />set PATH=%QTDIR%\bin;%PATH%<br />set MSVC_VERSION=2015<br />set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 14.0<br />set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%<br />set _QMAKESPEC_=win32-msvc%MSVC_VERSION%<br /><br />if [&quot;%LIBPATH%&quot;]==[&quot;&quot;] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64<br /><br />set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7<br />set LIB=%LIB%;%MAYA_LOCATION%\lib</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build Prerequisite for PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">You&#39;ll need to build setuptools and enum34 before installing SIP. Please find the source on the PyPI.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">After extracting the source code, please use commands like <strong><em>&quot;C:\Program Files\Autodesk\maya2019\bin\mayapy.exe&quot;setup.py install </em></strong>with administrator privilege to install them. </span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">&#0160;</span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install SIP</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install SIP. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">sip.bat</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">@echo off<br />set XXX=%~dp0<br />if [&quot;%MAYAPYQTBUILD%&quot;]==[&quot;&quot;] call &quot;%XXX%setup.bat&quot;<br /><br />pushd %SIPDIR%<br />rem &quot;%MAYA_LOCATION%\bin\mayapy&quot; configure-ng.py --spec %_QMAKESPEC_%<br />&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py --sip-module PyQt5.sip<br />nmake<br />nmake install<br />popd</span></p>
</div>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 18.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Build &amp; Install PyQt</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Save the script below into the same folder as the SIP and PyQt folders. Use the script to build and install PyQt. You can also find this script on our <a href="https://github.com/cyrillef/Maya-PyQt-Scripts"><span style="color: #006699;">Github</span></a>.</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">&#0160;</span></p>
<p style="background: white;"><strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">pyqt.bat</span></u></strong><u><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br /><br /></span></u></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">@echo off<br />set XXX=%~dp0<br />if [&quot;%MAYAPYQTBUILD%&quot;]==[&quot;&quot;] call &quot;%XXX%setup.bat&quot;<br /><br />set QMAKESPEC=%QTDIR%\mkspecs\%_QMAKESPEC_%<br />if not exist &quot;%QMAKESPEC%\qmake.conf&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to uncompress %MAYA_LOCATION%\mkspecs\qt-5.6.1-mkspecs.tar.gz !&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />if not exist &quot;%MAYA_LOCATION%\include\Qt\QtCore\qdir.h&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to uncompress %MAYA_LOCATION%\include\qt-5.6.1-include.tar.gz in %MAYA_LOCATION%\include\Qt !&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />findstr /L /C:&quot;Headers=include/Qt&quot; &quot;%MAYA_LOCATION%\bin\qt.conf&quot; &gt;nul 2&gt;&amp;1<br />if ERRORLEVEL 1 (<br />&#0160;&#0160; &#0160;echo &quot;You need to edit %MAYA_LOCATION%\bin\qt.conf to use &#39;Headers=include/Qt&#39;&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />findstr /L /C:&quot;-lqtmain -lshell32&quot; &quot;%QTDIR%\mkspecs\common\msvc-desktop.conf&quot; &gt;nul 2&gt;&amp;1<br />if ERRORLEVEL 1 (<br />&#0160;&#0160; &#0160;echo &quot;You need to edit %QTDIR%\mkspecs\common\msvc-desktop.conf to use &#39;QMAKE_LIBS_QT_ENTRY &#0160; &#0160; = -lqtmain -lshell32&#39;&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />if not exist &quot;%MAYA_LOCATION%\include\Qt\qtnfc.disabled&quot; (<br />&#0160;&#0160; &#0160;echo &quot;You need to rename %MAYA_LOCATION%\include\Qt\qtnfc to %MAYA_LOCATION\include\Qt\qtnfc.disabled&quot;<br />&#0160;&#0160; &#0160;goto end<br />)<br />&#0160;&#0160; &#0160;<br />pushd %PYQTDIR%<br /><br />&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py --spec %QMAKESPEC% LIBDIR_QT=&quot;%QTDIR%\lib&quot; INCDIR_QT=&quot;%QTDIR%\include\Qt&quot; MOC=&quot;%QTDIR%\bin\moc.exe&quot; --sip=&quot;%QTDIR%\Python\sip.exe&quot; --sip-incdir=&quot;%QTDIR%\Python\include&quot; -w --no-designer-plugin<br />nmake<br />nmake install<br />popd<br /><br />:end</span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />You&#39;re done! Please check the testing paragraph at the end of the article.<br /><br /><br /></span></p>
<p style="background: white; margin: 15.0pt 0in 7.5pt 0in;"><span style="font-size: 27.0pt; font-family: &#39;Georgia&#39;,serif; color: #333333;">Testing</span></p>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;">Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:<br /><br /></span></p>
<div style="border: solid #CCCCCC 1.0pt; padding: 7.0pt 7.0pt 7.0pt 7.0pt; background: whitesmoke;">
<p style="margin-bottom: 7.5pt; background: whitesmoke; word-break: break-all; border: none; padding: 0in;"><span style="font-size: 10.0pt; font-family: Monaco; color: #333333;">import sys <br />from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton) <br />from PyQt5.QtGui import QFont &#0160; &#0160; <br />&#0160;<br />class Example(QWidget):<br />&#0160;&#0160; &#0160;def __init__(self):<br />&#0160;&#0160; &#0160; &#0160; &#0160;super(Example,self).__init__()<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.initUI()<br /><br />&#0160;&#0160; &#0160;def initUI(self):<br />&#0160;&#0160; &#0160; &#0160; &#0160;QToolTip.setFont(QFont(&#39;SansSerif&#39;, 10))<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setToolTip(&#39;This is a &lt;b&gt;QWidget&lt;/b&gt; widget&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn = QPushButton(&#39;Button&#39;, self)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.setToolTip(&#39;This is a &lt;b&gt;QPushButton&lt;/b&gt; widget&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.resize(btn.sizeHint())<br />&#0160;&#0160; &#0160; &#0160; &#0160;btn.move(50, 50) <br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setGeometry(300, 300, 300, 200)<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.setWindowTitle(&#39;Tooltips&#39;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;self.show()<br />&#0160;&#0160; &#0160; &#0160; &#0160;<br />ex = Example() </span></p>
</div>
<p style="background: white;"><span style="font-size: 12.5pt; font-family: &#39;Helvetica&#39;,sans-serif; color: #333333;"><br />If you see the dialog showing, you are all set.</span></p>
<p>&#0160;</p>
<p>&#0160;</p>
<p>&#0160;</p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2019 API Updates guide
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2019-api-updates-guide
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2019/01/maya-2019-api-updates-guide.html 
DATE: 01/15/2019 12:28:03 AM
-----
BODY:
<div style="font-family: &#39;Roboto Condensed&#39;, Tauri, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, STHeiti, SimSun, &#39;Lucida Grande&#39;, &#39;Lucida Sans Unicode&#39;, &#39;Lucida Sans&#39;, &#39;Segoe UI&#39;, AppleSDGothicNeo-Medium, &#39;Malgun Gothic&#39;, Verdana, Tahoma, sans-serif; font-size: 15px; overflow-x: hidden; overflow-y: auto; margin: 0px !important; padding: 20px; background-color: #ffffff; color: #222222; line-height: 1.6; -webkit-font-smoothing: antialiased; background: #ffffff;">
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Maya 2019 release has been released now. Here is a guide based on What&#39;s New in API in Maya 2019 with some extra info.</p>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">For more details, please check our documents <a href="https://help.autodesk.com/view/MAYAUL/2019/ENU/?guid=__developer_What_s_New_What_s_Changed__What_s_New_in_API_in_Maya_2019_html">here</a>.</p>
<h2 id="build-environment:" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#build-environment:" name="build-environment:" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Build environment:</h2>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Windows and MacOSX remain unchanged. Linux is updated to CentOS/RHEL 7.x(x&gt;=2) and using gcc 6.3.1 from DTS 6.1</p>
<table style="padding: 0px; border-collapse: collapse; border-spacing: 0px; margin-bottom: 16px; background-color: #fafafa;">
<thead>
<tr>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Platform</th>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">OS</th>
<th style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px; font-weight: bold;">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Windows</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Windows 7 x64</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Visual Studio 2015 Update 3 <br style="clear: both; margin-top: 0px; margin-bottom: 0px;" />Windows SDK Version 10.0.10586.0</td>
</tr>
<tr style="background-color: #f2f2f2;">
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">Mac</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">El Capitan 10.11.6</td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;">XCode 7.3.1</td>
</tr>
<tr>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;"> Linux </strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;">CentOS/RHEL 7.x(x&gt;=2) </strong></td>
<td style="text-align: center; border: 1px solid #e6e6e6; margin: 0px; padding: 6px 13px;"><strong style="margin-top: 0px; margin-bottom: 0px;"> gcc 6.3.1(DTS 6.1)</strong></td>
</tr>
</tbody>
</table>
<p><strong>Important:</strong>&#0160;Maya sets the&#0160;<span class="code">SSL_CERT_FILE</span>&#0160;environment variable to point to the&#0160;<span class="code">cert.pem</span>&#0160;file within its embedded Python Framework if&#0160;<span class="code">SSL_CERT_FILE</span>&#0160;is unset.</p>
<p>If you need&#0160;<span class="code">SSL_CERT_FILE</span>&#0160;to remain unset because you are using other means of controlling Python&#39;s certificate usage, set&#0160;<span class="code">MAYA_DO_NOT_SET_SSL_CERT_FILE</span>&#0160;<strong>before</strong>&#0160;launching Maya:</p>
<div class="codeBlock">
<pre class="prettyprint prettyprinted">  <span class="kwd">export</span><span class="pln"> MAYA_DO_NOT_SET_SSL_CERT_FILE</span><span class="pun">=</span><span class="lit">1</span></pre>
</div>
<h2 id="devkit-updates" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#devkit-updates" name="devkit-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Devkit updates</h2>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Devkit samples of Maya 2019 use CMake to generate makefiles/solutions.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new geometryOverrideExample1/geometryOverrideExample1.cpp example plug-in, which demonstrates how to render geometry with a stock shader.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new geometryOverrideExample2/geometryOverrideExample2.cpp example plug-in, which demonstrates how render geometry with a Maya shader network.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new geometryOverrideHighPerformance/geometryOverrideHighPerformance example, which demonstrates how to use MPxGeometryOverride to render geometry with the best performance as possible.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new footPrintNode_GeometryOverride/footPrintNode_GeometryOverride.cpp example plug-in to make it fully compatible with Evaluation Caching.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new footPrintNode_GeometryOverride_AnimatedMaterial/footPrintNode_GeometryOverride_AnimatedMaterial.cpp example, which demonstrates how to draw a simple mesh like foot Print in an efficient way.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new nameFilter/NameFilter.cpp example, which demonstrates how to create custom configuration rule filters with new API</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new testMTopologyEvaluator/testMTopologyEvaluator.cpp example, which demonstrates the features of topology evaluators.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new topologyTrackingNode/topologyTrackingNode.cpp example, which demonstrates the use of the new version of the attributeAffects() relationship which can take a parameter specifying whether or not the relationship affects topology.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">A number of devkit examples have been updated to remove deprecated methods.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">An updated captureViewRenderCmd/captureViewRenderCmd.cpp devkit example now shows how to disable the output transform in Viewport 2.0 using the MRenderer::render() API.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Add a guide for cmake in readme.md</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">libOpenMayalib.a is removed in Linux.</p>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">Added a new tessellatedQuad example plug-in to the Maya devkit. The example demonstrates how to implement custom selection shader for kPatch render items in a MPxGeometryOverride. It also shows how to share geometry/index streams among several render items to avoid expensive recalculation.</p>
</li>
</ul>
<h5 id="samples-removed-from-devkit/plug-ins" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#samples-removed-from-devkit/plug-ins" name="samples-removed-from-devkit/plug-ins" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Samples removed from devkit/plug-ins</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">Cg(moved to headers)<br style="clear: both;" />blastCmd<br style="clear: both;" />curvedArrowsNode<br style="clear: both;" />D3DViewportRender<br style="clear: both;" />D3DViewportRenderer<br style="clear: both;" />DX11ViewportRenderer<br style="clear: both;" />GL<br style="clear: both;" />hwAnisotropicShader_NV20<br style="clear: both;" />hwColorPerVertexShader<br style="clear: both;" />hwDecalBumpShader_NV20<br style="clear: both;" />hwReflectBumpShader_NV20<br style="clear: both;" />hwRefractReflectShader_NV20<br style="clear: both;" />hwToonShader_NV20<br style="clear: both;" />hwUnlitShader<br style="clear: both;" />OpenGLViewportRender<br style="clear: both;" />pnTriangles<br style="clear: both;" />quadricShapes<br style="clear: both;" />selectClosestPointLocator<br style="clear: both;" />ShapeMonitor</p>
</blockquote>
<h5 id="headers-removed-from-devkit" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#headers-removed-from-devkit" name="headers-removed-from-devkit" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Headers removed from devkit</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">d3dx11effect.h<br style="clear: both;" />d3dxGlobal.h</p>
</blockquote>
<h5 id="new-headers-included" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-headers-included" name="new-headers-included" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New headers included</h5>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px;">libxml<br style="clear: both;" />Universal Front End</p>
<ul style="margin-bottom: 0px;">
<li>Universal Front End is to create a DCC-agnostic component that will allow a DCC to browse and edit data in multiple data models.<br style="clear: both;" />The initial data model targets to be supported are the Maya DG, Bifrost, and USD.</li>
</ul>
</blockquote>
<h3 id="api-updates-in-maya-2019" style="clear: both; font-size: 1.6em; font-weight: bold; margin: 1.125em 0px 0.75em;"><a href="#api-updates-in-maya-2019" name="api-updates-in-maya-2019" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>API Updates in Maya 2019</h3>
<h3 id="rendering-and-lighting" style="clear: both; font-size: 1.6em; font-weight: bold; margin: 1.125em 0px 0.75em;"><a href="#rendering-and-lighting" name="rendering-and-lighting" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Rendering and Lighting</h3>
<h5 id="mrenderitem-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mrenderitem-class-updates" name="mrenderitem-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MRenderItem class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">When a 3D model view activates Isolate Select for components, Viewport 2.0 creates and maintains necessary render items to represent the drawing of the isolate selected components specifically for that view. These render items are copies of their original items and so they have the same properties including name, type, primitive type, and draw mode. However, their shading components are filtered from the view selected set of that view.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">New methods have been added to allow custom render items created in a MPxGeometryOverride implementation to have their copies created for the drawing of isolate selected components. They also provide access of the view-selected shading components so that the MPxGeometryOverride implementation can fill in geometries properly.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">These new methods include:</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MRenderItem::shadingComponent()<br style="clear: both;" />MRenderItem::setAllowIsolateSelectCopy()<br style="clear: both;" />MRenderItem::allowIsolateSelectCopy()<br style="clear: both;" />MRenderItem::isIsolateSelectCopy()</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">The apiMeshShape example plug-in has been updated to use these new methods, and the Python API also includes these changes.</p>
<h5 id="mselectioninfo-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mselectioninfo-class-updates" name="mselectioninfo-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MSelectionInfo class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">The mask argument has changed from a non-const reference to const reference for the following methods:</p>
<ul>
<li>MSelectionInfo::selectable()</li>
<li>MSelectionInfo::selectableComponent()</li>
</ul>
<h5 id="mpxgeometryoverride-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mpxgeometryoverride-class-updates" name="mpxgeometryoverride-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MPxGeometryOverride class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Updates to the both C++/Python MPxGeometryOverride class include the following new methods:</p>
<ul>
<li>MPxGeometryOverride::requiresGeometryUpdate(), which determines if other MPxGeometryOverride methods get called for the associated DAG object during the draw preparation phase.</li>
<li>MPxGeometryOverride::requiresUpdateRenderItems(), which gets called when an instance of a DAG object changes to determine whether MPxGeometryOverride::updateRenderItems() needs to be called.</li>
<li>MPxGeometryOverride::supportsEvaluationManagerParallelUpdate(), which gets called to determine if the scene is supported by the Evaluation Manager Parallel Update.</li>
<li>MPxGeometryOverride::supportsVP2CustomCaching(), which gets called during evaluation to determine if VP2 Custom Caching is supported.</li>
</ul>
<h5 id="mpxdrawoverride-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mpxdrawoverride-class-updates" name="mpxdrawoverride-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MPxDrawOverride class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">A new MPxDrawOverride::pointSnappingActive() method allows a draw override to query whether snapping to points is active.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">A new MPxDrawOverride::userSelect() interface. It allows for adding a list of DAG paths/components and world space hit points.</p>
<h5 id="mshadermanager-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mshadermanager-class-updates" name="mshadermanager-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MShaderManager class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">A new MShaderManager::getArraySize method. It returns array size of the given parameter.</p>
<h5 id="mrenderitem-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mrenderitem-updates" name="mrenderitem-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MRenderItem Updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">You can now control consolidation per-object to MPxGeometryOverride. The following new methods have been added to let you control whether render items participate in consolidation:</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MRenderItem::setWantConsolidation()<br style="clear: both;" />MRenderItem::wantConsolidation()</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">This change also deprecates the following methods:</p>
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MRenderItem::setWantSubSceneConsolidation()<br style="clear: both;" />MRenderItem::wantSubSceneConsolidation()</p>
</blockquote>
<p style="margin: 1em 0px; word-wrap: break-word;">The footPrintNode_SubSceneOverride example plug-in has been updated to use these new methods.</p>
<h5 id="new-mcolormanagementnodes-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-mcolormanagementnodes-class-updates" name="new-mcolormanagementnodes-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New MColorManagementNodes class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">The MColorManagementNodes C++ API class has been added that allows you to manipulate color managed nodes; for example: you can color manage one or all input nodes, and query whether an object is color manageable or color managed. A colorManageAllNodes flag has also been added to the colorManagementPrefs MEL/Python command.</p>
<h2 id="evaluation-and-performance" style="clear: both; font-size: 1.8em; font-weight: bold; margin: 1.275em 0px 0.85em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #e6e6e6;"><a href="#evaluation-and-performance" name="evaluation-and-performance" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Evaluation and Performance</h2>
<h5 id="new-class-mpxtopologyevaluator" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-class-mpxtopologyevaluator" name="new-class-mpxtopologyevaluator" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New class MPxTopologyEvaluator</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">The new class allows topology override of evaluation graph. This makes possible to have total control over granularity, leverage already existing scheduling constraints and scheduling graph. Supports partial evaluation for minimal evaluation of cluster content. Finally, allows better resource utilization since execution of cluster content doesn’t have to wait for entire upstream to start and downstream can start as soon as dependencies are ready (sort of transparent clusters, but much more configurable and with no constraints on granularity).</p>
<h5 id="mfndependencynode-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mfndependencynode-class-updates" name="mfndependencynode-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MFnDependencyNode class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">New methods added to the MFnDependencyNode class let you set and manage which nodes have permission to be scheduled for evaluation by the evaluation graph. Nodes that do not have permission for evaluation can be created and destroyed without invalidating the evaluation graph.The Python API also includes these new methods.</p>
<ul>
<li>MFnDependencyNode::setAllowedToAnimate(), sets whether or not a node has permission to be added to the evaluation graph for scheduling during playback or manipulation. Nodes without permission, cannot be added to the evaluation graph.</li>
<li>MFnDependencyNode::allowedToAnimate() indicates whether or not the node has permission for evaluation based on MFnDependencyNode::setAllowedToAnimate().</li>
</ul>
<h5 id="mgrapheditorinfo-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mgrapheditorinfo-class-updates" name="mgrapheditorinfo-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MGraphEditorInfo class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Added the following new methods to the MGraphEditorInfo class:</p>
<ul>
<li>MGraphEditorInfo::isStackedViewportMode(), which returns whether or not the Graph Editor is in Stacked View mode.</li>
<li>MGraphEditorInfo::isNormalizedViewportMode(), which returns whether or not the Graph Editor is in Normalized View mode.</li>
</ul>
<h5 id="mprofiler-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mprofiler-class-updates" name="mprofiler-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MProfiler class updates</h5>
<ul>
<li>New versions of the MProfiler::addCategory() and MProfiler::getAllCategories() methods now use a categoryInfo parameter in addition to the previous accepted parameters. Previous versions of these methods have been deprecated.</li>
<li>A new MProfiler::getCategoryInfo() method returns the profiling category description.</li>
</ul>
<h5 id="mpxnode-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mpxnode-class-updates" name="mpxnode-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MPxNode class updates</h5>
<ul>
<li>Add two methods for controlling topology dirtying
<blockquote>
<p style="margin: 1em 0px; word-wrap: break-word; margin-top: 0px; margin-bottom: 0px;">MPxNode::isTrackingTopology<br style="clear: both;" />MPxNode::attributeAffects</p>
</blockquote>
</li>
</ul>
<h5 id="new-mpxcacheconfigrulefilter-and-mcacheconfigruleregistry-classes" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-mpxcacheconfigrulefilter-and-mcacheconfigruleregistry-classes" name="new-mpxcacheconfigrulefilter-and-mcacheconfigruleregistry-classes" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New MPxCacheConfigRuleFilter and MCacheConfigRuleRegistry classes</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">A new MPxCacheConfigRuleFilter class lets you define custom configuration rule filters for background evaluation caching. The new class includes the following methods:</p>
<ul>
<li>MPxCacheConfigRuleFilter::preRulesExecution(), which is called when the cache configuration rule application starts.</li>
<li>MPxCacheConfigRuleFilter::postRulesExecution(), which is called when the cache configuration rule application stops.</li>
<li>MPxCacheConfigRuleFilter::isMatch(), which gets called for each evaluation node when filter rules are applied for the cache configuration.</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">A new MCacheConfigRuleRegistry class includes a static method for registering and deregistering MPxCacheConfigRuleFilter custom classes.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">A new nameFilter/NameFilter.cpp example demonstrates how to create custom configuration rule filters.</p>
<h3 id="general-and-modeling" style="clear: both; font-size: 1.6em; font-weight: bold; margin: 1.125em 0px 0.75em;"><a href="#general-and-modeling" name="general-and-modeling" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>General and Modeling</h3>
<h5 id="muidrawmanager-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#muidrawmanager-class-updates" name="muidrawmanager-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MUIDrawManager class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Updates to the MUIDrawManager include the following:</p>
<ul>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New cylinder and capsule primitive extension methods:</p>
<ul>
<li>MUIDrawManager::cylinder()</li>
<li>MUIDrawManager::capsule()</li>
</ul>
</li>
<li>
<p style="margin: 1em 0px; word-wrap: break-word;">New parametric primitive methods now let you define the number of subdivisions for primitives:</p>
<ul>
<li>MUIDrawManager::sphere()</li>
<li>MUIDrawManager::circle()</li>
<li>MUIDrawManager::circle2d()</li>
<li>MUIDrawManager::arc()</li>
<li>MUIDrawManager::arc2d()</li>
<li>MUIDrawManager::cone()</li>
</ul>
</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">The Python API also includes these methods. Updates to the uiDrawManager example plug-in in the Maya devkit include the new methods.</p>
<h5 id="new-mcameramessage-class" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#new-mcameramessage-class" name="new-mcameramessage-class" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>New MCameraMessage class</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">A new MCameraMessage class lets you register callbacks for interactive camera manipulation messages. To remove a callback use MMessage::removeCallback(). Note that all callbacks registered by a plug-in must be removed by that plug-in when it is unloaded. Failure to do so will result in a fatal error. The Python API has also been updated with these new methods.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">A new cameraMessageCmd/cameraMessageCmd.cpp plug-in example demonstrates how to use each of the new camera manipulation callbacks.</p>
<h5 id="mfnmesh-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mfnmesh-class-updates" name="mfnmesh-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MFnMesh class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">A new version of the MFnMesh::create() method now stores vertices in doubles and allows edge connections.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">The OpenMaya.MFnMesh.create () method in the Python API has also been updated with this improvement.</p>
<h5 id="mfn-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mfn-class-updates" name="mfn-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MFn class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Added new kPinToGeometryUV, kPinToGeometryProx and kUfeProxyTransform enums.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">Note, kPinToGeometryUV and kPinToGeometryProx are fater kClosestPointOnMesh. If you are using numbers directly instead of enum, it may cause problem.</p>
<h5 id="mpolymessage-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mpolymessage-class-updates" name="mpolymessage-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MPolyMessage class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Added the MPolyMessage::addColorSetChangedCallback() method to register a callback when ColorSetChanged is modified.</p>
<p style="margin: 1em 0px; word-wrap: break-word;">Added the following new enums to specify the type of color set change message:</p>
<ul>
<li>kColorSetAdded when a new color set gets added.</li>
<li>kColorSetDeleted when a color set gets deleted.</li>
<li>kCurrentColorSetChanged when the current color set gets changed.</li>
</ul>
<p style="margin: 1em 0px; word-wrap: break-word;">The Python API has also been updated to include these changes.</p>
<h5 id="mglobal-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mglobal-class-updates" name="mglobal-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MGlobal class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Updates to the MGlobal class include the addition of the MGlobal::executeTaskOnIdle() method. Use this method to execute a customized task to execute on the next idle event. This is a thread safe way to schedule a task for the main thread to execute. <strong>This method is not available in Python.</strong></p>
<p style="margin: 1em 0px; word-wrap: break-word;">Add a new method MGlobal::customVersion.</p>
<h5 id="mmessage-class-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#mmessage-class-updates" name="mmessage-class-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>MMessage class updates</h5>
<p style="margin-top: 0px; margin: 1em 0px; word-wrap: break-word;">Added the MMessage::stopRegisteringCallableScript() method. Use this method to stop the MMessage object from being passed.</p>
<h5 id="other-api-updates" style="clear: both; font-size: 1.2em; font-weight: bold; margin: 0.855em 0px 0.57em;"><a href="#other-api-updates" name="other-api-updates" style="text-decoration: none; vertical-align: baseline; color: #3269a0;"></a>Other API updates</h5>
<ul>
<li>Added a new kAfterCreateReference enum to the MSceneMessage class for Python. The enum provides support for MSceneMessage.addReferenceCallback().</li>
<li>Added a new MColorPickerUtilities class, which lets you create a color picker that can grab colors from third-party plugins.</li>
<li>Added a new callback MPxIkSolverNode::isAttributeCreatedBySolver. It returns whether a certain attribute on the ikHandle was created by the solver (and affecting the result of the solve).</li>
<li>Added a new class MArrayIteratorTemplate. It enables iterators for Maya array classes.</li>
<li>Added a new method MFnAnimCurve::insertKey</li>
<li>The MnCloth::setAddCrossLinks() method now uses a boolean instead of a float value.</li>
<li>doubleBuffered is renamed to softwareStaged in MVertexBuffer and MIndexBuffer. When using MVertexBuffer/MIndexBuffer in conjunction with Evaluation Manager Parallel Update in MPxGeometryOverride the buffer used must be software staged.</li>
<li>In Maya 2019, we changed the deprecation mechanism for several methods. These methods have already been marked as being obsolete in the documentation for several years but now they will generate warnings at the compilation time. The documentation usually explains which alternate method to use. In the meantime the warning/error can be disabled by using the _OPENMAYA_DEPRECATION_PUSH_AND_DISABLE_WARNING and _OPENMAYA_POP_WARNING macros.</li>
</ul>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Miguel Gao
EMAIL: mgtools2@gmail.com
IP: 14.200.67.60
URL: http://mgland.com
DATE: 01/22/2019 05:36:15 AM
Thanks for the information!
I tried to build some native .bundle maya plugins, but all the .xcodeproj files are removed from the devkit/plug-ins?

The problem is, in Maya2018, the .xcodeproj file defines some link flags like:
-Wl,-exported_symbol,__Z16initializePluginN8Autodesk4Maya16OpenMaya201800007MObjectE
-Wl,-exported_symbol,__Z18uninitializePluginN8Autodesk4Maya16OpenMaya201800007MObjectE
How am I supposed to know what these values are for maya2019 plugins?
Thanks
-----
COMMENT:
AUTHOR: Miguel Gao
EMAIL: mgtools2@gmail.com
IP: 14.200.67.60
URL: http://mgland.com
DATE: 01/22/2019 02:59:46 PM
Sorry, I know it is supposed to use CMakeList.
But there might be some projects already based on xcodeproj directly, so for whoever need the symbol names for Maya2019:
__Z16initializePluginN8Autodesk4Maya16OpenMaya201900007MObjectE
__Z18uninitializePluginN8Autodesk4Maya16OpenMaya201900007MObjectE
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Cheng Xi Li
STATUS: Publish
ALLOW COMMENTS: 0
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: cheng-xi-li

UNIQUE URL: https://around-the-corner.typepad.com/adn/cheng-xi-li.html 
DATE: 01/04/2019 04:24:01 AM
-----
BODY:
<p><img src="https://around-the-corner.typepad.com/adn/cheng-xi-li.jpg" /></p>
<p>Li can be contacted <a href="mailto:cheng.xi.li@autodesk.com">by email</a>, but please don't expect her to provide support: if you need support for our products or APIs, please visit Autodesk's <a href="http://support.autodesk.com/">support website</a>, use our <a href="http://discussion.autodesk.com/">discussion groups</a> or post a question via your reseller or the <a href="http://adn.autodesk.com/">Autodesk Developer Network website</a>, if you're a member.</p>
<p><strong>Disclaimer</strong><br />If you need an official Autodesk company response or a contact for press-related activities please contact <a href="http://www.autodesk.com/pressroom">Autodesk Public Relations</a>.</p>
<p>The contents of this site are my own personal opinions and do not represent my employer's view in any way. In addition, my thoughts and opinions often change, and as a weblog is intended to provide a semi-permanent point-in-time snapshot you should not consider out-of-date posts to reflect my current thoughts and opinions.</p>
<p>The code provided in this blog is provided "as is" and with all faults. I (and my employer) specifically disclaim any implied warranty of merchantability or fitness for a particular use. The operation of the code provided is not warranted to be uninterrupted or error free.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2018 Update 5 and new DevKit are available now
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2018-update-5-and-new-devkit-are-available-now
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2018/11/maya-2018-update-5-and-new-devkit-are-available-now.html 
DATE: 11/29/2018 05:24:21 PM
-----
BODY:
<div class="entry-content">
<div class="entry-body">Autodesk just released Maya 2018 update 5 and new DevKit. You can find them at&#0160;<a href="https://www.autodesk.com/developer-network/platform-technologies/maya">Maya Developer Center.</a>
<p>It fixed the<a href="https://around-the-corner.typepad.com/adn/2018/08/maya-2018-update-4-and-new-devkit-are-available-now-.html"> Mac devkit issue</a> in previous devkit and removed a test case added accidentally (MAYA91432) . If your Update 4 devkit is working right now, you don&#39;t have to download it again.</p>
</div>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2018 Update 4 and new DevKit are available now 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2018-update-4-and-new-devkit-are-available-now-
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2018/08/maya-2018-update-4-and-new-devkit-are-available-now-.html 
DATE: 08/14/2018 06:24:44 PM
-----
BODY:
<p>Autodesk just released Maya 2018 update 4 and new DevKit. You can find them at <a href="https://www.autodesk.com/developer-network/platform-technologies/maya">Maya Developer Center.</a></p>
<p>On Mac, lib files that required for building devkit plugins and standalone applications are located in Maya.app folder. This is incorrect and will be addressed in a future release.</p>
<p>To workaround this, you can either:</p>
<p>1) Create a folder named &quot;lib&quot; under devkitBase and copy lib files from Maya.app/Contents/MacOS and Maya.app/Contents/Resources to the newly created lib folder</p>
<p>Or</p>
<p>2) Update linker paths (DEVKIT_LIB variable) in devkitBase/devkit/plug-ins/buildconfig to point to the folders inside Maya.app</p>
<p>&#0160;</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
DevKit
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Workaround for Maya 2018 WPF sample not showing again after closing it
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: workaround-for-maya-2018-wpf-sample-not-showing-again-after-closing-it
CATEGORY: .Net
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2018/06/workaround-for-maya-2018-wpf-sample-not-showing-again-after-closing-it.html 
DATE: 06/28/2018 11:57:58 PM
-----
BODY:
<p>Having trouble with WPF sample in 2018 .net devkit?&#0160; It is reported that dagexplorer command won&#39;t reopen a closed window in Maya 2018. This could be fixed with following modification:</p>
<p>&#0160;</p>
<p>Replace</p>
<p>&#0160;</p>
<p><em><strong>MGlobal.executeCommand($@&quot;catch (`showWindow &quot;&quot;{hostTitle}&quot;&quot;`);&quot;);</strong></em></p>
<p>&#0160;</p>
<p>with</p>
<p><em><strong>&#0160;</strong></em></p>
<p><em><strong>MGlobal.executeCommand($@&quot;catch (`workspaceControl -e -visible true &quot;&quot;{hostTitle}&quot;&quot;`);&quot;);</strong></em><br clear="none" /><br clear="none" /></p>
<p>To make the window showing again.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Compiler versions for Maya 2018
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: compiler-versions-for-maya-2018
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2018/02/compiler-versions-for-maya-2018.html 
DATE: 02/02/2018 05:32:49 PM
-----
BODY:
<p>This is an update on previous posts, for older versions, they can be found here: <a href="http://around-the-corner.typepad.com/adn/2016/08/compiler-versions-for-maya-2017.html">Maya 2017</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2016/06/compiler-versions-for-maya-2016-extension-2.html">Maya 2016 Extension 2</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2015/04/maya-compiler-versions-update.html">Maya 2016</a>,<a href="http://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html">Maya 2015</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html">Maya 2014</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html">Maya 2008 to 2013</a>.&#0160;<br /> Basically, the windows build environment of Maya 2018 was upgraded to <a class="zem_slink" href="http://en.wikipedia.org/wiki/Microsoft_Visual_Studio" rel="wikipedia noopener noreferrer" target="_blank" title="Microsoft Visual Studio">Visual Studio 2015</a>. The details are listed as follow with links.</p>
<p><strong>Maya 2018</strong></p>
<p>Windows 64bit: Win7x64 SP1</p>
<ul>
<li>Visual Studio 2015 Update 3(14.0.25431.01),&#0160;WindowsSDKVersion=10.0.10586.0&#0160;</li>
<li>.Net framework 4.5.1</li>
<li>Intel Composer XE 2016 Update 3 (16.0.3.207)</li>
</ul>
<p>Linux 64bit: RHEL/CentOS 6.5</p>
<ul>
<li>gcc 4.8.2(DTS 2.1)</li>
<li>Intel Composer XE 2015 Update 1 (15.0.1.133)</li>
</ul>
<p>Mac 64bit: El Capitan 10.11.6</p>
<ul>
<li>Xcode 7.3.1, 10.11.sdk</li>
<li>Intel Composer XE 2016 Update 3 (16.0.3.170)</li>
</ul>
<p><strong>Extensions (all platforms)</strong></p>
<ul>
<li>Embedded Python 2.7.11 - Internal to Maya</li>
<li>Embedded PySide 2 version</li>
<li><a href="http://www.autodesk.com/lgplsource">Qt 5.6.1 modified</a></li>
<li>Boost 1.61<br /> <a href="http://threadingbuildingblocks.org/download#stable-releases">TBB 4.4 update 6</a></li>
<li>DirectX SDK June 2010 (DX11)</li>
<li><a href="http://www.openexr.com/downloads.html">OpenEXR 2.2</a></li>
<li><a href="https://github.com/PixarAnimationStudios/OpenSubdiv">Open SubDiv 3.1.0</a></li>
<li>Alembic 1.5.8</li>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Workaround for MRenderItem::setMatrix may not working with transform matrix in Maya 2018 Update 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: workaround-for-mrenderitemsetmatrix-may-not-working-with-transform-matrix-in-maya-2018-update-2
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2018/01/workaround-for-mrenderitemsetmatrix-may-not-working-with-transform-matrix-in-maya-2018-update-2.html 
DATE: 01/09/2018 09:36:49 PM
-----
BODY:
<p>I&#39;ve received a report of&#0160;MRenderItem::setMatrix is not working with transform matrix recently.&#0160; After doing some test, it seems to be only occurring with Maya 2018 Update 2 using OpenGL mode.<br /> <br /> Our engineers found it is an issue in code and will fix it in the future releases. Some tests in VP2 are being done in the wrong order, resulting in stale matrix data being used to render the item. We can mitigate this issue by manually querying the MDrawContext world matrix before calling MRenderItem::draw(), that will cause the stale data to be properly purged.<br /> <br /> e.g.</p>
<pre id="UHEACATBjKF">//Workaround<br />auto mat = context.getMatrix(MFrameContext::kWorldMtx, &amp;status);<br /><br /> self.drawRenderItem(context, *renderItem);</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Setting up Mac OS X developing environment with VSCode and makefile
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: setting-up-mac-os-x-developing-environment-with-vscode-and-makefile
CATEGORY: Cheng Xi Li
CATEGORY: Mac
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/09/setting-up-mac-os-x-developing-environment-with-vscode-and-makefile.html 
DATE: 09/05/2017 06:23:16 PM
-----
BODY:
<p>I have recently refreshed my working laptop to a 2016 MBP. My previous Dell is a great laptop except it is way too big and heavy to carry around with me and I need OS X environment for supporting sometimes, so I decided to make my Mac a daily working machine and my previous laptop became a supplemental machine for windows and linux platform.&#0160;<br /> <br /> The new MBP comes with OS X 10.12 Sierra. When I tried to start Xcode 6.1.1 first time, it gave me this dialog.</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c91d3986970b-pi" style="display: inline;"><img alt="Vscode1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c91d3986970b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c91d3986970b-800wi" title="Vscode1" /></a></div>
<p><br /> <br /> Although I could use Xcode 8.3 with OS X SDK 10.9, but I am not very familiar with Xcode&#39;s building configuration and I can&#39;t find a good way to switch between clang 8.0 and clang 6.0. It&#39;s not critical for just trial and debug for myself most of the time, but it is still not same as recommended environment. I tried xcode-select with specified platform SDK and it works well when building Maya debug builds on my Sierra Mac, so I&#39;ve decided to try another way in the document - the makefile approach. It will create an output bundle directly at the sample&#39;s directory with make and clean the outputs with make clean. Since I&#39;ve been using Visual Studio for almost two decades, I&#39;d like to keep using it on the Mac.&#0160;<br /> <br /> Microsoft has release VSCode on Multiplatform, it is quite different from the regular Visual Studio on Windows. You&#39;ll have to install extensions and write configurations for launching, debugging and building in json format. I did some research and found that I&#39;d be better to stick with the makefile comes with SDK and make some modifications. Here are the steps for setting up a simple Maya development environment on Mac in an alternative way.<br /> <br /> VSCode shipped with json support only and you&#39;ll need to install C++ extension to make intellisense and other stuff working with C++.&#0160;<br /> <br /> The first comes with build. Unlike regular VS on windows using build configure, &#0160;VSCode uses tasks.json for setting up build targets. To make it simple, I use it to set up environment variables for building multiple Maya version and call make to build with makefile. I&#39;ll do it later when the makefile has been done.<br /> <br /> Maya&#39;s makefile comes with two parts, general building configuration inside devkit/plug-ins folder and makefile inside each &#0160;plugin folder. The makefile refers to the buildrules and buildconfig in the parent folder, let&#39;s begin with buildrules first.</p>
<pre id="eHZACAxz90Y">#-<br /># ==========================================================================<br /># Copyright (c) 2011 Autodesk, Inc.<br /># All rights reserved.<br /># <br /># These coded instructions, statements, and computer programs contain<br /># unpublished proprietary information written by Autodesk, Inc., and are<br /># protected by Federal copyright law. They may not be disclosed to third<br /># parties or copied or duplicated in any form, in whole or in part, without<br /># the prior written consent of Autodesk, Inc.<br /># ==========================================================================<br />#+<br /><br />INCL_BUILDRULES := 1<br /><br />#Add directories variables<br />OBJBASEDIR := ./objects<br />OBJDIR := ./objects/$(mayaVersion)<br />OUTPUTBASEDIR := ./output<br />OUTPUTDIR := ./output/$(mayaVersion)<br /><br /><br />include $(TOP)/buildconfig<br /><br />##################<br /># Generic Rules &#0160;#<br />##################<br /><br />.PHONY &#0160; &#0160;: all plugins depend clean Clean<br />.DEFAULT &#0160;: all<br /><br />all : plugins<br /><br /># Pre-built binaries of some plugins are shipped with Maya. We don&#39;t<br /># want to build them by default with all the others because then there<br /># would be two versions of the same plugin and unless you know exactly<br /># what you are doing the wrong one might get loaded.<br />#<br /># The top-level makefile of the devkit won&#39;t recurse by default into<br /># the sub-directory of prebuilt plugins. So if you want to build one<br /># of these you must do so explicitly by invoking make from the given<br /># sub-directory or invoke the prebuiltPlugins rules from the top-level<br /># makefile.<br />.PHONY &#0160;: prebuiltPlugins<br /><br /># The top-level makefile of the devkit won&#39;t recurse by default into<br /># the sub-directory of plugins depending on third-party components. So<br /># if you want to build one of these you must do so explicitly by<br /># invoking make from the given sub-directory or invoke the<br /># thirdPartyPlugins rules from the top-level makefile. For example:<br />.PHONY &#0160; &#0160;: thirdPartyPlugins<br /><br /><br />##################<br /># Generic Rules &#0160;#<br />##################<br /><br />#Creating directories<br />directories: $(OBJDIR) $(OUTPUTDIR)&#0160; &#0160; &#0160; &#0160;&#0160;<br /><br />$(OBJDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OBJDIR)<br /><br />$(OUTPUTDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OUTPUTDIR)<br /><br />#Change object output directory<br />$(OBJDIR)/%.o : %.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />$(OBJDIR)/%.o : %.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@<br /><br />%.o : &#0160; &#0160;%.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />%.o : &#0160; &#0160;%.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@<br /><br />%.i : &#0160; &#0160;%.cpp<br />&#0160;&#0160; &#0160;$(CXX) -E $(INCLUDES) $(C++FLAGS) $*.cpp &gt; $*.i</pre>
<p><br /> The original makefile will generate the output bundle at the same directory where makefile is, it is kind of messy in my opinion and not suitable for building for multiple platforms. Adding directories becomes my first priority.</p>
<pre id="eHZACAwWOeG">#Add directories variables&#0160;<br />OBJBASEDIR := ./objects<br />OBJDIR := ./objects/$(mayaVersion)<br />OUTPUTBASEDIR := ./output<br />OUTPUTDIR := ./output/$(mayaVersion)</pre>
<p>I&#39;ll create two directories for object and output files. For different version of Maya I&#39;ll also create a subfolder inside of the each directory according to target version.<br /> <br /> Then, I&#39;ll add a target for creating directories:</p>
<pre id="eHZACA5aHGt">#Creating directories<br />directories: $(OBJDIR) $(OUTPUTDIR)&#0160; &#0160; &#0160; &#0160;&#0160;<br /><br />$(OBJDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OBJDIR)<br /><br />$(OUTPUTDIR): <br />&#0160;&#0160; &#0160;mkdir -p $(OUTPUTDIR)</pre>
<p>The target is called directories and it has to targets, object director and output directory. -p will let mkdir create directories recursively. Next is updating object targets.</p>
<pre id="eHZACA6W1OW">#Change object output directory<br />$(OBJDIR)/%.o : %.c<br />&#0160;&#0160; &#0160;$(CC) -c $(INCLUDES) $(CFLAGS) $&lt; -o $@<br /><br />$(OBJDIR)/%.o : %.cpp<br />&#0160;&#0160; &#0160;$(CXX) -c $(INCLUDES) $(C++FLAGS) $&lt; -o $@</pre>
<p>Adding object target&#39;s directory in front of object output will put them in the directory I created earlier.<br /> <br /> Buildrules is done now, the next will be buildconfig. Here is the full buildconfig</p>
<pre id="eHZACAiCVOR">#-<br /># ==========================================================================<br /># Copyright 2012 Autodesk, Inc. All rights reserved.<br />#<br /># Use of this software is subject to the terms of the Autodesk<br /># license agreement provided at the time of installation or download,<br /># or which otherwise accompanies this software in either electronic<br /># or hard copy form.<br /># ==========================================================================<br />#+<br /><br /># If you have Maya installed in a non-standard location, uncomment the<br /># following line and set the path to the &#39;Maya.app/Contents&#39; directory of<br /># your Maya installation:<br /># MAYA_LOCATION = /my/path/to/Maya.app/Contents<br /># export MAYA_LOCATION<br /><br /># Make sure these are in your path.<br />CC &#0160; &#0160; &#0160; &#0160; &#0160;= clang<br />CXX &#0160; &#0160; &#0160; &#0160; = clang++<br />LD &#0160; &#0160; &#0160; &#0160; &#0160;= clang++<br /><br /># By default, we will try to build a universal binary to match the same<br /># architectures as the installed Maya binary. If you only want one specific<br /># architecture (e.g i386 or x86_64) then set it below.<br />PREFERRED_ARCHITECTURE &#0160; &#0160;=<br /><br />ifneq ($(MAKECMDGOALS), clean)<br />&#0160;&#0160; &#0160;#-------------------------------------------------------------<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# &#0160; &#0160; &#0160; Try to find Maya<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;#-------------------------------------------------------------<br />&#0160;&#0160; &#0160;ifeq ($(MAYA_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160;MAYA_LOCATION = /Applications/Autodesk/maya$(mayaVersion)/Maya.app/Contents<br />&#0160;&#0160; &#0160; &#0160; &#0160;# downloaded devkit can be located outside of Maya install tree<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifeq ($(DEVKIT_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(MAYA_LOCATION)/../../devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_LOCATION = $(MAYA_LOCATION)/../../include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(DEVKIT_LOCATION)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(DEVKIT)/include<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;ifeq ($(wildcard $(DEVKIT_INCLUDE)/maya/MTypes.h),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error Cannot find Maya ${mayaVersion}. Please uncomment the \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;MAYA_LOCATION setting near the top of &#39;buildconfig&#39; and set \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;it to point to the Maya.app/Contents directory of your \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Maya ${mayaVersion} installation)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifneq ($(DEVKIT_LOCATION),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(DEVKIT_LOCATION)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(DEVKIT)/include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else ifneq ($(wildcard $(MAYA_LOCATION)/../../include/maya/MTypes.h),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT = $(MAYA_LOCATION)/../../devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;DEVKIT_INCLUDE = $(MAYA_LOCATION)/../../include<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error The MAYA_LOCATION environment variable does not point to the \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;directory where Maya is installed)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;# Make sure that MAYA_LOCATION is pointing at the correct version of<br />&#0160;&#0160; &#0160; &#0160; &#0160;# Maya.<br />&#0160;&#0160; &#0160; &#0160; &#0160;#<br />&#0160;&#0160; &#0160; &#0160; &#0160;# Matching subversions (e.g. 2013.5) is not possible without a lookup<br />&#0160;&#0160; &#0160; &#0160; &#0160;# table, so if this is a sub-version then just make sure that we&#39;ve<br />&#0160;&#0160; &#0160; &#0160; &#0160;# got the right base version. Not perfect, but better than nothing.<br />&#0160;&#0160; &#0160; &#0160; &#0160;baseMayaVersion := $(shell echo $(mayaVersion) | sed &#39;s/\..*//&#39;)<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;apiVersion := $(shell grep &#39;define.*MAYA_API_VERSION&#39; $(DEVKIT_INCLUDE)/maya/MTypes.h | sed &#39;s/^[^0-9]*\([0-9]...\).*$$/\1/&#39;)<br /><br />&#0160;&#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160;DEVKIT_ALEMBIC_INCDIR = $(DEVKIT)/Alembic/include<br />&#0160;&#0160; &#0160;DEVKIT_ALEMBIC_LIBDIR = $(DEVKIT)/Alembic/lib<br /><br />&#0160;&#0160; &#0160;# Determine the architectures to build.<br />&#0160;&#0160; &#0160;ARCH_FLAGS =<br />&#0160;&#0160; &#0160;MAYABIN = ${MAYA_LOCATION}/bin/maya<br />&#0160;&#0160; &#0160;MAYA_ARCHES = $(shell lipo -info $(MAYABIN) | sed &#39;s/^.*://&#39;)<br /><br />&#0160;&#0160; &#0160;ifneq ($(PREFERRED_ARCHITECTURE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160;ifneq ($(filter $(PREFERRED_ARCHITECTURE),$(MAYA_ARCHES)),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ARCH_FLAGS = -arch $(PREFERRED_ARCHITECTURE)<br />&#0160;&#0160; &#0160; &#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(error $(MAYABIN) does not support the &#39;$(PREFERRED_ARCHITECTURE)&#39; architecture.)<br />&#0160;&#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;else<br />&#0160;&#0160; &#0160; &#0160; &#0160;ARCH_FLAGS = $(patsubst %,-arch %,$(MAYA_ARCHES))<br />&#0160;&#0160; &#0160;endif<br /><br />&#0160;&#0160; &#0160;# Settings, added several extra flags<br />&#0160;&#0160; &#0160;CFLAGS &#0160; &#0160; &#0160; &#0160;= -DCC_GNU_ -DOSMac_ -DOSMacOSX_ $(EXTRA_ARCH_FLAG)\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-DOSMac_MachO_ -O3 $(ARCH_FLAGS) &#0160;-D_LANGUAGE_C_PLUS_PLUS\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-mmacosx-version-min=10.8<br />&#0160;&#0160; &#0160;C++FLAGS &#0160; &#0160; &#0160;= $(CFLAGS) $(CXX_LIB_FLAG) $(WARNFLAGS) $(ERROR_FLAGS) -fno-gnu-keywords -fpascal-strings<br />&#0160;&#0160; &#0160;INCLUDES &#0160; &#0160; &#0160;= -I$(SRCDIR) -I&quot;$(DEVKIT_INCLUDE)&quot;<br />&#0160;&#0160; &#0160;DYNLIB_LOCATION = $(MAYA_LOCATION)/MacOS<br /><br />&#0160;&#0160; &#0160;LFLAGS &#0160;= $(CXX_LIB_FLAG) -fno-gnu-keywords -fpascal-strings &#0160;\<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-isysroot $(XCODE_PLATFORM_SDK_PATH) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;$(ARCH_FLAGS) -headerpad_max_install_names \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework System -framework SystemConfiguration \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework CoreServices -framework Carbon \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework Cocoa -framework ApplicationServices \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-framework IOKit \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-bundle<br /><br />&#0160;&#0160; &#0160;# When compiling plug-ins for Maya, we make sure to export only the<br />&#0160;&#0160; &#0160;# symbols for the initializePlugin(MObject) and<br />&#0160;&#0160; &#0160;# uninitializePlugin(MObject) functions. In particular, this<br />&#0160;&#0160; &#0160;# prevents the plug-ins from exporting symbols coming from static<br />&#0160;&#0160; &#0160;# libaries against which the plug-ins is linked.<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Here&#39;s why:<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Plug-ins are written by separate developers. Each of them might<br />&#0160;&#0160; &#0160;# want to use various libraries to implement their plug-ins. At<br />&#0160;&#0160; &#0160;# times, it occurs that plug-ins written by different developers are<br />&#0160;&#0160; &#0160;# using different and &quot;incompatible&quot; versions of the same library. To<br />&#0160;&#0160; &#0160;# support this, we recommend that plug-ins be linked against static<br />&#0160;&#0160; &#0160;# versions of these libraries. And, by hidding the symbols of these<br />&#0160;&#0160; &#0160;# libraries, we prevent the two incompatible versions of the library<br />&#0160;&#0160; &#0160;# from interferring with each others.<br />&#0160;&#0160; &#0160;LFLAGS += -Wl,-exported_symbol,$(INITIALIZE_SYMBOL) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-Wl,-exported_symbol,$(UNINITIALIZE_SYMBOL) \<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;-Wl,-exported_symbol,_MApiVersion<br /><br /><br />&#0160;&#0160; &#0160;LREMAP &#0160;= -Wl,-executable_path,&quot;$(DYNLIB_LOCATION)&quot;<br />&#0160;&#0160; &#0160;LFLAGS += -L&quot;$(DYNLIB_LOCATION)&quot; $(LREMAP)<br />&#0160;&#0160; &#0160;LIBS &#0160; &#0160;= &#0160;<br /><br />&#0160;&#0160; &#0160;EXT &#0160; &#0160; = bundle<br /><br />&#0160;&#0160; &#0160;#Detect current clang xdk and choose correct sdk<br />&#0160;&#0160; &#0160;CLANG_VERSION := $(shell gcc --version | grep -o &quot;version [0-9\.]*&quot;)<br />&#0160;&#0160; &#0160;ifneq (&quot;$(CLANG_VERSION)&quot;,&quot;$(TARGET_CLANG_VERSION)&quot;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;$(shell sudo xcode-select -s $(XCODE_PATH))<br />&#0160;&#0160; &#0160;endif<br />&#0160;&#0160; &#0160; &#0160;<br /><br /><br />&#0160;&#0160; &#0160;# Makedepend flags<br />&#0160;&#0160; &#0160;#<br />&#0160;&#0160; &#0160;# Ignore dependencies on system header files.<br />&#0160;&#0160; &#0160;MDFLAGS = -Y<br /><br />&#0160;&#0160; &#0160;# Find out if the Qt development tools are installed.<br />&#0160;&#0160; &#0160;# we want to use the &#0160;qmake file provided by Maya, not the system<br />&#0160;&#0160; &#0160;ifneq ($(wildcard $(DEVKIT_LOCATION)/devkit/bin/qmake),)<br />&#0160; &#0160; #Maya 2017+<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;QMAKE = $(DEVKIT_LOCATION)/devkit/bin/qmake<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ifneq ($(QMAKE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; # We want to generate a Makefile, not an xcode project. &#0160;&#0160;<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; QMAKE += -spec $(DEVKIT)/mkspecs/macx-clang<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; endif<br />&#0160;&#0160; &#0160;else<br />&#0160; &#0160; #Maya 2016, 2016.5<br />&#0160; &#0160; #qmake wasn&#39;t in 2016/2016.5 devkit<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;QMAKE = $(shell which qmake 2&gt; /dev/null)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;ifneq ($(QMAKE),)<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;# We want to generate a Makefile, not an xcode project.<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;# QMAKE for 2016/2016.5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; QMAKE += -spec macx-g++<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;endif<br />&#0160;&#0160; &#0160;endif<br />endif</pre>
<p>To make it support Maya 2016~2018, I&#39;ll need to add several flags for specifying C++ library, Xcode, qmake and exported symbols for initialize/uninitialize plugin. I also removed mayaVersion to make it configurable in the tasks.json. Most of the changes are just replacing values with variables which should be same for the linux platform except the xcode-select part.</p>
<pre id="eHZACA31WIL">&#0160;&#0160; &#0160;#Detect current clang xdk and choose correct sdk<br />&#0160;&#0160; &#0160;CLANG_VERSION := $(shell gcc --version | grep -o &quot;version [0-9\.]*&quot;)<br />&#0160;&#0160; &#0160;ifneq (&quot;$(CLANG_VERSION)&quot;,&quot;$(TARGET_CLANG_VERSION)&quot;)<br />&#0160;&#0160; &#0160; &#0160; &#0160;$(shell sudo xcode-select -s $(XCODE_PATH))<br />&#0160;&#0160; &#0160;endif</pre>
<p><br /> You could choose default clang you want to use with it. It requires root privilege so you might need to input password during building.<br /> <br /> The last part is makefile itself. Unlike buildconfig and buildrules, it needs to be tweaked from projects to projects, so it is stored inside of project&#39;s directory.</p>
<pre id="eHZACA5feCo">#-<br /># ==========================================================================<br /># Copyright (c) 2011 Autodesk, Inc.<br /># All rights reserved.<br /># <br /># These coded instructions, statements, and computer programs contain<br /># unpublished proprietary information written by Autodesk, Inc., and are<br /># protected by Federal copyright law. They may not be disclosed to third<br /># parties or copied or duplicated in any form, in whole or in part, without<br /># the prior written consent of Autodesk, Inc.<br /># ==========================================================================<br />#+<br /><br />ifndef INCL_BUILDRULES<br /><br />#<br /># Include platform specific build settings<br />#<br />TOP := ..<br />include $(TOP)/buildrules<br /><br /><br />#<br /># Always build the local plug-in when make is invoked from the<br /># directory.<br />#<br />all : plugins<br /><br />endif<br /><br />#<br /># Variable definitions<br />#<br /><br />SRCDIR := .<br />DSTDIR := $(OUTPUTDIR)<br /><br /># Adding all cpp files as source file<br />SOURCES &#0160;:= $(wildcard *.cpp) $(wildcard **/*.cpp)<br />OBJECTS &#0160;:= $(addprefix $(OBJDIR)/,$(patsubst %.cpp, %.o, $(SOURCES)))<br /><br />PLUGIN &#0160; := $(DSTDIR)/$(PROJECT_NAME).$(EXT)<br />MAKEFILE := $(SRCDIR)/Makefile<br /><br />#<br /># Include the optional per-plugin Makefile.inc<br />#<br /># &#0160; &#0160;The file can contain macro definitions such as:<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_CFLAGS<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_C++FLAGS<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_INCLUDES<br /># &#0160; &#0160; &#0160; {pluginName}_EXTRA_LIBS<br />-include $(SRCDIR)/Makefile.inc<br /><br /><br />#<br /># Set target specific flags.<br />#<br /><br />$(OBJECTS): CFLAGS &#0160; := $(CFLAGS) &#0160; $(EXTRA_CFLAGS)<br />$(OBJECTS): C++FLAGS := $(C++FLAGS) $(EXTRA_C++FLAGS)<br />$(OBJECTS): INCLUDES := $(INCLUDES) $(EXTRA_INCLUDES)<br /><br />depend_mayaProject: &#0160; &#0160; INCLUDES := $(INCLUDES) $(EXTRA_INCLUDES)<br /><br />$(PLUGIN): &#0160;LFLAGS &#0160; := $(LFLAGS) $(EXTRA_LFLAGS) <br />$(PLUGIN): &#0160;LIBS &#0160; &#0160; := $(LIBS) &#0160; -lOpenMaya -lOpenMayaUI -lOpenMayaRender -lFoundation -framework AGL -framework OpenGL $(EXTRA_LIBS) <br /><br />#<br /># Rules definitions<br />#<br /><br />.PHONY: depend_mayaProject clean_mayaProject Clean_mayaProject<br /><br /><br />$(PLUGIN): $(OBJECTS) <br />&#0160;&#0160; &#0160;-rm -f $@<br />&#0160;&#0160; &#0160;$(LD) -o $@ $(LFLAGS) $^ $(LIBS) <br /><br />depend_mayaProject :<br />&#0160;&#0160; &#0160;makedepend $(INCLUDES) $(MDFLAGS) -f$(DSTDIR)/Makefile $(SOURCES)<br /><br />clean_mayaProject:<br />&#0160;&#0160; &#0160;-rm -rf $(OBJBASEDIR)<br />&#0160;&#0160; &#0160;-rm -rf $(OUTPUTBASEDIR)<br /><br />Clean_mayaProject:<br />&#0160;&#0160; &#0160;-rm -f $(MAKEFILE).bak $(OBJECTS) $(PLUGIN)<br /><br /><br />plugins: directories $(PLUGIN)<br />depend: &#0160; &#0160; depend_mayaProject<br />clean: &#0160; &#0160; clean_mayaProject<br />Clean: &#0160; &#0160; Clean_mayaProject<br /><br /></pre>
<p>I took a little bit cheat here, I made it compile all cpp files inside my working directory.</p>
<pre id="eHZACARQ8Jk">SOURCES &#0160;:= $(wildcard *.cpp) $(wildcard **/*.cpp)<br />OBJECTS &#0160;:= $(addprefix $(OBJDIR)/,$(patsubst %.cpp, %.o, $(SOURCES)))<br /><br />PLUGIN &#0160; := $(DSTDIR)/$(PROJECT_NAME).$(EXT)<br />MAKEFILE := $(SRCDIR)/Makefile</pre>
<p>I&#39;ve heard of that globstar(**) is only good for OS X Sierra by default. For Linux, you&#39;ll need to enable globstar option with following command.</p>
<pre id="eHZACAs87bR">shopt -s globstar</pre>
<p>It is only available after bash 4, so if you are running with earlier version of bash, you might want to update it. Otherwise, you&#39;ll need to use for loop for subdirectories instead.<br /> <br /> $(PROJECT_NAME) is an environment variable comes from VSCode, I made it same as workspace&#39;s name, which usually is the folder&#39;s name. From debugging perspective, it is good enough for me.<br /> <br /> After makefile is done, you could test them manually in terminal with environment variables set. You could also use other ide tools. Here is the VSCode way. I&#39;ll show two tasks here, clean and build for Maya 2016.&#0160;</p>
<pre id="eHZACAcSCIg">{<br />&#0160;&#0160; &#0160;// See https://go.microsoft.com/fwlink/?LinkId=733558<br />&#0160;&#0160; &#0160;// for the documentation about the tasks.json format<br />&#0160;&#0160; &#0160;&quot;version&quot;: &quot;2.0.0&quot;,<br />&#0160;&#0160; &#0160;&quot;command&quot;: &quot;make&quot;,<br />&#0160;&#0160; &#0160;&quot;type&quot;: &quot;shell&quot;,<br />&#0160;&#0160; &#0160;&quot;echoCommand&quot;: true,<br />&#0160;&#0160; &#0160;&quot;suppressTaskName&quot;: true,<br />&#0160;&#0160; &#0160;&quot;tasks&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;clean&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;args&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;clean&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: { &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: &quot;$msCompile&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;Build for maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;options&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;env&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;mayaVersion&quot;: &quot;2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MAYA_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016/Maya.app/Contents&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;DEVKIT_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PLATFORM_SDK_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;TARGET_CLANG_VERSION&quot;: &quot;version 6.0&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;PROJECT_NAME&quot;: &quot;${workspaceRootFolderName}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;INITIALIZE_SYMBOL&quot;: &quot;__Z16initializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;UNINITIALIZE_SYMBOL&quot; : &quot;__Z18uninitializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;CXX_LIB_FLAG&quot; : &quot;-stdlib=libstdc++&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;EXTRA_ARCH_FLAG&quot;: &quot;-DREQUIRE_IOSTREAM&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;owner&quot;: &quot;cpp&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;fileLocation&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;relative&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;${workspaceRoot}&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;pattern&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;regexp&quot;: &quot;^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;file&quot;: 1,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;line&quot;: 2,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;column&quot;: 3,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;severity&quot;: 4,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;message&quot;: 5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160;}]<br />}</pre>
<p>I&#39;ve decided to reuse makefiles from devkit, so the command here is&#0160;“make” and it is running from&#0160;“shell”(type). Then there is an array of tasks.</p>
<pre id="eHZACAcnioY">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;clean&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;args&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;clean&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: { &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: &quot;$msCompile&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;}</pre>
<p>Clean is simple, the task&#39;s name is clean and it has an argument for make which is also clean. The group variable tells VSCode it is a build task so you could find it when hitting CMD+Shift+B. The problemMatcher is special for VSCode. Because it doesn&#39;t support C++ first, the builder can&#39;t grab any C++ warning and error messages. It requires user to write a matcher for it. For clean, we don&#39;t really need a matcher so I&#39;ll just use default msCompile one. In next part, I&#39;ve found myself a C++ matcher on Stack overflow:)</p>
<pre id="eHZACA1oy92">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;taskName&quot;: &quot;Build for Maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;options&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;env&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;mayaVersion&quot;: &quot;2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MAYA_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016/Maya.app/Contents&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;DEVKIT_LOCATION&quot;: &quot;/Applications/Autodesk/maya2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PLATFORM_SDK_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;TARGET_CLANG_VERSION&quot;: &quot;version 6.0&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;XCODE_PATH&quot;: &quot;/Applications/Xcode/6.1.1/Xcode.app/Contents/Developer/&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;PROJECT_NAME&quot;: &quot;${workspaceRootFolderName}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;INITIALIZE_SYMBOL&quot;: &quot;__Z16initializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;UNINITIALIZE_SYMBOL&quot; : &quot;__Z18uninitializePlugin7MObject&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;CXX_LIB_FLAG&quot; : &quot;-stdlib=libstdc++&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;EXTRA_ARCH_FLAG&quot;: &quot;-DREQUIRE_IOSTREAM&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;group&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;kind&quot;: &quot;build&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;isDefault&quot;: true<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;},<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;problemMatcher&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;owner&quot;: &quot;cpp&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;fileLocation&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;relative&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;${workspaceRoot}&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;],<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;pattern&quot;: {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;regexp&quot;: &quot;^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;file&quot;: 1,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;line&quot;: 2,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;column&quot;: 3,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;severity&quot;: 4,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;message&quot;: 5<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160;}</pre>
<p>We have more environment settings for actual building task, there are small differences between most of Maya versions, you&#39;ll need to check with the makefile and buildconfig comes with each devkit. The problem matcher here is a regular expression. It grabs warning and error and show them in certain order.&#0160;<br /> <br /> Now it will build like below:</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c07068970d-pi" style="display: inline;"><img alt="Vscode2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb09c07068970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c07068970d-800wi" title="Vscode2" /></a></div>
<p>I&#39;ve also added tasks for 2016.5 to 2018 so I could make it work with all these versions when I have to check if a plugin is working on different versions like regular Visual Studio build configurations. <br /> <br /> Next step is intellisense and debug. Intellisense is an easy one, you&#39;ll just need to open .c_cpp_propertities.json inside .vscode folder and add Maya include path in it. Unlike Visual Studio, you could have extra include directories with each config to make intellisense working properly all the time, VSCode can&#39;t switch extra include directories on the fly. I make it base on Maya 2018 and take some cautions with previous versions. If you had a better solution for this, please let me know.<br /> <br /> The last part is launch.json, it is quite simple. With cpp extension, it will generate a template item for you and you&#39;ll need to update path to it.</p>
<pre id="eHZACAwuYT3">{ &#0160; &quot;version&quot;: &quot;0.2.0&quot;,<br />&#0160;&#0160; &#0160;&quot;configurations&quot;: [<br />&#0160;&#0160; &#0160; &#0160; &#0160;{ <br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;name&quot;: &quot;Attach to Maya 2016&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;type&quot;: &quot;cppdbg&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;request&quot;: &quot;attach&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;program&quot;: &quot;/Applications/Autodesk/Maya2016/Maya.app/Contents/bin/maya&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;processId&quot;: &quot;${command:pickProcess}&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;MIMode&quot;: &quot;lldb&quot;<br />&#0160;&#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160;]<br />}</pre>
<p>Like tasks, you could have multiple debug configures. Choose a correct one before launching the debugger.</p>
<div data-section-style="11" style="max-width: 100%;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c0707a970d-pi" style="display: inline;"><img alt="Vscode3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb09c0707a970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09c0707a970d-800wi" title="Vscode3" /></a></div>
<p>You could specify launch tasks for different workspaces or adding a default launch configuration to make it available for all workspaces in settings. Workspace&#39;s launch configure will always override the default config if it exists.<br /> <br /> The setup is done now, When you are creating a new project, just create a subfolder in the one with buildconfig and buildrules then copy makefile and .vscode folder in previous workspace. I&#39;ve also created a small sample on my <a href="https://github.com/iamsleepy/Maya-VSCode-Bootstrap-Mac">GitHub</a>, you could also use it as a bootstrap.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Autodesk Maya 2018 64bit 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-autodesk-maya-2018-64bit-
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/09/how-to-build-pyqt5-for-autodesk-maya-2018-64bit-.html 
DATE: 09/05/2017 06:18:30 PM
-----
BODY:
Written by Cyrille Fauvel – Autodesk Developer Network (April 2013) <br/>

Updated by Chengxi Li - Autodesk Developer Network (August 2018) <br/>

<br/>

<br/>

Building SIP, and PyQt for Maya 2018 PyQt [https://www.riverbankcomputing.co.uk] is a python binding to the Qt library. Because Maya uses Qt internally, you can use the PyQt modules in Maya python scripts to create custom UI. PyQt does not have the same licensing as Maya, Qt, or Python. Please consult the PyQt website for information about licensing for PyQt.<br/>

<br/>

Download PyQt: <a href="https://www.riverbankcomputing.com/software/pyqt/download">https://www.riverbankcomputing.com/software/pyqt/download</a><br/>

<br/>

Download SIP: <a href="https://www.riverbankcomputing.com/software/sip/download">https://www.riverbankcomputing.com/software/sip/download</a><br/>

<br/>

The following are instructions for building a copy of the PyQt modules that have been known to work with Maya.<br/>

<br/>

Maya 2018 uses Qt5.6.1 which is binary compatible with the latest version of PyQt – 5.9 / SIP - 4.19.2<br/>

<br/>

Note that it’s important to use the Maya modified version of the Qt source code. A copy of the customized Qt 5.6.1 source is available from Autodesk's Open Source web-site (https://www.autodesk.com/lgplsource) and includes text files describing how to configure, build and install Qt for each platform supported by Maya.<br/>

<br/>

However, be aware that with Maya 2018, there is no more need to build PySide as it is coming by default in Maya, nor you have to rebuild Qt itself as the main Qt tools to build PyQt are now included in the Maya distributions (I.e. qmake, moc, …)<br/>

libxml, openSSL, OpenAL, python2.7, qt-5.6.1, and tbb are also coming by default in the Maya include and lib folders, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a 'MAYA_LOCATION/support/opensource' folder now which contains some of the community source.<br/>

<br/>

Important: Maya 2018 now ships without the devkit, include and mkspecs folders. You can get the Maya 2018 devkit from the Autodesk App Store <a href="https://apps.autodesk.com/MAYA/en/Detail/Index?id=8656206734503135164&amp;appLang=en&amp;os=Win64">here </a>for Windows, OSX, and Linux. Download the devkit and unzip the files into your Maya root folder. Make sure to read the instructions to install the devkit, include and mkspecs folders properly on your system.<br/>

<br/>

The scripts used in this document are now also posted on <a href="https://github.com/cyrillef/Maya-PyQt-Scripts">Github</a>.<br/>

<br/>

Download SIP and PyQt source from '<a href="https://www.riverbankcomputing.co.uk">https://www.riverbankcomputing.co.uk</a>' - here I downloaded 'sip- 4.19.3' and 'PyQt5_gpl-5.9'. Unzip them in one folder.<br/>

<br/>

<h2 id='MRQACAi23sN'>Mac</h2>

<br/>

/Users/cyrille/Documents/_Maya2018Scripts/sip-4.19.3 <br/>

/Users/cyrille/Documents/_Maya2018Scripts/PyQt5_gpl-5.9 <br/>

/Users/cyrille/Documents/_Maya2018Scripts/ being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Mac OS X environment, in the Maya Documentation) <br/>

<br/>

If you would like to use Xcode 7.3.1 to compile it and you are having multiple installation of Xcode. Please backup /Applications/Xcode.app and use Xcode 7.3.1 to replace it. <br/>

<br/>

Use xcode-select to change active xcode like below:<br/>

<pre id='MRQACALEh1Y'>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer</pre>

<br/>

The qt.conf file uses <b>MAYA_LOCATION</b> and <b>DEVKIT_LOCATION</b> to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br/>

<br/>

DEVKIT_LOCATION should point to the directory where the devkit include, mkspecs, cmake directories are located.<br/>

<br/>

Modify devkit/bin/qt.conf as below: <br/>

<pre id='MRQACASq4Hb'>[Paths]<br>Prefix=<br>Libraries=$(MAYA_LOCATION)/MacOS<br>Binaries=$(DEVKIT_LOCATION)/devkit/bin<br>Headers=$(DEVKIT_LOCATION)/include/Qt<br>ArchData=$(DEVKIT_LOCATION)<br>Data=$(DEVKIT_LOCATION)<br>HostData=$(DEVKIT_LOCATION)<br>HostBinaries=$(DEVKIT_LOCATION)/devkit/bin<br>HostLibraries=$(MAYA_LOCATION)/MacOS</pre>

Untar the include/qt-5.6.1-include.tar.gz into /include/Qt<br/>

<br/>

Untar the qt-5.6.1-mkspecs.tar.gz into /Applications/Autodesk/maya2017/mkspecs. Make sure the qconfig.pri looks like this:<br/>

<br/>

<b>qconfig.pri</b><br/>

<pre id='MRQACAqfF55'>#configuration<br> CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework <br>QT_ARCH = macosx <br>QT_EDITION = OpenSource <br>QT_CONFIG += minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework<br>#versioning <br>QT_VERSION = 5.6.1 <br>QT_MAJOR_VERSION = 5 <br>QT_MINOR_VERSION = 6 <br>QT_PATCH_VERSION = 1<br><br>#namespaces <br>QT_LIBINFIX =<br>QT_NAMESPACE = <br>QT_NAMESPACE_MAC_CRC =</pre>

<h3 id='MRQACAmRgSf'>Build &amp; Install SIP</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAq20rB'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.19.3<br>export MAYA_LOCATION=/Applications/Autodesk/maya2018<br> <br>pushd $SIPDIR<br>$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64<br>make<br>sudo make install<br>popd<br><br>popd</pre>

<h3 id='MRQACAmVDKK'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAdRQaO'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export MAYA_LOCATION=/Applications/Autodesk/maya2018/Maya.app/Contents<br>export DEVKIT_LOCATION=/Applications/Autodesk/maya2018<br>export QTDIR=$DEVKIT_LOCATION/devkit<br>export QMAKESPEC=$DEVKIT_LOCATION/mkspecs/macx-clang<br>export INCDIR_QT=$DEVKIT_LOCATION/include/Qt<br>export LIBDIR_QT=$MAYA_LOCATION/MacOS<br><br>error=0<br>if [ ! -f $QMAKESPEC/qmake.conf ];<br>then<br>  echo "You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !"<br>  error=1<br>fi<br>if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br>then<br>  echo "You need to uncompress $MAYA_LOCATION/devkit/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !"<br>  error=1<br>fi<br># qt.conf - /Applications/Autodesk/maya2018/Maya.app/Contents/Resources<br>if [ ! -f $QTDIR/bin/qt.conf ];<br>then<br>  echo "You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !"<br>  error=1<br>fi<br> <br>test=`grep 'Data=$(DEVKIT_LOCATION)' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Data=\$(DEVKIT_LOCATION)'"<br>  error=1<br>fi<br>test=`grep 'Headers=$(DEVKIT_LOCATION)/include/Qt' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Headers=\$(DEVKIT_LOCATION)/include/Qt'"<br>  error=1<br>fi<br>test=`grep 'Libraries=$(MAYA_LOCATION)/MacOS' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Libraries=\$(MAYA_LOCATION)/MacOS'"<br>  error=1<br>fi<br><br>if [ $error -eq 1 ];<br>then<br>    exit<br>fi<br> <br>export DYLD_LIBRARY_PATH=$MAYA_LOCATION/MacOS<br>export DYLD_FRAMEWORK_PATH=$MAYA_LOCATION/Frameworks<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.19.3<br>export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.9<br> <br>export SIP_EXE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/bin/sip<br>export SIP_INCLUDE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/include/python2.7<br><br>pushd $PYQTDIR<br>export PATH=$QTDIR/bin:$PATH<br><br>echo <br>echo Environment<br>echo -----------<br>set<br>echo -----------<br>echo QT Settings<br>echo -----------<br>qmake -query<br>echo -----------<br>echo<br>$MAYA_LOCATION/bin/mayapy ./configure.py QMAKE_MAC_SDK=macosx10.11 QMAKE_RPATHDIR+=$LIBDIR_QT --sip=$SIP_EXE --sip-incdir=$SIP_INCLUDE -w --no-designer-plugin <br>make -j 8<br>sudo make install<br>popd<br><br>popd</pre>

Note that I am compiling against Mac OS X SDK 10.11 which is same as the developer environment. If you want to compile against other versions, please modify the script(macosx10.11).<br/>

<br/>

You're done! Please check the testing paragraph at the end of the article.<br/>

<h2 id='MRQACASOSP8'>Linux</h2>

<br/>

/home/cyrille/Documents/_Maya2018Scripts/sip-4.19.3 <br/>

/home/cyrille/Documents/_Maya2018Scripts/PyQt5_gpl-5.9<br/>

/home/cyrille/Documents/_Maya2018Scripts being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux environments (64 bit), in the Maya Documentation).<br/>

<br/>

The qt.conf file uses <b>MAYA_LOCATION</b> and <b>DEVKIT_LOCATION</b> to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br/>

<br/>

DEVKIT_LOCATION should point to the directory where the devkit include, mkspecs, cmake directories are located.<br/>

<br/>

Please backup your qt.conf first, you'll need to restore it after building PyQt5. Replace …/bin/qt.conf with below:<br/>

<pre id='MRQACA486GR'>[Paths] <br>Prefix= <br>Libraries=$(MAYA_LOCATION)/lib <br>Binaries=$(DEVKIT_LOCATION)/bin<br>Headers=$(DEVKIT_LOCATION)/include/Qt <br>ArchData=$(DEVKIT_LOCATION) <br>Data=$(DEVKIT_LOCATION) <br>HostData=$(DEVKIT_LOCATION) <br>HostBinaries=$(DEVKIT_LOCATION)/bin</pre>

Untar the /include/qt-5.6.1-include.tar.gz into /include/Qt<br/>

<br/>

 Untar the /mkspecs/qt-5.6.1-mkspecs.tar.gz into /mkspecs<br/>

<br/>

Make qmake, moc executables from the Maya bin directory <br/>

<pre id='MRQACAasWkN'>sudo chmod aog+x /usr/autodesk/maya2018/bin/moc <br>sudo chmod aog+x /usr/autodesk/maya2018/bin/qmake</pre>

<h3 id='MRQACAKBSuA'>Build &amp; Install SIP </h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAyQE8c'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.19.3<br>export MAYA_LOCATION=/usr/autodesk/maya2018<br> <br>pushd $SIPDIR<br>$MAYA_LOCATION/bin/mayapy ./configure.py<br>make<br>sudo make install<br>popd<br><br>popd</pre>

<h3 id='MRQACAlVCCN'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAoR7aC'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export MAYA_LOCATION=/usr/autodesk/maya2017<br>export QTDIR=$MAYA_LOCATION<br>export DEVKIT_LOCATION=$MAYA_LOCATION<br>export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64<br>export INCDIR_QT=$MAYA_LOCATION/include/Qt<br>export LIBDIR_QT=$QTDIR/lib<br><br>error=0<br>if [ ! -f $QMAKESPEC/qmake.conf ];<br>then<br>  echo "You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !"<br>  error=1<br>fi<br>if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br>then<br>  echo "You need to uncompress $MAYA_LOCATION/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !"<br>  error=1<br>fi<br># qt.conf - $QTDIR/bin/qt.conf<br>if [ ! -f $QTDIR/bin/qt.conf ];<br>then<br>  echo "You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !"<br>  error=1<br>fi<br><br># The grep string should be in single quote('), if it is in double quote (""), <br># shell will expand the variable, hence the intension of the below grep will fail <br>test=`grep 'Headers=$(DEVKIT_LOCATION)/include/Qt' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Headers=$(DEVKIT_LOCATION)/include/Qt'"<br>  error=1<br>fi<br><br>if [ $error -eq 1 ];<br>then<br>    exit<br>fi<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.19.3<br>export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.9<br> <br>pushd $PYQTDIR<br>export PATH=$QTDIR/bin:$PATH<br>$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin <br>make -j 8<br>sudo make install<br>popd<br><br>popd</pre>

You're done! Please check the testing paragraph at the end of the article.<br/>

<br/>

<h1 id='MRQACAF0Dr6'>Windows</h1>

<br/>

D:\__sdkext\_Maya2018 Scripts\sip-4.19.3 <br/>

D:\__sdkext\_Maya2018 Scripts\PyQt5_gpl-5.9<br/>

D:\__sdkext\_Maya2018 Scripts being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows environment (64-bit), in the Maya Documentation)<br/>

<br/>

Please backup your qt.conf first, you'll need to restore it after building PyQt5. Replace …/bin/qt.conf with below:<br/>

<pre id='MRQACA0AJCK'>[Paths]<br>Prefix=$(MAYA_LOCATION)<br>Libraries=lib <br>Binaries=bin <br>Headers=include/Qt<br>Data=.<br>Plugins=qt-plugins <br>Translations=qt-translations <br>Qml2Imports=qml</pre>

<br/>

Unzip the /include/qt-5.6.1-include.tar.gz into /include/Qt <br/>

<br/>

Unzip the /mkspecs/qt-5.6.1-mkspecs.tar.gz into /mkspecs<br/>

<br/>

Please run following build scripts with VS2012 x64 Native Tools Command  Prompt. If your Maya installed in folders required administrator privilege(e.g. Program files), please run the command prompt as Administrator.<br/>

<h3 id='MRQACAOvxL7'>Environment Setup</h3>

<pre id='MRQACA7pJx1'>@echo off<br><br>set MAYAVERSION=2018<br>set ADSKQTVERSION=5.6.1<br>set SIPVERSION=4.19.3<br>set PYQTVERSION=5.9<br>set MAYADRIVE=m:<br>set BUILDDRIVE=v:<br><br>if exist %MAYADRIVE%\nul subst %MAYADRIVE% /d<br>subst %MAYADRIVE% "C:\Program Files\Autodesk\Maya%MAYAVERSION%"<br>set MAYA_LOCATION=%MAYADRIVE%<br><br>set MAYAPYQTBUILD=%~dp0<br>rem Removing trailing \<br>set MAYAPYQTBUILD=%MAYAPYQTBUILD:~0,-1%<br><br>if exist %BUILDDRIVE%\nul subst %BUILDDRIVE% /d<br>subst %BUILDDRIVE% "%MAYAPYQTBUILD%"<br><br>set SIPDIR=%BUILDDRIVE%\sip-%SIPVERSION%<br>set PYQTDIR=%BUILDDRIVE%\PyQt5_gpl-%PYQTVERSION%<br>rem set ADSKQTDIR=%BUILDDRIVE%\qt-%ADSKQTVERSION%<br>set QTDIR=%MAYA_LOCATION%<br><br>set PATH=%QTDIR%\bin;%PATH%<br>set MSVC_VERSION=2015<br>set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 14.0<br>set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%<br>set _QMAKESPEC_=win32-msvc%MSVC_VERSION%<br><br>if ["%LIBPATH%"]==[""] call "%MSVC_DIR%\VC\vcvarsall" amd64<br><br>set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7<br>set LIB=%LIB%;%MAYA_LOCATION%\lib</pre>

<h3 id='MRQACAsPvBn'>Build &amp; Install SIP</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAHBzB6'>@echo off<br>set XXX=%~dp0<br>if ["%MAYAPYQTBUILD%"]==[""] call "%XXX%setup.bat"<br><br>pushd %SIPDIR%<br>rem "%MAYA_LOCATION%\bin\mayapy" configure-ng.py --spec %_QMAKESPEC_%<br>"%MAYA_LOCATION%\bin\mayapy" configure.py<br>nmake<br>nmake install<br>popd</pre>

<h3 id='MRQACAw3Eok'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='MRQACAtXhQR'>@echo off<br>set XXX=%~dp0<br>if ["%MAYAPYQTBUILD%"]==[""] call "%XXX%setup.bat"<br><br>set QMAKESPEC=%QTDIR%\mkspecs\%_QMAKESPEC_%<br>if not exist "%QMAKESPEC%\qmake.conf" (<br>    echo "You need to uncompress %MAYA_LOCATION%\mkspecs\qt-5.6.1-mkspecs.tar.gz !"<br>    goto end<br>)<br>if not exist "%MAYA_LOCATION%\include\Qt\QtCore\qdir.h" (<br>    echo "You need to uncompress %MAYA_LOCATION%\include\qt-5.6.1-include.tar.gz in %MAYA_LOCATION%\include\Qt !"<br>    goto end<br>)<br>findstr /L /C:"Headers=include/Qt" "%MAYA_LOCATION%\bin\qt.conf" &gt;nul 2&gt;&amp;1<br>if ERRORLEVEL 1 (<br>    echo "You need to edit %MAYA_LOCATION%\bin\qt.conf to use 'Headers=include/Qt'"<br>    goto end<br>)<br>findstr /L /C:"-lqtmain -lshell32" "%QTDIR%\mkspecs\common\msvc-desktop.conf" &gt;nul 2&gt;&amp;1<br>if ERRORLEVEL 1 (<br>    echo "You need to edit %QTDIR%\mkspecs\common\msvc-desktop.conf to use 'QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32'"<br>    goto end<br>)<br>if not exist "%MAYA_LOCATION%\include\Qt\qtnfc.disabled" (<br>    echo "You need to rename %MAYA_LOCATION%\include\Qt\qtnfc to %MAYA_LOCATION\include\Qt\qtnfc.disabled"<br>    goto end<br>)<br>    <br>pushd %PYQTDIR%<br><br>"%MAYA_LOCATION%\bin\mayapy" configure.py --spec %QMAKESPEC% LIBDIR_QT="%QTDIR%\lib" INCDIR_QT="%QTDIR%\include\Qt" MOC="%QTDIR%\bin\moc.exe" --sip="%QTDIR%\Python\sip.exe" --sip-incdir="%QTDIR%\Python\include" -w --no-designer-plugin<br>nmake<br>nmake install<br>popd<br><br>:end</pre>

<br/>

You're done! Please check the testing paragraph at the end of the article.<br/>

<br/>

<h1 id='MRQACAqmy2l'>Testing </h1>

Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:<br/>

<pre id='MRQACAiupEm'>import sys <br>from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton) <br>from PyQt5.QtGui import QFont     <br> <br>class Example(QWidget):<br>    def __init__(self):<br>        super(Example,self).__init__()<br>        self.initUI()<br><br>    def initUI(self):<br>        QToolTip.setFont(QFont('SansSerif', 10))<br>        self.setToolTip('This is a &lt;b&gt;QWidget&lt;/b&gt; widget')<br>        btn = QPushButton('Button', self)<br>        btn.setToolTip('This is a &lt;b&gt;QPushButton&lt;/b&gt; widget')<br>        btn.resize(btn.sizeHint())<br>        btn.move(50, 50) <br>        self.setGeometry(300, 300, 300, 200)<br>        self.setWindowTitle('Tooltips')<br>        self.show()<br>        <br>ex = Example() </pre>

<br/>

<br/>

 If you see the dialog showing, you are all set.<br/>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Maya 2018 Devkit is on ADN extranet now
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: maya-2018-devkit-is-on-adn-extranet-now
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/08/maya-2018-devkit-is-on-adn-extranet-now.html 
DATE: 08/13/2017 11:34:00 AM
-----
BODY:
<p>This is a quick update for Maya 2018 Devkit since our partners are asking about this. I am sorry for the late, but the Maya 2018 Devkit is available on our <a href="https://adn.autodesk.io/index.php">ADN extranet</a> now, if you are ADN member, you can download it <a href="https://adn.autodesk.io/index.php?r=custom_pages%2Fview&amp;id=130">there</a> directly. We are also working on to upload it to <a href="https://apps.autodesk.com">Autodesk App Store</a> and <a href="http://autodesk.com/developmaya">Maya Developer Center</a>, I will update the progress here.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Maya Devkit 2018 is on the way
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: maya-devkit-2018-is-on-the-way
CATEGORY: Autodesk
CATEGORY: Events
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/07/maya-devkit-2018-is-on-the-way.html 
DATE: 07/30/2017 09:17:00 AM
-----
BODY:
<p>This is a short update regarding the Maya 2018 devkit.&#160; As-is typical for the devkit, it can take a few days to get it posted after our Maya product release. We are awaiting the official release from engineering and they have told us it should be ready in the next few days. Once we receive it, we will get it posted ASAP. Please check back here for the latest information. Thank you for your patience.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: New API changes for Maya 2018
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: new-api-changes-for-maya-2018
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/07/new-api-changes-for-maya-2018.html 
DATE: 07/25/2017 11:26:00 AM
-----
BODY:
<p>Another big time for the 2018 release of M&amp;E products, the following products are released on July 25: </p>  <ul><strong>     <li>Maya 2018 </li>      <li>Arnold SDK 5.0 </li>      <li>MotionBuilder 2018 </li>      <li>Mudbox 2018 </li>      <li>Entertainment Creation Suite Ultimate 2018 </li>      <li>Maya Entertainment Creation Suite Standard 2018 </li>      <li>3ds Max Entertainment Creation Suite Standard 2018 </li>      <li>Maya 2018 with Softimage </li>   </strong></ul>  <p>For our 3rd party developers, it means you should check out the new APIs and upgrade your plugin to support the latest versions. If you are in our Beta forum, you should already be aware of these new APIs through our Limelight program. This program is designed to help our Maya/3ds Max plugin developers to get ready with the upcoming APIs, to help prepare/upgrade their plugins and get them released at the same time as Maya/3ds Max is officially released. If you are not familiar with this, go to Beta forum to check out, or send us an email and we can help you get involved. </p>  <p>Now, let’s talk about the main API change for Maya 2018 release. There are lots of improvements, including the features of Modeling, Animation, Rendering, Evaluation and Performance. We have a video recording talking about them on Limelight program and you can also check the section “<a href="http://help.autodesk.com/view/MAYAUL/2018/ENU/?guid=__files_GUID_C122F8DA_431C_4094_BA54_60B80495A734_htm">What’s New in Maya API in 2018</a>” of Maya SDK help for details. We won’t describe every detail of these improvements here again, but just a few key changes that are important to developers. </p>  <p>There are some critical changes that you have to know before anything else. For example, the compiler on Windows is now upgraded to VS 2015, for Mac, it’s also upgraded to Xcode 7.3.1 with SDK 10.11. But I believe the most important change is the new OpenMaya namespace. In short, starting from Maya 2018, all the Maya C++ classes are not declared in the global namespace anymore, and instead, they are under the “<strong>OpenMaya20180000</strong>” namespace. <a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c90fb56c970b-pi"><img title="Screen Shot 2017-07-18 at 12.16.36 PM" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="Screen Shot 2017-07-18 at 12.16.36 PM" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09b2edb8970d-pi" width="698" height="371" /></a> </p>  <p>This is mainly designed to minimize disruptions to Maya plug-in development and extend binary compatibility of the Maya API over multiple updates. So if your plugin does not want to make use of the new API feature of update version, in theory, there is almost nothing to worry about, everything is handled automatically for you, except that it is not allowed to forward declare class names anymore, plug-in code will need to be modified in order to remove those forward declaration statements. Check the following code, for example, you can see that you can derive your class from MPxNode as usual, and the MPxNode is already under the correct namespace. <a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c90fb56e970b-pi"><img title="image002" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="image002" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09b2edbd970d-pi" width="710" height="355" /></a> </p>  <p>But if you want to make use of the new APIs in the Maya update versions, you have to specify the correct namespace. Here is an example of what macros for Update 1 might look like: </p>  <ul><strong>     <li><font size="1" face="微软雅黑 Light">#define OPENMAYA_UPDATE1_NAMESPACE OpenMaya20181000 </font></li>      <li><font size="1" face="微软雅黑 Light">#define OPENMAYA_UPDATE1_NAMESPACE_OPEN OPENMAYA_NAMESPACE_OPEN(OPENMAYA_UPDATE1_NAMESPACE) </font></li>      <li><font size="1"><font face="微软雅黑 Light">#define OPENMAYA_UPDATE1_NAMESPACE_SCHEMA OPENMAYA_NAMESPACE_SCHEMA(OPENMAYA_UPDATE1_NAMESPACE)</font> </font></li>   </strong></ul>  <p>For example, a new class named MNewClassForUpdate is added under OPENMAYA_UPDATE1_NAMESPACE for Maya 2018 update 1, if you want to use this class, you need to specify the full name with namespace like <b>OPENMAYA_UPDATE1_NAMESPACE:MNewClassForUpdate</b>, and also remember if you are using any new classes of update version, your plugin will not work with the other version. </p>  <p>BTW, Python 1.0 and .NET API are currently not supported by the new OpenMaya namespace. I will prepare a follow-up blog for the details about the feature soon. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build PyQt5 for Autodesk Maya 2017 64bit
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: how-to-build-pyqt5-for-autodesk-maya-2017-64bit
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/06/how-to-build-pyqt5-for-autodesk-maya-2017-64bit.html 
DATE: 06/08/2017 11:45:15 PM
-----
BODY:
Written by Cyrille Fauvel – Autodesk Developer Network (April 2013) <br/>

Updated by Vijaya Prakash – Autodesk Developer Network (November 2016)<br/>

                     Chengxi Li - Autodesk Developer Network (June 2017) <br/>

<br/>

<br/>

Building SIP, and PyQt for Maya 2017 PyQt [https://www.riverbankcomputing.co.uk] is a python binding to the Qt library. Because Maya uses Qt internally, you can use the PyQt modules in Maya python scripts to create custom UI. PyQt does not have the same licensing as Maya, Qt, or Python. Please consult the PyQt website for information about licensing for PyQt.<br/>

<br/>

Download PyQt: <a href="https://www.riverbankcomputing.com/software/pyqt/download">https://www.riverbankcomputing.com/software/pyqt/download</a><br/>

<br/>

Download SIP: <a href="https://www.riverbankcomputing.com/software/sip/download">https://www.riverbankcomputing.com/software/sip/download</a><br/>

<br/>

The following are instructions for building a copy of the PyQt modules that have been known to work with Maya.<br/>

<br/>

Maya 2017 uses Qt5.6.1 which is binary compatible with the latest version of PyQt – 5.7 / SIP - 4.18.1<br/>

<br/>

Note that it’s important to use the Maya modified version of the Qt source code. A copy of the customized Qt 5.6.1 source is available from Autodesk's Open Source web-site (https://www.autodesk.com/lgplsource) and includes text files describing how to configure, build and install Qt for each platform supported by Maya.<br/>

<br/>

However, be aware that with Maya 2017, there is no more need to build PySide as it is coming by default in Maya, nor you have to rebuild Qt itself as the main Qt tools to build PyQt are now included in the Maya distributions (I.e. qmake, moc, …)<br/>

libxml, openSSL, OpenAL, python2.7, qt-5.6.1, and tbb are also coming by default in the Maya include and lib folders, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a 'MAYA_LOCATION/support/opensource' folder now which contains some of the community source.<br/>

<br/>

Important: Maya 2017 now ships without the devkit, include and mkspecs folders. You can get the Maya 2017 devkit from the Autodesk App Store <a href="https://apps.autodesk.com/MAYA/en/Detail/Index?id=8656206734503135164&amp;appLang=en&amp;os=Win64">here </a>for Windows, OSX, and Linux. Download the devkit and unzip the files into your Maya root folder. Make sure to read the instructions to install the devkit, include and mkspecs folders properly on your system.<br/>

<br/>

The scripts used in this document are now also posted on <a href="https://github.com/cyrillef/Maya-PyQt-Scripts">Github</a>.<br/>

<br/>

Download SIP and PyQt source from '<a href="https://www.riverbankcomputing.co.uk">https://www.riverbankcomputing.co.uk</a>' - here I downloaded 'sip- 4.18.1' and 'PyQt5_gpl-5.7'. Unzip them in one folder, then you should get something like this:<br/>

<div data-section-style='11' style='max-width:100%'><img src='https://quip.com/blob/WOCAAA9ctyw/eexKJk5htiHeepBzgVeVGw?a=4PaUpEmiJbaLza0SxxCPQDVLQBB9yvlQ474gfCRnCv4a' id='WOCACA5TCqF' alt='' width='800' height='118'></img></div><br/>

<h2 id='WOCACAXDivU'>Mac</h2>

<br/>

/Users/cyrille/Documents/_Maya2017Scripts/sip-4.18.1 <br/>

/Users/cyrille/Documents/_Maya2017Scripts/PyQt5_gpl-5.7 '<br/>

/Users/cyrille/Documents/_Maya2017Scripts' being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Mac OS X environment, in the Maya Documentation) <br/>

<br/>

If you would like to use Xcode 6.1.1 to compile it and you are having multiple installation of Xcode. Please backup /Applications/Xcode.app and use Xcode 6.1.1 to replace it. You can restore it after installation.<br/>

Note that Xcode 6.1.1 won't open on Mac OS X Sierra(10.12), but it is still able to build PyQt5.<br/>

<br/>

Use xcode-select to change active xcode like below:<br/>

<pre id='WOCACAP81R8'>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer</pre>

<br/>

The qt.conf file uses <b>MAYA_LOCATION</b> and <b>DEVKIT_LOCATION</b> to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br/>

<br/>

DEVKIT_LOCATION should point to the directory where the devkit include, mkspecs, cmake directories are located.<br/>

<br/>

Modify devkit/bin/qt.conf as below: <br/>

<pre id='WOCACA36HK1'>[Paths]<br>Prefix=<br>Libraries=$(MAYA_LOCATION)/MacOS<br>Binaries=$(DEVKIT_LOCATION)/devkit/bin<br>Headers=$(DEVKIT_LOCATION)/include/Qt<br>ArchData=$(DEVKIT_LOCATION)<br>Data=$(DEVKIT_LOCATION)<br>HostData=$(DEVKIT_LOCATION)<br>HostBinaries=$(DEVKIT_LOCATION)/devkit/bin<br>HostLibraries=$(MAYA_LOCATION)/MacOS</pre>

Untar the include/qt-5.6.1-include.tar.gz into /include/Qt<br/>

<br/>

Untar the qt-5.6.1-mkspecs.tar.gz into /Applications/Autodesk/maya2017/mkspecs. Make sure the qconfig.pri looks like this:<br/>

<br/>

<b>qconfig.pri</b><br/>

<pre id='WOCACAqGrlR'>#configuration<br> CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework <br>QT_ARCH = macosx <br>QT_EDITION = OpenSource <br>QT_CONFIG += minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework<br>#versioning <br>QT_VERSION = 5.6.1 <br>QT_MAJOR_VERSION = 5 <br>QT_MINOR_VERSION = 6 <br>QT_PATCH_VERSION = 1<br><br>#namespaces <br>QT_LIBINFIX =<br>QT_NAMESPACE = <br>QT_NAMESPACE_MAC_CRC =</pre>

<h3 id='WOCACAqLy00'>Build &amp; Install SIP</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACAnUhTO'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.18.1<br>export MAYA_LOCATION=/Applications/Autodesk/maya2017<br> <br>pushd $SIPDIR<br>$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64<br>make<br>sudo make install<br>popd<br><br>popd</pre>

<h3 id='WOCACAbdMfY'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACAsva27'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export MAYA_LOCATION=/Applications/Autodesk/maya2017/Maya.app/Contents<br>export DEVKIT_LOCATION=/Applications/Autodesk/maya2017<br>export QTDIR=$DEVKIT_LOCATION/devkit<br>export QMAKESPEC=$DEVKIT_LOCATION/mkspecs/macx-clang<br>export INCDIR_QT=$DEVKIT_LOCATION/include/Qt<br>export LIBDIR_QT=$MAYA_LOCATION/MacOS<br><br>error=0<br>if [ ! -f $QMAKESPEC/qmake.conf ];<br>then<br>  echo "You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !"<br>  error=1<br>fi<br>if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br>then<br>  echo "You need to uncompress $MAYA_LOCATION/devkit/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !"<br>  error=1<br>fi<br># qt.conf - /Applications/Autodesk/maya2017/Maya.app/Contents/Resources<br>if [ ! -f $QTDIR/bin/qt.conf ];<br>then<br>  echo "You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !"<br>  error=1<br>fi<br> <br>test=`grep 'Data=$(DEVKIT_LOCATION)' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Data=\$(DEVKIT_LOCATION)'"<br>  error=1<br>fi<br>test=`grep 'Headers=$(DEVKIT_LOCATION)/include/Qt' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Headers=\$(DEVKIT_LOCATION)/include/Qt'"<br>  error=1<br>fi<br>test=`grep 'Libraries=$(MAYA_LOCATION)/MacOS' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Libraries=\$(MAYA_LOCATION)/MacOS'"<br>  error=1<br>fi<br><br>if [ $error -eq 1 ];<br>then<br>    exit<br>fi<br> <br>export DYLD_LIBRARY_PATH=$MAYA_LOCATION/MacOS<br>export DYLD_FRAMEWORK_PATH=$MAYA_LOCATION/Frameworks<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.18.1<br>export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.7<br> <br>export SIP_EXE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/bin/sip<br>export SIP_INCLUDE=$MAYA_LOCATION/Frameworks/Python.framework/Versions/2.7/include/python2.7<br><br>pushd $PYQTDIR<br>export PATH=$QTDIR/bin:$PATH<br><br>echo <br>echo Environment<br>echo -----------<br>set<br>echo -----------<br>echo QT Settings<br>echo -----------<br>qmake -query<br>echo -----------<br>echo<br>$MAYA_LOCATION/bin/mayapy ./configure.py QMAKE_MAC_SDK=macosx10.9 QMAKE_RPATHDIR+=$LIBDIR_QT --sip=$SIP_EXE --sip-incdir=$SIP_INCLUDE -w --no-designer-plugin <br>make -j 8<br>sudo make install<br>popd<br><br>popd</pre>

Note that I am compiling against Mac OS X SDK 10.9 which is same as the developer environment. If you want to compile against other versions, please modify the script(macosx10.9).<br/>

<br/>

You're done! Please check the testing paragraph at the end of the article.<br/>

<h2 id='WOCACASsndo'>Linux</h2>

<br/>

/home/cyrille/Documents/_Maya2017Scripts/sip-4.18.1 <br/>

/home/cyrille/Documents/_Maya2017Scripts/PyQt5_gpl-5.7<br/>

'/home/cyrille/Documents/_Maya2017Scripts' being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux environments (64 bit), in the Maya Documentation).<br/>

<br/>

The qt.conf file uses <b>MAYA_LOCATION</b> and <b>DEVKIT_LOCATION</b> to locate the expected header/library files. Therefore, users must set both environment variables before building the PyQt5.<br/>

<br/>

DEVKIT_LOCATION should point to the directory where the devkit include, mkspecs, cmake directories are located.<br/>

<br/>

Please backup your qt.conf first, you'll need to restore it after building PyQt5. Replace …/bin/qt.conf with below:<br/>

<pre id='WOCACAJmOWM'>[Paths] <br>Prefix= <br>Libraries=$(MAYA_LOCATION)/lib <br>Binaries=$(DEVKIT_LOCATION)/bin<br>Headers=$(DEVKIT_LOCATION)/include/Qt <br>ArchData=$(DEVKIT_LOCATION) <br>Data=$(DEVKIT_LOCATION) <br>HostData=$(DEVKIT_LOCATION) <br>HostBinaries=$(DEVKIT_LOCATION)/bin</pre>

Untar the /include/qt-5.6.1-include.tar.gz into /include/Qt<br/>

<br/>

 Untar the /mkspecs/qt-5.6.1-mkspecs.tar.gz into /mkspecs<br/>

<br/>

Make qmake, moc executables from the Maya bin directory <br/>

<pre id='WOCACABD19M'>sudo chmod aog+x /usr/autodesk/maya2017/bin/moc <br>sudo chmod aog+x /usr/autodesk/maya2017/bin/qmake</pre>

<h3 id='WOCACAXQGER'>Build &amp; Install SIP </h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACALSWdl'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.18.1<br>export MAYA_LOCATION=/usr/autodesk/maya2017<br> <br>pushd $SIPDIR<br>$MAYA_LOCATION/bin/mayapy ./configure.py<br>make<br>sudo make install<br>popd<br><br>popd</pre>

<h3 id='WOCACA8oCVq'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACAY3NNd'>#!/usr/bin/env bash<br> <br>MAYAQTBUILD="`dirname \"$0\"`" # Relative<br>export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized<br>pushd $MAYAQTBUILD<br> <br>export MAYA_LOCATION=/usr/autodesk/maya2017<br>export QTDIR=$MAYA_LOCATION<br>export DEVKIT_LOCATION=$MAYA_LOCATION<br>export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64<br>export INCDIR_QT=$MAYA_LOCATION/include/Qt<br>export LIBDIR_QT=$QTDIR/lib<br><br>error=0<br>if [ ! -f $QMAKESPEC/qmake.conf ];<br>then<br>  echo "You need to install qt-5.6.1-mkspecs.tar.gz in $QTDIR/mkspecs !"<br>  error=1<br>fi<br>if [ ! -f $INCDIR_QT/QtCore/qdir.h ];<br>then<br>  echo "You need to uncompress $MAYA_LOCATION/include/qt-5.6.1-include.tar.gz in $INCDIR_QT !"<br>  error=1<br>fi<br># qt.conf - $QTDIR/bin/qt.conf<br>if [ ! -f $QTDIR/bin/qt.conf ];<br>then<br>  echo "You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !"<br>  error=1<br>fi<br><br># The grep string should be in single quote('), if it is in double quote (""), <br># shell will expand the variable, hence the intension of the below grep will fail <br>test=`grep 'Headers=$(DEVKIT_LOCATION)/include/Qt' $QTDIR/bin/qt.conf`<br>if [ -z "$test" ];<br>then<br>  echo "You need to edit $QTDIR/bin/qt.conf to use 'Headers=$(DEVKIT_LOCATION)/include/Qt'"<br>  error=1<br>fi<br><br>if [ $error -eq 1 ];<br>then<br>    exit<br>fi<br> <br>export SIPDIR=$MAYAQTBUILD/sip-4.18.1<br>export PYQTDIR=$MAYAQTBUILD/PyQt5_gpl-5.7<br> <br>pushd $PYQTDIR<br>export PATH=$QTDIR/bin:$PATH<br>$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin <br>make -j 8<br>sudo make install<br>popd<br><br>popd</pre>

You're done! Please check the testing paragraph at the end of the article.<br/>

<br/>

<h1 id='WOCACARaAdB'>Windows</h1>

<br/>

D:\__sdkext\_Maya2017 Scripts\sip-4.18.1 <br/>

D:\__sdkext\_Maya2017 Scripts\PyQt5_gpl-5.7<br/>

D:\__sdkext\_Maya2017 Scripts being my local folder. <br/>

<br/>

Here are the instructions and scripts for building SIP and PyQt.<br/>

<br/>

Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows environment (64-bit), in the Maya Documentation)<br/>

<br/>

Please backup your qt.conf first, you'll need to restore it after building PyQt5. Replace …/bin/qt.conf with below:<br/>

<pre id='WOCACAfXEGg'>[Paths]<br>Prefix=$(MAYA_LOCATION)<br>Libraries=lib <br>Binaries=bin <br>Headers=include/Qt<br>Data=.<br>Plugins=qt-plugins <br>Translations=qt-translations <br>Qml2Imports=qml</pre>

<br/>

Unzip the /include/qt-5.6.1-include.tar.gz into /include/Qt <br/>

<br/>

Unzip the /mkspecs/qt-5.6.1-mkspecs.tar.gz into /mkspecs<br/>

<br/>

Please run following build scripts with VS2012 x64 Native Tools Command  Prompt. If your Maya installed in folders required administrator privilege(e.g. Program files), please run the command prompt as Administrator.<br/>

<h3 id='WOCACADYP5x'>Environment Setup</h3>

<pre id='WOCACA8HecY'>@echo off<br><br>set MAYAVERSION=2017<br>set ADSKQTVERSION=5.6.1<br>set SIPVERSION=4.18.1<br>set PYQTVERSION=5.7<br>set MAYADRIVE=m:<br>set BUILDDRIVE=v:<br><br>if exist %MAYADRIVE%\nul subst %MAYADRIVE% /d<br>subst %MAYADRIVE% "C:\Program Files\Autodesk\Maya%MAYAVERSION%"<br>set MAYA_LOCATION=%MAYADRIVE%<br><br>set MAYAPYQTBUILD=%~dp0<br>rem Removing trailing \<br>set MAYAPYQTBUILD=%MAYAPYQTBUILD:~0,-1%<br><br>if exist %BUILDDRIVE%\nul subst %BUILDDRIVE% /d<br>subst %BUILDDRIVE% "%MAYAPYQTBUILD%"<br><br>set SIPDIR=%BUILDDRIVE%\sip-%SIPVERSION%<br>set PYQTDIR=%BUILDDRIVE%\PyQt5_gpl-%PYQTVERSION%<br>rem set ADSKQTDIR=%BUILDDRIVE%\qt-%ADSKQTVERSION%<br>set QTDIR=%MAYA_LOCATION%<br><br>set PATH=%QTDIR%\bin;%PATH%<br>set MSVC_VERSION=2012<br>set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0<br>set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%<br>set _QMAKESPEC_=win32-msvc%MSVC_VERSION%<br><br>if ["%LIBPATH%"]==[""] call "%MSVC_DIR%\VC\vcvarsall" amd64<br><br>set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7<br>set LIB=%LIB%;%MAYA_LOCATION%\lib</pre>

<h3 id='WOCACAUq70U'>Build &amp; Install SIP</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACAKPSgn'>@echo off<br>set XXX=%~dp0<br>if ["%MAYAPYQTBUILD%"]==[""] call "%XXX%setup.bat"<br><br>pushd %SIPDIR%<br>rem "%MAYA_LOCATION%\bin\mayapy" configure-ng.py --spec %_QMAKESPEC_%<br>"%MAYA_LOCATION%\bin\mayapy" configure.py<br>nmake<br>nmake install<br>popd</pre>

<h3 id='WOCACA8dTeC'>Build &amp; Install PyQt</h3>

Please use the script below, you can also find it in GitHub.<br/>

<pre id='WOCACAOVIUV'>@echo off<br>set XXX=%~dp0<br>if ["%MAYAPYQTBUILD%"]==[""] call "%XXX%setup.bat"<br><br>set QMAKESPEC=%QTDIR%\mkspecs\%_QMAKESPEC_%<br>if not exist "%QMAKESPEC%\qmake.conf" (<br>    echo "You need to uncompress %MAYA_LOCATION%\mkspecs\qt-5.6.1-mkspecs.tar.gz !"<br>    goto end<br>)<br>if not exist "%MAYA_LOCATION%\include\Qt\QtCore\qdir.h" (<br>    echo "You need to uncompress %MAYA_LOCATION%\include\qt-5.6.1-include.tar.gz in %MAYA_LOCATION%\include\Qt !"<br>    goto end<br>)<br>findstr /L /C:"Headers=include/Qt" "%MAYA_LOCATION%\bin\qt.conf" &gt;nul 2&gt;&amp;1<br>if ERRORLEVEL 1 (<br>    echo "You need to edit %MAYA_LOCATION%\bin\qt.conf to use 'Headers=include/Qt'"<br>    goto end<br>)<br>findstr /L /C:"-lqtmain -lshell32" "%QTDIR%\mkspecs\common\msvc-desktop.conf" &gt;nul 2&gt;&amp;1<br>if ERRORLEVEL 1 (<br>    echo "You need to edit %QTDIR%\mkspecs\common\msvc-desktop.conf to use 'QMAKE_LIBS_QT_ENTRY     = -lqtmain -lshell32'"<br>    goto end<br>)<br>if not exist "%MAYA_LOCATION%\include\Qt\qtnfc.disabled" (<br>    echo "You need to rename %MAYA_LOCATION%\include\Qt\qtnfc to %MAYA_LOCATION\include\Qt\qtnfc.disabled"<br>    goto end<br>)<br>    <br>pushd %PYQTDIR%<br><br>"%MAYA_LOCATION%\bin\mayapy" configure.py --spec %QMAKESPEC% LIBDIR_QT="%QTDIR%\lib" INCDIR_QT="%QTDIR%\include\Qt" MOC="%QTDIR%\bin\moc.exe" --sip="%QTDIR%\Python\sip.exe" --sip-incdir="%QTDIR%\Python\include" -w --no-designer-plugin<br>nmake<br>nmake install<br>popd<br><br>:end</pre>

<br/>

You're done! Please check the testing paragraph at the end of the article.<br/>

<br/>

<h1 id='WOCACAco0Tn'>Testing </h1>

Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:<br/>

<pre id='WOCACAPKhbu'>import sys <br>from PyQt5.QtWidgets import (QWidget, QToolTip, QPushButton) <br>from PyQt5.QtGui import QFont     <br> <br>class Example(QWidget):<br>    def __init__(self):<br>        super(Example,self).__init__()<br>        self.initUI()<br><br>    def initUI(self):<br>        QToolTip.setFont(QFont('SansSerif', 10))<br>        self.setToolTip('This is a &lt;b&gt;QWidget&lt;/b&gt; widget')<br>        btn = QPushButton('Button', self)<br>        btn.setToolTip('This is a &lt;b&gt;QPushButton&lt;/b&gt; widget')<br>        btn.resize(btn.sizeHint())<br>        btn.move(50, 50) <br>        self.setGeometry(300, 300, 300, 200)<br>        self.setWindowTitle('Tooltips')<br>        self.show()<br>        <br>ex = Example() </pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Depth fix for footPrintNode samples
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: depth-fix-for-footprintnode-samples
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/06/depth-fix-for-footprintnode-samples.html 
DATE: 06/08/2017 07:46:42 PM
-----
BODY:
<p>We received a report that footprint samples aren&#39;t working properly. It turns out that the depthPriority wasn&#39;t implemented correctly. <br /> <br /> The original samples are using fixed depth(5) and when the node is duplicated, the old one is still on top of it. We can determine a proper depth with <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-SDK/cpp_ref/class_m_h_w_render_1_1_m_geometry_utilities.html#af2f27b52377c28d25d76853a7a75785c">MGeometryUtilities::displayStatus.</a></p>
<pre id="IUXACAnyNK2">    unsigned int depthPriority;<br />    switch(MHWRender::MGeometryUtilities::displayStatus(path))<br />    {<br />        case MHWRender::kLead:<br />        case MHWRender::kActive:<br />        case MHWRender::kHilite:<br />        case MHWRender::kActiveComponent:<br />            depthPriority = MHWRender::MRenderItem::sActiveWireDepthPriority;<br />            break;<br />        default:<br />            depthPriority = MHWRender::MRenderItem::sDormantFilledDepthPriority;<br />            break;<br />    }</pre>
<p>You also have to replace the depth settings. For footPrintNode sample, we are going to set depth with <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-SDK/cpp_ref/class_m_h_w_render_1_1_m_u_i_draw_manager.html#ad19b05026d05d93c1ffca4914fe81fa6">MDrawManager::setDepthPriority</a>. For footPrintNode_GeometryOverride, it is using render items; so it is <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-SDK/cpp_ref/class_m_h_w_render_1_1_m_render_item.html#a6e865e2cf5c9d818b1cbb99af2360c47">MRenderItem::DepthPriority</a>.<br /> </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to write an Arnold Translator for MPxSurfaceShapes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-write-an-arnold-translator-for-mpxsurfaceshapes
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Rendering
CATEGORY: Samples

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/05/how-to-write-an-arnold-translator-for-mpxsurfaceshapes.html 
DATE: 05/15/2017 02:37:06 AM
-----
BODY:
<p>If you are wondering why your fancy geometry created with MPxSurfaceShape is not working in renderers like Arnold, then this article is for you. Before rendering them, you&#39;ll need to create a translator or shader for your renderer.<br /><br />For Arnold, it&#0160;can be handled using extensions. To make a 3rd-party plugin work with Arnold, you&#39;ll need to write translator extension for it.There are three SDKs you are going to refer to in your project. Arnold SDK, mtoa SDK and Maya SDK.<br /><br />First, you&#39;ll need to download Arnold SDK from <a href="https://www.solidangle.com/arnold/download/">here</a>.&#0160; I am using 4.2.16.1 when writing this sample on windows platform. The SDK might be changed in the future, if you find the sample is not working anymore, please let me know.&#0160;<br /><br />Arnold extensions are dynamic libraries. So, we&#39;ll need to create a dll project in Visual Studio. Two functions are required to export in your extension. They are initializeExtension and deinitializeExtension. For the apiMeshShape extension, we only need to implement intializeExtention and leave deinitializeExtension blank.</p>
<pre id="YedACALCvn0">#include &lt;extension//Extension.h&gt;<br />#include &quot;apiMeshShapeTranslator.h&quot;<br />extern &quot;C&quot;<br />{<br />&#0160;&#0160; &#0160;DLLEXPORT void initializeExtension ( CExtension&amp; extension )<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;MStatus status;<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160;extension.RegisterTranslator(&quot;apiMesh&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;&quot;&quot;,<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;CApiMeshShapeTranslator::creator);<br />&#0160;&#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160;DLLEXPORT void deinitializeExtension ( CExtension&amp; extension )<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160;}<br /><br />}</pre>
<p>CExtension::RegisterTranslator takes 4 parameters, first is the Maya node type name. For apiMeshShape, it is apiMesh. The second parameter is the Arnold extension name, it can be empty. The third one is a creator function pointer which like Maya creator functions, returning an instance of your translator class. The forth one is optional, which is the node initialize function.<br /><br />Then we are going to write our translator. You&#39;ll need to create Arnold nodes based on your nodes info. There are different kinds of Arnold nodes, like procedural, bump2d, nurbs, etc... We are going to create an Arnold <a href="https://support.solidangle.com/display/NodeRef/polymesh">polymesh </a>node for the apiMeshShape and fill the attributes with apiMeshShape&#39;s geometry.</p>
<pre id="YedACANGZ9d">#include &lt;translators/shape/ShapeTranslator.h&gt;<br /><br />#include &lt;translators/NodeTranslator.h&gt;<br /><br />class CApiMeshShapeTranslator:public CShapeTranslator<br />{<br />public:<br />&#0160;&#0160; &#0160;virtual AtNode* CreateArnoldNodes();<br />&#0160;&#0160; &#0160;virtual void Export(AtNode* polymesh);<br />&#0160;&#0160; &#0160;virtual void Update(AtNode* polymesh);<br />&#0160;&#0160;&#0160;&#0160;<br />&#0160;&#0160; &#0160;void Export(AtNode* polymesh, bool isUpdate);<br />&#0160;&#0160; &#0160;void ExportRenderParameters(AtNode* polymesh);<br />&#0160;&#0160; &#0160;void ExportMeshData(AtNode* polymesh);<br />&#0160;&#0160; &#0160;void ExportMeshShaders(AtNode* polymesh);<br /><br />&#0160;&#0160; &#0160;static void* creator()<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;cout &lt;&lt; &quot;ApiMeshShapeTranlator loaded.&quot; &lt;&lt;endl; &#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;return new CApiMeshShapeTranslator();<br />&#0160;&#0160; &#0160;}<br />};</pre>
<p>We have to implement at least three functions to make apiMeshShape visible in Arnold. They are CreateArnoldNodes, Export and Update.<br /><br />CreateArnoldNodes will create a basic arnold type node. We are going to create and return a new polymesh here.</p>
<pre id="YedACApNfjP">AtNode* CApiMeshShapeTranslator::CreateArnoldNodes()<br />{<br />&#0160;&#0160; &#0160;return AddArnoldNode(&quot;polymesh&quot;);<br />}</pre>
<p>Export and Update are related functions, Arnold will call export at the beginning to export attributes which are not going to be changed during the IPR session and calling update later when attributes changes happened. In our scenario, geometry won&#39;t be changed, so geometry is going to be exported while lightning, shaders and transforms are going to be always updated. So, I&#39;ve created an overload function for Export&#0160;like below:</p>
<pre id="YedACASFwAX">void CApiMeshShapeTranslator::Export(AtNode* polymesh, bool isUpdate)<br />{<br />&#0160;&#0160;&#0160; //Export transforms<br />&#0160;&#0160; &#0160;ExportMatrix(polymesh);<br /><br />&#0160;&#0160; &#0160;//Export rendering parameters<br />&#0160;&#0160; &#0160;ProcessRenderFlags(polymesh);<br />&#0160;&#0160; &#0160;<br />&#0160;&#0160; &#0160;//Export light linking<br />&#0160;&#0160; &#0160;ExportLightLinking(polymesh); &#0160; &#0160;<br /><br />&#0160;&#0160; &#0160;// We could enable/disable motion deform here, but I&#39;ll ignore it and make it never deforming.<br />&#0160;&#0160; &#0160;m_motionDeform = false;<br /><br />&#0160;&#0160; &#0160;//Export shaders<br />&#0160;&#0160; &#0160;ExportMeshShaders(polymesh);<br />&#0160;&#0160; &#0160;<br />&#0160;&#0160; &#0160;//If it is an update call, we won&#39;t need to export geometry again.<br />&#0160;&#0160; &#0160;if(!isUpdate)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; //Export geometry<br />&#0160;&#0160; &#0160; &#0160; &#0160;ExportMeshData(polymesh);<br />&#0160;&#0160; &#0160;}<br />}</pre>
<p>ExportMatrix, ProcessRenderFlags and ExportLightLinking are provided by Arnold itself. If you want your shape to have motion deform, you&#39;ll need to set m_motionDeform true and implement ExportMotion. Maya provids source code for xgenTranslator. It is a good reference for how to implement motion in Arnold. In this sample, I am going to ignore it.<br /><br />During the export, I am going to export shaders first. Just provide the MObject of the dagNode to the Arnold, it will do the querying job for you.</p>
<pre id="YedACAlv2R1">void CApiMeshShapeTranslator::ExportMeshShaders(AtNode* polymesh)<br />{ &#0160; &#0160;<br />&#0160;&#0160; &#0160;//Get dag node from dagPath<br />&#0160;&#0160; &#0160;MFnDagNode fnDagNode(m_dagPath);<br />&#0160;&#0160; &#0160;<br />&#0160;&#0160; &#0160;//Get shader node from the dagNode and set it to shader attribute.<br />&#0160;&#0160; &#0160;MPlugArray connections;<br />&#0160;&#0160; &#0160;auto shadingGroup = GetNodeShadingGroup(fnDagNode.object(), 0);<br />&#0160;&#0160; &#0160;auto shader = ExportConnectedNode(shadingGroup);<br /><br />&#0160;&#0160; &#0160;AiNodeSetPtr(polymesh, &quot;shader&quot;, shader);<br />}</pre>
<p>Then, I&#39;ll need to export the meshData from apiMeshShape. apiMeshShape uses apiMeshGeom to store the geometry data and I&#39;ll get them from it. To make it possible, we&#39;ll need to modify apiMeshShape sample a little bit: making meshGeom() exported in the .lib file.</p>
<pre id="YedACAAlqeE">&#0160;&#0160;&#0160; //Modify apiMeshGeom* meshGeom(); in the apiMeshShape.h<br />&#0160;&#0160;&#0160;&#0160;__declspec(dllexport) apiMeshGeom* &#0160; &#0160; __cdecl meshGeom();</pre>
<p>Now we can get the apiMeshGeom easily in our translator. There are normals, vertices, faceCount, faceIds provided with the apiMeshGeom(UVs are not available for the sphere in the sample). So, we are going to fill nsides, vidxs, nidxs, vlist and nlist attribute of the polymesh node.</p>
<pre id="YedACADsR8z">void CApiMeshShapeTranslator::ExportMeshData(AtNode* polymesh)<br />{<br />&#0160;&#0160; &#0160;// Usually this kind of method should be with an extra parameter, step for motion blur. <br />&#0160;&#0160; &#0160;// I&#39;ll ignore it in here to make the sample as simple as possible.<br />&#0160;&#0160; &#0160;MStatus status;<br />&#0160;&#0160; &#0160;m_dagPath.extendToShape();<br />&#0160;&#0160; &#0160;MFnDagNode fnDag(m_dagPath); &#0160; &#0160;<br /><br />&#0160;&#0160; &#0160;// Get apiMeshShape node first<br />&#0160;&#0160; &#0160;auto apiMeshNode = dynamic_cast&lt;apiMesh*&gt;(fnDag.userNode());<br />&#0160;&#0160; &#0160;if(NULL == apiMeshNode)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;MGlobal::displayError(&quot;Failed to convert apiMeshShape&quot;);<br />&#0160;&#0160; &#0160; &#0160; &#0160;return;<br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160;<br />&#0160;&#0160; &#0160;auto geom = apiMeshNode-&gt;meshGeom();<br />&#0160;&#0160; &#0160;auto verticesArray = geom-&gt;vertices;<br />&#0160;&#0160; &#0160;unsigned int numVertices = verticesArray.length();<br />&#0160;&#0160; &#0160;unsigned int numNormals = geom-&gt;normals.length();<br />&#0160;&#0160; &#0160;unsigned int numPolygons = geom-&gt;faceCount;<br />&#0160;&#0160; &#0160;auto vertices = new float[verticesArray.length() * 3];<br />&#0160;&#0160; &#0160;auto normals = new float[numNormals * 3];<br />&#0160;&#0160; &#0160;<br />&#0160;&#0160; &#0160;// Get raw vertices<br />&#0160;&#0160; &#0160;for (int i = 0; i &lt; numVertices; ++i)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;vertices[i*3] = verticesArray[i].x; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;vertices[i*3 + 1] = verticesArray[i].y;<br />&#0160;&#0160; &#0160; &#0160; &#0160;vertices[i*3 + 2] = verticesArray[i].z; &#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160;// Get raw normals<br />&#0160;&#0160; &#0160;// We need to export normals if it is smoothShading and doesn&#39;t have arnold subdivision properties. For apiMeshShape, export always.<br />&#0160;&#0160; &#0160;for (int i = 0; i &lt; numNormals; ++i)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;normals[i*3] = geom-&gt;normals[i].x; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;normals[i*3 + 1] = &#0160;geom-&gt;normals[i].y;<br />&#0160;&#0160; &#0160; &#0160; &#0160;normals[i*3 + 2] = &#0160;geom-&gt;normals[i].z; &#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160;// We always export the first frame.<br />&#0160;&#0160; &#0160;// Please check XGen&#39;s sample for how to export shapes in motion.<br />&#0160;&#0160; &#0160;// We are going just export basic geometry infos(vertices, normals), <br />&#0160;&#0160; &#0160;// there could be other info like references or color sets etc... I&#39;ll skip it here.<br />&#0160;&#0160; &#0160;AtArray* uvs = nullptr;<br />&#0160;&#0160; &#0160;AtArray* nsides = nullptr;<br />&#0160;&#0160; &#0160;AtArray* vertexIndices = nullptr;<br />&#0160;&#0160; &#0160;AtArray* normalIndices = nullptr;<br /><br /><br />&#0160;&#0160; &#0160;// Component IDs<br />&#0160;&#0160; &#0160;// Vertices per polygon count<br />&#0160;&#0160; &#0160;nsides = AiArrayAllocate(numPolygons,1,AI_TYPE_UINT);<br />&#0160;&#0160; &#0160;unsigned int polygonVertexCount = 0;<br />&#0160;&#0160; &#0160;for(unsigned int i = 0; i &lt; numPolygons; ++i)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;auto numPolygonVertexCount = geom-&gt;face_counts[i];<br />&#0160;&#0160; &#0160; &#0160; &#0160;polygonVertexCount += numPolygonVertexCount;<br />&#0160;&#0160; &#0160; &#0160; &#0160;AiArraySetUInt(nsides, i, numPolygonVertexCount);<br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160;// Vertex indices and normal indices<br />&#0160;&#0160; &#0160;vertexIndices = AiArrayAllocate(polygonVertexCount, 1, AI_TYPE_UINT);<br />&#0160;&#0160; &#0160;normalIndices = AiArrayAllocate(polygonVertexCount, 1, AI_TYPE_UINT);<br /><br />&#0160;&#0160; &#0160;MIntArray polygonVertexIndices;<br />&#0160;&#0160; &#0160;unsigned int vertexIndex = 0;<br />&#0160;&#0160; &#0160;for(unsigned int polygon_id =0; polygon_id &lt; geom-&gt;face_connects.length(); ++polygon_id)<br />&#0160;&#0160; &#0160;{<br />&#0160;&#0160; &#0160; &#0160; &#0160;AiArraySetUInt(vertexIndices, polygon_id, geom-&gt;face_connects[polygon_id]); &#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;AiArraySetUInt(normalIndices, polygon_id, geom-&gt;face_connects[polygon_id]);<br /><br />&#0160;&#0160; &#0160;}<br /><br />&#0160;&#0160; &#0160;// Set array parameters<br />&#0160;&#0160; &#0160;AiNodeSetArray(polymesh, &quot;vlist&quot;, AiArrayConvert(numVertices * 3, 1, AI_TYPE_FLOAT, vertices));<br />&#0160;&#0160; &#0160;AiNodeSetArray(polymesh, &quot;nlist&quot;, AiArrayConvert(numNormals * 3, 1, AI_TYPE_FLOAT, normals));<br /><br />&#0160;&#0160; &#0160;AiNodeSetArray(polymesh, &quot;nsides&quot;, nsides);<br />&#0160;&#0160; &#0160;AiNodeSetArray(polymesh, &quot;vidxs&quot;, vertexIndices);<br />&#0160;&#0160; &#0160;AiNodeSetArray(polymesh,&quot;nidxs&quot;, normalIndices); &#0160; &#0160;<br />}</pre>
<p>Finally, here is Export and Update functions.</p>
<pre id="YedACAQnXEy">void CApiMeshShapeTranslator::Update(AtNode* polymesh)<br />{<br />&#0160;&#0160; &#0160;Export(polymesh, true);<br />}<br /><br />void CApiMeshShapeTranslator::Export(AtNode* polymesh)<br />{<br />&#0160;&#0160; &#0160;Export(polymesh, false);<br />}</pre>
<p>After building it, copy the ArnoldTranslator.dll into mtoadeploy/2017/extension folder. After reloading the mtoa plugin in Maya, you can find the apiMesh is rendered in Arnold Renderer. Hooray!&#0160;Solidangle&#0160;also provides a <a href="https://support.solidangle.com/display/AFMUG/Translator+of+a+custom+node">tutorial </a>on their website.&#0160;You can also use it as a reference.&#0160;&#0160;<br /><br /></p>
<div data-section-style="11"><img alt="" height="366" id="YedACAOBena" src="https://quip.com/blob/YedAAA0KkHD/SQnrw_17uyskA11XEdLIbA?a=0gNmCp5HlTzRIafYrHstJnFBASGJAAeGyMaAP052Mwca" width="800" /></div>
<p>The full sample code is available on the GitHub, here is the <a href="https://github.com/iamsleepy/ApiMeshShapeArnoldTranslator">link</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build Pillow on windows with Maya 2017/2018
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-build-pillow-on-windows-with-maya-2017
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/05/how-to-build-pillow-on-windows-with-maya-2017.html 
DATE: 05/08/2017 12:39:12 AM
-----
BODY:
<p>Pillow is a Python image library with several other libraries built-in. Because it is originally built with VC2008, we can&#39;t use the wheel package with Maya. We&#39;ll need to build it manually. I wrote this blog for Maya 2017 at first. For Maya 2018, please use replace building environment with VS2015 and Windows SDK 8.1.</p>
<h2 id="MeKACAIkM6Y">Requirements</h2>
<p>VS2012 update 4</p>
<p>CMake &gt; 3.3<br /> <br /> Python 2.7.11 source code</p>
<p>Windows SDK 7.1A</p>
<p>Preparation</p>
<p>Before we build Pillow, we need to install setup tools.<br /> <br /> Run an <strong>VS2012 x64 Native Tools Command Prompt</strong> with administrator privilege. Set following environment variables:</p>
<pre id="MeKACAMnmrA">Path=%path%;Maya2017/bin<br />Python=Maya2017/bin</pre>
<p>Replace Maya2017 with your Maya 2017 installation path. Then make a copy of<strong> mayapy.exe</strong> in the same folder renamed as <strong>python.exe. </strong>We are going to run build commands in this command prompt later.<br /> <br /> Download the following packages from python packages:<br /> <br /> <em><strong>six, packaging, pyparsing, appdirs, setuptools, olefile, nose(for testing only)</strong></em><br /> <br /> Install them in order, using the following commands:</p>
<pre id="MeKACAWu8lc">mayapy setup.py build<br />mayapy setup.py install</pre>
<p>Copy the include folder inside python source into <strong><em>Maya2017/Python</em></strong> and copy<strong><em> Maya2017/libs/python27.lib</em></strong> into <strong><em>Maya2017/Python/Libs.</em></strong><br /> If the <strong><em>Maya/2017/Python/Libs</em></strong> folder doesn&#39;t exist, you&#39;ll have to create it manually. I&#39;ll recommend that you to do it at the end. I&#39;ll explain it later.</p>
<h2 id="MeKACAtMndl">Build the Pillow imaging libraries</h2>
<p>Here is how I built the Pillow-4.1.0 with Maya2017 and it is built with several libraries to support different image formats. For Maya 2018, you&#39;ll need to use VS2015 and some libraries are changed in Pillow 5.1/5.2. Some libraries don&#39;t provide a VS2015 solution, you could upgrade VS2012 solutions to 2015 by changing the project configuration, (e.g. toolset is Visual Studio 2015 and Platform SDK 8.1).<br /> <br /> The build script isn&#39;t working well, so we have to build those libraries manually. You can find the required libraries inside <strong><em>winbuild/config.py</em></strong> . Please download them first.<br /> <br /> We are going to build with MinSizeRel or Release configuration on x64 platform by default. If it is a different configuration, I&#39;ll explain it. The <em>/</em> is root path of each corresponding libraries&#39; source code.<br /> <br /> <strong>Mandatory libraries</strong></p>
<h3 id="MeKACA7RrAN"><span style="font-size: 11pt;">Zlib1.2.11</span></h3>
<p>Open the solution file inside /<em><strong>contrib/vstudio/vc11(for Maya 2018, please use vc14), </strong></em>build the zlibstat project with ReleaseWithoutASM and x64 platform. Copy and rename zlibstat.lib <strong><em>/zlib.lib.</em></strong><br /> <br /> <strong>JPEGsr9b/9c</strong><br /> <br /> Copy win32.mak from Windows SDK 7.1A/include into /. Run the following command in command prompt.</p>
<pre id="MeKACAN2oKc">nmake -f makefile.vc setup-v10</pre>
<p>It will generate a VS2010 solution file(jpeg.sln). Open and upgrade it with VS2012. After building it, copy jpeg.lib to /.</p>
<p>If you are using Pillow 5.2, you&#39;ll need JPEGsr9c. It doesn&#39;t support visual studio 2012/2015. You&#39;ll need to download a Visual studio 2017 and make the project 2015 and no longer requires win32.mak.<br /> <br /> <strong>Optional libraries</strong><br /> <br /> <strong>TIFF 4.0.7/4.0.9</strong><br /> <br /> Use CMake to generate a VS2012 solution and build the tiff project. Default configuration doesn&#39;t have AdobeDeflate and Jpeg Compression support.&#0160; You can modify the config file to make tiff library support it. Zlib and jpeg configurations could be missing too.Please open advanced settings in CMake and set locations to the libraries we&#39;ve built earlier. I found this when trying to build Pillow 5.2 with a forum user, here is a screenshot of his settings on his computer.</p>
<p><img alt="tiff_cmake.PNG" src="https://forums.autodesk.com/t5/image/serverpage/image-id/521235iC4CD267D17F283E7/image-size/large?v=1.0&amp;px=999" title="tiff_cmake.PNG" /></p>
<p>Thanks him for providing this feedback and let me use his screenshot:)</p>
<p>When it is build, the <strong>tiff.lib</strong> should be copied into <strong><em>/libtiff</em></strong>. If not, please copy it. <br /> Copy <strong><em>/build/libtiff/tiffconf.h</em></strong> to <strong><em>/libtiff. </em></strong><br /> Copy <strong>tiff.dll</strong> to Maya2017/bin or you can copy it into PIL folder after building Pillow later. If there is a tiffxx.dll, please copy it too.</p>
<p>If you find unistd.h is missing, please find a dummy one from the internet. I used a file from stackoverflow and put it into VC&#39;s include folder. For VS2015, you may get a snprintf error, please remove the declarations of them in tiff libraries.</p>
<p><br /> <strong>FreeType 2.7.1</strong><br /> <br /> Open and upgrade <em><strong>/builds/windows/vc2010/freetype.sln</strong></em> with VS2012. After building it, copy and rename <em><strong>/objs/vc2012/x64/freetype271.lib</strong></em> to <strong><em>/include/freetype.lib.</em></strong></p>
<p>&#0160;</p>
<p><strong>lcms 2.2.7</strong><br /> <br /> Open <strong><em>/Projects/VC2012/lcms2.sln</em></strong>, build <strong>lcms2</strong> project. Copy and rename<strong><em> /lib/MS/lcms2.lib</em></strong> to <em><strong>/include/lcms2.lib.</strong></em></p>
<p>Copy lcms2.dll to Maya2017/bin or you can copy it into PIL folder after building Pillow later.</p>
<p><br /> <br /> <strong>webp 0.6.0/0.6.1</strong><br /> <br /> Build it with following command:</p>
<p>nmake -f Makefile.vc CFG=release-static RTLIBCFG=static OBJDIR=output all</p>
<p>Copy files from <strong><em>/output/release-static/x64/lib</em></strong> to<strong><em> Pillow-4.1.0/</em></strong>. And copy <em><strong>/src/webp</strong></em> folder to<strong><em> Pillow-4.1.0/libImaging</em></strong><br /> </p>
<p><strong>Openjpeg 2.1.2/openjpeg 2.3.0</strong><br /> <br /> Use CMake to generate a VS2012 solution and build openjp2 project. Create a folder named openjpeg-2.1.2(case sensitive) in /bin, Copy following files from <strong>/src/lib/openjp2</strong> into it.</p>
<pre id="MeKACArJVa1">openjpeg.h<br />opj_config.h<br />opj_stdint.h</pre>
<p>Copy openjp2.lib into Pillow4.1.0/ and copy openjp2.dll to Maya2017/bin or you can copy it into PIL folder after building Pillow later.</p>
<h2 id="MeKACAnfFKk"><strong>Build Pillow</strong></h2>
<p>We can start to build Pillow now. Open setup.py and you&#39;ll find several root variables starting from line 107. Please put the path to the lib file in it. Latest ImageQuant won&#39;t be compiled with VS(allthough it claimed supporting VS2015/Vs2017 in msvc branch, but it uses OpenMP 3.0 which VS2015/2017 doesn&#39;t support when I am writing this blog), so we are ignoring it. The path of JPEG2K should be the path contains openjpeg-2.1.2/openjpeg-2.3.0 folder.</p>
<p>Here is how my libraries look like in Pillow setup.py(pillow 5.1)</p>
<p><span style="font-family: courier new, courier; font-size: 11pt;">JPEG_ROOT = &quot;C:\\pillow-depends\\jpeg-9b&quot;</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">JPEG2K_ROOT = &quot;C:\\pillow-depends\\openjpeg-2.3.0\\bin&quot;</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">ZLIB_ROOT = &quot;C:\\pillow-depends\\zlib-1.2.11&quot;</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">IMAGEQUANT_ROOT = None</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">TIFF_ROOT = &quot;C:\\pillow-depends\\tiff-4.0.9\\libtiff&quot;</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">FREETYPE_ROOT = &quot;C:\\pillow-depends\\freetype-2.9\\include&quot;</span><br /><span style="font-family: courier new, courier; font-size: 11pt;">LCMS_ROOT = &quot;C:\\pillow-depends\\lcms2-2.7\\include&quot;</span></p>
<p>The locations of libraries:</p>
<p><span style="font-family: courier new, courier;">Directory of C:\pillow-depends\freetype-2.9\include</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 04:14 PM 44,574 freetype.lib</span></p>
<p><br /><span style="font-family: courier new, courier;">Directory of C:\pillow-depends\jpeg-9b</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 03:27 PM 4,487,122 jpeg.lib</span><br /><br /></p>
<p><span style="font-family: courier new, courier;">Directory of C:\pillow-depends\lcms2-2.7\include</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 05:26 PM 76,442 lcms2.lib</span><br /><span style="font-family: courier new, courier;">&#0160;</span></p>
<p><span style="font-family: courier new, courier;">Directory of C:\pillow-depends\tiff-4.0.9\libtiff</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 04:02 PM 35,950 tiff.lib</span><br /><br /></p>
<p><span style="font-family: courier new, courier;">Directory of C:\pillow-depends\zlib-1.2.11</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 03:29 PM 728,368 zlib.lib</span><br /><br /></p>
<p><span style="font-family: courier new, courier;">Directory of c:\pillow-depends\openjpeg-2.3.0\bin\openjpeg-2.3.0</span></p>
<p><span style="font-family: courier new, courier;">10/05/2017 06:23 AM 59,369 openjpeg.h</span><br /><span style="font-family: courier new, courier;">07/09/2018 04:24 PM 342 opj_config.h</span><br /><span style="font-family: courier new, courier;">10/05/2017 06:23 AM 2,171 opj_stdint.h</span></p>
<p><span style="font-family: courier new, courier;">Directory of E:\Pillow-5.1.0</span></p>
<p><span style="font-family: courier new, courier;">07/09/2018 05:42 PM 1,441,052 libwebp.lib</span><br /><span style="font-family: courier new, courier;">07/09/2018 05:41 PM 701,406 libwebpdecoder.lib</span><br /><span style="font-family: courier new, courier;">07/09/2018 04:25 PM 12,796 openjp2.lib</span><br /><span style="font-family: courier new, courier;">07/09/2018 05:34 PM 942,016 webp.lib</span><br /><span style="font-family: courier new, courier;">07/09/2018 05:34 PM 29,000 webpdemux.lib</span></p>
<p><span style="font-family: courier new, courier;">Directory of E:\Pillow-5.1.0\src\libImaging\webp</span></p>
<p><span style="font-family: courier new, courier;">11/29/2017 04:15 AM 3,972 config.h.in</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 23,150 decode.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 15,606 demux.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 27,481 encode.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 3,863 format_constants.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 22,824 mux.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 3,150 mux_types.h</span><br /><span style="font-family: courier new, courier;">11/29/2017 04:01 AM 1,665 types.h</span></p>
<p>I recommend to enable DEBUG flag and copy the Python include folder after running the script. It will print debug output and automatically stops when python.h is not found. It is very useful to see if any paths are inappropriate. If everything is fine, please copy the include folder from Python 2.7.11 to Maya2017/Python.<br /> <br /> The rest is simple, same as other python libraries:</p>
<pre id="MeKACAy0tAB">mayapy setup.py build<br />mayapy setup.py install</pre>
<p>You can test it with test-install.py. There should be 8 errors because the tiff library doesn&#39;t support certain types. <br /> <br /> If you have a failed case in test_image.getim.py, it isn&#39;t a library issue. The test case sometimes won&#39;t work, so open the test case and modify line 13 from int to (int, long) will fix the failing case.<br /> <br /> Enjoy it now.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Maya, Python, Pillow
-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Improve performance with MPxNode::preEvaluation &amp; MPxNode::postEvaluation
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: improve-performance-with-mpxnodepreevaluation-mpxnodepostevaluation
CATEGORY: Animation
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/05/improve-performance-with-mpxnodepreevaluation-mpxnodepostevaluation.html 
DATE: 05/01/2017 11:43:00 AM
-----
BODY:
<p>With last <a href="http://around-the-corner.typepad.com/adn/2017/03/suggestions-best-practices-while-migrating-your-plugin-to-parallel-evaluation.html">post </a>we talked about the Best practices while migrating your plugin to Parallel Evaluation, in this post, we will talk about the following 2 new methods, and how to make use of them to improve the performance:  </p> <ul> <strong> <li>MPxNode::preEvaluation </li>     <li>MPxNode::postEvaluation </li></strong> </ul> <p> Within the old DG system, because MPxNode::setDependentsDirty function is called during dirty propagation, it can be used to manage attribute dirtying, and sometimes, we can cache the computed data in this method to avoid expensive calculations in MPxNode::compute. Let’s take the sample plugin simpleEvaluationNode as an example:  </p>   <p>Every time when the input and aTimeInput got dirty, set cachedValueIsValid to false to make it be re-calculated.   </p>  <div style="font-size: 10pt; border-top: #000080 1px solid; font-family: verdana, tahoma, arial, sans-serif; border-right: #000080 1px solid; background: #000080; border-bottom: #000080 1px solid; font-weight: bold; color: #fff; padding-bottom: 2px; padding-top: 2px; padding-left: 5px; border-left: #000080 1px solid; padding-right: 5px">Code Snippet</div>  <div style="font-size: 10pt; border-top: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; border-right: #000080 1px solid; border-bottom: #000080 1px solid; color: #000; border-left: #000080 1px solid">   <div style="overflow: auto; background: #ddd; max-height: 300px">     <ol style="background: #ffffff; padding-bottom: 0px; padding-top: 0px; padding-left: 5px; margin: 0px 0px 0px 2em; padding-right: 0px">       <li><span style="background: #ffffff; color: #000000">MStatus simpleEvaluationNode::setDependentsDirty( </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000"> MPlug&amp;</span><span style="background: #ffffff; color: #0000ff">amp</span><span style="background: #ffffff; color: #000000">; plug, MPlugArray&amp;</span><span style="background: #ffffff; color: #0000ff">amp</span><span style="background: #ffffff; color: #000000">; plugArray)</span> </li>        <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> (plug == input || plug == aTimeInput )</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">cachedValueIsValid = </span><span style="background: #ffffff; color: #0000ff">false</span><span style="background: #ffffff; color: #000000">;</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MPxNode::setDependentsDirty(plug, plugArray);</span> </li>        <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">}</span> </li>     </ol>   </div> </div>  <p>Within compute() method, only do the expensive calculation when cachedValueIsValid is false.  </p>  <div style="font-size: 10pt; border-top: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; border-right: #000080 1px solid; border-bottom: #000080 1px solid; color: #000; border-left: #000080 1px solid">   <div style="font-family: verdana, tahoma, arial, sans-serif; background: #000080; font-weight: bold; color: #fff; padding-bottom: 2px; padding-top: 2px; padding-left: 5px; padding-right: 5px">Code Snippet</div>    <div style="overflow: auto; background: #ddd; max-height: 300px">     <ol style="background: #ffffff; padding-bottom: 0px; padding-top: 0px; padding-left: 5px; margin: 0px 0px 0px 2.5em; padding-right: 0px">       <li><span style="background: #ffffff; color: #000000">MStatus simpleEvaluationNode::compute( </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000"> MPlug&amp;</span><span style="background: #ffffff; color: #0000ff">amp</span><span style="background: #ffffff; color: #000000">; plug, MDataBlock&amp;</span><span style="background: #ffffff; color: #0000ff">amp</span><span style="background: #ffffff; color: #000000">; data )</span> </li>        <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160; </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000">( plug == output )</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{&#160; </span></li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">... ...</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> ( ! cachedValueIsValid )</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MTime time = inputTimeData.asTime();</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">cachedValue = doExpensiveCalculation( inputData.asFloat() , (</span><span style="background: #ffffff; color: #0000ff">float</span><span style="background: #ffffff; color: #000000">) time.value() );</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">cachedValueIsValid = </span><span style="background: #ffffff; color: #0000ff">true</span><span style="background: #ffffff; color: #000000">;</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MDataHandle outputHandle = data.outputValue( simpleEvaluationNode::output );</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">outputHandle.set( cachedValue );</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">data.setClean(plug);</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160; </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MS::kSuccess;</span> </li>        <li><span style="background: #ffffff; color: #000000">}</span> </li>     </ol>   </div> </div>  <p>This works well within old DG, but the EM evaluation does not propagate dirty messages, the cached data in MPxNode::setDependentsDirty will no longer applies during EM evaluating. So how to do the same thing with EM? One of the solution is MPxNode::preEvaluation.  </p> <p>As discussed previously, once the EG has been built, dirty propagation is disabled and the EG is re-used. Therefore, any custom logic in your plug-in that depends on setDependentsDirty no longer applies. MPxNode::preEvaluation allows your plug-in to determine which plugs/attributes are dirty and if any action is needed, you can use the new MEvaluationNode class to determine what has been dirtied.   </p>  <div style="font-size: 10pt; border-top: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; border-right: #000080 1px solid; border-bottom: #000080 1px solid; color: #000; border-left: #000080 1px solid">   <div style="font-family: verdana, tahoma, arial, sans-serif; background: #000080; font-weight: bold; color: #fff; padding-bottom: 2px; padding-top: 2px; padding-left: 5px; padding-right: 5px">Code Snippet</div>    <div style="overflow: auto; background: #ddd; max-height: 300px">     <ol style="background: #ffffff; padding-bottom: 0px; padding-top: 0px; padding-left: 5px; margin: 0px 0px 0px 2.5em; padding-right: 0px">       <li>&#160; <span style="background: #ffffff; color: #000000">MStatus simpleEvaluationNode::preEvaluation( </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000">MDGContext&amp; context, </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000"> MEvaluationNode&amp; evaluationNode )</span> </li>        <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MStatus status;</span> </li>        <li style="background: #f3f3f3">&#160; </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// we use m_CachedValueIsValid only for normal context</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000">( !context.isNormal() ) </span></li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MStatus::kFailure;</span> </li>        <li style="background: #f3f3f3">&#160; </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000">( ( evaluationNode.dirtyPlugExists(input, &amp;status) &amp;&amp; status ) || </span></li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">( evaluationNode.dirtyPlugExists(aTimeInput, &amp;status) &amp;&amp; status ) )</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">cachedValueIsValid = </span><span style="background: #ffffff; color: #0000ff">false</span><span style="background: #ffffff; color: #000000">;</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MS::kSuccess;</span> </li>        <li><span style="background: #ffffff; color: #000000">}</span> </li>     </ol>   </div> </div>  <br />If you want to check the whole project, please look at <strong>simpleEvaluationNode</strong> sample under devkit.   <p>Another new method, MPxNode::postEvaluation, is called once all computations have been performed on a specific node instance. Since this method is called from a worker thread, it performs calculations for downstream graph operations without blocking other Maya processing tasks of non-dependent nodes.  </p> <p>Within the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_simple_evaluation_draw_2simple_evaluation_draw_8cpp_example_html">simpleEvaluationDraw</a> devkit example, we can use postEvaluation method to performance heavy calculations for rendering, if this plugin is running in regular evaluation, Maya will slow down because evaluation is blocked whenever expensive calculations in postEvaluation are performed. But if you run it in Parallel Evaluation Mode, a worker thread calls the postEvaluation method and prepares data for subsequent drawing operations, so it will be much faster than in regular DG evaluation, and when testing, you will see higher frame rates in Parallel evaluation versus regular or serial evaluation. But please make sure that code in postEvaluation should be thread-safe.   </p>  <div style="font-size: 10pt; border-top: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; border-right: #000080 1px solid; border-bottom: #000080 1px solid; color: #000; border-left: #000080 1px solid">   <div style="font-family: verdana, tahoma, arial, sans-serif; background: #000080; font-weight: bold; color: #fff; padding-bottom: 2px; padding-top: 2px; padding-left: 5px; padding-right: 5px">Code Snippet</div>    <div style="overflow: auto; background: #ddd; max-height: 300px">     <ol style="background: #ffffff; padding-bottom: 0px; padding-top: 0px; padding-left: 5px; margin: 0px 0px 0px 2.5em; padding-right: 0px">       <li>&#160; <span style="background: #ffffff; color: #000000">MStatus simpleEvaluationDraw::postEvaluation( </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000">MDGContext&amp; context, </span><span style="background: #ffffff; color: #0000ff">const</span><span style="background: #ffffff; color: #000000"> MEvaluationNode&amp; evaluationNode, PostEvaluationType evalType )</span> </li>        <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000">( !context.isNormal() ) </span></li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MStatus::kFailure;</span> </li>        <li>&#160; </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MStatus status;</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000">(evalType == kLeaveDirty)</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">scaleUpToDate = </span><span style="background: #ffffff; color: #0000ff">false</span><span style="background: #ffffff; color: #000000">;</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">else</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> ( (evaluationNode.dirtyPlugExists(aCopies, &amp;status) &amp;&amp; status ) || </span></li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">( evaluationNode.dirtyPlugExists(aTimeInput, &amp;status) &amp;&amp; status ) )</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MDataBlock block = forceCache();</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MDataHandle inputTimeData = block.inputValue( aTimeInput, &amp;status );</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> ( status )</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MDataHandle copiesData = block.inputValue( aCopies, &amp;status );</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> ( status )</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// A made up calculation to slow down processing</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">//</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">MTime time = inputTimeData.asTime();</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">int</span><span style="background: #ffffff; color: #000000"> copies = copiesData.asInt();</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">double</span><span style="background: #ffffff; color: #000000"> t = time.value();</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> ( ! scaleUpToDate )</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">scaleXBy = doExpensiveCalculation( copies, t );</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// Mark the scale as up to date so that draw does not</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// have to recompute it</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">scaleUpToDate = </span><span style="background: #ffffff; color: #0000ff">true</span><span style="background: #ffffff; color: #000000">;</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>        <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">return</span><span style="background: #ffffff; color: #000000"> MStatus::kSuccess;</span> </li>        <li><span style="background: #ffffff; color: #000000">}</span> </li>     </ol>   </div> </div>  <p>Please also check the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_simple_evaluation_draw_2simple_evaluation_draw_8cpp_example_html">simpleEvaluationDraw</a> devkit example for the whole project.   </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Suggestions &amp; Best practices while migrating your plugin to Parallel Evaluation
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: suggestions-best-practices-while-migrating-your-plugin-to-parallel-evaluation
CATEGORY: Animation
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/03/suggestions-best-practices-while-migrating-your-plugin-to-parallel-evaluation.html 
DATE: 03/15/2017 12:19:00 PM
-----
BODY:
<p>As we know, starting from Maya 2016, Maya introduces a new evaluation model that enabled better utilization of computer resources by distributing computation over all available cores and taking advantage of GPU compute power. Unlike previous versions of Maya, which was limited to node-level parallelisms, Maya now includes a mechanism for scene-level analysis and parallelization. For example, if your scene contains different characters that are unconstrained to one another, Maya can evaluates each character at the same time. </p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb099a17f4970d-pi"><img title="dag-holly_0" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="dag-holly_0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb099a17fc970d-pi" width="323" height="389" /></a>     <br />At the heart of Maya’s new evaluation architecture is an <b><b>Evaluation Manager (EM)</b></b>, responsible for creating a parallel-friendly description of your scene, called the <b><b>Evaluation Graph (EG)</b></b>. The EM schedules EG nodes across available compute resources. If you are not familiar with Maya EM/EG, and want to have a deep idea about the background, I suggest you can check the in-depth technical doc at <a href="http://www.autodesk.com/using-parallel-maya">Using Parallel Maya</a>.     <br />Here, I just want to bring up some best practice and suggestions to avoid some issues while migrating or make use of the Maya Parallel Evaluation in your plugin.     <br />In general, if your plug-in plays by the DG rules, there is not much you need to change in your plug-in to make it work in Parallel mode. Porting your plug-in so it works in Parallel may be as simple as recompiling it against the latest version of OpenMaya. But, if the EM generates different results than DG-based evaluation, you need to check these items to make sure that your plug-in follow best practices:</p>  <ul>   <li><b>Be careful with MPxNode::setDependentsDirty().</b> </li> </ul>  <blockquote>   <p>If your scene uses custom plug-ins that rely on the <code>MPxNode::setDependentsDirty</code> function to manage attribute dirtying, this may cause some problems. Plug-in developer sometimes use <code>MPxNode::setDependentsDirty</code> to avoid expensive calculations in <code>MPxNode::compute</code> by monitoring and/or altering dependencies and storing computed results for later re-use. </p>    <p>Since the EM relies on dirty propagation to create the EG, any custom plug-in logic that alters dependencies may interfere with the construction of a correct EG. Furthermore, since the EM evaluation does not propagate dirty messages, any custom caching or computation in <code>MPxNode::setDependentsDirty</code> is not called while the EM is evaluating. I will talk detail about the solution in next blog post. </p> </blockquote> <b></b>  <ul>   <li><b>Handles requests for evaluation at all levels of the plug tree. </b></li> </ul>  <blockquote>   <p>While the DG can request plug values at any level, the EM always requests the root plug. This mostly happen when you have a compound attribute, for example, for plug N.gp[0].p[1], your compute() method must handle requests for evaluation of N.gp, N.gp[0], N.gp[0].p, and N.gp[0].p[1]. Recently we happen to see an issue which is caused by not including the root plug in compute() method.&#160;&#160; </p> </blockquote>  <ul>   <li><b><b>Overrides MPxNode::compute(). </b></b></li> </ul>  <blockquote>   <p>This is especially true of classes extending MPxTransform which previously relied on asMatrix(). See the rockingTransform SDK sample. For classes deriving from MPxDeformerNode and MPxGeometryFilter, override the deform() method. </p> </blockquote> Besides the above suggestions, there are some other recommended best practices include:   <ul>   <li><b><b>Avoid storing state in static variables.</b></b> Store node state/settings in attributes. This has the additional benefit of automatically saving/restoring the plug-in state when Maya files are written/read. </li>    <li><b><b>Node computation should not have any dependencies beyond input values.</b></b> Maya nodes should be like functions. Output values should be computed from input state and node-specific internal logic. Your node should never walk the graph or try to circumvent the DG. </li> </ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Integrate p4 Version Control in Motionbuilder
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: integrate-p4-version-control-in-motionbuilder
CATEGORY: Autodesk
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/01/integrate-p4-version-control-in-motionbuilder.html 
DATE: 01/17/2017 03:21:00 PM
-----
BODY:
<p>Version Control is an important feature for a team to work together, and Motionbuilder has its own version control manager that uses simplified versions of the Perforce and Microsoft Visual SourceSafe version control software products. </p>  <p>But, how to set it up? How to use the provided API to operate with version control? There are very few information about this, but recently, I spent some time on this, and in what follows I will talk about how to set it up and how to use these API to help you get started. </p>  <p>How to set it up? Let’s use Perforce as example, here are 4 steps: </p>  <ul>   <li>Install Perforce if you do not have, and open it, connect to a server with a specified workspace.      <br /><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb096df0f0970d-pi"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="image" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d254ff6b970c-pi" width="386" height="222" /></a> </li>    <li>Open the file \\MyDocuments\MB\2017-x64\config\*.Application.txt, and add following:      <pre class="brush:python;toolbar: false;">[Version Control]
AskOnStartup = Yes
CurrentManager = Perforce
Enabled = Yes</pre>
  </li>

  <li>Open the file \\MyDocuments\MB\2017-x64\config\*.Perforce.txt, and add following, please make sure to change the User and Workspace to the one you used in P4: 
    <pre class="brush:python;toolbar: false;">[Perforce]
CheckOutOnLoad = ASK
UploadOnSave = ASK
AddOnNewSave = ASK
CheckInOnClose = ASK
User = MY_USERNAME
Workspace = MY_WORKSPACE</pre>
  </li>

  <li>Run Motionbuilder, you should see a “Version Control” Menu as following picture. <a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8cad65c970b-pi"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="image" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d254ff70970c-pi" width="387" height="144" /></a> <a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d254ff74970c-pi"><img title="image" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="image" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d254ff76970c-pi" width="387" height="202" /></a> </li>
</ul>

<p>Until now, everything should be all set, and you can use the integrated version control menu to work on FBX file with Perforce. </p>

<p>But, how I can use the API to work with version control tools? Within Motionbuilder, it provides 4 classes: 
  <br /><b><b><code><i>- FBAssetMng</i></code></b></b> 

  <br /><b><b><code><i>- FBAssetItem</i></code></b></b> 

  <br /><b><b><code><i>- FBAssetFile</i></code></b></b> 

  <br /><b><b><code><i>- FBAssetFolder</i></code></b></b> </p>

<p>FBAssetMng is used to access asset manager functionity to get files locally or from a server. You cannot instance this class because it’s a virtual class, instead, you can get it from FBSystem().AssetManager if there is already an asset manager set up. When you get the asset manager, you can use the following method to get the folder or file: </p>

<ul>
  <li><i><i><code>GetAssetFileFromLocalPath() </code></i></i></li>

  <li><i><i><code>GetAssetFile() </code></i></i></li>

  <li><i><i><code>GetAssetFolderFromLocalPath() </code></i></i></li>

  <li><i><i><code>GetAssetFolder() </code></i></i></li>
</ul>

<p>Here is a simple example to use these methods, please make sure using “/” instead of “\”: </p>

<pre class="brush:python;toolbar: false;">srvPath = &quot;//depot/mytest/ test.fbx&quot;
localPath = &quot;C:/mytest/test.fbx&quot;
asset_mgn = FBSystem().AssetManager
asset_file1 = asset_mgn.GetAssetFileFromLocalPath(localPath)
asset_file2 = asset_mgn.GetAssetFile(srvPath)</pre>

<p>Or you can use BrowseForFile() to browser a FBX file. </p>

<p>When you got a folder or file, you can do a couple of operations per your request, usually, the following methods are often used: </p>

<ul>
  <li><i><code><i>CheckIn</i>()</code></i> </li>

  <li><i><code><i>CheckOut</i>()</code></i> </li>

  <li><i><code><i>GetLatest</i>()</code></i> </li>

  <li><i><code><i>UndoCheckOut</i>()</code></i> </li>
</ul>

<p>These methods are pretty straightforward, please refer the <a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./cpp_ref/class_o_r_s_d_k2017_1_1_f_b_asset_item.html">API help doc</a> for each of these methods if you are interested. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to import/export Render Setup with Python
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: how-to-importexport-render-setup-with-python
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Rendering

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/01/how-to-importexport-render-setup-with-python.html 
DATE: 01/13/2017 05:55:18 AM
-----
BODY:
<style>
code, pre {
    font-family: Consolas, "Liberation Mono", Menlo, "Courier Prime Web", Courier, monospace;
    background: #f3f3f3;
}

code {
    padding: 1px;
    margin: 0 -1px;
    border-radius: 3px;
}

pre {
    display: block;
    line-height: 20px;
    text-shadow: 0 1px white;
    padding: 5px 5px 5px 30px;
    white-space: nowrap;
    position: relative;
    margin: 1em 0;
}

pre:before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 15px;
    border-left: solid 1px #dadada;
}

</style>
<p>Render setup is very useful for managing render layers and it can import and export render layers for later usage. However, the information on how to&nbsp;import/export it in Python is quite sparse. After doing some research&nbsp;on our testing code, I found that it is quite easy.<br /><br /> There is renderSetup.decode and renderSetup.encode for import and export, respectively.<br /><br /> The prototype&nbsp;for decode is &nbsp;<span style="font-family: courier new,courier;">decode(jsonObject, importOption, optionalPrefix)</span>, where <br /> &nbsp;- the <span style="font-family: courier new,courier;">jsonObject</span> is the json string you'll need to import; <br /> &nbsp;- the <span style="font-family: courier new,courier;">importOption</span> could be one of the DECODE_AND_RENAME, DECODE_AND_MERGE, DECODE_AND_OVERWRITE value which you could find in the import dialogue;<br /> &nbsp;- the <span style="font-family: courier new,courier;">optionalPrefix</span> is the prepend string and it could be None (if you don't want a prefix) and it is only working with DECODE_AND_RENAME option.<br /><br /> The export command is easier, as it has only one parameter called <span style="font-family: courier new,courier;">Note</span>. This valie can be&nbsp;“None” if you do not want to provide a Note.</p>
<pre id="bMDACAwljFC">import maya.app.renderSetup.model.renderSetup as renderSetup<br /><br />import json<br /><br />def importRenderSetup(filename):<br />&nbsp;&nbsp; &nbsp;with open(filename, "r") as file:<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;renderSetup.instance().decode(json.load(file), renderSetup.DECODE_AND_OVERWRITE, None)<br />&nbsp;<br />def exportRenderSetup(filename, note = None):<br />&nbsp;&nbsp; &nbsp;with open(filename, "w+") as file:<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;json.dump(renderSetup.instance().encode(note), fp=file, indent=2, sort_keys=True)</pre>
<p>You can use above code snippet to import/export your render setup in Maya.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: All about modifying reference file in Motionbuilder
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: all-about-modifying-reference-file-in-motionbuilder
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2017/01/all-about-modifying-reference-file-in-motionbuilder.html 
DATE: 01/11/2017 09:43:00 AM
-----
BODY:
<p>I believe most of you are familiar with File Reference System, it’s commonly used in different Autodesk products, including Motionbuilder. </p>  <p>Recently, some partners are working with file reference in Motionbuilder, they have some confusion and also find some issues. I reviewed this feature on <a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./files/GUID-76FBC919-01B2-4DF5-9CAA-EC1FB43047E1.htm">Mobu SDK help</a> again, and I think it worth a post to mention some important point about modifying referenced file within Motionbuilder, we will start with some questions.&#160; </p>  <p>First of all, there are following 2 terms you need to understand:    <br /></p>  <ul>   <li><b><b>Referenced Object</b></b> – A referenced object is a top level object that contains zero or more referenced items. </li>    <li><b><b>Referenced Item</b></b> – A referenced item is any node (in a hierarchy or alone) within a referenced object. </li> </ul>  <p><b>Question 1: How to modify a referenced item/object?</b> </p>  <p>Ok, when an external FBX file is referenced into the scene, how to modify the items in referenced object? Actually, it’s pretty simple, you can modify them almost like a native object, for example, we can change scale of a cube in referenced file as follow: </p>  <pre class="brush:python;toolbar: false;">FBSystem().Scene.NamespaceImport( &quot;NS&quot;, &quot;C:/cube.fbx&quot;, True )
my_cube = FBFindObjectByFullName( &quot;Model::NS:Cube&quot; )
my_cube.Scaling = FBVector3d(50, 20, 10)</pre>

<p>But, for a referenced item/object, unlike a native object in the scene, there are a couple of limitations you need to be aware of including: </p>

<ul>
  <li>A referenced item cannot be renamed. </li>

  <li>A referenced item cannot be deleted. </li>

  <li>An item within a referenced hierarchy cannot be re-parented. </li>

  <li>Referenced objects cannot be nested. </li>

  <li>Keyframe animation is not possible on referenced items unless those items are animated using the Story tool. </li>

  <li>Connections between items within a referenced object are not allowed . </li>
</ul>

<p><b>Question 2: How to keep/save the modification for referenced object?</b> </p>

<p>When we made modifications to the referenced items, can we save it for later use? The answer is “Yes”. When you modify items within a referenced object, MotionBuilder writes the changes in Python script and stores them within the FBX file. This enables the changes to persist when you save and reopen the FBX scene that contains the referenced object. </p>

<p>For example, with above sample code, we scaled the “NS:Cube” in the scene, when the file is saved, the changes and the file reference object are stored inside the FBX scene file. The next time when this scene is opened, the file reference object is created while loading and the changes are also applied to it. You can view the reference edit by using following codes: </p>

<pre class="brush:python;toolbar: false;">lFileReference = FBFindObjectByFullName( “FileReference::NS” )
print lFileReference.GetRefEdit()</pre>

<p>The result should be: </p>

<pre class="brush:python;toolbar: false;">&gt;&gt;&gt; 
from pyfbsdk import *
 
###########################################################################
#pArgList[0] indicates if instancing is happening or not.
#pArgList[1:] indicates the namespace list that the reference edit will affect.
###########################################################################
def FBApplyReferenceEdits( pArgList ):
    for pNamespace in pArgList[1:]:
        lComp = FBFindObjectByFullName( &quot;Model::&quot; + pNamespace + &quot;:Cube&quot; )
        if lComp &lt;&gt; None:
            lProperty = lComp.PropertyList.Find(&quot;Lcl Scaling&quot;)
            if lProperty &lt;&gt; None:
                lProperty.SetString( &quot;{50,20,10}&quot; )
            
        FBSystem().Scene.Evaluate()
###########################################################################
#pArgList[0] indicates if instancing is happening or not.
#pArgList[1:] indicates the namespace list that the reference edit will affect.
###########################################################################
def FBRevertReferenceEdits( pArgList ):
    for pNamespace in pArgList[1:]:
        lComp = FBFindObjectByFullName( &quot;Model::&quot; + pNamespace + &quot;:Cube&quot; )
        if lComp &lt;&gt; None:
            lProperty = lComp.PropertyList.Find(&quot;Lcl Scaling&quot;)
            if lProperty &lt;&gt; None:
                lProperty.SetString( &quot;{1,1,1}&quot; )
            
        FBSystem().Scene.Evaluate()
&gt;&gt;&gt; </pre>

<p><b>Question 3: Can we really save the changes to the source referenced file?</b> </p>

<p>Sometimes, people asks if they can save the modification to the original referenced file, and the method <i>FBFileReference::BakeRefEditToFile(const char *pFilePath=((void *) 0))</i> is very likely to do such things. I did some test with this method, but unfortunately, Motionbuilder will crash when I try to bake the edit. Currently, a change request is logged to track this issue. So unless this is improved, currently, we can not save the changes directly to the source file. </p>

<p><b>Question 4: Can we track changes of Source File?</b> </p>

<p>The answer is “Yes”, the event <i>FBFileMonitoringManager.OnFileChangeFileReference</i> is provided to monitor the change of source file, you can refer <a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./files/GUID-B90256BC-DA6C-423F-9945-4F25FF2D2607.htm">here </a>if you are not familiar with that. </p>

<p><b>Questions 5: Can we track changes of referenced object/items?</b> </p>

<p>The answer is still “Yes”, MotionBuilder provides a query based system using <i>dirty flags</i> for retrieving a list of changes. You can get a list of objects and their property changes. The two functions: <code><code>GetSelfModified</code></code> and <code><code>GetContentModified</code></code> are used for checking the dirty flags of a reference object or a reference item. Still use the code above, since we changed the scale of Cube, we will get “True” if we use the following methods to check the status: </p>

<pre class="brush:python;toolbar: false;">file_reference_object.GetContentModified(FBPlugModificationFlag.kFBContentDataModified)
my_cube.PropertyList.Find(&quot;Lcl Scaling&quot;).GetSelfModified( FBPlugModificationFlag.kFBSelfDataModified )  </pre>

<p>For some other flag, please refer the enum <b><b><a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./cpp_ref/namespace_o_r_s_d_k2017.html">FBPlugModificationFlag </a></b></b>for more details. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to set default value for array attributes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-set-default-value-for-array-attributes
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/12/how-to-set-default-value-for-array-attributes.html 
DATE: 12/20/2016 05:22:17 PM
-----
BODY:
<p>We were asked some array questions recently, and I found that there isn&#39;t a good sample in Maya devkit. This article will demonstrate how to initialize an array with MArrayDataBuilder. &#0160;<br /><br /> MPxNode::Compute isn&#39;t a good choice to give your array a default value. The reasons are that the compute will be called after a plug is dirty, or it will be connected on demand. The proper way to give your array a default value is to use the MPxNode::postConstructor method. For example, I can create a default value for the weightListNode sample from the Maya devkit with following code:</p>
<pre id="dNSACAV4wfn">void weightList::postConstructor()<br />{<br />&#0160; &#0160;&#0160;MStatus status = MStatus::kSuccess;<br />&#0160; &#0160; // Get the datablock outside the compute with MPxNode::forceCache<br />&#0160;&#0160; &#0160;MDataBlock block = this-&gt;forceCache();<br /><br />&#0160; &#0160; // The remaining part is the same as compute<br />&#0160;&#0160; &#0160;unsigned i, j;<br />&#0160;&#0160; &#0160;MObject thisNode = thisMObject();<br />&#0160;&#0160; &#0160;MPlug wPlug(thisNode, aWeights); <br /><br />&#0160;&#0160; &#0160;// Write into aWeightList<br />&#0160;&#0160; &#0160;for( i = 0; i &lt; 3; i++) {<br />&#0160;&#0160; &#0160; &#0160; &#0160;status = wPlug.selectAncestorLogicalIndex( i, aWeightsList );<br />&#0160;&#0160; &#0160; &#0160; &#0160;MDataHandle wHandle = wPlug.constructHandle(block);<br />&#0160;&#0160; &#0160; &#0160; &#0160;MArrayDataHandle arrayHandle(wHandle, &amp;status);<br />&#0160;&#0160; &#0160; &#0160; &#0160;//McheckErr(status, &quot;arrayHandle construction failed\n&quot;);<br />&#0160;&#0160; &#0160; &#0160; &#0160;MArrayDataBuilder arrayBuilder = arrayHandle.builder(&amp;status);<br />&#0160;&#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;for( j = 0; j &lt; i+2; j++) {<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;MDataHandle handle = arrayBuilder.addElement(j,&amp;status);&#0160; &#0160; &#0160; &#0160;&#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;float val = (float)(1.0f*(i+j)); <br />&#0160;&#0160; &#0160; &#0160; &#0160; &#0160; &#0160;handle.set(val);<br />&#0160;&#0160; &#0160; &#0160; &#0160;}<br />&#0160;&#0160; &#0160; &#0160; &#0160;status = arrayHandle.set(arrayBuilder);<br />&#0160;&#0160; &#0160; &#0160; &#0160;<br />&#0160;&#0160; &#0160; &#0160; &#0160;wPlug.setValue(wHandle);<br />&#0160;&#0160; &#0160; &#0160; &#0160;wPlug.destructHandle(wHandle);<br />&#0160;&#0160; &#0160;}<br />}</pre>
<p>This will be called after the node is created and will insert three elements into the weightList attribute. That&#39;s it :)&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Use a node as input for your custom node
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: use-a-node-as-input-for-your-custom-node
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/12/use-a-node-as-input-for-your-custom-node.html 
DATE: 12/11/2016 11:00:46 PM
-----
BODY:
<p>Sometimes we want to use a node as input for our custom nodes, and would like our custom node to be updated whenever our input is changed. Usually, we will create a message attribute with MFnMessageAttribute on our custom node and register callbacks to deal with it. The message attributes will never participate in dirty propagation, it is only for making connections.<br /> <br /> For example, sometimes we would like to connect a camera to our custom node and update it with its projection matrix. Unfortunately, projection matrix is only available with API. Thus, we can't connect it directly to our node. To make the projection matrix an input for our node, we can use the camera node as input. I am going to create a node with accepts a message attribute from a cameraShape node and output the projection matrix of the camera.<br /> <br /> First, I'll need to create a message attribute, a matrix attribute and a dummy attribute for dirtying our node:</p>
<pre id="JfQACAXpnPU">// Create message attribute and matrix attribute here.<br />MStatus affects::initialize()<br />{<br />    MFnMatrixAttribute matAttr;<br />    MFnMessageAttribute msgAttr;<br />    MFnNumericAttribute nAttr;<br /><br />    // Use for projection matrix<br />    projectionMatrix = matAttr.create(PROJECTION_MATRIX_LN, PROJECTION_MATRIX_SN, MFnMatrixAttribute::kFloat);<br /><br />    // Message attribute <br />    inputCamera = msgAttr.create(INPUT_CAMERA_LN, INPUT_CAMERA_SN);<br /><br />    // For attributeAffects<br />    dirtyDummy = nAttr.create(DIRTY_DUMMY_LN, DIRTY_DUMMY_SN, MFnNumericData::kBoolean);<br /><br />    addAttribute(projectionMatrix);<br />    addAttribute(inputCamera);<br />    addAttribute(dirtyDummy);<br /><br />    attributeAffects(dirtyDummy, projectionMatrix);<br /><br />    return( MS::kSuccess );<br />}</pre>
<p>The projection matrix is a MFloatMatrix, and it is created with MFnMatrixAttribute. Because we are going to update our node during the callbacks, we'll need to create an attribute and make it affect the output matrix. I created a method called setProjectionMatrixDirty for it:</p>
<pre id="JfQACAqKQkG">void affects::setProjectionMatrixDirty()<br />{<br />    auto dirtyPlug = MPlug(thisMObject(), dirtyDummy);<br />    bool lastValue;<br />    dirtyPlug.getValue(lastValue);<br />    dirtyPlug.setValue(!lastValue);<br />}</pre>
<p><br /> When a plug is connected or disconnected, MFnNode::connectionMade or MFnNode::connectionBroken will be called. We could take advantage of this behavior, and register our callbacks in it. For the cameraShape node itself, we can use MNodeMessage::addNodeDirtyPlugCallback to track it, but it won't work for its transform. Luckily, Maya provides another callback MDagMessage::addWorldMatrixModifiedCallback to track its world matrix. The node itself is provided as custom data for the callbacks, so we have access to both the camera node and our node during the callback. We also need to define those callbacks as friend of our node, unless you make them directly members (cameraNode, projection matrix value, etc...) public. <br /> <br /> MPxNode::connectionMade is coded like below</p>
<pre id="JfQACAdme2S">// Create an attribute change callback on the camera when connection is made<br />MStatus affects::connectionMade( const MPlug&amp; plug, const MPlug&amp; otherPlug, bool asSrc )<br />{<br />    if(plug == inputCamera)<br />    {<br />        MObject otherNode = otherPlug.node();<br />    <br />        // If is from camera.message<br />        // It must be connected from cameraShape, otherwise won't work.<br />        if(otherNode.hasFn(MFn::kCamera))<br />        {<br />            MGlobal::displayInfo("Connection made.");<br />        <br />            isCameraSet = true;<br />            cameraNode = otherNode;<br /><br />            MFnCamera fnCam(cameraNode);            <br />            projectionMatrixValue = fnCam.projectionMatrix();                    <br />            setProjectionMatrixDirty();<br />            cameraCallbackId = MNodeMessage::addNodeDirtyPlugCallback(cameraNode, cameraNodePlugDirty, this);<br /><br />            // Add world transform matrix<br />            MSelectionList sel;<br />            sel.add(fnCam.fullPathName());<br />            MDagPath dagPath;<br />            sel.getDagPath(0,dagPath);<br />            worldMatrixCallbackId = MDagMessage::addWorldMatrixModifiedCallback(dagPath,cameraWorldMatrixChangeCallback,this);<br />            <br />            return MStatus::kSuccess;<br />        }<br />    }<br />    return MPxNode::connectionMade(plug, otherPlug, asSrc);<br />}</pre>
<p>Then, here is MPxNode::connectionBroken. We need to remove callbacks when the plug is disconnected</p>
<pre id="JfQACAWCiOT">// Remove callbacks when connection is broken.<br />MStatus affects::connectionBroken( const MPlug&amp; plug, const MPlug&amp; otherPlug, bool asSrc )<br />{<br />    if(plug == inputCamera)<br />    {<br />        MObject otherNode = otherPlug.node();<br />        // If is from cameraShape.message<br />        <br />        if(otherNode.hasFn(MFn::kCamera))<br />        {<br />            MGlobal::displayInfo("Connection breaks.");<br />            if(isCameraSet)<br />            {<br />                isCameraSet = false;<br />                cameraNode = otherNode;<br /><br />                MFnCamera fnCam(cameraNode);<br />                projectionMatrixValue = fnCam.projectionMatrix();        <br />                <br />                setProjectionMatrixDirty();<br /><br />                MNodeMessage::removeCallback(cameraCallbackId);<br />                MDagMessage::removeCallback(worldMatrixCallbackId);<br />            }<br />            return MStatus::kSuccess;<br />        }<br />    }<br />    return MPxNode::connectionBroken(plug, otherPlug, asSrc);<br />}</pre>
<p>Now, we have to write our callbacks. We are going to update the projection matrix attribute in the compute method to have a better performance, and there is one issue we should try to avoid here: calling MFnCamera::projectionMatrix in the compute method. During DG evaluation, it is better not to access the plugs outside the data block. So, getting the projection matrix from the camera shape during the compute method will cause a problem. But there is no such limitation in the callback, so we can get the value and cache it during the callback, then update the projection matrix attribute with the cached value in the callback. The callback is written like below:</p>
<pre id="JfQACA5hn5m">// Node plug dirty change callback<br />void cameraNodePlugDirty(MObject &amp;node, MPlug &amp;plug, void *clientData)<br />{<br />    affects* affectNode = (affects*)clientData;<br /><br />    if(affectNode-&gt;isCameraSet)<br />    {<br />        MGlobal::displayInfo("Updating projection matrix after camera shape changes.");<br />        MFnCamera fnCam(affectNode-&gt;cameraNode);<br /><br />        //Cache the projection matrix value here. It will prevent potential DG evaluation issues.<br />        affectNode-&gt;projectionMatrixValue = fnCam.projectionMatrix();<br />        affectNode-&gt;setProjectionMatrixDirty();<br />    }    <br />}<br /><br />//World matrix change callback<br />void cameraWorldMatrixChangeCallback(MObject &amp;transformNode, MDagMessage::MatrixModifiedFlags &amp;modified, void *userData)<br />{<br />    affects* affectNode = (affects*)userData;<br />    <br />    if(affectNode-&gt;isCameraSet)<br />    {<br />        MGlobal::displayInfo("Updating projection matrix after transform changes.");<br />        MFnCamera fnCam(affectNode-&gt;cameraNode);<br /><br />        //Cache the projection matrix value here. It will prevent potential DG evaluation issues.<br />        affectNode-&gt;projectionMatrixValue = fnCam.projectionMatrix();<br />        affectNode-&gt;setProjectionMatrixDirty();<br />    }    <br />}</pre>
<p>And the last part is to provide the compute method:</p>
<pre id="JfQACANSbx0">MStatus affects::compute( const MPlug&amp; plug, MDataBlock&amp; data )<br />{<br />    if(plug == projectionMatrix)<br />    {<br />        MGlobal::displayInfo("Updating projection matrix in compute");<br />        auto handle = data.outputValue(projectionMatrix);<br />        handle.setMFloatMatrix(projectionMatrixValue);<br />        handle.setClean();<br />    }<br />    return MStatus::kSuccess;<br />}</pre>
<p>The full sample is available on the GitHub, you can get it <a href="https://github.com/ADN-DevTech/affectNodesMessage">here</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: New API changes for Maya 2017 updates 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: new-api-changes-for-maya-2017-updates-2
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Rendering
CATEGORY: Shader
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/12/new-api-changes-for-maya-2017-updates-2.html 
DATE: 12/06/2016 02:53:00 PM
-----
BODY:
<p>Some of you may already know about this, but I think I still need to emphasize it again here. In the past, we used to have Service Packs and Extensions after the Maya main release. But starting from Maya 2017, we will not provide Service Packs or Extensions any more, instead, will use Maya Updates to maintain and update the software regularly, providing new features, and quicker fixes to customer issues. </p>  <p>For our plugin developers, one important thing you should be aware of is that the Maya API binary compatibility will not be broken in any 2017 updates, however, the API may be extended to enable new features. </p>  <p>So far, Maya 2017 released 2 updates, if you want to know the features/improvement that have been included in these 2 updates, please check the following page: </p>  <ul>   <li><a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-0617A132-1B57-474F-A656-6E71A002CA28">What’s New in Maya 2017 Update 1</a> </li>    <li><a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-3B5C8FF8-5EC4-4981-8B83-4535C73D3A1C">What’s New in Maya 2017 Update 2</a> </li> </ul>  <p>If you want to know where to download and how to install these updates, please refer my previous blog of “<a href="http://around-the-corner.typepad.com/adn/2016/12/recent-new-releases-nov-2016-1-1.html">Recent new releases (Nov. 2016)</a>”. </p>  <p>OK, now let’s focus on the API changes in Maya 2017 update 2, here are the details: </p>  <ul>   <li><b><b>Shading </b></b>      <br />      <p>Let’s talk about the new added method <b>MShaderInstance::writeEffectSourceToFile()</b>, the method is easy to understand, it’s used to write the final effect source to a file so you can perform validation on custom shader fragments on all device APIs. It’s used for debugging to see how fragments are turned into the final effect for the current drawing API. Note that the effect will not be written if the effect is not generated from shader fragments or any of the shader fragments is marked as hidden.</p>   </li>    <li><b><b>Lighting</b></b>       <br />      <p>Another improvement is about “<b>Lighting</b>” support, and I want to talk more and highlight it here. Actually, the “<b>Lighting</b>” feature is continuously improved since it was first supported from Maya 2016 Extension 2. Let’s see the history of evolvement: </p>      <p><b><b>Maya 2016 Extension 2: </b></b></p>      <p>Developer can create a plug-in shape which is classified generally as a light, to be recognized as a lighting contributor, the classfication string “light” is required, and the only possible sub-classifications are those available for internal Maya lights, they include “ambientLight”, “pointLight”, “directionalLight”, “spotlight” and “volumeLight”, the possible classification for your light shape should be one of the following: </p>      <ul>       <li>&quot;light:drawdb/light/ambientLight&quot;. </li>        <li>&quot;light:drawdb/light/pointLight&quot;. </li>        <li>&quot;light:drawdb/light/directionalLight&quot;. </li>        <li>&quot;light:drawdb/light/spotlight&quot;. </li>        <li>&quot;light:drawdb/light/volumeLight&quot;. </li>     </ul>      <p>The classification allows for the usage of the internal light and UI (geometry drawing) VP2 evaluators to be used. There is no explicit VP2 override class used as the internal VP2 geometry evaluator will handle drawing. </p>      <p>Also, be noted that if you use the “<b>light</b>” classification, you must include these light attributes: intensity, color, emitDiffuse, andemitSpecular, in order for the light to behave like a Maya light. </p>      <p>For the details, you can check the new added sample “apiDirectionalLightShape”, it demonstrated how to add a plug-in light, you can also refer the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_GUID_1DBFC5FE_0A84_43C8_8F45_4875CEFC1F11_htm">User Doc </a>to see how it works with the new Light Editor. </p>      <p><b><b>Maya 2017:</b></b> </p>      <p>The “Lighting” feature was improved, developer now can combine a custom draw override with internal Viewport 2.0 lighting support. For dag objects that wish to contribute lighting as well as have custom drawing, it is possible to have two “drawdb” classifications: one that starts with “light” and one that starts with “geometry”. The classification for the node should be something like <b><b>&quot;light:drawdb/light/directionalLight:drawdb/geometry/light/directionalLightCustom&quot;.</b></b> </p>      <p>Then, in order for the override of a plug-in node to represent the drawing of a light, the “<b>drawdb/geometry/light</b>” classification string should be used when registering the override; for example, a classification string such as “<b>drawdb/geometry/light/</b><b><b>directionalLightCustom</b></b>” could be used for above sample node. My colleague Vijaya also posted a <b><a href="http://around-the-corner.typepad.com/adn/2016/10/light-draw-override-in-viewport-20.html"><b>blog</b><b> post</b> </a></b>which talking some about this. </p>      <p>Btw, only classifications for draw and geometry overrides can be registered along with “<b>drawdb/light</b>”. Overrides such as “<b>drawdb/subscene</b>”, for example, are not allowed. </p>      <p>Also, the devkit sample “<b><b>apiDirectionalLightShape</b></b>” is also improved to have a customized VP 2.0 override named “<b><b>apiDirectionalLightShape_GeometryOverride</b></b>” demonstrate the usage, it create a different drawing as the blue arrow that is shown in the following picture. You can check that sample for more details. </p>     <a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8b8b9f9970b-pi"><img title="light" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="light" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d2427fa4970c-pi" width="359" height="217" /></a>&#160; <p><b><b>Maya 2017 Update 2:</b></b> </p>      <p>There are 2 improvement for “Lighting” feature. </p>      <p>The 1st one is the “Exposure” attribute for a light node. Besides the intensity, color, emitDiffuse, andemitSpecular attributes that must be included for a light node, the “Exposure” attribute is also parsed for internal light evaluation. For demonstration, the devkit sample “<b>apiDirectionalLightShape</b>” is updated to include this new attribute for all these light nodes. </p>      <p>The 2nd improvement is about the new classification of “<b>drawdb/light/image</b>”. Now developer can use this new classification to register a plug-in node so that it behaves like an internal IBL (Image Based Lighting) light. I do suggest you to talk a look at this <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_GUID_1197A381_38B5_4276_BA3A_72A86269D37D_htm"><b><b>introduction doc</b></b> </a>about this new light type if you are interested. Also, the “<b>apiDirectionalLightShape</b>” sample is updated to include the new type of “<b>apiImageLightShape</b>”, if you get the new devkit for Maya 2017 update 2 which is located at<u> <a href="https://apps.autodesk.com/MAYA/en/Detail/Index?id=8656206734503135164&amp;os=Win64&amp;appLang=en">Autodesk Maya App Store</a></u>, you can check the implementation, it should be pretty straightforward. </p>   </li> </ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Recent new releases (Nov. 2016)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: recent-new-releases-nov-2016-1-1
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Events
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/12/recent-new-releases-nov-2016-1-1.html 
DATE: 12/01/2016 10:12:00 AM
-----
BODY:
<p>It’s really a big month for Autodesk M&amp;E customers and partners. Why do I say that? Here are the new versions of products that were just released within this month:</p>  <ul>   <li>     <p><strong>Autodesk Stingray 1.6 version. </strong></p>      <ul>       <li>Stingray 1.6 is now available for download via your Autodesk Account, <a href="https://knowledge.autodesk.com/search-result/caas/downloads/content/autodesk-C2-AE-stingray-1610110-update.html">Autodesk Knowledge Network</a>, and <a href="http://store.steampowered.com/app/243580/">Steam</a>. </li>        <li>For more information about this update version, please refer to the <a href="http://help.autodesk.com/view/Stingray/ENU/?guid=__stingray_help_release_notes_readme_1_6_html">Stingray V1.6 Release Notes</a> in the online documentation. Stingray 1.6 also includes the FBX SDK 2017.1 security update. </li>     </ul>   </li>    <li><strong>Autodesk Live 1.6 version.</strong>       <ul>       <li>Autodesk Live 1.6 is available for download on your Autodesk Account. The LIVE Viewer applications have also been updated and are available on the <a href="http://www.autodesk.com/live-app-store-apple">Apple Store</a> and the <a href="http://www.autodesk.com/live-app-store-autodesk">Autodesk Exchange store</a>. </li>        <li>For more information about 1.6 version, you can refer to the <a href="https://knowledge.autodesk.com/support/live/downloads/caas/downloads/content/autodesk-live-10-release-notes.html">Releases Notes</a>. </li>     </ul>   </li>    <li><strong>Maya 2017 Update 2.</strong>       <ul>       <li>Maya 2017 Update 2 includes some new features, security improvement and important bug fix, it's available via your Autodesk Account. Details about Update 2 can be found in <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-3B5C8FF8-5EC4-4981-8B83-4535C73D3A1C">What's New in Maya 2017 Update 2</a> , Maya 2017 Update 2 also includes the FBX SDK 2017.1 security update. </li>        <li>Maya 2017 Update 2 is a full install of the product on Mac and Linux operating systems. On Windows operating systems, Maya Updates appear in the Autodesk Desktop App, as an incremental install. </li>     </ul>   </li> </ul>  <ul>   <li><strong>Maya LT 2017 Update 2.</strong>       <ul>       <li><b><b>Maya and May LT 2017 Update 2 </b></b>is a feature release for subscription customers and is available via your Autodesk Account and on <a href="http://store.steampowered.com/app/243580/">Steam</a>. Details about Update 2 can be found in <a href="http://help.autodesk.com/view/MAYALT/2017/ENU/?guid=GUID-3B5C8FF8-5EC4-4981-8B83-4535C73D3A1C">What's New in Maya LT 2017 Update 2</a> and the <a href="https://knowledge.autodesk.com/sites/default/files/MayaLT2017_Update2_ReleaseNotes_ENU.htm">Release Notes</a>. Update 2 also includes the FBX SDK 2017.1 security update. </li>     </ul>   </li>    <li><strong>3ds Max 2017.1 update(also known as 3ds Max 2017 update 1).</strong>       <ul>       <li>3ds Max 2017.1 update brought in feature improvements including Modeling, Materials and Maps, together with security improvement and bug fix, it's available via your Autodesk Account. Details about Update 1 can be found in <a href="http://help.autodesk.com/view/3DSMAX/2017/ENU/?guid=GUID-AA81EA1A-B4E1-4B47-B3AE-7C4AD62E24FF">What's New in Autodesk 3ds Max 2017.1 Update</a>. This update also includes the FBX SDK 2017.1 security update. </li>     </ul>   </li> </ul>  <ul>   <li><strong>FBX Review 1.4.1</strong>       <ul>       <li>You can find the updated version <a href="http://www.autodesk.com/products/fbx/fbx-review">here</a>. </li>     </ul>   </li> </ul>  <p>   <br />Besides these new versions of products released above, there are also security update fix released on Nov 30th as follow: </p>  <ul>   <li><b>FBX SDK 2017.1 security update</b> which is available now <a href="http://usa.autodesk.com/adsk/servlet/pc/item?siteID=123112&amp;id=26012646">here</a>. </li>    <li><strong>Maya and Maya LT 2017 Security Fix</strong> (for non-subscription customers) provides the FBX SDK 2017.1 security update, and they are available for download on <a href="https://knowledge.autodesk.com/support/maya/downloads">Maya 2017 Security Fix</a> and <a href="https://knowledge.autodesk.com/support/maya-lt/downloads">Maya LT 2017 Security Fix</a>. To install, you must uninstall your previous version of Maya 2017. </li> </ul>  <br />  <p>Big month, right? Within all these new versions, I really want to emphasize one amazing feature of Stingray 1.6, that’s the first ever SDK for Stingray engine plug-ins. </p>  <p>You can now write plug-ins for the Stingray engine in C without needing source code access! This greatly improves the ability for all customers to extend Stingray. You can hook the runtime engine into other third-party libraries and middleware SDKs, support your own custom data types, write your own gameplay code in C, and more. </p>  <p>The Stingray Platform SDK along with its documentation make it easier to use Stingray as development platform to build interactive and immersive experiences and tools. It allows users to integrate the Editor and/or the Runtime Engine with third-party libraries, applications, web services, or data sources. The sum of those plugins define the Editor workspace – per the picture below. The new SDK documentation along with the reference plugin examples will be shipping with both the binary and source versions of Stingray as of V1.6. Have a look at the full SDK docs <a href="http://help.autodesk.com/view/Stingray/ENU/?guid=__sdk_help_introduction_html">here</a>.&#160; </p>  <p>It’s a wonderful world for developers! </p> <b><b></b></b>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8b7d392970b-pi"><img title="stingray" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="stingray" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb095ada44970d-pi" width="445" height="233" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Render Setup improvement in Maya 2017: Interactive Sequence Rendering
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: render-setup-improvement-in-maya-2017-interactive-sequence-rendering
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python
CATEGORY: Rendering
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/render-setup-improvement-in-maya-2017-interactive-sequence-rendering.html 
DATE: 11/27/2016 08:01:00 PM
-----
BODY:
<p>The last main improvement for Render Setup feature is actually a new feature to render a sequence directly from Maya’s UI without executing a batch render (including support for loading the sequence in the Renderview for review), thanks to engineering team’s contribution, here is the detail if you are interested:</p>  <h3><font style="font-weight: bold" size="3">Introduction</font></h3>  <p>Rendering of image sequences in Maya has traditionally been an offline process for the end-user via command-line or the batch render feature in Maya. This can be limiting for artists attempting to generate sequences locally, and imposed additional workflow to review and evaluate renders over time. </p>  <p>Interactive sequence rendering is a new rendering mode introduced in Maya 2017 that allows rendering of a sequence of frames into the Render View. It’s a mix between Batch rendering and ordinary Render View rendering. Like Batch rendering it will iterate over render layers, cameras and frames and save the results to disc, but like Render View rendering it’s done interactively, displaying the progress in the Render View. There is also an option to keep each frame in the Render View to allow scrolling through and review the animation results afterwards.</p>  <p>This blog describes how to add support for this feature to a 3<sup>rd</sup> party renderer.</p>  <h3><font style="font-weight: bold" size="3">Sequence Rendering Procedure </font></h3>  <p>To add support for sequence rendering a procedure for this needs to be created and registered with Maya. This is a wrapper procedure written in MEL or Python, and it should in turn call the plugin render command to start the rendering. The following signature should be used for the procedure:</p>  <pre class="brush:python;toolbar: false;">int mySequenceRenderProc(int width, int height, string camera,
string saveToRenderView);</pre>

<ul>
  <li><i>width </i>- The width of the images produced. </li>

  <li><i>height</i> - The height of the images produced. </li>

  <li><i>camera -</i> Sets the name of a specific camera to render. If set to empty string the renderer should iterate over all cameras that have been set as renderable. </li>

  <li><i>saveToRenderView -</i> Sets the name of a camera for which the rendered images should be saved to the Render View. If set to empty string no images should be saved. If set to “all” images for all cameras should be saved. See below on how to save images to the render view. </li>
</ul>

<p>The options sent in are set by Maya depending on user preferences. These options, and any custom options needed by the renderer, should be sent to the render command when it’s called from inside this wrapper procedure.</p>

<p>Maya will call this procedure to start the rendering for each render layer that has been selected for rendering. Maya will also handle execution of Pre/Post Render MEL scripts and Pre/Post Render Layer MEL scripts. The plugin render command should handle iteration over frames and cameras and also execute Pre/Post Render Frame scripts. </p>

<p>The frame range can be read from the common render globals:</p>

<pre class="brush:python;toolbar: false;">MCommonRenderSettingsData renderGlobals;
MRenderUtil::getCommonRenderSettings(renderGlobals);

renderGlobals.frameStart
renderGlobals.frameEnd
renderGlobals.frameBy</pre>

<p>Region rendering is supported. If this is requested by the user Maya will set the attribute defaultRenderGlobals.useRenderRegion to true.</p>

<p>Like with ordinary Render View rendering the execution should abort if the user presses the Esc key. If this happens the wrapper procedure should return a non-zero value to notify the render layer iteration on Maya side to abort.</p>

<h3><font style="font-weight: bold" size="3">Registration</font></h3>

<p>The wrapper procedure is registered like all other renderer procedures using the MEL/Python command <i>“renderer”</i>. A new flag “-<i>renderSequenceProcedure</i>” has been added for this purpose.</p>

<p><b>Example - Register a new renderer supporting single frame rendering and sequence rendering:</b></p>

<pre class="brush:python;toolbar: false;">renderer	
	-rendererUIName &quot;My Renderer&quot;
	-renderProcedure &quot;myRenderProc&quot; 	
	-renderSequenceProcedure &quot;mySequenceRenderProc&quot;
	myRenderer;</pre>

<p><b>Example – Add sequence rendering support to an already registered renderer:</b></p>

<pre class="brush:python;toolbar: false;">renderer 
	-edit 
	-renderSequenceProcedure &quot;mySequenceRenderProc&quot;
	myRenderer;</pre>

<h3><font style="font-weight: bold" size="3">Save to Render View</font></h3>

<p>The following MEL code can be used by the plugin command to save the result in the Render View.</p>

<pre class="brush:python;toolbar: false;">string $allPanels[0] = `getPanel -scriptType renderWindowPanel`;
if (size($allPanels) &gt; 0)
{
    renderWindowMenuCommand &quot;keepImageInRenderView&quot; $allPanels[0];
}</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Render Setup improvement in Maya 2017: Render Settings Changes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: render-setup-improvement-in-maya-2017-render-settings-changes
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python
CATEGORY: Rendering
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/render-setup-improvement-in-maya-2017-render-settings-changes.html 
DATE: 11/25/2016 02:30:00 PM
-----
BODY:
<h3><font size="2"></font></h3>  <p>The 2<sup>nd</sup> main improvement is about changes to render settings window callbacks to support the new workspaces UI feature, as I mentioned before, this information is also provided by our engineering team. Let’s take a look at the improvement.</p>  <h3><font style="font-weight: bold" size="3">Introduction</font></h3>  <p>One of the changes introduced in Maya 2017 is the new workspaces feature. This feature includes a change that presents some problems for the Render Settings. Maya now retains the state of windows that were open in previous sessions of Maya. So, if you open the Render Settings and close Maya, then re-launch Maya, the Render Settings will still be open on startup. With the Render Settings this is a problem because by default they were being loaded prior to the renderer plugins which are needed to help build the UI. This was fixed in Maya 2017 by only loading the Render Settings window after all Maya plugins have been loaded. An additional problem is that renderers need to be able to load their renderer specific Render Settings information, including renderer specific tabs, once the Render Settings have been loaded. Previously this was done after users manually opened the Render Settings, but now the Render Settings can be open on startup so a different solution is required. This document showcases the new callback that is introduced to enable renderers to register their respective Render Settings information, including renderer specific tabs, after the Render Settings have been built.</p>  <h3><font style="font-weight: bold" size="3">Render Settings Built Callback</font></h3>  <p>Once the Render Settings window has been built, renderers may wish to setup renderer specific tabs or make other Render Settings related changes. Previously this was done after the Render Settings was launched manually by users, but with workspaces changes in Maya 2017 it is possible that the Render Settings window will be loaded on startup of Maya if the Render Settings window was not closed in the last session of Maya. As a result, a callback is now required in order to apply any renderer specific changes to the Render Settings such as adding a renderer specific tab.</p>  <pre class="brush:python;toolbar: false;">callbacks 
	–addCallback ”rendererRenderSettingsBuiltCallback”
	–hook ”renderSettingsBuilt”
	–owner ”renderer”</pre>

<p>The above function calls the “rendererRenderSettingsBuiltCallback” after the Render Settings have been built. Renderers can use this callback to create their renderer specific tabs or any other Render Settings specific operation knowing that these will be run after the Render Settings window has been created.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to create a Super sampling render override - a tutorial for MRenderTarget usage in MRenderOverride
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-create-a-super-sampling-render-override-a-tutorial-for-mrendertarget-usage-in-mrenderoverride
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Samples

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/how-to-create-a-super-sampling-render-override-a-tutorial-for-mrendertarget-usage-in-mrenderoverride.html 
DATE: 11/25/2016 03:38:51 AM
-----
BODY:
<p>Recently we were asked how to implement super sampling for a viewport render override. It requires you to create new render targets to replace the original ones.</p>
<p>The MRT sample is very good at showing how to do it, however it is too complex to begin with. So we&#39;ll create a new one based on the simplest sample - viewOverrideSimple. The full code can be found on GitHub <a href="https://github.com/iamsleepy/Viewport-override-supersampling/" rel="noopener noreferrer" target="_blank">here</a>.</p>
<p>The original sample has three render operations: scene, HUD and present. To render in a higher resolution, we need to modify scene operation and add quad operation for down sampling the render output from the scene operation. The HUD and present will be left untouched.</p>
<p>First, let&#39;s begin with the render override itself:</p>
<p>We need to extend the array size of viewOverrideSimple::mOperations and viewOverrideSimple::mOperationNames, it has four operations now. And we need to add new members for storing render targets after operation iteration:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>// Temporary of operation iteration
int mCurrentOperation;

// Supersampling render targets
MString mTargetOverrideNames[2];
MHWRender::MRenderTargetDescription* mTargetDescriptions[2];
MHWRender::MRenderTarget* mTargets[2];
</code></pre>
<p>The render targets are used for scene operation to render with, and worked as the input parameters for our bicubic shader in the quad operation.</p>
<p>Next, we need to create our render target descriptions inside the constructor:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>mOperations[0] = mOperations[1] = mOperations[2] = mOperations[3] = NULL;
mOperationNames[0] = &quot;viewOverrideSimple_Scene&quot;;
mOperationNames[1] = &quot;viewOverrideSimple_Quad&quot;;
mOperationNames[2] = &quot;viewOverrideSimple_HUD&quot;;
mOperationNames[3] = &quot;viewOverrideSimple_Present&quot;;

//MSAA sample count, we don&#39;t want MSAA here
unsigned int sampleCount =1; 

MHWRender::MRasterFormat colorFormat = MHWRender::kR32G32B32A32_FLOAT;

//Create color buffer first
mTargetOverrideNames[0] = MString(&quot;_viewRender_SSAA_color&quot;);
mTargetDescriptions[0]  = new MHWRender::MRenderTargetDescription(mTargetOverrideNames[0], 256, 256, sampleCount, colorFormat, 1, false);
mTargets[0] = NULL;

//We also need to create a depth buffer
mTargetOverrideNames[1] = MString(&quot;_viewRender_SSAA_depth&quot;);
mTargetDescriptions[1]  = new MHWRender::MRenderTargetDescription(mTargetOverrideNames[1], 256, 256, sampleCount, MHWRender::kD24S8, 1, false);
mTargets[1] = NULL;
</code></pre>
<p>Both color and depth target are required here. Missing depth buffer will cause the depth test to fail in the scene operation.</p>
<p>In the destructor, we need to release our render target description and render target like below:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>for(int i = 0; i &lt; 2; ++i)
{
    if(mTargetDescriptions[i])
    {
       delete mTargetDescriptions[i];
       mTargetDescriptions[i] = NULL;
    }
    MHWRender::MRenderer* theRenderer = MHWRender::MRenderer::theRenderer();
    if (theRenderer)
    {
        auto targetManager = theRenderer-&gt;getRenderTargetManager();
        if(targetManager)
        {
            targetManager-&gt;releaseRenderTarget(mTargets[i]);
            mTargets[i] = NULL;
        }
    }
}
</code></pre>
<p>The next part is setup, and we need to create our render targets at that point and set them as the output target for our scene render operation. We&#39;ll also let scene render use its following quad operation.</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>MStatus viewOverrideSimple::setup( const MString &amp; destination )
{
    if (!mOperations[0])
    {
        MHWRender::MRenderer *theRenderer = MHWRender::MRenderer::theRenderer();
        if (!theRenderer)
            return MStatus::kFailure;

        auto renderTargetManager = theRenderer-&gt;getRenderTargetManager();

        unsigned int targetWidth = 256;
        unsigned int targetHeight = 256;
        // Get current render target&#39;s output size
        theRenderer-&gt;outputTargetSize( targetWidth, targetHeight );

        // Double size the render target.
        targetHeight *= 2;
        targetWidth *= 2;

        // Create or update our render targets
        for(int i = 0; i &lt; 2; ++i)
        {
            mTargetDescriptions[i]-&gt;setWidth(targetWidth );
            mTargetDescriptions[i]-&gt;setHeight(targetHeight );

            if(!mTargets[i])
            {
                mTargets[i] = renderTargetManager-&gt;acquireRenderTarget(*mTargetDescriptions[i]);
            }
            else
            {
                mTargets[i]-&gt;updateDescription(*mTargetDescriptions[i]);
            }
        }

        mOperations[0] = (MHWRender::MRenderOperation *) new simpleViewRenderSceneRender( mOperationNames[1] );
        mOperations[1] = (MHWRender::MRenderOperation *) new simpleViewRenderQuadRender( mOperationNames[2] );
        mOperations[2] = (MHWRender::MRenderOperation *) new simpleViewRenderHudRender();
        mOperations[3] = (MHWRender::MRenderOperation *) new simpleViewRenderPresentRender( mOperationNames[3] );
    }
    if (!mOperations[0] ||
        !mOperations[1] || 
        !mOperations[2] ||
        !mOperations[3])
    {
        return MStatus::kFailure;
    }
    else
    {
        //Set custom render targets
        ((simpleViewRenderSceneRender*)mOperations[0])-&gt;setRenderTargets(mTargets, 2);
        ((simpleViewRenderSceneRender*)mOperations[0])-&gt;setQuadRender((simpleViewRenderQuadRender*)mOperations[1]);
    }

    return MStatus::kSuccess;
}
</code></pre>
<p>At last, we need to update the cleanup operations:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>MStatus viewOverrideSimple::cleanup()
{
    mCurrentOperation = -1;
    auto quadOp = (simpleViewRenderQuadRender *)mOperations[1];
    if (quadOp)
    {
        quadOp-&gt;setColorTarget(NULL);
        quadOp-&gt;setDepthTarget(NULL);
        quadOp-&gt;updateTargets();
    }

    auto *sceneOp = (simpleViewRenderSceneRender *)mOperations[0];
    if (sceneOp)
    {
        sceneOp-&gt;setRenderTargets( NULL, 0 );
    }

    return MStatus::kSuccess;
}
</code></pre>
<p>The work for viewOverrideSimple has been done now, we have updated it in following ways:</p>
<ol>
<li>Add a quad operation</li>
<li>Create two render targets and render target descriptions in constructor</li>
<li>Release render targets and render target descriptions in the destructor</li>
<li>Create render targets and setup scene render operations with our render targets and quad operations</li>
<li>Cleanup</li>
</ol>
<p>The next part of the work takes in the the MSceneRender, and we&#39;ll need to override two functions:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>virtual MHWRender::MRenderTarget* const* targetOverrideList(unsigned int &amp;listSize);
virtual void postSceneRender(const MHWRender::MDrawContext &amp; context);
</code></pre>
<p>In the MSceneRender::targetOverrideList, we need to return the render targets created earlier to let Maya render in new settings.</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>//Override render targets
MHWRender::MRenderTarget* const*  simpleViewRenderSceneRender::targetOverrideList(unsigned int &amp;listSize)
{
    if(mTargets)
    {
         listSize = numTargets;
        return mTargets;
    }
    listSize = 0;
    return NULL;
}
</code></pre>
<p>And in the MSceneRender::postSceneRender, we&#39;ll update our quad render with latest result, like this:</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>void simpleViewRenderSceneRender::postSceneRender(const MHWRender::MDrawContext &amp; context)
{
    if(mSimpleQuadRender)
    {                
        mSimpleQuadRender-&gt;setColorTarget(mTargets[0]);
        mSimpleQuadRender-&gt;setDepthTarget(mTargets[1]);
        mSimpleQuadRender-&gt;updateTargets();
    }
}
</code></pre>
<p>At last, it comes to the quad render. It is also very simple, we need to create a bicubic shader in the constructor and use it for rendering.</p>
<pre style="border: 1px solid #eaeaea; background-color: #f8f8f8; line-height: 1;"><code>simpleViewRenderQuadRender::simpleViewRenderQuadRender(const MString &amp;name)
    : MQuadRender( name )
    , mShaderInstance(NULL)
    , mColorTargetChanged(false)
    , mDepthTargetChanged(false)
    , fSamplerState(NULL)

{
    mDepthTarget.target = NULL;
    mColorTarget.target = NULL;
    if (!mShaderInstance)
    {
        MHWRender::MRenderer* renderer = MHWRender::MRenderer::theRenderer();
        const MHWRender::MShaderManager* shaderMgr = renderer ? renderer-&gt;getShaderManager() : NULL;
        if (shaderMgr)
        {
            //Create our bicubic shader
            mShaderInstance = shaderMgr-&gt;getEffectsFileShader( &quot;mayaBlitColorDepthBicubic&quot;, &quot;&quot; );
        }        
    }
}
</code></pre>
<p>Maya will add the extension name for the mayaBlitColorDepthBicubic based on your viewport settings. I&#39;ve only created an .ogsfx shader file, that is working for OpenGL core profile. The shader is following the BiCubic document on the wikipedia, you can check it out <a href="https://en.wikipedia.org/wiki/Bicubic_interpolation" rel="noopener noreferrer" target="_blank">here </a>if you want to. To use this, please put mayaBlitColorDepthBicubic.ogsfx inside Maya/bin/OGSFX folder.</p>
<p>That&#39;s all of the essential part of this sample. The rest of the code are setters and updates for shader parameters, please check <a href="https://github.com/ADN-DevTech/Viewport-override-supersampling" rel="noopener noreferrer" target="_blank">the full sample code</a> for more details.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Maya 2017 : New MPxSelectionContext APIs
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2017-new-mpxselectioncontext-apis
CATEGORY: C++
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Samples
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/maya-2017-new-mpxselectioncontext-apis.html 
DATE: 11/22/2016 11:27:51 PM
-----
BODY:
<p>In Maya 2017, there are 4 new API’s are exposed in <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU//?guid=__cpp_ref_class_m_px_selection_context_html" target="_blank">MPxSelectionContext </a>class namely setAllowPreSelectHilight(), setAllowSoftSelect(), setAllowSymmetry(), setAllowDoubleClickAction().</p>
<p>Please go through the following link for how to use the selection tool. <a href="https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2017/ENU/Maya/files/GUID-60FD5F79-AC1D-46DE-B66D-2FBE73E15A30-htm.html" target="_blank">https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2017/ENU/Maya/files/GUID-60FD5F79-AC1D-46DE-B66D-2FBE73E15A30-htm.html</a></p>
<p>In UI method, you can enable/disable and use all the selection methods. However, it is possible to use the same functionalities using MEL and C++ API.</p>
<p><strong>MEL way to enable/disable Soft Selection:</strong></p>
<p>Soft modelling is an option that allows for reflection of basic manipulator actions such as move, rotate, and scale.</p>
<pre class="brush: cpp;toolbar: false;">// Enable soft selection
softSelect -sse on;

// Disable soft selection
softSelect -sse off;
</pre>
<p><strong>MEL way to enable/disable symmetry:</strong> Symmetric modelling is an option that allows for reflection of basic manipulator actions such as move, rotate, and scale.</p>
<pre class="brush: cpp;toolbar: false;">// Enable Symmetry
symmetricModelling -symmetry on;

//Disable Symmetry
symmetricModelling -symmetry off;
</pre>
<p><strong>C++ API for pre selection highlight:</strong></p>
<pre class="brush: cpp;toolbar: false;">//This method enables the support of pre-selection highlight for this context.
MStatus setAllowPreSelectHilight()   
</pre>
<p><strong>C++ API for Soft Selection:</strong></p>
<pre class="brush: cpp;toolbar: false;">//This method enables the support of soft selection for this context.
MStatus setAllowSoftSelect() 
</pre>
<p><strong>C++ API for Symmetry:</strong></p>
<pre class="brush: cpp;toolbar: false;">//This method enables the support of symmetrical selection for this context.
MStatus setAllowSymmetry() 
</pre>
<p><strong>C++ API for Double Click Action:</strong></p>
<pre class="brush: cpp;toolbar: false;">//This method enables the support of double click smart selection for this context.
MStatus setAllowDoubleClickAction()          
</pre>
<p>If you check all the documents in Maya there is no example how to use setAllowPreSelectHilight(), setAllowSoftSelect(), setAllowSymmetry(), setAllowDoubleClickAction() C++ APIs.</p>
<p>Here is the example for selection methods in C++.</p>
<p>Any user-defined class which is inherited from MPxSelectionContext class will have toolOnSetup() virtual method. You can override toolOnSetup() method and add all the above mentioned C++ APIs as below.</p>
<pre class="brush: cpp;toolbar: false;">void richSelectionContext::toolOnSetup( MEvent &amp;event )
{
MPxSelectionContext::toolOnSetup( event );

setAllowPreSelectHilight();
setAllowSoftSelect();
setAllowSymmetry();
setAllowDoubleClickAction();
}
</pre>
<p>How to test the functionalities of selection methods? Please download the sample from <a href="https://github.com/vijayaprakash/richSelectionTool" target="_blank">github</a></p>
<p>Steps to test:</p>
<ol>
<li>Build the <a href="https://github.com/vijayaprakash/richSelectionTool" target="_blank">sample</a></li>
<li>Copy richSelectionProperities.mel and richSelectionValues.mel to Maya script folder “/Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others” (OSX)</li>
<li>Launch Maya 2017</li>
<li>Load richSelectionTool plug-in</li>
<li>Run mel scripts:
<ol>
<li><strong><em>richSelectionContext richSelectionContext1;</em></strong></li>
<li><strong><em>setToolTo richSelectionContext1;</em></strong></li>
<li><strong><em>toolPropertyWindow;</em></strong></li>
</ol>
</li>
<li>Switch to component selection mode (vertex/edge/face)</li>
<li>There you should be on this rich selection tool and could change the soft selection and symmetrical selection options. Double clicking to select shell, edge loop/rings should also works.</li>
</ol>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Render Setup improvement in Maya 2017: Support for AOV setups per layer and inclusion of AOV setups in exported templates
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: render-setup-improvement-in-maya-2017-aov
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python
CATEGORY: Rendering
CATEGORY: Visual Studio
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/render-setup-improvement-in-maya-2017-aov.html 
DATE: 11/22/2016 08:17:00 PM
-----
BODY:
<p>As you know in Maya 2016 Extension 2 we introduced the replacement for Maya render layers called “Render Setup”, during that period we introduced this feature to several 3rd party renderers in person.&#160; For Maya 2017 we have been making improvements to this feature that will allow for improved support for 3rd party renderers, and other recent changes have the potential to impact 3rd party renderers as well, will talk about the 3 improvements in the following separate blogs, and the information is provided by our engineering team, thanks to them for sharing.</p>  <p>The first improvement is supporting for AOV setups per layer and inclusion of AOV setups in exported templates.</p>  <h3><font style="font-weight: bold" size="3">Introduction</font></h3>  <p>In Maya 2016 extension 2 and later, Render Setup has had the ability to import and export Render Settings information. This information however did not include AOV (Arbitrary Output Variable) data. With Maya 2017 however, an interface has been created to enable renderers to register a set of callbacks to import and export this AOV information. Not only that, but other AOV related callbacks can also be registered that do a variety of things. One such callback allows renderers to supply a means of opening the Render Settings to the renderer’s AOV section when double clicking on the AOV portion of the Render Setup window. Another set of callbacks provides a means of organizing AOV overrides into a more readable set of AOV override menus. The purpose of this document is to outline the various callbacks that are available for AOVs, as well as how to go about registering and implementing them.</p>  <h3><font style="font-weight: bold" size="3">AOV Callbacks</font></h3>  <p>In Maya 2017, there is a new callback mechanism for registering AOV callbacks with the Render Setup system. Essentially there is a single class defined in renderSetup/model/rendererCallbacks.py called AOVCallbacks that one needs to derive from and implement:</p>  <pre class="brush:python;toolbar: false;">import maya.app.renderSetup.model.rendererCallbacks as rc 
class RendererAOVCallbacks(rc.AOVCallbacks):
    def encode(self):
        ...    
    def decode(self, aovsData, decodeType):
        ...
    def displayMenu(self):
        ...
    def getAOVName(self, aovNode):
        ...
    def getCollectionSelector(self, selectorName):
        ...
    def getChildCollectionSelector(self, selectorName, aovName):
        ...</pre>

<p>Subsequent sections will take a look at each of these callback functions, and discuss both their purpose as well as give some advice on how to implement them.</p>

<p>After deriving from AOVCallbacks one still needs to register this set of AOV callbacks with the Render Setup system. This is achieved as follows:</p>

<pre class="brush:python;toolbar: false;">import maya.app.renderSetup.model.rendererCallbacks as rc
class RendererAOVCallbacks(rc.AOVCallbacks):
	...

rendererCallbacks = RendererAOVCallbacks()
rc.registerCallbacks(“rendererName”, 
                     rc.CALLBACKS_TYPE_AOVS,
                     rendererAOVCallbacks)</pre>

<h3><font style="font-weight: bold" size="3">Encode/Decode</font></h3>

<p>The most important set of AOV callbacks are the encode/decode callbacks which are used for importing and exporting a renderer’s AOV information. The encode function takes no parameters and must return a JSON string with the renderer specific AOV information encoded. To help simplify the process of exporting this information to JSON, the Render Setup plugin comes with a BasicExporter also located in renderSetup/model/rendererCallbacks.py that can be used to encode and decode Maya node information to and from JSON. The BasicNodeExporter derives from the NodeExporter class which has some additional useful methods. The signature of these classes is as follows:</p>

<pre class="brush:python;toolbar: false;">class NodeExporter(object):
    def encode(self):
        ...
    def decode(self, encodedData):
        ...
    def setPlugsToIgnore(self, plugsToIgnore):
        ...

class BasicNodeExporter(NodeExporter):
    def setNodes(self, nodes):
        ...
    def getNodes(self):
        ...</pre>

<p>To use the BasicNodeExporter, simply create one and call setNodes with a list of nodes that you wish to export. You can also use the setPlugsToIgnore function to specify a list of attributes that you want the exporter to not export. So for example if you used basicNodeExporter.setNodes([pSphere1]), you could call basicNodeExporter.setPlugsToIgnore([pSphere1.translate]) to avoid exporting the translate attribute when calling encode.</p>

<p>Unlike encode, the AOV callback decode function takes 2 parameters: the AOV JSON data and the decode type. The decode type has one of two possible values: DECODE_TYPE_OVERWRITE and DECODE_TYPE_MERGE. The overwrite mode specifies that the import should delete all existing AOV information before doing the import. The merge mode on the other hand overwrites any AOVs with the same name, imports AOVs with different names, and leaves alone any other pre-existing AOVs in the scene. The BasicNodeExporter can also be used to decode the data that you encoded previously with it. It doesn’t take care of the overwrite mode for you, but it can be used to do a basic merge style import.</p>

<h3><font style="font-weight: bold" size="3">Display Menu</font></h3>

<p>The next piece of functionality provided by the AOV callbacks is the ability to specify a way to open the Render Settings to a particular AOV related tab for the respective renderer. A sample implementation of such a callback is as follows:</p>

<pre class="brush:python;toolbar: false;">import maya.mel as mel
mel.eval(‘unifiedRenderGlobalsWindow’)
mel.eval(‘setCurrentTabInRenderGlobalsWindow(\”AOVs\”)’)
mel.eval(‘fillSelectedTabForCurrentRenderer’)</pre>

<p>The code fragment above attempts to load an AOVs tab in the Render Settings window. The tab in question to open is renderer specific.</p>

<h3><font style="font-weight: bold" size="3">AOV Overrides</font></h3>

<p>By default all Render Settings overrides for a layer are placed under the layer in a collection called Render Settings. The problem with placing AOV overrides here is that they can easily become lost amongst the various other Render Settings overrides. That’s where 3 callbacks come into play: getAOVName, getCollectionSelector and getChildCollectionSelector. These callbacks make it possible for an AOV collection to be created under the layer to help organize the AOV overrides. This AOV collection in turn has a child collection for each AOV which is used to house each AOV specific override.</p>

<p>As was mentioned, in order improve the organization of the AOV overrides, there are three callback functions that need to be implemented. The first, getAOVName, is used to get the AOV name for a particular AOV node. For example, for the Autodesk Arnold renderer, AOVs are broken into 3 nodes, each associated with a particular AOV (aiAOV, aiAOVDriver, aiAOVFilter). This function is used to return the AOV node name given a node of any of these three types.</p>

<p>The second function, called getCollectionSelector is used to select all AOV related nodes. In the case of Autodesk’s Arnold renderer this was once again the aiAOV, aiAOVDriver and aiAOVFilter nodes. In order to do so, an instance of the render setup SimpleSelector class was created to select all pertinent nodes. In Autodesk’s Arnold implementation this was simply done by the following code:</p>

<pre class="brush:python;toolbar: false;">import maya.app.renderSetup.model.selector as sel
import maya.app.renderSetup.model.rendererCallbacks as rc
import maya.app.renderSetup.model.utils as utils
...
 
class RendererAOVCallbacks(rc.AOVCallbacks):
    ...
	
    def getCollectionSelector(self, selectorName):
        selectorName = cmds.createNode(sel.SimpleSelector.kTypeName, 
                                   name=selectorName,            
                                   skipSelect=True)
        selector = utils.nameToUserNode(selectorName)
        selector.setPattern(&quot;*&quot;)
        selector.setFilterType(sel.Filters.kCustom)
        selector.setCustomFilterValue(
            &quot;aiAOV aiAOVDriver aiAOVFilter&quot;)
        return selectorName</pre>

<p>This creates a SimpleSelector that selects all nodes that are of the types: aiAOV, aiAOVDriver and aiAOVFilter.</p>

<p>The third function that needs to be implemented is getChildCollectionSelector which is used to return a selector that selects all of the nodes for a particular AOV. The implementation of this function will vary greatly based upon the way a renderer organizes its AOVs. At its simplest this function will simply look up the aovNode names and statically select them as follows:</p>

<pre class="brush:python;toolbar: false;">import maya.app.renderSetup.model.rendererCallbacks as rc
...

class RendererAOVCallbacks(rc.AOVCallbacks):
    ...

    def _getListOfAOVNodesFromAOVName(self, aovName):
        ...

    def getChildCollectionSelector(self, selectorName, aovName):
        selectorName = cmds.createNode(sel.SimpleSelector.kTypeName, 
                                   name=selectorName,            
                                   skipSelect=True)
        selector = utils.nameToUserNode(selectorName)
        aovNodes = self._getListOfAOVNodesFromAOVName(aovName)
        selector.staticSelection.setWithoutExistenceCheck(aovNodes)
        return selectorName</pre>

<p>In the above example, the function _getListOfAOVNodesFromAOVName would be a renderer specific function for getting the AOV node list from the AOV name.</p>

<p>It is possible that a SimpleSelector will be too simplistic for a particular renderer’s needs. In that case it is possible to derive from the base Selector class to create a custom selector. This selector can be registered using registerNode() located in renderSetup/model/renderSetup.py. Details on how to implement such a Selector are beyond the scope of this document. Please contact the Render Setup team if you believe you need to implement such a custom selector.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: christopher haney
EMAIL: chaney.interport@rcn.com
IP: 108.41.101.198
URL: 
DATE: 12/14/2016 09:00:06 AM
My scenes do not render due to arnoldAOVChildSelector nodes not being unrecognized during batch render. Consequently the mayaBatchRenderProcedure.mel fails because it cannot switch to the layer. 

How do I fix this? It is a production disaster - any help would be appreciated. 

Thanks

Warning: line 1: Unrecognized node type for node 'direct_specularSelector'; preserving node information during this session. 
Warning: line 1: Unrecognized node type for node 'sssSelector'; preserving node information during this session. 
Warning: line 1: Unrecognized node type for node 'direct_specular1Selector'; preserving node information during this session. 
Warning: line 1: Unrecognized node type for node 'sss1Selector'; preserving node information during this session. 
Warning: line 1: Unrecognized node type for node 'direct_specular2Selector'; preserving node information during this session. 
Warning: line 1: Unrecognized node type for node 'sss2Selector'; preserving node information during this session. 
Warning: line 1: Errors have occurred while reading this scene that may result in data loss. 
File read in 0.28 seconds. 
Result: /Volumes/vfx/projects/seeds/shots/TUB_0020/maya/scenes/TUB_0020_cs_lighting_v13__646.mb 
Warning: int $interactive = 1; // for Flag -interactive 
Warning: "/var/folders/55/0s5rs_f167563_fws_fgqz940000gn/T/ASTMP.672DJFnCA.mel" line 9.21 : Redeclaration of variable "$interactive" shadows previous declaration at line 7. Previous value will be overwritten by explicit initializer. 
Error: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 525: RuntimeError: file  line 2: Exception: file /Applications/Autodesk/maya2017/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.7/site-packages/maya/app/renderSetup/model/collection.py line 604: The collection 'direct_specular' does not have a selector 
Warning: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 528: Cannot render 'rs_Tentacle_Passes' because we can't switch to that layer. 
Error: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 525: RuntimeError: file  line 2: Exception: file /Applications/Autodesk/maya2017/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.7/site-packages/maya/app/renderSetup/model/collection.py line 604: The collection 'direct_specular1' does not have a selector 
Warning: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 528: Cannot render 'rs_Shadow_Pass' because we can't switch to that layer. 
Error: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 525: RuntimeError: file  line 2: Exception: file /Applications/Autodesk/maya2017/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.7/site-packages/maya/app/renderSetup/model/collection.py line 604: The collection 'direct_specular2' does not have a selector 
Warning: file: /Applications/Autodesk/maya2017/Maya.app/Contents/scripts/others/mayaBatchRenderProcedure.mel line 528: Cannot render 'rs_Ground_Shadow' because we can't switch to that layer. 
Scene /Volumes/vfx/projects/seeds/shots/TUB_0020/maya/scenes/TUB_0020_cs_lighting_v13__646.mb completed. 

-----
COMMENT:
AUTHOR: Zhong Wu
EMAIL: zhong.wu@autodesk.com
IP: 132.188.112.74
URL: 
DATE: 12/17/2016 12:21:33 AM
Which version are you working on? Maya 2017 or Maya 2016 extension 2?
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Two quick API tips for Maya - image sample in devkit and registerCommand in Maya 2016.5
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: two-quick-api-tips-for-maya-image-sample-in-devkit-and-registercommand-in-maya-20165
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Samples

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/two-quick-api-tips-for-maya-image-sample-in-devkit-and-registercommand-in-maya-20165.html 
DATE: 11/22/2016 01:31:04 AM
-----
BODY:
<style type="text/css">
pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  background-color: #f8f8f8;
  border-radius: 3px;

}
}


</style>
<p>We have encountered two simple API changes recently, but they each can cause some confusion.</p>
<p><strong>Image Sample issues</strong></p>
<p>The first one is the image extension sample in Maya devkit. <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_Appendices_Appendix_F_Adding_Image_Plugins_htm" target="_blank">It is used for creating image extension for adding extra image format support in Maya.</a> It is located in devkit/image folder.</p>
<p>It appears above mentioned sample and its document haven't been updated for a while, and there are two small issues inside of it. Imf.lib is renamed to imfbase.lib now and the project is missing a preprocessor definition (PLUGIN_DLL).</p>
<p><strong>registerCommand in Maya 2016.5</strong></p>
<p>In Maya 2016.5, if you are registering a command with MFnPlugin::registerCommand without giving a newsyntax function. Maya will call creator of your command.</p>
<p>For example, following code is taken from blastCmd sample in Maya devkit.</p>
<p style="border: 1px solid #eaeaea; background-color: #f8f8f8;  line-height:1;"><code>status = plugin.registerCommand( commandName,<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blastCmd::creator,<br /> // Remove the parameter below will make Maya call creator when the plugin is loaded<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blastCmd::newSyntax);</code></p>
<p>I've tested with Maya 2016, Maya 2016.5 and Maya 2017 Update 1, this problem only exists in Maya 2016.5. If you are going to build a command plugin for Maya 2016.5, please take it into consideration.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Support XGen Interactive Grooming feature in your plugin
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: support-xgen-interactive-grooming-feature-in-your-plugin
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Rendering
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/support-xgen-interactive-grooming-feature-in-your-plugin.html 
DATE: 11/16/2016 09:04:00 PM
-----
BODY:
<p>Starting from Maya 2017, the Maya team introduced a great improvement to the XGen feature, called “Interactive hair and fur grooming with XGen”. The improvement provides a full range of tools, including sculpting brushes, modifiers, and sculpting layers, dedicated to creating all styles of hair and fur.</p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d23cc8ef970c-pi"><img title="interactive-hair-grooming-xgen-large-1152x648" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="interactive-hair-grooming-xgen-large-1152x648" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8b2fbce970b-pi" width="477" height="270" /></a></p>  <p>Interactive grooming descriptions and modifiers are Maya-based nodes, and therefore they can be manipulated in the Node Editor. The cool thing is that these nodes are computed on your system's GPU instead of CPU, so your brush stokes can appear in real-time, providing you an interactive workflow that does not require preview generation. All of the interactive groom hair data is saved to Maya scene files without using any additional Ptex or XPD sidecar files. Also, you can save your grooms to Alembic-based cache files.</p>  <p>One thing you need to know is XGen Geometry Instancer descriptions (including default spline and groomable spline descriptions) are not compatible with interactive grooming tools or modifiers. But, Maya provides you a way to convert default spline descriptions to interactive grooming hairs. </p>  <p>Today, I am not going to talk in detail about this cool feature. If you are interested, please visit the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-496603B0-F929-45CD-B607-1CFCD3283DBE">XGen Interactive Grooming Help </a>for more information. </p>  <p>Rather, I want to talk about how to support the XGen Interactive Grooming feature in any third party plug-ins, especially in a renderer like Arnold. </p>  <p>Before we talk about the API, I’d like to mention some MEL commands. The XGen interactive Grooming feature has many useful commands. Our engineering team is currently working on updating the XGen Tech Docs with these new commands. These commands would be quite helpful for TD’s who want to automate their tasks, or customize the pipeline. Our XGen development team is also actively working on them, if you have any problems or requirements, please feel free to contact us.</p>  <p>xgmSplineQuery is an important one, it provides many flags to help you get different values or results. Let’s take a look at them one by one.</p>  <p>· <b>xgmSplineQuery </b></p>  <p>1. -listSplineDescriptions;</p>  <p>Lists all the descriptions, the result would be: description1 description2. </p>  <p>2. -listSplineDescriptions -long;</p>  <p>Lists the long name of all the descriptions, the result would be: |description1 |description2 </p>  <p>3. -isSplineDescription descriptionNode;</p>  <p>Determines if the node is a spline description.</p>  <p>4. -splineCount descriptionNode;</p>  <p>Gets the spline count of the specified description. </p>  <p>5. -videoMemoryDedicated;</p>  <p>Gets the total available GPU memory.</p>  <p>6. -videoMemoryUsed;</p>  <p>Gets the GPU memory used by all the descriptions in scene.</p>  <p>7. -videoMemoryAvailable;</p>  <p>Gets the total GPU memory used by the selected description(s).</p>  <p>· <b>xgmSplineSelect </b></p>  <p>1. – convertToFreeze </p>  <p>Freezes hairs in the selected description. </p>  <p>2. – replaceBySelectedFaces</p>  <p>Replaces currently bound faces with the selected faces.</p>  <p>· <b>xgmSplineApplyRenderOverride descriptionNode</b></p>  <p>Lets you override the current hair density being rendered in Viewport with a different density at render time.</p>  <p>· <b>xgmExportSplineDataInternal </b></p>  <p>Lets you export all the description data, which is stored in the Out Render Data attribute of the xgmSplineDescription node, to a specified file. Use the -output flag as follows: </p>  <p><b>xgmExportSplineDataInternal -output &quot;D:/XGenAPI/test.txt&quot; description1_Shape.outRenderData;</b></p>  <p>Now let’s take a look at the XGen API. You can find the SDK in your Maya installation folder. For example, in Maya 2017 this would be: <a href="file:///\\Maya2017\plug-ins\xgen">\\Maya2017\plug-ins\xgen</a>.</p>  <p>Here, you can see the header files, lib directories and files, but the most important one for third-party developers is the devkit folder. The devkit contains a couple of samples. Among them, the xgenSplineArnoldExtension, this is the one that I am going to talk about today. It demonstrates how to support the XGen interactive grooming new feature within Arnold renderer. </p>  <p>The new XGen interactive grooming feature also uses splines to represent each hair or fur, and the data for each spline is stored in the Out Render Data attribute of xgmSplineDescription node. You can use the following MEL command output the result. </p>  <p><i>xgmExportSplineDataInternal -output &quot;D:/XGenAPI/test.txt&quot; description1_Shape.outRenderData</i><i></i></p>  <p>How do you use the API to access the data of XGen interactive grooming feature? In general, there are 3 steps.</p>  <p><b>Step 1</b></p>  <p>You need to get the spline data. The XgFnSpline is the class to help you operate on all splines data. It’s located in the header file XgSplineApi.h. Class XgFnSpline can loads the data from xgmSplineDescription.outRenderData plug in Maya. Translators use Maya's MPxData::writeBinary() method to serialize the plug data into a BLOB. XgFnSpline can interpret the data without Maya. </p>  <p>Let’s take a look at the sample code to load the data for XgFnSpline:</p>  <pre class="brush:cpp;toolbar: false;">MFnDagNode fnDagNode(m_dagPath);
// Stream out the spline data
std::string data;
MPlug       outPlug = fnDagNode.findPlug(&quot;outRenderData&quot;);
MObject     outObj  = outPlug.asMObject();
MPxData*    outData = MFnPluginData(outObj).data();
if (outData)
{
    std::ostringstream opaqueStrm;
    outData-&gt;writeBinary(opaqueStrm);
    data = opaqueStrm.str();
}
// Load the sample for i-th motion step
_splines.load(opaqueStrm, sampleSize, sampleTime)</pre>

<p><b>Step 2</b></p>

<p>After the data is loaded into XgFnSpline object, you need to allocate memory for the data. You need to use XgItSpline to iterate with the XgFnSpline object _splines, which we got in Step 1, and then calculate the number of points, curves and samples. We can then allocate the memory for these buffers depending on your needs. </p>

<p>Here is the sample code to support Arnold renderer. There are some special requirements as mentioned inline. You can also handle that depending on your specific needs. </p>

<pre class="brush:cpp;toolbar: false;">// Count the number of curves and the number of points
// Arnold's b-spline requires two phantom points.
unsigned int curveCount        = 0;
unsigned int pointCount        = 0;
unsigned int pointInterpoCount = 0;
for (XgItSpline splineIt = _splines.iterator(); !splineIt.isDone(); splineIt.next())
{
    curveCount        += splineIt.primitiveCount();
    pointCount        += splineIt.vertexCount();
    pointInterpoCount += splineIt.vertexCount() + splineIt.primitiveCount() * 2;
}
// Get the number of motion samples
const unsigned int steps = _splines.sampleCount();
// Allocate buffers for the curves
_numPoints  = AiArrayAllocate(curveCount, 1, AI_TYPE_UINT);
_points     = AiArrayAllocate(pointInterpoCount, steps, AI_TYPE_POINT);
_radius     = AiArrayAllocate(pointCount, 1, AI_TYPE_FLOAT);
_uCoord     = AiArrayAllocate(curveCount, 1, AI_TYPE_FLOAT);
_vCoord     = AiArrayAllocate(curveCount, 1, AI_TYPE_FLOAT);
_wCoord     = AiArrayAllocate(pointInterpoCount, 1, AI_TYPE_FLOAT);

unsigned int*   numPoints   = reinterpret_cast<unsigned int*>(_numPoints-&gt;data);
SgVec3f*        points      = reinterpret_cast<sgvec3f   *>(_points-&gt;data);
float*          radius      = reinterpret_cast<float   *>(_radius-&gt;data);
float*          uCoord      = reinterpret_cast<float   *>(_uCoord-&gt;data);
float*          vCoord      = reinterpret_cast<float   *>(_vCoord-&gt;data);
float*          wCoord      = reinterpret_cast<float   *>(_wCoord-&gt;data);</pre>

<p><b>Step 3</b></p>

<p>Now, we come to the last step, and it’s also the most important one. Here, we will fill in these objects with the correct values we evaluate from XgFnSpline object. XGen provides an iterator called XgItSpline. It’s also located in XgSplineApi.h and provides the functionalities to help access the internal data of each spline. Some important methods are listed as follows, and should provide all the geometry information:</p>

<p>· unsigned int primitiveInfoStride() const; </p>

<blockquote>
  <p>Stride of the primitive info array, </p>

  <p>[0]: Offset</p>

  <p>[1]: Length </p>

  <p>Offset and length determines the varying attribute location of each vertex in the varying array.</p>
</blockquote>

<p>· unsigned int primitiveCount() const;</p>

<blockquote>
  <p>Return the number of primitives</p>
</blockquote>

<p>· unsigned int vertexCount() const;</p>

<blockquote>
  <p>Return the number of vertices</p>
</blockquote>

<p>· SgBox3f boundingBox(int motion = 0) const;</p>

<blockquote>
  <p>Return the bounding box</p>
</blockquote>

<p>· SgBox3f motionBoundingBox() const;</p>

<blockquote>
  <p>Return the bounding box of motion vectors</p>
</blockquote>

<p>· const unsigned int* primitiveInfos() const; </p>

<blockquote>
  <p>Primitive info. See primitiveInfoStride()</p>
</blockquote>

<p><b>Varying (per-vertex) Attributes</b></p>

<p>· const SgVec3f* positions(int motion = 0) const; </p>

<blockquote>
  <p>Vertex positions</p>
</blockquote>

<p>· const SgVec2f* texcoords( int motion = 0) const;</p>

<blockquote>
  <p>Texcoords from root to tip, U is 0.0, V ranges from 0.0 (root vertex) to 1.0 (tip vertex)</p>
</blockquote>

<p>· const SgVec2f* patchUVs( int motion = 0) const;</p>

<blockquote>
  <p>Texcoords of the root vertex on the patch</p>
</blockquote>

<p>· const float* width( int motion = 0) const;</p>

<blockquote>
  <p>Get width</p>
</blockquote>

<p>With the information above, you can fetch whatever you need and fill into your data based on your requirement. Let’s take a look at the Arnold sample:</p>

<pre class="brush:cpp;toolbar: false;">// Fill the array buffers for motion step 0
for (XgItSpline splineIt = _splines.iterator(); !splineIt.isDone(); splineIt.next())
{
    const unsigned int  stride         = splineIt.primitiveInfoStride();
    const unsigned int  primitiveCount = splineIt.primitiveCount();
    const unsigned int* primitiveInfos = splineIt.primitiveInfos();
    const SgVec3f*      positions      = splineIt.positions(0);
    const float*        width          = splineIt.width();
    const SgVec2f*      texcoords      = splineIt.texcoords();
    const SgVec2f*      patchUVs       = splineIt.patchUVs();

    for (unsigned int p = 0; p &lt; primitiveCount; p++)
    {
        const unsigned int offset = primitiveInfos[p * stride];
        const unsigned int length = primitiveInfos[p * stride + 1];

        // Number of points
        *numPoints++ = length + 2;

        // Texcoord using the patch UV from the root point
        *uCoord++ = patchUVs[offset][0];
        *vCoord++ = patchUVs[offset][1];

        // Add phantom points at the beginning
        *points++ = phantomFirst(&amp;positions[offset], length);
        *wCoord++ = phantomFirst(&amp;texcoords[offset], length)[1];

        // Copy varying data
        for (unsigned int i = 0; i &lt; length; i++)
        {
            *points++ = positions[offset + i];
            *radius++ = width[offset + i] * 0.5f;
            *wCoord++ = texcoords[offset + i][1];
        }

        // Add phantom points at the end
        *points++ = phantomLast(&amp;positions[offset], length);
        *wCoord++ = phantomLast(&amp;texcoords[offset], length)[1];

    } // for each primitive
} // for each primitive batch

// Fill the array buffers for motion step &gt; 0
for (unsigned int key = 1; key &lt; steps; key++)
{
    for (XgItSpline splineIt = _splines.iterator(); !splineIt.isDone(); splineIt.next())
    {
        const unsigned int  stride         = splineIt.primitiveInfoStride();
        const unsigned int  primitiveCount = splineIt.primitiveCount();
        const unsigned int* primitiveInfos = splineIt.primitiveInfos();
        const SgVec3f*      positions      = splineIt.positions(key);

        for (unsigned int p = 0; p &lt; primitiveCount; p++)
        {
            const unsigned int offset = primitiveInfos[p * stride];
            const unsigned int length = primitiveInfos[p * stride + 1];

            // Add phantom points at the beginning
            *points++ = phantomFirst(&amp;positions[offset], length);

            // Copy varying data
            for (unsigned int i = 0; i &lt; length; i++)
            {
                *points++ = positions[offset + i];
            }

            // Add phantom points at the end
            *points++ = phantomLast(&amp;positions[offset], length);

        } // for each primitive
    } // for each primitive batch
} // for each motion step

// Set the buffers to the curves node
AiNodeSetArray(_curves, &quot;num_points&quot;, _numPoints);
AiNodeSetArray(_curves, &quot;points&quot;, _points);
AiNodeSetArray(_curves, &quot;radius&quot;, _radius);
AiNodeSetArray(_curves, &quot;uparamcoord&quot;, _uCoord);
AiNodeSetArray(_curves, &quot;vparamcoord&quot;, _vCoord);
AiNodeSetArray(_curves, &quot;wparamcoord&quot;, _wCoord);</pre>

<p>That’s how Arnold supports the XGen interactive grooming feature. You can also refer the <a href="https://gist.github.com/JohnOnSoftware/9ca01686525a368b765f3da247215a35">gist</a> for the core code. For more details, please refer the sample at &quot;Maya 2017 installation folder\plug-ins\xgen\devkit\xgenSplineArnoldExtension\xgenSpline”. </p>

<p>If you have any questions or requests, please feel free to contact me. As I mentioned, our development team is still actively working on the feature, and we are happy to hear any feedback. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Maya Extension Attributes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-extension-attributes
CATEGORY: C++
CATEGORY: JSON
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plug-in
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/maya-extension-attributes.html 
DATE: 11/10/2016 10:57:30 PM
-----
BODY:
<p>Extension attributes are really helpful when plugin developers want to add more attributes to a plugin without modifying the existing plugin code. In Maya, there are many ways to add/remove the extension attributes like MEL way, Python way and C++ API way as well.</p>
<p><strong>MEL Way to add/remove extension attributes:</strong></p>
<ul>
<ul>
<li>To add extension attribute, use <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/Commands/addExtension.html" target="_blank">addExtension</a> command</li>
<li>To remove extension attribute, use <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/Commands/deleteExtension.html" target="_blank">deleteExtension</a> command</li>
<li>To list only extension attribute of an object use &quot;<a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/Commands/listAttr.html" target="_blank">listAttr -ex object</a>&quot;</li>
</ul>
</ul>
<pre class="brush: cpp;toolbar: false;">Example:
// Create unknown Node
createNode &quot;unknown&quot;;

// Add extension attribute to node type &quot;unknown&quot;
addExtension -nt &quot;unknown&quot; -shortName &quot;te&quot; -longName &quot;testExtAttr&quot; -at double;

// List all the attributes of unknown1 object;
listAttr unknown1;

// List only extension attribute of &quot;unknown&quot; node
listAttr -ex unknown1;

// Delete the extension attribute of node type &quot;unknown&quot;
deleteExtension -nt &quot;unknown&quot; -at &quot;testExtAttr&quot; -forceDelete on;

// List all the attributes of unknown1 object
listAttr unknown1;
</pre>
<p>The MEL way to add/delete extension is straight-forward and users can easily watch you have done in the MEL script. However, if you want to hide all the extension attribute implementation, you can create your own plugin using C++ API.</p>
<p><strong>C++ API Way to add/remove extension attributes:</strong></p>
<p>To add extension attribute, you can use <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">addExtensionAttribute()</a> API. If you want to remove the extension attribute you can use <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">removeExtensionAttribute()</a> API. If you closely look at the MEL way to add/delete extension attribute you have to use particular nodeType each time while you add/remove extension attributes. In C++ API, there is a way to add an extension attribute to your plugin which may contain different nodeTypes. For example a plugin can have nodeType1, nodeType2,.. You can add extension attribute to a plugin regardless of nodeTypes. It means that the extension attribute is common for all nodeTypes within plugin. You can do this using <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">linkExtensionAttributeToPlugin()</a> API.</p>
<pre class="brush: cpp;toolbar: false;">MDGModifier fCmd; 
MNodeClass* fNodeType;
MFnPlugin   plugin( obj ); 
...
...
MFnCompoundAttribute compAttr;
MFnNumericAttribute numAttr1;
MFnNumericAttribute numAttr2;
MObject extensionChild1 = numAttr1.create( kChild1NameLong, kChild1NameShort, MFnNumericData::kFloat, 0, &amp;status );
CHECK_MSTATUS(status);
MObject extensionChild2 = numAttr2.create( kChild2NameLong, kChild2NameShort, MFnNumericData::kFloat, 0, &amp;status );
CHECK_MSTATUS(status);
MObject extensionParent = compAttr.create( kParentNameLong, kParentNameShort, &amp;status );
CHECK_MSTATUS(status);
compAttr.addChild( extensionChild1 );
compAttr.addChild( extensionChild2 );

// Add parent extension attribute to node
status = fCmd.addExtensionAttribute( *fNodeType, extensionParent );
CHECK_MSTATUS(status);

// Link the extension attribute to plugin regardless of nodeTypes
status = fCmd.linkExtensionAttributeToPlugin(plugin,extensionParent); 
CHECK_MSTATUS(status);
</pre>
<p>Users can delete the extension attribute using <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">removeExtensionAttribute</a><em><a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">()</a> API. Moreover, you can delete the extension attributes regardless of nodeTypes as well for that you have to use <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">unlinkExtensionAttributeToPlugin</a></em><a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">()</a> API.</p>
<pre class="brush: cpp;toolbar: false;">MObject parentAttr = fNodeType-&gt;attribute( kParentNameLong, &amp;status );
CHECK_MSTATUS(status);

// Remove the extension attribute for a particular node type
status = fCmd.removeExtensionAttribute( *fNodeType, parentAttr );
CHECK_MSTATUS(status);

// Unlink the extension attribute from plugin regardless of nodeTypes
status = fCmd.unlinkExtensionAttributeFromPlugin(plugin, parentAttr);
CHECK_MSTATUS(status);
</pre>
<p>Remember Maya never remove or unlink the attribute from node and from plugin automatically. User has to do the above remove and unlink steps manually.</p>
<p>BTW, if you need to list all the extension attributes of a node, here is the way using C++ API:</p>
<pre class="brush: cpp;toolbar: false;">MObjectArray allAttrs;
status = fNodeType-&gt;getAttributes(allAttrs);
CHECK_MSTATUS(status);
int attrCount = fNodeType-&gt;attributeCount();
for (int i=0; i &lt; attrCount; i++)
{
MFnAttribute attr;
attr.setObject(allAttrs[i]);
if ( attr.isExtension() )
cout &lt;&lt; &quot;Attribute is extension, name is &lt;&quot; &lt;&lt; attr.name() &lt;&lt; &quot;&gt;&quot;&lt;&lt; endl;
}
</pre>
<p>In both MEL and C++ way, you have to add the extension attributes one by one i.e, you have to call <a href="http://help.autodesk.com/cloudhelp/2017/ENU/Maya-Tech-Docs/Commands/addExtension.html" target="_blank">addExtension</a> MEL command or <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_d_g_modifier_html" target="_blank">addExtensionAttribute()</a> API for each attribute. Let&#39;s say I want to add bunch of extension attributes but I don&#39;t want to add them one be one, yes there is a way in Maya 2017. You can create a attribute pattern file where you can add all the extension attributes with default values. The attribute pattern file is basically a JSON file which is the simple and easiest way to add extension attributes to Maya. Please check the below link for reference. <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-B103DD61-8ED8-440E-AB55-64F70E09F7D3" target="_blank">http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=GUID-B103DD61-8ED8-440E-AB55-64F70E09F7D3</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Add your new context in UV Texture Editor
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: add-your-new-context-in-uv-texture-editor
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Modeling
CATEGORY: Plug-in
CATEGORY: Samples
CATEGORY: UI
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/11/add-your-new-context-in-uv-texture-editor.html 
DATE: 10/31/2016 12:28:00 PM
-----
BODY:
<p>Well, it’s pretty easy to add a command into Maya, and I also believe most of our plugin developers know how to add a context/tool within Maya (Context is actually presented with the name “tool” in Maya), if you are not familiar with that, please refer the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_Command_plugins_htm">Command plug-ins section of help doc</a> for the details. In general, contexts in Maya are modes which define how mouse interaction will be interpreted. A context can execute commands, modify the current selection, or perform drawing operations, etc. In addition, the context can draw the cursor differently denoting the context. </p>  <p>But how to support a context in Maya UV Texture Editor? Maya 2016 introduced 2 proxy classes to help your achieve that, <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_px_tex_context_html">MPxTexContext</a> and <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_class_m_px_poly_tweak_u_v_interactive_command_html">MPxPolyTweakUVInteractiveCommand</a>, let’s first take a look at them. </p>  <p>MPxTexContext is derived from class MPxContext, and it should work similar as MPxContext, but this is for you to define any contexts that working on UV Editor. The methods including some standard virtual methods that require to be overridden as follow, they are doing same thing as those in MPxContext, nothing mysterious:</p>  <pre class="brush:cpp;toolbar: false;">virtual MStatus doPress (MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, const MHWRender::MFrameContext &amp;context)  
virtual MStatus doRelease (MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, const MHWRender::MFrameContext &amp;context) 
virtual MStatus doDrag (MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, const MHWRender::MFrameContext &amp;context) 
virtual MStatus doPtrMoved (MEvent &amp;event, MHWRender::MUIDrawManager &amp;drawMgr, const MHWRender::MFrameContext &amp;context) </pre>

<p>Besides above virtual methods, the class also provides some helper methods as follow, you can get the meaning by the method name, if not, check the SDK Doc should provide you everything:</p>

<pre class="brush:cpp;toolbar: false;">void 	viewToPort (double xView, double yView, short &amp;xPort, short &amp;yPort) const
void 	portToView (short xPort, short yPort, double &amp;xView, double &amp;yView) const
void 	viewRect (double &amp;left, double &amp;right, double &amp;bottom, double &amp;top) const
void 	portSize (double &amp;width, double &amp;height) const</pre>

<p><i></i></p>

<p>The last one that need to be mentioned is getMarqueeSelection, it’s used when the user performs a selection within the uv editor, you will see the usage within the sample later.</p>

<pre class="brush:cpp;toolbar: false;">static bool  getMarqueeSelection (double xMin, double yMin, double xMax, double yMax, const MSelectionMask &amp;mask, bool bPickSingle, bool bIgnoreSelectionMode, MSelectionList &amp;selectionList)</pre>

<p>Ok, now let’s take a quick check for class MPxPolyTweakUVInteractiveCommand, it’s the base class for UV editing interactive commands on polygonal objects. According to the doc, the purpose of this tool command class is to simplify the process of moving UVs on a polygonal object. The user is only required to provide the new positions of the UVs that being modified, and finalize at the end of editing. </p>

<p>First, some virtual methods same as in MPxToolCommand that you can override as follow:</p>

<pre class="brush:cpp;toolbar: false;">virtual bool 	isUndoable () const
virtual MStatus 	doIt (const MArgList &amp;args)
virtual MStatus 	cancel ()
virtual MStatus 	finalize ()</pre>

<p>The important one is setUVs, this method can be used during the editing, to set the UV to new value.</p>

<pre class="brush:cpp;toolbar: false;">void 	setUVs (const MObject &amp;mesh, MIntArray &amp;uvList, MFloatArray &amp;uPos, MFloatArray &amp;vPos, const MString *uvSet=NULL)</pre>

<p>Now, to help you understand how to create a context/tool for UV editor, I will show you the sample code to implement a UV grab brush, it’s based on our sample “grabUV” within devkit, but to make it more understandable, I removed the unnecessary part that accepting key-press event “B”, so we do not necessary dependent on Qt anymore.</p>

<p>If you are interested, you can get the full code under your //devkit/plug-ins/, it’s a Qt project, but it’s not upgraded to Qt5 yet, if you are running the Maya version later than 2017, you have to update the code to include the QApplication under <b>qtwidgets</b> folder instead of <b>QtGui</b> to make it work: </p>

<p><i>#include</i><i> </i><i>&lt;qtwidgets/QApplication&gt;</i><i></i></p>

<p><i></i></p>

<p>To implement the context/tool, mainly, we need to create 3 classes that derived from:</p>

<p><b>1, MPxPolyTweakUVInteractiveCommand</b></p>

<p>The sample does not override much for the virtual methods, it will just use the default behavior, but will set the UV values while user is dragging during the context. </p>

<pre class="brush:cpp;toolbar: false;">class UVUpdateCommand : public MPxPolyTweakUVInteractiveCommand
{
public:
    static void *creator() { return new UVUpdateCommand; };
}; </pre>

<p><b>2, MPxTexContext</b></p>

<p>The struct BrushConfig is used to define the brush size. You can modify the size within tool setting. </p>

<p>class grabUVContext is the most important class, here, I mainly override doPtrMoved, doPress, doDrag and doRelease to implementation of UVGrab Brush, I will talk them one by one within the code. Also, drawFeedback is overridden to draw the cycle of brush, so you can see the area that will be impacted by the brush. </p>

<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d23ccc7f970c-pi"><img title="clip_image002" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; border-top-width: 0px; margin-right: auto" border="0" alt="clip_image002" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8b2ffae970b-pi" width="369" height="374" /></a></p>

<p><b></b></p>

<pre class="brush:cpp;toolbar: false;">struct BrushConfig
{
	BrushConfig() : fSize(50.0f) {};
	float size() const { return fSize; }
	void setSize( float size ) { fSize = size; }

private:
	float fSize;
};


class grabUVContext : public MPxTexContext
{
public:

	// constructor
	grabUVContext();

	// destructor
	virtual ~grabUVContext() {} ;

	virtual MStatus	doPress ( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context);
	virtual MStatus	doRelease( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context);
	virtual MStatus	doDrag ( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context); 
	virtual MStatus	doPtrMoved ( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context);
	virtual MStatus drawFeedback ( MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context);


	virtual void	getClassName(MString &amp; name) const;

	float	size() const;
	void	setSize( float size );

private:		   	 

	enum DragMode
	{
		kNormal,
		kBrushSize
	};

	BrushConfig		fBrushConfig;
	bool			fInStroke;

	MPoint			fCurrentPoint;
	MPoint			fLastPoint;
	MPoint			fBrushCenterScreenPoint;
	MPoint			fCurrentScreenPoint;
	MPoint			fLastScreenPoint;
	UVUpdateCommand *fCommand;
	MDagPath		fDagPath;
	MIntArray		fCollectedUVs;
	MGlobal::MSelectionMode	fPreviousSelectionMode;
	MSelectionMask	fPreviousSelectionMask;
}; 

grabUVContext::grabUVContext() :
	fCommand(NULL),
	fInStroke(false)
{

}

float grabUVContext::size() const 
{ 
	return fBrushConfig.size();
}

void grabUVContext::setSize( float size )
{ 
	fBrushConfig.setSize( size ); 
	MToolsInfo::setDirtyFlag(*this); 
}</pre>

<p><b>When User click left mouse, we will record the current mouse position, and collect all the UVs that would be impacted by the brush area. </b></p>

<pre class="brush:cpp;toolbar: false;">MStatus	grabUVContext::doPress ( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context)
{
	if ( event.mouseButton() != MEvent::kLeftMouse || 
		!event.isModifierNone() )
		return MS::kFailure;

	fInStroke = true;

	MPxTexContext::doPress(event, drawMgr, context);

	short x, y;
	event.getPosition( x, y );
	fCurrentScreenPoint = MPoint( x, y );
	fLastScreenPoint = MPoint( x, y );
	fBrushCenterScreenPoint = MPoint( x, y );

	double xView, yView;
	portToView(x, y, xView, yView);	// pos at viewrect coordinate  

	double portW, portH;
	portSize(portW, portH);

	double left, right, bottom, top;
	viewRect(left, right, bottom, top);

	double sizeInView = portW &lt; 1e-5 ? 0.0 : ( fBrushConfig.size() * (right - left) / portW );
	double sizeInViewSquare = sizeInView * sizeInView;


	fCollectedUVs.clear();

	MStatus *returnStatus = NULL;
	MSelectionMask mask = MSelectionMask::kSelectMeshUVs;
	const bool bPickSingle = false;
	MSelectionList	selectionList;

	bool bSelect = MPxTexContext::getMarqueeSelection( x - fBrushConfig.size(), y - fBrushConfig.size(), 
														x + fBrushConfig.size(), y + fBrushConfig.size(), 
														mask, bPickSingle, true, selectionList );

	if (bSelect)
	{
		MObject component;
		selectionList.getDagPath( 0, fDagPath, component );
		fDagPath.extendToShape();

		MFnMesh mesh(fDagPath);

		MString currentUVSetName;
		mesh.getCurrentUVSetName(currentUVSetName);

		MIntArray UVsToTest;
		if( component.apiType() == MFn::kMeshMapComponent )
		{
			MFnSingleIndexedComponent compFn( component );
			compFn.getElements( UVsToTest );

			for (unsigned int i = 0; i &lt; UVsToTest.length(); ++i)
			{
				float u, v;
				MStatus bGetUV = mesh.getUV(UVsToTest[i], u, v, ¤tUVSetName);
				if (bGetUV == MS::kSuccess)
				{
					float distSquare = ( u - xView ) * ( u - xView ) + ( v - yView ) * ( v - yView );
					if ( distSquare &lt; sizeInViewSquare )
						fCollectedUVs.append(UVsToTest[i]);
				}
			}
        }

		// position in view(world) space. 
		fLastPoint = MPoint( xView, yView, 0.0 );
		fCurrentPoint = MPoint( xView, yView, 0.0 );
	}
    
	return MS::kSuccess;
}</pre>

<p><b>When user release the mouse button, it will call the fCommand-&gt;finalize() to finish</b><b> the editing of uv.</b><b> </b><b></b><b></b></p>

<pre class="brush:cpp;toolbar: false;">MStatus	grabUVContext::doRelease( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context)
{
	fInStroke = false;

	if (fCommand)
		fCommand-&gt;finalize();
	fCommand = NULL;

	MPxTexContext::doRelease(event, drawMgr, context);
	return MS::kSuccess;
}</pre>

<p><b>While user is dragging, it will calculate the new values for fCollectedUVs that we collected during doPress() method, and then use fCommand-&gt;setUVs() to set all the new UV values.</b></p>

<p><b></b></p>

<pre class="brush:cpp;toolbar: false;">MStatus	grabUVContext::doDrag ( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context)
{
	if (event.mouseButton() != MEvent::kLeftMouse || 
		!event.isModifierNone() )
		return MS::kFailure;

	MPxTexContext::doDrag(event, drawMgr, context);

	short x, y;
	event.getPosition( x, y );
	fLastScreenPoint = fCurrentScreenPoint;
	fCurrentScreenPoint = MPoint( x, y );

	double xView, yView;
	portToView(x, y, xView, yView);	// pos at viewrect coordinate

	fLastPoint = fCurrentPoint;
	fCurrentPoint = MPoint( xView, yView, 0.0 );



	fBrushCenterScreenPoint = MPoint( x, y );

	MFloatArray uUVsExported;
	MFloatArray vUVsExported;

	const MVector vec = fCurrentPoint - fLastPoint;

	if (!fCommand)
	{
		fCommand = (UVUpdateCommand *)(newToolCommand());
	}
	if (fCommand)
	{
		MFnMesh mesh(fDagPath);
		MString currentUVSetName;
		mesh.getCurrentUVSetName(currentUVSetName);

		int nbUVs = mesh.numUVs(currentUVSetName);
		MDoubleArray pinData;
		MUintArray uvPinIds;
		MDoubleArray fullPinData;
		mesh.getPinUVs(uvPinIds, pinData, ¤tUVSetName);
		int len = pinData.length();

		fullPinData.setLength(nbUVs);
		for (unsigned int i = 0; i &lt; nbUVs; i++) {
			fullPinData[i] = 0.0;
		}
		while( len-- &gt; 0 ) {
			fullPinData[uvPinIds[len]] = pinData[len];
		}

		MFloatArray uValues;
		MFloatArray vValues;
		float pinWeight = 0;
		for (unsigned int i = 0; i &lt; fCollectedUVs.length(); ++i)
		{
			float u, v;
			MStatus bGetUV = mesh.getUV(fCollectedUVs[i], u, v, ¤tUVSetName);
			if (bGetUV == MS::kSuccess)
			{
				pinWeight = fullPinData[fCollectedUVs[i]];
				u += (float)vec[0]*(1-pinWeight);
				v += (float)vec[1]*(1-pinWeight);
				uValues.append( u );
				vValues.append( v ); 
			}
		}
		fCommand-&gt;setUVs( mesh.object(), fCollectedUVs, uValues, vValues, ¤tUVSetName );
	}

	return MS::kSuccess;
}</pre>

<p><b>When move the mouse, we just record the current point for </b><b>fCurrentScreenPoint, fLastScreenPoint and fBrushCenterScreenPoint.</b><b></b></p>

<pre class="brush:cpp;toolbar: false;">MStatus grabUVContext::doPtrMoved( MEvent &amp; event, MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context)
{
	MPxTexContext::doPtrMoved(event, drawMgr, context);

	double portW, portH;
	portSize(portW, portH);

	short x, y;
	event.getPosition( x, y );

	y = short(portH) - y;

	fCurrentScreenPoint = MPoint( x, y );
	fLastScreenPoint = MPoint( x, y );
	fBrushCenterScreenPoint = MPoint( x, y );

	return MS::kSuccess;
}</pre>

<p><b>Draw a cycle with the specified size to present the brush area. </b></p>

<pre class="brush:cpp;toolbar: false;">MStatus grabUVContext::drawFeedback(MHWRender::MUIDrawManager&amp; drawMgr, const MHWRender::MFrameContext&amp; context)
{
	// to draw the brush ring.
	drawMgr.beginDrawable();
	{
		drawMgr.setColor( MColor(1.f, 1.f, 1.f) ); 
		drawMgr.setLineWidth( 2.0f );
		drawMgr.circle2d(MPoint(fBrushCenterScreenPoint.x, fBrushCenterScreenPoint.y), fBrushConfig.size());
	}				
	drawMgr.endDrawable();

	return MS::kSuccess;
}

void grabUVContext::getClassName( MString &amp; name ) const
{
	name.set(&quot;grabUV&quot;);
}</pre>

<p><b></b></p>

<p><b>3. MPxContextCommand</b></p>

<p>This is a context command, and it should be the same as you do with a normal context, it’s used to define the special command for creating contexts. You can refer <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_Command_plugins_MPxContextCommand_htm">MPxContextCommand</a> for more details if you are not familiar with. But it’s nothing new, we just use this to create our context of “grabUVContext”.</p>

<p><b></b></p>

<pre class="brush:cpp;toolbar: false;">class grabUVContextCommand : public MPxContextCommand
{
public:	 
					grabUVContextCommand();
	virtual MStatus		doEditFlags();
	virtual MStatus		doQueryFlags();
	virtual MStatus		appendSyntax();
	virtual MPxContext* makeObj();
	static void*		creator();

protected:
	grabUVContext*		fGrabUVContext;
};		    

grabUVContextCommand::grabUVContextCommand() {}

MPxContext* grabUVContextCommand::makeObj()
//
// Description
//    When the context command is executed in maya, this method
//    be used to create a context.
//
{
	fGrabUVContext = new grabUVContext();
	return fGrabUVContext;
}

void* grabUVContextCommand::creator()
{
	return new grabUVContextCommand;
}

MStatus grabUVContextCommand::doEditFlags()
{
	MStatus status = MS::kSuccess;

	MArgParser argData = parser();

	if (argData.isFlagSet(kSizeFlag)) {
		double size;
		status = argData.getFlagArgument(kSizeFlag, 0, size);
		if (!status) {
			status.perror(&quot;size flag parsing failed.&quot;);
			return status;
		}
		fGrabUVContext-&gt;setSize( float(size) );
	}

	return MS::kSuccess;
}

MStatus grabUVContextCommand::doQueryFlags()
{
	MArgParser argData = parser();

	if (argData.isFlagSet(kSizeFlag)) {
		setResult(fGrabUVContext-&gt;size());
	}

	return MS::kSuccess;
}

MStatus grabUVContextCommand::appendSyntax()
{
	MSyntax mySyntax = syntax();

	if (MS::kSuccess != mySyntax.addFlag(kSizeFlag, kSizeFlagLong,
		MSyntax::kDouble)) {
			return MS::kFailure;
	}

	return MS::kSuccess;
}</pre>

<p>If you want to check the main code of this sample demonstrated above, please check my <a href="https://gist.github.com/JohnOnSoftware/159662bbba1953c1a318dcca5878d86b">Github Gist</a>.</p>

<p>Besides the above 3 main classes, you also need to register/unregister the context by registerContextCommand/deregisterContextCommand, should be same as a normal context, and also need to provide the Tool property sheets including grabUVProperties.mel and grabUVValues.mel, if you are not clear about this, check the <a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_Command_plugins_Tool_property_sheets_htm">Tool property sheets</a> section for the details. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: The trap while working with API MFnSet::isMember()
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: the-trap-while-working-with-api-mfnsetismember
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/10/the-trap-while-working-with-api-mfnsetismember.html 
DATE: 10/24/2016 12:28:00 PM
-----
BODY:
<p>While working with Maya, sometimes, we create a set to handle multiple elements as a whole. We can add DG nodes, DAG components or plugs to the set and MFnSet is used to operate with the set, but there is one trap with the API that you need to know. </p>  <p>   <br />Most of time, the API works well, the issue only happens when checking for a given DAG node component by MFnSet::isMember(const MDagPath&amp; path, const MObject&amp; component, MStatus* st). Currently, if one component of DAG node is in the set, the API will always return true even you are checking other components of that DAG node. For example, If I add a single component face of a polygonal mesh to a set, then all component faces appear to be part of that set if you use this API. This is a known issue, and there is a bug logged for this problem already. </p>  <p>   <br />The workaround for this issue is to create a selection list, use MFnSet::getMembers to put the members in the selection list and then use API MSelectionList::hasItem(MDagPath path, MObject component) to check if the DAG node component is a part of the set. And here is the snip code for the workaround:</p>  <pre class="brush: python;toolbar: false;">  import maya.api.OpenMaya as om  
     
  msh_sel = om.MSelectionList()  
  msh_sel.add('pPlaneShape1')  
  msh_dag = msh_sel.getDagPath(0)  
  msh_mfn = om.MFnMesh(msh_dag)  
  msh_itr = om.MItMeshPolygon(msh_dag)  
     
  set_sel = om.MSelectionList()  
  set_sel.add('mySet')  
  set_obj = set_sel.getDependNode(0)  
  set_mfn = om.MFnSet(set_obj)  
     
  members = set_mfn.getMembers(True)  
     
  while not msh_itr.isDone():  
        msh_fac_obj = msh_itr.currentItem()  
        if   members.hasItem((msh_dag, msh_fac_obj)):    
            print msh_itr.index(), set_mfn.name()  
        msh_itr.next(0) </pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Paul Waggonner
EMAIL: pixelpatriot@gmail.com
IP: 24.28.28.44
URL: http://www.paul-waggonner.com/
DATE: 11/07/2016 04:27:14 PM
Thank you!!!
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building SIP, and PyQt for Maya 2016.5
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: building-sip-and-pyqt-for-maya-20165
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Vijay Prakash
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/10/building-sip-and-pyqt-for-maya-20165.html 
DATE: 10/24/2016 05:10:56 AM
-----
BODY:
<p><strong>This is an updated version for Maya 2016.5&#39;&#0160;PyQt build instructions.</strong></p>
<p>This is an updated version of the Maya 2016 build instructions for PyQt and PySide (<a href="http://around-the-corner.typepad.com/adn/2015/05/building-sip-and-pyqt-for-maya-2016.html" target="_self">here</a>). The very good news is that with Maya 2014 &amp; onward, there is no more need to build PySide as it is coming by default in Maya :)&#0160;</p>
<p>libxml, openSSL, OpenAL,&#0160;python2.7, qt-4.8.5-64 / Maya 2014/2015, qt-4.8.6-64 / Maya 2016&#0160;and tbb&#0160;are also coming by default in the Maya include and lib folder, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a &#39;C:\Program Files\Autodesk\Maya2016\support\opensource&#39; folder now which contains some of the community source. <a href="http://www.autodesk.com/lgplsource" target="_self">http://www.autodesk.com/lgplsource</a> is also a location you want to remember for future.</p>
<p>I&#39;ll come back later with instructions to rebuild Qt itself for those who needs to, but again you do not need to build Qt to build PyQt anymore.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi"><img alt="Build-headacke" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a></p>
<p>Maya 2016.x also includes most of the tools we need to build PyQt without the need of compiling Qt source &amp; tools - so in this post we will see the easy way to build PyQt.</p>
<p>Download SIP and PyQt source from &#39;<a href="http://www.riverbankcomputing.co.uk" target="_self">http://www.riverbankcomputing.co.uk</a>&#39; - here I downloaded &#39;sip-4.16.7&#39; and &#39;PyQt-win-gpl-4.11.3&#39; (Note that you do not have to use these versions if you prefer using an older version, all you need is to use a version compatible with Qt4.8.6).&#0160;Unzip them in one folder, then you should get something like this:</p>
<h2>Mac</h2>
<p style="padding-left: 30px;"><em>/Users/cyrille/Documents/_Maya2016Scripts/sip-4.18</em><br /><em>/Users/cyrille/Documents/_Maya2016Scripts/PyQt-mac-gpl-4.11.4</em></p>
<p style="padding-left: 30px;"><em>&#39;/Users/cyrille/Documents/_Maya2016Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Mac OS X environment, in the Maya Documentation)&#0160;</p>
<p>Untar&#0160;the /devkit/include/qt-4.8.6-include.tar.gz into /devkit/include/Qt</p>
<p>Copy /Resources/qt.conf into /bin/qt.conf and edit it like this:</p>
<pre class="brush: bash; toolbar: false;">[Paths]
Prefix=
Libraries=../MacOS
Binaries=../bin
Headers=../../../devkit/include/Qt
Data=..
Plugins=../qt-plugins
Translations=../qt-translations
</pre>
<p>Untar the qt-4.8.6-64-mkspecs.tar.gz into $MAYA_LOCATION/Maya.app/Contents/mkspecs. And make sure the qconfig.pri looks like this:</p>
<p>qconfig.pri</p>
<pre class="brush: bash; toolbar: false;">#configuration
CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework
QT_ARCH = macosx
QT_EDITION = OpenSource
QT_CONFIG +=  minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework

#versioning
QT_VERSION = 4.8.6
QT_MAJOR_VERSION = 4
QT_MINOR_VERSION = 8
QT_PATCH_VERSION = 6

#namespaces
QT_LIBINFIX = 
QT_NAMESPACE = 
QT_NAMESPACE_MAC_CRC = 
</pre>
<p>You also need to create copy of the Qt lib files as fake .dylib files from the /MacOS directory.&#0160;The script below will tell what to do when you first run it. I removed the lengthy &#39;if&#39; from the script on that page, since I now posted the scripts on <a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">github</a>.</p>
<p>Build &amp; Install SIP running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/osx/sip">this scripts</a> from the github repo</p>
<p>Build &amp; Install PyQt running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/osx/pyqt">this scripts</a> from the github repo</p>
<p><strong>Note:</strong> In the shipping version of Maya 2016.5, PyQT will fail to execute because of a hidden phonon symbol. There is a QTBUG reference at <a href="https://bugreports.qt.io/browse/QTBUG-37209" target="_self">https://bugreports.qt.io/browse/QTBUG-37209</a> which would support the change in compiler - exporting symbol issue. There is a Qt source change suggested for the CLANG build to export symbols. You can get the fixed file from <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/archive/v2016.5.tar.gz" target="_self">here</a> in the meantime, but note that it would break the digital signature of Maya on OSX. Copy the file binaries/phonon into &#39;/Applications/Autodesk/maya2016.5/Maya.app/Contents/MacOS&#39; and restart Maya.</p>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github <a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Linux</h2>
<p style="padding-left: 30px;"><em>/home/cyrille/Documents/_Maya2016Scripts/sip-4.18</em><br /><em>/home/cyrille/Documents/_Maya2016Scripts/PyQt-mac-gpl-4.11.4</em></p>
<p style="padding-left: 30px;"><em>&#39;/home/cyrille/Documents/_Maya2016Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux environments (64 bit), in the Maya Documentation).</p>
<p>Edit your qt.conf file (/usr/autodesk/maya2016.5-x64/bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Untar the /include/qt-4.8.6-include.tar.gz into /include/Qt</p>
<p>Untart the /mkspecs/qt-4.8.6-mkspecs.tar.gz into /mkspecs</p>
<p>Make qmake, moc executables from the Maya bin directory</p>
<pre class="brush: shell; toolbar: false;">sudo chmod aog+x /usr/autodesk/maya2016.5-x64/bin/moc
sudo chmod aog+x /usr/autodesk/maya2016.5-x64/bin/qmake
</pre>
<p>Build &amp; Install SIP running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/linux/sip">this script</a> from the github repo</p>
<p>Build &amp; Install PyQt running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/linux/pyqt">this script</a> from the github repo</p>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github&#0160;<a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Windows</h2>
<p style="padding-left: 30px;"><em>D:\__sdkext\_Maya2016 Scripts\sip-4.18</em><br /><em>D:\__sdkext\_Maya2016 Scripts\PyQt-win-gpl-4.11.4</em></p>
<p style="padding-left: 30px;"><em>&#39;D:\__sdkext\_Maya2016 Scripts&#39; being my local folder. Now the instructions and scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows environment (64‐bit), in the Maya Documentation)</p>
<p>Edit your qt.conf file (C:\Program Files\Autodesk\Maya2016.5\bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Unzip the /include/qt-4.8.6-64-include.tar.gz into /include/Qt</p>
<p>Unzip the /mkspecs/qt-4.8.6-64-mkspecs.tar.gz into /mkspecs</p>
<p>Build &amp; Install SIP running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/win/sip.bat">this script</a> from the github repo</p>
<p>Build &amp; Install PyQt running <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/blob/v2016.5/win/pyqt.bat">this script</a> from the github repo</p>
<p>Note that I had issues building PyQT on Windows this time. When the makefile was building &#39;pylupdate&#39;, it hangs forever, and complains about an undefined macro &lt;?, grrrr.... The reason is that pyQT makefile now uses that macro which means use the first build dependency file. But nmake does not seems to like it, so I added some code to bypass the makefile rule. See below the call to &#39;%QTDIR%\bin\moc.exe -o moc_translator.cpp translator.h&#39;</p>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github&#0160;<a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Testing</h2>
<p>Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:</p>
<pre class="brush: python; toolbar: false;">import sys
from PyQt4 import QtGui


class Example(QtGui.QWidget):
    
    def __init__(self):
        super(Example, self).__init__()
        
        self.initUI()
        
    def initUI(self):      

        self.btn = QtGui.QPushButton(&#39;Dialog&#39;, self)
        self.btn.move(20, 20)
        self.btn.clicked.connect(self.showDialog)
        
        self.le = QtGui.QLineEdit(self)
        self.le.move(130, 22)
        
        self.setGeometry(300, 300, 290, 150)
        self.setWindowTitle(&#39;Input dialog&#39;)
        self.show()
        
    def showDialog(self):
        
        text, ok = QtGui.QInputDialog.getText(self, &#39;Input Dialog&#39;, &#39;Enter your name:&#39;)
        
        if ok:
            self.le.setText(str(text))
        
ex = Example()
</pre>
<p>&#0160;If you see the dialog is showing, you are all set :)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Light Draw Override in Viewport 2.0
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: light-draw-override-in-viewport-20
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Geometry
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/10/light-draw-override-in-viewport-20.html 
DATE: 10/20/2016 01:51:12 AM
-----
BODY:
<p>If you use <strong><em>MPxDrawOverride</em></strong> class to override the draw of your custom locator class, you will have to register the draw override as below:</p>
<pre class="brush: cpp;toolbar: false;">static MString drawdb("drawdb/geometry/light/customLight");
static MString sDrawRegistrantId("customLightDraw");
plugin.registerNode("customLight",
customLightNode::m_id,
customLightNode::creator,
customLightNode::initialize,
MPxNode::kLocatorNode,
&amp;drawdb);
MHWRender::MDrawRegistry::registerDrawOverrideCreator(drawdb,
sDrawRegistrantId,
MCustomLightDrawOverride::Creator);
</pre>
<p>However, if you want your locator to be classified as light with the same <strong><em>drawdb</em></strong> as above, Maya won't treat your locator as light, because the above drawdb string is applicable only for geometry override not for light. The node will be treated as light only after changing the classification string to “light/customLight” without “geometry” (e.g. static MString drawdb("light/customLight");) However in this case you can’t receive any draw call back for Viewport 2.0 becasue you didn't include “geometry” in the drawdb string.</p>
<p>So, how to treat your node as light and make it receive the draw callback for Viewport 2.0?.</p>
<p>You should define your drawdb as below.</p>
<pre class="brush: cpp;toolbar: false;">static MString drawdb("light:drawdb/light/directionalLight:drawdb/geometry/light/directionalLightCustom");
</pre>
<p>This classification allows for the usage of the internal light and UI (geometry drawing) VP2 evaluators to be used. Note that there is no explicit VP2 override class used as the internal VP2 geometry evaluator will handle drawing. Attributes which control the light are created to match names on a Maya lights so that they will be picked up when DG evaluation occurs.</p>
<p>Please refer the “<a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__cpp_ref_api_directional_light_shape_2api_directional_light_shape_8cpp_example_html" target="_blank">apiDirectionalLightShape</a>” devkit sample for complete information.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: World position and Object position in Shader Fragment
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: world-position-and-object-position-in-shader-fragment
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Shader
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/10/world-position-and-object-position-in-shader-fragment.html 
DATE: 10/19/2016 11:51:27 PM
-----
BODY:
<head>
<style>
table, th, td {
    border: 1px solid black;
}
</style>
</head>
<p>When you write a Shader Fragment, you should use the right naming conventions. For example if you check parameters like “mayaUvCoordSemantic” the name should be “uvCoord”, for “tangent” the name should be “mayaTangentIn”.</p>
<p>Even if you check the “Object Space Position” the name and the semantic both should be “Pm”. Check the below example.</p>
<pre class="brush: cpp;toolbar: false;">&lt;fragment uiName=\"depthShaderPluginInterpolantFragment\" name=\"depthShaderPluginInterpolantFragment\" type=\"interpolant\" class=\"ShadeFragment\" version=\"1.0\"&gt;"
&lt;description&gt;&lt;![CDATA[Depth shader vertex fragment]]&gt;&lt;/description&gt;"
&lt;properties&gt;
&lt;float3 name=\"Pm\" semantic=\"Pm\" flags=\"varyingInputParam\" /&gt;
&lt;float4x4 name=\"worldViewProj\" semantic=\"worldviewprojection\" /&gt;
&lt;/properties&gt;
&lt;vertex_source&gt;&lt;![CDATA["
float idepthShaderPluginInterpolantFragment(float3 Pm, float4x4 worldViewProj)
{
float4 pCamera = mul(worldViewProj, float4(Pm, 1.0f));
return (pCamera.z - pCamera.w*2.0f); \n"
} ]]&gt;
&lt;/vertex_source&gt;
</pre>
<p>If you are defining, "World Space Position" the semantic and the name should be “Pw” instead of any other string like “out”, "outPosition",... like below. If you use any other string, Maya won't consider it as varyingInputParameters.</p>
<pre class="brush: cpp;toolbar: false;">&lt;float3 name=\"Pw\” semantic=\"Pw\” flags=\"varyingInputParam\" /&gt;"
...
&lt;![CDATA[float4 fragTexture(float2 uv, texture2D map, sampler2D textureSampler, float4x4 texMatrix, float3 Pw)
...
</pre>
<table>
<thead>
<tr>
<th>Semantic</th>
<th>Name</th>
<th>Type</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pm</td>
<td>Pm</td>
<td>3-float</td>
<td>Object space position</td>
</tr>
<tr>
<td>Pw</td>
<td>Pw</td>
<td>3-float</td>
<td>World space position</td>
</tr>
<tr>
<td>Pv</td>
<td>Pv</td>
<td>3-float</td>
<td>View space position</td>
</tr>
<tr>
<td>Nm</td>
<td>Nm</td>
<td>3-float</td>
<td>Object space normal</td>
</tr>
<tr>
<td>Nw</td>
<td>Nw</td>
<td>3-float</td>
<td>World space normal</td>
</tr>
</tbody>
</table>
<p>
<p>For more information please check <strong>“Varying Parameters and System Parameters”</strong> section in the following document</p>
<p><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_585F5656_4069_4D82_B9BB_3D1AB2D0DFE6_htm" target="_blank">http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=<em><em>files</em>GUID</em>585F5656<em>4069<em>4D82</em>B9BB</em>3D1AB2D0DFE6_htm</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: How to get correct camera within multiple panes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: how-to-get-correct-camera-within-multiple-panes
CATEGORY: C++
CATEGORY: MotionBuilder
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/10/how-to-get-correct-camera-within-multiple-panes.html 
DATE: 10/17/2016 05:33:00 PM
-----
BODY:
<p>To get the current camera of the view pane, usually, we can use the API FBRenderer::CurrentCamera to get the camera. But when there are multiple view panes, the API does not work as you expected, it always return back the camera of the 1st view pane, this is a known issue of Motionbuilder. So how to get the correct camera for the specified view pane? <br>There are 2 different situations. <br>First, let’s take a look at this example, if you have a customized shader which is derived from FBShader, and you want to display some special effects only when current camera is a specified camera, in general, you will write some code in the virtual method FBShader::ShadeModel() similar as follow: </p> <pre class="brush: cpp;toolbar: false;">
void MyShaderExample::ShadeModel( FBRenderOptions* pRenderOptions, FBShaderModelInfo* pShaderModelInfo, FBRenderingPass pPass )
{
    ... ...
    // Get current camera
    FBRenderer*  lRenderer   = mSystem.Renderer;
    lModelCam    = (FBCamera*)(lRenderer-&gt;CurrentCamera());
 
    std::string cameraName(lModelCam-&gt;LongName.AsString());
    std::string prefix("MyCustomizedCamera");
 
   if( ! lModelCam-&gt;SystemCamera &amp;&amp;
 strncmp(cameraName.c_str(), prefix.c_str(), strlen(prefix.c_str())) == 0 )
    {
        //add some special effects here.
    }
}
</pre><br>It works when there is only one view pane, but as I mentioned below, this will not work as expected when there are multiple view panes, the solution is to use the method FBRenderOptions::GetRenderingCamera() instead, it will provide you the correct camera for each different view pane. <br>Let's look at another scenario, how about if you just want to get the camera for the specified view pane without FBRenderOptions parameter? Within Motionbuilder 2017, we provided some methods including FBRenderer::GetCameraInPane() to help you get the camera for the specified view pane. If you are interested, please refer to the <a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./cpp_ref/class_o_r_s_d_k2017_1_1_f_b_renderer.html">online SDK help</a> for more details. <pre></pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Drawing and Selection tips in VP2.0
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: drawing-and-selection-tips-in-vp20
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Qt
CATEGORY: Rendering
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/09/drawing-and-selection-tips-in-vp20.html 
DATE: 09/27/2016 08:18:04 PM
-----
BODY:
<p>We have 2 options to draw the icon/geometry in VP2.0. The first one is using MUIDrawManager object, and another one is MRenderOverride. If you are developing a plugin using Maya node, both MUiDrawManager and MrenderOverride objects are available at any point in the implementation. One issue is that if you are trying to draw the geometry/icon in a callback like postRenderMsgCallback(), VP2.0 would already have finished the drawing at that time, and the MUIDrawManager object won’t be available. In this scenario, you can use the second option i.e, using MRenderOverride.</p>
<p>If you have already developed a plugin, instead of doing replacing the drawing code and rebuilding your plugin, there are a few other options to draw in VP2.0. These are not Maya objects, but it still may be a better solution than rewriting your plugin:</p>
<p><a href="http://www.gamedev.net/topic/559367-dx11-how-do-you-draw-a-triangle/" target="_blank">1. Use Dx11 API. ( Windows Only SDK)</a></p>
<p><a href="http://around-the-corner.typepad.com/adn/2016/09/how-to-build-customized-qt-561-for-maya-2017-on-windows.html" target="_blank">2. Use Qt C++ API ( Platform Independent SDK)</a></p>
<p>In case of selection in VP2.0, Autodesk Maya moved to hardware selection in Maya 2016 Extension 2. Please check <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_31E929F2_56E0_4CB8_9984_123AD3A85670_htm" target="_blank">this</a> link for porting selection from VP1 to VP2. If you still wants to use the VP1 selection, that is still possible. You can use MAYA_<em>VP2_</em>USE_<em>VP1_</em>SELECTION=1 environment variable (make sure that you are in VP1 mode or VP2 non-core profile mode).</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to build customized QT 5.6.1 for Maya 2017 on Windows
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-build-customized-qt-561-for-maya-2017-on-windows
CATEGORY: Cheng Xi Li
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/09/how-to-build-customized-qt-561-for-maya-2017-on-windows.html 
DATE: 09/27/2016 07:56:54 PM
-----
BODY:
<p>I&#39;ve written an article about <a href="http://around-the-corner.typepad.com/adn/2016/09/how-to-rebuild-pyside2-for-maya-2017-.html" target="_blank">how to build PySide2 </a>earlier. Some partners were asking about how to build QT 5.6.1 This is a guide for building QT 5.6.1 on windows.</p>
<p>Prerequisite:</p>
<ul>
<li>Visual Studio 2012 Update 4 or Update 5</li>
<li>QT 5.6.1</li>
<li>Ruby 2.1.7(32 bits)</li>
<li>Perl for OpenSSL</li>
<li>JOM (recommended)</li>
</ul>
<h3>&#0160;</h3>
<h3>Build Steps:</h3>
<p>&#0160;</p>
<h3>1. Download and unzip the tarball from the <a href="http://www.autodesk.com/company/legal-notices-trademarks/open-source-distribution" target="_blank">Autodesk open source distribution page</a></h3>
<p>Depending on how you extracted the tar file, you may need to remove the ending digits (ie. 000644) in the extracted filename. I am using 7zip and it doesn&#39;t have this issue. Copy it into your qt folder for later usage.</p>
<h3>&#0160;</h3>
<h3>2. Download the Qt distribution labeled <a href="http://download.qt.io/development_releases/prebuilt/icu/prebuilt/msvc2012/" target="_blank">ICU53_1</a></h3>
<p>There are several files available, the one we need is <strong>icu_53_1_msvc_2012_64_devel.7z</strong>. After downloading, extract it and copy the <strong>icu53_1</strong> folder to your QT directory (eg. C:\QT).</p>
<h3>&#0160;</h3>
<h3>3. Download <a href="https://www.openssl.org/" target="_blank">OpenSSL</a>(<a href="https://github.com/openssl/openssl/releases/tag/OpenSSL_1_0_1l" target="_blank">1.0.1l</a>) and build</h3>
<p>You can download it from OpenSSL&#39;s website. Extract it into the QT directory, you&#39;ll need to build it yourself before using it to build QT. Follow the instruction in the INSTALL.W64.</p>
<h3>&#0160;</h3>
<h3>4. Update the Build Environment</h3>
<p>Open and edit BuildQt561-VS2012.cmd and update the path. Notice that for Python, we&#39;d recommend to use a 64 bit Python build with Visual Studio 2012 to avoid any runtime issues. But Official 64 bit Python 2.7 should also be fine to build QT.</p>
<h3>&#0160;</h3>
<h3>5. Configure</h3>
<p>There are several configurations in our document (howToBuildQtOnWindows_m2017.txt), I&#39;ve built both debug and release version of QT. Please execute BuildQt561-VS2012.cmd in a command shell before doing following steps.</p>
<pre><code>cd c:\qt
mkdir qt-build-561
cd qt-build-561
..\qt-adsk-5.6.1\configure -prefix C:\qt\qt-adsk-5.6.1.out -debug-and-release -force-debug-info -opensource -icu -opengl desktop -directwrite -openssl -plugin-sql-sqlite -I c:\qt\openssl\1.0.1l-vc11-nossl3\include -L c:\qt\openssl\1.0.1l-vc11-nossl3 -no-warnings-are-errors -nomake examples -nomake tests
</code></pre>
<p>I copied my OpenSSL build into c:\qt\openssl\1.0.1l-vc11-nossl3. The OpenSSL include folder path should point to <strong>inc32 </strong>folder inside your OpenSSL source package. I made some changes to the path according to the document, you don&#39;t have to do it yourself.</p>
<p>The prefix for parameter is for the final step. You need to specify a directory for the final output package.</p>
<p>For more details about the parameters, please refer to the “how-to” inside the QT package.</p>
<h3>&#0160;</h3>
<h3>6. Make</h3>
<p>If you want to use all of your cores to build it, it is better to get JOM from QT and put its path in the PATH environment variable. Otherwise you can run nmake directly.</p>
<pre><code>jom &gt; build.log

or

nmake
</code></pre>
<h3>&#0160;</h3>
<h3>7. Make install</h3>
<p>Just run <strong><em>nmake install</em></strong>, it will create a final output in the prefix directory in Step 5.</p>
<p>Now that you have built QT 5.6.1 for Maya, you could try to build examples in your QT\Examples folder with your customized QT. When finished, you can put the built programs into the Autodesk QT folder\bin and it should be working properly. Enjoy:)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/29/2016 01:02:50 PM
Thank you for these instructions! I'm getting stuck on the OpenSSL compile.

I added PATH variables:

nmake: "/cygdrive/c/Program Files (x86)/Microsoft Visual Studio 11.0/VC/bin/amd64"
platform sdk include: "/cygdrive/c/Program Files (x86)/Microsoft SDKs/Windows/v7.1A/Include"
platform sdk lib: "/cygdrive/c/Program Files (x86)/Microsoft SDKs/Windows/v7.1A/Lib"

... into the Cygwin .bash_profile file as "PATH="/cygdrive/c/Program Files (x86)/Microsoft Visual Studio 11.0/VC/bin/amd64:/cygdrive/c/Program Files (x86)/Microsoft SDKs/Windows/v7.1A/Include:/cygdrive/c/Program Files (x86)/Microsoft SDKs/Windows/v7.1A/Lib:${PATH}" and it does pick up nmake - but not the SDK.

I get error "Cannot open include file: 'windows.h': No such file or directory"

I also tried changing the include statements to  since the header file is upper case. Also tried the opposite where the include statements were left to default  and changed the SDK file to windows.h. No luck so far.

Can you help me resolve this, please?
-----
COMMENT:
AUTHOR: Chengxi Li
EMAIL: cheng.xi.li@autodesk.com
IP: 116.192.22.46
URL: 
DATE: 09/30/2016 12:29:12 AM
Hi Martin,

Can you try the VS2012 x64 Native Command Tools installed with Visual Studio 2012?

I am using it for setting up the environment.

Yours,
Li
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/30/2016 08:50:00 AM
Thank you - that worked. I did get one additional error but that was resolved using this trick: http://wishmesh.com/2013/01/building-openssl-with-visual-studio-2010-for-x64-win64-causes-error/

-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/30/2016 09:31:44 AM
For step #7 I had to copy the "...\openssl\inc32\openssl" folder into the "...\qt-adsk-5.6.1\qtbase\include\..." folder so you end up having "...\qt-adsk-5.6.1\qtbase\include\openssl\aes.h" and so on.
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 10/04/2016 11:40:34 AM
Got it all working with compiling PySide2. Many thanks for this post, Li !!!
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Make RenderTarget larger than 4k in Maya 2016 and 2016 Extension 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: make-rendertarget-larger-than-4k-in-maya-2016-and-2016-extension-2
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/09/make-rendertarget-larger-than-4k-in-maya-2016-and-2016-extension-2.html 
DATE: 09/17/2016 11:31:30 PM
-----
BODY:
<p>There is a restriction for Maya 2016 that doesn&#39;t allow Maya to use more than 4k textures. As a result, the size of Viewport 2 MRenderTarget is limited to 4096x4096.</p>
<p>We&#39;ve opened a back door to remove this restriction and allow users to use the maximum texture size supported by their graphics card. This is now possible due to a new environment value introduced in Maya 2016 SP6 and 2016 Extension 2 + SP1. This variable is named: MAYA_VP2_USE_GPU_MAX_TARGET_SIZE, you can set its value to 1. After setting it in your environment, Maya will use the max texture size of your graphic card instead of 4096x4096.<br />You can find the max texture size in Maya output window:</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8944fc2970b-pi" style="display: inline;"><img alt="Image" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c8944fc2970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8944fc2970b-800wi" title="Image" /></a></p>
<p><br />In Maya 2017, we&#39;ve removed this restriction and the environment variable is no longer required to unleash the full potential of your graphic card. Enjoy:)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Setting up Maya Hardware 2.0 using MEl/Python
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: setting-up-maya-hardware-20-using-melpython
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python
CATEGORY: Rendering
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/09/setting-up-maya-hardware-20-using-melpython.html 
DATE: 09/15/2016 04:31:08 AM
-----
BODY:
<p>Changing the render setting in Maya is straight forward, you can change the Hardware renderer very easily using Maya Render settings Window as you could see in the below image.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0936d280970d-pi" style="display: inline;"><img alt="Hardware-render-settings (1)" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb0936d280970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0936d280970d-800wi" title="Hardware-render-settings (1)" /></a></p>
<p>But, how do you achieve the same thing using script code?<br /> <br /> If you execute the following code, you will see that Maya renders using &quot;Maya Software&quot;.</p>
<p>&#0160;</p>
<p><strong>mel.eval(&#39;render -x 600 -y 800 &quot;Render_Cam&quot;&#39;)</strong></p>
<p>or the same code as just MEL, Maya still renders using &quot;Maya Software&quot;.&#0160;In addition to the above code, the below python code is an attempt to change the renderer.</p>
<p>&#0160;</p>
<p><strong>cmds.setAttr(&#39;defaultRenderGlobals.ren&#39;, &#39;mayaHardware2&#39;, type=&#39;string&#39;)</strong></p>
<p><strong>mel.eval(&#39;loadPreferredRenderGlobalsPreset(&quot;mayaHardware2&quot;)&#39;)</strong></p>
<p>&#0160;</p>
<p>But Maya still renders using &quot;Maya software&quot;. &#0160;The problem is, we have to set the current renderer.&#0160;The following MEL commands will change the current renderer to Hardware Renderer 2.</p>
<p>&#0160;&#0160;<strong>setCurrentRenderer &quot;mayaHardware2&quot;;</strong></p>
<p><strong>&#0160;setAttr hardwareRenderingGlobals.renderMode 2 ;</strong></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to rebuild PySide2 for Maya 2017 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-rebuild-pyside2-for-maya-2017-
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/09/how-to-rebuild-pyside2-for-maya-2017-.html 
DATE: 09/13/2016 03:18:55 AM
-----
BODY:
<p>Maya 2017 is moving to QT 5.6.1 and PySide2. PySide2 is currently still in alpha stage, so it&#39;s not as stable as it could be. We will continue to update it in our service packages. However, if you want to upgrade yourself, you can download and build it easily.</p>
<p>Maya 2017 is built with MSVC2012, so we cannot introduce other vc runtime in our build environment. So we will build QT 5.6.1 with MSVC2012 and the Python shipped with Maya.</p>
<p>It&#39;s a good idea to backup the Pyside2 files shipped with Maya before you are trying to replace them.</p>
<p>Here is a list:</p>
<pre><code>Maya2017/bin/pyside2.dll
Maya2017/bin/pyside2-uic
Maya2017/bin/shiboken2.dll

Maya2017/lib/pyside2.lib
Maya2017/lib/shiboken2.lib

Maya2017/Python/Lib/site-packages/shiboken2.pyd
Maya2017/Python/Lib/site-packages/PySide2
Maya2017/Python/Lib/site-packages/pyside2uic
</code></pre>
<p>Let&#39;s begin to build PySide2 now. First, you&#39;ll need to download the source code of QT 5.6.1 and compile it with MSVC2012 64bit. You can find our modified QT package <a href="http://www.autodesk.com/company/legal-notices-trademarks/open-source-distribution" target="_blank">here</a>&#0160;and check the <a href="http://around-the-corner.typepad.com/adn/2016/09/how-to-build-customized-qt-561-for-maya-2017-on-windows.html">guide for building and installing customized QT 5.6.1 on windows</a>.</p>
<p>Then you&#39;ll need to get the latest code from the PySide2 repo. For example:</p>
<pre><code>git clone https://codereview.qt-project.org/pyside/pyside-setup --branch dev --recursive
</code></pre>
<p>After cloning the repo, we need to prepare for MayaPy. First, create a folder named <strong>Libs</strong> inside of <strong><em>Maya2017/Python</em></strong> folder then copy <strong>python27.lib</strong> from<strong><em> Maya2017/lib</em></strong> into it. Copy <strong>Maya2017/include/python2.7</strong> into <strong>Maya2017/Python </strong>also. After that, we can build Pyside2 with following command in VS2012 x64 native tools :</p>
<pre><code>mayapy.exe setup.py build --ignore-git --qmake=%QT5.6.1_MSVC2012_BuildPath%\qmake.exe --cmake=&quot;C:\Program Files (x86)\CMake\bin\cmake.exe&quot; --jobs=9 --jom
</code></pre>
<p>We are using CMake 3.3.x here. JOM is a parallel build tool for QT, you can download it from QT&#39;s website or inside of QtCreator. Please make sure you&#39;ve added JOM&#39;s path into your path environment variable.</p>
<p>It will take about 10 minutes to build Pyside2. Once it is done, go to <strong>pyside_install</strong> folder and replace the <strong><em>Maya2017\bin</em> </strong>folder with the files inside the <strong>pyside_install\py2.7-qt5.6.1-64bit-release\bin</strong> folder;<strong><em>Maya2017\Python\lib\site-packages</em></strong> with <strong>pyside_install\py2.7-qt5.6.1-64bit-release\lib\site-packages</strong> and <strong>Maya2017\lib</strong> with the files in<strong> pyside_install\py2.7-qt5.6.1-64bit-release\lib.</strong></p>
<p>Please make sure to backup the original file, as if there is any other issues caused by the replacement, you can use the original file to revert this workaround.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Christian Akesson
EMAIL: cakesson33@gmail.com
IP: 64.37.153.208
URL: 
DATE: 09/16/2016 02:15:00 PM
Hi there,

We are trying to build PySide2 for Python 2.7 in Win 10. We managed to compile to a wheel where you would have to have Qt installed on the system. We would like to compile to where Qt does not need to be installed on the system to use PySide2.

Would we follow the same steps outlined above, but instead of using mayapy, we would use the python 2.7 executable?

It's hard to find info on this as it stands right now, so any information on this would be very helpful. There must be many studios, that want to build a PySide2 installer that does not require Qt to be installed.

Thanks for putting solid information out there,
Christian Akesson | Senior Technical Artist | Daybreak Games
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/16/2016 02:55:54 PM
I have to say that for someone that is not familiar with compiling Qt the bundled instructions in "howToBuildQtOnWindows_m2017.txt" are severely lacking.

What is the "icu53_1" reference?
What is "your normal options" for configure.exe?
The general tone of the instructions makes me feel like they were written for people who does this stuff on a frequent basis.

I would really appreciate a better set of instructions.
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/16/2016 03:58:31 PM
Instructions says "See  https://doc-snapshots.qt.io/qt5-5.4/windows-building.html for Qt building notes" but that page is a 404.
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 64.37.153.178
URL: 
DATE: 09/16/2016 06:36:23 PM
Getting below warnings- can someone please help clarify:

C:\qt\qt-adsk-5.6.1\qtbase\src\network\access\qnetworkaccessdebugpipebackend_p.h(0): Note: No relevant classes found. No output generated.
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
C:\qt\qt-adsk-5.6.1\qtbase\src\network\access\qnetworkaccessdebugpipebackend_p.h(0): Note: No relevant classes found. No output generated.
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
cl : Command line warning D9002 : ignoring unknown option '-arch:SSE2'
Checking for ntddmodm... no
Checking for jasper... no
Checking for libmng... no
Checking for libtiff... no
Checking for libwebp... no
Checking for language... no
Checking for socketcan... no
Checking for socketcan_fd... no
Project WARNING: Cannot compile the module with your compiler, missing C++11 language features.
-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mkarlsson@daybreakgames.com
IP: 75.80.19.130
URL: 
DATE: 09/16/2016 11:14:08 PM
After a full day of tinkering I got a Qt build done; however, when I try to compile PySide2 it seems like the build is bad.

Get errors about missing dll files in the "...qt-build-561\qtbase\bin\..." directory and the below error [note the messed up filepath "C:/qt/qt-build-561/qtbase/C:/qt/qt-adsk-5.6.1/qtbase//mkspecs/win32-msvc2012"]:

[Start error]

CMake Error at C:/qt/qt-build-561/qtbase/lib/cmake/Qt5Core/Qt5CoreConfig.cmake:15 (message):
  The imported target "Qt5::Core" references the file

     "C:/qt/qt-build-561/qtbase/C:/qt/qt-adsk-5.6.1/qtbase//mkspecs/win32-msvc2012"

  but this file does not exist.  Possible reasons include:

  * The file was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and contained

     "C:/qt/qt-build-561/qtbase/lib/cmake/Qt5Core/Qt5CoreConfigExtras.cmake"

  but not all the files it references.

[End error]
-----
COMMENT:
AUTHOR: Chengxi Li
EMAIL: cheng.xi.li@autodesk.com
IP: 103.23.161.18
URL: 
DATE: 09/26/2016 12:38:16 AM
Hi, 

I was in training last week. I'll look at this issue this week.

Yours,
Li
-----
COMMENT:
AUTHOR: Chengxi Li
EMAIL: cheng.xi.li@autodesk.com
IP: 103.23.161.18
URL: 
DATE: 09/27/2016 08:09:38 PM
Hi Christian,

Using python 2.7 should be OK. But we recommend to use Python built with VS2012 to avoid any potential runtime issues. That's the reason why I am using mayapy.

I think you can't build PySide without a QT environment. But once it is built,  you can copy the binary outputs to other computers you need.

Yours,
Li
-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Compiler versions for Maya 2017
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: compiler-versions-for-maya-2017
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/08/compiler-versions-for-maya-2017.html 
DATE: 08/31/2016 11:19:00 AM
-----
BODY:
<p>This is an update on previous posts for older versions which can be found here: <a href="http://around-the-corner.typepad.com/adn/2016/06/compiler-versions-for-maya-2016-extension-2.html">Maya 2016 Extension 2</a>, <a href="http://around-the-corner.typepad.com/adn/2015/04/maya-compiler-versions-update.html">Maya 2016</a>,<a href="http://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html">Maya 2015</a>, <a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html">Maya 2014</a>, <a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html">Maya 2008 to 2013</a>. <br />Basically, the build environment of Maya 2017 does not change, it’s same as Maya 2016 extension 2, and also almost same as Maya 2016. The main change for Maya 2017 is the version of Qt and PySide, the details are listed as follow and the updated ones are marked in red with links to help you find it quickly.</p>
<h4><span style="font-size: large;"><span style="font-weight: bold;">Maya 2017</span></span></h4>
<h4>Windows 64bit Win7x64</h4>
<ul>
<li>Visual Studio 2012 Update 4 + Win 8 SDK</li>
<li>.Net framework 4.5.1</li>
<li>Intel Composer XE 2015 Initial release (15.0.0.108)</li>
</ul>
<h4>Linux 64bit RHEL/CentOS 6.5, FC20</h4>
<ul>
<li>gcc 4.8.2</li>
<li>Intel Composer XE 2015 Update 1 (15.0.1.133)</li>
</ul>
<h4>Mac 64bit Mavericks 10.9.5</h4>
<ul>
<li>Xcode 6.1 or 6.1.1 with SDK 10.9 (Mavericks)</li>
<li>clang with libc++</li>
<li>Intel Composer XE 2015 Update 1 (15.0.1.108)</li>
</ul>
<h4><span style="font-size: large;"><span style="font-weight: bold;">Extensions (all platforms)</span></span></h4>
<ul>
<li><strong><span style="color: #ff0000;">Embedded Python 2.7.11 - Internal to Maya</span></strong></li>
<li><strong><span style="color: #ff0000;">Embedded PySide 2.0</span></strong></li>
<li><strong><a href="http://www.autodesk.com/lgplsource"><span style="color: #ff0000;">Qt 5.6.1 modified</span></a><a href="http://www.autodesk.com/lgplsource"><span style="color: #ff0000;">(Maya 2017 update 1 use a different version)</span></a></strong></li>
<li>Boost 1.52 with its own namespace awBoost for Maya, <br />Alembic and GpuCache use Boost 1.55.</li>
<li><a href="http://threadingbuildingblocks.org/download#stable-releases">TBB 4.4 update 2</a></li>
<li>DirectX SDK June 2010 (DX11)</li>
<li><a href="http://www.openexr.com/downloads.html">OpenEXR 2.2</a></li>
<li><u><a href="https://github.com/PixarAnimationStudios/OpenSubdiv"><strong><span style="color: #ff0000;">Open SubDiv 3.0.5</span></strong></a></u></li>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Specifying a File path correctly in MEL/Python
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: specifying-a-file-path-correctly-in-melpython
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/08/specifying-a-file-path-correctly-in-melpython.html 
DATE: 08/17/2016 01:46:20 AM
-----
BODY:
<p>Whenever you write a MEL script or a Python script that contains a file path, you should pay attention to whether it is a relative file path or an absolute file path. In case of POSIX, it is very clear that the path separator is always forward slash (/). In case of Windows, you have to be bit careful on file path separator.<br /> <br /> If you specify a path on Windows, you have either to use forward slash (/) or double backward slash (\\). Don’t use single back-slash (\), because Windows will interpret it as an escape sequence. For example, if you specify a path like “C:\vijay”, Windows will consider it as “C:ijay”, because \v is the escape sequence. <br /> <br /> A Maya user faced the same issue when he tried to import the FBX file using the FBXImport command and received an error. The error is caused by the malformed file path, and resulting Windows escape sequence errors. In the end, it has nothing to do with FBXImport command or Maya, but in that context it may be easily overlooked as a formatting error.<br /> <br /> Below are the scenarios that will explain the issue more clearly.<br /> <br /> <strong>--- Error Scenario ---</strong><br /> string $strDir=&quot;C:\vijay\output.fbx&quot;;<br /> FBXImport -f $strDir;<br /> // Error: Use syntax: FBXImport -f &quot;filename&quot; [-t take_index_zero_based] [-e extract_folder] //</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8880175970b-pi" style="display: inline;"><img alt="Fbximport-path-error" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c8880175970b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8880175970b-800wi" title="Fbximport-path-error" /></a></p>
<p>&#0160;</p>
<p>--- <strong>Working Scenarios</strong> ---<br /> <br /> string $strDir=&quot;C:\\vijay\\output.fbx&quot;;<br /> FBXImport -f $strDir;<br /> // Logfile: &quot;C:\Users\prakasv\Documents\maya\FBX\Logs\2016.1\maya2016imp.log&quot; //<br /> // Result: Success //<br /> <br /> string $strDir=&quot;C:/vijay/output.fbx&quot;;<br /> FBXImport -f $strDir;<br /> // Logfile: &quot;C:\Users\prakasv\Documents\maya\FBX\Logs\2016.1\maya2016imp.log&quot; // <br /> // Result: Success //</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Avoid DG evaluation caused by maya.cmds when there are python custom nodes in the scene in parallel mode
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: avoid-dg-evaluation-caused-by-mayacmds-when-there-are-python-custom-nodes-in-the-scene-in-parallel-mode
CATEGORY: Cheng Xi Li
CATEGORY: Concurrent programming
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/avoid-dg-evaluation-caused-by-mayacmds-when-there-are-python-custom-nodes-in-the-scene-in-parallel-mode.html 
DATE: 07/27/2016 07:37:20 PM
-----
BODY:
<p>I ran into an issue about Maya 2016 extension 2 hanging earlier this week. The customer has a custom locator node in their scene and Maya hangs when running code like below:</p>  <pre><code>import maya.cmds as cmds

cmds.evaluationManager(mode=&quot;parallel&quot;)

for i in range(10):
    cmds.currentTime(i)
</code></pre>

<p>After spending some time for debugging, the issue was found. It turns out that when Maya is executing Python, it will acquire a Python lock for the interpreter. During the parallel evaluation of your scene caused by cmds.currentTime, another working thread is created and tries to acquire the same lock, resulting in a deadlock scenerio. In Maya 2017, it only happens when MAYA_RETAIN_PYTHON_GIL <em>is set in your system environment. </em>MAYA_RETAIN_PYTHON_GIL is for the users who are experiencing performance issues when executing high volumes of python commands. Maya will be more prone to deadlocks if custom Python nodes are evaluating in other threads.</p>

<p>To avoid the deadlock, please use Mel command only if you are going to evaluate the scene. You could also try to rewrite your nodes in C++ to avoid sharing a lock with the Python interpreter.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Robert Cervellione
EMAIL: cervellione@cerver.net
IP: 108.54.97.167
URL: http://dynamaya.cerver.org
DATE: 08/06/2016 05:40:34 AM
does this also apply to high volume mel commands? I am having the same issue when i evaluate a mel command at every frame on the time line, the system locks and crashes due to a memory access violation. i assume because the previous command was not finished operating on the object before the new mel command was called on the same object.   
-----
COMMENT:
AUTHOR: Chengxi Li
EMAIL: cheng.xi.li@autodesk.com
IP: 116.192.29.126
URL: 
DATE: 08/11/2016 12:35:49 AM
I think this is applied to commands need to be executed during idle. Maybe it is a little different from your issue.
-----
COMMENT:
AUTHOR: Jakob Steffensen
EMAIL: js@anim.dk
IP: 193.106.164.50
URL: http://www.anim.dk
DATE: 08/17/2016 07:54:01 AM
We are also working with custom locators and something baffles me...

if you do a spaceLocator or nurbsCurve, copy it 400 times and set keys on the transform you might get about 200 fps when doing playback...

Compile the footPrintNode from the devkit and do the same and you get 23 fps (60 fps with the geometryOverride version)

Without keys on the transform the viewport performance is fine.... any clue why?

Best wishes... Jakob
-----
COMMENT:
AUTHOR: Luke Harris
EMAIL: lukeha@gmail.com
IP: 77.107.234.2
URL: 
DATE: 08/18/2016 02:05:32 AM
This bug is pretty nasty. Even calling out to mel from python causes the crash so unless you can rewrite your whole tool in mel the work around isn't doable. Further, even disabling parallel evaluation will not fix it in all cases. If parallel is disabled but viewport2.0 is enabled it will usually still crash when calling cmds.playblast(). In other words you can't use python node plugins with viewport2.0 OR parallel eval. Not good.
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Enable component selection for MPxSubsceneOverride of apiMeshShape sample
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: enable-component-selection-for-mpxsubsceneoverride-of-apimeshshape-sample
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/enable-component-selection-for-mpxsubsceneoverride-of-apimeshshape-sample.html 
DATE: 07/27/2016 07:31:37 PM
-----
BODY:
<p>In Maya 2016 Extention 2, Autodesk has completed the native Viewport 2 implementation, and it is now the main viewport. There are many new APIs introduced and I've already posted a blog about <a href="http://around-the-corner.typepad.com/adn/2016/05/make-mpxsurfaceshape-selectable-in-viewport-2-non-highlighted-maya-2016-extension-2-api-changes.html" target="_blank">Make MPxSurfaceShape selectable in Viewport 2</a> that was a different change in Maya 2016 Extension 2. Today, I am going to talk about another change for the MPxSubsceneOverride.</p>  <p><a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#a3d9b68da81d724902522fe2bf5f809c5" target="_blank">MPxSubsceneOverride::getInstancedSelectionPath</a> and <a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/cpp_ref/class_m_h_w_render_1_1_m_px_sub_scene_override.html#af3b88498daedce6cd2e55103c58160a4" target="_blank">MPxSubsceneOverride::getSelectionPath</a> are very important for the native Viewport 2 selection, especially for the component selection. When selecting with the Marquee tool in Maya, it will check the **hilite **object and try to intersect components with the renderItems. Once Maya has the component list from <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_class_m_h_w_render_1_1_m_px_component_converter_html" target="_blank">MPxComponentConverter</a>, it will merge the component list from MPxComponentConverter to the object's active component selection list.</p>  <p>For MPxSubsceneOverride, because the sample could be instancing a shape with multiple transforms, Maya will try to call getInstancedSelectionPath and getSelectionPath to find a proper dagPath of the component renderItem. When it cannot be done, Maya will keep using the hilite object path (e.g. transform in this case). Thus, MPxSurfaceShape::hasActiveComponents will not return true and there is no activeComponents info for the shape if it returns false by default.</p>  <p>So, if you are trying to select vertex with MPxSubsceneOverride of apiMeshShape, the component info is actually stored on the transform1 instead apiMeshShape1. To correct this, you should implement MPxSubsceneOverride::getInstancedSelectionPath like this:</p>  <pre><code>bool apiMeshSubSceneOverride::getInstancedSelectionPath(const MHWRender::MRenderItem&amp; renderItem, 
                                                        const MHWRender::MIntersection&amp; intersection, 
                                                        MDagPath&amp; dagPath) const
{
    // Return shape path for the component selection
    if(intersection.selectionLevel() == MHWRender::MSelectionContext::kComponent)
    {
        MFnDagNode dagNode(fObject);    
        dagNode.getPath(dagPath);
        return true;
    }

    // Use transform path by default.
    return false;
}
</code></pre>

<p>This will store the component's selection in the shape and let <a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/cpp_ref/class_m_px_surface_shape.html#a168e1b383c958be627e8935a4ffdd7cb" target="_blank">MPxSurfaceShape::hasActiveComponents</a> and <a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/cpp_ref/class_m_px_surface_shape.html#a5d0a5e76d641c2bd825f8d5d8e0d386e" target="_blank">MPxSurfaceShape::activeComponents </a>of apiMeshShape return the value that the sample is expecting.</p>

<p>The updated apiMeshShape is available <a href="https://github.com/iamsleepy/apiMeshShape.ComponentSelection/tree/master" target="_blank">here</a>, so please check it out. For more usage reference, please see the gpuSubsceneOverride in our devkit.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE:  Maya 2017 devkit - Building Qt plug-ins instructions
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: -maya-2017-devkit-building-qt-plug-ins-instructions
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Qt
CATEGORY: Samples

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/-maya-2017-devkit-building-qt-plug-ins-instructions.html 
DATE: 07/27/2016 10:13:21 AM
-----
BODY:
<p>For the Qt plug-ins, these are the recent changes made that are not reflected in the documentation but are important to know.</p>
<p>Using the qmake executable and its qt.conf file from the devkit archive is recommended. The use of this qt.conf file uses MAYA_LOCATION and DEVKIT_LOCATION to locate the expected header/library files. Therefore, users must set both environment variables before building the samples.</p>
<p>DEVKIT_LOCATION should point to the directory where the devkit include, mkspecs, cmake directories are located.</p>
<p>After running qmake, a makefile is created and named per pluigin with the .mak extension.</p>
<p>A top level Makefile.qt is provided that can be used to build the default Qt plug-ins.</p>
<p>For more details (exactly what will change in the API Guide), please see the text in <span style="color: #ff0000;">red</span> below.</p>
<p>&#0160;</p>
<p>&#0160;</p>
<h2>Building the plug-in</h2>
<p>&lt;image007.png&gt;</p>
<p>As noted at the start of this section, Maya ships with customized versions of the Qt libraries and header files. It is important to ensure that the directory containing Maya&#39;s version of the headers appears in your include path before those which you may have in a separate Qt installation elsewhere on your system, and that the directory containing Maya&#39;s version of the libraries appears in your library path before any others.</p>
<p>It is important to use the version of qmake that is provided with the <span style="color: #ff0000;">Maya Developer Kit</span>. After running qmake, a <span style="color: #ff0000;">makefile</span> is generated that can be used to build the Qt plug-in.</p>
<p>To build the Qt plug-ins provided with the Maya Developer Kit, follow these steps:</p>
<ol>
<li>Use the following Qt archives from the Maya installation, and extract them in place.</li>
</ol>
<p>You can also obtain the same files from the Maya Developer Kit:</p>
<ol>
<ul>
<li>include/qt-5.6.1-include.tar.gz</li>
<li>mkspecs/qt-5.6.1-mkspecs.tar.gz</li>
<li>lib/cmake/qt-5.6.1-cmake.tar.gz</li>
</ul>
</ol>
<ol>
<li>Obtain the plug-in example files from the Maya Developer Kit; for example, the helixQtCmd.cpp, helixQtCmd.h, and helixQtCmd.pro files for the <em>helixQtCmd</em> example.</li>
<li>Create a helixQtCmd directory.<br /><br />Copy the aforementioned helixQtCmd.* files to the helixQtCmd directory.<br /><br /></li>
<li>Copy the qtconfig file (from the devkit/plug-ins directory) to the helixQtCmd directory.</li>
<li>Set your MAYA_LOCATION environment variable to point to your Maya installation, <span style="color: #ff0000;">and the DEVKIT_LOCATION environment variable to point to the directory where the devkit include, mkspecs, cmake directories are located.</span></li>
<li>Navigate to the helixQtCmd directory.</li>
<li>Run the version of <em>qmake</em> that is <em>provided with the <span style="color: #ff0000;">Maya Developer Kit archive</span></em>.<br /><br /><span style="color: #ff0000;">$DEVKIT_LOCATION/devkit/bin/qmake helixQtCmd.pro</span><br /><br /><span style="color: #ff0000;">A makefile is created as a result and named per plug-in with .mak extension.</span><br /><br />make –f helixQtCmd.mak<br />nmake /f helixQtCmd.mak<br /><br /><span style="color: #ff0000;">A top level Makefile.qt is provided that can be used to build the default Qt plug-ins.</span></li>
</ol>
<ol start="8">
<li>Run make using the generated Makefile as follows:</li>
</ol>
<ol>
<ul>
<li><span style="color: #ff0000;">Linux: make –f Makefile.qt</span></li>
<li><span style="color: #ff0000;">Mac OS X: make –f Makefile.qt</span></li>
<li><span style="color: #ff0000;">Windows: nmake /f Makefile.qt</span></li>
</ul>
</ol>
<p>NOTE:</p>
<p>Makefile requires a qmake project file ending with the extension .pro. Shown below is helixQtCmd.pro, the project file provided in the Developer Kit for the helixQtCmd plug-in. It provides a good example of the straightforward nature of the majority of project files.</p>
<p>include(qtconfig)TARGET = helixQtCmdHEADERS += helixQtCmd.hSOURCES += helixQtCmd.cppLIBS += -lOpenMayaUI</p>
<p>The <em>TARGET</em> setting contains the name of the plug-in, excluding its platform-specific extension.</p>
<p>The <em>HEADERS</em> setting contains a space-separated list of all the header files which are part of the plug-in.</p>
<p>The <em>SOURCES</em> setting contains a space-separated list of all the source files which are part of the plug-in.</p>
<p>By default, the plug-in is automatically linked to Maya&#39;s <em>Foundation</em> and <em>OpenMaya</em> libraries. If the plug-in needs other libraries, then they should be added to the <em>LIBS</em> setting. Library names should be preceded by &#39;-l&#39; while additional library directories should be specified using &#39;-L&#39;. For example:</p>
<p>LIBS += -L/usr/local/lib -lxml</p>
<p>For more complex needs, please refer to Qt&#39;s qmake documentation.</p>
<p>Maya uses a customized version of Digia&#39;s Qt framework and ships with its own versions of all the libraries and header files you need to use Qt in your plug-ins. On Linux and OS X the libraries are in Maya&#39;s <em>lib</em> directory. On Windows the link libraries are in Maya&#39;s <em>lib</em> folder and the DLLs are in Maya&#39;s <em>bin</em> folder. On all platforms the header files are shipped as a compressed archive (e.g. qt-5.6.1-include.tar.gz) in the <em>include</em> directory of your Developer Kit installation. Before doing any Qt plug-in work, uncompress the archive into a directory where you have write permission and be sure to include that directory ahead of any others in your include path.</p>
<p>You can create custom UI for Maya using Qt Designer. For Windows and Linux users, Qt Designer is installed with Maya. For Mac OS X users, you can find Qt Designer directly at the Qt Development Tools website; or, you can build Qt from source.</p>
<p>To obtain <span style="color: #ff0000;">Qt Designer</span>, you can also install Digia&#39;s standard version of Qt on your system or download a copy of the customized Qt source from Autodesk&#39;s Open Source web-site (<a href="http://www.autodesk.com/lgplsource">http://www.autodesk.com/lgplsource</a>) and building the tools yourself. If you choose the latter option the download includes text files describing how to configure, build and install Qt for each platform supported by Maya.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: James Rowell
EMAIL: rowellogic-autodesk@yahoo.com
IP: 172.16.4.162
URL: 
DATE: 08/02/2016 08:35:17 AM
Hi Cyrille - I'm wondering if you've had any luck building pyqt for maya2017 yet?  Your notes for prior versions of maya are indispensible!  Looking forward to seeing this round when you get time.  Cheers - James.
-----
COMMENT:
AUTHOR: Leon Rosengarten
EMAIL: lion032@gmail.com
IP: 212.29.198.194
URL: 
DATE: 08/03/2016 05:37:08 AM
Hey!

I was working on a maya 2016 and when 2017 came out I began porting my work to 2017 due to the fact that it uses qt5 which has built in features that I need.
Straightaway I ran into a lot of issues that come from deep inside qt itself (e.g. QString::toStdString function causing crashes, 
Workaround: use call .toLocal8Bit().constData() instead)  .


Another issue is with the qt examples, they worked fine for qt4 but there are some breaking changes that make them bad reference point for develops e.g.:

Using QPointer to store the pointer to the plugin window will cause memory access violation due to major change in QPointer implementation in qt5, the following is from Qt docs:
Note that Qt 5 introduces a slight change in behavior when using QPointer.

"When using QPointer on a QWidget (or a subclass of QWidget), previously the QPointer would be cleared by the QWidget destructor. Now, the QPointer is cleared by the QObject destructor (since this is when QWeakPointer objects are cleared). Any QPointers tracking a widget will NOT be cleared before the QWidget destructor destroys the children for the widget being tracked."

the workaround so far is to use QSharedPointer.

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: New API changes for Maya 2017 &amp; MotionBuilder 2017
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: new-api-changes-for-maya-2017-motionbuilder-2017
CATEGORY: Autodesk
CATEGORY: Events
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/new-api-changes-for-maya-2017-motionbuilder-2017.html 
DATE: 07/26/2016 10:42:00 AM
-----
BODY:
<p>A couple of months ago, we released Maya 2016 Extension 2 and some people have asked us about Maya 2017 &amp; MotionBuilder 2017. Now, they are here! Maya 2017 &amp; MotionBuilder 2017 have been announced on July 26, 2016, during SIGGRAPH event. As usual, I’d like to highlight some changes/improvements on the API side.    <br /><strong></strong></p>  <p><strong>Maya API Changes</strong>: </p>  <ul>   <li>There are many API improvements in Maya 2017, especially for the Rendering feature. For all the details about API changes/improvements between Maya 2016 Extension 2 and Maya 2017, please refer at “<a href="http://help.autodesk.com/view/MAYAUL/2017/ENU/?guid=__files_GUID_1DBFC5FE_0A84_43C8_8F45_4875CEFC1F11_htm" target="_blank">What's New in API in Maya 2017</a></a>” section of online SDK help. Some more information and highlights:       <ul>       <li>In Maya 2017 we have further improved the “Render Setup” feature. As you know in Maya 2016 Extension 2 we introduced a new feature named “Render Setup” to replace Maya's legacy Render Layers. For Maya 2017 we have made improvements and changes that will allow for better support for 3rd party renderers:          <ul>           <li>Support for AOV setups per layer and inclusion of AOV setups in exported Render Setup templates </li>            <li>Changes to render settings window callbacks to support the new workspaces UI feature </li>            <li>&quot;Interactive Sequence Rendering&quot; - A new feature allowing artists to render a sequence directly from Maya’s UI without having to execute a batch render (including support for loading the sequence in the Renderview for review) </li>         </ul>       </li>     </ul>      <p>&#160;</p>      <ul>       <li>One big UI change in Maya 2017 is the move to Qt 5.6 and PySide 2.0. This means if your plugins are based on the previous Qt/PySide versions, then migration work is required to make them work successfully. You can refer to the <a href="http://doc.qt.io/qt-5/portingguide.html" target="_blank">official website of Qt 5</a>, and <a href="https://github.com/PySide/pyside2/wiki" target="_blank">PySide 2.0</a>. There are also some <a href="https://github.com/PySide/pyside2/wiki/My_Practice_:_Porting_python_scripts_to_PySide2" target="_blank">notes</a> that were added by our engineer during the porting to PySide 2.0. </li>     </ul>      <p>&#160;</p>      <ul>       <li>Some rendering developers may be interested in the XGen feature. It provides an SDK for our renderer partners to integrate with this cool functionality and is separate from the Maya main Devkit. You can find XGen SDK at “Maya 2017 installation folder\plug-ins\xgen\devkit\&quot;. For Maya 2017, we added a new sample to show how to render the new interactive groom splines through Arnold. You can find the sample at &quot;Maya 2017 installation folder\plug-ins\xgen\devkit\xgenSplineArnoldExtension\xgenSpline”. </li>     </ul>   </li> </ul>  <p>&#160;</p>  <ul>   <li>The next thing is about the Maya Devkit, that should be downloaded from <a href="https://apps.autodesk.com" target="_blank">Autodesk App Store</a>(Coming soon). In Maya 2016 Extension 2, we have re-introduced the devkit headers and libraries into the installation. This will help you to keep the correct SDK files aligned with each product release. The devkit from the app store is the complete and current one that also includes the samples. Whenever you need to review the samples, please use this one. Also note that compressed Qt headers are included with the installation as well. </li> </ul>  <p>&#160;</p>  <ul>   <li>Please remember that we have three consecutive binary change releases. The three different releases are Maya 2016, Maya 2016 Extension 2 and Maya 2017. The key thing you should know is that all of them are <b>not binary compatible</b>, and it means if you want your plugin to support all of these 3 versions, it must be re-compiled against each different Maya version in order to be recognized. BTW, Maya 2016 Extension 1 is a normal extension of Maya 2016, and also binary compatible with Maya 2016, so you can consider it together with Maya 2016. </li> </ul>  <p>&#160;</p>  <p>For MotionBuilder 2017, we have introduced several new features in all the major areas of the software.    <br />This includes updates to Story, Animation, Character Animation, and Scripting as well as adding and improving numerous methods and properties. I won’t give all the details here, but you can go to “<a href="http://docs.autodesk.com/MOBPRO/2017/ENU/MotionBuilder-Developer-Help/index.html#!/url=./files/GUID-D28B5A5D-EEE0-4013-8983-37DDD4ACA110.htm" target="_blank">What’s New/ What’s Changed?</a>” section of MotionBuilder 2017 Developer Help for more information.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Tips for the &ldquo;name&rdquo; attribute of connect element in the Fragment graph
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: tips-for-the-name-attribute-of-connect-element-in-the-fragment-graph
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Shader

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/tips-for-the-name-attribute-of-connect-element-in-the-fragment-graph.html 
DATE: 07/22/2016 04:44:00 AM
-----
BODY:
<p>Today, we are going to look at a little bit inside of fragment graph&#39;s connect element. For the first two attributes, <strong>from</strong> and <strong>to</strong> are self-explanatory. Essentially this allows connecting from one fragment&#39;s output to another fragment&#39;s input. However, the “name” attribute is not well explained.</p>
<p>The fragment graph is designed like the dependency graph in Maya. Connecting different nodes and having outputs after running through a series of fragments you&#39;ll get the result. But unlike the dependency graph, the fragment graph cannot accept inputs having the same name. For example, if you have a fragment <strong>f1</strong> that you would like to create multiple instances and then connect to different fragments.</p>
<p>&#0160;</p>
<pre><code>&lt;connect from=&quot;f1.output&quot; to=&quot;f2.input&quot;/&gt;
&lt;connect from=&quot;f1.output&quot; to=&quot;f3.input&quot;/&gt;
</code></pre>
<p>&#0160;</p>
<p>In this case, you will have to rename the output of f1 with the “name” attribute so Maya will create multiple instances of f1 to connect them properly. Otherwise, only the first one will be connected.</p>
<p>&#0160;</p>
<pre><code>&lt;connect from=&quot;f1.output&quot; to=&quot;f2.input&quot; name=&quot;f2Input&quot;/&gt;
&lt;connect from=&quot;f1.output&quot; to=&quot;f3.input&quot; name=&quot;f3Input&quot;/&gt;
</code></pre>
<p>&#0160;</p>
<p>But there is also an exception here. When you are declaring an input struct for the <strong>alias</strong> output like this:</p>
<p>&#0160;</p>
<pre><code>&lt;properties&gt;
   &lt;struct name=\&quot;fileTexturePluginFragmentOutput\&quot; struct_name=\&quot;fileTexturePluginFragmentOutput\&quot; /&gt;
&lt;/properties&gt;

&lt;outputs&gt;
    &lt;alias name=\&quot;fileTexturePluginFragmentOutput\&quot; struct_name=\&quot;fileTexturePluginFragmentOutput\&quot; /&gt;
    &lt;float3 name=\&quot;outColor\&quot; /&gt;
    &lt;float name=\&quot;outAlpha\&quot; /&gt;
&lt;/outputs&gt;
</code></pre>
<p>&#0160;</p>
<p>The input(properties) “name” shouldn&#39;t be changed if you want to connect its output in your graph. After you&#39;ve changed its name, Maya will try to create another instance of the renamed structure. After the input name is changed, Maya can&#39;t find the alias with original name and so the fragment graph can&#39;t be created.</p>
<p>The conclusion for correctly using the “name” attribute of the connect element:</p>
<ol>
<li>Rename the input attribute when reusing the same fragment&#39;s input for multiple outputs.</li>
<li>Don&#39;t rename an alias output.</li>
</ol>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Makal
EMAIL: piotr.makal@gmail.com
IP: 185.127.120.24
URL: 
DATE: 07/20/2016 08:53:11 AM
I'm writing this comment in the hope that some Autodesk Maya developer will read this. You have added MExternalDropCallback class way in Maya 2013 (http://around-the-corner.typepad.com/adn/2012/06/whats-new-in-the-maya-2013-api.html) which helps dropping stuff into Maya UI from custom Qt widgets. But as far as I'm concerned (and other people to: https://groups.google.com/forum/#!topic/python_inside_maya/EyY6QY4jPhc) there is no hook for dragging and dropping objects from Maya UI into custom Qt widgets. It would be very nice I you would think about adding some class or extending MExternalDropCallback to support that behaviour.

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: The idle queue isn't 100% a queue
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: the-idle-queue-isnt-100-a-queue
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/07/the-idle-queue-isnt-100-a-queue.html 
DATE: 07/22/2016 04:37:00 AM
-----
BODY:
<h1>&#160;</h1>  <p>&#160;&#160;&#160; This week, I ran into a strange problem with a multi-threading Python case from a partner.</p>  <pre><code>def foo():
for i in range(10):
    print i

# call from main thread
foo()

# call from separate thread
import threading
mythread = threading.Thread(target=foo)
mythread.start()
</code></pre>

<p>&#160;</p>

<p>The output is quite strange:</p>

<pre><code>0
1
2
3
4
5
6
7
8
9

9
8
7
6
5
4
3
2
1
0
</code></pre>

<p>&#160;&#160;&#160; The child thread's output order is reversed, how did that happen?</p>

<p>&#160;&#160;&#160; After spending some time with our engineers, we found that Maya will treat the higher priority queue as a stack for better performance. The Python I/O output is considered as a high priority event and it is in the high priority idle queue. </p>

<p>&#160;&#160;&#160; If you are using multi-threading in your code or idle queue, you may want to take this into consideration.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Template/un-template script
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: templateun-template-script
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/templateun-template-script.html 
DATE: 06/29/2016 09:41:45 PM
-----
BODY:
<p>A script can be created that will template or un-template the selected object to bind it to a key. Then, if the object is already templated, it will un-template it and vice versa. To do template/un-template, there is no need to write a big script. Maya provides a MEL command (toggle) to template and un-template the selected object using “-template” option.<br /> <br /> toggle -template;<br /> <br /> 1. If objects are already templated, then above MEL command will un-template them.<br /> 2. If Objects are un-templated, then same above command will template them.<br /> <br /> toggle -template -q;<br /> // Result: 0 // <br /> toggle -template;</p>
<p><br /> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0918d5d3970d-pi" style="display: inline;"><img alt="Template" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb0918d5d3970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0918d5d3970d-800wi" title="Template" /></a><br /><br /></p>
<p><br /> toggle -template -q;<br /> // Result: 1 // <br /> toggle -template;</p>
<p><br /> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8756108970b-pi" style="display: inline;"><img alt="Untemplate" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c8756108970b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8756108970b-800wi" title="Untemplate" /></a></p>
<p>As you can see it is easy to create a script to achieve template/un-template of a selected object.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: MFn::kFluid and MFn::KFluidData attribute connection and limitation
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: mfnkfluid-and-mfnkfluiddata-attribute-connection-and-limitation
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/mfnkfluid-and-mfnkfluiddata-attribute-connection-and-limitation.html 
DATE: 06/29/2016 07:05:21 PM
-----
BODY:
<p><br /> <br /> We can create an attribute(typed attribute) using the following Maya C++ API <br /> MFnTypedAttribute has 2 overload methods for creating attribute.</p>
<p><br /> MObject create (const MString &amp;fullName, const MString &amp;briefName, <strong>const MTypeId &amp;id</strong>, MObject defaultData=MObject::kNullObj, MStatus *ReturnStatus=NULL)<br /> MObject create (const MString &amp;fullName, const MString &amp;briefName, <strong>MFnData::Type type</strong>, MObject defaultData=MObject::kNullObj, MStatus *ReturnStatus=NULL)<br /> <br /> Here is the sample code</p>
<pre>    MObject              fluidType::outGrid;<br />    MStatus              stat;<br />    MFnTypedAttribute    tAttr;<br />    <br />    outGrid = tAttr.create(&quot;outGrid&quot;, &quot;ogd&quot;, MFn::kFluid, MObject::kNullObj, NULL);<br />    if (outGrid.isNull()) cerr &lt;&lt; &quot;object is null&quot; &lt;&lt; endl;<br /><br />    tAttr.setWritable(false);<br />    tAttr.setStorable(false);</pre>
<p>If we create an attribute with MFn::kFluid or MFn::kFluidData, because it is an enumerator, the create() function is not able to type cast or map it to MFnData::Type enumerator. Hence, if we try to create an attribute with the above method, you will get MObject as NULL.<br /> <br /> In short, the MFn::kFluid and MFn::kFluidData attributes are fluid attributes that can not be created explicitly using either C++ API or using MEL script. But, if you assign any fluid shape to object, you can check whether the object has MFn::kFluidData or MFn::kFluid. For example, node.hasFn(MFn::kFluid) where node is MObject type.<br /> We can connect fluid type of attributes only when if both the attributes are same type. For example, I created “fluid shape” node and “simpleFluidEmitter” node from devkit sample. I am able to connect “fluidShape.outGrid” to “simpleFluidEmitter.geometry” attributes.<br /> <br /> Please check the below output:<br /> <br /> getAttr -type simpleFluidEmitter.geometry;<br /> // Result: fluid // <br /> <br /> getAttr -type fluidShape1.outGrid;<br /> // Result: fluid //<br /> <br /> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c87557a4970b-pi" style="display: inline;"><img alt="Fluid_outGrid_geometry" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c87557a4970b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c87557a4970b-800wi" title="Fluid_outGrid_geometry" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to delete the scriptJob if it is created with parent (-p) flag after specified QWidget is closed
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-delete-the-scriptjob-if-it-is-created-with-parent-p-flag-after-specified-qwidget-is-closed
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/how-to-delete-the-scriptjob-if-it-is-created-with-parent-p-flag-after-specified-qwidget-is-closed.html 
DATE: 06/27/2016 11:20:10 PM
-----
BODY:
<p>After creating a Qt window with PySide.you may want to assign a scriptJob window to it and remove the job after the window is closed with -p flag. For example in the following code:</p>
<p>&#0160;</p>
<pre><code>import maya.cmds as cmds
import maya.OpenMayaUI as omui 
import PySide.QtCore as QtCore
import PySide.QtGui as QtGui
from shiboken import wrapInstance 

mayaPtr = omui.MQtUtil.mainWindow() 
mayaWindow = wrapInstance(long(mayaPtr), QtGui.QWidget) 
scriptJobWindow = QtGui.QMainWindow(parent = mayaWindow) 
scriptJobWindow.setObjectName(&#39;scriptJobWindow&#39;) 
scriptJobWindow.setWindowTitle(&#39;scriptJobWindow&#39;)
scriptJobWindow.show()

def scriptJob(): 
    print &quot;scriptJob callback&quot; 

jobNum = cmds.scriptJob(p=&quot;scriptJobWindow&quot;, e= [&quot;SelectionChanged&quot;,scriptJob])
</code></pre>
<p>But you may be surprised to see that, even if the -p flag was specified, the scriptJob is still exists despite window being closed with the close button. How does that happen?</p>
<pre><code>scriptJob -lj;
// Result: 0:  &quot;-permanent&quot; &quot;-event&quot; &quot;PostSceneRead&quot; &quot;generateUvTilePreviewsPostSceneReadCB&quot;
 .....
 80: p=&#39;scriptJobWindow&#39;, e=[&#39;SelectionChanged&#39;, &lt;function scriptJob at 0x000002E020AF3898&gt;]
</code></pre>
<p>If you use Spy++ or similar tools, you&#39;ll find that the QWidget is still hanging out there.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8744b29970b-pi" style="display: inline;"><img alt="Image" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c8744b29970b image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8744b29970b-800wi" title="Image" /></a></p>
<p><br />Turns out that, when a QWidget is closed, it is simply hidden instead of being destroyed. In this case you may want to change its behavior, from just being hidden, to be destroyed. The solution is simple, add WA_DeleteOnClose attribute to QWidget.</p>
<pre><code>import maya.cmds as cmds
import maya.OpenMayaUI as omui 
import PySide.QtCore as QtCore
import PySide.QtGui as QtGui
from shiboken import wrapInstance 

mayaPtr = omui.MQtUtil.mainWindow() 
mayaWindow = wrapInstance(long(mayaPtr), QtGui.QWidget) 
scriptJobWindow = QtGui.QMainWindow(parent = mayaWindow) 
scriptJobWindow.setObjectName(&#39;scriptJobWindowWithDelete&#39;) 
scriptJobWindow.setWindowTitle(&#39;scriptJobWindowWithDelete&#39;)

#Set WA_DeleteOnClose attribute
scriptJobWindow.setAttribute(QtCore.Qt.WA_DeleteOnClose) 

scriptJobWindow.show() 

def scriptJob(): 
    print &quot;scriptJob callback&quot; 

jobNum = cmds.scriptJob(p=&quot;scriptJobWindowWithDelete&quot;, e= [&quot;SelectionChanged&quot;,scriptJob])
</code></pre>
<p>Now, when closed, the window is destroyed and the scriptJob is removed automatically.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Maya 2016.5 Viewport 2.0 on OSX : How to handle the "Current drawing engine does not support legacy viewport" warning
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-20165-viewport-20-on-osx-how-to-handle-the-current-drawing-engine-does-not-support-legacy-viewp
CATEGORY: Mac
CATEGORY: OpenGL
CATEGORY: Rendering
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/maya-20165-viewport-20-on-osx-how-to-handle-the-current-drawing-engine-does-not-support-legacy-viewp.html 
DATE: 06/13/2016 01:51:21 AM
-----
BODY:
<p>In Maya 2016 Extension 2 (2016.5), you may have noticed that on Mac OS X, Maya would give the following warning message: &quot;Current drawing engine does not support legacy viewport&quot;. Maya 2016.5 uses OpenGL API version 4.1( please see the image below). The “OpenGL Core Profile (strict)” is the default rendering engine on Mac OS X which supports OpenGL version 3.2 and above. So, it won’t support OpenGL 2.1 and below features. If you still want to use OpenGL 2.1 and below features you have to change the Viewport settings to use “OpenGL Legacy” mode. To change this, go to Maya -&gt;Windows -&gt; Settings/Preferences -&gt; Preferences -&gt; Display -&gt;Viewport 2.0.<br /> <br /> If you have developed your own viewport for Maya, make sure that you are using latest OpenGL profile, or you can change the settings in Maya GUI to use the Legacy one.<br /> <br /> You can also use an environment variable to enable the Legacy viewport. i.e, MAYA_ENABLE_LEGACY_VIEWPORT=1 and make sure that you have enabled OPENGL_LEGACY environment variable as well.<br /> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09106272970d-pi" style="display: inline;"><img alt="Vp2_legacy" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb09106272970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09106272970d-800wi" title="Vp2_legacy" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: OpenColorIO Library Issues
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: opencolorio-library-issues
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Vijay Prakash
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/opencolorio-library-issues.html 
DATE: 06/13/2016 01:44:33 AM
-----
BODY:
<p>The OpenColorIO library is a third-party library from Sony Pictures and it is opensource code found <a href="http://opencolorio.org/">here</a>. Through the Maya 2016 Extension 1 release, OpenColorIO library is included with the Maya release. The Maya customized OpenColorIO library is statically linked with the SynColor library (ie. SynColor.dll on Windows). Note that the OpenColorIO library supports all platforms as OpenColorIO.dll in Windows, OpenColorIO.so in Linux and OpenColorIO.dylib in OSX.<br /> <br /> If you download and build OpenColorIO on your own and then link with your plugin, then when loading in Maya you will see an unresolved symbols issue. This is because your plugin is now linked with your local customized OpenColorIO library, but it’s not the same one that is statically linked with the SynColor library.<br /> <br /> To overcome this issue, there are two possible solutions:</p>
<ol>
<li>Build customized OpenColorIO and statically link with SynColor.dll</li>
<li>Replace the OpenColorIO.dll that exists in the $MAYA_LOCATION/bin with your customized OpenColorIO.dll.</li>
</ol>
<p>Note that the unresolved symbol problem is no longer an issue in Maya 2016 Extension 2 (2016.5) release. We have removed the OpenColorIO library from Maya 2016.5. If you still want to use OpenColorIO, you can build it on your own and load it in Maya 2016.5.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Peter
EMAIL: pitti_der_platsch@yahoo.de
IP: 212.204.55.90
URL: 
DATE: 06/21/2016 02:04:10 AM
Hi,

does this mean no OpenColorIO support since Maya 2016.5 at all? Except I'm building it myself?

Thanks,
Peter
-----
COMMENT:
AUTHOR: Vijaya Prakash
EMAIL: vijaya.prakash@autodesk.com
IP: 122.172.242.29
URL: 
DATE: 06/21/2016 04:32:35 AM
Hi Peter,

Yes, There will be no support for OpenColorIO from Maya 2016.5 unless you build it on yourself.

Thanks,
Vijaya Prakash.
-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Compiler versions for Maya 2016 Extension 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: compiler-versions-for-maya-2016-extension-2
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/06/compiler-versions-for-maya-2016-extension-2.html 
DATE: 06/10/2016 11:01:00 PM
-----
BODY:
<h4>This is an update on previous posts for older versions which can be found here: <a href="http://around-the-corner.typepad.com/adn/2015/04/maya-compiler-versions-update.html">Maya 2016</a>, <a href="http://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html">Maya 2015</a>, <a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html">Maya 2014</a>, <a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html">Maya 2008 to 2013</a>.     <br />Basically, the build environment of Maya 2016 extension 2 is very similar as Maya 2016 with just a few updates, I listed them as follow and marked the updated and new added items in red with links to help you find it quickly.</h4>  <h2>Maya 2016 Extension 2</h2>  <h3>Windows 64bit Win7x64</h3>  <ul>   <li>Visual Studio 2012 Update 4 + Win 8 SDK </li>    <li>.Net framework 4.5.1 </li>    <li>Intel Composer XE 2015 Initial release (15.0.0.108) </li> </ul>  <h3>Linux 64bit RHEL/CentOS 6.5, FC20</h3>  <ul>   <li>gcc 4.8.2 </li>    <li>Intel Composer XE 2015 Update 1 (15.0.1.133) </li> </ul>  <h3>Mac 64bit Mavericks 10.9.5</h3>  <ul>   <li>Xcode 6.1 or 6.1.1 with SDK 10.9 (Mavericks) </li>    <li><font color="#c0504d">clang with libc++ </font></li>    <li>Intel Composer XE 2015 Update 1 (15.0.1.108) </li> </ul>  <h2>Extensions (all platforms)</h2>  <ul>   <li>Embedded Python 2.7.6 - Internal to Maya </li>    <li>Embedded PySide 1.2 </li>    <li><a href="http://www.autodesk.com/lgplsource"><font color="#c0504d"><strong>Qt 4.8.6 modified</strong></font></a><strong> </strong></li>    <li>Boost 1.52 with its own namespace awBoost for Maya,      <br />Alembic and GpuCache use Boost 1.55. </li>    <li><a href="http://threadingbuildingblocks.org/download#stable-releases"><font color="#c0504d"><strong>TBB 4.4 update 2</strong></font></a><font color="#c0504d"><strong> </strong></font></li>    <li>DirectX SDK June 2010 (DX11) </li>    <li>OpenEXR 2.2 </li>    <li><u><a href="https://github.com/PixarAnimationStudios/OpenSubdiv"><b><font color="#c0504d">Open SubDiv 3.0.3</font></b></a></u> </li> </ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Ivan Kolev
EMAIL: ivan.kolev@ephere.com
IP: 80.72.86.6
URL: 
DATE: 06/17/2016 01:11:45 AM
Hi, thanks for the important information (and your blog in general, it is very helpful).
There's one more difference that we found, the C++ standard library has changed on the Mac. Compiling with GNU's libstdc++ results in linking errors. Compiling with clang's libc++ has no problems.

-----
COMMENT:
AUTHOR: Zhong Wu
EMAIL: 
IP: 50.247.84.33
URL: http://profile.typepad.com/johnonsoftware
DATE: 06/17/2016 08:22:37 AM
Hi Ivan, as listed, on Mac, the XCode 6.1(clang with libstdc++) is always the recommended one.
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: How to remove the white outline in the RenderView
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: how-to-remove-the-white-outline-in-the-renderview
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Rendering

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/05/how-to-remove-the-white-outline-in-the-renderview.html 
DATE: 05/24/2016 11:24:26 PM
-----
BODY:
<p>The MRenderView::updatePixels API has an annoying side-effect of showing a white outline. For example, calling it in the default way on a rectangle will show it like this:</p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09063831970d-pi"><img title="withoutline" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="withoutline" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1ec7b7d970c-pi" width="244" height="154" /></a></p>  <p>&#160;</p>  <p>There is an undocumented API available that can alleviate this problem. You can call the <strong>MRenderView::setDrawTileBoundary(false)</strong> method after startRender and it will disable Maya from drawing the outline. </p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb09063835970d-pi"><img title="withoutOutline" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="withoutOutline" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c862a70a970b-pi" width="244" height="178" /></a></p>  <p>&#160;</p>  <p>Unfortunately, this API is currently marked for deprecation. But we have discussed this with our engineering team, and they agree it is an acceptable workaround for the time being.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Make MPxSurfaceShape selectable in Viewport 2 - Non-highlighted Maya 2016 Extension 2 API Changes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: make-mpxsurfaceshape-selectable-in-viewport-2-non-highlighted-maya-2016-extension-2-api-changes
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/05/make-mpxsurfaceshape-selectable-in-viewport-2-non-highlighted-maya-2016-extension-2-api-changes.html 
DATE: 05/11/2016 02:29:18 AM
-----
BODY:
<p>In Maya 2016, several APIs were introduced but marked as <strong>Not implemented</strong> or not mandatory. Some of them are now fully implemented in Maya 2016 Extension 2, and actually now required in your plug-in code. The <strong>Completion of native Viewport 2.0 selection</strong> feature is one of them. If you wonder why Maya 2016 had some ‘Not implemented’ API but signature present, it was to help binary compatibility between Maya 2016 versions of the plug-ins using these API. However, as you probably figure out now, Maya 2016 Extension 2 is not binary compatible with the Maya 2016 family, but for other reasons.</p>
<p><a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/cpp_ref/class_m_px_surface_shape.html#acedd5e97c21aacfc5f976499438c7fa8" target="_blank">MPxSurfaceShape::getShapeSelectionMask</a> is one of the must in the Viewport 2.0 native selection API. To make your shape selectable in Viewport 2, you have to override it now.</p>
<p>For general meshes, the code below would be enough.</p>
<pre><code>MSelectionMask apiMesh::getShapeSelectionMask() const
{
    MSelectionMask::SelectionType selType = MSelectionMask::kSelectMeshes;
    return MSelectionMask( selType );
}
</code></pre>
<p>Please update your custom shapes if you want to make it selectable in Maya 2016 Extension 2. The <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_31E929F2_56E0_4CB8_9984_123AD3A85670_htm" target="_blank">Porting Selection from Viewport 1 to 2</a> guide has been updated for the latest Maya, please check it out.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Maya 2016 Extension 2, MPxSurfaceShape, selectable, not selectable
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya 2016 Extension 2 installation issues - License(CLIC) and environment variables
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2016-extension-2-installation-issues-licenseclic-and-environment-variables
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/05/maya-2016-extension-2-installation-issues-licenseclic-and-environment-variables.html 
DATE: 05/11/2016 01:53:17 AM
-----
BODY:
<p>If you have facing the issue below (CLIC Version Mismatch) after installing Maya 2016 Extension 2, it might be caused by having installed a previous version of an Autodesk beta software like Maya Preview Releases, and you did not uninstall it before prior installing the retail version.</p>
<p>&#0160;</p>
<p><img alt="CLIC Version Mismatch" border="0" height="287px" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8586cce970b-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="CLIC Version Mismatch" width="415px" /><br />CLIC Version Mismatch</p>
<p>&#0160;</p>
<p>To solve the problem, make sure to uninstall the Autodesk License Service on your computer, and next install the license service shipped with the Maya 2016 Extension 2. You can find the CLIC installer in the <strong>x64/CLIC</strong> folder of downloaded files (usually on C:\Autodesk\Autodesk_Maya_2016_EXT2_EN_JP_ZH_Win_64bit_dlm\x64\CLIC by default).</p>
<p>&#0160;</p>
<p>Here is a tip for uninstalling the license server. If you cannot uninstall the old Autodesk License Server from control panel which happens on my colleague’s Windows (only can repair and update is available).</p>
<p>&#0160;</p>
<p><img alt="Uninstall is missing" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8586cd7970b-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="Uninstall is missing" /> <br />Uninstall is missing</p>
<p>&#0160;</p>
<p>Find CLIC_x64_Release.msi in the path above, right click at it and you will see uninstall in the menu.</p>
<p><img alt="Uninstall in the right click menu" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08fbfba2970d-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="Uninstall in the right click menu" /><br />Uninstall in the right click menu</p>
<p>&#0160;</p>
<p>Once you have installed the correct version, Maya 2016 Extension 2 will be working properly. And please make sure the <strong>MAYA_LOCATION</strong> environment variable is removed or pointing to the Maya 2016 Extension 2 installation folder. It must be removed if you are having multiple versions of Maya installed in your system. Otherwise, you’ll see Maya trying to find the required files in the previous installation path like this.</p>
<p><img alt="Maya tries to find files in incorrect path" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08fbfbaa970d-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border: 0px;" title="Maya tries to find files in incorrect path" /><br />Maya tries to find files in incorrect path</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
CLIC Version Mismatch, Maya 2016 Extention 2
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Get image from M3dView::readColorBuffer in Viewport 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: get-image-from-m3dviewreadcolorbuffer-in-viewport-2
CATEGORY: Cheng Xi Li
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/05/get-image-from-m3dviewreadcolorbuffer-in-viewport-2.html 
DATE: 05/05/2016 10:36:06 PM
-----
BODY:
<p>Although the API is marked as obsolete, it is the easiest way to get a screenshot from Viewport in Maya and many plug-ins are still using it.</p>
<p>But if you are trying to get a MImage from Viewport 2, you may have some problem with your previous Python code like this.</p>
<pre class="brush: python; toolbar: false">import maya.OpenMaya as openmaya
import maya.OpenMayaUI as openmayaUI

view = openmayaUI.M3dView.active3dView()
img = openmaya.MImage()
view.readColorBuffer(img)
</pre>
<p>This code will not work because in Viewport 2, the image is stored as float and the default format of MImage is BGRA byte.</p>
<p>The solution is simple, make MImage a float image. Replace the last line above with following code snippet.</p>
<pre class="brush: python; toolbar: false">if view.getRendererName() == view.kViewport2Renderer:       
    img .create(view.portWidth(), view.portHeight(), 4, openmaya.MImage.kFloat)
    view.readColorBuffer(img)
    img.convertPixelFormat(openmaya.MImage.kByte)
else:
    view.readColorBuffer(img)
</pre>
<p>You will get a BGRA byte image in the end like the old time:)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Maya and the Forge APIs - Discount for Forge DevCon
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: maya-and-the-forge-apis-discount-for-forge-devcon
CATEGORY: Autodesk
CATEGORY: Cloud
CATEGORY: Conferences
CATEGORY: Events
CATEGORY: Maya
CATEGORY: SaaS
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/04/maya-and-the-forge-apis-discount-for-forge-devcon.html 
DATE: 04/17/2016 10:20:00 PM
-----
BODY:
<p>To start, have you heard about the new Autodesk Forge platform? Forge is a place that gathers many new cloud service APIs into one place for consumption by developers. Forge includes the platform technology, a program for supporting partners (think ADN open on a broader scale), including a developer conference coming in June, and a fund where startups can apply for an investment by the Forge fund. </p>  <p><a href="http://forge.autodesk.com/conference/"><img title="clip_image002[5]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="clip_image002[5]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08e03e0d970d-pi" width="654" height="233" /></a></p>  <p>What does this have to do with Maya programming concepts? Well, there are a number of reasons to start this conversation. The Forge services support Maya in various ways. The View and Data API for example, can view 3D models in HTML 5 enabled browsers and apps – a nice way to share your models online for example, using your own custom websites or tools. The ReCap service provides 123D Catch style photogrammetry reality capture into your custom workflow. Or maybe you want to exploit the A360 rendering service outside of Maya with your own tools? A360 Rendering API coming soon! Even more, Maya I/O in cloud will also come to be a member of Forge family in near future. With that service, you can handle tasks in the cloud, for example, asset translation, rendering, distributed simulation,etc. Stay tuned for more exciting news.</p>  <p>Anyway, to give you a quick example of View and Data API, I used a MotionBuilder sample character named Mia. I converted it to the View and Data API format for viewing on the web. I used a great sample created by a colleague, <a href="http://adndevblog.typepad.com/cloud_and_mobile/philippe-leefsma.html">Philippe Leefsma</a> using <a href="https://nodejs.org">node.js</a> and <a href="https://angularjs.org/">angular.js</a>. The sample is a working online website, and also has full <a href="https://github.com/Developer-Autodesk/ng-gallery">source code</a> available. The sample shows how to process the model through the View and Data API translation service and then makes it viewable on the web in a full 3D interactive way. A screenshot is below to give a taste, but I encourage you to try it out directly here: <a href="http://viewer.autodesk.io/node/gallery/#/viewer?id=5711883cc3fbd1d80a316e14">Mia</a>. Also check out all the other models in the gallery. There is also a nice interactive demo here as well: <a href="http://lmv.rocks/">http://lmv.rocks/</a></p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08e03e15970d-pi"><img title="clip_image004[6]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="clip_image004[6]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08e03e18970d-pi" width="654" height="348" /></a></p>  <p>How to get the model into the viewer format? Well, the translation service does not yet support the Maya native format (*.ma or *.mb). For now you can export to one of the other formats. The FBX format is supported, but is not ideal for including materials and animation at the moment. The DWF format is best for supporting materials out of Maya. I use 3ds Max as an intermediate product to convert to DWF, in this example to get the texture materials to come across.</p>  <p>And for the Recap Photo service, this morning, I took a series of photos for a horse sculpture in my home with my cellphone, and you can see the pictures as following. I use the <a href="https://recap360.autodesk.com/">Recap 360 web application</a> to generate the 3D model. You can use one of our samples, and the <a href="https://github.com/Developer-ReCap-Autodesk">source code</a> are also provided on github for your reference. Even more, you can create your own application to integrate the Recap Photo service within your pipeline. BTW, I also uploaded the model with our View and Data service, so you can view it live <a href="http://viewer.autodesk.io/node/gallery/#/viewer?id=5711d46031e9f1c00e545da4">here</a>.</p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c83c3968970b-pi"><img title="clip_image006[5]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="clip_image006[5]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c83c396a970b-pi" width="654" height="345" /></a></p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c83c3976970b-pi"><img title="clip_image008[5]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="clip_image008[5]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c83c397c970b-pi" width="654" height="329" /></a></p>  <p>If you are interested to learn more about the Forge platform, we can offer you a discount code to the Forge DevCon coming in June. Autodesk is offering “around-the-corner” readers a 30% discount to the Forge Developer Conference. Simply use the code ADN_ME30 when registering. <a href="https://forgedevcon.eventbrite.com/?discount=ADN_ME30">Register </a>using this code before April 22<sup>nd</sup> and you can combine it with the early-bird discount (so that’s $349 instead of $599 for a standard pass). Note that students can register for free with your education email address. Because conferences are always better with friends, you can also <a href="mailto:contact.forgedevcon@autodesk.com?subject=Refer%20a%20Friend%20-%20ADN_ME30">contact </a>us for details on a special “Refer a Friend&quot; offer for even greater savings!</p>  <p>If you do plan to attend, and would like to meet, just let me know… I’ll be there as well! Hope to see you there.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: New API changes coming in Maya 2016 Extension 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: new-api-changes-coming-in-maya-2016-extension-2
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/04/new-api-changes-coming-in-maya-2016-extension-2.html 
DATE: 04/17/2016 09:19:00 PM
-----
BODY:
<p>Again, we come to another release season, but this year things are a little different. Maya 2017 is not released as usual. Instead, we are releasing Maya 2016 Extension 2, which is also being called Maya 2016.5. Some people may ask, where is my Maya 2017? Well, Maya 2017 may come later this year.</p>  <p>Does it mean there are not many improvements of Maya at this point? The answer is absolutely “No”! Maya 2016 extension 2 includes many updates for both features and the SDK. In fact, to support all these improvements, Maya 2016.5 is even not binary compatible with Maya 2016. It can be installed side by side with Maya 2016, and for plugin developers, it means you need to rebuild your plugins to support the version of Maya 2016.5. </p>  <p>Before we talk more about the latest SDK updates, I’d like to introduce a new initiative that was first launched around the end of last year. The program is called “<strong>Limelight</strong>”, it is currently open for all Maya &amp; 3ds Max Beta customers. We will be posting the detailed information about the new SDK changes to the beta forum after API is frozen. A recording of the introduction will also be provided there if appropriate. The main goal of this “<strong>Limelight</strong>” program is to help our plugin developers to get the necessary information at an early stage, so they can prepare/migrate their plugin to the latest version to make sure everything works as good as they expected, and release it as soon as Maya new release comes out. So, if you are interested, please visit the Maya beta forum <a href="https://beta.autodesk.com/project/forum/thread.html?cap=037743FD817049F18D3A9E014E771FD6&amp;forid=%7bF93EE204-9670-4C0E-AE43-C67B5008E28F%7d&amp;topid=%7bB36E2B16-2534-48A1-AC0B-0E3A1488533F%7d">here </a>to check the details.</p>  <p>Now, let’s take a look at Maya 2016.5 SDK updates in brief.</p>  <p>First of all, the good news is that we did not upgrade the build environment between Maya 2016 and Maya 2016.5. It is essentially the same as Maya 2016. For example, the Windows platform which I use most of time still uses Visual Studio 2012 update 4, and that means no extra effort needed. </p>  <p>The rendering feature contains most of the improvements of this release. But this time, we do not add any big SDK features, instead, the improvements cover areas including Selection, Drawing, Post effects enhancements, Shaders, Geometry, Textures, Render Override, Tools and Context, Profiling, and Performance. We also have provided many samples to demonstrate how to use these new improvement. Please refer to <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_653104AC_D0E8_490F_AF00_71DEB76139A4_htm">here </a>for the details. </p>  <p>We also made many improvements for Animation feature, as you know, last year, Maya 2016 introduced the evaluation manager to support multithreaded evaluation, and provided the support of GPU override to deformers by MPxGPUDeformer. We continue improving the SDK features in some of these APIs within Maya 2016.5. If you are working on this area, please also read the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_653104AC_D0E8_490F_AF00_71DEB76139A4_htm">doc </a>to make sure you are on the right path.&#160; </p>  <p>There are also some improvements on Modeling, Python 2.0, UI, etc. I won’t list all of them here, but I do suggest you to go through the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_653104AC_D0E8_490F_AF00_71DEB76139A4_htm">doc</a> before you start your work on Maya 2016.5, it’s definitely worth reviewing.</p>  <p>Our engineering team is working hard on the next Maya release, and you will see it come out later this year.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Lufgt Huron
EMAIL: 
IP: 216.84.239.66
URL: http://profile.typepad.com/6p01b7c83f2295970b
DATE: 04/19/2016 03:12:56 PM
Do you have a link to the new Maya 2016.5 Devki?  I can't find it in the app store.
-----
COMMENT:
AUTHOR: Moritz Strickhausen
EMAIL: thewhiteambit@hotmail.com
IP: 91.65.251.174
URL: http://www.vr-plugin.com
DATE: 05/14/2016 12:31:52 PM
It seems it has renewed the Effects11 library (d3dx11effect.h changed in devkit includes), I guess it uses a later version like this one on GitHub
https://fx11.codeplex.com

Can you give some informations about the exact Effects11 release used, and if the DirectX was used from the old DirectX-SDK or from a current Windows Kit?

There seem to be some behavior changed with Maya 2016 Extension 2 - everything was still working. Maybe I better have to precompile the Effects - but I guess Maya also compiles the Effects at runtime for its own, because in an environment like Maya this makes perfectly sense.
-----
COMMENT:
AUTHOR: Moritz Strickhausen
EMAIL: thewhiteambit@hotmail.com
IP: 91.65.251.174
URL: http://www.vr-plugin.com
DATE: 05/14/2016 12:49:27 PM
It would be great to have this article updated for Maya 2016 Extension 2:
http://around-the-corner.typepad.com/adn/2015/04/maya-compiler-versions-update.html
-----
COMMENT:
AUTHOR: Zhong
EMAIL: zhong.wu@autodesk.com
IP: 116.192.12.162
URL: 
DATE: 05/14/2016 05:35:58 PM
Actually, the build environment of Maya 2016 Extension 2 is very similar as the version of Maya 2016. But yes, I will post a detail update for Maya 2016 Extension 2 to make it clear as you suggested. Thanks. 
-----
COMMENT:
AUTHOR: Zhong Wu
EMAIL: zhong.wu@autodesk.com
IP: 116.192.12.162
URL: 
DATE: 05/14/2016 06:06:16 PM
Hello Lufgt, you can always find the Maya devkit on our Maya developer center(www.autodesk.com/developmaya) or Autodesk app store(https://apps.autodesk.com). The link for Maya 2016.5 devkit is at https://apps.autodesk.com/MAYA/en/Detail/Index?id=5595681162321676385&appLang=en&os=Mac .
-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Python Recursion Limit
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: python-recursion-limit
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/04/python-recursion-limit.html 
DATE: 04/13/2016 03:32:33 AM
-----
BODY:
<p><span style="font-size: 10pt; font-family: Verdana, sans-serif;">While executing third party plugins or your own plugins which is written in python, have you ever faced the “maximum recursion depth exceeded” error? Python lacks the tail recursion optimizations common in functional languages like LISP. </span></p>
<p><span style="font-size: 8.0pt; font-family: &#39;Verdana&#39;,&#39;sans-serif&#39;;"> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8338a29970b-pi" style="display: inline;"><img alt="Recur-limit" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c8338a29970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c8338a29970b-800wi" title="Recur-limit" /></a><br /></span></p>
<p><span style="font-size: 10pt; font-family: Verdana, sans-serif;">Let’s say, you want to add the specified node to the node array in FBX using recursive function, we can use the below approach to travel the whole scene. However, if your scene contains more than 1000 nodes, you will get the recursion limit issue(maximum recursion depth exceeded). .</span></p>
<pre class="brush: cpp; toolbar: false;"># Add the specified node to the node array. Also, add recursively
# all the parent node of the specified node to the array.

def AddNodeRecursively(pNodeArray, pNode):
    if pNode:
        AddNodeRecursively(pNodeArray, pNode.GetParent())
        found = False 
        for node in pNodeArray:
            if node.GetName() == pNode.GetName():
                found = True
        if not found:
            # Node not in the list, add it
            pNodeArray += [pNode]
</pre>
<p>So, you have to use sys.setrecursionlimit() method to fix this issue in python.</p>
<pre class="brush: cpp; toolbar: false;"># Add the specified node to the node array. Also, add recursively
# all the parent node of the specified node to the array.

import sys
sys.setrecursionlimit(5000)

def AddNodeRecursively(pNodeArray, pNode):
    if pNode:
        AddNodeRecursively(pNodeArray, pNode.GetParent())
        found = False 
        for node in pNodeArray:
            if node.GetName() == pNode.GetName():
                found = True
        if not found:
            # Node not in the list, add it
            pNodeArray += [pNode]
</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: XGenRenderAPI: How to use?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: xgenrenderapi-how-to-use
CATEGORY: Animation
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/04/xgenrenderapi-how-to-use.html 
DATE: 04/13/2016 02:31:48 AM
-----
BODY:
<p>Maya is using procedurals for rendering translators. One of the reason of using procedurals is because the translators of some renderers are not extensible. For example, to keep modules independent, Mentalray’s <span style="color: #0060bf;">Mayatomr.mll</span> and XGen’s<span style="color: #0060bf;"> libAdskXGen.dll</span> are not linked together. This means that the code using <span style="color: #0060bf;">XGenRenderAPI</span> doesn’t require a procedural. If third party renderer doesn’t support procedural, you can directly use <span style="color: #0060bf;">XGenRenderAPI</span> in the translator.</p>
<p>To do this, you can call&#0160;<span style="color: #0060bf;">XGenRenderAPI::PatchRenderer::init()</span> to initialize XGen primitive generation, and call <span style="color: #0060bf;">FaceRenderer::render()</span> to generate XGen hairs. You will also need to implement <span style="color: #0060bf;">ProceduralCallbacks::flush()</span> to collect XGen bplines and convert them to the renderer’s curve representation.</p>
<p>Here is the XGen RenderMan Documentation about arguments. In this documentation, we have clearly mentioned the list of arguments that can be used for the procedural, along with descriptions:</p>
<p><a href="https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2016/ENU/Maya/files/GUID-3359F371-EAC1-4E56-BF7A-A544202CB41D-htm.html">https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2016/ENU/Maya/files/GUID-3359F371-EAC1-4E56-BF7A-A544202CB41D-htm.html</a></p>
<p>The “-file” and “-geom” flags can be set to non-existence files. The API checks for the flags, but it will not actually load the files if the collection/description already exist in the scene.</p>
<p>You can enable debug info in the Maya GUI in the XGen Panel, Click Log -&gt; Debug Level -&gt; 5(high). The logs can be found in the window below titled “Log”(drag to expand the panel).</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Maya to be included in One LISP campaign
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: maya-to-be-included-in-one-lisp-campaign
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/04/maya-to-be-included-in-one-lisp-campaign.html 
DATE: 04/01/2016 05:09:47 AM
-----
BODY:
<p>We are moving towards the cloud nowadays. I've heard some news from 3ds Max guys and they are going to add JavaScript support in the near future. It is wonderful for cloud products like A360 Cloud rendering services in 3ds Max. For the desktop products, we have some a similar movement in Maya.</p>  <p>There are lots of programming languages for Autodesk developers today, like MAXScript, MEL, JavaScript, Python, C++, etc. But above all, AutoLISP should be most important, it is introduced at very beginning and thrives in the AutoCAD product line.</p>  <p>Today, to make it easier to develop plug-ins for our different products, we decide to launch a One LISP campaign to make AutoLISP API available across our whole production line.</p>  <p>The first product going to add LISP support is Maya and it is coming in our next major release. Let's take a sneak preview into it.</p>  <pre>(ns MayaLispPlugin
    (:require [clojure.core])   
    (:gen-class 
        :name MayaLispPlugin.helloWorldCmd
        :extends Autodesk.Maya.OpenMaya.MPxCommand
        :implements [Autodesk.Maya.OpenMaya.IMPxCommand]        
        :main false             
        )
    )

(defn -doIt [this args] 
    (Autodesk.Maya.OpenMaya.MGlobal/displayInfo &quot;Hello World!\n&quot;))</pre>

<p>It is a helloWorldCmd sample in LISP:</p>

<p><img alt="Brief" src="https://github.com/iamsleepy/MayaClojure/raw/master/img/helloWorld.png" /></p>

<p>Feel excited about the new toy? Don't forget to check about the Javascript story on the <a href="http://getcoreinterface.typepad.com/">3ds Max SDK blog!</a>.</p>

<p>For more details, please check out our press release <a href="https://en.wikipedia.org/wiki/April_Fools%27_Day">Autodesk launches One LISP campaign</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Create shader fragments as input for stock shader and other shaders
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: create-shader-fragments-as-input-for-stock-shader-and-other-shaders
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Shader

UNIQUE URL: https://around-the-corner.typepad.com/adn/2016/03/create-shader-fragments-as-input-for-stock-shader-and-other-shaders.html 
DATE: 03/15/2016 06:50:05 PM
-----
BODY:
<style type="text/css" media="screen">

    pre{
        font-size:12px;
	font-family:consolas, courier-new, monospace;
    }</style>  <p>The shader fragment feature was introduced into Maya a few years ago and it is very useful for creating and extending shader features of Maya. Shader fragments can be used for creating input or output for existing hardware shaders. I am going explain how it works with two samples in our devkit.</p>  <p>The first sample is VP2BlinnShader and it uses blinn stock shader as hardware shader. Another sample is fileTexture and it uses shader fragment to implement a fileTexture node.</p>  <p>Our goal is to create a VP2BlinnTextureShader that accepts an image as input for the blinn stock shader.</p>  <p><img alt="Brief" src="https://github.com/iamsleepy/Vp2ShaderFragment/raw/master/image/ShaderBrief.png" /></p>  <p>We can use MShaderInstance::addInputFragment and MShaderInstnace::addOutputFragment to add an input or output shader fragment.</p>  <p>First, we need to get parameters of blinn stock shader to find the the parameter we need. We can use MShaderInstance::parameterList and MShaderInstance::parameterType to get parameters and their types. To add a texture for blinn stock shader, diffuseColor is the one we need. It is float4. So, we are going to add our fragment shader as input of diffuseColor.</p>  <p>Then, we are going to create a fragment shader. We can reuse the shader fragment in the fileTexture</p>  <pre>void initializeFragmentShaders()
{
    static const MString sFragmentName(&quot;fileTexturePluginFragment&quot;);
    static const char* sFragmentBody =
        &quot;&lt;fragment uiName=\&quot;fileTexturePluginFragment\&quot; name=\&quot;fileTexturePluginFragment\&quot; type=\&quot;plumbing\&quot; class=\&quot;ShadeFragment\&quot; version=\&quot;1.0\&quot;&gt;&quot;
        &quot;   &lt;description&gt;&lt;![CDATA[Simple file texture fragment]]&gt;&lt;/description&gt;&quot;
        &quot;   &lt;properties&gt;&quot;
        &quot;       &lt;float2 name=\&quot;uvCoord\&quot; semantic=\&quot;mayaUvCoordSemantic\&quot; flags=\&quot;varyingInputParam\&quot; /&gt;&quot;
        &quot;       &lt;texture2 name=\&quot;map\&quot; /&gt;&quot;
        &quot;       &lt;sampler name=\&quot;textureSampler\&quot; /&gt;&quot;
        &quot;   &lt;/properties&gt;&quot;
        &quot;   &lt;values&gt;&quot;
        &quot;   &lt;/values&gt;&quot;
        &quot;   &lt;outputs&gt;&quot;
        &quot;       &lt;float4 name=\&quot;output\&quot; /&gt;&quot;
        &quot;   &lt;/outputs&gt;&quot;
        &quot;   &lt;implementation&gt;&quot;
        &quot;   &lt;implementation render=\&quot;OGSRenderer\&quot; language=\&quot;Cg\&quot; lang_version=\&quot;2.100000\&quot;&gt;&quot;
        &quot;       &lt;function_name val=\&quot;fileTexturePluginFragment\&quot; /&gt;&quot;
        &quot;       &lt;source&gt;&lt;![CDATA[&quot;
        &quot;float4 fileTexturePluginFragment(float2 uv, texture2D map, sampler2D mapSampler) \n&quot;
        &quot;{ \n&quot;
        &quot;   uv -= floor(uv); \n&quot;
        &quot;   uv.y = 1.0f - uv.y; \n&quot;
        &quot;   float4 color = tex2D(mapSampler, uv); \n&quot;
        &quot;   return color.rgba; \n&quot;
        &quot;} \n]]&gt;&quot;
        &quot;       &lt;/source&gt;&quot;
        &quot;   &lt;/implementation&gt;&quot;
        &quot;   &lt;implementation render=\&quot;OGSRenderer\&quot; language=\&quot;HLSL\&quot; lang_version=\&quot;11.000000\&quot;&gt;&quot;
        &quot;       &lt;function_name val=\&quot;fileTexturePluginFragment\&quot; /&gt;&quot;
        &quot;       &lt;source&gt;&lt;![CDATA[&quot;
        &quot;float4 fileTexturePluginFragment(float2 uv, Texture2D map, sampler mapSampler) \n&quot;
        &quot;{ \n&quot;
        &quot;   uv -= floor(uv); \n&quot;
        &quot;   uv.y = 1.0f - uv.y; \n&quot;
        &quot;   float4 color = map.Sample(mapSampler, uv); \n&quot;
        &quot;   return color.rgba; \n&quot;
        &quot;} \n]]&gt;&quot;
        &quot;       &lt;/source&gt;&quot;
        &quot;   &lt;/implementation&gt;&quot;
        &quot;   &lt;implementation render=\&quot;OGSRenderer\&quot; language=\&quot;GLSL\&quot; lang_version=\&quot;3.0\&quot;&gt;&quot;
        &quot;       &lt;function_name val=\&quot;fileTexturePluginFragment\&quot; /&gt;&quot;
        &quot;       &lt;source&gt;&lt;![CDATA[&quot;
        &quot;float4 fileTexturePluginFragment(vec2 uv, sampler2D mapSampler) \n&quot;
        &quot;{ \n&quot;
        &quot;   uv -= floor(uv); \n&quot;
        &quot;   uv.y = 1.0f - uv.y; \n&quot;
        &quot;   vec4 color = texture(mapSampler, uv); \n&quot;
        &quot;   return color.rgba; \n&quot;
        &quot;} \n]]&gt;&quot;
        &quot;       &lt;/source&gt;&quot;
        &quot;   &lt;/implementation&gt;&quot;
        &quot;   &lt;/implementation&gt;&quot;
        &quot;&lt;/fragment&gt;&quot;;
    // Register fragments with the manager if needed
    //
    MHWRender::MRenderer* theRenderer = MHWRender::MRenderer::theRenderer();
    if (theRenderer)
    {
        MHWRender::MFragmentManager* fragmentMgr =
            theRenderer-&gt;getFragmentManager();
        if (fragmentMgr)
        {
            // Add fragments if needed
            bool fragAdded = fragmentMgr-&gt;hasFragment(sFragmentName);                   
            if (!fragAdded)
            {
                fragAdded = (sFragmentName == fragmentMgr-&gt;addShadeFragmentFromBuffer(sFragmentBody, false));
            }               
            if (fragAdded)
            {
                fFragmentName = sFragmentName;
                TRACE_API_CALLS(&quot;Added Fragment&quot;);
            }
        }
    }
    }</pre>

<p>The first two lines are creating a shader fragment called fileTexturePluginFragment, and defining the body of the fragment. In the fragment body, we define it as a ShadeFragment with three input parameters: uvCoords of float2, texture of map and textureSampler of sampler. diffuseColor is float4 parameter, so we define the output of our fragment as float4.</p>

<pre>&quot;&lt;fragment uiName=\&quot;fileTexturePluginFragment\&quot; name=\&quot;fileTexturePluginFragment\&quot; type=\&quot;plumbing\&quot; class=\&quot;ShadeFragment\&quot; version=\&quot;1.0\&quot;&gt;&quot;
            &quot;   &lt;description&gt;&lt;![CDATA[Simple file texture fragment]]&gt;&lt;/description&gt;&quot;
            &quot;   &lt;properties&gt;&quot;
            &quot;       &lt;float2 name=\&quot;uvCoord\&quot; semantic=\&quot;mayaUvCoordSemantic\&quot; flags=\&quot;varyingInputParam\&quot; /&gt;&quot;
            &quot;       &lt;texture2 name=\&quot;map\&quot; /&gt;&quot;
            &quot;       &lt;sampler name=\&quot;textureSampler\&quot; /&gt;&quot;
            &quot;   &lt;/properties&gt;&quot;
            &quot;   &lt;values&gt;&quot;
            &quot;   &lt;/values&gt;&quot;
            &quot;   &lt;outputs&gt;&quot;
            &quot;       &lt;float4 name=\&quot;output\&quot; /&gt;&quot;
            &quot;   &lt;/outputs&gt;&quot;</pre>

<p>For uvCoords, we can let Maya provide the system parameter as the input value. We can define it as mayaUvCoordSemantic and varyingInputParam. For more details about Maya semantics, please check &quot;<em><strong>Varying Parameters and System Parameters</strong></em>&quot; section in this <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_585F5656_4069_4D82_B9BB_3D1AB2D0DFE6_htm">document</a>.</p>

<p>Then we are going to implement the shader using a different API. We can provide the same shader in different shader languages like GLSL, HLSL, Cg.</p>

<pre>&quot;   &lt;implementation render=\&quot;OGSRenderer\&quot; language=\&quot;HLSL\&quot; lang_version=\&quot;11.000000\&quot;&gt;&quot;
        &quot;       &lt;function_name val=\&quot;fileTexturePluginFragment\&quot; /&gt;&quot;
        &quot;       &lt;source&gt;&lt;![CDATA[&quot;
        &quot;float4 fileTexturePluginFragment(float2 uv, Texture2D map, sampler mapSampler) \n&quot;
        &quot;{ \n&quot;
        &quot;   uv -= floor(uv); \n&quot;
        &quot;   uv.y = 1.0f - uv.y; \n&quot;
        &quot;   float4 color = map.Sample(mapSampler, uv); \n&quot;
        &quot;   return color.rgba; \n&quot;
        &quot;} \n]]&gt;&quot;
        &quot;       &lt;/source&gt;&quot;
        &quot;   &lt;/implementation&gt;&quot;</pre>

<p>For example, the code above implements a dx shader for Maya default Renderer(OGSRenderer). The shader source code is in the source tag. It is a texture pass through.</p>

<p>Now, we need to register our shader fragment.</p>

<pre>// Register fragments with the manager if needed            
MHWRender::MRenderer* theRenderer = MHWRender::MRenderer::theRenderer();
if (theRenderer)
{
    MHWRender::MFragmentManager* fragmentMgr =
        theRenderer-&gt;getFragmentManager();
    if (fragmentMgr)
    {
        // Add fragments if needed
        bool fragAdded = fragmentMgr-&gt;hasFragment(sFragmentName);                   
        if (!fragAdded)
        {
            fragAdded = (sFragmentName == fragmentMgr-&gt;addShadeFragmentFromBuffer(sFragmentBody, false));
        }               
        if (fragAdded)
        {
            fFragmentName = sFragmentName;
            TRACE_API_CALLS(&quot;Added Fragment&quot;);
        }
    }
}</pre>

<p>We also need to create custom mapping for shader fragment parameters.</p>

<pre>void createCustomMappings()
{
    // Set up some mappings for the parameters on the file texture fragment,
    // there is no correspondence to attributes on the node for the texture
    // parameters.
    MHWRender::MAttributeParameterMapping mapMapping(
        &quot;map&quot;, &quot;&quot;, false, true);
    mappings.append(mapMapping);

    MHWRender::MAttributeParameterMapping textureSamplerMapping(
        &quot;textureSampler&quot;, &quot;&quot;, false, true);
    mappings.append(textureSamplerMapping);
}</pre>

<p>Next, we can make our shader fragment as input parameter for our stock shader in the MPxShaderOverride::createShaderInstance.</p>

<pre>...
// Create texture fragment shader
initializeFragmentShaders();        
createCustomMappings();

if (!fColorShaderInstance)
{
    // We only need to add texture for color shader instance used by Texture enabled viewport.
    fColorShaderInstance = shaderMgr-&gt;getStockShader( MHWRender::MShaderManager::k3dBlinnShader );  
                // Make our shader fragment as input for diffuseColor of stock shader       
    fColorShaderInstance-&gt;addInputFragment(fFragmentName, MString(&quot;output&quot;), MString(&quot;diffuseColor&quot;));
}</pre>

<p>Now, we have successfully added our shader fragment as input and we need to update it properly. Maya will call MPxShaderOverride::updateDevice during DG evaluation. So we need to create an update function and call it during the color shader mode.</p>

<pre>if (fColorShaderInstance)
{
    // Update shader to mark it as drawing with transparency or not.
    fColorShaderInstance-&gt;setIsTransparent( isTransparent() );              
    fColorShaderInstance-&gt;setParameter(&quot;specularColor&quot;, &amp;fSpecular[0] );

    // Update texture shader
    updateTextureShaderFragment();
}</pre>

<p>updateTextureShaderFragment is almost the same as the fileTexture sample, except that we are going to generate a default texture when the file texture is not available.</p>

<pre>...
if (textureManager)
{
    TRACE_API_CALLS(&quot;Accquire file texture&quot;);
    TRACE_API_CALLS(fFileTexturePath);
    MHWRender::MTexture* texture =
        textureManager-&gt;acquireTexture(fFileTexturePath, name);
    if (texture)
    {                           
        assignTexture(texture, textureManager);

        // release our reference now that it is set on the shader
        textureManager-&gt;releaseTexture(texture);
    }
    else
    {

        MImage image;                           
        for (int i = 0; i &lt; 4; ++i)
        {
            fDiffuseByte[i] = fDiffuse[i] * 255;
        }
        image.setPixels(fDiffuseByte, 1, 1);

        if (!fDefaultTexture)
        {
            const MString vp2BlinnShaderDummyTextureName = MString(&quot;&quot;);
            MHWRender::MTextureDescription desc;
            desc.setToDefault2DTexture();
            desc.fHeight = 1;
            desc.fWidth = 1;
            desc.fFormat = MHWRender::kR8G8B8A8_UNORM;
            fDefaultTexture =
                textureManager-&gt;acquireTexture(vp2BlinnShaderDummyTextureName, desc, fDiffuseByte, false);
        }
        else
        {
            MStatus status = fDefaultTexture-&gt;update(image, false);
            cerr &lt;&lt; status &lt;&lt; endl;
        }
        if (fDefaultTexture)
        {
            cerr &lt;&lt; fDiffuse[0] &lt;&lt; &quot; &quot; &lt;&lt; fDiffuse[1] &lt;&lt; &quot; &quot; &lt;&lt; fDiffuse[2] &lt;&lt; &quot; &quot; &lt;&lt; fDiffuse[3] &lt;&lt; endl;
            // It is cached by OGS, update to make sure texture has been updated.                               
            TRACE_API_CALLS(&quot;Accquired default texture&quot;);
            assignTexture(fDefaultTexture, textureManager);
        }                           
    }...



// Update texture
void assignTexture(MHWRender::MTexture* texture, MHWRender::MTextureManager *textureManager)
{
    MHWRender::MTextureAssignment textureAssignment;
    textureAssignment.texture = texture;

    TRACE_API_CALLS(&quot;Update texture parameter&quot;);
    fFragmentTextureShader-&gt;setParameter(fResolvedMapName, textureAssignment);          
}</pre>

<p>Most of the work has been done now and it will run in Maya. However, the texture is will likely not display properly, so there is one more step.</p>

<p>Remember the uvCoord semantic we defined in our shader fragment earlier? Although we have defined the semantic, we still need to ask Maya to provide these system parameters before it can be used. We can call MPxShaderOverride::addGeometryRequirement or MPxShaderOverride::addGeometryRequirements to tell Maya to provide these parameters. We should call them during the initialization.</p>

<pre>MHWRender::MVertexBufferDescriptor positionDesc(
    empty,
    MHWRender::MGeometry::kPosition,
    MHWRender::MGeometry::kFloat,
    3);

MHWRender::MVertexBufferDescriptor normalDesc(
    empty,
    MHWRender::MGeometry::kNormal,
    MHWRender::MGeometry::kFloat,
    3);
MHWRender::MVertexBufferDescriptor textureDesc(
    empty,
    MHWRender::MGeometry::kTexture,
    MHWRender::MGeometry::kFloat,
    2);
addGeometryRequirement(positionDesc);
addGeometryRequirement(normalDesc);
addGeometryRequirement(textureDesc);</pre>

<p>The vp2FileTextureFragmentShader is fully working now. Enjoy! :)</p>

<p>The source code is available on the github of ADN, please visit (<a href="https://github.com/ADN-DevTech/MAYA-Vp2ShaderFragment">source code link</a>) to get it.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Use python to update attributes in XGen
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: use-python-to-update-attributes-in-xgen
CATEGORY: Cheng Xi Li
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/12/use-python-to-update-attributes-in-xgen.html 
DATE: 12/30/2015 05:48:51 PM
-----
BODY:
<p>Last week, somebody asked me how to update attributes in XGen. I found that there isn’t many XGen Python API examples.</p>
<p>Some of XGen’ source code is included in your Maya folder &lt;maya&gt;\plug-ins\XGen\scripts\xgenm. It is always a good idea to take a look there for reference.</p>
<p>The XGen Python module is called xgenm. We’ll use the functions inside this package to update the XGen descriptors.</p>
<p>If you read the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=GUID-33ECC43B-5CF6-4BE1-8EAE-8C6C0D698020">document</a> in our website, you can find xgenm.xgGlobal is mentioned. It can be used to check whether XGen is present and get the singleton reference of the description editor: xgenm.xgGlobal.DescriptionEditor.</p>
<p>There is a naming convention between XGen and Python API. The palettes in the Python refers to the collections of XGen.</p>
<p>The biggest challenge here is there is no detailed documentation for the user to get the attribute name in XGen. For example, for the Spline Primitives, attribute “Control Using” which determines using attribute or guides to create primitives in XGen becomes an enumerate attribute “iMethod” and accepts 0(attribute) and 1(guides).</p>
<p>I wrote a small piece of script to print active attributes and their values in a XGen descriptor. So we can find the attribute name we want by comparing the values.</p>
<blockquote>
<p>import xgenm as xg <br />import xgenm.xgGlobal as xgg<br />import xgenm.XgExternalAPI as xge</p>
<p><br /> <br />if xgg.Maya: <br /> <br />&#0160;&#0160;&#0160; #palette is collection, use palettes to get collections first. <br />&#0160;&#0160;&#0160; palettes = xg.palettes() <br />&#0160;&#0160;&#0160; for palette in palettes: <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; print &quot;Collection:&quot; + palette <br /> <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #Use descriptions to get description of each collection <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; descriptions = xg.descriptions(palette) <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; for description in descriptions: <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; print &quot; Description:&quot; + description <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; objects = xg.objects(palette, description, True) <br /> <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #Get active objects,e.g. SplinePrimtives <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; for object in objects: <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; print &quot; Object:&quot; + object <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; attrs = xg.allAttrs(palette, description, object) <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; for attr in attrs: <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; print &quot; Attribute:&quot; + attr + &quot;, Value:&quot; + xg.getAttr(attr, palette, description, object) </p>
</blockquote>
<p>To modify an attribute, we need to provide palette(collection) name, descriptor name, object name and the attribute name in string.</p>
<p>For example, if we want to change the “Control Using” attribute of Spline Primitive object, we should write like this.</p>
<blockquote>
<p><br />#iMethod = Control Using, 0:Attribute, 1:Guides <br />xg.setAttr(&quot;iMethod&quot;,xge.prepForAttribute(&quot;1&quot;),&quot;collection&quot;, &quot;description&quot;, &quot;SplinePrimitive&quot;) </p>
</blockquote>
<p>You&#39;ll need to call xgenm.XgExternalAPI.prepFroAttribute to escape &quot;\\n&quot;, &#39;\n&#39;, &quot;\\t&quot; and &#39;\t&#39; to &quot;\\\\n&quot;, &quot;\\n&quot;, &quot;\\\\t&quot; and &quot;\\t&quot; for file path and expressions.</p>
<p>However, you cannot change object by using this function. For example, if I am using to switch from Card Primitive to Spline Primitive, we should use the setActive function.</p>
<blockquote>
<p><br />#if you don&#39;t want to override the previewing in viewport, please use False by default <br />xg.setActive(&quot;collection&quot;, &quot;description&quot;, &quot;SplinePrimitive&quot;, False) </p>
</blockquote>
<p>If you tried to run the code above, you may find that nothing happened in the description editor. The XGen core and the UI are separated; but renderman for example will use the updated values. To make things more clear. We still need to update the description editor to see the update in the UI.</p>
<blockquote>
<p><br />#Get the description editor first. <br />de = xgg.DescriptionEditor <br /> <br />#Do a full UI refresh <br />de.refresh(&quot;Full&quot;) </p>
</blockquote>
<p>It will refresh the description editor with the latest updates.</p>
<p>This is it :)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Oliver Kling
EMAIL: o.kling@morroimages.com
IP: 212.204.55.90
URL: http://www.morroimages.com
DATE: 01/08/2016 03:03:25 AM
Thanks, for that information!
At my studio we want to get deeper into xGen python API, to create custom UI's for xGen. Unfortunately the Maya documentation is pretty thin on that. Do you know or have any further resourches, documentations on the xGen Python API?

Best, 
Oli
-----
COMMENT:
AUTHOR: Chengxi Li
EMAIL: cheng.xi.li@autodesk.com
IP: 103.23.161.18
URL: 
DATE: 01/13/2016 12:56:29 AM
Hi Oliver,

Unfortunately, there aren't many documents more than the ones on our website. But the XGen UI is open source, you can read and try to modify it by yourself. It's in the xgen/scripts/xgenm/ui folder. 

If you had problem related to xgen Python API, you can post them on our forum or send us questions through ADN support portal if you are an ADN member.

Yours,
Li
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: What should I do when elementByPhysicalIndex failed?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: what-should-i-do-when-elementbyphysicalindex-failed
CATEGORY: C++
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/12/what-should-i-do-when-elementbyphysicalindex-failed.html 
DATE: 12/23/2015 07:14:32 PM
-----
BODY:
<p>&#0160;&#0160;&#0160;&#0160; The other day, I encountered a problem when I tried to write a sample for Maya 2016.</p>
<p>&#0160;&#0160;&#0160;&#0160; When I was trying to get an element in an array using a physical index, it worked fine most of the time. But it failed, when I was trying to get the elements inside a CV array. This time it returned an incorrect number of elements and thrown an error when I was accessing the array. It turned out that physical index is safe to use for user created nodes but for Maya internal objects like CV, we should use logical index instead:</p>
<blockquote>&#0160;&#0160; indices = OpenMaya.MIntArray() <br />&#0160;&#0160; plug.getExistingArrayAttributeIndices(indices) <br />&#0160;&#0160; for plugArrayIndex in indices: <br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; arrayPlug = plug.elementByLogicalIndex(plugArrayIndex)</blockquote>
<p>&#0160;&#0160;&#0160;&#0160; The code above is using the logical index like we do in MEL. It is safer than physical index and can be used for all kinds of Maya internal array objects :)</p>
<p>&#0160;&#0160;&#0160;&#0160; Do you find any traps in your Maya programming? Please share with us!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk Memento now available for Mac
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: autodesk-memento-now-available-for-mac
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Mac
CATEGORY: Modeling
CATEGORY: Tools

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/12/autodesk-memento-now-available-for-mac.html 
DATE: 12/19/2015 12:25:31 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d18651dd970c-pi" style="display: inline;"><img alt="Corail" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d18651dd970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d18651dd970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Corail" /></a></p>
<p>My favourite mesh generation and manipulation tool, Autodesk Memento, is now available (in Beta) for the Mac. I’ve been part of the Alpha programme for the OS X version for some time: admittedly not very actively, but I did install a number of builds and report an error or two. I’m very happy to see the Mac version is now joining its Windows sibling in Beta. Both versions can be downloaded and installed from <a href="http://memento.autodesk.com/try-memento" target="_blank">this page</a>.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08a10401970d-pi" style="display: inline;"><img alt="Memento" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb08a10401970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08a10401970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Memento" /></a></p>
<p><a href="https://360.autodesk.com/Public/Details?hash=e005bb79f66448958069ebd32f53a6dc" target="_blank">The model</a> shown at the top of the page is of coral – I downloaded it from the bottom of the Memento download page – and others are available via <a href="https://memento.autodesk.com/projects/popular" target="_blank">the Memento gallery</a>. Be sure to check the gallery out (and help populate it with interesting meshes you capture).</p>
<p>If you’re interested in the use of Memento for capturing coral, I do recommend taking a look at <a href="http://www.wired.com/2015/05/3d-modeled-coral/" target="_blank">this Wired article</a> about <a href="http://thehydro.us/" target="_blank">The Hydrous</a>, a project that’s also been featured <a href="http://lineshapespace.com/reality-computing/" target="_blank">on Line//Shape//Space</a>. I also recommend watching this video of The Hydrous founder, Sly Lee, who talked about the project’s use of reality capture technology at a recent <a href="http://www.autodesk.com/gallery/design-nights" target="_blank">Design Night</a> at the <a href="http://www.autodesk.com/gallery/overview" target="_blank">Autodesk Gallery</a> in San Francisco:</p>
<p style="text-align: center;">&#0160;</p>
<p><a class="asset-img-link" href="https://www.youtube.com/embed/11mKRkpP_kg?rel=0&amp;amp;showinfo=0" style="display: inline;"><img alt="Memento-video" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d1865233970c image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1865233970c-800wi" title="Memento-video" /></a><br />&#0160;</p>
<p>A colleague from the <a href="https://en.wikipedia.org/wiki/Neuch%C3%A2tel" target="_blank">Neuchâtel</a> office, Cecilia Dobner, features in the video at the 15m30s mark. Cecilia’s an avid – and highly experienced – diver who volunteered to work with The Hydrous at a recent expedition in Bali. It’s been really interesting discussing the challenges around 3D construction of living, underwater organisms with her.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: How to make your plugin node as thread-safe for parallel DG Evaluation
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-make-your-plugin-node-as-thread-safe-for-parallel-dg-evaluation
CATEGORY: C++
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plug-in
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/12/how-to-make-your-plugin-node-as-thread-safe-for-parallel-dg-evaluation.html 
DATE: 12/13/2015 10:25:02 PM
-----
BODY:
<p><strong>Take this example:</strong><br /> Let’s take very simple DG setup. A locator whose transform is connected to two compute nodes (spliceMayaNode1 and spliceMayaNode2), each of which computes something heavy. The results are then added together in a third node (spliceMayaNode3) from the plugin, and that result drives a locator.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb089e4807970d-pi" style="display: inline;"><img alt="Node-parallel" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb089e4807970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb089e4807970d-800wi" title="Node-parallel" /></a></p>
<p>The nodes use dynamic attributes so you have to use setDependentsDirty() to declare the outputs that are affected by which inputs. If you comment out the code that adds plugs to the output&#0160;array in setDependentsDirty() the nodes spliceMayaNode1 and spliceMayaNode2 can be called from separate threads; however, spliceMayaNode3 will never be executed, presumably because the EvaluationManager won’t think anything can ever make it dirty. However when the output plugs are appended, the nodes spliceMayaNode1 and spliceMayaNode2 are always evaluated from the same thread.&#0160;</p>
<p>To overcome this issue, you have to make your plugin node as thread-safe for parallel DG Evaluation. You can explicitly use the MEL command <a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-Tech-Docs/Commands/setNodeTypeFlag.html#flagthreadSafe" target="_blank">setNodeTypeFlag</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
parallel evaluation, thread-safe
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Day on Intel buzz workshop
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: day-on-intel-buzz-workshop
CATEGORY: Cheng Xi Li
CATEGORY: Events
CATEGORY: Games

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/11/day-on-intel-buzz-workshop.html 
DATE: 11/11/2015 06:25:52 PM
-----
BODY:
<p>&#0160;</p>
<p>On October&#0160;28. Zhong and I attended a game workshop hosted by Intel in Shanghai.</p>
<p><img alt="image" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d175222c970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="image" /></p>
<p>The show is mainly for the indie gaming developers and Html5.</p>
<p>First, Intel demonstrated their XDK, which is pretty impressive for cross-platform Html5 development. It is based on Apache Cordova and has an optimized game browser: crosswalk.</p>
<p><img alt="clip_image004" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1752230970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image004" /></p>
<p>The improvement of crosswalk is significant, its performance is closing to the native games. Using Html5 to develop mobile games or apps becomes promising.</p>
<p>Later, Cocos studio presented their solution for the Html5 game development.</p>
<p><img alt="" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1752238970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image006" /></p>
<p>The most interesting part is they have a complete distribution channel. It allows developer publish their game on multiple stores and provides an asset streaming library. In China, since the Google Play is absent, there are hundreds of android app store. This feature could help indie developers in China a lot. They also provided a Html 5 browser called Tizen for mobile web gaming.</p>
<p>The rest shows in the morning is about VR. Unity came to play and shared a lesson about how to create a VR cardboard app in Unity: they used a drone with six camera mounted on it to take the pictures as textures.</p>
<p><img alt="clip_image008" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d175223c970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image008" /></p>
<p><img alt="clip_image010" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7eb48d3970b-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image010" /></p>
<p>In Unity, they had put a stereo camera inside a sphere, where is acting as a skybox. When the player is moving, the camera is still inside the sphere while the sphere is moving and updating the texture. It showed how simple a VR application could be and we could expect that more and more VR apps will be coming in the future.</p>
<p>In the afternoon, Intel showed their 3d camera. Like Kinect, it has a depth inferred camera. It is not as big as Kinect and could be used as a face camera on your laptop or tablet. They demonstrated an app called Facerig using realsense technology.</p>
<p><img alt="clip_image012" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1752252970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image012" /></p>
<p>I saw several webcasters on the twitch is using this app before. It can replace your face with other avatars, like raccoon. Maybe someday, we can see Galaxy guardians playing on twitchJ. Intel also brought their GPU profiler to the meeting and demonstrated it.</p>
<p>After Intel, EasyAR demonstrated their AR engine; it is cross-platform and has better recognition ratio; the result is more consistent, unlike several open libraries, it merely flicks. The most interesting part is once a mark is recognized, you can cover most parts of it without affecting the result. I am very excited with this engine, one more AR library for LMV.</p>
<p>Microsoft promotes their indie project – ID@Xbox again and donated 300+ indie games as prize for the indie developer in the show. The project has included a free unity license and a free Xbox one devkit also. Pretty good start for indie developers.</p>
<p>I think the most interesting topic in the afternoon for me is last one – A 2d artist shared his experience on pixelated drawing.</p>
<p><img alt="clip_image014" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1752256970c-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image014" /></p>
<p>The image above shows how to deal with curves and below is the drawing versus generated image.</p>
<p><img alt="clip_image016" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb088f7a3f970d-pi" style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="clip_image016" /></p>
<p>There are lots of popular indie games today are using such nostalgic style of art, like Miami hotline, Shovel knight, etc. The most interesting part is they are using some of the 3d rendering concept in a 2d game. Like deferred lighting and SSAO. They put height info in the scene and added several lights in it. Result is great: shadow is generated dynamic, day and night is switched beautifully.</p>
<p>It is a good event, I hope Intel could come next year and bring us more interesting topics.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: How to connect Perception Neuron with Maya (Part 2)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: how-to-connect-perception-neuron-with-maya-part-2
CATEGORY: Animation
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Motion Capture
CATEGORY: Plug-in
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/11/how-to-connect-perception-neuron-with-maya-part-2.html 
DATE: 11/09/2015 05:35:33 PM
-----
BODY:
<p>In the last post, I talked about the NeuronDataReader SDK and the general process to use these APIs, now we will talk about how to make a Maya plug-in client to receive and parse the animation data. </p>  <p>With this project, we are going to create a Maya plug-in which will:</p>  <ol>   <li>fetch the animation data from Axis Neuron application to Maya,</li>    <li>create a Neuron specific skeleton, and assign the animation data to the skeleton,</li>    <li>retarget the animation from the skeleton to another characterized model.</li> </ol>  <p>The workflow would be something like:</p>  <ol>   <li>Register the frame data callback to fetch BVH binary stream data of the skeleton. Note that the callback is invoked by a separated thread of NeuronDataReader lib. We will cache the data within the callback.</li>    <li>Create MPxThreadedDeviceNode-derived node to fetch the data from cache, use Maya system lock MSpinLock to avoid data access conflict. Set the animation data to output array of translation and rotation.</li>    <li>Create Neuron specific skeleton, and connect each items in translation and rotation array to the specific neuron joint.</li>    <li>Retarget the animation from the skeleton to another characterized model. </li> </ol>  <p>Let’s check the details on each step.</p>  <p><b>Step 1 -</b> We already mentioned in my previous post how to receive data from the Axis Neuron application using the NeuronDataReader SDK. Here, we need to define the callback first, but remember that the callback should be invoked within a separated working thread, you cannot handle any UI related work within the callback directly. Here we will cache the data of current frame, and our device thread will try to fetch the frame data later. Of course, we need to lock the resource to mutually exclusive access to the shared frame data by 2 different threads, I will talk more about this in step 2. </p>  <p>Here is the some code samples:</p>  <p><b>--- Define the skeleton data structure for every frame:</b></p>  <pre class="brush:cpp;toolbar: false;">struct FrameData{
    int nFrame;
    float data[60][6];
};</pre>

<p><b>--- Declare the current frame data as a static member of NeuronForMayaDevice:</b></p>

<pre class="brush:cpp;toolbar: false;">static FrameData           curFrameData;</pre>

<p><b>--- Declare the callback to receive the frame data:</b></p>

<pre class="brush:cpp;toolbar: false;">static void myFrameDataReceived(void* customedObj, SOCKET_REF sender, BvhDataHeaderEx* header, float* data); </pre>

<p><b>--- Implementation of myFrameDataReceived callback</b></p>

<pre class="brush:cpp;toolbar: false;">void NeuronForMayaDevice::myFrameDataReceived(void* customedObj, SOCKET_REF sender, BvhDataHeaderEx* header, float* data)
{
    if( !bLive )
        return;

    BOOL withDisp = header-&gt;WithDisp;
    BOOL withReference = header-&gt;WithReference;
    UINT32 count = header-&gt;DataCount;

    static int nFrame = 0;
    // add mutex 
    spinLock.lock();
    // push the data for each frame into a queue
    curFrameData.nFrame = nFrame++;
    for(UINT32 i = 0; i &lt; 60; ++i )
        for( UINT32 j = 0; j&lt; 6; j++ )
            curFrameData.data[i][j] = data[i*6+j]; 

    spinLock.unlock();
}</pre>

<p>Besides registering the callbacks, we also added a customized command “<b>NeuronForMayaCmd</b>” to connect or disconnect to the Axis Neuron application with TCP/IP protocol,</p>

<pre class="brush:cpp;toolbar: false;">class NeuronForMayaCmd : public MPxCommand
{
public:
    NeuronForMayaCmd() {  mDeviceName=&quot;&quot;; mStart=false;};
    virtual         ~NeuronForMayaCmd(); 
    MStatus         doIt( const MArgList&amp; args );
    static void*    creator();
    static MSyntax  newSyntax();

private:
	MStatus	    parseArgs( const MArgList&amp; args );
    static SOCKET_REF socketInfo;
    MString         mDeviceName;
    bool            mStart;
};</pre>

<p>Here is the implementation of the customized command “<b>NeuronForMayaCmd</b>”: </p>

<pre class="brush:cpp;toolbar: false;">#define kStartFlag       &quot;-s&quot;
#define kStartFlagLong   &quot;-start&quot;

#define kDeviceNameFlag       &quot;-dn&quot;
#define kDeviceNameFlagLong   &quot;-device name&quot;

SOCKET_REF NeuronForMayaCmd::socketInfo = NULL;

NeuronForMayaCmd::~NeuronForMayaCmd() {}

void* NeuronForMayaCmd::creator()
{
    return new NeuronForMayaCmd();
}

MSyntax
NeuronForMayaCmd::newSyntax()
{
    MSyntax syntax;
    syntax.addFlag(kStartFlag, kStartFlagLong, MSyntax::kBoolean);
    syntax.addFlag(kDeviceNameFlag, kDeviceNameFlagLong, MSyntax::kString );
    return syntax;
}

MStatus
NeuronForMayaCmd::parseArgs( const MArgList&amp; args )
{
    MStatus status = MStatus::kSuccess;
    MArgDatabase argData(syntax(), args);

    if (argData.isFlagSet(kStartFlag))
        status = argData.getFlagArgument(kStartFlag, 0, mStart);

    if( argData.isFlagSet(kDeviceNameFlag))
        status = argData.getFlagArgument(kDeviceNameFlag, 0, mDeviceName );

    return status;

}

MStatus NeuronForMayaCmd::doIt( const MArgList&amp; args )
{
    MStatus status;

    status = parseArgs( args ); 
    if( status != MStatus::kSuccess)
    {
        MGlobal::displayError( &quot;parameters are not correct.&quot; );
        return status;
    }

    MSelectionList sl;
    sl.add( mDeviceName );
    MObject deviceObj;
    status = sl.getDependNode(0, deviceObj );
    if(status != MStatus::kSuccess )
    {
        MGlobal::displayError(&quot;Please create your device first.&quot;);
        return status;
    }
    MFnDependencyNode fnDevice(deviceObj);
    MString ip = fnDevice.findPlug( &quot;inputIp&quot;, &amp;status ).asString();
    int     port = fnDevice.findPlug(&quot;inputPort&quot;, &amp;status).asInt();


    if( mStart ){
        // to register the 3 callback to fetch data from Neuron
        BRRegisterFrameDataCallback(NULL, NeuronForMayaDevice::myFrameDataReceived );
        BRRegisterCommandDataCallback(NULL, NeuronForMayaDevice::myCommandDataReceived );
        BRRegisterSocketStatusCallback (NULL, NeuronForMayaDevice::mySocketStatusChanged );

        socketInfo = BRConnectTo(const_cast<char   *> (ip.asChar()), port);
        if(socketInfo == NULL )
            MGlobal::displayError(&quot;Failed to connect to device.&quot;);
    }
    else
    {
        // stop socket
        BRCloseSocket( socketInfo);
    }
    
    return MStatus::kSuccess;
} </pre>

<p><b>Step 2 -</b> To fetch the animation data, we create a customized device node (NeuronForMayaDevice) that is derived from MPxThreadedDeviceNode. This is the recommended way to receive data from any device, you can get the detail information on how to use this class at <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_class_m_px_threaded_device_node_html"><i>SDK online help</i></a><i><u>.</u></i></p>

<p>Within the “NeuronForMayaDevice” class, we define 2 output array attributes, outputRotations and outputTranslations. Both of them are array of float3 type, containing the rotation &amp; translation information of all the Neuron Skeleton bones for current frame. They will be connected to Neuron skeleton bones to stream animation data. But, we will talk about this later. </p>

<p>Here I need to mention 2 issues: the 1<sup>st</sup> issue is actually a limitation of Maya; to implement “NeuronForMayaDevice”, we need to call <b><i>setRefreshOutputAttributes</i></b><i>()</i> and <b><i>createMemoryPools</i></b><i>()</i> within the node’ postConstructor() function. The <b>setRefreshOutputAttributes</b>() takes an array, but there is a limitation that the array size only can be 1, so you cannot add attributes <b>outputTranslations</b> and <b>outputRotations</b> into the array directly. To workaround this limitation, I added an assistant attribute named <b>outputData</b> and make both <b>outputTranslations</b> &amp; <b>outputRotations</b> be affected by this attribute. <b>outputData</b> will then be added into <b>setRefreshOutputAttributes</b>(), so when the <b>threadHandler</b> actually push data in the memory pool, the device thread will mark the “<b>outputData</b>” attribute dirty for that pool, and because our <b>outputData</b> attribute affects both <b>outputTranslations</b> and <b>outputRotations</b> attributes, Maya will mark them dirty too, and will call compute from the DG thread if someone needs the data.</p>

<p>Another issue is about the multiple threads access to the frame data buffer; as I mentioned in the previous post, the registered callback works in a separated working thread, so you cannot access UI within the callback. We will cache the skeleton data of current frame into a data buffer, and fetch the data buffer from the device thread. Here, we use the Maya system lock <b>MSpinLock</b> to implement the mechanism. If you want to know why and how to use the API, you can check the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_2BEF58D3_6162_4235_A6CE_3D8B0742A0AE_htm">Threading and Maya</a> section of SDK help for the details. </p>

<p>The threaded device node looks like this:</p>

<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb088f9716970d-pi"><img title="clip_image002[4]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image002[4]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1753e17970c-pi" width="743" height="599" /></a></p>

<p><b>--- Declare NeuronForMayaDevice:</b></p>

<pre class="brush:cpp;toolbar: false;">class NeuronForMayaDevice : public MPxThreadedDeviceNode
{
public:
    NeuronForMayaDevice();
    virtual 			~NeuronForMayaDevice();

    virtual void		postConstructor();
    virtual MStatus		compute( const MPlug&amp; plug, MDataBlock&amp; data );
    virtual void		threadHandler();
    virtual void		threadShutdownHandler();

    static void*		creator();
    static MStatus		initialize();

    // 3 callbacks to fetch data from Axis Neuron application
    static void myFrameDataReceived(void* customedObj, SOCKET_REF sender, BvhDataHeaderEx* header, float* data); 
    static void myCommandDataReceived(void* customedObj, SOCKET_REF sender, CommandPack* pack, void* data); 
    static void mySocketStatusChanged(void* customedObj, SOCKET_REF sender, SocketStatus status, char* message); 


public:

    static MObject      inputIp;
    static MObject      inputPort;
    static MObject      inputRecord;
    static MObject      outputTranslate;
    static MObject      outputTranslations;
    static MObject      outputRotations;
    static MSpinLock    spinLock;
static MTypeId      id;

private:
    static FrameData           curFrameData;
    static bool                bRecord;
    static bool                bLive;
};</pre>

<p><b>--- C++ implementation file for NeuronForMayaDevice</b></p>

<pre class="brush:cpp;toolbar: false;">FrameData           NeuronForMayaDevice::curFrameData;
MSpinLock           NeuronForMayaDevice::spinLock;

bool    NeuronForMayaDevice::bLive = false;
bool    NeuronForMayaDevice::bRecord = false;

MTypeId NeuronForMayaDevice::id( 0x00081051 );

MObject NeuronForMayaDevice::inputIp;
MObject NeuronForMayaDevice::inputPort;
MObject NeuronForMayaDevice::inputRecord;

MObject NeuronForMayaDevice::outputTranslate;
MObject NeuronForMayaDevice::outputTranslations;
MObject NeuronForMayaDevice::outputRotations;



NeuronForMayaDevice::NeuronForMayaDevice() 
{}

NeuronForMayaDevice::~NeuronForMayaDevice()
{
    destroyMemoryPools();
}

void NeuronForMayaDevice::postConstructor()
{
    MObjectArray attrArray;
    attrArray.append( NeuronForMayaDevice::outputTranslate );
    setRefreshOutputAttributes( attrArray );

    createMemoryPools( 24, 1, sizeof(FrameData));
}


void NeuronForMayaDevice::threadHandler()
{
    MStatus status;
    setDone( false );
    while ( ! isDone() )
    {
        // Skip processing if we are not live
        if ( ! isLive() )
            continue;

        MCharBuffer buffer;
        status = acquireDataStorage(buffer);
        if ( ! status )
            continue;

        beginThreadLoop();
        {
            FrameData* frameData = reinterpret_cast<framedata   *>(buffer.ptr());

            // add mutex here
            spinLock.lock();
            frameData-&gt;nFrame = curFrameData.nFrame;
            for(UINT32 i = 0; i &lt; 60; ++i )
                for( UINT32 j = 0; j&lt; 6; j++ )
                    frameData-&gt;data[i][j] = curFrameData.data[i][j];

            spinLock.unlock();
            pushThreadData( buffer );
        }
        endThreadLoop();
    }
    setDone( true );
}

void NeuronForMayaDevice::threadShutdownHandler()
{
    // Stops the loop in the thread handler
    setDone( true );
}

void* NeuronForMayaDevice::creator()
{
    return new NeuronForMayaDevice;
}


MStatus NeuronForMayaDevice::initialize()
{
    MStatus status;
    MFnNumericAttribute numAttr;
    MFnTypedAttribute tAttr;

    MFnStringData fnStringIp;
    MObject stringIp = fnStringIp.create(&quot;127.0.0.1&quot;);
    inputIp = tAttr.create(&quot;inputIp&quot;, &quot;ii&quot;, MFnData::kString, stringIp, &amp;status);
    MCHECKERROR(status, &quot;create input Ip&quot;);
    tAttr.setWritable(true);
    ADD_ATTRIBUTE(inputIp)

    inputPort = numAttr.create(&quot;inputPort&quot;, &quot;ip&quot;, MFnNumericData::kInt, 7001, &amp;status );
    MCHECKERROR(status, &quot;create input Port&quot;);
    numAttr.setWritable(true);
    numAttr.setReadable(false);
    //numAttr.setConnectable(false);
    ADD_ATTRIBUTE(inputPort)

    inputRecord = numAttr.create(&quot;record&quot;, &quot;ird&quot;, MFnNumericData::kBoolean, false, &amp;status );
    MCHECKERROR(status, &quot;create input Record&quot;);
    numAttr.setWritable(true);
    numAttr.setConnectable(false);
    ADD_ATTRIBUTE(inputRecord)

    outputTranslate = numAttr.create(&quot;outputTranslate&quot;, &quot;ot&quot;, MFnNumericData::k3Float, 0.0, &amp;status);
    MCHECKERROR(status, &quot;create outputTranslate&quot;);
    numAttr.setHidden(true);
    ADD_ATTRIBUTE(outputTranslate);

    outputTranslations = numAttr.create(&quot;outputTranslations&quot;, &quot;ots&quot;, MFnNumericData::k3Float, 0.0, &amp;status);
    MCHECKERROR(status, &quot;create outputTranslations&quot;);
    numAttr.setArray(true);
    numAttr.setUsesArrayDataBuilder(true); 
    ADD_ATTRIBUTE(outputTranslations);

    outputRotations = numAttr.create(&quot;outputRotations&quot;, &quot;ors&quot;, MFnNumericData::k3Float, 0.0, &amp;status);
    MCHECKERROR(status, &quot;create outputRotations&quot;);
    numAttr.setArray(true);
    numAttr.setUsesArrayDataBuilder(true); 
    ADD_ATTRIBUTE(outputRotations);

    ATTRIBUTE_AFFECTS( live, outputTranslate);
    ATTRIBUTE_AFFECTS( frameRate, outputTranslate);
    ATTRIBUTE_AFFECTS( inputIp, outputTranslate);
    ATTRIBUTE_AFFECTS( inputPort, outputTranslate);

    ATTRIBUTE_AFFECTS( live, outputTranslations);
    ATTRIBUTE_AFFECTS( frameRate, outputTranslations);
    ATTRIBUTE_AFFECTS( inputIp, outputTranslations);
    ATTRIBUTE_AFFECTS( inputPort, outputTranslations);

    ATTRIBUTE_AFFECTS( live, outputRotations);
    ATTRIBUTE_AFFECTS( frameRate, outputRotations);
    ATTRIBUTE_AFFECTS( inputIp, outputRotations);
    ATTRIBUTE_AFFECTS( inputPort, outputRotations);

    ATTRIBUTE_AFFECTS( outputTranslate, outputTranslations);
    ATTRIBUTE_AFFECTS( outputTranslate, outputRotations);

    return MS::kSuccess;
}


MStatus NeuronForMayaDevice::compute( const MPlug&amp; plug, MDataBlock&amp; block )
{
    MStatus status;
    if( plug == outputTranslate || plug.parent() == outputTranslate ||
        plug == outputTranslations ||  plug.parent() == outputTranslations ||
        plug == outputRotations || plug.parent() == outputRotations )
    {
        bLive = isLive();

        MCharBuffer buffer;
        if ( popThreadData(buffer) )
        {
            FrameData* curData = reinterpret_cast<framedata   *>(buffer.ptr());
            printf( &quot;current frame is %d \n &quot;,  curData-&gt;nFrame);
            MArrayDataHandle translationsHandle = block.outputArrayValue( outputTranslations, &amp;status );
            MCHECKERROR(status, &quot;Error in block.outputArrayValue for outputTranslations&quot;);

            MArrayDataBuilder translationsBuilder = translationsHandle.builder( &amp;status );
            MCHECKERROR(status, &quot;Error in translationsBuilder = translationsHandle.builder.\n&quot;);

            MArrayDataHandle rotationsHandle = block.outputArrayValue( outputRotations, &amp;status );
            MCHECKERROR(status, &quot;Error in block.outputArrayValue for outputRotations&quot;);

            MArrayDataBuilder rotationsBuilder = rotationsHandle.builder( &amp;status );
            MCHECKERROR(status, &quot;Error in rotationsBuilder = rotationsHandle.builder.\n&quot;);

            for(UINT32 i=0; i&lt; 60; ++i )
            {
                float3&amp; translate = translationsBuilder.addElement(i, &amp;status).asFloat3();
                MCHECKERROR(status, &quot;ERROR in translate = translationsBuilder.addElement.\n&quot;);
                translate[0] = curData-&gt;data[i][0];
                translate[1] = curData-&gt;data[i][1];
                translate[2] = curData-&gt;data[i][2];

                float3&amp; rotate = rotationsBuilder.addElement(i, &amp;status).asFloat3();
                MCHECKERROR(status, &quot;ERROR in translate = translationsBuilder.addElement.\n&quot;);
                rotate[0] = curData-&gt;data[i][3];
                rotate[1] = curData-&gt;data[i][4];
                rotate[2] = curData-&gt;data[i][5];
            }
            status = translationsHandle.set(translationsBuilder);
            MCHECKERROR(status, &quot;set translationsBuilder failed\n&quot;);

            status = rotationsHandle.set(rotationsBuilder);
            MCHECKERROR(status, &quot;set rotationsBuilder failed\n&quot;);

            block.setClean( plug );

            releaseDataStorage(buffer);
            return ( MS::kSuccess );
        }
        else
        {
            return MS::kFailure;
        }
    }
    return ( MS::kUnknownParameter );
}</pre>

<p><b>Step 3 </b>- So far, we have registered the callback to receive the animation data from the Axis neuron app, and cached the frame data as shared data buffer. Then, we created a device thread node to fetch the data and then pass them to 2 output attributes (<b>outputTranslations</b>, <b>outputRotations</b>). Now, we will create the Neuron specific skeleton, and connect each item in the translation and rotation arrays (<b>outputTranslations</b>, <b>outputRotations</b>) to the corresponding joint in the Neuron skeleton.</p>

<p>Neuron skeleton is a little different than the Maya internal skeleton. It supports 60 joints at most, and is corresponding with its MotionCapture device (Perception Neuron). You can reference the SDK Doc “<b>Appendix B: BVH header template for the hierarchy”</b> for more information. To create the Neuron skeleton, you can use several different ways to do that and make it more flexible. But here we will just create a Maya default skeleton, and export it to a MA file as a reference (by <b>Reference -&gt; Export Selection as Reference</b>), then modify the MA file to generate the MEL procedure according to the Neuron skeleton hierarchy. It is not very flexible but quick and effective at this stage.</p>

<pre class="brush:cpp;toolbar: false;">global proc createNeuronSkeleton(string $characterNodeName)
{

    createNode transform -n ($characterNodeName + &quot;_Character&quot;);
       setAttr &quot;.s&quot; -type &quot;double3&quot; 0.1 0.1 0.1 ;

    createNode joint -n ($characterNodeName + &quot;_Hips&quot;) -p ($characterNodeName + &quot;_Character&quot;);
       addAttr -s false -ci true -sn &quot;ch&quot; -ln &quot;Character&quot; -at &quot;message&quot;;
       setAttr &quot;.ro&quot; 2;
       setAttr &quot;.typ&quot; 1;

    createNode joint -n ($characterNodeName + &quot;_RightUpLeg&quot;) -p ($characterNodeName + &quot;_Hips&quot;);
       addAttr -s false -ci true -sn &quot;ch&quot; -ln &quot;Character&quot; -at &quot;message&quot;;
       setAttr &quot;.ro&quot; 2;
       setAttr &quot;.sd&quot; 2;
       setAttr &quot;.typ&quot; 2;
    …… 
} </pre>

<p>When the Neuron skeleton is created, we need to create a <b>NeuronForMayaDevice</b> node, and connect each item within outputTranslations and outputRotations attributes to the corresponding joint in the Neuron skeleton, the script should be like: </p>

<p>When the Neuron skeleton is created, we need to create a <b>NeuronForMayaDevice</b> node, and connect each item within outputTranslations and outputRotations attributes to the corresponding joint in the Neuron skeleton, the script should be like:&#160; </p>

<pre class="brush:cpp;toolbar: false;">global proc createUnitconversions(string $characterNodeName)
{
    int $i;
    for($i = 0; $i &lt; 60; ++$i)
    {
        createNode unitConversion -n ($characterNodeName + &quot;_unitConversion&quot; + $i);
        setAttr &quot;.cf&quot; 0.017453292519943295;
    }
}

global proc connectNodes(string $characterNodeName, string $neuronDeviceName)
{
    int $i;
    string $NeuronSkelNames[] = {&quot;Character&quot;,&quot;Hips&quot;,&quot;RightUpLeg&quot;,&quot;RightLeg&quot;,&quot;RightFoot&quot;,&quot;LeftUpLeg&quot;,&quot;LeftLeg&quot;,&quot;LeftFoot&quot;,&quot;Spine&quot;,&quot;Spine1&quot;,&quot;Spine2&quot;,&quot;Spine3&quot;,&quot;Neck&quot;,&quot;Head&quot;,&quot;RightShoulder&quot;,&quot;RightArm&quot;,&quot;RightForeArm&quot;,&quot;RightHand&quot;,&quot;RightHandThumb1&quot;,&quot;RightHandThumb2&quot;,&quot;RightHandThumb3&quot;,&quot;RightInHandIndex&quot;,&quot;RightHandIndex1&quot;,&quot;RightHandIndex2&quot;,&quot;RightHandIndex3&quot;,&quot;RightInHandMiddle&quot;,&quot;RightHandMiddle1&quot;,&quot;RightHandMiddle2&quot;,&quot;RightHandMiddle3&quot;,&quot;RightInHandRing&quot;,&quot;RightHandRing1&quot;,&quot;RightHandRing2&quot;,&quot;RightHandRing3&quot;,&quot;RightInHandPinky&quot;,&quot;RightHandPinky1&quot;,&quot;RightHandPinky2&quot;,&quot;RightHandPinky3&quot;,&quot;LeftShoulder&quot;,&quot;LeftArm&quot;,&quot;LeftForeArm&quot;,&quot;LeftHand&quot;,&quot;LeftHandThumb1&quot;,&quot;LeftHandThumb2&quot;,&quot;LeftHandThumb3&quot;,&quot;LeftInHandIndex&quot;,&quot;LeftHandIndex1&quot;,&quot;LeftHandIndex2&quot;,&quot;LeftHandIndex3&quot;,&quot;LeftInHandMiddle&quot;,&quot;LeftHandMiddle1&quot;,&quot;LeftHandMiddle2&quot;,&quot;LeftHandMiddle3&quot;,&quot;LeftInHandRing&quot;,&quot;LeftHandRing1&quot;,&quot;LeftHandRing2&quot;,&quot;LeftHandRing3&quot;,&quot;LeftInHandPinky&quot;,&quot;LeftHandPinky1&quot;,&quot;LeftHandPinky2&quot;,&quot;LeftHandPinky3&quot;};
 	
    for($i = 0; $i &lt; 60; ++$i)
    {
        connectAttr ($neuronDeviceName + &quot;.ots[&quot; + $i + &quot;]&quot;) ($characterNodeName + &quot;_&quot; + $NeuronSkelNames[$i] + &quot;.t&quot;);
        connectAttr ($neuronDeviceName + &quot;.ors[&quot; + $i + &quot;]&quot;) ($characterNodeName + &quot;_unitConversion&quot; + $i + &quot;.i&quot;);
        connectAttr ($characterNodeName + &quot;_unitConversion&quot; + $i + &quot;.o&quot;) ($characterNodeName + &quot;_&quot; + $NeuronSkelNames[$i] + &quot;.r&quot;);;
    }
}</pre>

<p>If you have your Axis Neuron app running, set the IP and port, run command <b>NeuronForMayaCmd</b> to connect to the Axis Neuron app, make it live, you will see the Neuron Skeleton be animated like this:</p>

<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1753e1b970c-pi"><img title="clip_image002[6]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image002[6]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7eb6411970b-pi" width="743" height="513" /></a></p>

<p><b>Step 4 –</b> At this stage everything should be ready to drive the Neuron skeleton with the real-time Motion Capture data from the device. Now, it is your turn to play with it ;). One of my colleagues created a wonderful Ironman model, and we retargeted the Neuron skeleton to the Ironman model to make it be animated. Here is the result we got. It works well, but not perfect, there are some issues we need to resolve. I will discuss about this in next post.</p>

<p>One more thing, you can access all the <a href="https://github.com/JohnOnSoftware/NeuronForMaya.git">source code</a> from Github if you are interested. </p>

<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7eb6415970b-pi"><img title="clip_image004[4]" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="clip_image004[4]" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7eb6417970b-pi" width="743" height="500" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Raphael
EMAIL: correio_lista@yahoo.com.br
IP: 189.60.6.57
URL: http://www.raphaelargento.com
DATE: 11/16/2015 04:24:23 PM
Just amazing, thanks for sharing!
-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: How to connect Perception Neuron with Maya (Part 1)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: how-to-connect-perception-neuron-with-maya-part-1
CATEGORY: Maya
CATEGORY: Reality capture
CATEGORY: Visual Studio
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/10/how-to-connect-perception-neuron-with-maya-part-1.html 
DATE: 10/15/2015 03:13:00 PM
-----
BODY:
<p>Last year, our team backed project Perception Neuron with 2 full set of Neuron Motion capture devices, and with some delay and some manufacturing issue, finally, around the end of last month, I received the devices. It was just around my birthday, so I consider them to be my birthday gift ;) </p>  <p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7e42657970b-pi"><img title="clip_image001" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="clip_image001" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d16df4a1970c-pi" width="502" height="284" /></a></p>  <p>The device looks well manufactured, well packaged, with simple but enough information about how to start playing with it. The Quickstart Guide at <a href="https://neuronmocap.com/quickstart">https://neuronmocap.com/quickstart</a> is well written to get you started quickly and easily. Since perception neuron also provide a NeuronDataReader SDK to capture the motion data, I was interested to try to capture the motion data in Maya and MotionBuilder. Luckily, we had lately an internal Maya Hackathon, and with my colleague Chengxi Li, we spent 2 days working on a “Real-time MotionCapture by Neuron Device in Maya” project. It was cool and very interesting, so I’d like to share our experience with you about what we did in a series of blog posts. I will also mention the limitations and future plan of our projects.</p>  <p>First of all, let’s talk about the NeuronDataReader SDK itself.</p>  <p>The NeuronDataReader SDK can be downloaded from <a href="https://neuronmocap.com/downloads">https://neuronmocap.com/downloads</a>. It includes an API documentation. Actually, the documentation is pretty small, but the API structure/workflow is very simple to understand and/or use.</p>  <p>The 1<sup>st</sup> thing you need is the Axis Neuron application that can be downloaded for free from <a href="https://neuronmocap.com/downloads">https://neuronmocap.com/downloads</a>. If you want the full enabled application with all the functionalities, you would need their professional version at the price of $499. You can check <a href="https://neuronmocap.com/content/axis-neuron-software">https://neuronmocap.com/content/axis-neuron-software</a> for the advanced functionalities list. The Axis Neuron application is very important because at the time of this post, you cannot read the data from the Perception Neuron devices directly. This application (free version is enough) is required to receive and broadcast the animation data through TCP/IP or UDP protocol. The application runs as a server for the data in your system. In this post, I won’t talk too much about the application itself - after installing and running the Axis Neuron application, you just need to follow the <a href="https://neuronmocap.com/quickstart">Quickstart Guide</a>, and you should be able to see your motion captures in the Axis Neuron real-time viewport. Please make sure the “<b>BVH</b>” check box under “File-&gt;Settings-&gt;Broadcasting” is checked so the application is ready for broadcasting animation data.</p>  <p>Ok, now the server (Axis Neuron application) is ready to broadcast, let’s introduce the APIs so you can understand how you can create your own plug-in (acting as a client) to receive and parse the data, based on NeuronDataReader SDK. The process is not complicated, and can be described into 3 steps.</p>  <p><b>Step 1</b>, the Axis neuron application communicates with your customized plug-in for 3 different types of data, and the NeuronDataReader SDK provides the callback methods that you can register to receive the data, here are the 3 types of callbacks you need to define:</p>  <pre class="brush:cpp;toolbar: false;">//BVH binary stream data which includes all the information of the skeleton 
typedef void (CALLBACK *FrameDataReceived)(void* customedObj, SOCKET_REF sender, BvhDataHeader* header, float* data); 
//Command data which is used to sync between client and server 
typedef void (CALLBACK *CommandDataReceived)(void* customedObj, SOCKET_REF sender, CommandPack* pack, void* data);
//Socket connection status data
typedef void (CALLBACK *SocketStatusChanged)(void* customedObj, SOCKET_REF sender, SocketStatus status, char* message); </pre>

<p>One important thing here, the data-processing thread in the NeuronDataReader is a worker thread separated from the UI. So the registered data-receiving callbacks cannot access the UI elements directly. If the data need to be used in the UI thread, it is recommended to save the data from the callback function to a local array, and that the UI thread can access the local-buffered data in any other place. We will show you the example in the following blog post.</p>

<p><b>Step 2</b>, when your callbacks are defined, the next step is to register the above 3 callbacks, NeuronDataReader SDK provides the following methods:</p>

<pre class="brush:cpp;toolbar: false;">void BRRegisterFrameDataCallback(void* customedObj, FrameDataReceived handle);
void BRRegisterCommandDataCallback(void* customedObj, CommandDataReceived handle);
void BRRegisterSocketStatusCallback (void* customedObj, SocketStatusChanged handle);</pre>

<p><b>Step 3</b>, after the callbacks are registered, you can connect your client to the server, with either TCP or UDP protocol as follow. When the connection is operational, your callbacks will receive the data from the server in real-time:</p>

<pre class="brush:cpp;toolbar: false;">//Connect to the server with given IP address and port 
SOCKET_REFBRConnectTo(char* serverIP, int nPort);
//Connect to the server with given port
SOCKET_REF BRStartUDPServiceAt(int nPort);
//To stop data receive service, you need to use BRCloseSocket to close the service.
void BRCloseSocket (SOCKET_REF sockRef);</pre>

<p>That is the main workflow for a customized plug-in. Of course, there are a few other methods listed below that you can be used as well.</p>

<pre class="brush:cpp;toolbar: false;">SocketStatus BRGetSocketStatus (SOCKET_REF sockRef);
BOOL BRCommandFetchAvatarDataFromServer(SOCKET_REF sockRef, int avatarIndex, CmdId cmdId);
BOOL BRCommandFetchDataFromServer(SOCKET_REF sockRef, CmdId cmdId);
BOOL BRRegisterAutoSyncParmeter(SOCKET_REF sockRef, CmdId cmdId);
BOOL BRUnregisterAutoSyncParmeter(SOCKET_REF sockRef, CmdId cmdId);
char* BRGetLastErrorMessage();</pre>

<p>In the SDK folder, there is also a C# demo sample, it demonstrates the simple workflow on how to use the NeuronDataReader SDK. To run the demo sample, do not forget to copy the file “NeuronDataReader.dll” to same folder of your application to make it work.</p>

<p>In next post, we will continue talking about how to use these APIs in your project.</p>

<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c7e4265d970b-pi"><img title="clip_image002" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="clip_image002" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0887f9ba970d-pi" width="517" height="316" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Perception Neuron
-----
COMMENT:
AUTHOR: williams marc
EMAIL: ad2019@hotmail.fr
IP: 193.252.62.181
URL: 
DATE: 11/12/2015 08:54:37 AM
Hello, I'm looking for users of PERCEPTION NEURON before ordering it online for my serious' game company. Did you order and receive your modele ? 
Do they function as good as on videos ?
Thank you
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Around the Corner goes “responsive”
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: around-the-corner-goes-responsive
CATEGORY: Cyrille Fauvel
CATEGORY: Mobile
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/09/around-the-corner-goes-responsive.html 
DATE: 09/07/2015 12:57:24 AM
-----
BODY:
<p>It was time for &#39;Around the Corner&#39; &#0160;to receive a much-needed design refresh. I had hoped to get our internal creative team to help with this, but that unfortunately did not pan out: all issues that you come across are therefore the responsibility of yours truly.</p>
<ul>
<li>Here are the key changes in this refresh:</li>
<li>Based on Typepad’s “Snap” responsive design template</li>
<li>Switched to new fonts: Lato for titles and headings, Open Sans for body text</li>
</ul>
<p>Displays excerpts rather than full posts on the home page and post indices/archives The intention is that the blog be much more readable on a variety of devices and form factors. Based on the fact that a significant portion of you (35%) only expect to read this from large form factor devices (PCs), I definitely didn’t want to compromise that experience. I welcome your feedback – positive and negative – although I don’t expect to be able to please everyone with this redesign.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Writing a Mental Ray shader for Maya and relate it to a Maya custom node
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: writing-a-mental-ray-shader-for-maya-and-relate-it-to-a-maya-custom-node-1
CATEGORY: Cheng Xi Li
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/07/writing-a-mental-ray-shader-for-maya-and-relate-it-to-a-maya-custom-node-1.html 
DATE: 07/23/2015 06:31:20 PM
-----
BODY:
<p>Mental Ray is the renderer shipped with Maya by default. To make your custom node working with Mental Ray becomes a natural question for every Maya developer.</p>
<p>The Mental Ray renderer can use the Maya shader network, but because it is a different rendering system (provided by NVIDIA), it cannot use the shader node in Maya directly. For this reason, Autodesk has developed a shader bridge between Mental Ray and Maya.</p>
<p>You can develop a Mental Ray shader easily and make it available in the Maya shader network without any effort. But it can’t be used directly by Maya or other renderers. That means you can’t preview it in the viewport.</p>
<p>For an end user, if you want your custom shader to be both accessed by Maya and Mental Ray, you have to develop both versions. There is plenty of information about how to develop a plug-in for Maya, so, we will skip the Maya part and focus on the Mental Ray side.</p>
<p>Since Maya 2013, you can relate a Maya custom shaders to a Mental Ray custom shaders for Maya by creating the Mental Ray shader and Maya custom shaders with the same name. Therefore they can use the same shader network.</p>
<p>In this article, we’ll create a Mental Ray shader for the fileTexture sample from the Maya devkit.<br /> A Mental Ray shader has two parts: the ‘mi’ include file and the ‘dll’ binary file. During Mental Ray initialization, Mental Ray will check the include file first and then loads the corresponding dll file. The include file must be encoded with ASCII or it will fail to load. To make this tutorial simple, we will put the include file and the dll file in the default path, which is the shaders and shaders/include folder inside the Mental Ray directory structure.</p>
<p>First, let’s take a look at the mi include file</p>
<pre class="brush: cpp; toolbar: false;">declare shader
  struct {
    color&quot;outColor&quot;,
    scalar &quot;outAlpha&quot;
  } &quot;fileTexture&quot; (
     string &quot;fileName&quot;,
     vector &quot;uvCoord&quot;
  )
  version 1
  apply texture
end declare
</pre>
<p>declare shader is the beginning of a Mental Ray shader definition and end declare is the finish. They are always in pairs.</p>
<p>&quot;fileTexture&quot; is the name of the Mental Ray shader. In this case, we want to relate it to our Maya fileTexture custom node and they must be identical.</p>
<p>Before &quot;fileTexture&quot; is the output of the shader and they should be the same as the Maya version.</p>
<pre class="brush: cpp; toolbar: false;">struct {
  color&quot;outColor&quot;,
  scalar &quot;outAlpha&quot;
}
</pre>
<p>Following the &quot;fileTexture&quot; is the input of the shader</p>
<pre class="brush: cpp; toolbar: false;">&quot;fileTexture&quot; (
  string &quot;fileName&quot;,
  vector &quot;uvCoord&quot;
)
</pre>
<p>Notice that, the Maya version has only two child parameters for uvCoord. There is no corresponding type for uvCoord, so you can use the vector type instead in Mental Ray.</p>
<p>“version 1” tells Mental Ray the version of this shader and “apply texture” tells Mental Ray this is a texture shader. To simplify the sample, we removed $ifndef for preventing repeat loading, but you should add it later.</p>
<p>Next, we’ll start to write the Mental Ray shader. The Mental Ray shader is a C DLL file. I’ve already put the code inside an extern “C” block to simplify the example.</p>
<p>The naming principle for Mental Ray shader code is a combination of your shader name and function name with a ‘_’. In this case, our shader’s name is fileTexture, so the version function of our shader will be fileShader_version.</p>
<p>According to the Mental Ray manual, the calling order of our fileTexture shader, during rendering in a frame the first time will be:</p>
<ol>
<li>fileTexture _init with a null parameter argument</li>
<li>fileTexture _init with non-null parameter arguments</li>
<li>fileTexture itself with the same non-null parameter arguments</li>
<li>more calls to fileTexture with the same parameter arguments, and calls to other instances of fileTexture _init and fileTexture with different parameter arguments,</li>
<li>one fileTexture_exit with a non-null parameter arguments for each corresponding fileTexture_init</li>
<li>finally one fileTexture _exit with a null parameter arguments.</li>
</ol>
<p>Like the Maya fileTexture sample, our shader node only passes the color through. But we don’t want to open and close the file every time our shader is called. So we need to load the file during the init and clean it up during the exit. We’ll create a user data struct to store necessary data.</p>
<p>First is the version part:</p>
<pre class="brush: cpp; toolbar: false;">// Version
DLLEXPORT int fileTexture_version(void) {
  return(1);
}</pre>
<p>It is very simple: just return the version number of this shader.</p>
<p>Next, let’s define the input, output and user data.</p>
<pre class="brush: cpp; toolbar: false;">// Define fileTexture input
typedef struct fileTexture_Paras {
  miTagfileName;
  miVectoruvCoord;
} fileTexture_Paras ;
// Define fileTexture result
typedef struct fileTexture_Results {
  miColoroutColor;
  miScalaroutAlpha;
} fileTexture_Results;
// Define userdata
typedef struct fileTexture_Userdata {
  miImg_file ifp;
  miImg_image *image;
} fileTexture_Userdata;</pre>
<p>Pretty straight forward, huh? The only thing that needs to be explained here is the miTag. It works like the HANDLE of win32. You get the miTag and retrieve the data with corresponding function. We’ll see it later in the init code.</p>
<p>The following is the init and cleanup functions. First, init:</p>
<pre class="brush: cpp; toolbar: false;">DLLEXPORT void fileTexture_init (
  miState *state,
  struct fileTexture_Paras *paras, // Our parameter
  miBoolean *inst_req // need instance init?
) {
  if (!paras) { // first without paras
    *inst_req = miTRUE; // We have parameters for our instance, so we want instance init.
  } else { // para is not null, instance init.
    void **user;
    miTagimageTag = 0;
    fileTexture_Userdata *data = 0;
    mi_query(miQ_FUNC_USERPTR, state, 0, &amp;user);
    *user = mi_mem_allocate(sizeof(fileTexture_Userdata));
    if (*user != NULL) {
      data = (fileTexture_Userdata *)*user;
      memset(data, 0, sizeof(fileTexture_Userdata)); // Try to get image filename
      imageTag = *mi_eval_tag(&amp;paras-&gt;fileName);
      char *fileName = (char*)mi_db_access(imageTag); // Open and read image.
      if (!(mi_img_open(&amp;(data-&gt;ifp), fileName, miIMG_TYPE_RGBA)))
        return;
      if (!(data-&gt;image = mi_img_image_alloc(&amp;(data-&gt;ifp)))) {
        mi_img_close(&amp;(data-&gt;ifp));
        return;
      }
      if (!(mi_img_image_read(&amp;(data-&gt;ifp), data-&gt;image))) {
        mi_mem_release(data-&gt;image);
        mi_img_close(&amp;(data-&gt;ifp));
        return;
      }
    }
  }
}
</pre>
<p>Mental Ray will first init with no parameters, and then after the inst_req is set to TRUE, it will call the init with parameters. So we can open the file during the second call.</p>
<p>First, let’s create user data in this shader context.</p>
<pre class="brush: cpp; toolbar: false;">mi_query(miQ_FUNC_USERPTR, state, 0, &amp;user);
*user = mi_mem_allocate(sizeof(fileTexture_Userdata));
</pre>
<p>If everything goes correctly, we’ll then try to get the filename with the miTag:</p>
<pre class="brush: cpp; toolbar: false;">      imageTag = *mi_eval_tag(&amp;paras-&gt;fileName);
      char *fileName = (char*)mi_db_access(imageTag); // Open and read image.
</pre>
<p>The rest of the code is trying to load the image file. For more details, please reference to the Mental Ray manual.</p>
<p>The cleanup code:</p>
<pre class="brush: cpp; toolbar: false;">DLLEXPORT void fileTexture_exit(
  miState *state,
  structmyshader *paras // for instance
) {
  if (!paras) { // the final step
  } else { // shader instance exit.
    // Get user data and close the file
    void **user;
    mi_query(miQ_FUNC_USERPTR, state, 0, &amp;user);
    if (*user != NULL) {
      fileTexture_Userdata* data = (fileTexture_Userdata*)*user;
      if (data-&gt;image != NULL) {
        mi_mem_release(data-&gt;image);
        mi_img_close(&amp;(data-&gt;ifp));
      }
      mi_mem_release(*user);
    }
  }
}
</pre>
<p>Just check whether file is loaded properly and do the cleanup job.</p>
<p>Finally our fileTexture shader code.</p>
<pre class="brush: cpp; toolbar: false;">#defineMAYA_CONNECTED(p) \
	(mi_has_connections(state) &amp;&amp; \
	!mi_is_nonshader_tag(mi_get_ghost(state,p)))
 
DLLEXPORT miBoolean fileTexture (
	fileTexture_Results *result,
	miState   *state,
	fileTexture_Paras *paras
) {
	miImg_image *image = 0;
	void **user;
	fileTexture_Paras *data = 0;

	// Get coord to read from image
	miVectorcoord = (MAYA_CONNECTED(&amp;paras-&gt;uvCoord)) ?
		*mi_eval_vector(&amp;paras-&gt;uvCoord) :
		state-&gt;tex_list[0];

	// Get user data
	mi_query(miQ_FUNC_USERPTR, state, 0, &amp;user);
	if (*user != NULL) {
		fileTexture_Userdata* data = (fileTexture_Userdata*)*user;
		image = data-&gt;image;               
		// If image opened successful, read image
		if (image) {
			if (coord.x &lt; 0.0f || coord.x &gt; 1.0f)
				coord.x -= floorf(coord.x);
			if (coord.y &lt; 0.0f || coord.y &gt; 1.0f)
				coord.y -= floorf(coord.y);
			intwidth = mi_img_get_width(image);
			intheight = mi_img_get_height(image);

			mi_img_get_color(
				image, &amp;result-&gt;outColor,
				(int)(width*coord.x),
				(int)(height*coord.y));

			result-&gt;outAlpha = result-&gt;outColor.a;

			return miTRUE;
		}
	}

	// Default routine, output black
	result-&gt;outColor.a = result-&gt;outColor.r = result-&gt;outColor.g = result-&gt;outColor.b = 0.0f;
	result-&gt;outColor.a = result-&gt;outAlpha = 1.0f;
	return miFALSE;
}
</pre>
<p>First get the uv coordinate. We use the macro to decide which one should be use.</p>
<pre class="brush: cpp; toolbar: false;">miVectorcoord = (MAYA_CONNECTED(&amp;paras-&gt;uvCoord)) ?
		*mi_eval_vector(&amp;paras-&gt;uvCoord) :
		state-&gt;tex_list[0];
</pre>
<p>Then get the image file from the user data</p>
<pre class="brush: cpp; toolbar: false;">            mi_query(miQ_FUNC_USERPTR, state, 0, &amp;user);
            if(*user != NULL) {
                fileTexture_Userdata* data = (fileTexture_Userdata*)*user;
                image = data-&gt;image;
</pre>
<p>The rest of the code is pretty much as the same as the fileTexture::compute, you will read the color from image and output.</p>
<p>Compile it and put the mi and dll file to the Mental Ray folder, and your fileTexture can be rendered in both the Viewport and Mental Ray now.</p>
<p>You can get the source code from my <a href="https://github.com/iamsleepy/fileTextureMentalRay" target="_self">github</a>.</p>
<p>If your plug-in is loaded after your Mental Ray shader, you’ll need to create a mel script for loading it properly. You can find it in the “Relate Maya custom shaders to Mental Ray for Maya custom shaders” on our website.</p>
<p><span style="text-decoration: underline;"><strong>References</strong></span>:</p>
<p>Relate Maya custom shaders to Mental Ray for Maya custom shaders:<br /><a href="http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=GUID-0966E345-CA9E-4C6D-B17A-0D0DA186A2A0" target="_self">http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=GUID-0966E345-CA9E-4C6D-B17A-0D0DA186A2A0</a></p>
<p>Mental Ray standalone manual:<br /><a href="http://docs.autodesk.com/MENTALRAY/2015/ENU/mental-ray-help/" target="_self">http://docs.autodesk.com/MENTALRAY/2015/ENU/mental-ray-help/</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:
Maya, Mental Ray
-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Writing a Mental Ray shader for Maya and relate it to a Maya custom node
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: writing-a-mental-ray-shader-for-maya-and-relate-it-to-a-maya-custom-node

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/07/writing-a-mental-ray-shader-for-maya-and-relate-it-to-a-maya-custom-node.html 
DATE: 07/23/2015 06:28:55 PM
-----
BODY:
<h2 style="margin: 13pt 0cm; text-justify: inter-ideograph; line-height: 28pt" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Mental Ray is the renderer shipped with Maya by default. To make your custom node working with Mental Ray becomes a natural question for every Maya developer.</font></font></span></h2>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The Mental Ray renderer can use the Maya shader network, but because it is a different rendering system (provided by NVIDIA), it cannot use the shader node in Maya directly. For this reason, Autodesk has developed a shader bridge between Mental Ray and Maya.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">You can develop a Mental Ray shader easily and make it available in the Maya shader network without any effort. But it can’t be used directly by Maya or other renderers. That means you can’t preview it in the viewport.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">For an end user, if you want your custom shader to be both accessed by Maya and Mental Ray, you have to develop both versions. There is plenty of information about how to develop a plug-in for Maya, so, we will skip the Maya part and focus on the Mental Ray side.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Since Maya 2013, you can relate a Maya custom shaders to a Mental Ray custom shaders for Maya by creating the Mental Ray shader and Maya custom shaders with the same name. Therefore they can use the same shader network.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">In this article, we’ll create a Mental Ray shader for the fileTexture sample from the Maya devkit.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">A Mental Ray shader has two parts: the ‘mi’ include file and the ‘dll’ binary file. During Mental Ray initialization, Mental Ray will check the include file first and then loads the corresponding dll file. The include file must be encoded with ASCII or it will fail to load. To make this tutorial simple, we will put the include file and the dll file in the default path, which is the shaders and shaders/include folder inside the Mental Ray directory structure.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">First, let’s take a look at the mi include file </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font style="font-size: 10.5pt" color="#000000">declare shader</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160; </font></span><font style="font-size: 10.5pt">struct {</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">color<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"> </span>&quot;outColor&quot;,</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">scalar<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;outAlpha&quot;</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160; </font></span><font style="font-size: 10.5pt">} &quot;fileTexture&quot; (</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">string<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;fileName&quot;,</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">vector<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;uvCoord&quot;</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160; </font></span><font style="font-size: 10.5pt">)</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160; </font></span><font style="font-size: 10.5pt">version 1</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160; </font></span><font style="font-size: 10.5pt">apply texture</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font style="font-size: 10.5pt" color="#000000">end declare</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">declare shader is the beginning of a Mental Ray shader definition and end declare is the finish. They are always in pairs. </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&quot;fileTexture&quot; is the name of the Mental Ray shader. In this case, we want to relate it to our Maya fileTexture custom node and they must be identical.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Before &quot;fileTexture&quot; is the output of the shader and they should be the same as the Maya version.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160; </font></span><font style="font-size: 10.5pt">struct {</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">color<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"> </span>&quot;outColor&quot;,</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">scalar<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;outAlpha&quot;</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal; text-indent: 10.2pt" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font style="font-size: 10.5pt" color="#000000">}</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Following the &quot;fileTexture&quot; is the input of the shader</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font style="font-size: 10.5pt" color="#000000">&quot;fileTexture&quot; (</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes">&#160;</span>string<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;fileName&quot;,</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 10.5pt">vector<span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1">&#160;&#160; </span>&quot;uvCoord&quot;</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; text-align: justify; text-justify: inter-ideograph"><font face="Courier New"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-spacerun: yes"><font style="font-size: 10.5pt">&#160; </font></span><font style="font-size: 10.5pt">)</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Notice that, the Maya version has only two child parameters for uvCoord. There is no corresponding type for uvCoord, so you can use the vector type instead in Mental Ray.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">“version 1” tells Mental Ray the version of this shader and “apply texture” tells Mental Ray this is a texture shader. To simplify the sample, we removed $ifndef for preventing repeat loading, but you should add it later.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Next, we’ll start to write the Mental Ray shader. The Mental Ray shader is a C DLL file. I’ve already put the code inside an extern “C” block to simplify the example.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The naming principle for Mental Ray shader code is a combination of your shader name and function name with a ‘_’. In this case, our shader’s name is fileTexture, so the version function of our shader will be fileShader_version.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">According to the Mental Ray manual, the calling order of our fileTexture shader, during rendering in a frame the first time will be:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">1.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">fileTexture _init with a null parameter argument</font></font></span></font></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">2.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">fileTexture _init with non-null parameter arguments</font></font></span></font></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">3.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">fileTexture itself with the same non-null parameter arguments</font></font></span></font></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">4.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">more calls to fileTexture with the same parameter arguments, and calls to other instances of fileTexture _init and fileTexture with different parameter arguments,</font></font></span></font></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">5.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">one fileTexture_exit with a non-null parameter arguments for each corresponding fileTexture_init</font></font></span></font></p>  <p class="MsoListParagraph" style="margin: 0cm 0cm 0pt 18pt; text-justify: inter-ideograph; line-height: normal; text-indent: -18pt; mso-char-indent-count: 0; mso-list: l0 level1 lfo1" align="justify"><font color="#000000"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph; mso-fareast-font-family: calibri; mso-fareast-theme-font: minor-latin; mso-bidi-font-family: calibri; mso-bidi-theme-font: minor-latin"><span style="text-align: justify; text-justify: inter-ideograph; mso-list: ignore"><font face="Calibri"><font style="font-size: 10.5pt">6.</font></font><span style="font-family: ; text-align: justify; text-justify: inter-ideograph; line-height: normal"><font face="Times New Roman"><font style="font-size: 7pt">&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt">finally one fileTexture _exit with a null parameter arguments.</font></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Like the Maya fileTexture sample, our shader node only passes the color through. But we don’t want to open and close the file every time our shader is called. So we need to load the file during the init and clean it up during the exit. We’ll create a user data struct to store necessary data.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">First is the version part:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Version</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">DLLEXPORT</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">int</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">fileTexture_version</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">void</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">) {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">(1);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">It is very simple: just return the version number of this shader.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Next, let’s define the input, output and user data.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Define fileTexture input</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">typedef</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">struct</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Paras</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miTag</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miVector</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">uvCoord</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">} </font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Paras</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Define fileTexture result</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">typedef</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">struct</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Results</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miColor</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miScalar</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outAlpha</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">} </font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Results</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Define userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">typedef</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">struct</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt"><span style="mso-tab-count: 1"> </span>{</font></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miImg_file</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-spacerun: yes"><font color="#000000">&#160;&#160; </font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miImg_image</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">} </font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Pretty straight forward, huh? The only thing that needs to be explained here is the miTag. It works like the HANDLE of win32. You get the miTag and retrieve the data with corresponding function. We’ll see it later in the init code.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The following is the init and cleanup functions. First, init:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a"><font style="font-size: 9.5pt">DLLEXPORT</font></font></span></i><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">void</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">fileTexture_init</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">(</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 9.5pt">&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miState</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span>*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">, </font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 9.5pt">&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">struct</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">,<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt"><font color="#008000">// </font><a style="name: ole_link2"></a></font><a style="name: ole_link1"><span style="mso-bookmark: ole_link2"><font style="font-size: 9.5pt" color="#008000"><font style="text-decoration: none">Our parameter</font></font></span></a></span></font><span style="mso-bookmark: ole_link2"></span><span style="mso-bookmark: ole_link1"></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 9.5pt">&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miBoolean</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160; </span>*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">inst_req</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">)<span style="mso-spacerun: yes">&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt"><font color="#008000">// </font><a style="name: ole_link4"></a></font><a style="name: ole_link3"><span style="mso-bookmark: ole_link4"><font style="font-size: 9.5pt" color="#008000"><font style="text-decoration: none">need instance init?</font></font></span></a></span></font><span style="mso-bookmark: ole_link4"></span><span style="mso-bookmark: ole_link3"></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">{</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (!</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">) {<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt"><font color="#008000">// </font><a style="name: ole_link6"></a></font><a style="name: ole_link5"><span style="mso-bookmark: ole_link6"><font style="font-size: 9.5pt" color="#008000"><font style="text-decoration: none">first without paras</font></font></span></a></span></font><span style="mso-bookmark: ole_link6"></span><span style="mso-bookmark: ole_link5"></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">*</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">inst_req</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miTRUE</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">; </font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt"><font color="#008000">// </font><a style="name: ole_link8"></a></font><a style="name: ole_link7"><span style="mso-bookmark: ole_link8"><font style="font-size: 9.5pt" color="#008000"><font style="text-decoration: none">We have parameters for our instance, so we want instance init.</font></font></span></a></span></font><span style="mso-bookmark: ole_link7"><span style="mso-bookmark: ole_link8"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></span></span></p> <span style="line-height: normal; mso-bookmark: ole_link8"></span><span style="line-height: normal; mso-bookmark: ole_link7"></span>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 2"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">} </font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">else</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> {<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></font></span></font></font><font style="font-size: 9.5pt"><a style="name: ole_link10"></a><a style="name: ole_link9"><span style="mso-bookmark: ole_link10"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#008000"><font style="text-decoration: none" face="Consolas">// para is not null, instance init.</font></font></span></span></a><span style="mso-bookmark: ole_link10"></span><span style="mso-bookmark: ole_link9"></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">void</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> **</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miTag</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">imageTag</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> = 0;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> = 0;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_query</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miQ_FUNC_USERPTR</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 2"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt"><span style="mso-tab-count: 1">&#160;&#160;&#160; </span>*</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_mem_allocate</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">sizeof</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> != </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">NULL</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *)*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">memset</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">sizeof</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Try to get image filename</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">imageTag</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = *</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_eval_tag</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">char</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">char</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*)</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_db_access</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">imageTag</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Open and read image.</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (!(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_open</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">),</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">,</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miIMG_TYPE_RGBA</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)))</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (!(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_image_alloc</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)))) {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_close</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (!(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_image_read</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">), </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">))) {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_mem_release</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_close</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 2"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Mental Ray will first init with no parameters, and then after the inst_req is set to TRUE, it will call the init with parameters. So we can open the file during the second call. </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">First, let’s create user data in this shader context.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 1"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_query</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miQ_FUNC_USERPTR</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">*</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_mem_allocate</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">sizeof</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">If everything goes correctly, we’ll then try to get the filename with the miTag:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">imageTag</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = *</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_eval_tag</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">char</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">fileName</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">char</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*)</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_db_access</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">imageTag</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The rest of the code is trying to load the image file. For more details, please reference to the Mental Ray manual. </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The cleanup code:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a"><font style="font-size: 9.5pt">DLLEXPORT</font></font></span></i><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">void</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">fileTexture_exit</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(<span style="mso-spacerun: yes">&#160; </span></font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miState</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span>*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">,</font><span style="mso-spacerun: yes"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160; </font></span></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 9"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt"><span style="mso-spacerun: yes">&#160; </span></font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">struct</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#2b91af">myshader</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">)<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// for instance </font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 2"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (!</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">) {<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// the final step</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 2"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">} </font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">else</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> {<span style="mso-spacerun: yes">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </span></font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// shader instance exit.</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Get user data and close the file</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">void</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> **</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">;</font><span style="mso-spacerun: yes"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_query</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miQ_FUNC_USERPTR</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> != </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">NULL</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{<span style="mso-tab-count: 2">&#160;&#160;&#160;&#160;&#160;&#160; </span></font><span style="mso-tab-count: 5"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">* </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*)*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> != </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">NULL</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_mem_release</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_close</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">ifp</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font><span style="mso-tab-count: 6"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_mem_release</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">);</font><span style="mso-spacerun: yes"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 2"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span><span lang="EN-US" style="font-family: ; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Just check whether file is loaded properly and do the cleanup job.</font></font></span><span lang="EN-US" style="font-family: ; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Finally our fileTexture shader code.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff"><font style="font-size: 9.5pt">#define</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">MAYA_CONNECTED</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">p</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">) \</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">(</font></font></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_has_connections</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">) &amp;&amp; \</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">!</font></font></span><font style="font-size: 9.5pt"><i style="text-align: justify; text-justify: inter-ideograph"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_is_nonshader_tag</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i style="text-align: justify; text-justify: inter-ideograph"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">mi_get_ghost</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">,</font></span><i style="text-align: justify; text-justify: inter-ideograph"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">p</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)))</font></span></font><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a"><font style="font-size: 9.5pt">DLLEXPORT</font></font></span></i><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miBoolean</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">fileTexture</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> ( </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Results</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> *</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">,</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 9"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt"><span style="mso-spacerun: yes">&#160; </span></font></font></span><font style="font-size: 9.5pt"><i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#216f85">miState</font></span></i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"><span style="mso-tab-count: 1">&#160;&#160; </span>*</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">state</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000">,</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"><span style="mso-tab-count: 9"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt"><span style="mso-spacerun: yes">&#160; </span></font></font></span><font style="font-size: 9.5pt"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#216f85">fileTexture_Paras</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"> *</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">paras</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000">) {</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#216f85">miImg_image</font></span></i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"> *</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">image</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000"> = 0;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#0000ff">void</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"> **</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">user</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#216f85">fileTexture_Paras</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000"> *</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">data</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000"> = 0;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Get coord to read from image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miVector</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">MAYA_CONNECTED</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">uvCoord</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)) ?</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><font color="#000000"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></span><font style="font-size: 9.5pt"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr">*</span></font></font><font style="font-size: 9.5pt"><i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#6f008a">mi_eval_vector</font></span></i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000">(&amp;</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">paras</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000">-&gt;</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">uvCoord</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000">) :</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">tex_list</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">[0];</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Get user data</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_query</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miQ_FUNC_USERPTR</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> != </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">NULL</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">* </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*)*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">;</font><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// If image opened successful, read image </font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">)</font><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">x</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> &lt; 0.0f || </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">x</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> &gt; 1.0f)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 6"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">x</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> -= </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">floorf</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">x</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">y</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> &lt; 0.0f || </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">y</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> &gt; 1.0f)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 6"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">y</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> -= </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">floorf</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">y</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">int</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">width</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_get_width</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">int</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">height</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_get_height</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000">mi_img_get_color</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">(</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 6"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">,</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 6"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">(</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">int</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">)(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">width</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">x</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">),</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><span style="mso-tab-count: 6"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">(</font></font></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">int</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">)(</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">height</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">y</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">));</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outAlpha</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">a</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 5"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miTRUE</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#008000">// Default routine, output black</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">a</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">r</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">g</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">b</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> = 0.0f;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outColor</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">.</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">a</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">result</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">outAlpha</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000"> = 1.0f;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">return</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miFALSE</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 1"><font style="font-size: 9.5pt">&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">}</font></font></font></span><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font style="font-size: 9.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">First get the uv coordinate. We use the macro to decide which one should be use.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">miVector</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">coord</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">MAYA_CONNECTED</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(&amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">paras</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">uvCoord</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)) ?</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><font color="#000000"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></span><font style="font-size: 9.5pt"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr">*</span></font></font><font style="font-size: 9.5pt"><i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#6f008a">mi_eval_vector</font></span></i><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000">(&amp;</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">paras</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000000">-&gt;</font></span><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font color="#000080">uvCoord</font></span></font><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><font style="font-size: 9.5pt" color="#000000">) :</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="FR" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white; mso-ansi-language: fr"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">tex_list</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">[0];</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Then get the image file from the user data</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#880000"><font style="font-size: 9.5pt">mi_query</font></font></span></i><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(</font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">miQ_FUNC_USERPTR</font></span></i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">state</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">, 0, &amp;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">);</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 3"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#0000ff">if</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">(*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> != </font></span><i><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#6f008a">NULL</font></span></i></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">)</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font face="Consolas"><font color="#000000"><span style="mso-tab-count: 3"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span><font style="font-size: 9.5pt">{</font></font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; line-height: normal; text-autospace: ; mso-layout-grid-align: none" align="left"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><span style="mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">* </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = (</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#216f85">fileTexture_Userdata</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">*)*</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">user</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; mso-font-kerning: 0pt; mso-highlight: white"><font style="font-size: 9.5pt" color="#000000">;</font></span></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><font face="Consolas"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 4"><font color="#000000"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></font></span></span><font style="font-size: 9.5pt"><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"> = </font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">data</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000">-&gt;</font></span><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000080">image</font></span></font><span lang="EN-US" style="font-family: ; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt; mso-highlight: white"><font color="#000000"><font style="font-size: 9.5pt">;</font><span style="text-align: justify; text-justify: inter-ideograph; mso-tab-count: 4"><font style="font-size: 9.5pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font></span></font></span></font><span lang="EN-US" style="font-family: ; color: ; text-align: justify; text-justify: inter-ideograph; mso-font-kerning: 0pt"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">The rest of the code is pretty much as the same as the fileTexture::compute, you will read the color from image and output.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Compile it and put the mi and dll file to the Mental Ray folder, and your fileTexture can be rendered in both the Viewport and Mental Ray now. </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font color="#000000" face="Calibri"></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font color="#000000" face="Calibri">You can get the source code from my github: <a title="https://github.com/iamsleepy/fileTextureMentalRay" href="https://github.com/iamsleepy/fileTextureMentalRay">https://github.com/iamsleepy/fileTextureMentalRay</a></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">If your plug-in is loaded after your Mental Ray shader, you’ll need to create a mel script for loading it properly. You can find it in the “Relate Maya custom shaders to Mental Ray for Maya custom shaders” on our website.</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font color="#000000" face="Calibri"></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">&#160;</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">References:</font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Relate Maya custom shaders to Mental Ray for Maya custom shaders: </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><a style="text-align: justify; text-justify: inter-ideograph" href="http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=GUID-0966E345-CA9E-4C6D-B17A-0D0DA186A2A0"><font color="#0000ff" face="Calibri"><font style="font-size: 10.5pt">http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=GUID-0966E345-CA9E-4C6D-B17A-0D0DA186A2A0</font></font></a><font face="Calibri"><font style="font-size: 10.5pt" color="#000000"> </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><font face="Calibri"><font style="font-size: 10.5pt" color="#000000">Mental Ray standalone manual: </font></font></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-justify: inter-ideograph; line-height: normal" align="justify"><span lang="EN-US" style="text-align: justify; text-justify: inter-ideograph"><a style="text-align: justify; text-justify: inter-ideograph" href="http://docs.autodesk.com/MENTALRAY/2015/ENU/mental-ray-help/"><font color="#0000ff" face="Calibri"><font style="font-size: 10.5pt">http://docs.autodesk.com/MENTALRAY/2015/ENU/mental-ray-help/</font></font></a><font face="Calibri"><font style="font-size: 10.5pt" color="#000000"> </font></font></span></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Vijaya Prakash
AUTHOR EMAIL: vijaya.prakash@autodesk.com
TITLE: Maya 2016, Parallel Evaluation and New API’s
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2016-parallel-evaluation-and-new-apis
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Vijay Prakash

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/07/maya-2016-parallel-evaluation-and-new-apis.html 
DATE: 07/22/2015 02:19:26 AM
-----
BODY:
<p>When you start Maya 2016, you will automatically be in parallel evaluation mode. This is new default evaluation mode, replacing the legacy DG-based evaluation. Maya 2016 uses the DG’s dirty propagation mechanism to build the <span style="color: #40a0ff;">Evaluation Graph(EG)</span>. Dirty propagation is the process of walking through the DG, from animation curves to renderable objects, and marking attributes on DG nodes as needing to be re-evaluated (i.e., dirty). Unlike previous version of Maya that propagated dirty on every frame, Maya 2016 disables the dirty propagation once the EG is built, re-using the existing EG until it becomes invalid.</p>
<p>If your plug-in relies on custom dependency management, you’ll need to use new API extensions to ensure a correct evaluation. Since the EG is created using the legacy dirty-propagation mechanism, you’ll need to make sure your custom logic in the <span style="color: #bf00bf;">MPxNode::setDependentsDirty()</span> method override are accounted for.</p>
<p>&#0160;</p>
<p><span style="color: #0060bf;"><strong>New MPxNode::preEvaluation API</strong></span></p>
<p>To avoid performing expensive calculations every time <span style="color: #bf005f;">MPxNode::compute()</span> is called, one strategy plug-in developers can &#0160;use is to store the results from previous evaluations and then relying on <span style="color: #bf005f;">MPxNode::setDependentsDirty()</span> to trigger re-computation. Once the EG has been built, the dirty propagation is disabled and the EG is re-used. Therefore, any custom logic in your plug-in that depends on <span style="color: #bf005f;">setDependentsDirty()</span> will no longer apply.</p>
<p><span style="color: #bf005f;">MPxNode::preEvaluation()</span> allows your plug-in to determine which plugs/attributes are dirty and if any action is needed. This is usually only done within the <span style="color: #bf005f;">MDGContext::fsNormal</span> context. The new MEvaluationNode class can be used to determine what has been dirtied.</p>
<p>See the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_simple_evaluation_node_2simple_evaluation_node_8cpp_example_html" target="_blank" title="simpleEvaluationNode"><span style="color: #bf005f;"><strong><span style="color: #00bfbf;">simpleEvaluationNode</span> </strong></span></a>devkit example to understand how to use <span style="color: #bf005f;">MPxNode::preEvaluation()</span> method.</p>
<p>&#0160;</p>
<p><span style="color: #0060bf;"><strong>New MPxNode::postEvaluation API</strong></span></p>
<p>Until now it was difficult to determine when all processing for a particular node instance was complete. Users sometimes resorted to complex bookkeeping/callbacks schemes to detect this situation and perform additional work, such as custom rendering. This mechanism was cumbersome and error prone. A new method, <span style="color: #bf005f;">MPxNode::postEvaluation(),</span> is called once all computations have been performed on a specific node instance. Since this method is called from a worker thread, it is possible to perform calculations for downstream graph operations, without blocking other Maya processing tasks.</p>
<p>See the <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_simple_evaluation_draw_2simple_evaluation_draw_8cpp_example_html" target="_blank" title="simpleEvaluationDraw"><span style="color: #bf005f;"><strong><span style="color: #00bfbf;">simpleEvaluationDraw</span> </strong></span></a>devkit example to understand how to use <span style="color: #bf005f;">MPxNode::postEvaluation()</span> method.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: The millionth download from Autodesk Exchange Apps
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: the-millionth-download-from-autodesk-exchange-apps
CATEGORY: Autodesk
CATEGORY: Autodesk Exchange
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/07/the-millionth-download-from-autodesk-exchange-apps.html 
DATE: 07/13/2015 01:03:17 PM
-----
BODY:
<p>Quite a milestone has just been passed: more than a million apps have now been downloaded from Autodesk Exchange. The store has been running for a little over three years and is apparently home to over 1,800 apps in 14 languages that are available for download in 191 countries. Wow. Be sure to check out Autodesk Exchange Apps for AutoCAD, the largest of our various stores.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0851fd06970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d01bb0851fd06970d image-full img-responsive" title="One million download" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0851fd06970d-800wi" alt="One million download" border="0" /></a></p>
<p>Here’s a quick video celebrating this momentous event:</p>
<p><iframe width="360" height="281" src="https://www.youtube.com/embed/tGSdphEzQ_o?feature=oembed" frameborder="0" allowfullscreen=""></iframe>&nbsp;</p>
<p>A two-for-one! Another important milestones for Exchange is that we reach the 100 Maya apps posted on Exchange.</p>
<p>2 weeks ago I was in Singapore at the Autodesk Technical Summit 2015 before heading to San Francisco with a stop home to take the family with me.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cheng Xi Li
AUTHOR EMAIL: cheng.xi.li@autodesk.com
TITLE: Getting null from the MShaderManager::getShaderFromNode() in Maya 2015
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: getting-null-from-the-mshadermanagergetshaderfromnode-in-maya-2015
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/07/getting-null-from-the-mshadermanagergetshaderfromnode-in-maya-2015.html 
DATE: 07/02/2015 08:35:27 PM
-----
BODY:
<p>Getting null from the MShaderManager::getShaderFromNode()&#0160;in Maya 2015? Here comes one explanation.&#0160;To make a surface shader work in VP2, Maya has to sync the surface shader with its connected shape. It happens automatically with build-in shapes, but for custom meshes defined in a plugin, you need to get the shader through MShaderManager::getShaderFromNode() and set it with MRenderItem::setShader(). It becomes tricky in Maya 2015 since the MShaderManager cannot do this for you automatically and you will get nothing from MShaderManager::getShaderFromNode().Therefore, the only way to make it work is to assign your surface shader with a built-in mesh to make the MShaderManager::getShaderFromNode() work in VP2.</p>
<p>What about Maya 2016? Luckily, it has been improved: the MShaderManager::getShaderFromNode will check whether it has been synced and do the required job for you.&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Marsel Khadiyev
EMAIL: ephere@gmail.com
IP: 216.58.88.207
URL: 
DATE: 07/20/2015 08:52:03 AM
Can you please give a simple example of using getShaderFromNode? Google doesn't produce any results.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Registering a plug-in to work with Maya archive
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: markdown
ALLOW PINGS: 0
BASENAME: registering-a-plug-in-to-work-with-maya-archive
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: References

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/06/registering-a-plug-in-to-work-with-maya-archive.html 
DATE: 06/23/2015 06:04:48 PM
-----
BODY:
<p>To add external dependencies to the archive created by Maya with "File" --&gt; "Archive Scene", a plug-in developer needs to implement the MPxNode::getFilesToArchive() method.</p>

<p>The documentation is <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_class_m_px_node_html">here</a>. This will add the plug-in node's external dependencies to the archive. While you are at it, you can add any file paths to Maya’s File Path Editor UI using this command:</p>

<pre class="brush: shell; toolbar: false;">filePathEditor –registerType "myNode1.filePath" –typeLabel "Custom"
</pre>

<p>If you wish to add the external dependencies to metadata in the Maya file itself, use the getExternalContent() and setExternalContent() entry points. Unfortunately these did not get properly documented and are limited in scope (they do not support file sequences). There are shipped usage examples in our scene assembly nodes (look for getExternalContent and setExternalContent in these):</p>

<ul>
<li><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_scene_assembly_2assembly_reference_8h_example_html">sceneAssembly/assemblyReference.h</a></li>
<li><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_scene_assembly_2adsk_representations_8h_example_html">sceneAssembly/adskRepresentations.h</a></li>
<li><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_scene_assembly_2adsk_representations_8cpp_example_html">sceneAssembly/adskRepresentations.cpp</a></li>
<li><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_scene_assembly_2assembly_definition_8h_example_html">sceneAssembly/assemblyDefinition.h</a></li>
<li><a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__cpp_ref_scene_assembly_2assembly_definition_8cpp_example_html">sceneAssembly/assemblyDefinition.cpp</a></li>
</ul>

<p>A search for getExternalContent or setExternalContent in the search field of the online doc will reveal <a href="http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=__cpp_ref_index_html">more</a>. The Python API does have the expected documentation:</p>

<ul>
<li><a href="http://help.autodesk.com/cloudhelp/2016/ENU/Maya-SDK/py_ref/class_open_maya_1_1_m_px_node.html">MPxNode</a></li>
</ul>

<p>Another issue is that getFilesToArchive() will not be called on any MPxLocatorNode proxy derived class since the method was not implemented until the latest Maya 2016 service pack (SP1)</p>

-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Don't perform heavy tasks in the MoBu Real-time engine thread, even if it worked before
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: dont-perform-heavy-tasks-in-the-mobu-real-time-engine-thread-even-if-it-worked-before
CATEGORY: Animation
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Motion Capture
CATEGORY: MotionBuilder
CATEGORY: Visual Studio
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/06/dont-perform-heavy-tasks-in-the-mobu-real-time-engine-thread-even-if-it-worked-before.html 
DATE: 06/18/2015 08:03:00 AM
-----
BODY:
<p>Recently we received a question about crashing while calling FBPlayerControl::GotoStart() from within a real-time device engine thread. It seems working fine up to MoBu 2014, but crashes in MoBu 2015.</p>  <p>Actually, it seems working fine in previous MoBu releases, but as the best practice, it’s not recommended because the SDK documentation clearly mentions that some methods like DeviceIONotify() and DeviceEvaluationNotify() are called by the Real-time engine thread, and they should consume as little CPU time as possible and return as soon as possible. So it should contain only minimal operations, and especially should avoid UI related operations like FBPlayerControl::GotoStart().</p>  <p><img alt="" src="http://images.cnitblog.com/blog/496851/201411/201133154689488.png" /></p>  <p>Back to the issue – what if you’d like to control the player using an external device and access the FBPlayerControls from these methods?</p>  <p>To implement such feature, you should move the UI operation codes (FBPlayerControl::GotoStart()) out of the real-time engine (DeviceIONotify() and DeviceEvaluationNotify()) methods, </p>  <p>and cache the status of the operation from an OnUIIdle callback and call the FBPlayerControl::GotoStart() from there. I wrote a code snippet below to demonstrate how to solve the crash issue mentioned at the beginning of the post.</p>  <p><strong>Initialize:</strong></p>  <pre class="brush:cpp;toolbar: false;">m_NeedToPlay = false;
FBSystem().TheOne().OnUIIdle.Add( this,(FBCallback) &amp;ORDevice_Template::EventUIIdle );</pre>

<p><strong>Cache the status in DeviceEvaluationNotify:</strong></p>

<pre class="brush: cpp;toolbar: false;">bool ORDevice_Template::DeviceEvaluationNotify( kTransportMode pMode, FBEvaluateInfo* pEvaluateInfo )
{
    ... ...
    if(***)
        m_NeedToPlay = true;
    return true;
}</pre>

<p><strong>Call the UI operation in a UI Idle event:</strong></p>

<pre class="brush:cpp;toolbar: false;">void
ORDevice_Template::EventUIIdle(HISender pSender, HKEvent pEvent )
{
    if(m_NeedToPlay)
    {
        FBPlayerControl player;
        player.GotoStart();
    }
    m_NeedToPlay = false;
}</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building SIP, and PyQt for Maya 2016
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: building-sip-and-pyqt-for-maya-2016
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/05/building-sip-and-pyqt-for-maya-2016.html 
DATE: 05/22/2015 08:59:13 AM
-----
BODY:
<p><strong>This is an updated version for Maya 2016'&nbsp;PyQt build instructions.</strong></p>
<p>This is an updated version of the Maya 2015 build instructions for PyQt and PySide (<a href="http://around-the-corner.typepad.com/adn/2014/04/building-sip-and-pyqt-for-maya-2015.html" target="_self">here</a>). The very good news is that with Maya 2014 &amp; 2015 &amp; 2016, there is no more need to build PySide as it is coming by default in Maya :)&nbsp;</p>
<p>libxml, openSSL, OpenAL,&nbsp;python2.7, qt-4.8.5-64 / Maya 2014/2015, qt-4.8.6-64 / Maya 2016&nbsp;and tbb&nbsp;are also coming by default in the Maya include and lib folder, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a 'C:\Program Files\Autodesk\Maya2016\support\opensource' folder now which contains some of the community source. <a href="http://www.autodesk.com/lgplsource" target="_self">http://www.autodesk.com/lgplsource</a> is also a location you want to remember for future.</p>
<p>I'll come back later with instructions to rebuild Qt itself for those who needs to, but again you do not need to build Qt to build PyQt anymore.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi"><img style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" alt="Build-headacke" border="0" /></a></p>
<p>Maya 2016 also includes most of the tools we need to build PyQt without the need of compiling Qt source &amp; tools - so in this post we will see the easy way to build PyQt.</p>
<p>Download SIP and PyQt source from '<a href="http://www.riverbankcomputing.co.uk" target="_self">http://www.riverbankcomputing.co.uk</a>' - here I downloaded 'sip-4.16.7' and 'PyQt-win-gpl-4.11.3' (Note that you do not have to use these versions if you prefer using an older version, all you need is to use a version compatible with Qt4.8.6).&nbsp;Unzip them in one folder, then you should get something like this:</p>
<h2>Mac</h2>
<p style="padding-left: 30px;"><em>/Users/cyrille/Documents/_Maya2016Scripts/sip-4.16.7</em><br /><em>/Users/cyrille/Documents/_Maya2016Scripts/PyQt-mac-gpl-4.11.3</em></p>
<p style="padding-left: 30px;"><em>'/Users/cyrille/Documents/_Maya2016Scripts' being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Mac OS X environment, in the Maya Documentation)&nbsp;</p>
<p>Untar&nbsp;the /devkit/include/qt-4.8.6-include.tar.gz into /devkit/include/Qt</p>
<p>Copy /Resources/qt.conf into /bin/qt.conf and edit it like this:</p>
<pre class="brush: bash; toolbar: false;">
[Paths]
Prefix=
Libraries=../MacOS
Binaries=../bin
Headers=../../../devkit/include/Qt
Data=..
Plugins=../qt-plugins
Translations=../qt-translations
</pre>
<p>Untar the qt-4.8.6-64-mkspecs.tar.gz into $MAYA_LOCATION/Maya.app/Contents/mkspecs. And make sure the qconfig.pri looks like this:</p>
<p>qconfig.pri</p>
<pre class="brush: bash; toolbar: false;">#configuration
CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework
QT_ARCH = macosx
QT_EDITION = OpenSource
QT_CONFIG +=  minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework

#versioning
QT_VERSION = 4.8.6
QT_MAJOR_VERSION = 4
QT_MINOR_VERSION = 8
QT_PATCH_VERSION = 6

#namespaces
QT_LIBINFIX = 
QT_NAMESPACE = 
QT_NAMESPACE_MAC_CRC = 
</pre>
<p>You also need to create copy of the Qt lib files as fake .dylib files from the /MacOS directory.&nbsp;The script below will tell what to do when you first run it. I removed the lengthy 'if' from the script on that page, since I now posted the scripts on <a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">github</a>.</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD="`dirname \"$0\"`" # Relative
export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized
pushd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.16.7
export MAYA_LOCATION=/Applications/Autodesk/maya2016

pushd $SIPDIR
$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64
make
sudo make install
popd
popd
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD="`dirname \"$0\"`" # Relative
export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized
pushd $MAYAQTBUILD

export MAYA_LOCATION=/Applications/Autodesk/maya2016
export QTDIR=$MAYA_LOCATION/Maya.app/Contents
export QMAKESPEC=$QTDIR/mkspecs/macx-g++
export INCDIR_QT=$MAYA_LOCATION/devkit/include/Qt
export LIBDIR_QT=$QTDIR/MacOS

...

export DYLD_LIBRARY_PATH=$QTDIR/MacOS
export DYLD_FRAMEWORK_PATH=$QTDIR/Frameworks

export SIPDIR=$MAYAQTBUILD/sip-4.16.7
export PYQTDIR=$MAYAQTBUILD/PyQt-mac-gpl-4.11.3

pushd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py --use-arch x86_64 LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
popd
popd</pre>
<p><strong>Note:</strong> In the shipping version of Maya 2016, PyQT will fail to execute because of a hidden phonon symbol. There is a QTBUG reference at <a href="https://bugreports.qt.io/browse/QTBUG-37209" target="_self">https://bugreports.qt.io/browse/QTBUG-37209</a> which would support the change in compiler - exporting symbol issue. There is a Qt source change suggested for the CLANG build to export symbols. You can get the fixed file from <a href="https://github.com/cyrillef/Maya-PyQt-Scripts/archive/v2016.0.tar.gz" target="_self">here</a> in the meantime, but note that it would break the digital signature of Maya on OSX. Copy the file binaries/phonon into '/Applications/Autodesk/maya2016/Maya.app/Contents/MacOS' and restart Maya.</p>
<p>You're done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github <a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Linux</h2>
<p style="padding-left: 30px;"><em>/home/cyrille/Documents/_Maya2016Scripts/sip-4.16.7</em><br /><em>/home/cyrille/Documents/_Maya2016Scripts/PyQt-mac-gpl-4.11.3</em></p>
<p style="padding-left: 30px;"><em>'/home/cyrille/Documents/_Maya2016Scripts' being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux environments (64 bit), in the Maya Documentation).</p>
<p>Edit your qt.conf file (/usr/autodesk/maya2016-x64/bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Untar the /include/qt-4.8.6-include.tar.gz into /include/Qt</p>
<p>Untart the /mkspecs/qt-4.8.6-mkspecs.tar.gz into /mkspecs</p>
<p>Make qmake, moc executables from the Maya bin directory</p>
<pre class="brush: shell; toolbar: false;">sudo chmod aog+x /usr/autodesk/maya2016-x64/bin/moc
sudo chmod aog+x /usr/autodesk/maya2016-x64/bin/qmake
</pre>
<p>Build &amp; Install SIP</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD="`dirname \"$0\"`" # Relative
export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized
pushd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.16.7
export MAYA_LOCATION=/usr/autodesk/maya2016-x64

pushd $SIPDIR
$MAYA_LOCATION/bin/mayapy ./configure.py
make
sudo make install
popd
popd</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD="`dirname \"$0\"`" # Relative
export MAYAQTBUILD="`( cd \"$MAYAQTBUILD\" &amp;&amp; pwd )`" # Absolutized and normalized
pushd $MAYAQTBUILD

export MAYA_LOCATION=/usr/autodesk/maya2016-x64
export QTDIR=$MAYA_LOCATION
export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64
export INCDIR_QT=$MAYA_LOCATION/include/Qt
export LIBDIR_QT=$QTDIR/lib

...

export SIPDIR=$MAYAQTBUILD/sip-4.16.7
export PYQTDIR=$MAYAQTBUILD/PyQt-x11-gpl-4.11.3

pushd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
popd
popd</pre>
<p>You're done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github&nbsp;<a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Windows</h2>
<p style="padding-left: 30px;"><em>D:\__sdkext\_Maya2016 Scripts\sip-4.16.7</em><br /><em>D:\__sdkext\_Maya2016 Scripts\PyQt-win-gpl-4.11.3</em></p>
<p style="padding-left: 30px;"><em>'D:\__sdkext\_Maya2016 Scripts' being my local folder. Now the instructions and scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows environment (64‐bit), in the Maya Documentation)</p>
<p>Edit your qt.conf file (C:\Program Files\Autodesk\Maya2016\bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Unzip the /include/qt-4.8.6-64-include.tar.gz into /include/Qt</p>
<p>Unzip the /mkspecs/qt-4.8.6-64-mkspecs.tar.gz into /mkspecs</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: "%MAYAQTBUILD%"

set SIPDIR=v:\sip-4.16.7
set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0
if ["%LIBPATH%"]==[""] call "%MSVC_DIR%\VC\vcvarsall" amd64

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2016
set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

pushd %SIPDIR%
"%MAYA_LOCATION%\bin\mayapy" configure.py
nmake
nmake install
popd</pre>
<p>Build &amp; Install PyQt</p>
<p>Note that I had issues building PyQT on Windows this time. When the makefile was building 'pylupdate', it hangs forever, and complains about an undefined macro &lt;?, grrrr.... The reason is that pyQT makefile now uses that macro which means use the first build dependency file. But nmake does not seems to like it, so I added some code to bypass the makefile rule. See below the call to '%QTDIR%\bin\moc.exe -o moc_translator.cpp translator.h'</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: "%MAYAQTBUILD%"

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2016
if exist m:\nul subst m: /d
subst m: "%MAYA_LOCATION%"
set MAYA_LOCATION=m:

set QTDIR=%MAYA_LOCATION%
set MSVC_VERSION=2012
set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%<br />set _QMAKESPEC_=win32-msvc%MSVC_VERSION%
<br />...

set SIPDIR=v:\sip-4.16.7
set PYQTDIR=v:\PyQt-win-gpl-4.11.3

set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0
if ["%LIBPATH%"]==[""] call "%MSVC_DIR%\VC\vcvarsall" amd64

set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

pushd %PYQTDIR%

pushd pylupdate
del moc_translator.cpp 2&gt; nul
del moc_translator.obj 2&gt; nul
%QTDIR%\bin\moc.exe -o moc_translator.cpp translator.h
popd

set PATH=%QTDIR%\bin;%PATH%
"%MAYA_LOCATION%\bin\mayapy" configure.py -p %QMAKESPEC% LIBDIR_QT=%QTDIR%\lib INCDIR_QT=%QTDIR%\include\Qt MOC=%QTDIR%\bin\moc.exe -w --no-designer-plugin
nmake
nmake install
popd
</pre>
<p>You're done! go to the testing paragraph at the end of the article.</p>
<p>Download the scripts from github&nbsp;<a href="https://github.com/cyrillef/Maya-PyQt-Scripts" target="_self">here</a>.</p>
<h2>Testing</h2>
<p>Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:</p>
<pre class="brush: python; toolbar: false;">import sys
from PyQt4 import QtGui


class Example(QtGui.QWidget):
    
    def __init__(self):
        super(Example, self).__init__()
        
        self.initUI()
        
    def initUI(self):      

        self.btn = QtGui.QPushButton('Dialog', self)
        self.btn.move(20, 20)
        self.btn.clicked.connect(self.showDialog)
        
        self.le = QtGui.QLineEdit(self)
        self.le.move(130, 22)
        
        self.setGeometry(300, 300, 290, 150)
        self.setWindowTitle('Input dialog')
        self.show()
        
    def showDialog(self):
        
        text, ok = QtGui.QInputDialog.getText(self, 'Input Dialog', 'Enter your name:')
        
        if ok:
            self.le.setText(str(text))
        
ex = Example()
</pre>
<p>&nbsp;If you see the dialog is showing, you are all set :)</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Some tips about the life cycle of Maya thread pool
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: some-tips-about-the-life-cycle-of-maya-thread-pool
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Windows
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/05/some-tips-about-the-life-cycle-of-maya-thread-pool.html 
DATE: 05/19/2015 10:06:00 PM
-----
BODY:
<p>Maya provides a class named MThreadPool to help developers to create or reuse a thread pool, if you want to know more about this, you can check out the online SDK <a href="http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=__files_GUID_2BEF58D3_6162_4235_A6CE_3D8B0742A0AE_htmand http://help.autodesk.com/view/MAYAUL/2015/ENU/?guid=__cpp_ref_class_m_thread_pool_html" target="_blank">here</a>.</p>
<p>If you want to know how to use MThreadPool, besides the above link, you can check out our 2 samples, <strong>threadTestCmd</strong> and <strong>threadTestWithLocksCmd</strong> in the Maya devkit.</p>
<p>In the 2 samples mentioned above, you will see that MThreadPool is actually released twice by using MThreadPool::release(). The big question for me was why do you need to release it twice?</p>
<pre class="brush: cpp; toolbar: false;">// pool is reference counted. Release reference to current thread instance
MThreadPool::release();

// release reference to whole pool which deletes all threads
MThreadPool::release();</pre>
<p>Whenever the thread pool is created, it actually sets the count reference to 1, instead of 0, so when we call MThreadPool::init(), the reference count will be increased to 2. So if you release it once, it just decrease the reference count to 1, which will not kill the thread pool. This is the reason why you have to always release it 2 times to destroy it. </p>
<p>The SDK online help says "Since creation and deletion of threads is expensive, it is a good idea to make use of the thread pool where possible, and try to keep it around between invocations of the plug-in rather than recreate it each call.". Maya is trying to keep the thread pool alive during the life cycle to improve performances, and the thread pool always survives unless you manually decrease the reference count to 0.&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p><img style="float: none; margin-left: auto; display: block; margin-right: auto;" src="http://images.cnitblog.com/blog/496851/201412/121742053214203.jpg" alt="" width="400" height="225" /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk University Call for Proposals
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: autodesk-university-call-for-proposals
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/05/autodesk-university-call-for-proposals.html 
DATE: 05/12/2015 04:54:00 AM
-----
BODY:
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d110d6c2970c-pi" style="display: inline;"><img alt="AU" border="0" class="asset  asset-image at-xid-6a0167607c2431970b01b8d110d6c2970c image-full img-responsive" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d110d6c2970c-800wi" title="AU" /></a></p>

<p>The Autodesk University Call for Proposals will close on May 26<sup>th</sup>, so there's still time to submit a proposal and get free entry to AU.</p>
<p>My colleague, Stephen Preston, being the track lead for the 'Developer' track, is particularly interested in persuading you to submit a proposal for a class or lab on an API/programming topic. Your proposal could be on an Autodesk API, but we also like to include a few classes/labs each year on general programming topics (programming languages, web/mobile/desktop programming, testing, debugging, application design, etc, etc).</p>
<p>Visit&nbsp;<a href="http://au.autodesk.com/speaker-resource-center/call-for-proposals" target="_blank">http://au.autodesk.com/speaker-resource-center/call-for-proposals</a>&nbsp;to find out more.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: Advantage and limitation of using MUiDrawManager in VP 2.0
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: advantage-and-limitation-of-using-muidrawmanager-in-vp-20
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: OpenGL
CATEGORY: Rendering
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/05/advantage-and-limitation-of-using-muidrawmanager-in-vp-20.html 
DATE: 05/10/2015 01:12:00 PM
-----
BODY:
<p>VP 2.0 provides a very convenient way for plugin developers to draw some simple basic UI elements such as lines, circles, arcs, text, …. In Maya 2016, it now provides the ability to support drawing icons. By using MUiDrawManager, plugin developers do not need to consider the different GPU device, it will work for all.</p>
<p>MUiDrawManager is very powerful, some developers mention that they are trying to use that as much as possible. Actually, we provide several interfaces for partners to use MUiDrawManager in different context which includes:</p>
<ul>
<li>MPxDrawOverride</li>
<li>MPxGeometryOverride</li>
<li>MPxManipContainer</li>
<li>MPxManipulatorNode</li>
<li>MPxContext</li>
<li>MUserRenderOperation/MHUDRender/MSceneRender</li>
</ul>
<p>For more details about using MUiDrawManager with the above interfaces, please check out the Maya online SDK help <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_A9DE3226_0708_4FAA_9B97_C5FF6574688A_htm">here</a>. But before really using this class, there is something important you need to know first.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb082cee27970d-pi"><img alt="clip_image001[25]" border="0" height="186" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d1127ae9970c-pi" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" title="clip_image001[25]" width="463" /></a></p>
<p>&#0160;</p>
<p>Unlike other Draw API which are used as immediate mode drawing, MUiDrawManager is different, it does not draw anything in the scene directly. Instead, this API will queue the draw operations in a special ‘retain’ mode. In another word, MUiDrawManager does not work with the GPU directly, you cannot access any GPU status while using MUiDrawManager. Also notice that MUiDrawManager only work with MFrameContext instead of MDrawContext. If anyone asks if they can draw some basic elements by using MUiDrawManager, and the draw operation needs to get information from the GPU, the answer is “<strong>No</strong>”.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Zhong Wu
AUTHOR EMAIL: 38434087@qq.com
TITLE: New Api changes for Maya 2016 &amp; MotionBuilder 2016
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: new-api-changes-for-maya-2016-motionbuilder-2016
CATEGORY: Autodesk
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Zhong Wu

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/04/new-api-changes-for-maya-2016-motionbuilder-2016.html 
DATE: 04/22/2015 11:55:00 AM
-----
BODY:
<p>I just came back from Montreal for our team meeting there, this is my 1st time to be there, very nice city.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c77d68f3970b-pi"><img alt="IMG_20150414_182651" border="0" height="180" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d106ec8c970c-pi" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border: 0px;" title="IMG_20150414_182651" width="240" /></a></p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb08216b97970d-pi"><img alt="IMG_20150416_064616" border="0" height="180" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d106ec91970c-pi" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border: 0px;" title="IMG_20150416_064616" width="240" /></a></p>
<p>It’s a great opportunity to meet with my team members again who are located in different countries, and I also met many engineers in the Maya, FBX and 3ds Max team. It has been really exciting.</p>
<p>The new release of Maya 2016 version was announced on 16th April and everything is open to public now. I cannot wait to share the exciting API changes/improvement for Maya 2016.</p>
<p>The first thing you need to know is that devkit is not a part of Maya installation anymore. It’s now available online at <a href="https://apps.exchange.autodesk.com/MAYA/en/Detail/Index?id=appstore.exchange.autodesk.com:autodeskmaya2016developerkit_windows64:en" target="_blank">Autodesk Exchange</a>, and it will be maintained and updated on exchange store and <a href="http://www.autodesk.com/developmaya" target="_blank">Maya develop center</a> in the future. If you want to download that, please make sure you select the correct platform.</p>
<p>There are also some big changes for Maya 2016 API. If you are working on the rendering side, now Maya provides you powerful rendering python APIs, and together with some python script samples for your reference. Additionally there are also lots of improvements on rendering side for Maya 2016, you can check the details in “<a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_6644CF46_6648_45B8_A3D8_76EDD7712571_htm" target="_blank">What’s new/what’s changed</a>” section of the online SDK help.</p>
<p>Animation is another big change of Maya 2016 API and introduces evaluation manager to support multithreaded evaluation, also, it provides the support of GPU override to deformers by MPxGPUDeformer. You can refer to some samples like offsetNode and identityNode in the devkit.</p>
<p>There are a lot of other improvements for Maya 2016 API. Please check the link <a href="http://help.autodesk.com/view/MAYAUL/2016/ENU/?guid=__files_GUID_6644CF46_6648_45B8_A3D8_76EDD7712571_htm" target="_blank">here</a> and play with the new samples, and enjoy your work ;).</p>
<p>For MotionBuilder 2016, there is not as much change as Maya 2016, but we still have some improvement. Please visit <a href="http://www.autodesk.com/motionbuilder-sdkdoc-2016-enu" target="_blank">here</a> for the changes in detail.</p>
<p><a name="_msocom_1"></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Fedora Core 20 gcc 4.8.2 Installation instructions
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: fedora-core-20-gcc-482-installation-instructions
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Maya
CATEGORY: Tools

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/04/fedora-core-20-gcc-482-installation-instructions.html 
DATE: 04/22/2015 12:00:00 AM
-----
BODY:
<p>If you are trying to build and install gcc 4.8.2 from source code on Fedora Core 20 box, you will find lot of challenges to fix the dependencies. To fix that issue and to reduce the time here I have listed out the steps to be followed to get the successful build.</p>
<h2>Install build pre-requisites:</h2>
<p>Before installing gcc 4.8.2, install the build pre-requisites<br />1. yum groupinstall &quot;Development tools&quot;<br />2. yum install glibc-devel.i686 glibc-i686<br />3. yum install gcc-c++<br />4. yum install m4<br />5. yum install wget<br />6. Yum install zlib zlib-devel</p>
<h2>Download, build and install gcc pre-requisites</h2>
<p>1. wget -c https://gmplib.org/download/gmp/gmp-5.1.3.tar.bz2<br /> $ tar -jxf gmp-5.1.3.tar.bz2<br /> $ cd gmp-5.1.3/<br /> $ ./configure<br /> $ make<br /> $ make install</p>
<p>2. wget -c http://www.mpfr.org/mpfr-current/mpfr-3.1.2.tar.bz2<br /> $ tar -jxf mpfr-3.1.2.tar.bz2<br /> $ cd mpfr-3.1.2<br /> $ ./configure --with-gmp=~/gcc482/gmp-5.1.3<br /> $ make<br /> $ make install</p>
<p>3. wget -c http://www.multiprecision.org/mpc/download/mpc-1.0.1.tar.gz<br /> $ tar -zxf mpc-1.0.1.tar.gz<br /> $ cd mpc-1.0.1/<br /> $ ./configure --with-gmp=~/gcc482/gmp-5.1.3 --with-mpfr=~/gcc482/mpfr-3.1.2<br /> $ make<br /> $ make install</p>
<h2>Build gcc 4.8.2</h2>
<p>1. wget -c http://mirrors.ispros.com.bd/gnu/gcc/gcc-4.8.2/gcc-4.8.2.tar.bz2<br /> $ tar -jxf gcc-4.8.2.tar.bz2<br /> $ cd gcc-4.8.2<br /> $ ./configure --prefix=/opt/gcc482 --with-gmp=~/gcc482/gmp-5.1.3 --with-mpfr=~/gcc482/mpfr-3.1.2 --with-mpc=~/gcc482/mpc-1.0.1<br /> $ make<br /> $ su root<br /> $ make install</p>
<h2>Mapping gcc on the system</h2>
<p>$ cd /usr/bin<br /> $ ln -s /opt/gcc482/bin/gcc gcc482 <br /> $ ln -s /opt/gcc482/bin/g++ g++482</p>
<p>&#0160;</p>
<p>This article is a contribute from Vijay Prakash from the ADN team, Vijay is located in Bangalore, India and is one of our Maya expert.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya compiler versions (update)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-compiler-versions-update
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/04/maya-compiler-versions-update.html 
DATE: 04/16/2015 08:00:00 AM
-----
BODY:
<p>This is an update on previous posts for older versions which can be found here:&#0160;<a href="http://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html" target="_self">Maya 2015</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html" target="_blank">Maya 2014</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html" target="_blank">Maya 2008 to 2013</a>.</p>
<h3>Maya 2016</h3>
<h4>Windows 64bit Win7x64</h4>
<p>Visual Studio 2012 Update 4 + Win 8 SDK<br /> .Net framework 4.5.1<br /> Intel Composer XE 2015 Initial release (15.0.0.108)</p>
<h4>Linux 64bit RHEL/CentOS 6.5, FC20</h4>
<p>gcc 4.8.2<br /> Intel Composer XE 2015 Update 1 (15.0.1.133)</p>
<p><strong>Note:</strong> For our internal builds on RHEL/CentOS 6.5, we use Red Hat DTS 2.1 to have gcc 4.8.2, plug-in developers can use the default 4.4.7 compiler if you want and not worry about obtaining/installing DTS 2.1. It depends on what your needs are, if you need the newer c++11 features enabled in gcc 4.8.2 or not.</p>
<h4>Mac 64bit Mavericks 10.9.5</h4>
<p>Xcode 6.1 or 6.1.1 with SDK 10.9 (Mavericks)<br /> clang with libstdc++<br /> Intel Composer XE 2015 Update 1 (15.0.1.108)</p>
<h3>Extensions (all platforms)</h3>
<p>Embedded Python 2.7.6 - Internal to Maya<br /> Embedded PySide 1.2<br /> Qt 4.8.6<br /> Boost 1.52 with its own namespace awBoost (internally using 1.55), Alembic uses Boost 1.55<br /> <a href="http://threadingbuildingblocks.org/download#stable-releases" target="_self">TBB 4.3 Update 1</a><br /> <a href="http://www.microsoft.com/download/en/details.aspx?id=6812" target="_self">DirectX SDK June 2010 (DX11)</a><br />MR 3.12.0.4<br /> OpenEXR 2.2<br /> Open SubDiv 2.5</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Meg Mitchell
EMAIL: mail@megmitchell.ca
IP: 216.123.152.66
URL: http://megmitchell.ca
DATE: 04/29/2015 09:25:56 AM
Hey,

The link for Maya 2015 goes to Maya 2014. Maya 2015 info is here:

http://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html

Thanks so much for providing this info on your blog. 
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.87.165
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 04/29/2015 09:32:27 AM
Hi Meg,

Thx for pointing out the mistake - it is fixed now,

-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Fix your Motion sickness or kinetosis with VR devices
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: fix-your-motion-sickness-or-kinetosis-with-vr-devices
CATEGORY: Augmented reality
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: OpenGL
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/03/fix-your-motion-sickness-or-kinetosis-with-vr-devices.html 
DATE: 04/01/2015 02:00:00 AM
-----
BODY:
<p>Few months back, I started to work on exploring usage of the Kinect with Maya, but lately was asked to worked on many of the Autodesk Cloud Services implementation and a WEBGL implementation for the <a href="http://developer-autodesk.github.io/" target="_self">Autodesk 3D viewer</a>. While working on this project, I had the chance to try few others things, like a <a href="http://vr.autodesk.io/" target="_self">VR experience</a> using the 3d viewer (source code posted <a href="https://github.com/ADN-DevTech/google-cardboard-vr" target="_self">here</a>). The 3d viewer technology was not design for VR, nor it was intended to be in future, but it turned out to be fairly easy to implement using google cardboard, or an Oculus Rift. I’ll probably talk about this in a future post, but today I wanted to share my experience with the Oculus Rift or Samsung Gear.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97a8b970c-pi" style="display: inline;"><img alt="Nausea" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d0f97a8b970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97a8b970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Nausea" /></a></p>
<p>If you ever tried the Oculus rift before or similar devices, you probably suffered from the ‘<a href="http://en.wikipedia.org/wiki/Motion_sickness" target="_self">motion sickness</a>’ after few minutes. Motion sickness due to virtual reality is very similar to simulation sickness and motion sickness due to films. In virtual reality, however, the effect is made more acute as all external reference points are blocked from vision, the simulated images are three-dimensional and in some cases stereo sound that may also give a sense of motion. The NADS-1, a simulator located at the National Advanced Driving Simulator, is capable of accurately stimulating the vestibular system with a 360-degree horizontal field of view and 13 degree of freedom motion base. Studies have shown that exposure to rotational motions in a virtual environment can cause significant increases in nausea and other symptoms of motion sickness. A conflict between signals from a person&#39;s eyes (which are moving around a virtual environment) and ears (which do not register any movement) can quickly lead to disorientation and motion sickness. But this really depends of the person, the scene in which you are, as well as the environment. The worse example for me is the Oculus ‘Tuscany’ demo because of the graphics quality and the game play (this demo is a Unity engine demo plugged with Oculus rift).</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97ae4970c-pi" style="display: inline;"><img alt="Tuscany3" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d0f97ae4970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97ae4970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Tuscany3" /></a></p>
<p>Great demo, but I am getting sick very quickly,… like 10 seconds after getting in the house  There is a lot of legend around the causes of the Motion Sickness with the Oculus Rift, but remember that it is an aggregation of multiple factors and depends of the people. People tried to find ways to solve the problem with mixed successes, one of the suggestions I got from a colleague to cure motion sickness in virtual reality headset is to add a virtual nose into the scene. A very serious article was posted <a href="http://www.express.co.uk/life-style/science-technology/566466/Oculus-Rift-HTC-Vive-Virtual-Reality-Headset-Motion-Sickness-Virtual-CGI-Nose" target="_self">there </a>to explain the reasoning behind.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97b0a970c-pi" style="display: inline;"><img alt="Cgi-Nose-Cures-Virtual-Reality-Disorientation-And-Sickness-Disorientation-In-Virtual-Reality-Htc-Vive-Headset-Launch-269192" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d0f97b0a970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0f97b0a970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Cgi-Nose-Cures-Virtual-Reality-Disorientation-And-Sickness-Disorientation-In-Virtual-Reality-Htc-Vive-Headset-Launch-269192" /></a></p>
<p>I tried this in my own code, but I had to admit that wasn’t enough to make me feel better, so I spent a fair amount of time to find a good alternative which would work for everyone. I started the fact it worked well in 2d, read tons of articles and tricks people were trying/implementing to get rid of this problem, but taking into account that the resources are limited. I finally came to the a novel idea which is very cheap, easy to implement on all system, and immediately effective. Here is the final prototype I came up with. Once you put the Samsung Gear or Oculus rift on, you won’t suffer anymore from Motion sickness. Truly working and effective. Why is it so effective? Simply because you are goig to relax your brain from trying to catch-up with the sense of motion made by 3d content. Here is the resulting prototype before heading the VR device.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c76fd313970b-pi" style="display: inline;"><img alt="Pirate" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01b7c76fd313970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c76fd313970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Pirate" /></a></p>
<p>Read more on the prototype and open design associated <a href="http://en.wikipedia.org/wiki/April_Fools%27_Day" target="_self">here</a>.</p>
<p>Final word, a colleague challenged me asking what if I am still sick with that solution. My straight answer was, you could try putting a second one on.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Naiqi Weng
AUTHOR EMAIL: naiqi.weng@autodesk.com
TITLE: Evaluating Node Attribute
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: evaluating-node-attribute
CATEGORY: C++
CATEGORY: Maya
CATEGORY: Naiqi Weng
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/03/evaluating-node-attribute.html 
DATE: 03/10/2015 08:13:14 AM
-----
BODY:
<p>Often in times, when people are grabbing attribute values working with Dependency Graph (DG) Nodes, people stumble across the situation what is the best way to access attribute values.&#0160; At a first glance, it looks both MPlug and MDataHandle can access attribute values and both of them would work.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb07fe49d7970d-pi" style="display: inline;"><img alt="Mplug-vs-handle" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb07fe49d7970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb07fe49d7970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Mplug-vs-handle" /></a></p>
<p>However there are some caveats that you need to be aware when you choose to use one instead of the other:</p>
<p>One distinct difference between MPlug and MDataHandle way to access attribute, which is also the general rule is: During evaluation of a custom node (e.g. inside of MPxNode::compute()), you should use an MDataHandle from the MDatablock which was passed to compute(). Outside of evaluation you should use MPlug.</p>
<p>There may be exceptions where you need to manipulate DG evaluation in unintended way ( e.g. force dirtying during evaluation or avoid forcing an evaluation outside of evaluation) or to improve performance in time-critical code, but since you are taking risks of DG not evaluating correctly, you are basically on your own if you break DG evaluation. Therefore unless you are pretty sure what you are doing, we don’t recommend it.</p>
<p>In a situation of getting attribute value outside of compute() using MDataHandle, you may wonder how you would actually go and implement it. If you look closely into MPxNode class, you will find this function: MPxNode::forCache(). This function call allows you to get a handle of MDataBlock outside of compute() with a timed context and access attribute value. This is useful in situations where the data can be accessed more quickly through the MDatablock. For example, MPlug access might end up copying an array while MDataHandle access will let you access it directly.&#0160; But you need to be aware MPxNode::forceCache() doesn’t guarantee the values are updated, which means when you use forceCache(), a plug could be dirty, but not evaluated yet.</p>
<p>Also another tip to pay attention is when you use MDataBlock::inputValue(), the data handle you retrieved from this call will guaranteed to be valid for reading. If the data is from a dirty connection, then the connection will be evaluated. MDataBlock::outputValue(), on the other hand, does not guarantee the data to be valid. You may get some invalid or not up-to-date values. That’s why MDataBlock::inputValue() is suggested to be used to get attribute value, while MDataBlock::outputValue() is recommended to be used to set attribute value.</p>
<p>If you really want to compare MPlug with MDataHandle, here is a short summary:</p>
<p>Some advantages of MPlug are:</p>
<ol start="1" type="1">
<li>It will handle all of the dirty propagation for you.</li>
<li>It will automatically do any required evaluations.</li>
<li>It will automatically create multi elements when&#0160;needed.</li>
</ol>
<p>Some advantages of MDataBlock/MDataHandle are:</p>
<ol start="1" type="1">
<li>Usually faster than MPlug.</li>
<li>Let you access a dirty plug&#39;s current value without&#0160;forcing it to evaluate.</li>
</ol>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Writing an FBX importer / Exporter plug-in
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: writing-an-fbx-importer-exporter-plug-in
CATEGORY: Animation
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: JSON
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: OpenGL
CATEGORY: Plug-in
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/01/writing-an-fbx-importer-exporter-plug-in.html 
DATE: 01/27/2015 04:00:11 AM
-----
BODY:
<p>While I am working on a WEBGL project, I wanted to share some hints I had to work through with you. The FBX documentation isn&#39;t clear on every steps, is a bit out of date even if it fairly easy to identify the pieces to update and spread all over the place. I hope that post will help on this.</p>
<center><img alt="" src="https://raw.githubusercontent.com/KhronosGroup/glTF/master/specification/figures/glTF_300.jpg" /></center>
<p>The project I am working on is a <a href="https://github.com/cyrillef/FBX-glTF" target="_self">glTF importer / exporter</a>. <a href="https://github.com/KhronosGroup/glTF" target="_self">glTF</a> is a specification (under development) for WEBGL asset (i.e.&#0160;glTF - the runtime asset format for WebGL, and OpenGL ES). What is nice with that specification is that it is a format that would load onto the various javascript WEBGL viewer without the need to program too much on the javascript side. So you would not need to learn any particular javascript viewing technology such as Three.js, Montage,js, Babylon.js, ...</p>
<p>In this post, I am going to explain the exporter code, but the importer code is very close with few exception such as deriving from FbxReader vs FbxWriter for an exporter.</p>
<ol>
<li>First, we create a new DLL project using &#39;Multithreaded DLL&#39; code generation. Visual Studio 2013 will create a Unicode project by default while the FBX SDK is MBCS still. Here you may change the character set to MBCS to avoid to have to convert back and force string from MBCS &lt;-&gt; UTF8/16.</li>
<li>Next, we create a plug-in class derived from FbxPlugin<br />
<pre class="brush: cpp; toolbar: false;">class IOglTF : public FbxPlugin {
	FBXSDK_PLUGIN_DECLARE(IOglTF) ;

public:
	static const char *PLUGIN_NAME ;
	static const char *PLUGIN_VERSION ;

protected:
	explicit IOglTF (const FbxPluginDef &amp;pDefinition, FbxModule pLibHandle) : FbxPlugin (pDefinition, pLibHandle) {
	}

	// Implement Fbxmodules::FbxPlugin
	virtual bool SpecificInitialize () ;
	virtual bool SpecificTerminate () { return (true) ; }

} ;
</pre>
<p>and the implementation (here we register the importer and export class that we will implement later)</p>
<pre class="brush: cpp; toolbar: false;">FBXSDK_PLUGIN_IMPLEMENT(IOglTF) ;

/*static*/ const char *IOglTF::PLUGIN_NAME =&quot;IO-glTF&quot; ;
/*static*/ const char *IOglTF::PLUGIN_VERSION =&quot;0.1.0&quot; ;

bool IOglTF::SpecificInitialize () {
	int registeredCount =0 ;
	int gltfReaderId =0, gltfWriterId =0 ;
	GetData ().mSDKManager-&gt;GetIOPluginRegistry ()-&gt;RegisterWriter (gltfWriter::Create_gltfWriter, gltfWriter::gltfFormatInfo, gltfWriterId, registeredCount, gltfWriter::FillIOSettings) ;
	GetData ().mSDKManager-&gt;GetIOPluginRegistry ()-&gt;RegisterReader (gltfReader::Create_gltfReader, gltfReader::gltfFormatInfo, gltfReaderId, registeredCount, gltfReader::FillIOSettings) ;
	return (true) ;
}</pre>
</li>
<li>Finally, to complete the plug-in part itself, we implement and export the FBXPluginRegistration() function:<br />
<pre class="brush: cpp; toolbar: false;">extern &quot;C&quot; {
	// The DLL is owner of the plug-in
	static IOglTF *pPlugin =nullptr ;

	// This function will be called when an application will request the plug-in
#if defined(_WIN64) || defined (_WIN32)
	__declspec(dllexport) void FBXPluginRegistration (FbxPluginContainer &amp;pContainer, FbxModule pLibHandle) {
#else
	void FBXPluginRegistration (FbxPluginContainer &amp;pContainer, FbxModule pLibHandle) {
#endif
		if ( pPlugin == nullptr ) {
			// Create the plug-in definition which contains the information about the plug-in
			FbxPluginDef pluginDef ;
			pluginDef.mName =FbxString (IOglTF::PLUGIN_NAME) ;
			pluginDef.mVersion =FbxString (IOglTF::PLUGIN_VERSION) ;

			// Create an instance of the plug-in.  The DLL has the ownership of the plug-in
			pPlugin =IOglTF::Create (pluginDef, pLibHandle) ;

			// Register the plug-in
			pContainer.Register (*pPlugin) ;
		}
	}
}
</pre>
</li>
<li>At step 2., we used the following symbols: Create_gltfWriter, gltfFormatInfo, FillIOSettings, that we need to implement now. These functions are used to describe what the importer/exporter classes are for, what file format they can handle, describe their IO options, etc... Here is the class declaration derived from FbxWriter<br />
<pre class="brush: cpp; toolbar: false;">class gltfWriter : public FbxWriter {
private:
	... my class members ...

public:
	gltfWriter (FbxManager &amp;pManager, int id) ;
	virtual ~gltfWriter () ;

	virtual bool FileCreate (char *pFileName) ;
	virtual bool FileClose () ;
	virtual bool IsFileOpen () ;
	virtual void GetWriteOptions () ;
	virtual bool Write (FbxDocument *pDocument) ;
	virtual bool PreprocessScene (FbxScene &amp;scene) ;
	virtual bool PostprocessScene (FbxScene &amp;scene) ;

	static FbxWriter *Create_gltfWriter (FbxManager &amp;manager, FbxExporter &amp;exporter, int subID, int pluginID) ;
	static void *gltfFormatInfo (FbxWriter::EInfoRequest request, int id) ;
	static void FillIOSettings (FbxIOSettings &amp;ios) ;

} ;
</pre>
<p>and the basic implementation</p>
<pre class="brush: cpp; toolbar: false;">gltfWriter::gltfWriter (FbxManager &amp;pManager, int id)
	: FbxWriter(pManager, id, FbxStatusGlobal::GetRef ())
{ 
}

gltfWriter::~gltfWriter () {
	FileClose () ;
}

bool gltfWriter::FileCreate (char *pFileName) {
	FbxString fileName =FbxPathUtils::Clean (pFileName) ;
	FbxString path (FbxGetApplicationDirectory ()) ;
	if ( !FbxPathUtils::Create (FbxPathUtils::GetFolderName (fileName)) )
		return (GetStatus ().SetCode (FbxStatus::eFailure, &quot;Cannot create folder!&quot;), false) ;
	
	&lt;open your file here&gt;

	return (IsFileOpen ()) ;
}

bool gltfWriter::FileClose () {
	&lt;flush and close your file here&gt;
	return (true) ;
}

bool gltfWriter::IsFileOpen () {
	&lt;is your file open?&gt;
}

void gltfWriter::GetWriteOptions () {
}

bool gltfWriter::Write (FbxDocument *pDocument) {
	FbxScene *pScene =FbxCast(pDocument) ;
	if ( !pScene )
		return (GetStatus ().SetCode (FbxStatus::eFailure, &quot;Document not supported!&quot;), false) ;

	if ( !PreprocessScene (*pScene) )
		return (false) ;

	FbxDocumentInfo *pSceneInfo =pScene-&gt;GetSceneInfo () ;

	&lt;write data in your file here&gt;

	if ( !PostprocessScene (*pScene) )
		return (false) ;
	return (true) ;
}


bool gltfWriter::PreprocessScene (FbxScene &amp;scene) {
	FbxNode *pRootNode =scene.GetRootNode () ;
	...
	return (true) ;
}

bool gltfWriter::PostprocessScene (FbxScene &amp;scene) {
	...
	return (true) ;
}

// Create your own writer - Your writer will get a pPluginID and pSubID. 
/*static*/ FbxWriter *gltfWriter::Create_gltfWriter (FbxManager &amp;manager, FbxExporter &amp;exporter, int subID, int pluginID) {
	FbxWriter *writer =FbxNew (manager, pluginID) ; // Use FbxNew instead of new, since FBX will take charge its deletion
	writer-&gt;SetIOSettings (exporter.GetIOSettings ()) ;
	return (writer) ;
}

// Get extension, description or version info about MyOwnWriter
/*static*/ void *gltfWriter::gltfFormatInfo (FbxWriter::EInfoRequest request, int id) {
	static const char *sExt [] = { &quot;gltf&quot;, 0 } ;
	static const char *sDesc [] = { &quot;glTF for WebGL (*.gltf)&quot;, 0 } ;
	static const char *sVersion [] = { &quot;0.8&quot;, 0 } ;
	static const char *sInfoCompatible [] = { &quot;-&quot;, 0 } ;
	static const char *sInfoUILabel [] = { &quot;-&quot;, 0 } ;

	switch ( pRequest ) {
		case FbxWriter::eInfoExtension:
			return (sExt) ;
		case FbxWriter::eInfoDescriptions:
			return (sDesc) ;
		case FbxWriter::eInfoVersions:
			return (sVersion) ;
		case FbxWriter::eInfoCompatibleDesc:
			return (sInfoCompatible) ;
		case FbxWriter::eInfoUILabel:
			return (sInfoUILabel) ;
		default:
			return (0) ;
	}
}

/*static*/ void gltfWriter::FillIOSettings (FbxIOSettings &amp;pIOS) {
	// Here you can write your own FbxIOSettings and parse them.
	// Example at: http://help.autodesk.com/view/FBX/2015/ENU/?guid=__files_GUID_75CD0DC4_05C8_4497_AC6E_EA11406EAE26_htm
	...
}
</pre>
</li>
</ol>
<p>This is all you need to see the exporter to appear in any FBX host application, or FBX extension which loads plug-ins. For example, if you write an application and want to load plug-in you would add code like this in your host code:</p>
<pre class="brush: cpp; toolbar: false;">FbxIOSettings *pIOSettings =FbxIOSettings::Create (_sdkManager, IOSROOT) ;
pIOSettings-&gt;SetBoolProp (IMP_FBX_MATERIAL, true) ;
...
pIOSettings-&gt;SetBoolProp (EXP_FBX_EMBEDDED, false) ;
...
_sdkManager-&gt;SetIOSettings (pIOSettings) ;

// Load plug-ins from the executable directory
FbxString path =FbxGetApplicationDirectory () ;
#if defined(_WIN64) || defined(_WIN32)
FbxString extension (&quot;dll&quot;) ;
#elif defined(__APPLE__)
FbxString extension (&quot;dylib&quot;) ;
#else // __linux
FbxString extension (&quot;so&quot;) ;
#endif
_sdkManager-&gt;LoadPluginsDirectory (path.Buffer ()/*, extension.Buffer ()*/) ;
_sdkManager-&gt;FillIOSettingsForReadersRegistered (*pIOSettings) ;
_sdkManager-&gt;FillIOSettingsForWritersRegistered (*pIOSettings) ;
</pre>
<p>Full source code posted on my github account <a href="https://github.com/cyrillef/FBX-glTF" target="_self">here</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Technical Evangelist Intern WANTED.
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: technical-evangelist-intern-wanted
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2015/01/technical-evangelist-intern-wanted.html 
DATE: 01/19/2015 08:44:49 AM
-----
BODY:
<p>Are you currently pursuing a bachelor’s or master’s in Computer science or a discipline with a strong computing component? Are you looking for a life changing Internship experience during your summer? Look no more, Autodesk Developer Network is looking for an enthusiastic intern evangelist for this summer in the Bay Area. If you’re excited by design, and by working with 3D on the web then keep reading.</p>
<p><a href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01bb07d5888a970d-pi"><img align="left" alt="Screen Shot 2015-01-08 at 1.03.55 PM" border="0" height="252" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b01b7c731c929970b-pi" title="Screen Shot 2015-01-08 at 1.03.55 PM" width="216" /></a>You&#0160; will start by learning the API and developing a plan for writing your sample application(s), which you will then implement. As you progress you will be blogging about your experiences using the API so others can follow in your steps. The finished samples will be posted to our public GitHub account and used by our Developer Evangelists around the world to showcase the API capabilities. There may be opportunities to attend hackathons, meetups and conferences as a sponsor to help spread the word about these amazing APIs.</p>
<p>In short, your task will be to have as much fun as possible doing cool things with our APIs – and then telling other people about the cool stuff you’ve done.</p>
<p>If you are up for the challenge and this sounds like you,&#0160;<a href="https://autodesk.taleo.net/careersection/adsk_cmp/jobdetail.ftl?job=14WD17104" target="_blank">APPLY TODAY</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: sandesh
EMAIL: info@indovance.com
IP: 98.26.91.201
URL: http://www.indovance.com/
DATE: 02/11/2015 08:32:45 PM
This looks like a great opportunity. When are you looking to hire by, or the deadline to apply by?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 80.13.173.141
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 02/11/2015 09:03:33 PM
Hi Sandesh, I believe, anytime from now until summer for this annoncement. But I know that will be still valid for the following year as the Cloud team will grow in the next couple of years.
-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Get ready for the Autodesk Cloud Accelerator Program
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: get-ready-for-the-autodesk-cloud-accelerator-program
CATEGORY: AU
CATEGORY: Autodesk
CATEGORY: Cloud
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: SaaS
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/11/get-ready-for-the-autodesk-cloud-accelerator-program.html 
DATE: 11/21/2014 12:00:00 AM
-----
BODY:
<p>Last week, I was in Melbourne and Sydney for Autodesk University Sydney and couple of meetups around game and animation. That was very cool to see people from the opposite side of the planet. As you can read, that was my first time in Australia :)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d094cef8970c-pi" style="display: inline;"><img alt="Late" class="asset  asset-image at-xid-6a0163057a21c8970d01b8d094cef8970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d094cef8970c-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Late" /></a></p>
<p>But Now, I need to rush on preparing for Autodesk University in Las Vegas this time. As always in the fall time, I am late on everything. The project using the Oculus Rift and Google cardboard is almost ready - still need to prepare the slides and handout... In the next few weeks, I am going to go through what I did.</p>
<p>&#0160;</p>
<p>In the meantime, my colleague Stephen Preston who runs the Developer Technical Services asked me to post the following message.</p>
<p><a class="asset-img-link" href="http://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d093ba27970c-pi" style="display: inline;"><img alt="Cloud accelerator image" class="asset  asset-image at-xid-6a0167607c2431970b01b8d093ba27970c img-responsive" height="358" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b01b8d093ba27970c-500wi" style="display: block; margin-left: auto; margin-right: auto;" title="Cloud accelerator image" width="480" /></a></p>
<ul>
<li>Have a great idea for a new product that leverages an Autodesk web service?&#0160;</li>
<li>Want up close and personal help from Autodesk to turn your idea into a working prototype? &#0160;</li>
<li>Interested in getting face to face with Autodesk Cloud Engineers to both learn and make sure they know what you want?</li>
</ul>
<p>If yes, the 2015 Autodesk Cloud Accelerator may be for you.</p>
<p>Autodesk will be hosting a Cloud Accelerator in our San Francisco office for up to 14 creative software developers for two weeks – March 9 to March 20, 2015. During the Accelerator, participants will work intensively on their chosen project&#0160; with the help, support, and training of the Autodesk Cloud engineering teams. This includes daily classes by industry experts on important aspects of Cloud development – and 1 on 1 help from these experts in real time. At the end of the Accelerator, you will also have the opportunity to present your prototype to senior Autodesk Executives.&#0160;<br /><br />To pursue a place in the Accelerator, send us a proposal (in English) of not more than 1000 words explaining why you should be one of participants and graduates in the “first class”. Proposals should be emailed to&#0160;<a href="mailto:adn-training-worldwide@autodesk.com" target="_self">adn-training-worldwide@autodesk.com</a>&#0160;no later than January 10, 2015. Successful candidates will be notified on or around January 17, 2015.<br /><br />How will Autodesk choose who participates in this first Cloud Accelerator class?<br /><br />To get a position in the Accelerator, Autodesk will be looking for the following in your proposal:</p>
<ul>
<li>Use of an Autodesk Web Service API to fill a compelling customer need. (View &amp; Data, AutoCAD® I/O, Autodesk® Fusion 360™, Autodesk® BIM 360™ or Autodesk® ReCap 360™)</li>
<li>Likelihood of having a demonstrable prototype by the end of the Accelerator.</li>
<li>Strong development skills.</li>
<li>High motivation.</li>
</ul>
<p>Too costly for you? &#0160;<br /><br />Autodesk recognizes two weeks of time out of the office, as well as travel and living costs, is a large investment. To partially offset these costs, Autodesk will pay lodging costs for all the developers in this first class (14 nights in a hotel). Up to 2 people from a single company will be accepted so be clear in your proposal if this is for 1 or 2 people (maybe you want both a product designer and developer to participate?). All other expenses are the responsibility of the participants including airfare and food (though you can be confident Autodesk will be buying a number of lunches and dinners for the class).<br /><br />Questions?<br /><br />Don’t be shy to ask us if you need more information to decide whether to apply. We are happy to talk with you about what you are considering developing as part of the Accelerator – or about details you may want to know on Accelerator logistics.</p>
<p>We want to help you make progress developing your own products that use Cloud technologies – whether or not you end up participating in the 2015 Accelerator. So we strongly encourage you to be quick to ask us any questions you may have on the Accelerator. Send your questions to&#0160;<a href="mailto:adn-training-worldwide@autodesk.com" target="_self">adn-training-worldwide@autodesk.com</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Naiqi Weng
AUTHOR EMAIL: naiqi.weng@autodesk.com
TITLE: Maya Profiler
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-profiler
CATEGORY: C++
CATEGORY: Debugging
CATEGORY: Maya
CATEGORY: Naiqi Weng
CATEGORY: Plug-in
CATEGORY: Tools

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/10/maya-profiler.html 
DATE: 10/16/2014 08:44:27 AM
-----
BODY:
<p>Have you ever wonder why your scene is running so slow? What’s the culprit of the performance degradation? In Maya 2015 extension, we provide a new profiler tool for you to track down performance bottlenecks in your scene by recording the amount of time that each process consumes.</p>
<p><a class="asset-img-link" href="http://player.ooyala.com/iframe.html#pbid=6055f5a2061d4016b11ebf1fa8a7751e&amp;ec=VnbGZrbzqnDJrWSwLfFcjIyKxNeQ-puo&amp;docUrl=http%3A%2F%2Fplayer.ooyala.com%2Fiframe.js%23pbid%3D6055f5a2061d4016b11ebf1fa8a7751e%26ec%3DVnbGZrbzqnDJrWSwLfFcjIyKxNeQ-pu" style="display: inline;" target="mel-profiler"><img alt="Profiler" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb07a4c12b970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb07a4c12b970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Profiler" /></a></p>
<p>We also provide programming interfaces to access this feature. Specifically, in MEL/Python, you can use command “profiler” to start and stop the recording of events, add profiling categories and instrument procedures for profiling.&#0160; &#0160;</p>
<p>Furthermore, two new classes,&#0160;MProfiler&#0160;and&#0160;MProfilingScope, have been added that allow you to work with Maya&#39;s&#0160;Profiler. MProfiler&#0160;is a static class which provides access to profiler settings and the profiling result. MProfilingScope&#0160;is used to profile code execution time. Profiling begins with the creation of an MProfilingScope&#0160;instance and ends when the instance is destroyed (e.g. when it goes out of scope at the end of the block in which it was declared). For example, if you want to profile any code snippet, you can instrument it like this:</p>
<p>{</p>
<p>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; MProfilingScope&#0160;profilingScope(testCategory, MProfiler::kColorD_L1, &quot;eventName&quot;, &quot;eventDescription&quot;);</p>
<p>&#0160;&#0160;&#0160;&#0160;&#0160; // The code snippet you want to profile.</p>
<p>}</p>
<p>For more information, you can check out the&#0160;MProfiler&#0160;and MProfilingScope&#0160;class documentation in Maya help online.</p>
<p>I image this would be very beneficial to TDs and sometimes plug-in developers. As this will give you a better idea of which part of evaluation is the bottleneck and help debug problems in your evaluation of Dependency Graph. So happy debugging!</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Devdays @ AU Las Vegas 2014
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-devdays-au-las-vegas-2014
CATEGORY: 3ds Max
CATEGORY: AU
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/10/adn-devdays-au-las-vegas-2014.html 
DATE: 10/16/2014 01:55:50 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0797b2b7970d-pi" style="display: inline;"><img alt="Au-header-small" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01bb0797b2b7970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb0797b2b7970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Au-header-small" /></a><br /><br />Back from <a href="http://hackzurich.com/" target="_self">HackZurich</a>, one of the Hackathons we are sponsoring this year. The winners had a good VR solution based on WebGL for viewing, 2 smart phones to create a stereo camera. That was neat...</p>
<p>Once again, we will present the <a href="http://area.autodesk.com/au2014/adn" target="_self"><strong>ADN Developer Conference</strong></a>&#0160;- <a href="http://autodeskdevdays.com/devdays-me-2014/" target="_self">DevDays</a> on December 1<sup>st</sup> (the day before <a href="http://area.autodesk.com/au2014" target="_self">AU</a>) where 3ds Max and Maya engineering will introduce the new APIs in the upcoming releases and DevHack, a drop-in programming workshop on December 2<sup>nd</sup>. We will also have a few industry lectures on making the best use of various APIs such as PySide, Python, the new 3ds Max CPython API, and more…</p>
<p>This year the conference is open to anyone. If you are not an ADN member and are interested in attending <a href="mailto:cyrille.fauvel@autodesk.com" target="_self">just talk to me</a> so that we can help you with the special ID and NDA required to register.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b001889a6970c-pi" style="display: inline;"><img alt="Unsure_smiley" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b001889a6970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b001889a6970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Unsure_smiley" /></a><br />If you are unsure if you should attend, take a look at <a href="http://area.autodesk.com/au2012/adn">2012’s lecture recordings</a>. They aren’t all posted, but they will give you a very good idea of what DevDays is all about. This year in particular would be a great time and place to come as we have several M&amp;E engineering people coming to tackle your questions/issues on almost all Autodesk products. We’re also available at DevHack for a whole afternoon on December 2<sup>nd</sup> from 1:00 p.m. – 5:30 p.m. I also invite you to contact me if you have any specific needs to talk to anyone @autodesk and I’ll try to arrange it.</p>
<p><strong>Come and see us @AU/Devdays – <a href="http://au.autodesk.com/plan/pre-conference/adn-conference-devdays" target="_self">Register here</a></strong></p>
<p><strong>or simply review the Autodesk M&amp;E venue @ AU <a href="http://area.autodesk.com/au2014" target="_self">here</a></strong></p>
<p>Here is the <a href="http://area.autodesk.com/au2014/adn" target="_self">agenda</a></p>
<p><strong>DevDays</strong> - Monday Dec 1<sup>st</sup></p>
<p>GENERAL SESSIONS (morning)</p>
<ul>
<li>ADN (DevDays) Conference General Session: M&amp;E</li>
<li>M&amp;E ADN DevDays Conference Keynote</li>
<li>Maya (next release) feature set and road map</li>
<li>3ds Max (next release) feature set and roadmap</li>
<li>Project Stingray</li>
<li>and more...&#0160;</li>
</ul>
<p>BREAKOUT SESSIONS (afternoon)</p>
<ol>
<li>The next release of 3ds Max® APIs</li>
<li>The next release of Maya® APIs&#0160;</li>
<li>Creating Efficient Scenes using the Maya Scene Assembly API&#0160;</li>
<li>Real Time Full Performance Capture in MotionBuilder with 360 degree Reference Footage</li>
</ol>
<p><strong>DevHack</strong> - Tuesday Dec 2<sup>nd</sup> - 1:00 p.m. - 5:30 p.m.</p>
<p>DevHack is a drop in workshop – you are invited to come and spend any part of the day. Bring your laptop and ask about, or work on, any problems with advice from DevTech engineers and API experts from Autodesk. Mingle with your fellow DevHackers. Perhaps you need some general design advice; or you’d like some guidance on implementing a specific algorithm. Or, you may want to spend some quality time learning to take advantage of the new cloud and/or mobile APIs you’ll learn about at DevDay. You could also get help publishing your app on Autodesk Exchange Apps. Anything goes – come for an hour or stay all day. We look forward to seeing you.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MNodeMessage::AttributeChangedCallback() not called on kAttributeRenamed
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: mnodemessageattributechangedcallback-not-called-on-kattributerenamed
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/10/mnodemessageattributechangedcallback-not-called-on-kattributerenamed.html 
DATE: 10/14/2014 01:01:40 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb079824e4970d-pi" style="display: inline;"><img alt="Change-My-Name" class="asset  asset-image at-xid-6a0163057a21c8970d01bb079824e4970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01bb079824e4970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Change-My-Name" /></a></p>
<p>Consider the following Python example</p>
<pre class="brush: python; toolbar: false;">import maya.OpenMaya as OM
import maya.cmds

def test (msg, plug, otherplug, *clientData):
    if msg &amp; maya.OpenMaya.MNodeMessage.kConnectionMade:
        print &quot;connection made&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kConnectionBroken:
        print &quot;connection broken&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeEval:
        print &quot;attribute eval&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeSet:
        print &quot;attribute set&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeLocked:
        print &quot;attribute locked&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeUnlocked:
        print &quot;attribute unlocked&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeAdded:
        print &quot;attribute added&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeRemoved:
        print &quot;attribute removed&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kAttributeRenamed:
        print &quot;attribute renamed&quot;
    if msg &amp; maya.OpenMaya.MNodeMessage.kOtherPlugSet:
        print &quot;attribute other plug set&quot;
        
    plugName =str (plug.partialName ())
    print &quot;attrName: &quot;, plugName
    print &quot;&quot;

node =maya.cmds.createNode (&quot;addDoubleLinear&quot;)

sel =OM.MSelectionList ()
sel.add (node)
obj =OM.MObject ()
sel.getDependNode (0, obj)

OM.MNodeMessage.addAttributeChangedCallback (obj, test)

# attribute added
maya.cmds.addAttr (node, sn=&quot;test&quot;)
# connection made; other plug set
maya.cmds.connectAttr (node + &quot;.test&quot;, node + &quot;.i1&quot;)
# attribute set ; attribute eval
maya.cmds.setAttr (node + &quot;.test&quot;, 1)
# no callback triggered
maya.cmds.getAttr (node + &quot;.test&quot;)
maya.cmds.getAttr (node + &quot;.i1&quot;)
# connection broken; other plug set
maya.cmds.disconnectAttr (node + &quot;.test&quot;, node + &quot;.i1&quot;)
# attribute locked
maya.cmds.setAttr (node + &quot;.test&quot;, lock=True)
# attribute unlocked
maya.cmds.setAttr (node + &quot;.test&quot;, lock=False)
# no callback triggered
maya.cmds.renameAttr (node + &quot;.test&quot;, &quot;testing&quot;)
maya.cmds.addAttr (node + &quot;.testing&quot;, e=True, nn=&quot;test2&quot;)
# attribute removed
maya.cmds.deleteAttr (node + &quot;.testing&quot;)
</pre>
<p>it will produce the following output</p>
<pre>attribute added
attrName: test

connection made
attribute other plug set
attrName: test

connection made
attribute other plug set
attrName: i1

attribute set
attrName: test

attribute eval
attrName: test

connection broken
attribute other plug set
attrName: test

connection broken
attribute other plug set
attrName: i1

attribute locked
attrName: test

attribute unlocked
attrName: test

attribute removed
attrName: testing
</pre>
<p>What you can notice is while the SDK doc says the event will be triggered when an attribute has been renamed, the event was not called when we renamed the attribute. From the log above, you can see it never gets invoked when a dynamic attribute name is changed. (a static node attribute cannot be renamed anyway, so it applies only to dynamic attributes)</p>
<p>However this message is triggered while you set/change an attribute name alias using the aliasAttr command. For example, &#39;maya.cmds.aliasAttr (&quot;testAlias&quot;, &quot;addDoubleLinear1.i1&quot;)&#39;, and notice the output of the attribute rename callback.</p>
<p>The message is only sent when the name of an alias is changed. It doesn’t appear any messages are sent when the renameAttr command changes a dynamic attribute’s name. Editing the attribute’s nice name is not considered a rename in either case, it is done a different way.</p>
<p>Unfortunately, there is no way at this time to detect the name changed. This is a documentation defect which needs to be addressed.</p>
<p>(Contribution from Zhong Wu)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Compiling NumPy and SciPy for Maya
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: compiling-numpy-and-scipy-for-maya
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Tools
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/10/compiling-numpy-and-scipy-for-maya.html 
DATE: 10/03/2014 12:25:12 AM
-----
BODY:
<p>The&#0160;<a href="http://www.numpy.org/" rel="nofollow">NumPy&#0160;</a>and&#0160;<a href="http://www.scipy.org/" rel="nofollow">SciPy</a>&#0160;packages come up frequently in support requests. There exists 64 bits versions maintained by&#0160;<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs" rel="nofollow">Christophe Gohlke</a>&#0160;built with VS 2008 but these are not compatible with Maya since the compiler used is more recent and the C/C++ runtime library mismatch causes instability.</p>
<p>Normally any user can build modules using the Express versions of Visual Studio and the provided setup.py scripts, but for these modules you need:</p>
<ul>
<li>a 3rd party linear algebra solver</li>
<li>a Fortran compiler</li>
</ul>
<h2>Solution:</h2>
<p>There are currently two ways to generate these 64 bit libraries:</p>
<ul>
<li>Use Intel Fortran compiler and the MKL solver</li>
<li>Use a custom built mingw-w64 toolchain with any compatible open sourced solver</li>
</ul>
<p>The NumPy/SciPy team are on the receiving end of&#0160;<a href="http://mail.scipy.org/pipermail/numpy-discussion/2013-September/067750.html" rel="nofollow">free copies</a>&#0160;of the Intel tools and they can redistribute the MKL libraries as part of the packages, but doing the same on the Autodesk side would require some licensing negotiations with Intel before proceeding further. This is a very viable option, but until the legal aspect is cleared, we are left with exploring ways where the Mingw-w64 toolchain can be used to generated these libraries.</p>
<h2>Packages:</h2>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/numpy-1.7.1-Maya2014.win-amd64.7z?version=1&amp;modificationDate=1380050503000&amp;api=v2">NumPy 1.7.1 for Maya 2014</a></p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/scipy-0.12.0-Maya2014.win-amd64.7z?version=1&amp;modificationDate=1380050503000&amp;api=v2">SciPy 0.12.0 for Maya2014</a></p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/Pillow-2.1.0.Maya2014-win-amd64.7z?version=1&amp;modificationDate=1380050503000&amp;api=v2">Pillow 2.1.0 for Maya2014</a>&#0160;a modern fork of the Python Imaging Library (PIL)</p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/numpy-1.7.1-Maya2015.win-amd64.7z?version=2&amp;modificationDate=1380115479000&amp;api=v2">NumPy 1.7.1 for Maya2015</a></p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/scipy-0.12.0-Maya2015.win-amd64.7z?version=2&amp;modificationDate=1380115526000&amp;api=v2">SciPy 0.12.0 for Maya2015</a></p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/PyOpenGL-3.1.0b2.Maya2015.win-amd64.7z?version=1&amp;modificationDate=1396619397000&amp;api=v2">PyOpenGL-3.1.0b2 for Maya2015</a></p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/PyOpenGL-accelerate-3.1.0b2.Maya2015.win-amd64.7z?version=1&amp;modificationDate=1396619411000&amp;api=v2">PyOpenGL-accelerate-3.1.0b2 for Maya2015</a></p>
<h2>Toolchains:</h2>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/mingw64-gcc481-msvcr100.7z?version=1&amp;modificationDate=1380050503000&amp;api=v2">Maya 2013/2014</a>&#0160;(uses the msvcr100 runtime DLL)</p>
<p><a href="https://wiki.autodesk.com/download/attachments/135930422/mingw64-gcc481-msvcr110.7z?version=1&amp;modificationDate=1380050503000&amp;api=v2">Maya 2015</a>&#0160;(uses the msvcr110 runtime DLL)</p>
<p>All toolchains use mingw-w64 built around GCC 4.8.1 using the SetJump/LongJump exception handling model.</p>
<h2>Setting up a mingw-w64 environment:</h2>
<p>1- Unpack a&#0160;<a href="http://sourceforge.net/projects/mingw-w64/files/External%20binary%20packages%20(Win64%20hosted)/MSYS%20(32-bit)/" rel="nofollow">lightweight msys</a>&#0160;Unix environment and a toolchain from the previous section in the same folder. You should have C:\mingw\msys and C:\mingw\mingw64</p>
<p>2- Start a msys command shell using C:\mingw\msys\msys.bat</p>
<p>3- use vim to create the /etc/fstab file containing the following line: &quot;c:/mingw/mingw64/mingw&quot;</p>
<p>4- Exit the shell and start a new one. Executing &quot;gcc --version&quot; should return a 4.8.1 compiler and &quot;gcc -dumpspecs&quot; should contain references to the msvcrXXX you want to link with.</p>
<h2>Setting up Python</h2>
<p>1- Apply the patches from&#0160;<a href="http://bugs.python.org/issue11723" rel="nofollow">issue 11723</a>&#0160;and&#0160;<a href="http://bugs.python.org/issue4709" rel="nofollow">issue 4709</a>&#0160;to your local 64 bit version of Python27. The patches do not apply cleanly to Python26, so if you really want to build Maya 2013 modules, you will need to apply them manually in a text editor.</p>
<p>2- At the very top of C:/Python27/Lib/distutils/cygwinccompiler.py add stanzas for msvcr100 in the get_msvcr function:</p>
<p><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; elif msc_ver == &#39;1500&#39;:<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; # VS2008 / MSVC 9.0<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; return [&#39;msvcr90&#39;]<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; elif msc_ver == &#39;1600&#39;:<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; # VS2010 / MSVC 10.0<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; return [&#39;msvcr100&#39;]<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; elif msc_ver == &#39;1700&#39;:<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; # VS2012 / MSVC 11.0<br />+&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; return [&#39;msvcr110&#39;]<br /></code></p>
<p>3- Generate the python 2.7 linker file in the MSYS command shell. The following lines assumes you have moved the python27.dll to C:\Python27 to prevent conflicts with the Python shipped with Maya.</p>
<pre>&#0160;&#0160;&#0160; $ cd /c/Python27/libs</pre>
<pre>&#0160;&#0160; &#0160;$ gendef ../python27.dll</pre>
<pre>&#0160;&#0160; &#0160;$ dlltool -D ../python27.dll -d python27.def -l libpython27.a</pre>
<pre>&#0160;&#0160; &#0160;$ cp python27.def libpython27.a ../Lib</pre>
<p>4- Add Python27 to the MSYS shell path</p>
<h2 id="CompilingNumPyandSciPyformaya-BuildingNumPy:">Building NumPy:</h2>
<p>There are many options for the solver, each with some gains and some difficulties. The BLAS/LAPACK combo is the easiest to integrate, but offers the least performance. Using highly optimized libraries like ATLAS or OpenBLAS is recommended, but a lot harder to maintain, especially if you want to target machines with varying SSE support and CPU chips.</p>
<p>1- Build BLAS and LAPACK as described&#0160;<a href="http://stackoverflow.com/questions/7496547/python-scipy-needs-blas" rel="nofollow">here</a>:<br />&#0160;&#0160;&#0160; In a MSYS shell:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ~/builds</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ wget&#0160;<a href="http://www.netlib.org/blas/blas.tgz" rel="nofollow">http://www.netlib.org/blas/blas.tgz</a>&#0160;</code><br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ tar -xzf blas.tgz</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd BLAS</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ x86_64-w64-mingw32-gfortran.exe -O3 -std=legacy -m64 -fno-second-underscore -fPIC -c *.f</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ ar r libfblas.a *.o</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ ranlib libfblas.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ rm -rf *.o</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ export BLAS=~/builds/BLAS/libfblas.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ..</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ wget&#0160;<a href="http://www.netlib.org/lapack/lapack.tgz" rel="nofollow">http://www.netlib.org/lapack/lapack.tgz</a>&#0160;</code><br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ tar -xzf lapack.tgz</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd lapack-3.4.2/</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cp INSTALL/make.inc.gfortran make.inc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ make lapacklib</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ make clean</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ..</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ mv lapack-3.4.2/ LAPACK</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ export LAPACK=~/builds/LAPACK/liblapack.a</code>&#0160;<br /><br />2- Build the numpy module:<br />&#0160;&#0160;&#0160; - Download numpy-1.7.1.tar.gz and unpack.<br />&#0160;&#0160;&#0160; - Remove any code that appends -mno-cygwin to any compiler tool in the following files:<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; numpy/distutils/fcompiler/gnu.py<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; numpy/distutils/mingw32ccompiler.py<br />&#0160;&#0160; &#0160;c:\Python27\Lib\distutils\cygwincompiler.py<br />&#0160;&#0160;&#0160; - Replace the following line in numpy/distutils/fcompiler/gnu.py<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;raise NotImplementedError(&quot;Only MS compiler supported with gfortran on win64&quot;)</code>&#0160;<br />&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; with<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;pass</code>&#0160;<br />&#0160;&#0160;&#0160; - Add this code at the top of numpy/__init__.py to augment the PATH to find the mingw-w64 DLLs:<br /><code>&#0160;&#0160; &#0160;# Numpy-Mingw-w64: prepend the path of the Mingw DLLs to os.environ[&#39;PATH&#39;]</code>&#0160;<br /><code>&#0160;&#0160; &#0160;def _add2path():</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; import os</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; if os.name != &#39;nt&#39;:</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;return</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; try:</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;path = os.path.join(os.path.abspath(os.path.dirname(__file__)), &#39;core&#39;)</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;if path not in os.environ.get(&#39;PATH&#39;, &#39;&#39;):</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; os.environ[&#39;PATH&#39;] = os.pathsep.join((path, os.environ.get(&#39;PATH&#39;, &#39;&#39;)))</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160;&#0160; except Exception:</code>&#0160;<br /><code>&#0160;&#0160; &#0160;&#0160;&#0160; &#0160;pass</code>&#0160;<br /><br /><code>&#0160;&#0160; &#0160;_add2path()</code>&#0160;<br /><code>&#0160;&#0160; &#0160;del _add2path</code>&#0160;<br />&#0160;&#0160;&#0160; - Build the module with:&#0160;&#0160; &#0160;<br /><code>&#0160;&#0160;&#0160; $ python setup.py build</code>&#0160;<br /><br />3a - Install the numpy module:<br />&#0160;&#0160;&#0160; In the numpy build folder:<br /><code>&#0160;&#0160;&#0160; $ python setup.py install --prefix %MAYA_PATH%/Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp /mingw/bin/libgfortran-3.dll&#0160;<code>%MAYA_PATH%/Python/Lib/site-packages/numpy/core</code><br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libquadmath-0.dll&#0160;<code>%MAYA_PATH%/Python/Lib/site-packages/numpy/core</code>&#0160;<br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libgcc_s_sjlj-1.dll&#0160;<code>%MAYA_PATH%/Python/Lib/site-packages/numpy/core</code>&#0160;<br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libwinpthread-1.dll %MAYA_PATH%/Python/Lib/site-packages/numpy/core</code>&#0160;<br /><br />3b - Produce a package to install (containing all extra DLLs)<br />&#0160;&#0160;&#0160; In the numpy build folder:<br /><code>&#0160;&#0160;&#0160; $ python setup.py bdist</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cd dist</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ unzip numpy-1.7.1.win-amd64.zip</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp /mingw/bin/libgfortran-3.dll&#0160;<code><code>Python27/Lib/site-packages/numpy/core</code></code><br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libquadmath-0.dll&#0160;<code><code>Python27/Lib/site-packages/numpy/core</code></code><br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libgcc_s_sjlj-1.dll<code>&#0160;Python27/Lib/site-packages/numpy/core</code><br />&#0160;&#0160;&#0160; $&#0160;<code>cp&#0160;</code>/mingw/bin/libwinpthread-1.dll Python27/Lib/site-packages/numpy/core</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ mv Python27 Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ zip -r9 numpy-1.7.1.Maya2014.win-amd64.zip Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ rm -rf Python</code>&#0160;<br />&#0160;&#0160;&#0160; This file can be directly extracted in %MAYA_PATH%&#0160;<br /><br />4- Test in Maya:<br />&#0160;&#0160;&#0160; Download&#0160;<a href="http://peak.telecommunity.com/dist/ez_setup.py" rel="nofollow">http://peak.telecommunity.com/dist/ez_setup.py</a>&#0160;<br />&#0160;&#0160;&#0160; Download&#0160;<a href="https://raw.github.com/pypa/pip/master/contrib/get-pip.py" rel="nofollow">https://raw.github.com/pypa/pip/master/contrib/get-pip.py</a>&#0160;<br />&#0160;&#0160;&#0160; In a regular command shell:<br /><code>&#0160;&#0160;&#0160; &gt; cd %MAYA_PATH%\bin</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt; mayapy ez_setup.py</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt; mayapy get-pip.py</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt; ..\Python\Scripts\pip.exe install nose</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt; mayapy</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt;&gt;&gt; import numpy</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt;&gt;&gt; numpy.test() # requires the nose package</code>&#0160;<br /><code>&#0160;&#0160;&#0160; &gt;&gt;&gt; numpy.show_config()</code></p>
<h2>Building the SciPy module:</h2>
<p>0- Build numpy<br /><br />1- Set the environment:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ export PATH=$PATH:/c/Python27</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ export BLAS=~/builds/BLAS/libfblas.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ export LAPACK=~/builds/LAPACK/liblapack.a</code>&#0160;<br /><br />2- Make the numpy module available either by installing it, or by adding it to PYTHONPATH<br /><br />3- Fix mingw-w64 issues in the SciPy package:<br />&#0160;&#0160;&#0160;&#0160;&#0160; - Patch scipy/spatial/qhull/src/mem.h to have a proper 64 bit int64 typedef for ptr_intT:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #if defined(__MINGW64__)<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; typedef __int64 ptr_intT;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #else<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #if _MSC_VER &amp;&amp; defined(_WIN64)<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; typedef long long ptr_intT;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #else<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; typedef long ptr_intT;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #endif<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #endif<br /></code>- Add this code at the top of scipy/__init__.py to augment the PATH to find the mingw-w64 DLLs:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160; # Scipy-Mingw-w64: prepend the path of the Mingw DLLs to os.environ[&#39;PATH&#39;]</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160; def _add2path():</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160;&#0160;&#0160;&#0160;&#0160; import os</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code>if os.name != &#39;nt&#39;:</code>&#0160;<br /><code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code>return</code>&#0160;<br /><code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160; try:</code>&#0160;<br /><code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160;&#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code>&#0160; &#0160;&#0160; path = os.path.join(os.path.abspath(os.path.dirname(__file__)), &#39;misc&#39;)</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code>&#0160; &#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;&#0160;</code>if path not in os.environ.get(&#39;PATH&#39;, &#39;&#39;):</code>&#0160;<br /><code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160;&#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160; &#0160;&#0160; os.environ[&#39;PATH&#39;] = os.pathsep.join((path, os.environ.get(&#39;PATH&#39;, &#39;&#39;)))</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;</code>&#0160; &#0160;&#0160; except Exception:</code>&#0160;<br /><code><code>&#0160;&#0160;&#0160;&#0160;</code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160;<code>&#0160;&#0160;&#0160;&#0160;&#0160;</code>pass</code>&#0160;<br /><br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160; _add2path()</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;&#0160; del _add2path</code>&#0160;<br /><br />4- Build:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ python setup.py bdist</code>&#0160;<br /><br />5a - Install the scipy module:<br />&#0160;&#0160;&#0160;&#0160;&#0160; In the scipy build folder:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ python setup.py install --prefix %MAYA_PATH%/Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libgfortran-3.dll %MAYA_PATH%/Python/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libquadmath-0.dll %MAYA_PATH%/Python/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libgcc_s_sjlj-1.dll %MAYA_PATH%/Python/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libwinpthread-1.dll %MAYA_PATH%/Python/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libstdc++-6.dll %MAYA_PATH%/Python/Lib/site-packages/scipy/misc</code>&#0160;<br /><br />5b - Produce a package to install (containing all extra DLLs)<br />&#0160;&#0160;&#0160;&#0160;&#0160; In the scipy build folder:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ python setup.py bdist</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cd dist</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ unzip scipy-0.12.0.win-amd64.zip</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libgfortran-3.dll Python27/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libquadmath-0.dll Python27/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libgcc_s_sjlj-1.dll Python27/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libwinpthread-1.dll Python27/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ cp /mingw/bin/libstdc++-6.dll Python27/Lib/site-packages/scipy/misc</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ mv Python27 Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ zip -r9 scipy-0.12.0.Maya2014.win-amd64.zip Python</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160; $ rm -rf Python</code>&#0160;<br />&#0160;&#0160;&#0160;&#0160;&#0160; This file can be directly extracted in %MAYA_PATH%</p>
<h2 id="CompilingNumPyandSciPyformaya-Buildingamingw-w64toolchainthatlinkstoproperMSruntimelibraries:">Building a mingw-w64 toolchain that links to proper MS runtime libraries:</h2>
<p>1- Download the&#0160;<a href="http://sourceforge.net/projects/mingwbuilds/files/external-binary-packages/msys%2B7za%2Bwget%2Bsvn%2Bgit%2Bmercurial%2Bcvs-rev13.7z/download" rel="nofollow">heavyweight MSYS</a>&#0160;package with Git and Subversion support and extract it to you toolchain folder (C:\mingw_tc).<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; This is the a unixish environnmet that allows configure scripts to run<br /><br />2- Install the niXman build scripts:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ~</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ git clone&#0160;<a href="https://github.com/niXman/mingw-builds.git" rel="nofollow">https://github.com/niXman/mingw-builds.git</a>&#0160;</code><br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ~/mingw-builds</code>&#0160;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;<br />3- Create mingw environment that links exclusively to msvcr100.dll:<br />&#0160;&#0160;&#0160;&#0160; This&#0160;<a href="http://sourceforge.net/mailarchive/message.php?msg_id=30556805" rel="nofollow">post&#0160;</a>is where I got the starting point for this project.<br />&#0160;&#0160;&#0160;&#0160; We need to build a mingw-w64 environment that runs from the ground up with msvcr100.dll. If you are building<br />&#0160;&#0160;&#0160;&#0160; from a pristine Win7 environment, you will need to at least download the &quot;Windows 7 Platform SDK&quot; to get this<br />&#0160;&#0160;&#0160;&#0160; DLL installed.<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ~</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ git clone</code>&#0160;<a href="https://github.com/niXman/mingw-builds.git" rel="nofollow">https://github.com/niXman/mingw-builds.git</a>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ cd ~/mingw-builds</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; $ ./build gcc-4.8.1 x64 --download --no-multilib</code>&#0160;<br />&#0160;&#0160;&#0160;&#0160; This will download the required tools and sources to build the compiler. There were a few stale URL last time I tried, but they were easy to fix in mingw-build/scripts<br />&#0160;<br />&#0160;&#0160;&#0160; You will need then to apply the&#0160;<a href="https://wiki.autodesk.com/download/attachments/135930422/VS2010.patch?version=1&amp;modificationDate=1380054444000&amp;api=v2">provided patch</a>&#0160;that makes sure the new compiler is tied to msvcr100.dll<br />&#0160;&#0160;<br />&#0160;&#0160;&#0160; Then you need to generate temporary versions of libmoldname100.a for the build to succeed:<br /><code>&#0160;&#0160;&#0160; $ cd ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ ../../bin/dlltool.exe -d ~/src/mingw-w64-crt/lib64/moldname-msvcrt.def -U --dllname msvcr100.dll -l libmoldname100.a -k --as=/home/jgamache/mingw-builds/toolchains/mingw64/bin/as.exe --as-flags=--64 -m</code>&#0160;<a href="http://i386x86-64/" rel="nofollow">i386:x86-64</a>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cd ../lib32</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ ../../bin/dlltool.exe -d ~/src/mingw-w64-crt/lib64/moldname-msvcrt.def -U --dllname msvcr100.dll -l libmoldname100.a -k --as=/home/jgamache/mingw-builds/toolchains/mingw64/bin/as.exe --as-flags=--32 -m i386</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cd ~/mingw-builds</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ ./build gcc-4.8.1 x64 --no-multilib</code>&#0160;<br />&#0160;<br />&#0160;&#0160;&#0160; Build&#0160;<strong>until the mingw-w64-crt steps completes</strong>&#0160;and then interrupt the build. You will need to copy the updated libmsvcr100.a to the bootstrapping toolchain to be sure everything was properly linked.<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-runtime/x64-mingw-w64-nomulti/lib/libmsvcr100.a ~/mingw-builds/toolchains/mingw32/i686-w64-mingw32/lib/libmsvcr100.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-runtime/x64-mingw-w64-nomulti/lib/libmsvcr100.a ~/mingw-builds/toolchains/mingw32/i686-w64-mingw32/lib64/libmsvcr100.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-runtime/x64-mingw-w64-nomulti/lib/libmsvcr100.a ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib/libmsvcr100.a</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-runtime/x64-mingw-w64-nomulti/lib/libmsvcr100.a ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib32/libmsvcr100.a</code>&#0160;<br /><br />&#0160;&#0160;&#0160; Restart the build with the updated toolchain:<br /><code>&#0160;&#0160;&#0160; $ rm -rf prereq-* mingw-prereq mingw-runtime x64-481-posix-sjlj</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cd ~/mingw-builds</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ ./build gcc-4.8.1 x64 --no-multilib</code>&#0160;<br /><br />&#0160;&#0160;&#0160; The build will stop itself with an error in the middle of building GCC with a missing libmoldname100.a error. Copy the previously generated lib:<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib/libmoldname100.a ~/mingw-runtime/x64-mingw-w64-nomulti/lib</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib/libmoldname100.a ~/prereq-build/x64-mingw-w64-crt-nomulti/lib64/</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib/libmoldname100.a ~/x64-481-posix-sjlj/mingw64/mingw/lib/</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ cp ~/mingw-builds/toolchains/mingw64/x86_64-w64-mingw32/lib/libmoldname100.a ~/x64-481-posix-sjlj/mingw64/x86_64-w64-mingw32/lib/</code>&#0160;<br /><code>&#0160;&#0160;&#0160; $ ./build gcc-4.8.1 x64 --no-multilib</code>&#0160;<br /><br />&#0160;&#0160;&#0160; Sit back and let the toolchain build complete. The results will be in ~/x64-481-posix-sjlj/mingw64.&#0160;<br /><br />&#0160;&#0160;&#0160; modify headers that breaks in multiple compilations:<br />&#0160;&#0160;&#0160; - in ~/x64-481-posix-sjlj/mingw64/x86_64-w64-mingw32/include/basetsd.h the typedefs for INT8/UINT8 up to INT64/UINT64 need to be protected against macros of the same names:<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #if !defined(INT8)</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; typedef signed char INT8,*PINT8;</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #endif</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #if !defined(INT16)</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; typedef signed short INT16,*PINT16;</code>&#0160;<br /><code>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; #endif</code>&#0160;<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ... and so on for the whole block where the integer types are defined.<br />&#0160;&#0160;&#0160; - in ~/x64-481-posix-sjlj/mingw64/x86_64-w64-mingw32/include/getopt.h<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; Remove the &quot;#ifdef _BSD_SOURCE&quot; that prevents the &quot;extern int optreset&quot; from being visible when compiling xz<br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; &#0160;<br />&#0160;&#0160;&#0160; You can now take the whole contents of ~/x64-481-posix-sjlj/mingw64 and package that as a toolchain to be used for building Python libraries.<br />&#0160;&#0160; &#0160;<br />If you encounter any issues, I strongly recommend having an unmodified build as reference to diff the log files. This will catch any cases where the modified compiler behaves differently from the reference one.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building pywin32 for MotionBuilder 2015
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: building-pywin32-for-motionbuilder-2015
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Visual Studio

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/10/building-pywin32-for-motionbuilder-2015.html 
DATE: 10/01/2014 01:10:44 AM
-----
BODY:
<p>Recently a customer came to ask why pywin32 do not work on Maya or MotionBuilder. The answer is very simple, Maya and MotionBuilder are compiled the lastest compiler to get the best performances and the latest technology possible. Maya itself is partially compiler with the Intel C++ compiler and Visual Studio 2012 SP4, whereas MotionBuilder uses Visual Studio 2012 SP4 only. The issue is that pywin32 and many of the Python libraries still use an older compiler, like sometimes the Visual Studio 2005 compiler. Like its name says, nearly 10 years old.</p>
<p>Each Visual Studio compiler version comes with CRT, STL, MFC, ATL libraries which are not binary compatible with others. They can eventually be loaded in memory concurrently, but cannot &#39;exchange&#39; (or manage) memory blocks allocated by another version. Doing that would most of the time result in a crash. For that reason, you need to recompile these libraries for both products using their &#39;native&#39; compiler. You cannot get an already compiled package from someone else, if the package is not of the right compiler version.</p>
<p>In this article, I&#39;ll describe the steps I used to recompile the pywin32 library for MotionBuilder 2015. Note that I did not try to port pywin32 to Visual Studio 2012, but just to recompile it as much I could in a simple way. (These steps would also work for Maya 2015, you would only need to change the last 2 lines of the last script)</p>
<p><strong>One last comment</strong> - I used Windows 8.1 for building the package, if you have a previous version of Windows and a previous version than the Microsoft SDK 8 - some changes may be required. Based on comments I received so far from Pierre-Marc Simard ( EIDOS Montreal ), I tried to include some of the required changes in the notes below. Pierre-Marc was very keen to try and reports all the differences he saw on his system. One thing he said, was that he had to run the build few times to resolve some errors magically. I&#39;ll try this later next week,and will report differences I can see. But Windows 8.x and SDK 8 sounds quite easy. &#0160;</p>
<h2>Downloads</h2>
<p>First, you need to download and install Python 2.7.3 x64 on your machine - that is the python version MotionBuilder is using. But unlike Maya, MoBu does not provide a command line version of its VS2012 python version, so this is why we need to install Python. Use the default &#39;C:\Python27&#39; folder to install. You can get the x64 build from <a href="https://www.python.org/download/releases/2.7.3/" target="_self">there</a>.</p>
<p>Next, get the pywin32 source code from&#0160;<a href="http://sourceforge.net/projects/pywin32/?source=navbar" target="_self">http://sourceforge.net/projects/pywin32/?source=navbar</a>, and unzip the source into a folder of your choice. I used &#39;C:\temp\pywin32-219&#39; and used the <a href="http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.zip/download" target="_self">latest version</a> at the time of this post. Download source from <a href="http://sourceforge.net/projects/pywin32/files/pywin32/Build%20219/pywin32-219.zip/download" target="_self">here</a>.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi"><img alt="Build-headacke" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a></p>
<h2>Missing headers</h2>
<p>To build pywin32, you need couple of additional headers which may not be present on your system.</p>
<p>a- The Outlook 2010: MAPI Header Files - Mapix.h. Download the <a href="http://www.microsoft.com/en-us/download/details.aspx?id=12905" target="_self">zip file</a>, and&#0160;copy all except mapi.h and mspst.h in &quot;C:\Program Files (x86)\Windows Kits\8.0\Include\um&quot;</p>
<p>b- <a href="http://support2.microsoft.com/default.aspx?scid=kb;en-us;291794" target="_self">The MFCMAPI headers</a>. I downloaded them from&#0160;<a href="http://mfcmapi.codeplex.com/SourceControl/latest">http://mfcmapi.codeplex.com/SourceControl/latest</a>, and copied EdkGuid.h and EdkMdb.h in &quot;C:\Program Files (x86)\Windows Kits\8.0\Include\um&quot;</p>
<h2>Code changes required to build on VS2012</h2>
<p>Now the few things to edit before running the build.</p>
<p>If you are on Windows 8 or later, go in &#39;C:\temp\pywin32-219\com\win32comext\axdebug\src\stdafx.h&#39;, and comment out the __MIDL___MIDL_itf_dbgprop_0000_0001 and __MIDL___MIDL_itf_dbgprop_0000_0002 enums.</p>
<pre class="brush: cpp; toolbar: false; first-line: 29;">#if defined(__REQUIRED_RPCNDR_H_VERSION__)
// for some strange reason, these no longer exist in dbgprop.h !?!?
// enum __MIDL___MIDL_itf_dbgprop_0000_0001
    // {	DBGPROP_ATTRIB_NO_ATTRIB	= 0,
	// DBGPROP_ATTRIB_VALUE_IS_INVALID	= 0x8,
	// DBGPROP_ATTRIB_VALUE_IS_EXPANDABLE	= 0x10,
	// DBGPROP_ATTRIB_VALUE_READONLY	= 0x800,
	// DBGPROP_ATTRIB_ACCESS_PUBLIC	= 0x1000,
	// DBGPROP_ATTRIB_ACCESS_PRIVATE	= 0x2000,
	// DBGPROP_ATTRIB_ACCESS_PROTECTED	= 0x4000,
	// DBGPROP_ATTRIB_ACCESS_FINAL	= 0x8000,
	// DBGPROP_ATTRIB_STORAGE_GLOBAL	= 0x10000,
	// DBGPROP_ATTRIB_STORAGE_STATIC	= 0x20000,
	// DBGPROP_ATTRIB_STORAGE_FIELD	= 0x40000,
	// DBGPROP_ATTRIB_STORAGE_VIRTUAL	= 0x80000,
	// DBGPROP_ATTRIB_TYPE_IS_CONSTANT	= 0x100000,
	// DBGPROP_ATTRIB_TYPE_IS_SYNCHRONIZED	= 0x200000,
	// DBGPROP_ATTRIB_TYPE_IS_VOLATILE	= 0x400000,
	// DBGPROP_ATTRIB_HAS_EXTENDED_ATTRIBS	= 0x800000
    // };
// typedef DWORD DBGPROP_ATTRIB_FLAGS;


// enum __MIDL___MIDL_itf_dbgprop_0000_0002
    // {	DBGPROP_INFO_NAME	= 0x1,
	// DBGPROP_INFO_TYPE	= 0x2,
	// DBGPROP_INFO_VALUE	= 0x4,
	// DBGPROP_INFO_FULLNAME	= 0x20,
	// DBGPROP_INFO_ATTRIBUTES	= 0x8,
	// DBGPROP_INFO_DEBUGPROP	= 0x10,
	// DBGPROP_INFO_AUTOEXPAND	= 0x8000000
    // };
// typedef DWORD DBGPROP_INFO_FLAGS;

enum {
   EX_DBGPROP_INFO_ID  =0x0100,
   EX_DBGPROP_INFO_NTYPE  =0x0200,
   EX_DBGPROP_INFO_NVALUE  =0x0400,
   EX_DBGPROP_INFO_LOCKBYTES  =0x0800,
   EX_DBGPROP_INFO_DEBUGEXTPROP  =0x1000
};

#endif
</pre>
<p>Next, go in &#39;C:\temp\pywin32-219\com\win32comext\mapi\src\PyIMAPISession.cpp&#39;, line #778 and change</p>
<pre class="brush: cpp; toolbar: false; first-line: 778;">unsigned long connection;
</pre>
<p>to (Windows 8 or later only)</p>
<pre class="brush: cpp; toolbar: false; first-line: 778;">ULONG_PTR connection;
</pre>
<p>Next, go in &#39;C:\temp\pywin32-219\com\win32comext\mapi\src\PyIMAPITable.cpp&#39;, line #701 and change</p>
<pre class="brush: cpp; toolbar: false; first-line: 701;">_result = (HRESULT )_swig_self-&gt;Advise(_arg0,_arg1,_arg2);
</pre>
<p>to (Windows 8 or later)</p>
<pre class="brush: cpp; toolbar: false; first-line: 701;">_result = (HRESULT )_swig_self-&gt;Advise(_arg0,_arg1,reinterpret_cast&lt;ULONG_PTR *&gt;(_arg2));
</pre>
<p>to (previous Windows versions)</p>
<pre class="brush: cpp; toolbar: false; first-line: 701;">_result = (HRESULT )_swig_self-&gt;Advise(_arg0,_arg1,reinterpret_cast&lt;unsigned long *&gt;(_arg2));
</pre>
<p>and line #1284, from</p>
<pre class="brush: cpp; toolbar: false; first-line:1284;">_result = (HRESULT )_swig_self-&gt;CreateBookmark(_arg0);
</pre>
<p>to</p>
<pre class="brush: cpp; toolbar: false; first-line:1284;">_result = (HRESULT )_swig_self-&gt;CreateBookmark(reinterpret_cast&lt;BookMark *&gt;(_arg0));
</pre>
<h2>Preparing build for VS2012</h2>
<p>Last but not least, pywin32 is not ready for Visual Studio 2012 build, so you need to modify the setup.py file</p>
<p>Next, go in &#39;C:\temp\pywin32-219\setup.py&#39;, line #587-588 and change</p>
<pre class="brush: python; toolbar: false; first-line:587;">        if os.path.isfile(os.path.join(sdk_dir, &quot;include&quot;, &quot;activdbg.h&quot;)):
                kw.setdefault(&#39;extra_compile_args&#39;, []).append(&quot;/DHAVE_SDK_ACTIVDBG&quot;)
</pre>
<p>to (be careful on the indentation)</p>
<pre class="brush: python; toolbar: false; first-line: 587;">        #if os.path.isfile(os.path.join(sdk_dir, &quot;include&quot;, &quot;activdbg.h&quot;)):
        kw.setdefault(&#39;extra_compile_args&#39;, []).append(&quot;/DHAVE_SDK_ACTIVDBG&quot;)
</pre>
<p>line #1062-1065, from</p>
<pre class="brush: python; toolbar: false; first-line:1062;">                vckey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, product_key,
                                        0, access)
                val, val_typ = _winreg.QueryValueEx(vckey, &quot;ProductDir&quot;)
                mfc_dir = os.path.join(val, &quot;redist&quot;, plat_dir, mfc_dir)
</pre>
<p>to (be careful on the indentation)</p>
<pre class="brush: python; toolbar: false; first-line: 1062;">                #vckey = _winreg.OpenKey(_winreg.HKEY_LOCAL_MACHINE, product_key,
                #                        0, access)
                #val, val_typ = _winreg.QueryValueEx(vckey, &quot;ProductDir&quot;)
                #mfc_dir = os.path.join(val, &quot;redist&quot;, plat_dir, mfc_dir)
                mfc_dir =r&#39;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\redist\x64\Microsoft.VC110.MFC&#39;
</pre>
<p>line #1973-2047, from</p>
<pre class="brush: python; toolbar: false; first-line: 1973;">     WinExt_win32com(&#39;shell&#39;, libraries=&#39;shell32&#39;, pch_header=&quot;shell_pch.h&quot;,
                     windows_h_version = 0x600,
                     sources=(&quot;&quot;&quot;
                         %(shell)s/PyIActiveDesktop.cpp
                         %(shell)s/PyIApplicationDestinations.cpp
                         %(shell)s/PyIApplicationDocumentLists.cpp
                         %(shell)s/PyIAsyncOperation.cpp
                         %(shell)s/PyIBrowserFrameOptions.cpp
                         %(shell)s/PyICategorizer.cpp
                         %(shell)s/PyICategoryProvider.cpp
                         %(shell)s/PyIColumnProvider.cpp
                         %(shell)s/PyIContextMenu.cpp
                         %(shell)s/PyIContextMenu2.cpp
                         %(shell)s/PyIContextMenu3.cpp
                         %(shell)s/PyICopyHook.cpp
                         %(shell)s/PyICurrentItem.cpp
                         %(shell)s/PyICustomDestinationList.cpp
                         %(shell)s/PyIDefaultExtractIconInit.cpp
                         %(shell)s/PyIDeskBand.cpp
                         %(shell)s/PyIDisplayItem.cpp
                         %(shell)s/PyIDockingWindow.cpp
                         %(shell)s/PyIDropTargetHelper.cpp
                         %(shell)s/PyIEnumExplorerCommand.cpp
                         %(shell)s/PyIEnumIDList.cpp
                         %(shell)s/PyIEnumObjects.cpp
                         %(shell)s/PyIEnumResources.cpp
                         %(shell)s/PyIEnumShellItems.cpp
                         %(shell)s/PyIEmptyVolumeCache.cpp
                         %(shell)s/PyIEmptyVolumeCacheCallBack.cpp
                         %(shell)s/PyIExplorerBrowser.cpp
                         %(shell)s/PyIExplorerBrowserEvents.cpp
                         %(shell)s/PyIExplorerCommand.cpp
                         %(shell)s/PyIExplorerCommandProvider.cpp
                         %(shell)s/PyIExplorerPaneVisibility.cpp
                         %(shell)s/PyIExtractIcon.cpp
                         %(shell)s/PyIExtractIconW.cpp
                         %(shell)s/PyIExtractImage.cpp
                         %(shell)s/PyIFileOperation.cpp
                         %(shell)s/PyIFileOperationProgressSink.cpp
                         %(shell)s/PyIIdentityName.cpp
                         %(shell)s/PyIInputObject.cpp
                         %(shell)s/PyIKnownFolder.cpp
                         %(shell)s/PyIKnownFolderManager.cpp
                         %(shell)s/PyINameSpaceTreeControl.cpp
                         %(shell)s/PyIObjectArray.cpp
                         %(shell)s/PyIObjectCollection.cpp
                         %(shell)s/PyIPersistFolder.cpp
                         %(shell)s/PyIPersistFolder2.cpp
                         %(shell)s/PyIQueryAssociations.cpp
                         %(shell)s/PyIRelatedItem.cpp
                         %(shell)s/PyIShellBrowser.cpp
                         %(shell)s/PyIShellExtInit.cpp
                         %(shell)s/PyIShellFolder.cpp
                         %(shell)s/PyIShellFolder2.cpp
                         %(shell)s/PyIShellIcon.cpp
                         %(shell)s/PyIShellIconOverlay.cpp
                         %(shell)s/PyIShellIconOverlayIdentifier.cpp
                         %(shell)s/PyIShellIconOverlayManager.cpp
                         %(shell)s/PyIShellItem.cpp
                         %(shell)s/PyIShellItem2.cpp
                         %(shell)s/PyIShellItemArray.cpp
                         %(shell)s/PyIShellItemResources.cpp
                         %(shell)s/PyIShellLibrary.cpp
                         %(shell)s/PyIShellLink.cpp
                         %(shell)s/PyIShellLinkDataList.cpp
                         %(shell)s/PyIShellView.cpp
                         %(shell)s/PyITaskbarList.cpp
                         %(shell)s/PyITransferAdviseSink.cpp
                         %(shell)s/PyITransferDestination.cpp
                         %(shell)s/PyITransferMediumItem.cpp
                         %(shell)s/PyITransferSource.cpp
                         %(shell)s/PyIUniformResourceLocator.cpp
                         %(shell)s/shell.cpp
                         &quot;&quot;&quot; % dirs).split()),
</pre>
<p>to (be careful on the indentation)</p>
<pre class="brush: python; toolbar: false; first-line: 1973;">    # WinExt_win32com(&#39;shell&#39;, libraries=&#39;shell32&#39;, pch_header=&quot;shell_pch.h&quot;,
                    # windows_h_version = 0x600,
                    # sources=(&quot;&quot;&quot;
                        # %(shell)s/PyIActiveDesktop.cpp
                        # %(shell)s/PyIApplicationDestinations.cpp
                        # %(shell)s/PyIApplicationDocumentLists.cpp
                        # %(shell)s/PyIAsyncOperation.cpp
                        # %(shell)s/PyIBrowserFrameOptions.cpp
                        # %(shell)s/PyICategorizer.cpp
                        # %(shell)s/PyICategoryProvider.cpp
                        # %(shell)s/PyIColumnProvider.cpp
                        # %(shell)s/PyIContextMenu.cpp
                        # %(shell)s/PyIContextMenu2.cpp
                        # %(shell)s/PyIContextMenu3.cpp
                        # %(shell)s/PyICopyHook.cpp
                        # %(shell)s/PyICurrentItem.cpp
                        # %(shell)s/PyICustomDestinationList.cpp
                        # %(shell)s/PyIDefaultExtractIconInit.cpp
                        # %(shell)s/PyIDeskBand.cpp
                        # %(shell)s/PyIDisplayItem.cpp
                        # %(shell)s/PyIDockingWindow.cpp
                        # %(shell)s/PyIDropTargetHelper.cpp
                        # %(shell)s/PyIEnumExplorerCommand.cpp
                        # %(shell)s/PyIEnumIDList.cpp
                        # %(shell)s/PyIEnumObjects.cpp
                        # %(shell)s/PyIEnumResources.cpp
                        # %(shell)s/PyIEnumShellItems.cpp
                        # %(shell)s/PyIEmptyVolumeCache.cpp
                        # %(shell)s/PyIEmptyVolumeCacheCallBack.cpp
                        # %(shell)s/PyIExplorerBrowser.cpp
                        # %(shell)s/PyIExplorerBrowserEvents.cpp
                        # %(shell)s/PyIExplorerCommand.cpp
                        # %(shell)s/PyIExplorerCommandProvider.cpp
                        # %(shell)s/PyIExplorerPaneVisibility.cpp
                        # %(shell)s/PyIExtractIcon.cpp
                        # %(shell)s/PyIExtractIconW.cpp
                        # %(shell)s/PyIExtractImage.cpp
                        # %(shell)s/PyIFileOperation.cpp
                        # %(shell)s/PyIFileOperationProgressSink.cpp
                        # %(shell)s/PyIIdentityName.cpp
                        # %(shell)s/PyIInputObject.cpp
                        # %(shell)s/PyIKnownFolder.cpp
                        # %(shell)s/PyIKnownFolderManager.cpp
                        # %(shell)s/PyINameSpaceTreeControl.cpp
                        # %(shell)s/PyIObjectArray.cpp
                        # %(shell)s/PyIObjectCollection.cpp
                        # %(shell)s/PyIPersistFolder.cpp
                        # %(shell)s/PyIPersistFolder2.cpp
                        # %(shell)s/PyIQueryAssociations.cpp
                        # %(shell)s/PyIRelatedItem.cpp
                        # %(shell)s/PyIShellBrowser.cpp
                        # %(shell)s/PyIShellExtInit.cpp
                        # %(shell)s/PyIShellFolder.cpp
                        # %(shell)s/PyIShellFolder2.cpp
                        # %(shell)s/PyIShellIcon.cpp
                        # %(shell)s/PyIShellIconOverlay.cpp
                        # %(shell)s/PyIShellIconOverlayIdentifier.cpp
                        # %(shell)s/PyIShellIconOverlayManager.cpp
                        # %(shell)s/PyIShellItem.cpp
                        # %(shell)s/PyIShellItem2.cpp
                        # %(shell)s/PyIShellItemArray.cpp
                        # %(shell)s/PyIShellItemResources.cpp
                        # %(shell)s/PyIShellLibrary.cpp
                        # %(shell)s/PyIShellLink.cpp
                        # %(shell)s/PyIShellLinkDataList.cpp
                        # %(shell)s/PyIShellView.cpp
                        # %(shell)s/PyITaskbarList.cpp
                        # %(shell)s/PyITransferAdviseSink.cpp
                        # %(shell)s/PyITransferDestination.cpp
                        # %(shell)s/PyITransferMediumItem.cpp
                        # %(shell)s/PyITransferSource.cpp
                        # %(shell)s/PyIUniformResourceLocator.cpp
                        # %(shell)s/shell.cpp
                        # &quot;&quot;&quot; % dirs).split()),
</pre>
<h2>Building</h2>
<p>Run a VS2012 x64 Native Tool command prompt as Administrator, and execute the following script (for sure make edits as appropriate)</p>
<pre class="brush: shell; toobar: false;">@echo off
 
set MOBUPYWIN32BUILD=%~dp0
set MOBUPYWIN32BUILD=%MOBUPYWIN32BUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: &quot;%MOBUPYWIN32BUILD%&quot;
v:

set PYWIN32_VERSION=pywin32-219

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2015
if exist m:\nul subst m: /d
subst m: &quot;%MAYA_LOCATION%&quot;
set MAYA_LOCATION=m:

set MOBU_LOCATION=C:\Program Files\Autodesk\MotionBuilder 2015
if exist n:\nul subst n: /d
subst n: &quot;%MOBU_LOCATION%&quot;
set MOBU_LOCATION=n:
 
set MSVC_VERSION=2012
set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0
rem if [%LIBPATH%]==[] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64
set VS90COMNTOOLS=%VS110COMNTOOLS%
set VS100COMNTOOLS=%VS110COMNTOOLS%
set PATH=%PATH%;C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC
call vcvarsall.bat x86_amd64

set INCLUDE=%INCLUDE%;%MOBU_LOCATION%\OpenRealitySDK\include\python-2.7.3\include
set LIB=%LIB%;%MOBU_LOCATION%\OpenRealitySDK\lib\x64
 
set PYWIN32DIR=v:\%PYWIN32_VERSION%
cd %PYWIN32DIR%

%MAYA_LOCATION%\bin\mayapy.exe setup.py -q build --plat-name=win-amd64
rem C:\Python27\Python setup.py -q build --plat-name=win-amd64
C:\Python27\Python setup.py -q install
xcopy &quot;C:\Python27\Lib\site-packages\*.*&quot; n:\bin\x64\python\site-packages /s /v

</pre>
<h2>Testing</h2>
<p>To test, start MotionBuilder 2015, open the Python Editor and copy paste the following script</p>
<pre class="brush: python; toolbar: false;">import win32com.client
o = win32com.client.Dispatch(&quot;Excel.Application&quot;)
o.Visible = 1
o.Workbooks.Add()
o.Cells(1,1).Value = &quot;Hello&quot;
</pre>
<p>If Excel is showing, you are all set :)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Randall Hess
EMAIL: randall.hess@gmail.com
IP: 192.241.57.20
URL: http://techanimator.blogspot.com
DATE: 10/01/2014 06:29:39 AM
Thanks for this Cyrille!

I built pywin32 for Maya and Mobu, well over a year but in a more rough manner. This looks like a much better approach than I took modifying flags within manifest files and such.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Access Member Functions of Maya Python Plug-in Node Class
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: access-member-functions-of-maya-python-plug-in-node-class
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/09/access-member-functions-of-maya-python-plug-in-node-class.html 
DATE: 09/03/2014 01:14:22 AM
-----
BODY:
<p>In a C++ implementation, someone can get a pointer on a node instance after its creation by using the MSelectionList class. The MSelectionList class is used to get&#0160;a MObject of a node instance and MFnDependencyNode::userNode() returns a pointer to an instance of MPxNode, which can be typecast to this subclass instance and the member function can be retrieved. But there is no notion of pointer in Python. How to get to custom node class member functions?</p>
<p>If you don&#39;t have control over the source code of the plug-in, there&#39;s no way that you will be able to get its member function after the instance of the node is created.</p>
<p>If you do have control over the source of the plugin, then you can work around this problem by creating a dictionary and taking advantage of the properties of the OpenMayaMPx.asHashable() function. OpenMayaMPx.asHashable() takes an MPx object and returns a hash value which uniquely identifies the underlying Maya object. It doesn&#39;t matter whether the object is an instance of the base MPx class or your derived class: so long as they both refer to the same underlying Maya object they will return the same hash value. This allows you to set up a dictionary which can translate a base instance into its corresponding derived instance.</p>
<p>You can do it by placing the tracking dictionary onto some global Python module such as &#39;sys&#39;. E.g:</p>
<p>import sys</p>
<p>class sineNode(OpenMayaMPx.MPxNode):<br /> def __init__(self):<br /> OpenMayaMPx.MPxNode.__init__(self)<br /> sys.sineNode_nodes[OpenMayaMPx.asHashable(self)] = self</p>
<p>def specialFunc(self):<br /> print(&#39;special func defined on sineNode classe&#39;)</p>
<p>...</p>
<p>Then, outside of the plugin, if you have a sineNode in an MObject called &#39;nodeObj&#39;, you can get at its Python object as follows:</p>
<p>fn = OpenMaya.MFnDependencyNode(nodeObj)<br />nodePtr = fn.userNode()<br />node = sys.sineNode_nodes[OpenMayaMPx.asHashable(nodePtr)]<br />node.specialFunc()</p>
<p>In the Python API 2.0 you won&#39;t need the tracking dictionary at all and will be able to directly use the result from userNode(). E.g:</p>
<p>fn = OpenMaya.MFnDependencyNode(nodeObj)<br />node = fn.userNode()<br />node.specialFunc()</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: backer for Project PERCEPTION NEURON
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: backer-for-project-perception-neuron
CATEGORY: 3ds Max
CATEGORY: Animation
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Motion Capture
CATEGORY: MotionBuilder
CATEGORY: Reality capture

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/09/backer-for-project-perception-neuron.html 
DATE: 09/02/2014 02:28:41 AM
-----
BODY:
<p>It’s amazing that a new company can compete with established MoCap hardware providers for 1/70 of the price, yet maintain the same level of quality - A level of quality which is seen in Hollywood Film production.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b7c6d7888e970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d01b7c6d7888e970b img-responsive" style="display: block; margin-left: auto; margin-right: auto;" title="Perception-neuron" src="https://around-the-corner.typepad.com/files/perception-neuron.gif" alt="Perception-neuron" /></a></p>
<p>Noitom Technology Ltd. based in Beijing succesfully funded their&nbsp;<a href="https://www.kickstarter.com/projects/1663270989/project-perception-neuron" target="_self">Perception Neuron projec</a>t on <a href="http://www.kickstarter.com/" target="_self">Kickstarter</a>. This is an assemble-it-yourself inertial mocap system that aims to give users a complete full-body capture solution. During the week-end they met their goal of USD 250k easily. Zhong (my colleague in Shanghai) met them at the 'Unite China 2014' event where they mentioned they have completed their device plug-in for&nbsp;MotionBuilder.</p>
<p>Like its competitors, Neuron uses high quality inertial measurement sensors, has an SDK to connect to production products like Unity, Maya, MotionBuilder, and is easy to setup for non-expert Mocap users. Unlike its competitors, Neuron is affordable to students, indie gamers, makers, consumers, VSBs, and so on...</p>
<p><a href="http://www.youtube.com/watch?v=XRenpzYTndg"><img class="colorbox-64514" style="display: block; margin-left: auto; margin-right: auto;" src="http://img.youtube.com/vi/XRenpzYTndg/0.jpg" alt="YouTube Preview Image" /></a></p>
<p>&nbsp;</p>
<p>Because it comes with an SDK, Zhong and I pledged for the 'Dual 30-Neuron package: 30-Neuron package' and eager to receive the devices and start playing with those.&nbsp;The system can track multiple actors simultaneously, but each actors needs its own Hub while you can mix Neurons as you wish.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0616395970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d01b8d0616395970c img-responsive" style="display: block; margin-left: auto; margin-right: auto;" title="Perception-neuron-1" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01b8d0616395970c-800wi" alt="Perception-neuron-1" border="0" /></a></p>
<p>Neuron is one of the world's smallest full-functioned 9-axis IMU with on-board calculation and calibration algorithms. The Hub collects, synchronizes and transmits data via USB port or WIFI for editing in MotionBuilder or Noitom’s own Perception Axis software.&nbsp;Each sensor is just 12mm square and 6mm deep, making the system lightweight and portable.&nbsp;</p>
<p>&nbsp;</p>
<p><a href="https://www.kickstarter.com/projects/1663270989/project-perception-neuron" target="_blank">Read more about Perception Neuron on the product’s Kickstarter page</a></p>
<p><a href="http://www.noitom.com/" target="_blank">Visit Noitom’s website</a></p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: An online event with an opportunity to receive up to US $100 per app published and win one of eight iPad minis!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: an-online-event-with-an-opportunity-to-receive-up-to-us-100-per-app-published-and-win-one-of-eight-i
CATEGORY: Autodesk
CATEGORY: Autodesk Exchange
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/08/an-online-event-with-an-opportunity-to-receive-up-to-us-100-per-app-published-and-win-one-of-eight-i.html 
DATE: 08/08/2014 03:59:27 AM
-----
BODY:
<p>We are excited to announce the 2014&#0160;<a href="http://exchangeapphack.com/">Autodesk® Exchange Apps Hackathon</a>. While similar in concept to the Portathon that we held in 2013, this event is bigger, better, has new competitions and great prizes. Anyone can participate from anywhere in the world and at any time both before the event and during the Hackathon days. We’ve assembled a great line up of speakers to give presentations and demos on hot topics that will help your overall app development and technical experts will be on hand to help and guide you.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73dfdac09970d-pi" style="display: inline;"><img alt="Hackathon" class="asset  asset-image at-xid-6a0163057a21c8970d01a73dfdac09970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73dfdac09970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Hackathon" /></a></p>
<p>The Autodesk Exchange Apps Hackathon is a virtual web based Hackathon.&#0160; It’s a community event that gives you the opportunity to work closely with other members of the software development community and Autodesk engineers — in real time, developing new apps for Autodesk Exchange.&#0160;</p>
<p>The Hackathon will run from 9:00 a.m. U.S. Pacific Time (PST) on Saturday, September 20, 2014 to 4 p.m. (PST) on September 21, 2014. You can participate from anywhere you have internet access. &#0160;</p>
<p>The Hackathon is a free event.&#0160; Plus, there is a reward!&#0160; For all new apps submitted to the Autodesk Exchange Apps store by midnight on September 30, 2014 and accepted for publication in the store by November 30, 2014, you will receive US$ 100 per “non-Free” app and US $50 “Free or Trial” app for up to 5 apps per company.</p>
<p><strong>More Information and Registration:</strong></p>
<p>Head on over to&#0160;<a href="http://exchangeapphack.com/">exchangeapphack.com</a>&#0160;for details on the event, including a FAQ, the schedule and speaker line up, the Rules and the Registration link.</p>
<p>If you have any questions about the Hackathon or the Cloud Apps and Sustainability Apps competitions, please send an email to&#0160;<a href="mailto:exchangeapphack@autodesk.com">exchangeapphack@autodesk.com</a>.&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Naiqi Weng
STATUS: Publish
ALLOW COMMENTS: 0
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: naiqi-weng

UNIQUE URL: https://around-the-corner.typepad.com/adn/naiqi-weng.html 
DATE: 08/06/2014 02:11:02 AM
-----
BODY:
<img src="https://around-the-corner.typepad.com/adn/naiqi-weng.jpg" />
<p>Naiqi has been working in the computer graphics industry for over 10 years and most of her passion focuses on customizing Maya, 3dsMax, and MotionBuilder. She has been working as a Developer Consultant in Autodesk Developer Network evangelizing M&amp;E API for the last 7 years. Her daily mandate involves helping third party plug-in developers and customers solve API programming issues, delivering API trainings, and presenting at conferences such as Siggraph and the Game Developer Conference.</p>
<p>Naiqi can be contacted&nbsp;<a href="mailto:naiqi.weng@autodesk.com">by email</a>, but please don't expect him to provide support: if you need support for our products or APIs, please visit Autodesk's&nbsp;<a href="http://support.autodesk.com/">support website</a>, use our&nbsp;<a href="http://discussion.autodesk.com/">discussion groups</a>, visit the&nbsp;<a href="http://area.autodesk.com/">AREA</a>&nbsp;community portal with dedicated M&amp;E blogs and discussion group or post a question via your reseller or the&nbsp;<a href="http://adn.autodesk.com/">Autodesk Developer Network website</a>, if you're a member.</p>
<p><strong>Disclaimer</strong><br />If you need an official Autodesk company response or a contact for press-related activities please contact&nbsp;<a href="http://www.autodesk.com/pressroom">Autodesk Public Relations</a>.</p>
<p>The contents of this site are my own personal opinions and do not represent my employer's view in any way. In addition, my thoughts and opinions often change, and as a weblog is intended to provide a semi-permanent point-in-time snapshot you should not consider out-of-date posts to reflect my current thoughts and opinions.</p>
<p>The code provided in this blog is provided "as is" and with all faults. I (and my employer) specifically disclaim any implied warranty of merchantability or fitness for a particular use. The operation of the code provided is not warranted to be uninterrupted or error free.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: An FBX SDK iOS quick tutorial
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: an-fbx-sdk-ios-quick-tutorial
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: iOS
CATEGORY: Samples
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/07/an-fbx-sdk-ios-quick-tutorial.html 
DATE: 07/07/2014 06:25:00 AM
-----
BODY:
<p>I recently had a question on the FBX iOS SDK and while I had to use it on a ReCap Photo project, I wanted to share my experience with you. The SDK is the one used to write the FBXReview application on iOS. The FBX development team is working on an Android version right now and should come in a future release.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fd2c18fa970b-pi" style="display: inline;"><img alt="FbxReview" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fd2c18fa970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fd2c18fa970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="FbxReview" /></a></p>
<p>To minimize the efforts of writing our first iOS application using the FBX iOS SDK, we will reuse the ImportScene FBX sample and transpose it to iOS Cocoa vs a Windows or MacOS console application. When you install the FBX iOS SDK, the installer does not install any samples, documentation, etc... but you can install the MacOS version to get at leaast the source code even if there is no iOS Cocoa project coming with it.</p>
<h2>Starting a New Project</h2>
<p>We will create a blank project as the starting point for our FBX project.</p>
<ol>
<li>Install the FBX iOS SDK from <a href="http://www.autodesk.com/developfbx" target="_self">http://www.autodesk.com/developfbx</a> <br />(latest release at the time of this post is 2015.1) <br />The installer will copy files in a non-standard location /Applications/Autodesk/FBX SDK/2015.1</li>
<li>Start Xcode<br /> (using version 5.3 in this example)</li>
<li>Create a new iOS single view project (Universal)<br /> With this version of the FBX SDK (i.e. 2015.1) the simulator library does not contain the 64 bit version, so you need to change your Build Settings accordingly for ‘Architectures’ and ‘Other Linker Flags’</li>
<ol type="a">
<li>For ‘Architectures’, press the + sign on Debug and Release to add different configuration for building simulator or a real device app, and change the default standard architecture to $(ARCHS_STANDARD_32_BIT) for the simulator configurations.<br /> <strong><span style="color: #ff0000;">Note this step will not be needed in future releases as this bug has been already fixed.</span></strong></li>
</ol></ol>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73de6da77970d-pi" style="display: inline;"><img alt="Architectures" class="asset  asset-image at-xid-6a0163057a21c8970d01a73de6da77970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73de6da77970d-500wi" style="display: block; margin-left: auto; margin-right: auto;" title="Architectures" /></a></p>
<ol><ol start="2" type="a">
<li>For ‘Other Linker Flags’, do almost the same thing but reference the libraries depending of the Architecture.</li>
</ol></ol>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73de6dbab970d-pi" style="display: inline;"><img alt="OtherLinkerFlags" class="asset  asset-image at-xid-6a0163057a21c8970d01a73de6dbab970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73de6dbab970d-500wi" style="display: block; margin-left: auto; margin-right: auto;" title="OtherLinkerFlags" /></a></p>
<ol start="4">
<li>Add into the Project Framework dependency list the ‘libiconv.dylib’</li>
<li>Next is to tell Xcode where to find the header files. Go in ‘User Header Search Paths’ and add the following path &quot;/Applications/Autodesk/FBX SDK/2015.1/include&quot; (do not forget the &quot;). And set the ‘Always Search User Path’ to true.</li>
<li>Open your ViewController.h and change the interfece to <br />@interface ViewController : UITableViewController</li>
<li>Rename your ViewController.m into ViewController.mm</li>
<li>Open your ViewController.mm and add<br /> #import &quot;fbxsdk.h&quot;</li>
<li>Press Cmd+B to build your project. It should compile and link fine.</li>
</ol>
<h2>Copy the existing ImportScene sample code into the project</h2>
<p>For our example, I just copied an existing FBX sample and slightly modified it to my needs. There is no major modification and 99% of the code is working as is. The only modification made where to adapt the code from a console app to a Cocoa app. The modification are made in the main.cxx.</p>
<h2>Few Tips</h2>
<p>Because the FBX iOS SDK is a C++ API, you need to remember few things to avoid problems:</p>
<ul>
<li>rename your Cocoa files to .mm vs .m, otherwise Xcode will compile the source as C code vs C++ and that will generate many errors.</li>
<li>strings are C++ strings (&#39;char *&#39;) vs NSString, so you need to convert them back and force. You can use these techniques for example:</li>
<ul>
<li>NSString *st =[[NSString alloc] initWithFormat:@&quot;%s&quot;, myString]</li>
<li>NSString *st =[[NSString alloc] initWithCString:myString encoding:NSUTF8StringEncoding]</li>
<li>FbxString st ([myString cStringUsingEncoding:[NSString defaultCStringEncoding]])</li>
</ul>
<li>most of the FBX sample are console applications which aren&#39;t valid app for iOS. For a quick port, you can trap all stdout and redirect them to&#0160;an UITextView control. See code in GenericViewController.mm fct:viewDidLoad line #50 #80, 81, 82<br />
<pre class="brush: c; toolbar: false; first-line: 44; highlight: [50, 80, 81, 82]">- (void)viewDidLoad {
	[super viewDidLoad] ;
	
	NSArray *paths =NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) ;
	NSString *documentsPath =[paths objectAtIndex:0] ;
	NSString *filename =[NSString stringWithFormat:@&quot;%@/output.txt&quot;, documentsPath] ;
	FILE *fp =freopen ([filename cStringUsingEncoding:[NSString defaultCStringEncoding]], &quot;w&quot;, stdout) ;
	
	switch ( __what ) {
		case 1: // Global Light Settings
			DisplayGlobalLightSettings (&amp;(self._fbxObject-&gt;_scene)-&gt;GetGlobalSettings ());
			break ;
		case 2: // Global Camera Settings
			DisplayGlobalCameraSettings (&amp;(self._fbxObject-&gt;_scene)-&gt;GetGlobalSettings ()) ;
			break ;
		case 3: // Global Time Settings
			DisplayGlobalTimeSettings (&amp;(self._fbxObject-&gt;_scene)-&gt;GetGlobalSettings ()) ;
			break ;
		case 4: // Hierarchy
			DisplayHierarchy (self._fbxObject-&gt;_scene) ;
			break ;
		case 5: // Node Content
			DisplayContent (self._fbxObject-&gt;_scene) ;
			break ;
		case 6: // Pose
			DisplayPose (self._fbxObject-&gt;_scene) ;
			break ;
		case 7: // Animation
			DisplayAnimation (self._fbxObject-&gt;_scene) ;
			break ;
		case 8: // Generic Information
			DisplayGenericInfo (self._fbxObject-&gt;_scene) ;
			break ;
	}
	fclose (fp) ;
	
	std::ifstream txtFile ([filename cStringUsingEncoding:[NSString defaultCStringEncoding]]) ;
	std::string contents ((std::istreambuf_iterator(txtFile)), std::istreambuf_iterator()) ;
	_text.text =[NSString stringWithCString:contents.data () encoding:NSUTF8StringEncoding] ;
}
</pre>
</li>
</ul>
<p>&#0160;</p>
<p>The completed sample is posted on GitHub at this <a href="https://github.com/cyrillef/FBX-iOS-ImportScene" target="_self">location</a>.&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: API wishlist surveys - 2014
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: api-wishlist-surveys-2014
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/06/api-wishlist-surveys-2014.html 
DATE: 06/23/2014 10:09:37 PM
-----
BODY:
<p>This year’s API wishlist surveys for Autodesk Maya and Autodesk 3ds Max are now live:</p>
<ul>
<li><a href="https://www.surveymonkey.com/s/NR7Y3SS" target="_blank">Autodesk Maya</a></li>
<li><a href="https://www.surveymonkey.com/s/YKHSTTB" target="_blank">Autodesk 3ds Max</a></li>
</ul>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-pi"><img alt="API Survey" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Onlinesurvey" width="220" /></a><br />Our Engineering teams use the results from these surveys to help steer their ongoing API development priorities, release on release. If you have feedback or specific requests regarding our APIs, this is a great way to get them in front of the right people inside Autodesk.</p>
<p>The deadline for completing these surveys is&#0160;– <strong>August 1st, 2014</strong>&#0160;– so if you’re interested in providing us with feedback, please don’t procrastinate: while I expect they’ll remain open a little longer, the deadline probably won’t be extended by very much.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-pi"><img alt="Chart Results" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Chart_results" width="180" /></a><br />And I will, of course, post the survey&#39; results link, once they&#39;re available sometimes in August.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Randall Hess
EMAIL: randall.hess@gmail.com
IP: 192.241.57.20
URL: http://techanimator.blogspot.com
DATE: 06/24/2014 06:52:23 AM
The 3dsmax link doesn't seem to be working. Thanks!
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 132.188.32.206
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 06/24/2014 06:56:40 AM
Hi Randall,
Thx for the catch, I left a white space in the url :(
Fixed now

-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Hiring a Media and Entertainment API evangelist!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: hiring-a-media-and-entertainment-api-evangelist
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/06/hiring-a-media-and-entertainment-api-evangelist.html 
DATE: 06/19/2014 05:16:31 AM
-----
BODY:
<p><em>Do you get excited by APIs? Do you enjoy hacking wicked-cool technology together to solve your daily challenges? While your friends are binge-watching “Grimm” or playing “Minecraft” for hours on end, are you coding cool tools to help make content for those types of titles? If any of the above is true, then we want to talk to YOU! If you are enthusiastic about M&amp;E technologies, enjoy interacting with others and sharing this enthusiasm, and loves to evangelize code –then this is the job for you!</em></p>
<p><em> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73ddc259f970d-pi" style="display: inline;"><img alt="We are hiring" class="asset  asset-image at-xid-6a0163057a21c8970d01a73ddc259f970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73ddc259f970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="We are hiring" /></a></em></p>
<p>Hey everybody! Please put the word out that we are looking for a&#0160;<a href="http://www.autodesk.com/3dsmax" rel="homepage" target="_blank" title="Autodesk 3ds Max">3ds Max</a>&#0160;SDK expert! I know this blog is mainly targetting Maya, but in our role we usually work with multiple API, so while the job opening is mainly for 3ds Max, we will be happy by someone who knows Maya. Or someone knowing Maya already but willing to learn 3ds Max SDK. You know even more API such as FBX, MotionBuilder, talk to us.</p>
<p>My team is looking for a new Media and Entertainment (M&amp;E) API Evangelist for the<a href="http://getcoreinterface.typepad.com/blog/www.autodesk.com/adn" target="_self">Autodesk Developer Network</a>&#0160;(ADN) team to focus on 3ds Max SDK. We have a breadth of M&amp;E software including 3ds Max, Maya and MotionBuilder. We are also transitioning to the cloud and will be providing APIs through those cloud-based services in the future. We are looking for someone to provide evangelistic API support for 3ds Max SDK, and we also hope to find someone excited by the coming world in the cloud. If you have C++ skills, and see technolgoies like JavaScript, REST and HTML 5 in your future, then please talk to us.</p>
<p>API KNOWLEDGE TRANSFER IS THE REASON FOR BEING</p>
<ul>
<li>You will develop technical content for the ADN program including technical notes and whitepapers. Content is published on ADN blogs and used for conferences and technical marketing events.</li>
<li>Write extensive sample code that demonstrates API usage and best practice. Documenting your code is essential for knowledge transfer.</li>
<li>Develop and deliver training courses and/or presentations internally and to ADN members. Topics include APIs, and/or other software-development related topics.</li>
<li>Assist with technical marketing activities including presentations and event participation. Examples may include Autodesk University, or Game Developer Conference.</li>
<li>Use your knowledge of Autodesk product APIs to assist ADN members with their business objectives of providing value-added software. Assist with their software design by providing them with technical information on Autodesk APIs and technologies. Help resolve technical issues including communicating the functions of the API. Assist with API questions.</li>
<li>Work with internal product development engineering teams worldwide to help resolve customer and developer issues. Act as a liaison between engineering and ADN members by helping to evaluate and influence new product releases to help meet the needs of the ADN community. Submit defect and product enhancement reports and work closely with engineering to ensure appropriate resolution of issues impacting customer satisfaction.</li>
</ul>
<p>SUCCESS COMES WITH THE FOLLOWING SKILLS:</p>
<ul>
<li>You’re a gifted programmer who is excited about learning new technology and teaching others. (You already know deep in your heart if you’re a natural programmer – if you don’t, then you’re not).</li>
<li>C++ skills are essential for our M&amp;E product environments, including knowledge of object-oriented design.</li>
<li>Experience or are interested to learn 3ds Max SDK and programming environments. Knowledge of Maya and/or MotionBuilder SDK will also be valuable.</li>
<li>Written and verbal English skills are extremely important. Ability to be patient and communicate across cultures. Other language fluency is also a great asset.</li>
<li>Ability to troubleshoot software and programming problems. The understanding of techniques to debug software will be of great value.</li>
<li>Enjoy interacting with people – including one-on-one conversations and presenting to audiences at conferences.</li>
<li>Enjoy writing – including blogging, tweeting, and other social media outlets.</li>
</ul>
<p>EVEN MORE SUCCESS IS ADDED BY:</p>
<ul>
<li>Python and/or .NET API (experience or willing to learn)</li>
<li>Web and Cloud programming technologies, including JavaScript, REST and HTML 5 (experience or willing to learn)</li>
<li>Mobile platform programming technologies, such as Java, .NET and Objective-C (experience or willing to learn)</li>
</ul>
<p>Location: Montreal, Shanghai, or other locations if you are the right candidate. We have people located throughout the world, and location is not as important as the above skills. If you think you have the &quot;chops&quot; to excel in this position, please contact us. Send your resume, anything else that you view as interesting for us to know, and salary requirements to: <a href="mailto:kevin.vandecar@autodesk.com" target="_self">kevin.vandecar@autodesk.com</a>, Thanks!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Devdays @ AU Las Vegas 2014 - Call for Proposals
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-devdays-au-las-vegas-2014-call-for-proposals
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/05/adn-devdays-au-las-vegas-2014-call-for-proposals.html 
DATE: 05/16/2014 10:54:58 AM
-----
BODY:
<p>I am looking for presenters for the <strong style="font-size: small;">Autodesk Developer Network (ADN) M&amp;E Conference.&#0160;</strong><span style="font-size: small;">If you or someone you know would like the opportunity to present, please submit a proposal including the duration of your presentation. The ADN M&amp;E Conference is a great way to share your current API’s, tips &amp; tricks or knowledge about solving production challenges. Please keep in mind, the focus and audience of the ADN conference is developers.</span></p>
<div>
<div>
<ul>
<li>Classes need to have a WOW factor that speaks to M&amp;E developers as well as architects and engineers</li>
<li>Feature Autodesk’s Digital Entertainment Creation tools: 3ds Max, Maya, Motionbuilder, Mudbox, Max Design, Entertainment Creation Suite, etc...</li>
<li>Speakers can be both Autodesk employees as well as customers, including API developers, script writers, etc...</li>
<li>Please contact&#0160;<a href="mailto:cyrille.fauvel@autodesk.com">Cyrille Fauvel</a>&#0160;if you are interested in presenting or if you require more information.</li>
</ul>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-pi"><img alt="Au_twitter_icon_128x128_normal" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Au_twitter_icon_128x128_normal" /></a></p>
<p><strong>OVERVIEW</strong></p>
<p><strong>1. ADN M&amp;E Conference @ AU</strong></p>
<p><strong>On December 1<sup>st</sup></strong>, the Media &amp; Entertainment (M&amp;E) team at<strong>&#0160;</strong>Autodesk University will host a free Autodesk Developer Network (ADN) Conference. The ADN Conference is a great place to hear about upcoming M&amp;E product releases and changes in our API. Attend and share your experience as a developer and network with fellow ADN partners and the ADN team.</p>
<p>Watch out some of the talks from past years on Area</p>
<ul>
<li><a href="http://area.autodesk.com/au2011">http://area.autodesk.com/au2011</a></li>
<li><a href="http://area.autodesk.com/au2012/adn">http://area.autodesk.com/au2012/adn</a></li>
<li>or more on the&#0160;<a href="http://adnsparks.autodesk.com/adn/servlet/item?siteID=6681818&amp;id=18969388">ADN portal</a></li>
</ul>
<p>Feel free to forward this invite to people you know, good presenters, and sure you’d like to hear talking about technology. But remember we are looking for programming oriented lectures.</p>
<p><strong>Submit your proposal by June 30th</strong></p>
<p><strong>2.&#0160;</strong><strong>DevLab @ AU</strong></p>
<p>On<strong>&#0160;December 2<sup>nd</sup></strong>, the DevLab will be free for all ADN members. Network with fellow ADN partners, ask the DevTech team for programming advice, bring your laptop and work on your code, and gain insight from industry experts. For information about becoming an ADN member, visit&#0160;<a href="http://www.autodesk.com/applyadn">Autodesk Developer Network</a>.</p>
<p><strong>Important</strong>&#0160;<strong>note</strong>: Non-ADN members&#0160;<strong>must sign</strong>&#0160;an NDA to attend the ADN M&amp;E Conference before arriving on site. Forms will be available upon Registration.</p>
<p><strong>3.&#0160;</strong><strong>About Autodesk University – M&amp;E</strong></p>
<p>Autodesk University User Conference and Exhibition, Las Vegas - Autodesk University&#39;s flagship event is an annual conference and exhibition in Las Vegas where design and entertainment professionals from around the world attend classes, keynotes, product demonstrations, exhibits and networking events. Attendees can share ideas, work together to solve problems, and form professional relationships. Attendees also get year-round access to over 500 online classes on the Autodesk University website.</p>
<ul>
<li><strong>This year Media &amp; Entertainment will offer&#0160;</strong>many classes in the AU curriculum, an M&amp;E Innovation Forum, an Autodesk Developer Network Conference and a DevLab.</li>
<li>You&#39;ll learn from top-rated working professionals in the fields of AEC, Automotive and Transportation, CAD Management, Civil Infrastructure, Design Technology Management, Education, Government, Manufacturing,&#0160;<strong>Media &amp; Entertainment</strong>, Geospatial, Utilities &amp; Telecommunication, Design Visualization, and many more.</li>
<li>Instructors are selected based on their technical expertise and communication skills, as well as their proposals to address issues relevant to their industries today. Industry experts, magazine and Internet columnists, authors, and technical gurus are all assembled in one place for you to connect with and learn from. Here, you will glean information about niche markets you won&#39;t find anywhere else.</li>
</ul>
<p>See&#0160;<a href="http://au.autodesk.com/?nd=au_las_vegas">http://au.autodesk.com/?nd=au_las_vegas</a></p>
<p>Have a great day!</p>
</div>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Naiqi Weng
AUTHOR EMAIL: naiqi.weng@autodesk.com
TITLE: How to decide if an input attribute is changed or its value is not valid any more?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: test
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Maya
CATEGORY: Naiqi Weng
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/05/test.html 
DATE: 05/06/2014 10:55:48 AM
-----
BODY:
<p>When you are working with Dependency Graph and custom node, sometimes in compute() function call you want to check if an input attribute is changed or its value is still up to date. At first glance, the most straightforward approach to tackle this down is to use MDataBlock::isClean(). This function will return false if your attribute value is not valid any more, which means you will need to either retrieve or recalculate a new value on this attribute.</p>
<p>However this approach is only effective when your input attribute has incoming connections, which is not always the case. In fact, in some situations where you want to check if you input attribute’s value is valid or not, that input attribute may not have any incoming connection.</p>
<p>For example, let’s assume a situation like this: On a custom node, input attribute A and input attribute B are required to compute output attribute C; the calculation portion dependent on B is quite expensive, the calculation portion dependent on attribute A is relatively simple; input attribute A does not have an incoming connection and most of the time user just set A’s value directly by setAttr. In this situation, you would like to optimize node calculation by differentiating which attribute value has been changed: if A has been changed, you could use the cached calculation portion dependent on B and speed up the calculation for output C; if B has been changed, you would need to redo the calculation completely.</p>
<p>In this scenario, MDataBlock::isClean() on A will always return “True”, you will not be able to tell if A’s value has been changed by this approach. You could set attribute A to be internal attribute and save a local copy of A’s value and use MPxNode::setInternalValueInContext() to find out if the attribute value has been changed.</p>
<p>Another better approach, which encompasses all the above situations is to maintain your own flag of whether the attribute is dirty and override MPxNode::setDependentsDirty(). In MPxNode::setDependentsDirty(), set the flag to be dirty if the passed-in dirty plug is the attribute you are watching, then in compute() check the value of this flag and reset it.&#0160;</p>
<p>To summarize, there are 3 ways to check if an input attribute is changed or its value is not good anymore:<br /> 1. MDataBlock::isClean(), but this one only works in the situation that this input attribute has an incoming connection from other attributes of other nodes. When the connected upstream attributes get dirty, it will mark the connection and this input attribute dirty.</p>
<p>2. Set the attribute as an internal attribute by MFnAttribute::setInternal(), and in MPxNode::setInternalValueInContext() find out if the attribute value has been changed. This only works when there is no incoming connection on this attribute.</p>
<p>3. Maintain your own flag of whether the attribute is dirty and override MPxNode::setDependentsDirty() to set corresponding flag value based on passed-in dirty plug. This is by far the most efficient approach and thus the recommended way.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya compiler versions (update)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-compiler-versions-update
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/04/maya-compiler-versions-update.html 
DATE: 04/16/2014 04:26:53 AM
-----
BODY:
<p>This is an update on a previous post for older versions which can be found <a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html" target="_self">here</a>.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-pi" style="display: inline;"><img alt="Source-code-programming" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167673f53f1970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Source-code-programming" /></a></p>
<p>OS &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; Compiler</p>
<p><span style="text-decoration: underline;"><strong>Maya 2015</strong></span></p>
<p>Windows<br />64bit&#0160;&#0160;&#0160;&#0160;Win7x64 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; Visual Studio 2012 Update 4<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Intel&#0160;Composer XE 2013 Update 5&#0160;(13.1.3.198)</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL/CentOS 6.2, FC14<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;gcc 4.1.2<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Intel&#0160;Composer XE 2013 SP1 Update 1&#0160;(14.0.1.106)</p>
<p>Mac<br />64bit &#0160; &#0160;Mountain Lion 10.8.5<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Xcode 5.0.2 with SDK 10.8 (Mountain Lion)<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;clang with libstdc++<br />&#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Intel&#0160;Composer XE 2013 SP1 Update 1&#0160;(14.0.1.103)</p>
<ul>
<li>Embedded Python 2.7.3&#0160;- Internal to Maya&#0160;</li>
<li>Embedded PySide 1.2</li>
<li>Qt 4.8.5</li>
<li>Boost 1.52 with its own namespace awBoost, Alembic uses Boost 1.53</li>
<li><a href="http://threadingbuildingblocks.org/download#stable-releases" target="_self">TBB 4.2 Update 1</a></li>
<li><a href="http://www.microsoft.com/download/en/details.aspx?id=6812" target="_self">DirectX SDK June 2010</a>&#0160;(DX11)</li>
<li>MR 3.12.0.4</li>
</ul>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building SIP, and PyQt for Maya 2015
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: building-sip-and-pyqt-for-maya-2015
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/04/building-sip-and-pyqt-for-maya-2015.html 
DATE: 04/11/2014 12:58:53 AM
-----
BODY:
<p><strong>This is an updated version for Maya 2015&#39;&#0160;PyQt build instructions.</strong></p>
<p>This is an updated version of the Maya 2014 build instructions for PyQt and PySide (<a href="http://around-the-corner.typepad.com/adn/2013/04/building-sip-and-pyqt-for-maya-2014.html" target="_self">here</a>). The very good news is that with Maya 2014 &amp; 2015, there is no more need to build PySide as it is coming by default in Maya :)&#0160;</p>
<p>libxml, openSSL, OpenAL,&#0160;python2.7, qt-4.8.5-64, and tbb&#0160;are also coming by default in the Maya include and lib folder, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a &#39;C:\Program Files\Autodesk\Maya2015\support\opensource&#39; folder now which contains some of the community source. <a href="http://www.autodesk.com/lgplsource" target="_self">http://www.autodesk.com/lgplsource</a> is also a location you want to remember for future.</p>
<p>I&#39;ll come back later with instructions to rebuild Qt itself for those who needs to, but again you do not need to build Qt to build PyQt anymore.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi"><img alt="Build-headacke" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a></p>
<p>Maya 2015 also includes most of the tools we need to build PyQt without the need of compiling Qt source &amp; tools - so in this post we will see the easy way to build PyQt.</p>
<p>Download SIP and PyQt source from &#39;<a href="http://www.riverbankcomputing.co.uk" target="_self">http://www.riverbankcomputing.co.uk</a>&#39; - here I downloaded &#39;sip-4.15.5&#39; and &#39;PyQt-win-gpl-4.10.4&#39; (Note that you do not have to use these versions if you prefer using an older version, all you need is to use a version compatible with Qt4.8.5).&#0160;Unzip them in one folder, then you should get something like this:</p>
<h2>Mac</h2>
<p style="padding-left: 30px;"><em>/Users/cyrille/Documents/_Maya2015Scripts/sip-4.15.5</em><br /><em>/Users/cyrille/Documents/_Maya2015Scripts/PyQt-mac-gpl-4.10.4</em></p>
<p style="padding-left: 30px;"><em>&#39;/Users/cyrille/Documents/_Maya2015Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Mac OS X environment, in the Maya Documentation)&#0160;</p>
<p>Untar&#0160;the /devkit/include/qt-4.8.5-include.tar.gz into /devkit/include/Qt</p>
<p>Copy /Resources/qt.conf into /bin/qt.conf and edit it like this:</p>
<pre class="bush: bash; toolbar: false;">[Paths]
Prefix=
Libraries=../MacOS
Binaries=../bin
Headers=../../../devkit/include/Qt
Data=..
Plugins=../qt-plugins
Translations=../qt-translations
</pre>
<p>Untar the qt-4.8.5-64-mkspecs.tar.gz into $MAYA_LOCATION/Maya.app/Contents/mkspecs. And make sure the qconfig.pri looks like this:</p>
<p>qconfig.pri</p>
<pre class="brush: bash; toolbar: false;">#configuration
CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework
QT_ARCH = macosx
QT_EDITION = OpenSource
QT_CONFIG +=  minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework

#versioning
QT_VERSION = 4.8.5
QT_MAJOR_VERSION = 4
QT_MINOR_VERSION = 8
QT_PATCH_VERSION = 5

#namespaces
QT_LIBINFIX = 
QT_NAMESPACE = 
QT_NAMESPACE_MAC_CRC = 

QT_GCC_MAJOR_VERSION = 4
QT_GCC_MINOR_VERSION = 2
QT_GCC_PATCH_VERSION = 1
</pre>
<p>You also need to create copy of the Qt lib files as fake .dylib files from the /MacOS directory.&#0160;The script below will give you the commands to run to do that.</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.15.5
export MAYA_LOCATION=/Applications/Autodesk/maya2015

cd $SIPDIR
$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64
make
sudo make install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export MAYA_LOCATION=/Applications/Autodesk/maya2015
export QTDIR=$MAYA_LOCATION/Maya.app/Contents
export QMAKESPEC=$QTDIR/mkspecs/macx-g++
export INCDIR_QT=$MAYA_LOCATION/devkit/include/Qt
export LIBDIR_QT=$QTDIR/MacOS

if [ ! -f $QMAKESPEC/qmake.conf ];
then
  echo &quot;You need to install qt-4.8.5-64-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;
  exit
fi
if [ ! -f $INCDIR_QT/QtCore/qdir.h ];
then
  echo &quot;You need to uncompress $MAYA_LOCATION/devkit/include/qt-4.8.5-include.tar.gz in $INCDIR_QT !&quot;
  exit
fi
# qt.conf - /Applications/Autodesk/maya2015/Maya.app/Contents/Resources
if [ ! -f $QTDIR/bin/qt.conf ];
then
  echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;
  exit
fi

test=`grep &quot;Data=../..&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Data=..&#39;&quot;
  exit
fi
test=`grep &quot;Headers=../../include&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
&#0160; echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=../../../devkit/include/Qt&#39;&quot;
&#0160; exit
fi
test=`grep &quot;Libraries=../lib&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
&#0160; echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Libraries =../MacOS&#39;&quot;
&#0160; exit
fi
test=`grep &quot;Plugins = qt-plugins&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Plugins=../qt-plugins&#39;&quot;
  exit
fi
test=`grep &quot;Translations = qt-translations&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Translations=../qt-translations&#39;&quot;
  exit
fi

for mod in Core Declarative Designer DesignerComponents Gui Help Multimedia Network OpenGL Script ScriptTools Sql Svg WebKit Xml XmlPatterns
do
  if [ ! -f $QTDIR/MacOS/libQt${mod}.dylib ];
  then
    echo &quot;You need to copy a fake Qt$mod dylib - cp $QTDIR/MacOS/Qt$mod $QTDIR/MacOS/libQt${mod}.dylib !&quot;
    #cp $QTDIR/MacOS/Qt$mod $QTDIR/MacOS/libQt${mod}.dylib
    exit
  fi
done
if [ ! -f $QTDIR/MacOS/libphonon.dylib ];
then
  echo &quot;You need to copy a fake phonon dylib - cp $QTDIR/MacOS/phonon $QTDIR/MacOS/libphonon.dylib !&quot;
  #cp $QTDIR/MacOS/phonon $QTDIR/MacOS/libphonon.dylib
  exit
fi

export DYLD_LIBRARY_PATH=$QTDIR/MacOS
export DYLD_FRAMEWORK_PATH=$QTDIR/Frameworks

export SIPDIR=$MAYAQTBUILD/sip-4.15.5
export PYQTDIR=$MAYAQTBUILD/PyQt-mac-gpl-4.10.4

cd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Linux</h2>
<p style="padding-left: 30px;"><em>/home/cyrille/Documents/_Maya2015Scripts/sip-4.15.5</em><br /><em>/home/cyrille/Documents/_Maya2015Scripts/PyQt-mac-gpl-4.10.4</em></p>
<p style="padding-left: 30px;"><em>&#39;/home/cyrille/Documents/_Maya2015Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux environments (64 bit), in the Maya Documentation).</p>
<p>Edit your qt.conf file (/usr/autodesk/maya2015-x64/bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Untar the /include/qt-4.8.5-include.tar.gz into /include/Qt</p>
<p>Untart the /mkspecs/qt-4.8.5-mkspecs.tar.gz into /mkspecs</p>
<p>Make qmake, moc executables from the Maya bin directory</p>
<pre class="brush: shell; toolbar: false;">sudo chmod aog+x /usr/autodesk/maya2015-x64/bin/moc
sudo chmod aog+x /usr/autodesk/maya2015-x64/bin/qmake
</pre>
<p>Build &amp; Install SIP</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.14.5
export MAYA_LOCATION=/usr/autodesk/maya2015-x64

cd $SIPDIR
$MAYA_LOCATION/bin/mayapy ./configure.py
make
sudo make install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export MAYA_LOCATION=/usr/autodesk/maya2015-x64
export QTDIR=$MAYA_LOCATION
export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64
export INCDIR_QT=$MAYA_LOCATION/include/Qt
export LIBDIR_QT=$QTDIR/lib

if [ ! -f $QMAKESPEC/qmake.conf ];
then
  echo &quot;You need to install qt-4.8.5-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;
  exit
fi
if [ ! -f $INCDIR_QT/QtCore/qdir.h ];
then
  echo &quot;You need to uncompress $MAYA_LOCATION/include/qt-4.8.5-include.tar.gz in $INCDIR_QT !&quot;
  exit
fi
# qt.conf - /Applications/Autodesk/maya2015/Maya.app/Contents/Resources
if [ ! -f $QTDIR/bin/qt.conf ];
then
  echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;
  exit
fi

test=`grep &quot;Headers=../include/Qt&quot; $QTDIR/bin/qt.conf`
if [ -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=../include/Qt&#39;&quot;
  exit
fi

export SIPDIR=$MAYAQTBUILD/sip-4.15.5
export PYQTDIR=$MAYAQTBUILD/PyQt-x11-gpl-4.10.4

cd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Windows</h2>
<p style="padding-left: 30px;"><em>D:\__sdkext\_Maya2015 Scripts\sip-4.15.5</em><br /><em>D:\__sdkext\_Maya2015 Scripts\PyQt-win-gpl-4.10.4</em></p>
<p style="padding-left: 30px;"><em>&#39;D:\__sdkext\_Maya2015 Scripts&#39; being my local folder. Now the instructions and scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment (Developer Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows environment (64‐bit), in the Maya Documentation)</p>
<p>Edit your qt.conf file (C:\Program Files\Autodesk\Maya2015\bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Unzip the /include/qt-4.8.5-64-include.tar.gz into /include/Qt</p>
<p>Unzip the /mkspecs/qt-4.8.5-64-mkspecs.tar.gz into /mkspecs</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: &quot;%MAYAQTBUILD%&quot;
v:

set SIPDIR=v:\sip-4.15.5
set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0
if [%LIBPATH%]==[] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2015
set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

cd %SIPDIR%
&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py
nmake
nmake install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: &quot;%MAYAQTBUILD%&quot;
v:

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2015
if exist m:\nul subst m: /d
subst m: &quot;%MAYA_LOCATION%&quot;
set MAYA_LOCATION=m:

set QTDIR=%MAYA_LOCATION%
set MSVC_VERSION=2012
set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%
if not exist &quot;%QMAKESPEC%\qmake.conf&quot; (
	echo &quot;You need to uncompress %MAYA_LOCATION%\mkspecs\qt-4.8.5-64-mkspecs.tar.gz !&quot;
	goto :end
)
if not exist &quot;%MAYA_LOCATION%\include\Qt\QtCore\qdir.h&quot; (
	echo &quot;You need to uncompress %MAYA_LOCATION%\include\qt-4.8.5-64-include.tar.gz in %MAYA_LOCATION%\include\Qt !&quot;
	goto :end
)
findstr /L /C:&quot;Headers=../include/Qt&quot; %MAYA_LOCATION%\bin\qt.conf &gt;nul 2&gt;&amp;1
if ERRORLEVEL 1 (
	echo &quot;You need to edit %MAYA_LOCATION%\bin\qt.conf to use &#39;Headers=../include/Qt&#39;&quot;
	goto :end
)

set SIPDIR=v:\sip-4.15.5
set PYQTDIR=v:\PyQt-win-gpl-4.10.4

set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 11.0
if [%LIBPATH%]==[] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64

set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

cd %PYQTDIR%
set PATH=%QTDIR%\bin;%PATH%
&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py LIBDIR_QT=%QTDIR%\lib INCDIR_QT=%QTDIR%\include\Qt MOC=%QTDIR%\bin\moc.exe -w --no-designer-plugin
nmake
nmake install

:end
pause
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Testing</h2>
<p>Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:</p>
<pre class="brush: python; toolbar: false;">import sys
from PyQt4 import QtGui


class Example(QtGui.QWidget):
    
    def __init__(self):
        super(Example, self).__init__()
        
        self.initUI()
        
    def initUI(self):      

        self.btn = QtGui.QPushButton(&#39;Dialog&#39;, self)
        self.btn.move(20, 20)
        self.btn.clicked.connect(self.showDialog)
        
        self.le = QtGui.QLineEdit(self)
        self.le.move(130, 22)
        
        self.setGeometry(300, 300, 290, 150)
        self.setWindowTitle(&#39;Input dialog&#39;)
        self.show()
        
    def showDialog(self):
        
        text, ok = QtGui.QInputDialog.getText(self, &#39;Input Dialog&#39;, &#39;Enter your name:&#39;)
        
        if ok:
            self.le.setText(str(text))
        
ex = Example()
</pre>
<p>&#0160;If you see the dialog is showing, you are all set :)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: nedfel
EMAIL: nedfel@gmail.com
IP: 220.133.45.115
URL: http://mayaprograming.blogspot.tw/
DATE: 04/17/2014 07:17:15 PM
Thanks! 
It's really helpful!
-----
COMMENT:
AUTHOR: David Johnson
EMAIL: david@djx.com.au
IP: 124.180.197.163
URL: 
DATE: 04/19/2014 01:19:31 AM
Thanks. This is the first time I tried to build it myself. When building for windows, I had to comment out this line in both cases:

if [%LIBPATH%]==[] call "%MSVC_DIR%\VC\vcvarsall" amd64

David
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Gameware 2015 released
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: gameware-2015-released
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Games

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/04/gameware-2015-released.html 
DATE: 04/04/2014 01:52:00 AM
-----
BODY:
<p>Announcing HumanIK 2015! HumanIK 2015 introduces a new Creature Solver, integration with Unreal Engine 4, and more! Learn more: <a href="http://autode.sk/humanik" target="_self">http://autode.sk/humanik</a></p>
<p>You said the problem with HumanIK was that it’s only about humans. And, we listened! Introducing the new Creature Solver in HumanIK 2015 that enables IK computations on non-human creatures with any number of limbs, tentacles, and antennae. Check it out: <a href="http://autode.sk/1ifgc9s" target="_self">http://autode.sk/1ifgc9s</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce5e8a7970b-pi" style="display: inline;"><img alt="Bee" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fce5e8a7970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce5e8a7970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Bee" /></a></p>
<p>Gameware Navigation 2015 is here! Navigation 2015 brings improved animation-driven locomotion, dynamic NavMesh, new hierarchical pathfinding, and more! Find out more: <a href="http://autode.sk/navigation" target="_self">http://autode.sk/navigation</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce5e815970b-pi" style="display: inline;"><img alt="Predictable_results_b[1]" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fce5e815970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce5e815970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Predictable_results_b[1]" /></a></p>
<p>Announcing Scaleform 4.4! Take advantage of better-than-ever performance on next-gen and mobile platforms with a brand new ActionScript 3 virtual machine and re-architected rendering engine. Learn more: <a href="http://autode.sk/scaleform" target="_self">http://autode.sk/scaleform</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Feeling Foolish
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: feeling-foolish
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/04/feeling-foolish.html 
DATE: 04/03/2014 12:18:07 AM
-----
BODY:
<p>The ADN blog posts of April 1st were the result of the second year of our team&#39;s internal April Fools&#39; Challenge, where we have a little friendly competition to see who can post the &#39;best&#39; April Fools&#39; article. Of course, different people like different kinds of humor, so there&#39;s never really just one &#39;best&#39;. (We try to avoid posting serious articles on April 1st in case someone thinks we&#39;re joking when we&#39;re not, but one sometimes slips through due to timezone miscalculations).</p>
<p>One little note about mine was that half of it was true - I let you find out by yourself which are true and which aren&#39;t ;)</p>
<p>In no particular order, here is a full list of our Foolish posts (along with the name and location of the perpetrator):</p>
<ul>
<li>Xiaodong Liang (China) -&#0160;<a href="http://adndevblog.typepad.com/aec/2014/04/avr-glass-autodesk-virtual-reality-glass-in-the-age-of-cloud.html" target="_blank">http://adndevblog.typepad.com/aec/2014/04/avr-glass-autodesk-virtual-reality-glass-in-the-age-of-cloud.html</a></li>
<li>Adam Nagy (UK) -<a href="http://adndevblog.typepad.com/manufacturing/2014/04/william-as-honorary-autodesk-spokesperson.html" target="_blank">http://adndevblog.typepad.com/manufacturing/2014/04/william-as-honorary-autodesk-spokesperson.html</a></li>
<li>Kevin Vandecar (US) -<a href="http://getcoreinterface.typepad.com/blog/2014/04/preparation-for-your-3ds-max-customers-cloud-storage.html" target="_blank">http://getcoreinterface.typepad.com/blog/2014/04/preparation-for-your-3ds-max-customers-cloud-storage.html</a></li>
<li>Augusto Goncalves (Brazil) -<a href="http://adndevblog.typepad.com/infrastructure/2014/04/infraworks-360-public-pilot.html" target="_blank">http://adndevblog.typepad.com/infrastructure/2014/04/infraworks-360-public-pilot.html</a></li>
<li>Daniel Du (China) -<a href="http://adndevblog.typepad.com/cloud_and_mobile/2014/04/autodesk-exchange-is-making-it-a-real-one.html" target="_blank">http://adndevblog.typepad.com/cloud_and_mobile/2014/04/autodesk-exchange-is-making-it-a-real-one.html</a></li>
<li>Jeremy Tammik (Switzerland) -<a href="http://thebuildingcoder.typepad.com/blog/2014/04/automating-large-scale-waste-recycling-and-sustainability.html" target="_blank">http://thebuildingcoder.typepad.com/blog/2014/04/automating-large-scale-waste-recycling-and-sustainability.html</a></li>
<li>Cyrille Fauvel (France) -&#0160;<a href="http://around-the-corner.typepad.com/adn/2014/04/3d-printing-second-industrial-revolution-is-under-way.html" target="_blank">http://around-the-corner.typepad.com/adn/2014/04/3d-printing-second-industrial-revolution-is-under-way.html</a></li>
<li>Partha Sarkar (India) -&#0160;<a href="http://adndevblog.typepad.com/aec/2014/04/1-2-3-d-import-a-revit-family.html" target="_blank">http://adndevblog.typepad.com/aec/2014/04/1-2-3-d-import-a-revit-family.html</a></li>
<li>Brian Ekins (US) -<a href="http://modthemachine.typepad.com/my_weblog/2014/04/new-age-of-cad-interaction.html" target="_blank">http://modthemachine.typepad.com/my_weblog/2014/04/new-age-of-cad-interaction.html</a></li>
<li>Stephen Preston (US) -<a href="http://adndevblog.typepad.com/autocad/2014/03/autodesk-announces-microsuites-1.html" target="_blank">http://adndevblog.typepad.com/autocad/2014/03/autodesk-announces-microsuites-1.html</a></li>
</ul>
<p>And of course, I have to mention&#0160;<a href="http://through-the-interface.typepad.com/through_the_interface/2014/04/new-pink-theme-for-autocad-2015.html" target="_blank">the post by Kean Walmsley</a>&#0160;- our longstanding Master of Fools.</p>
<p>Although, the Autodesk-related post yesterday that made me laugh the most was this one -&#0160;<a href="http://designandmotion.net/autodesk/its-autodesks-turn-to-get-acquired-by-facebook/" target="_blank">http://designandmotion.net/autodesk/its-autodesks-turn-to-get-acquired-by-facebook/</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 3D printing: Second industrial revolution is under way
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: 3d-printing-second-industrial-revolution-is-under-way
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/04/3d-printing-second-industrial-revolution-is-under-way.html 
DATE: 04/01/2014 01:00:55 AM
-----
BODY:
<p>The technology is decades old, but now there’s an ecosystem in place and the technology is becoming mature. At its beginning I was really skeptical about that technology, but I recently read couple of articles changing my minds. I also met colleagues in our annual team meeting the last few days who said that most of 2d printers are now affordable and people starting to use them more frequently. So I wanted to share with you my latest findings... But lets&#39; start from the beginning.</p>
<h2>3D Printing Has Started A Revolution</h2>
<p>The revolution brewing in electronics is unprecedented -- even for an industry that is used to being upended. The rules that defined a century of innovation, design, and production are about to be rewritten. And modern manufacturing will be swept away.</p>
<p>It&#39;s their collision with two other disruptive technologies -- intelligent robotics and open source electronics -- that will bring an end to the era of big and complex global supply chains. Together, they&#39;re going to usher in the digitalization of manufacturing, by creating flexible, fast, local supply chains underpinned by software.</p>
<p>The balance between speed and quality is a tricky one, but latest printers bridge the gap. Both quick on their feet and high-performing, the printers beat out many other old technology printers&#0160;for producing the best of both worlds. Latest printers can print 12x12x12 inches models in about 15 minutes compared to hours before. That gives a lot new opportunity for people to use them in their day to day life.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73d9ee1bb970d-pi" style="float: right;"><img alt="Printed-orc" class="asset  asset-image at-xid-6a0163057a21c8970d01a73d9ee1bb970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73d9ee1bb970d-320wi" style="margin: 0px 0px 5px 5px;" title="Printed-orc" /></a></p>
<p>2-3 years ago, when I visited GDC in San Francisco, I was already amazed by what 3d printers could already do. Printing figurines in plastic, steel, fake wood, etc..., in many different sizes and eventually colorized was already a lot. I did print some of my favorite game&#39; figurines to have them on my desk while before I had them either as desktop paperwall or using 3d glasses on my desk.</p>
<p>Last year, I found out that I could eventually print them with some embedded robotic extension. But the price was that huge that I did not order them. But what a cool thing to have them animated and interacting with me while I am coding ;) Or better as my wife desk is next to mine, while I am travelling controlling my &#39;orc&#39; robotized figurine to jump on her keyboard while she writes email - that would be awesome :) You can control the robotized figurine using your iPhone or using a Kinect - really cool!</p>
<p>Hope prices will go down soon.</p>
<p>&#0160;</p>
<p>There are few other things beyond the figurines that if you combine the latest technologies you could take avantage of.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce4195d970b-pi" style="float: left;"><img alt="Dezeen_Print-Shift-3D-printing-and-health_6" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fce4195d970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce4195d970b-320wi" style="margin: 0px 5px 5px 0px;" title="Dezeen_Print-Shift-3D-printing-and-health_6" /></a></p>
<p>At Autodesk, we did made a <a href="http://rc-api-adn.autodesk.com/3.1/api-docs/" target="_self">ReCap Photo WEB service API</a> lately which is super cool. The service extracts a full textured mesh from couple of photos of an object taken from your cellphone for example. And then you could eventually send it to a 3d printer to save the best moment of your life. Many of my friends said they would have loved having their baby in-uterus figure at that time. Too late for us, but possible nowadays. All you need to do is to ask your gynecologist to take few photos with different camera angles, use ReCap Photos to create the mesh and use one of the 3d printing companies on the WEB.</p>
<p>&#0160;</p>
<p>Chris Vienneau, the Maya platform Product Manager, printed a full suit from this character for the Autodesk <a href="http://area.autodesk.com/cave2013" target="_self">CAVE event</a> at Autodesk University (AU) and wear it during his talk. That was epic ;)</p>
<p>But that is past - see the latest cutting-edge technologies&#0160;stuff.</p>
<h2>Dutch hospital gives patient new plastic skull, made by 3D printer - See more <a href="http://www.dutchnews.nl/news/archives/2014/03/dutch_hospital_gives_patient_n.php" target="_self">here</a>.&#0160;</h2>
<p>A Dutch university hospital has successfully given a 22-year-old woman a plastic skull, made with the help of a 3D printer.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a51193d28a970c-pi" style="display: inline;"><img alt="Plastic skull Utrecht" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01a51193d28a970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a51193d28a970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Plastic skull Utrecht" /></a></p>
<p>Utrecht University&#39;s UMC says the operation is a world first.&#0160;<br /><br />The woman needed the operation because her skull was becoming thicker, compressing her brain and damaging its function. Her cranium had become 5cm thick, while a normal skull is up to around 1.5cm.</p>
<p><strong>Plastic</strong></p>
<p>Her medical team, led by neurologist Ben Verweij, decided to replace her cranium with a plastic one, produced by a specialist Australian firm. The operation took 23 hours but was a complete success, the hospital says.</p>
<p>‘Implants used to be made by hand in the operating theatre using a sort of cement which was far from ideal,’ Verweij said. ‘Using 3D printing we can make one to the exact size. This not only has great cosmetic advantages, but patients’ brain function often recovers better than using the old method.’</p>
<p>The procedure took place three months ago but the woman has now gone back to work and is symptom free, Verweij said.</p>
<p>The hospital says the technique can be used with patients who have other bone problems or to help recovery after people have suffered serious skull injuries.</p>
<p>Other hospitals have placed skull implants successfully in patients but this is the first time a complete cranium has been replaced, the surgeon said.</p>
<h2>The Dream Of 3D Printed Skin is Now A Reality - See more <a href="http://wonderfulengineering.com/the-dream-of-3d-printed-skin-is-now-a-reality/" target="_self">here</a></h2>
<p>3D printer in particular has helped medical science achieve new breakthroughs. Printing of organs isn’t too far away and soon enough surgeries will be carried out that will involve transplantation of 3D printed organs into human body. While the focus is on printing of organs, a team of researchers is working on printing skins.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a51193d448970c-pi" style="display: inline;"><img alt="3D-Printed-Skin-–-A-dream-or-a-Reality-610x406" class="asset  asset-image at-xid-6a0163057a21c8970d01a51193d448970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a51193d448970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="3D-Printed-Skin-–-A-dream-or-a-Reality-610x406" /></a></p>
<p>Under the leadership of Dr. Sophie Wuerger at University of Liverpool, U.K., this team is working towards making it possible to print skin which matches the skin of the individual patient. The idea is to come up with a way of 3D printing skin which is natural looking and blends in with the natural skin of the patient.&#0160;The research is quite challenging since each individual skin has particular characteristics and vary from person to person.</p>
<h2>A 4 stars cook at home - See more <a href="http://en.wikipedia.org/wiki/April_Fools&#39;_Day" target="_self">here</a></h2>
<p>So while finding all this new ideas and tech - I continued my research and found that a French company released a terrible 3d printer device last month. As the medical science is near (or already) using 3d printers to print bio extension for humans, it is natural that someone can already print food! I said terrible because as a French guy, food is a cultural thing. The idea of printing food without spending the time to prepare it just sounds strange to me.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73d9ee485970d-pi" style="float: right;"><img alt="Shoeburger" class="asset  asset-image at-xid-6a0163057a21c8970d01a73d9ee485970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a73d9ee485970d-320wi" style="margin: 0px 0px 5px 5px;" title="Shoeburger" /></a></p>
<p>The device itself isn&#39;t much expensive when you think about it - $3000 - it can print a &#39;<a href="http://en.wikipedia.org/wiki/Beef_bourguignon" target="_self">Beef Bourguignon</a>&#39; is 20 minutes while it would take me around an hour and an oven or a marmite to prepare this myself.</p>
<p>What is really cool is that this French company also developed an Android and iPhone application that helps you to control the device from anywhere, so you could from work order your meal to be printed for the time you come home. They also have a WEB service available for you to get ideas and send the best &#39;recette&#39; to your device.</p>
<p>Since it is a French company, I did ask them to send me a device for testing as I explained I could check if Autodesk software and AUtodesk 360 WEB services would work with it, and I have to admit that the morning &#39;croissant&#39; (i.e.&#0160;a crescent-shaped bread roll) was quite good.</p>
<p>But the very cool thing is that they got another cool application working like Shazam for music. Take a photo of a meal in a restaurant, and the application figures out the meal and match the recette using their WEB service. To get better accurate result you could turn on the &#39;smell&#39; sensor device hardware on your cell phone. Unfortunately, for this one you need the iPhone 5, or the latest Galaxy phone with the latest Android OS.</p>
<p>For lunch today, I ordered my 3d printer an &#39;American Bullfrog leg&#39; meal.</p>
<p>Again worse a reading <a href="http://en.wikipedia.org/wiki/April_Fools&#39;_Day" target="_self">here</a>.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Now Announcing 3ds Max and Maya 2015
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: now-announcing-3ds-max-and-maya-2015
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Mudbox
CATEGORY: Plug-in
CATEGORY: Point clouds

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/03/now-announcing-3ds-max-and-maya-2015.html 
DATE: 03/30/2014 07:10:01 AM
-----
BODY:
<p>I&#39;ve just arrived home from a 30-day trip to the Bay Area and Neuchatel. It was a really interesting trip – as usual – but I&#39;m happy to be home (even if I’m writing this on a Sunday morning, once again trying to catch up on many things you cannot really do while travelling).</p>
<p>The release happened really few days ago and&#0160;it seems timely for me to talk about the updates more from a developer’s perspective.&#0160;This year you will see lots of great new features, a ton of enhancements and user requested features and of course, more work to improve your core workflows.&#0160;</p>
<p>To learn about the details for please Visit...</p>
<p>3ds Max –&#0160;<a href="http://area.autodesk.com/3dsmax2015">http://area.autodesk.com/3dsmax2015</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce29a37970b-pi" style="display: inline;"><img alt="Skull" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fce29a37970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce29a37970b-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Skull" /></a></p>
<p>A really important feature, from my perspective, is the enhancements to 3ds Max’s&#0160;<strong>point cloud</strong>&#0160;capabilities:&#0160;This is going to add serious value to the use of point clouds in 3ds Max, whether they come from laser scanners or devices such as the Kinect.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce29a5d970b-pi" style="display: inline;"><img alt="Stereo" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fce29a5d970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fce29a5d970b-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Stereo" /></a></p>
<p>The support for Stereo Cameras is also part of this release and you can download the additional module from the Autodesk Exchange Store</p>
<p>Another cool thing is the introduction of Python Scripting in 3ds Max. There isn&#39;t any embedded editor and the scripts have to be ran via MAXScript, but it is indeed a very nice 1st integration release for Python in the 3ds Max workflows.</p>
<p>and more...</p>
<p>Maya –&#0160;<a href="http://area.autodesk.com/maya2015">http://area.autodesk.com/maya2015</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a511924bc4970c-pi" style="display: inline;"><img alt="Bifrost" class="asset  asset-image at-xid-6a0163057a21c8970d01a511924bc4970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a511924bc4970c-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Bifrost" /></a><br />The major new feature for Maya is for me the introduction of Bifrost - the simulation engine / procedural effect platform. There isn&#39;t yet specific API to control Bifrost, but the MEL commands already give you a lot to be able to create cool effects.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a511925bcc970c-pi" style="display: inline;"><img alt="Viewport20" class="asset  asset-image at-xid-6a0163057a21c8970d01a511925bcc970c img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a511925bcc970c-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Viewport20" /></a></p>
<p>The other major change in the release is that the Viewport 2.0 is now the default viewport for Maya. So in case you got custom nodes not working as well as it used to be, that may be due to that change. I would recommend that you update your vode as soon as possible since Maya may drop Viewport 1.0 support in a future release.</p>
<p>and more...</p>
<p>Maya LT -&#0160;<a href="http://area.autodesk.com/products/features/mayalt" target="_self">http://area.autodesk.com/products/features/mayalt</a></p>
<p>The Cloud integrations with Dropbox, Autodesk 360, and Autodesk 123D apps make it easier to share game assets with your team through the cloud. Maya LT 2015 now lets you browse and open files in certain cloud services directly through the Maya LT interface, making it easier to import 3D assets. Built-in access to Dropbox and Autodesk 360 let you open, modify, and save files back to the cloud. Using the Autodesk 123D cloud storage service, you can now also grab models created in 123D Catch or 123D Creature and use them as a starting point to make your game assets.</p>
<p>and more...</p>
<p>Mudbox -&#0160;<a href="http://www.autodesk.com/mudbox">http://www.autodesk.com/mudbox</a></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: SIP fix released
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: sip-v4155-now-contains-the-fix-and-is-available-on-riverbanks-site-no-need-to-patch-the-source-code-anymore-httpwwwr
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Qt
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/03/sip-v4155-now-contains-the-fix-and-is-available-on-riverbanks-site-no-need-to-patch-the-source-code-anymore-httpwwwr.html 
DATE: 03/17/2014 10:12:24 AM
-----
BODY:
<p>SIP v4.15.5 now contains the fix and is available on Riverbank&#39;s site. No need to patch the source code anymore.</p>
<p><a href="http://www.riverbankcomputing.com/software/sip/download">http://www.riverbankcomputing.com/software/sip/download</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fcd7e501970b-pi" style="display: inline;"><img alt="Bugfix" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fcd7e501970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fcd7e501970b-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Bugfix" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: the-getattr-command-on-a-compound-attribute-is-invalid-and-will-return-an-error-message-however-if-is-perfectly-valid-to-ac

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/02/the-getattr-command-on-a-compound-attribute-is-invalid-and-will-return-an-error-message-however-if-is-perfectly-valid-to-ac.html 
DATE: 02/24/2014 04:30:38 AM
-----
BODY:
<p>The &#39;getAttr&#39; command on a compound attribute is invalid and will return an error message. However, if is perfectly valid to access a compound because API and Maya internal code can still retrieve the compound from its plug.</p>
<p>In order to do this, get an MArrayDataBuilder to the compound multi attribute, use it to assign values to the child attributes for the various elements of the multi, then set the data builder into the MArrayDataHandle, which you can build from the MDataHandle in the way that Kevin showed you.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Fix for "sip.wrapinstance on Maya main window causes a hard crash"
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: fix-for-sipwrapinstance-on-maya-main-window-causes-a-hard-crash
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Qt
CATEGORY: UI
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/01/fix-for-sipwrapinstance-on-maya-main-window-causes-a-hard-crash.html 
DATE: 01/30/2014 06:42:28 AM
-----
BODY:
<p>Few month back, I wrote <a href="http://around-the-corner.typepad.com/adn/2013/04/building-sip-and-pyqt-for-maya-2014.html" target="_self">instructions to build PyQT for Maya 2014</a>, but couple of weeks later someone came with a problem in using SIP with Maya. The issue was that Maya is crashing when someone tries to get the Maya handle and bind it using sip. I.e.:</p>
<pre class="brush: python; toolbar: false;">import sip as _sip
import PyQt4.QtCore as _QtCore
import PyQt4.QtGui as _QtGui
import maya.OpenMayaUI as _OpenMayaUI

mainWindow = _sip.wrapinstance(long(_OpenMayaUI.MQtUtil.mainWindow()), _QtCore.QObject)</pre>
<p>Hopefully, a colleague of mine Yves Boudreault investigated the issue and found a fix. The error resides in the sip code that is extracting address into a &quot;unsigned long&quot; instead of &quot;unsigned long long&quot;. I.e.: siplib.c.in</p>
<pre class="brush: cpp; toolbar: false;">/*
 * Wrap an instance.
 */
static PyObject *wrapInstance(PyObject *self, PyObject *args)
{
    unsigned long addr;
    sipWrapperType *wt;

    if (PyArg_ParseTuple(args, &quot;kO!:wrapinstance&quot;, &amp;addr, &amp;sipWrapperType_Type, &amp;wt))
        return sip_api_convert_from_type((void *)addr, wt-&gt;type, NULL);

    return NULL;
}
</pre>
<p>and this is because Maya runs on x64 vs win32. The fix is easy, see below:</p>
<p>Fixed code for 64 bit ( unsigned long&quot; -&gt; &quot;unsigned long long&quot; and &quot;kO!:wrapinstance&quot; -&gt; &quot;KO!:wrapinstance&quot; )</p>
<pre class="brush: cpp; toolbar: false;">/*
 * Wrap an instance.
 */
static PyObject *wrapInstance(PyObject *self, PyObject *args)
{
    unsigned long long addr;
    sipWrapperType *wt;

    if (PyArg_ParseTuple(args, &quot;KO!:wrapinstance&quot;, &amp;addr, &amp;sipWrapperType_Type, &amp;wt))
        return sip_api_convert_from_type((void *)addr, wt-&gt;type, NULL);

    return NULL;
}
</pre>
<p>The fix has been posted on the Riverbank&#39;s pyQt mailing list.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Applying the Maya Dark Color Scheme to WPF
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: applying-the-maya-dark-color-scheme-to-wpf
CATEGORY: .Net
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plug-in
CATEGORY: Samples
CATEGORY: UI
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2014/01/applying-the-maya-dark-color-scheme-to-wpf.html 
DATE: 01/22/2014 05:23:37 AM
-----
BODY:
<p>Sorry it&#39;s been such a long time since we all wrote a blog...we will get better at updating!!! As you know I was travelling a lot in November/December for business reasons, but I also got asked to work on few important Cloud and mobile projects lately that took me away from the R&amp;D aspect of my job. Anyway, it is back to normal now… till next time ;)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b05202144970d-pi" style="display: inline;"><img alt="Mixing-paint-colors-palette" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b05202144970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b05202144970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Mixing-paint-colors-palette" /></a></p>
<p>Almost 2 years back, almost around this time of the year, I worked on a Maya .Net API prototype as a proof of concept. The main goal of this project was to show it was possible and not too hard to write a Maya .Net API or at least use .Net in Maya. At the beginning it was to become a sample and whitepaper, but it turn out to be different for the good (I did somewhat started to talk about it <a href="http://around-the-corner.typepad.com/adn/2012/05/enabling-net-in-a-maya-plug-in-.html" target="_self">here</a>). Unlike the Python 1.0 API (introduced in Maya 8.5), I wanted to make sure that the .Net API was a true .Net API and targeting .Net/C# developers. As you may know, Dean Edmond the Maya API architect is working on a Python 2.0 API implementation which would ultimately introduce a more ‘Pythonic’ API than its version 1.0. Unfortunately that version 2.0 is not yet completed and is incompatible with version 1.0. I’ll probably come back to that in another post.</p>
<p>Another goal of my Maya .Net API project was to get rid of ‘unnecessary’ coding such as the ‘command’, ‘node’ registration, etc… but instead uses .Net paradigm with metadata &amp; decorators. Therefore all the Maya .Net classes, methods, properties are decorated and available for introspection and reflection. Not only it helps to make the code a lot more clear to write and read, but it gives me access at runtime to information that I needed for another project I haven’t yet started.</p>
<p>Anyway, once the prototype was working with 20% of the API converted to show some example, the project was completed by a larger team and get introduced into Maya 2013.5 (December 2012). One thing I forgot, and this is my fault to be honest, is that you may consider writing compiled or scripted code in C# using the Maya .Net API, but also be interested in using WPF. While it would work nicely, the WPF windows will come as standard WPF windows using your Windows box color scheme definition and not the Maya Dark Color Scheme :(</p>
<p>Consider this MEL example and its WPF equivalent:</p>
<table>
<tbody>
<tr>
<td><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc930dd8970b-pi" style="display: inline;"><img alt="MelDialog" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fc930dd8970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc930dd8970b-320wi" style="width: 240px;" title="MelDialog" /></a></td>
<td valign="top"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc931009970b-pi" style="display: inline;"><img alt="WpfWindow" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fc931009970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc931009970b-320wi" style="width: 240px;" title="WpfWindow" /></a></td>
</tr>
</tbody>
</table>
<p>There is a WPF example in the Maya devkit which uses the Maya color scheme, but it is all hardcoded into the window XAML definition and requires you to code colors on each controls of your form :( Moreover, because of the way XAML/WPF is working to define controls, this sample is not matching perfectly the Maya Dark Color Scheme. There is still quite a lot differences, but if you not too worried about that it is ok, till you may got a lot of work on larger dialogs / projects. See below:</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b051fd30b970d-pi" style="display: inline;"><img alt="WpfDevkitSample" class="asset  asset-image at-xid-6a0163057a21c8970d019b051fd30b970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b051fd30b970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="WpfDevkitSample" /></a></p>
<p>So last week, I took a look to the issue and what could be done. Microsoft did an excellent job in designing WPF, so you can design dialog, controls by APi and/or xaml definition. I know there are sometimes performance issues using WPF, but it is pretty easy to use.</p>
<p>I also reworked the Maya devkit WPF sample to support Maya cameras, Lights, and multiple Mesh nodes with basics shaders in the preview control. The sample can run as a plug-in inside Maya, but as a standalone Maya application too.</p>
<p>WPF colors and layouts are controlled via Styles and Templates. You can create these styles and templates either by code or xaml. My first thought was to bind the Maya internal QT style class to save me time, but there was 2 big roadblocks: First, I immediately saw that it wasn’t that easy to do since controls are organized/layed-out differently. But second, I also saw there was some performance issue too. Yes it would have been dynamic in case the user or an application change a color at teh application/QT level, but I believe that was probably not really necessary. Instead, I used the xaml approach which offers some flexibility too. One is that you can merge many xaml file together and override styles, which means someone can still change the color if he wants too. Second is that you can use the color scheme outside Maya since you do not have any dependancy in Maya and/or QT. This why I’ll provide below a Maya standalone example to demonstrate this.</p>
<p>The first issue we need to resolve is that Maya is not really a .Net application, it only exposes a .Net API. That means it is not even WPF capable on its own. It would need some help to get initialized&#0160;properly, and such a way that it would break any other WPF plug-in already loaded. To do this our DarkScheme assembly will provide a default WPF App object/class to register the style dictionaries we need.</p>
<p>The important thing is to make sure we got the WPF App &amp; Dictionary initialized, and we do this via xaml and the MayaTheme.Initialize() method.</p>
<pre class="brush: xml; toolbar: false;">&lt;Application x:Class=&quot;Autodesk.Maya.App&quot;
             xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;&gt;
    &lt;Application.Resources&gt;
        &lt;ResourceDictionary&gt;
            &lt;ResourceDictionary.MergedDictionaries&gt;

                &lt;!-- Set default skin --&gt;
                &lt;ResourceDictionary Source=&quot;Themes\Skins\QadskDarkStyle.xaml&quot;/&gt;
                &lt;ResourceDictionary Source=&quot;Themes\MayaStyle.xaml&quot;/&gt;
                
            &lt;/ResourceDictionary.MergedDictionaries&gt;
        &lt;/ResourceDictionary&gt;
    &lt;/Application.Resources&gt;
&lt;/Application&gt;
</pre>
<p>Our main color scheme dictionary is the QadskDarkStyle.xaml file which will be reviewed later in this post.</p>
<pre class="brush: csharp; toolbar: false;">namespace Autodesk.Maya {

	public class MayaTheme {
		public static Application _app = null;

		public static bool Initialize (Application app) {
			 if ( _app == null &amp;&amp; app == null )
				_app = new App ();
			else if ( app != null )
				_app = app ;

			if ( Application.ResourceAssembly == null )
				Application.ResourceAssembly = typeof (MayaTheme).Assembly;

			return (true);
		}

		public static bool SetMayaIcon (Window window) {
			//string [] test =typeof (MayaTheme).Assembly.GetManifestResourceNames () ;
			// Need to be an embedded resources
			System.IO.Stream file =typeof (MayaTheme).Assembly.GetManifestResourceStream (&quot;MayaTheme.Resources.maya.ico&quot;) ;
			var icon =BitmapFrame.Create (file) ;
			window.Icon =icon ;
			return (true) ;
		}

	}

}
</pre>
<p>Note that this version of Initialize() does not merge the xaml color dictionaries in case you already have an WPF application object running, as I expect that application would have merge the dictionary already, liek this code below.&#0160;But it would be possible to merge them by code since it would not be possible for you to modify someone else application xaml definition. The example below show you how to use the color scheme in a another application such as a Maya standalone application and reference the MayaTheme assembly xaml resources.</p>
<pre class="brush: xml; toolbar: false;">&lt;Application x:Class=&quot;Autodesk.Maya.Samples.MayaWpfStandAlone.App&quot;
             xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
             xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
             StartupUri=&quot;DAGExplorer.xaml&quot;
             Startup=&quot;App_Startup&quot;
             Exit=&quot;App_Exit&quot;&gt;
    &lt;Application.Resources&gt;

		&lt;ResourceDictionary&gt;
			&lt;ResourceDictionary.MergedDictionaries&gt;
				&lt;!-- Set default skin --&gt;
				&lt;ResourceDictionary Source=&quot;/MayaTheme;component/Themes/Skins/QadskDarkStyle.xaml&quot; /&gt;
				&lt;ResourceDictionary Source=&quot;/MayaTheme;component/Themes/MayaStyle.xaml&quot; /&gt;
			&lt;/ResourceDictionary.MergedDictionaries&gt;
			&lt;!-- common:SettingConverter x:Key=&quot;SettingConv&quot;&gt;&lt;/common:SettingConverter --&gt;
		&lt;/ResourceDictionary&gt;
		
	&lt;/Application.Resources&gt;
&lt;/Application&gt;
</pre>
<p>But from a Maya plug-in, the only thing you need to do is the following: call the Initialize() method from your plug-in initialize or you plug-in command.</p>
<pre class="brush: csharp; toolbar: false;">// This line is not mandatory, but improves loading performances
[assembly: ExtensionPlugin (typeof (Autodesk.Maya.Samples.MayaWpfPlugin.MyPlugin))]

namespace Autodesk.Maya.Samples.MayaWpfPlugin {

	public class MyPlugin : IExtensionPlugin {

		public bool InitializePlugin () {
			bool b = MayaTheme.Initialize (null);
			return true;
		}

		public bool UninitializePlugin () {
			return true;
		}

		public string GetMayaDotNetSdkBuildVersion () {
			return &quot;&quot;;
		}

	}

}
</pre>
<p>From there, you are almost done. In theory, you&#39;re done, the whole WPF system has now switch to the new colors and control definition. The only thing left is that there is a bug in WPF for the &#39;Window&#39; class. While you can define a Window style/template, WPF does not apply it to your WPF windows. That means your WPF window will come with default background color and default icon while its controls will have the correct settings.</p>
<p>So we need to tell our Window class to use our Window style. It can be done again via API or XAML. I found the XAML way a lot easier, as we only need to add the follwoing &lt;Style&gt; attribute in our XAML window definition. I.e.:</p>
<pre class="brush: xml; toolbar: false;">&lt;Window x:Class=&quot;Autodesk.Maya.Samples.MayaWpfPlugin.DAGExplorer&quot;
        xmlns=&quot;http://schemas.microsoft.com/winfx/2006/xaml/presentation&quot;
        xmlns:x=&quot;http://schemas.microsoft.com/winfx/2006/xaml&quot;
        Title=&quot;DAGExplorer&quot;
        Height=&quot;600&quot;
        Width=&quot;800&quot;
        Style=&quot;{DynamicResource MayaStyle}&quot;
&gt;
</pre>
<p>This will take care of changing the color and icon for you. If the style is missing or not found, it will revert to the standard style current in your application.</p>
<p>And here is the results (MEL and WPF again)</p>
<table>
<tbody>
<tr>
<td><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc930dd8970b-pi" style="display: inline;"><img alt="MelDialog" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fc930dd8970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc930dd8970b-320wi" style="width: 240px;" title="MelDialog" /></a></td>
<td valign="top"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc93ddfb970b-pi" style="display: inline;"><img alt="WpfWindowWithStyle" class="asset  asset-image at-xid-6a0163057a21c8970d01a3fc93ddfb970b img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01a3fc93ddfb970b-320wi" style="width: 240px;" title="WpfWindowWithStyle" /></a></td>
</tr>
</tbody>
</table>
<p>If you find any problem/bug with this implementation, please let me know. I&#39;ll be happy to fix them.</p>
<p>There is also 2 additional WPF samples using the Dark color scheme available as well (actually this is the same sample but running as a plug-in for Maya and/or as a Maya standalone application).</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b05204686970d-pi" style="display: inline;"><img alt="DAGExplorer" class="asset  asset-image at-xid-6a0163057a21c8970d019b05204686970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b05204686970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="DAGExplorer" /></a></p>
<p>You can find the full source code and documentation <a href="https://github.com/ADN-DevTech/Maya-Net-Wpf-DarkScheme" target="_self">here<br /></a><a href="https://github.com/ADN-DevTech/Maya-Net-Wpf-DarkScheme" target="_self">https://github.com/ADN-DevTech/Maya-Net-Wpf-DarkScheme</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Merry Christmas, Joyeux Noël, Fröhe Weihnachten, Buon Natale, 圣诞快乐, メリークリスマス
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: merry-christmas-joyeux-noël-fröhe-weihnachten-buon-natale-圣诞快乐-メリークリスマス

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/12/merry-christmas-joyeux-no%C3%ABl-fr%C3%B6he-weihnachten-buon-natale-%E5%9C%A3%E8%AF%9E%E5%BF%AB%E4%B9%90-%E3%83%A1%E3%83%AA%E3%83%BC%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%9E%E3%82%B9.html 
DATE: 12/31/2013 02:02:50 AM
-----
BODY:
<p>and a Happy new year, Bonne année, Frohes Jahr,&#0160;buen año,&#0160;豐年</p>
<p>&#0160;</p>
<p>I am in the middle of an extended break with my family, so it&#39;s time for me to sign off and wish you all a very Merry Christmas (or Happy Holidays for those of you that are non-denominational in your festive activities) and the very best for 2014.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b03f5d6c1970d-pi" style="float: right;"><img alt="War3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b03f5d6c1970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b03f5d6c1970d-800wi" style="margin: 0px 0px 5px 5px;" title="War3" /></a></p>
<p>Yesterday, I spent my day playing with my brother &amp; sister&#39; kids at Warcraft III. Myself and a friend against 9 kids from 8 to 17. They won the first round :S because we did not wanted to kill one of them after 5 minutes playing - but we should had - Anyway we won the last 3 other games, but the last one was really hard.</p>
<p>I&#39;ll be back online on January 6th (unless I end up having trouble keeping away from the computer :-)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Project Khan & Simplygon
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: project-khan-simplygon

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/12/project-khan-simplygon.html 
DATE: 12/17/2013 01:41:43 AM
-----
BODY:
<p><a href="http://labs.autodesk.com/technologies/khan" target="_self">Project Khan</a> is an experimental 3D asset optimization service running on the Autodesk 360 cloud that uses the popular game pipeline technology, Simplygon, from Donya Labs.</p>
<p>Autodesk has partnered with <a href="http://www.simplygon.com/">Donya Labs AB</a> to prototype a cloud-based optimization service (Project Khan) designed to automate LOD (level-of-detail) creation for 3D assets. LOD creation is critical to ensuring run-time performance of 3D assets and is frequently used in game and animation workflows to improve performance in complex scenarios.&#0160;</p>
<p>The service uses Donya Labs’ Simplygon which provides high quality LOD creation capabilities to game developers working on high-end titles. The goal of Project Khan, by making the technology more readily available, is to test whether there is more widespread interest in the 3D animation industry for such asset optimization services.</p>
<p>To determine whether there is a demand for such services, we are providing free access to Project Khan until February 28<sup>th</sup> 2014. Initially, it can be accessed via an Autodesk Maya 2014 plug-in, however, Autodesk is also researching a more general deployment of the service for users of its 3D animation portfolio including Autodesk 3ds Max, Maya and Maya LT users.</p>
<p>Project Khan gives users the ability to selectively simplify 3D assets by generating proxy assets and by reducing:&#0160;</p>
<ul>
<li>Mesh complexity</li>
<li>Texture complexity</li>
<li>Rig (bone) complexity</li>
</ul>
<p>With Project Khan, any user can configure an optimization job, securely execute that job on the Autodesk 360 cloud, and then immediately download the optimized asset into their Maya scene. Multiple optimization jobs can even be run to generate different LOD versions of the same asset. The workflow also includes the ability to preview assets, tweak the generation recipe, then optimize and download the assets.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Hunter competition
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-hunter-competition
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/12/adn-hunter-competition.html 
DATE: 12/13/2013 07:41:35 AM
-----
BODY:
<h2>The results are in:</h2>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc460e970d-pi" style="display: inline;"><img alt="Hunger_Games_2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b01bc460e970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc460e970d-800wi" title="Hunger_Games_2" /></a></p>
<p>The highlight of Autodesk University for the ADN team every year is meeting you - developers using Autodesk technology - and talking about the amazing things you’re doing with Autodesk APIs. But sometimes it’s difficult to find you in the crowd. That is why, this year, we decided to turn the hunters into the hunted and award an iPad Mini prize to the three ADN partners who could track down the most members of the ADN team and post a photo with them on the AU Mobile App activity feed.</p>
<p>Competition was fierce, but three winners have emerged through the combination of their tracking ability and artistic merit for the photos they took.</p>
<p>So, without further ado … the winners are …</p>
<ul>
<li>Mark McLaughlin</li>
<li>Lawrence Dill</li>
<li>Rob Smith</li>
</ul>
<p>Congratulations to all three of you.</p>
<p>And here is <a href="https://www.facebook.com/media/set/?set=a.425576747570841.1073741826.103250773136775&amp;type=3" target="_self">a selection of photos taken as part of the competition</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Mark McLaughlin
EMAIL: 
IP: 198.187.190.1
URL: http://profile.typepad.com/markmclaughlin
DATE: 12/13/2013 08:22:21 AM
It was a great competition and I enjoyed meeting you all.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: How to check for error for MDataHandle::child()?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: how-to-check-for-error-for-mdatahandlechild
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/12/how-to-check-for-error-for-mdatahandlechild.html 
DATE: 12/06/2013 09:08:57 AM
-----
BODY:
<p>First if you&#39;re using the MPlug version, it cannot fail but if you&#39;re using the MObject version and if it fails, it would return an empty MDataHandle. I.e. equivalent to:</p>
<p>&#0160; MDataHandle tmp ;</p>
<p>and its&#0160;type() method should return you kInvalid.&#0160;Unfortunately, if the child attribute is also a compound attribute, type() would also return kInvalid.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b023fdda3970b-pi" style="display: inline;"><img alt="Scratch-head" class="asset  asset-image at-xid-6a0163057a21c8970d019b023fdda3970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b023fdda3970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Scratch-head" /></a></p>
<p>So what&#39;s up? in order to keep MDataHandle operations fast in Maya, minimal checking is performed, which for most methods means no checking at all. It is up to the caller to ensure that the method being called and the parameters passed to it are all appropriate for the handle. For the child() methods that means that attribute to which the handle currently points is compound and the attribute passed to the method really is one of its children. So you can ensure success by checking for those two conditions before making the call</p>
<p>More generally, if you want to access attribute data with error checking, use an MPlug.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: @AU
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: au
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/12/au.html 
DATE: 12/04/2013 09:09:42 AM
-----
BODY:
<p>Well, so far, so good! We had a great ADN session on Monday, before AU proper kicked off yesterday. Lots of opportunities to talk with old friends and new. It’s always fun to find out what people are doing with our technology and hopefully to help address some of the snags they’ve hit along the way. The only downside for me is that the attendance wasn&#39;t as high as last year ;) something I need to work on because I feel that is a great opertunity for developers to talk about API with the people implementing the API. I&#39;ll follow-up with people comments and quotes in a future post. We got a lot of things like:</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0221e5fd970b-pi" style="display: inline;"><img alt="Jalous" class="asset  asset-image at-xid-6a0163057a21c8970d019b0221e5fd970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0221e5fd970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Jalous" /></a></p>
<p>&#0160;</p>
<p>And &#39;you&#39; here means people behind the ADN program (Kevin, Naiqi, Zhong, Vijaya, Fenton, Gopi, Adam, Philippe, Jeremy, Stephen, Validimir, Sandeep, ...)</p>
<p>Anyway we had very good technical content delivered that we again recorded and we will make the public content available on AREA in the next few weeks. Checkout AREA at http://www.autodesk.com/adn2013</p>
<p>Yesterday started with Fred Chapman’s &quot;Dynamic Anatomy for 3D Artists&quot; session, which showed some great techniques for skin/muscle/bone animation system. I am sure the rest of AU will also be lots of good session while I am going to present Cloud and Mobile programming techniques and how to consume or create Cloud services in different envionments. End of the week, I&#39;ll be travelling back to Europe, before starting on Monday our EMEA DevDays tour. I can tell, I am looking forward to our annual Christmas break ;)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0222db76970d-pi" style="display: inline;"><img alt="Christmas-tree-pics" class="asset  asset-image at-xid-6a0163057a21c8970d019b0222db76970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0222db76970d-120wi" style="display: block; margin-left: auto; margin-right: auto;" title="Christmas-tree-pics" /></a></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Still not registered for the free developer conference?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: still-not-registered-for-the-free-developer-conference
CATEGORY: 3ds Max
CATEGORY: AU
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Mobile
CATEGORY: Personal
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/11/still-not-registered-for-the-free-developer-conference.html 
DATE: 11/27/2013 07:29:16 AM
-----
BODY:
<h1><strong>ADN Hunter</strong></h1>
<p>&#0160; <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc460e970d-pi" style="display: inline;"><img alt="Hunger_Games_2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b01bc460e970d image-full img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc460e970d-800wi" title="Hunger_Games_2" /></a></p>
<p>If you are attending the Free ADN developer conference at AU next week,&#0160;Photograph these rare animals at DevDay and AU for a chance to win an iPad Mini</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc6723970d-pi" style="display: inline;"><img alt="Ipad-mini" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b01bc6723970d img-responsive" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b01bc6723970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Ipad-mini" /></a></p>
<p>We’d love to meet you and talk to you about the amazing things you are doing with Autodesk technology so to encourage you to say “hi” and to make it fun, we’re running a small competition. The rules are simple:</p>
<ul>
<li>Download the AU Mobile App</li>
<li>Track down as many members of the ADN team on “The Hunted” list as you can</li>
<li>In the AU Mobile App click status update&#0160;</li>
<li>Take a photo of yourself with the ADN team member and post it using the hashtag #ImWithADN</li>
</ul>
<p>The prizes (3 iPad Minis) will be based on who posts the most pictures over the duration of AU. Extra points will be given (at the judges’ discretion) for imaginative photo composition – and if there is a tie.</p>
<p>Set up instructions:</p>
<ol>
<li>Download the AU Mobile App from the App Store or Google Play<br /><span style="color: #8b8b8b;">Note: No Blackberry® app is available, but you can use the HTML5 (web browser) version on these devices or your laptop.<br />URL is :&#0160;<a href="http://bit.ly/1bWjdJl" target="_self">http://bit.ly/1bWjdJl</a></span></li>
<li>Go to profile &gt; click the little wheel icon &gt; select Settings &gt; select Connect to Twitter</li>
</ol>
<p>&#0160;</p>
<h2>The Hunted</h2>
<p>Jim Quanci,&#0160;Stephen Preston,&#0160;Cyrille Fauvel,&#0160;Silvio Guido,&#0160;Peter Schlipf,&#0160;Natalia Polikarpova,&#0160;Hazel Wood,&#0160;Denis Cadu,&#0160;Mikako Harada,&#0160;Kevin Vandecar,&#0160;Gopinath Taget,&#0160;Augusto Goncalves,&#0160;Brian Ekins,&#0160;Xianhua Tang,&#0160;Adam Nagy,&#0160;Philippe Leefsma,&#0160;Jeremy Tammik,&#0160;Arvind Thangli</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Plotagon - movie maker
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: plotagon-movie-maker

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/11/plotagon-movie-maker.html 
DATE: 11/12/2013 12:23:38 AM
-----
BODY:
http://m.fastcodesign.com/3020128/type-your-own-animated-movie-with-this-crazy-software?partner=rss
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 3D printing tech previews on Autodesk Labs: Projects Miller and Shapeshifter
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: 3d-printing-tech-previews-on-autodesk-labs-projects-miller-and-shapeshifter
CATEGORY: Augmented reality
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Mobile

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/11/3d-printing-tech-previews-on-autodesk-labs-projects-miller-and-shapeshifter.html 
DATE: 11/07/2013 04:58:52 AM
-----
BODY:
<p>Again my apologizes for the long silence, but I was involved in finishing a project to be shown @ AU and because our ADN Devdays tour starts this week, I had to work extra hours and week-end to polish the application. Anyway, back to normal, I should write post regularly again :)</p>
<p>For this first post, I&#39;d like to highligh <a href="http://through-the-interface.typepad.com/through_the_interface/2013/11/3d-printing-tech-previews-on-autodesk-labs-projects-miller-and-shapeshifter.html" target="_self">this post from Kean Walmsley</a>. I was in Tel Aviv to work on AutoCAD 360 back in August and chat with that team about what they were doing. It is a very nice technology and interesting topic, but for games and animation, 3d priting is probably not the first topic of interest? but eveytime, I visit a studio I see figurines, 3d models, etc.. everywhere</p>
<p>I also read this <a href="http://www.kickstarter.com/projects/claytonmitchell/monstermatic-the-first-3d-printing-game" target="_self">post</a> recently which shows a young team working on a mobile app to desgin / print monsters.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b00c5084b970b-pi" style="display: inline;"><img alt="Monsters" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b00c5084b970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b00c5084b970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Monsters" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Devdays @ AU Las Vegas 2013
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-devdays-au-las-vegas-2013
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/10/adn-devdays-au-las-vegas-2013.html 
DATE: 10/17/2013 09:20:44 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0018fc10970d-pi" style="display: inline;"><img alt="Au_attend" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b0018fc10970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b0018fc10970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Au_attend" /></a><br />Back from AU Brazil where I made
an introduction to Oauth and RESTful API, and it is already time to think about AU
Las Vegas and the <a href="http://au.autodesk.com/las-vegas/pre-conference/adn-conference-devlab">ADN
Devdays</a>.</p>
<p>Once again, we will present the <a href="http://area.autodesk.com/cave2013/adn"><strong>ADN Developer Conference</strong></a> the day before AU where 3ds Max and Maya engineering
will introduce the new APIs in the upcoming releases. We will also have&#0160; eight industry lectures on making the best
use of various APIs such as PySide, Python, the new 3ds Max CPython API, and
more…</p>
<p>This year the conference is open
to ADN members only. If you are not an <a href="http://www.autodesk.com/joinadn">ADN member</a>
(or using ADN Open only) but are interested in attending, <a href="mailto:cyrille@autodesk.com" target="_self">talk to me</a>, and we
will find a way to get you in. You will need your ADN number to register.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b001889a6970c-pi" style="display: inline;"><img alt="Unsure_smiley" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019b001889a6970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019b001889a6970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Unsure_smiley" /></a><br />If you are unsure if you should attend,
take a look at <a href="http://area.autodesk.com/au2012/adn">last year’s
lecture recordings</a>. They aren’t all posted, but they will give you a very
good idea of what it is all about. This year in particular would be a great
place to come as we have several M&amp;E engineering people coming to tackle
your questions/issues on almost all Autodesk products. Neil Hazzard (3ds Max)
and Jean-Philippe Grenier (Maya) from the rendering team will also be around to
talk in 1on1 meetings on the viewport / rendering challenges you may have. If
you want to talk to them, please let me know and I’ll arrange something for
you. I also invite you to contact me if you have any specific needs to talk to
anyone @autodesk and I’ll try to arrange it.</p>
<p><strong>Come and see us @AU/Devdays – <a href="http://au.autodesk.com/las-vegas/pre-conference/adn-conference-devlab">Register
here</a></strong></p>
<p>Here is the agenda (Monday Dec 2<sup>nd</sup>)</p>
<p>GENERAL SESSIONS (morning)</p>
<ul>
<li>ADN (DevDays) Conference General
Session: M&amp;E</li>
<li>M&amp;E ADN DevDays Conference Keynote</li>
<li>Maya (next release) feature set and road map</li>
<li>3ds Max (next release) feature set and roadmap</li>
<li>Improve productivity, performance and how to design &quot;anywhere,
anytime&quot; with NVIDIA&#0160;</li>
</ul>
<p>BREAKOUT SESSIONS (TRACK #1) (afternoon)</p>
<ol>
<li>Qt
Python UI Scripting in Maya 2014 with PySide: Tip and Tricks</li>
<li>The next release of Maya APIs&#0160;</li>
<li>Integrating an offline renderer in Maya&#0160;</li>
<li>Apps, Plug-ins, Extensions and Scripts for Autodesk® 3ds Max®</li>
</ol>
<p>BREAKOUT SESSIONS (TRACK #2) (afternoon)</p>
<ul>
<li>The next release of 3ds Max APIs</li>
<li>Introduction to Python in 3ds Max</li>
<li>Code Injection: Filling in the Python Gaps&#0160;</li>
<li>3ds Max Nitrous Viewport API evolution and enhancements</li>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: FBMenu stops working after an exception was raised
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: fbmenu-stops-working-after-an-exception-was-raised
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/10/fbmenu-stops-working-after-an-exception-was-raised.html 
DATE: 10/11/2013 04:07:31 AM
-----
BODY:
<p>When code associated with a custom menu item raises an exception, the menu item can no longer be executed for that session of MotionBuilder.</p>
<p>Steps:</p>
<ol>
<li>Load and execute the script below</li>
<li>From the New Menu, select &#39;SubMenu 1&#39;</li>
<li>Observe in the Python window that an exception is displayed in the output</li>
<li>From the New Menu, select &#39;SubMenu 1&#39;</li>
<li>Observe that nothing is output.</li>
</ol>
<pre class="brush: python; toolbar: false;">from pyfbsdk import *

def eventMenu(control, event):    
    raise Exception(&#39;kill this menu item&#39;)

menuMgr = FBMenuManager()
menuMgr.InsertFirst(None, &quot;New Menu&quot;)
newMenu = menuMgr.GetMenu(&quot;New Menu&quot;)
newMenu.InsertLast(&quot;SubMenu 1&quot;, 11)
newMenu.InsertLast(&quot;SubMenu 2&quot;, 12)

# Registers event handler.
newMenu.OnMenuActivate.Add(eventMenu)</pre>
<p>The problem here is caused by a change in the way MotionBuilder 2014 handles exceptions. If there is an exception in a Python FBEvent Callback, Mobu will automatically unregister this callback to prevent seeing repetitive tracebacks.</p>
<p>There is a message on the MoBu console when Mobu auto removes those &#39;bad&#39; callbacks, something like:
Exception (boost::python::error_already_set) caught, remove Callback!
If you cannot see the console screen on Windows, add the “-console” flag to Mobu’s shortcut.</p>
<p> 
You can restore your unregistered callback by registering it again as a workaround, but I would recommend to put a try/except block around your code to avoid the exception to propagate to MoBu and get your callback removed. This is anyway a good practice to handle errors that way in your code.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: PySide/PyQt and Maya Undo not good friends
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: pyqt-and-maya-undo-not-good-friends
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/10/pyqt-and-maya-undo-not-good-friends.html 
DATE: 10/09/2013 06:18:51 AM
-----
BODY:
<p>Calling Maya commands from PySide/PyQt using MEL and/or their Python wrappers will display strange messages on the Maya console during undo/redo operation, and oftenly creates concerns if this a bug, or something gets wrong.</p>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019affc5c2a2970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d019affc5c2a2970d" style="display: block; margin-left: auto; margin-right: auto;" title="Not-good-enough" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019affc5c2a2970d-320wi" alt="Not-good-enough" /></a><br />Not at all - that is a side effect of how the command is called by the different interpreters. Consider this Python PySide/PyQt UI script:</p>
<pre class="brush: python; toolbar: false;">import sys
from PySide import QtCore, QtGui
from maya import cmds, mel

class FormExample(QtGui.QWidget):
    def __init__(self):
        super(FormExample, self).__init__()
        btn = QtGui.QPushButton('My Button', self)
        btn.resize(btn.sizeHint())
        btn.move(50, 50)
        btn.clicked.connect(self.onMyButtonClicked)      
        self.setWindowTitle('My Form Example')    
        self.show()
        
    def onMyButtonClicked(self):
        mel.eval("polySphere -ch on -o on -r 1.3;")
        # prints // Undo: polySphere -ch on -o on -r 1.3 //
         
win = FormExample()
</pre>
<p>In the PySide/PyQt version, Qt is executing the onMyButtonClicked() method which then calls mel.eval() with a command string. So MEL is being asked to execute a command string, which is what gets printed out on Undo.</p>
<p>Now consider this Python/Maya UI script:</p>
<pre class="brush: python; toolbar: false;">import sys
from maya import cmds, mel

class FormExample:
    def __init__(self):
        if cmds.window("FormExample", q=True, exists=True):
            cmds.deleteUI("FormExample")
        cmds.window("FormExample")
        cmds.columnLayout()
        cmds.button(label="My Button", command=self.onMyButtonClicked)
        cmds.window("FormExample", visible=True, e=True)

    def onMyButtonClicked(self, *args):
        mel.eval("polySphere -ch on -o on -r 1.3;")
        # prints // Undo: &lt;bound method FormExample.onMyButtonClicked of &lt;__main__.FormExample instance at 0x00000000310AAC08&gt;&gt; //

win = FormExample()
</pre>
<p>In this MEL version, the onMyButtonClicked() function is a callback which is being executed directly by MEL. So in this case MEL is being asked to execute the onMyButtonClicked() function, which has been given to it as a function object, not a string. Here understand undo records the call to 'command=self.onMyButtonClicked' vs. the MEL eval() command. Does not mean the command in eval is not record, but it is embedded in the first one.</p>
<p>Now replace:</p>
<pre class="brush: python; toolbar: false;">mel.eval("polySphere -ch on -o on -r 1.3;")</pre>
<p>by</p>
<pre class="brush: python; toolbar: false;">cmds.polySphere (ch=True, o=True, r=1.3)
# now prints // Undo:&nbsp; // in the PySide/PyQt example</pre>
<p>While you now understand why the Maya UI will still print the lengthy '//
Undo: &lt;bound method FormExample.onMyButtonClicked of &lt;__main__.FormExample instance at 0x00000000310AAC08&gt;&gt; //' message, you would see the PySide/PyQt sample printing nothing. I.e. "". This is because in Python the "string representation" of that function object is "".</p>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019affc5d882970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d019affc5d882970d" style="display: block; margin-left: auto; margin-right: auto;" title="Bad-friend-friendship" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019affc5d882970d-120wi" alt="Bad-friend-friendship" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk DevDays 2013
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: autodesk-devdays-2013
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/09/autodesk-devdays-2013.html 
DATE: 09/23/2013 01:23:31 AM
-----
BODY:
<p>DevDays is a great way to get a sense of what technology is coming from Autodesk, something that’s valuable even for Autodesk employees: the ADN team does a great job of synthesising what’s coming from our various product groups – a challenging task for lots of reasons (the timing of the event relative to development schedules, the volume of information to summarise and present within a limited amount of time, the difficulty of creating demo apps on pre-Alpha software, etc...).</p>
<p>Here’s some information on this year’s tour –</p>
<hr />
<p><strong><em><span style="font-size: small;">rEvolution</span></em></strong></p>
<p><em><strong>Where Desktop meets the Cloud
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff8daedf970b-pi" style="float: right;"><img alt="REvolution" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019aff8daedf970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff8daedf970b-800wi" style="margin: 0px 0px 5px 5px;" title="REvolution" /></a></strong></em></p>
<p><em>Got great ideas for cloud and mobile apps? Want to learn where Autodesk is taking the convergence of desktop computing and cloud technology?<br /></em></p>
<p><em>If you’re an innovator developing on Autodesk platform technology and have not yet attended an Autodesk Developer Network Conference join us for a deep dive as we take an in-depth look at Autodesk’s newest technologies and the next generation of products coming in 2014. The Autodesk Developer Network is holding its annual, worldwide Developer Day Conference and DevLab in cities around the world from November through December 2013.</em></p>
<p><em>Called Autodesk DevDays 2013, the theme for this year’s event is rEvolution – Where Desktop meets the Cloud. Come and talk to us about futur web services from Autodesk. We will of course also cover what’s new in the next releases of our desktop products (3ds Max®, Maya® and so on)!</em></p>
<p><em>Note that material at Developer Days is forward-looking and highly confidential so ADN membership is required. Maybe you are using ADN Open and forums and would like to attend DevDays? Visit&#0160;</em><a href="http://www.autodesk.com/joinadn"><em>www.autodesk.com/joinadn</em></a><em>&#0160;or send an email to your&#0160;</em><a href="http://usa.autodesk.com/adsk/servlet/index?siteID=123112&amp;id=473880"><em>local ADN representative</em></a><em>&#0160;and let’s talk. We like to hear from — and help — interested parties, innovators and companies just getting started.</em></p>
<hr />
<p>Below are the dates for this year’s tour. For a more detailed agenda and to register your interest in attending a specific event -</p>
<p>-	Nov. 7, 2013 - Beijing, China, with DevLab on Nov. 8</p>
<p>
-	Nov. 12, 2013 - Shanghai, China, with DevLab on Nov. 12 morning</p>
<p>
-	Nov. 14, 2013 - Tokyo, Japan</p>
<p>- Dec. 2, 2013 - Las Vegas, USA, with DevLab on Dec. 3<br />&#0160; Registration <a href="http://au.autodesk.com/las-vegas/pre-conference/adn-conference-devlab%20" target="_self">here</a><br />&#0160; Agenda for DevDays at AU posted <a href="http://area.autodesk.com/cave2013#details" target="_self">here</a>&#0160;and select ADN</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Got it right in MEL
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: got-it-right-in-mel
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/09/got-it-right-in-mel.html 
DATE: 09/19/2013 12:40:25 AM
-----
BODY:
<p>evalDeferred() never worked with unquoted commands. Recently, someone reported that Maya 2014 works differently than previous releases when using evalDeferred(). the issue came-up with the following code:</p>
<pre class="brush: cpp; toolbar: false;">evalDeferred(print("test"))</pre>
<p>When MEL sees a function call being passed as a parameter to another function, it calls that function first and then passes the result down to the calling function. That is a general rule, and applies everywhere in MEL like in other languages. So MEL is not different here.</p>
<p> In the example of evalDeferred(), MEL called 'print("test")' and got back an empty result, which it then passed on to evalDeferred(). evalDeferred() scheduled that empty result for execution on the next idle event at which time the command would silently fail since an empty result is not a valid command string.
For example, if you do the following in Maya 2013:</p>
<pre class="brush: cpp; toolbar: false;">print("before\n");
evalDeferred(print("during\n"));
print("after\n");
</pre>
<p>you get the following result:</p>
<pre class="brush: cpp; toolbar: false;">before
during
after
</pre>
<p>Note that 'during' is printed before 'after', whereas if it had been properly deferred it would have been printed last. If instead you quote the parameter to evalDeferred:</p>
<pre class="brush: cpp; toolbar: false;">print("before\n");
evalDeferred("print(\"during\\n\")");
print("after\n");
</pre>
<p>you get the correct result:</p>
<pre class="brush: cpp; toolbar: false;">before
after
during
</pre>
<p>
The difference in Maya 2014 is that MEL correctly recognizes that the result returned by the 'print' command is not a string and flags the error right away, rather than later on when the idle queue runs.
Where does this leave you?
If the expression being passed to evalDeferred() is a valid string expression (e.g. a call to a function which returns a string) then it will still work as before.
If the expresion being passed to evalDeferred() is NOT a valid string expression and NEEDED to be deferred for proper operation, then your script was not working properly before but now you'll get an error alerting you to that.
The only situation in which this will break a working script is if the expression being passed to evalDeferred() is a valid string expression which didn't really need to be deferred. But in that case, no need of evalDeferred(), the issue remaining would be that the code is not executed at the same time anymore.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya Node Editor and Attributes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-node-editor-and-attributes
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/09/maya-node-editor-and-attributes.html 
DATE: 09/11/2013 11:37:19 AM
-----
BODY:
<p>The Node Editor takes a number of features that were previously divided between Maya&#39;s Hypershade, the Hypergraph and the Connection Editor, and merges them into a single user-friendly workspace. The Node Editor gives us a much simpler way of making advanced connections between any nodes or attributes in your Maya scene.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff53297e970b-pi" style="display: inline;"><img alt="Node-Editor" class="asset  asset-image at-xid-6a0163057a21c8970d019aff53297e970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff53297e970b-500wi" style="display: block; margin-left: auto; margin-right: auto;" title="Node-Editor" /></a><br />With the Node Editor you can graph, pin and clear nodes from the Node Editor... create nodes directly within the Node Editor, create / connect node attributes...</p>
<p>But while the interface is more modern, more powerfull and saves time. When it comes to custom node, you may get in trouble to have your custom node attributes to show-up in the default mode. Here are some tips for getting attributes to show-up in the Maya Node Editor.</p>
<p>  There is an algorithm that determines if an attribute is “Interesting”. It is essentially a set of “If Then” statements testing aspects of an attribute.  To make an attribute appear interesting you should:</p>
<ul>
<li>Make sure that the attribute is NOT hidden.</li>
<li>Make the attribute is writeable (If output OR input)</li>
<li>If the attribute is still not showing up:
<ul>
<li>Make the attribute keyable</li>
<li>Make the attribute dynamic</li>
</ul>
</li>
</ul>
<p>There are currently  4 modes in the Node Editor determining how attributes get displayed:</p>
<ul>
<li>No Attributes</li>
<li>Connected Attributes</li>
<li>“Interesting Attributes”</li>
<li>All Attributes (using the RMB)</li>
</ul>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: chayan
EMAIL: chayan@outlook.com
IP: 71.83.171.27
URL: 
DATE: 09/20/2013 10:41:59 PM
Hello Cyrille,

Thanks for the great note.
As you briefly talked about Custom Node attributes here that made me curious about 
if there is any way of listing all the plugs/attributes attached to a dependency graph node using API command.

eg: using MFnDependencyNode() we can access a particular plug if we know its name.

mFnDN = OpenMaya.MFnDependencyNode(mObj_node)
visibility_plug = mFnDN.findPlug("visibility")



In this case a single plug is accessed and we know its name.
Is there any command which can list all the plugs of a dependency graph node (if we don't know that names of all the plugs) ?


Thanks,
Chayan

-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.219.55
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 09/25/2013 10:31:33 AM
Hi Chayan,

yes, you can list plugs using: MFnDependencyNode::attributeCount() / MFnDependencyNode::attribute()
 
but in case you want the connected plugs, you will need: MFnDependencyNode::getConnections()

Plugs on a node found in this way can come and go based on a number of internal optimization reasons so the list you are asking for is not necessarily going to be consistent each time you ask.

Hope that helps,
-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Distributing Maya Apps - Porthaton is around the corner
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: distributing-maya-apps-porthaton-is-around-the-corner
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: Events
CATEGORY: Maya
CATEGORY: Tools

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/09/distributing-maya-apps-porthaton-is-around-the-corner.html 
DATE: 09/05/2013 05:38:24 AM
-----
BODY:
<p>Following this <a href="http://around-the-corner.typepad.com/adn/2013/07/announcing-the-autodesk-exchange-apps-portathon-and-an-opportunity-to-receive-us100-per-app-publishe.html" target="_self">announcement</a>. Here is an post from a colleague of mine <strong>Vjaya Prakash</strong> who is based in India (Bangalore) and mainly support the Maya API.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff348a7c970d-pi" style="display: inline;"><img alt="Porthaton" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019aff348a7c970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019aff348a7c970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Porthaton" /></a></p>
<p>People who wants to distribute their Apps which is going to
be used by Maya users, they have to follow some semantics. You can watch the
video of how to install sample apps and how to use those apps inside Maya <a href="http://www.youtube.com/watch?v=I4vtlZcWNfc">here</a>.
&#0160;If you are still thinking about where to start please see <a href="http://around-the-corner.typepad.com/adn/2012/07/distributing-files-on-maya-maya-modules.html">here</a>.
For writing the application specific manifest files and rules to be followed
please see <a href="http://around-the-corner.typepad.com/adn/2013/04/distributing-plug-insfiles-on-maya-and-3ds-max.html">here</a></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Maya API training material freely available
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-maya-api-training-material-freely-available
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Training
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/08/adn-maya-api-training-material-freely-available.html 
DATE: 08/08/2013 06:18:19 AM
-----
BODY:
<p>Back from vacation, ..., and a tons of emails to process :(</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901eafd814970b-pi" style="display: inline;"><img alt="Email-help" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01901eafd814970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901eafd814970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Email-help" /></a>But I can see a light that is coming to an end. If you tried to contact me and not yet received an answer, please ping me again.</p>
<p>&#0160;</p>
<p>Anyway I am pleased to announce that after many years we decided to publish our API training material as we will continue to maintain it in future. The video recordings are already published here:</p>
<ul>
<li><a href="http://www.autodesk.com/developmaya" target="_self">for Maya</a>,</li>
<li><a href="http://www.autodesk.com/develop3dsmax" target="_self">for 3ds Max</a>,</li>
<li><a href="http://www.autodesk.com/developmotionbuilder" target="_self">for MotionBuilder</a>,</li>
<li><a href="http://www.autodesk.com/developfbx" target="_self">for FBX</a>.</li>
</ul>
<p> But we now also publish the material itself on github, <a href="https://github.com/ADN-DevTech/Maya-Training-Material" target="_self">here</a>. For everyone pleasure, we did upload the legacy training material as well, so in theory you can get the material for Maya 8.5 to Maya 2013+ from GitHub <a href="https://github.com/ADN-DevTech/Maya-Training-Material/releases" target="_self">History</a> panel.</p>
<p>If you find any issue, or have comment, please let me know,</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Announcing the Autodesk Exchange Apps Portathon – and an opportunity to receive US$100 per app published!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: announcing-the-autodesk-exchange-apps-portathon-and-an-opportunity-to-receive-us100-per-app-publishe
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Autodesk Exchange
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/07/announcing-the-autodesk-exchange-apps-portathon-and-an-opportunity-to-receive-us100-per-app-publishe.html 
DATE: 07/31/2013 04:25:01 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901e89b9dd970b-pi" style="display: inline;"><img alt="Portathon" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01901e89b9dd970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901e89b9dd970b-800wi" title="Portathon" /></a></p>
<p>We are excited to announce the inaugural Autodesk<sup>®</sup>&#0160;Exchange Apps Portathon – a 48 hour virtual web based coding “festival”. The Exchange Apps Portathon is a community event where you’ll have the opportunity to work closely with Autodesk engineers in real time and meet hundreds of other Autodesk software partners from around the world. It is all designed to help you get your apps ready and published on Autodesk Exchange Apps.</p>
<p>The Portathon will run for 48 hours, starting from 12:00 a.m. U.S. Pacific Time (PT) on Friday, September 13, 2013 and finishing by 11:59 p.m. PT on September 14, 2013. You can participate from anywhere you have internet access. If you’ve been thinking about publishing apps in the Exchange Apps store but haven’t found the time then this event will give you the help you need in real time to get them “out the door” and start driving the app sales and downloads that bring you or your company great new customers.</p>
<p>There’s no cost to join the Portathon, but there is a reward. For all new apps submitted to the Autodesk Exchange Apps store by midnight on September 14, 2013 and accepted for publication in the store by October 31, 2013, you will receive US$ 100 per app (for up to 5 apps – US$ 500 total).</p>
<p>Now is the time to decide what apps you want to submit to meet the midnight September 14 deadline.&#0160; Register now to participate in the Exchange Apps Portathon!&#0160;</p>
<p>Registration and entry is governed by the Autodesk Exchange Apps Portathon Official Rules. Please read Portathon Official Rules&#0160;<a href="http://adndevblog.typepad.com/autocad/exchange-apps-portathon-official-rules.html" target="_self">here</a>.</p>
<p><a href="https://s.zoomerang.com/s/portathon" target="_self">Register Now</a></p>
<p>After you have registered, you will receive by email full details on how to participate in the Portathon.</p>
<p>Learn more about how to publish your apps on the Autodesk Exchange Apps store at &#0160;<a href="http://www.autodesk.com/developapps">http://www.autodesk.com/developapps</a></p>
<p>Please email&#0160;<a href="mailto:appsinfo@autodesk.com">appsinfo@autodesk.com</a>&#0160;if you have any questions on the Portathon. We would love to talk to you about how we can help you get the most apps possible submitted by midnight on September 14.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Taking a break
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: taking-a-break
CATEGORY: Cyrille Fauvel
CATEGORY: Personal
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/07/taking-a-break.html 
DATE: 07/04/2013 11:00:00 PM
-----
BODY:
<p>I’m up in the USA enjoying 3 weeks of hiking in the <a href="https://en.wikipedia.org/wiki/List_of_national_parks_of_the_United_States" target="_self">National Parks</a>, and unfortunaly will not have any computer with me to play with programing. I&#39;ll start at <a href="http://www.nps.gov/yell/index.htm" target="_self">Yellowstone</a>&#0160;for a week, and will then go south through Zion, Bryce, Arches, Grand Canyon, and few others... The last time, I went to Zion and Bryce it was at my honeymoon trip 20 years ago. I should be back in August and post here again.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192abd4a864970d-pi" style="display: inline;"><img alt="Yellowstone" class="asset  asset-image at-xid-6a0163057a21c8970d0192abd4a864970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192abd4a864970d-500wi" style="display: block; margin-left: auto; margin-right: auto;" title="Yellowstone" /></a><br />This one is real - :)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Morteza
EMAIL: moto@cgdna.com
IP: 174.7.19.128
URL: 
DATE: 07/05/2013 09:34:24 PM
Have fun! :)
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 3ds Max and Maya SP1 debug available now.
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: 3ds-max-and-maya-sp1-debug-available-now
CATEGORY: 3ds Max
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/07/3ds-max-and-maya-sp1-debug-available-now.html 
DATE: 07/02/2013 08:09:40 AM
-----
BODY:
<h2><span style="font-size: 1.17em;">What are symbols?</span></h2>
<p>Symbols or Program Database Files (PDBs) are a by-product of the build process and contain debugging information for specific binary modules (e.g. exe or&#0160;dll files).</p>
<p>By default, a C++ PDB file contains the following information:</p>
<ul>
<li>Public symbols (typically all functions, static and global variables)</li>
<li>A list of object files that are responsible for sections of code in the executable</li>
<li>Frame pointer optimization information (FPO)</li>
<li>Name and type information for local variables and data structures</li>
<li>Source file and line number information</li>
</ul>
<p>A lot of the information contained in a PDB is useful only when the source code of the corresponding module is available. Stripping out this information keeps them small while allowing the debugger to reconstruct the callstack and still preserving our intellectual property. By default, stripped PDB files contain the following information:</p>
<ul>
<li>Public symbols (typically only non-static functions and global variables)</li>
<li>A list of object files that are responsible for sections of code in the executable</li>
<li>Frame pointer optimization information (FPO)</li>
</ul>
<h2>3ds Max</h2>
<p>3ds Max debug symbols are available via a symbol server&#0160;<a href="http://symbols.autodesk.com/symbols">http://symbols.autodesk.com/symbols</a>.</p>
<p>We just posted symbols&#0160;for 3ds Max 2014 and 3ds Max 2014 SP1</p>
<h2>Maya</h2>
<p>Maya debug symbols for Maya 2014 and Maya 2014 SP1 are also available, but on the ADN portal which is restricted to ADN members unfortunately. Because Maya is running in 3 platforms, we could not post the symbols on the server symbols.</p>
<h2>MotionBuilder</h2>
<p>MotionBuilder debug symbols for MotionBuiler 2013 and MotionBuiler 2014 are also available on the ADN portal for both Windows and Linux platform.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: New Maya C++/C#/Python plug-in Wizards
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: new-maya-ccpython-plug-in-wizards
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Debugging
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/new-maya-ccpython-plug-in-wizards.html 
DATE: 06/27/2013 12:20:00 AM
-----
BODY:
<p>This topic was suggested by one of our ADN members who had problems to setup his Mac OSX environment for building a Maya plug-in on the Mac. I quickly replied by a post <a href="http://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html" target="_self">here</a> to mention what compiler / environment to use on the Mac since the Maya 2014 documentation is wrong (it actually still reference the Maya 2013 compiler / environment whereas it changed for Maya 2014).</p>
<p>More important, you should better not upgrade to Mountain Lion if you want to use Xcode since Xcode 4.3.3 will not launch on Mountain Lion, and that Xcode 4.4.0 will not compile with the Mac OSX 10.6 SDK (Snow Leopard). I heard that&#0160;Lion must now be now purchased by phone with a 3 day
electronic delivery turnaround making downgrade a bit harder unless you got an Apple Developer licence active. In case you are trapped in Mountain Lion, here is atrick to use Mountain Lion and Xcode 4.4.x to produce Mac OSX 10.6 SDK compatible plug-in.</p>
<ul>
<li>copy the &#39;MacOSX10.6.sdk&#39; folder from either your /Developer/SDKs folder if you still have it, or from Xcode 4.3.3 - Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs, into your&#0160;Xcode 4.4.x - Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs</li>
<li>load your project</li>
<li>set the &#39;Based SDK&#39; to &#39;OS X 10.7&#39; or the latest you have</li>
<li>set &#39;OS X Deployment Target&#39; to &#39;OS X 10.6&#39;</li>
</ul>
<p>Following that dicussion, I realized the Maya Visual Studio plug-in Wizard was a very old one and a bit buggy to not say the least. And nothing for Xcode :(</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019103c705d6970c-pi" style="display: inline;">
</a><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019103c70632970c-pi" style="display: inline;"><img alt="Old-wizard" class="asset  asset-image at-xid-6a0163057a21c8970d019103c70632970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019103c70632970c-200wi" style="width: 170px; display: block; margin-left: auto; margin-right: auto;" title="Old-wizard" /></a><br /><br />Looking deeper into the Maya devkit examples, I also realized the compiler/linker settings for each platform were not necessary the best either...</p>
<p>So I decided to write new Wizards and spent my Friday evening on Xcode, and Visual Studio writing wizards wizards. It is a very early draft, and they still need few edits, but you can find the Visual Studio and Xcode plug-in Wizards projects on Github</p>
<p><a href="https://github.com/ADN-DevTech/Maya-Cpp-Wizards">https://github.com/ADN-DevTech/Maya-Cpp-Wizards</a></p>
<p>So far we got the base for C++ code working on Visual Studio, Xcode, and Linux/Mac (with makefiles too). There is also a Wix project to create an MSI installer for Windows, and soon be a Mac PKG installer too.</p>
<p>I also posted the Maya C# Wizards for Visual Studio</p>
<p><a href="https://github.com/ADN-DevTech/Maya-Net-Wizards">https://github.com/ADN-DevTech/Maya-Net-Wizards</a></p>
<p>and soon going to post the Eclipse/WinG Python plug-in Wizards on Github as well.</p>
<p>The intallers/binaries for these Wizards are ( or will be ) available on the <a href="http://www.autodesk.com/developmaya" target="_self">Maya Developer Center</a> page.</p>
<p>Comments, suggestions are always welcome,<br />(and in case you want to participate, let me know your Github account and I&#39;ll add you to the contributor list)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: James Grimes
EMAIL: james.grimes@indefatiga.com
IP: 74.121.112.50
URL: 
DATE: 06/27/2013 08:04:44 AM
Cyrille,

Many thanks for your efforts in producing this article and the templates!

I had been struggling with setting up an Xcode environment for Maya 2014 development and I could find virtually no other information on the topic.  This solved a big problem for me.  Thanks :)
-----
COMMENT:
AUTHOR: DeeX
EMAIL: deex@deex.info
IP: 88.166.113.103
URL: http://www.deex.info
DATE: 07/06/2013 02:36:02 PM
Thank you for this article Cyrille.
It helps me a lot.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 3D artist uses Google Glass (and Autodesk 123d catch) to recreate sculpture
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: 3d-artist-uses-google-glass-and-autodesk-123d-catch-to-recreate-sculpture
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Point clouds
CATEGORY: Reality capture

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/3d-artist-uses-google-glass-and-autodesk-123d-catch-to-recreate-sculpture.html 
DATE: 06/25/2013 12:30:00 AM
-----
BODY:
<p>A friend forwarded me that article which is not only interesting reading because this is about new Autodesk technologies ;) - but it brings a real value in the design and the entertainment fields. I see this as a nice extension of the Kinect mesh / pointcloud capabilities but with more flexibility since you only need a camera.</p>
<p><img alt="" src="http://www.geek.com/wp-content/uploads/2013/06/marcus.png" style="display: block; margin-left: auto; margin-right: auto; width: 270px;" /></p>
<p><a href="http://www.geek.com/android/3d-artist-uses-google-glass-to-recreate-sculpture-1559962/">http://www.geek.com/android/3d-artist-uses-google-glass-to-recreate-sculpture-1559962/</a></p>
<p>Here&#0160;Todd Blatt was using 123dCatch, but you could get better results using the Autodesk&#0160;ReCap (currently in final Beta 3 phase).&#0160;The results you can get from ReCap Photo are generally much better that 123D Catch, which is completely logical, given the fact it’s a tool that’s targeted at the professional market which works with higher resolution imagery.</p>
<p>Here is a more detailed <a href="http://through-the-interface.typepad.com/through_the_interface/2013/06/comparing-123d-catch-with-recap-photo.html" target="_self">comparaison post</a> on both 123d catch and ReCap from my colleague and friend Kean.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MotionBuilder Custom Property .Selected not exposed to Python
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: motionbuilder-custom-property-selected-not-exposed-to-python
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/motionbuilder-custom-property-selected-not-exposed-to-python.html 
DATE: 06/18/2013 10:47:00 PM
-----
BODY:
<p>When using Python in MotionBuilder, you can select object in the scene using the Python .Selected property. When setting that property to True, you would put the object into the selection list. However, Custom Properties do not have their .Selected Python property exposed which makes in theory impossible to select them programmatically.</p>
<p>Hopefully there is a workaround :)</p>
<p>The workaround is to use the .SetFocus() method. When using that method with the parameter set to True, you will put the property object onto the selection.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya compiler versions (update)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: maya-compiler-versions-update
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/maya-compiler-versions-update.html 
DATE: 06/17/2013 01:30:00 AM
-----
BODY:
<p>This is an update on a previous post for older versions which can be found <a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html" target="_self">here</a>.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d0167673f53f1970b" style="display: block; margin-left: auto; margin-right: auto;" title="Source-code-programming" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-800wi" alt="Source-code-programming" border="0" /></a></p>
<p>OS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compiler</p>
<p><span style="text-decoration: underline;"><strong>Maya 2014</strong></span></p>
<p>Windows<br />64bit&nbsp;&nbsp;&nbsp;&nbsp;Win7x64&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Visual Studio 2010 SP1, Intel&nbsp;Composer XE 2011 Update 11</p>
<p>Linux<br />64bit&nbsp;&nbsp;&nbsp;&nbsp;RHEL 6.0, FC14 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gcc 4.1.2, Intel&nbsp;Composer XE 2011 Update 11</p>
<p>Mac<br />64bit&nbsp;&nbsp;&nbsp;&nbsp;Lion 10.7.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Xcode 4.3.3 with SDK 10.6 (SnowLeopard), gcc 4.2.1, Intel&nbsp;Composer XE 2011 Update 11</p>
<ul>
<li>Embedded Python 2.7.3&nbsp;- Internal to Maya&nbsp;</li>
<li>Embedded PySide 1.1.2</li>
<li>Qt 4.8.2</li>
<li>Boost 1.47</li>
<li><a href="http://threadingbuildingblocks.org/download" target="_self">TBB 4.1</a> (version 4.1.2012.0718)</li>
<li><a href="http://www.microsoft.com/download/en/details.aspx?id=6812" target="_self">DirectX SDK June 2010</a></li>
<li>MR 3.11</li>
<li>Linux base build is RHEL 6.0/CentOS 6.2</li>
</ul>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Devdays @ AU Las Vegas 2013 - Call for Proposals
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-devdays-au-las-vegas-2013-call-for-proposals
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/adn-devdays-au-las-vegas-2013-call-for-proposals.html 
DATE: 06/13/2013 09:34:35 AM
-----
BODY:
<p>I am looking for presenters for the <strong style="font-size: small;">Autodesk Developer Network (ADN) M&amp;E Conference.&#0160;</strong><span style="font-size: small;">If you or someone you know would like the opportunity to present, please submit a proposal including the duration of your presentation. The ADN M&amp;E Conference is a great way to share your current API’s, tips &amp; tricks or knowledge about solving production challenges. Please keep in mind, the focus and audience of the ADN conference is developers.</span></p>
<div>
<div>
<ul>
<li>Classes need to have a WOW factor that speaks to M&amp;E developers as well as architects and engineers</li>
<li>Feature Autodesk’s Digital Entertainment Creation tools: 3ds Max, Maya, Motionbuilder, Mudbox, Max Design, Entertainment Creation Suite, etc...</li>
<li>Speakers can be both Autodesk employees as well as customers, including API developers, script writers, etc...</li>
<li>Please contact&#0160;<a href="mailto:cyrille.fauvel@autodesk.com">Cyrille Fauvel</a>&#0160;if you are interested in presenting or if you require more information.</li>
</ul>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-pi"><img alt="Au_twitter_icon_128x128_normal" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Au_twitter_icon_128x128_normal" /></a></p>
<p><strong>OVERVIEW</strong></p>
<p><strong>1. ADN M&amp;E Conference @ AU</strong></p>
<p><strong>On December 2<sup>nd</sup></strong>, the Media &amp; Entertainment (M&amp;E) team at<strong>&#0160;</strong>Autodesk University will host a free Autodesk Developer Network (ADN) Conference. The ADN Conference is a great place to hear about upcoming M&amp;E product releases and changes in our API. Attend and share your experience as a developer and network with fellow ADN partners and the ADN team.</p>
<p>Watch out some of the talks from past years on Area</p>
<ul>
<li><a href="http://area.autodesk.com/au2011">http://area.autodesk.com/au2011</a></li>
<li><a href="http://area.autodesk.com/au2012/adn">http://area.autodesk.com/au2012/adn</a></li>
<li>or more on the&#0160;<a href="http://adnsparks.autodesk.com/adn/servlet/item?siteID=6681818&amp;id=18969388">ADN portal</a></li>
</ul>
<p>Feel free to forward this invite to people you know, good presenters, and sure you’d like to hear talking about technology. But remember we are looking for programming oriented lectures.</p>
<p><strong>Submit your proposal by July 15th</strong></p>
<p><strong>2.&#0160;</strong><strong>DevLab @ AU</strong></p>
<p>On<strong>&#0160;December 3<sup>rd</sup></strong>, the DevLab will be free for all ADN members. Network with fellow ADN partners, ask the DevTech team for programming advice, bring your laptop and work on your code, and gain insight from industry experts. For information about becoming an ADN member, visit&#0160;<a href="http://www.autodesk.com/applyadn">Autodesk Developer Network</a>.</p>
<p><strong>Important</strong>&#0160;<strong>note</strong>: Non-ADN members&#0160;<strong>must sign</strong>&#0160;an NDA to attend the ADN M&amp;E Conference before arriving on site. Forms will be available upon Registration.</p>
<p><strong>3.&#0160;</strong><strong>About Autodesk University – M&amp;E</strong></p>
<p>Autodesk University User Conference and Exhibition, Las Vegas - Autodesk University&#39;s flagship event is an annual conference and exhibition in Las Vegas where design and entertainment professionals from around the world attend classes, keynotes, product demonstrations, exhibits and networking events. Attendees can share ideas, work together to solve problems, and form professional relationships. Attendees also get year-round access to over 500 online classes on the Autodesk University website.</p>
<ul>
<li><strong>This year Media &amp; Entertainment will offer&#0160;</strong>many classes in the AU curriculum, an M&amp;E Innovation Forum, an Autodesk Developer Network Conference and a DevLab.</li>
<li>You&#39;ll learn from top-rated working professionals in the fields of AEC, Automotive and Transportation, CAD Management, Civil Infrastructure, Design Technology Management, Education, Government, Manufacturing,&#0160;<strong>Media &amp; Entertainment</strong>, Geospatial, Utilities &amp; Telecommunication, Design Visualization, and many more.</li>
<li>Instructors are selected based on their technical expertise and communication skills, as well as their proposals to address issues relevant to their industries today. Industry experts, magazine and Internet columnists, authors, and technical gurus are all assembled in one place for you to connect with and learn from. Here, you will glean information about niche markets you won&#39;t find anywhere else.</li>
</ul>
<p>See&#0160;<a href="http://au.autodesk.com/?nd=au_las_vegas">http://au.autodesk.com/?nd=au_las_vegas</a></p>
<p>Have a great day!</p>
</div>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Localization strategies for 3ds Max Plug-ins
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: localization-strategies-for-3ds-max-plug-ins
CATEGORY: 3ds Max
CATEGORY: Cyrille Fauvel
CATEGORY: Plug-in
CATEGORY: Plugin of the Month
CATEGORY: Tools

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/localization-strategies-for-3ds-max-plug-ins.html 
DATE: 06/06/2013 01:33:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aac09ca5970d-pi" style="display: inline;"><img alt="Characters" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0192aac09ca5970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aac09ca5970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Characters" /></a><br />With the coming localized Autodesk Exchange stores, it is becoming more important for plug-in developers to localize their software. The exchange store provides a unique opportunity to be in front of customers all over the world. The best experience for a customer is to provide your software in their localized language.</p>
<p>
This post is meant to provide the resources to help you understand the localization of 3ds Max plug-ins and supporting customization files.</p>
<h2>
C++ based plug-ins</h2>
<p>
3ds Max is now using the Unicode string handling procedures, so you must first make sure your plug-ins are fully Unicode compliant. For localization of the strings, there are two different approaches to localization for 3ds Max.</p>
<h3> 
Unicode</h3>
<p>
Your C++ based plugins are now required to be compiled as supporting Unicode strings. There is a complete section detailing all the aspects of this here:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-F5D23A57-F714-496A-BEE6-A98BD6917822.htm" target="_self">
http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-F5D23A57-F714-496A-BEE6-A98BD6917822.htm</a></p>
<h3>
Language Pack methodology</h3>
<p>
Note that 3ds Max is now making use of language packs since the 2013 release as the primary localization technique. This technology requires “binary translation”. There are a variety of tools out there that can help with the binary approach to translation (including the Visual Studio resource editor, but it is not very convenient for a large number of strings).  One such commercial tool is by SDL called <a href="http://www.sdl.com/products/sdl-passolo/index.html" target="_self">Passolo</a>. The binary translation approach is recommended because it will work with the 3ds Max installation and startup process that supports all languages where 3ds Max is localized and requires only a single call in your source code that performs the language selection.</p>
<p>
Language packs are based on Microsoft technology called Windows Multilingual User Interface (MUI). You can find details on this technology here:</p>
<p><a href="http://msdn.microsoft.com/en-us/goglobal/bb978454" target="_self">
http://msdn.microsoft.com/en-us/goglobal/bb978454</a></p>
<p>
The most comprehensive explanation for recent 3ds Max versions (2013 and later) using the MUI language pack technology is provided in the 3ds Max SDK help information. See this topic for details:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-82AEACF1-2E25-49A4-AD31-52CC5F00B755.htm" target="_self">
http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-82AEACF1-2E25-49A4-AD31-52CC5F00B755.htm</a></p>
<p>
Here you will find information about what is included with a 3ds Max based language pack. This includes both the plug-in localization resource binaries, and also supporting files including MAXScript, UI files, and configuration file information.</p>
<p>
An example of this approach is provided here:<br /><a href="http://adnsparks.autodesk.com/adn/servlet/item?siteID=6681818&amp;id=18271211&amp;linkID=6927897" target="_self">
http://adnsparks.autodesk.com/adn/servlet/item?siteID=6681818&amp;id=18271211&amp;linkID=6927897</a></p>
<p>or here <a href="http://around-the-corner.typepad.com/files/3ds_max_language_packs_supplement_edition.pdf" target="_self">3ds_max_language_packs_supplement_edition.pdf (857.6K)</a></p>
<h3>
Resource File methodology</h3>
<p>
You may instead choose to use the older technique of localizing your resource files and building separate resource only DLLs for each language. Here you will maintain separate resource files, each with the translated strings. During the startup, you will determine the language and the load the appropriate language DLL. Complete details are described in the 3ds Max SDK help here:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-97DBB58E-FA66-4522-A43F-B9BADB132009.htm" target="_self">
http://docs.autodesk.com/3DSMAX/16/ENU/3ds-Max-SDK-Programmer-Guide/files/GUID-97DBB58E-FA66-4522-A43F-B9BADB132009.htm</a></p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019102f84360970c-pi" style="display: inline;"><img alt="Worldflags" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019102f84360970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019102f84360970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Worldflags" /></a></p>
<h2>MAXScript</h2>
<p>
MacroScripts that are used for CUI scripting aspects in 3ds Max has localization support. There is a topic here that describes the technique for category globalization:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-23013A3F-2F69-4970-9ECE-D53A8A3DED28.htm" target="_self">
http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-23013A3F-2F69-4970-9ECE-D53A8A3DED28.htm</a></p>
<p>
Then you can also provide localized strings via compile script resources. This process is described here:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-4E926577-61C6-463E-9238-D422EFC03718.htm" target="_self">
http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-4E926577-61C6-463E-9238-D422EFC03718.htm</a></p>
<p>
Note that there are also changes to support Unicode and file I/O. MAXScript Unicode details are provided here:</p>
<p><a href="http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-30A3165F-752E-423B-A662-46B4A78E89F5.htm" target="_self">http://docs.autodesk.com/3DSMAX/16/ENU/MAXScript-Help/files/GUID-30A3165F-752E-423B-A662-46B4A78E89F5.htm</a></p>
<h2>
.NET API</h2>
<p>
For a managed plug-in using the .NET API, you would simply use the satellite assembly approach that is provided by the .NET Framework. This requires you to build a separate satellite assembly for each language and supports a hierarchical approach to language and region specific language. For details, see here:</p>
<p><a href="http://msdn.microsoft.com/en-us/library/f45fce5x(v=vs.100).aspx" target="_self">
http://msdn.microsoft.com/en-us/library/f45fce5x(v=vs.100).aspx</a></p>
<p>
To be consistent with other 3ds Max assemblies, it is recommended to add this attribute to your <em>.\Properties\AssemblyInfo.cs</em> file:</p>
<pre class="brush: csharp; toolbar: false;">[assembly: NeutralResourcesLanguage(&quot;en-US&quot;,
           UltimateResourceFallbackLocation.MainAssembly)]</pre>
<p>
Additionally, you can use this .NET framework technique to perform locale-specific conversions:</p>
<pre class="brush: csharp; toolbar: false;">public static readonly CultureInfo DefaultCulture =new CultureInfo (&quot;en-US&quot;) ;</pre>
<p>
To support the other standard languages, you would typically include the default en-US resources in the DLL assembly that has the code, and the additional target locales have a satellite assembly called <em>&lt;name_of_DLL&gt;.resources.dll</em></p>
<p> 
If you need to support localization in a mixed-mode plugin, where you have some native C++ mixed with managed C++, then there is one technique that can help identify the locale at runtime. For example:</p>
<pre class="brush: csharp; toolbar: false;"> 
CultureInfo^ CommCtrConnector::CurrentUICulture () {
    CultureInfo^ ret =gcnew CultureInfo (MaxSDK::Util::GetLocaleValue ()) ;
    return ret ;
}</pre>
<h2>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d019102f841a3970c-pi" style="display: inline;"><img alt="Translate-and-localize" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d019102f841a3970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d019102f841a3970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Translate-and-localize" /></a></h2>
<h2>Other Supporting Files</h2>
<p>
If you also have other supporting files, such has fixed menus or toolbars defined in the CUI system, then you need to localize those separately. Those should be placed in the appropriate language folder during your installation, and 3ds Max will use them when it is running in those languages.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Accessing "unsubdivide" functionality from a Mudbox plug-in
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: accessing-unsubdivide-functionality-from-a-mudbox-plug-in
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Mudbox
CATEGORY: Plug-in
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/06/accessing-unsubdivide-functionality-from-a-mudbox-plug-in.html 
DATE: 06/04/2013 05:00:00 AM
-----
BODY:
<p>Unfortunately, the rebuild subdivision levels functionality isn’t directly exposed through the SDK, but it is possible to call any menu item in Mudbox (including this one) via Qt.</p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa6d5250970d-pi" style="display: inline;"><img alt="Mudbox-subdivide" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0192aa6d5250970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa6d5250970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Mudbox-subdivide" /></a>
<p>So what you will want to do is:</p>
<pre class="brush: cpp; toolbar: false;">// build a list of geometries you wish to operate on.
QList&lt;mudbox::Geometry *&gt; aGeos ;  // you populate this list.

// get a pointer to the QMenu widget for the mesh menu
QMenu *pQ =Kernel ()-&gt;Interface ()-&gt;DropDownMenu (Interface::ddmMesh) ;

// Enumerate over the menu items. 
// Find the item that corresponds to the rebuild subd levels item
QList&lt;QAction *&gt; pL =pQ-&gt;actions () ;
QAction *pA =NULL ;
for ( int i =0 ; i &lt; pL.size () ; ++i ) {
    Kernel ()-&gt;Log (QString (&quot;action %1&quot;).arg (pL [i]-&gt;text ())) ;
    if ( pL [i]-&gt;text () == &quot;Rebuild Subdivision Levels&quot; ) {
        pA =pL [i] ;
        break ;
    }
}
if ( pA ) {
    for ( int i =0 ; i &lt; aGeos.size () ; ++i ) {
        // Set the active geometry. This indicates which geometry the rebuild command should operate on.
        Kernel ()-&gt;Scene ()-&gt;SetActiveGeometry (aGeos [i]) ;

        // trigger the rebuild subd menu item.
        pA-&gt;activate (QAction::Trigger) ;
    }
}
</pre>
<p>However, the DropDownMenu() method is only available in Mudbox 2014, so for previous releases you need to go with pure QT programming. Something like this:</p>
<pre class="brush: cpp; toolbar: false;">// build a list of geometries you wish to operate on.
QList&lt;mudbox::Geometry *&gt; aGeos ;  // you populate this list.

QWidget *pWidget =Kernel ()-&gt;Interface ()-&gt;MainWindow () ;
QMainWindow *pMW =dynamic_cast&lt;QMainWindow *&gt;(pWidget) ;
QAction *pA =NULL ;
if ( pMW ) {
    // get the menu bar of the main widget, and find the mesh menu.
    // QMenuBar doesn’t seem to expose an API for querying the menus
    // so inspect all of its children.
    QMenuBar *pMB =pMW-&gt;menuBar () ;
    QList&lt;QMenu *&gt; pMenus =pMB-&gt;findChildren&lt;QMenu *&gt;() ;//QString (&quot;Mesh&quot;)) ;
    for ( int i =0 ; i &lt; pMenus.size () &amp;&amp; pA == NULL ; ++i ) {
        if ( pMenus [i]-&gt;title ().contains (QString (&quot;Mesh&quot;), Qt::CaseInsensitive) ) {
            QMenu *pMenu1 =pMenus [i] ;
            QList&lt;QAction *&gt; pActions =pMenu1-&gt;findChildren&lt;QAction *&gt;() ;//QString (&quot;Rebuild Subdivision Levels&quot;)) ;
            for ( int j =0 ; j &lt; pActions.size () ; ++j ) {
                Kernel ()-&gt;Log (QString (&quot;action %1, %2&quot;).arg (i).arg (pActions [j]-&gt;text ())) ;
                if ( pActions [j]-&gt;text ().contains (QString (&quot;Rebuild Subdivision Levels&quot;), Qt::CaseInsensitive) ) {
                    pA =pActions [j] ;
                    break ;
                }
            }
        }
    }
}
if ( pA ) {
    for ( int i =0 ; i &lt; aGeos.size () ; ++i ) {
        // Set the active geometry. This indicates which geometry the rebuild command should operate on.
        Kernel ()-&gt;Scene ()-&gt;SetActiveGeometry (aGeos [i]) ;

        // trigger the rebuild subd menu item.
        pA-&gt;activate (QAction::Trigger) ;
    }
}
</pre>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Exchange App Webinar
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: exchange-app-webinar
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Autodesk Exchange
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/exchange-app-webinar.html 
DATE: 05/31/2013 07:00:00 AM
-----
BODY:
<p>Register and mark your calendars now for this upcoming webcast on making the most of the Autodesk Exchange Apps store ...</p>
<p><strong>&quot;How developers can ride and profit from the adoption wave of Autodesk Exchange Apps&quot;</strong></p>
<p>The Autodesk Exchange Apps stores (currently there are 15 stores) are a huge opportunity for developers to gain direct access to the growing number of Autodesk customers using Exchange Apps.&#0160; In just one year there’s been over one million visits and over 250,000 downloads. With comments like “<em>one of my most useful tools”, “love this app, saved me hours of work”&#0160;</em>there’s no doubt that Exchange Apps has become a resource that Autodesk<em>&#0160;</em>customers rely on to find useful apps of all types.&#0160;&#0160;<em>&#0160;&#0160;</em></p>
<p>If you develop apps and want to reach more customers quickly, easily and inexpensively but haven’t yet put your toe in the water with Exchange Apps, the Autodesk Developer Network (ADN) team is ready to help you.&#0160; You’re invited to attend a webinar on June 13<sup>th</sup>&#0160;hosted by Jim Quanci and Stephen Preston to learn how you can catch the wave and accelerating growth of Exchange Apps.</p>
<p>You’ll learn the tricks of the trade when publishing on Exchange Apps, get ideas on how to be successful and learn about the ability to publish localized apps. Here’s what you need to know:</p>
<p><strong>Webinar details:</strong></p>
<p>Date: Thursday, June 13<sup>th</sup>, 2013<br />Time: 8 a.m. PDT (4 p.m. BST; 5 p.m. CET; 11 a.m. EDT)<br />Duration: Approximately one hour</p>
<p>Open to anyone interested in publishing apps on Autodesk Exchange Apps (i.e. ADN membership is not required :-).</p>
<p><strong>Registration:</strong>&#0160;Reserve your place by June 11 by sending an email to&#0160;<a href="mailto:adn-training-worldwide@autodesk.com?subject=Exchange_Apps_webinar" target="_self">adn-training-worldwide@autodesk.com</a>&#0160;with&#0160;<em>Exchange Apps webinar</em>&#0160;as the subject. Please make sure you include your full name, company name and email address.</p>
<p><em>And visit</em><em>&#0160;<a href="http://www.autodesk.com/developapps">www.autodesk.com/developapps</a></em><em>&#0160;now if you want a head start in learning how to publish apps.</em></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MotionBuilder SDI supported formats
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: motionbuilder-sdi-supported-formats
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/motionbuilder-sdi-supported-formats.html 
DATE: 05/30/2013 12:38:00 AM
-----
BODY:
<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse; table-layout: fixed; width: 675pt;" width="300">
<colgroup><col style="width: 195pt;" width="260" />
 <col span="10" style="width: 48pt;" width="64" />
 </colgroup>
<tbody>
<tr height="21" style="height: 15.75pt;">
<th height="21" style="height: 15.75pt; width: 195pt; text-align: center;" width="260">Format</th>
<th style="border-left: none; width: 48pt; text-align: center;" width="64">2013</th>
<th style="border-left: none; width: 48pt; text-align: center;" width="64">2014</th>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;480i 59.94 Hz (SMPTE259)
  NTSC *&#0160;</td>
<td style="border-left: none;">&#0160;</td>
<td style="border-left: none; background-color: orange;">Glitchy</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;576i
  50.00 Hz (SMPTE259) PAL *&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  23.98 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  24.00 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  25.00 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  29.97 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  30.00 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  50.00 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  59.94 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;720p
  60.00 Hz (SMPTE296)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1035i
  59.94 Hz (SMPTE260)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1035i
  60.00 Hz (SMPTE260)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  47.96 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  48.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  50.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
<td style="border-top: none; border-left: none; background-color: orange;">Glitchy</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  50.00 Hz (SMPTE295)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  59.94 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080i
  60.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080PsF
  23.98 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080PsF
  24.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080PsF
  25.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080PsF
  29.97 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080PsF
  30.00 Hz (SMPTE274)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080p
  23.976 Hz (SMPTE274) *&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080p
  24.00 Hz (SMPTE274) **&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080p
  25.00 Hz (SMPTE274) *&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080p
  29.97 Hz (SMPTE274) *&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;1080p
  30.00 Hz (SMPTE274) *&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080p
  23.976 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080p
  24.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080p
  25.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080p
  29.97 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080p
  30.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
<td style="border-top: none; border-left: none;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080i
  47.96 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080i
  48.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080i
  50.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="20" style="height: 15.0pt;">
<td height="20" style="height: 15.0pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080i
  59.94 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
<tr height="21" style="height: 15.75pt;">
<td height="21" style="height: 15.75pt; border-top: none;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;2048x1080i
  60.00 Hz (SMPTE372)&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
<td style="border-top: none; border-left: none; background-color: red;">&#0160;</td>
</tr>
</tbody>
</table>
<p>the * denotes formats that are important for QA testing and ** very important (these are the common formats most users would require).</p>
<p><span style="background-color: orange;">Glitchy</span> means there is output but user has to check and uncheck online a few times to get an output. Or there is output but the screen is distorted.</p>
<p><span style="background-color: red;">Red</span> means this format does not produce any output at all.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Christian Eckes
EMAIL: eckes@eckesvision.com
IP: 78.34.73.184
URL: http://www.eckesvision.com
DATE: 06/05/2013 02:55:53 AM
Thanks for the info, Cyrille. What is the meaning of * and ** ?

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Support Soft Selection with custom MPxComponentShape
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: support-soft-selection-with-custom-mpxcomponentshape
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Maya
CATEGORY: Modeling
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/support-soft-selection-with-custom-mpxcomponentshape.html 
DATE: 05/27/2013 01:33:52 AM
-----
BODY:
<p>MPxComponentShape allows the implementation of new user-defined shapes using components, however all the UI related feature (such as selection/drawing) has to be implemented with another class MPxSurfaceShapeUI.</p>
<p>In the MPxSurfaceShapeUI class, there are select() and draw() functions you need to implement for your custom shape. The Maya devkit has 2 examples that demonstrates how to use this class: apiMeshShape and apiSimpleShape. The apiSimpleShape shows to how to use MPxSurfaceShapeUI to work with MPxComponentShape to achieve component selection and drawing. But this is not Soft Selection!</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa5ee55d970d-pi" style="display: inline;"><img alt="SoftSelectIntro" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0192aa5ee55d970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa5ee55d970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="SoftSelectIntro" /></a><br />Unfortunately there is no direct way to achieve Soft Selection in Maya by API. However there is a workaround in an in-direct way. The pseudo-code below shows how to get soft selection in component mode.</p>
<pre class="brush: python; toolbar: false;">softSelection = OpenMaya.MRichSelection()
OpenMaya.MGlobal.getRichSelection(softSelection)
selection = OpenMaya.MSelectionList()
softSelection.getSelection(selection)
pathDag = OpenMaya.MDagPath()
oComp = OpenMaya.MObject()
selection.getDagPath(0, pathDag, oComp)
fnComp = OpenMaya.MFnSingleIndexedComponent(oComp)
for i in range(fnComp.elementCount()):
  print fnComp.element(i), fnComp.weight(i).influence()
</pre>
<h3>
  
C++ API:</h3>
<p>The below enum and function are there in</p>
<ol>
<li>To set the component mode<br /> 
   In &quot;enum MSelectionMode&quot; set &quot;kSelectComponentMode&quot;</li>
<li>To get soft selection<br />static MStatus getRichSelection (MRichSelection &amp;dest, bool defaultToActiveSelection=true)</li>
</ol>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Kinect for Xbox One
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: kinect-for-xbox-one
CATEGORY: Cyrille Fauvel
CATEGORY: Games
CATEGORY: Kinect
CATEGORY: Reality capture

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/kinect-for-xbox-one.html 
DATE: 05/22/2013 05:06:14 AM
-----
BODY:
<p>Another great week for tech. I’m in hog heaven reading all the&#0160;<a href="http://www.bbc.co.uk/news/technology-22613948" target="_blank">information</a>&#0160;<a href="http://www.wired.com/gadgetlab/2013/05/xbox-one/" target="_blank">being</a>&#0160;<a href="http://www.engadget.com/2013/05/21/hands-on-with-xbox-one" target="_blank">shared</a>&#0160;regarding the newly-revealed&#0160;<a href="http://www.xbox.com/en-US/xboxone/meet-xbox-one" target="_blank">Xbox One</a>.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa313309970d-pi" style="display: inline;"><img alt="Kinect-one-a" class="asset  asset-image at-xid-6a0163057a21c8970d0192aa313309970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0192aa313309970d-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Kinect-one-a" /></a><br />I’m obviously most interested in the upgrade to the Kinect technology. Here’s what I’ve gleaned, thus far:</p>
<ul>
<li>Full HD with 1080p resolution</li>
<li>Use of something called “Active IR”, a type of&#0160;<a href="http://en.wikipedia.org/wiki/Time-of-flight_camera" target="_blank">time-of-flight</a>&#0160;depth detection rather than relying on&#0160;<a href="http://en.wikipedia.org/wiki/Structured_light" target="_blank">structured light</a>, allowing accurate depth data even in the dark</li>
<li>Enhanced skeleton tracking, with muscular stress and joint orientation down to the finger level</li>
<li>Heart rate estimation, presumably using something akin to the&#0160;<a href="http://people.csail.mit.edu/mrub/vidmag/" target="_blank">Eulerian video magnification</a>&#0160;that&#0160;<a href="http://bits.blogs.nytimes.com/2013/02/27/scientists-uncover-invisible-motion-in-video" target="_blank">made such a splash earlier in the year</a></li>
<li>Facial expression (and therefore mood) detection</li>
<li>Tracks up to 6 players simultaneously</li>
</ul>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01910268ca48970c-pi" style="display: inline;"><img alt="Kinect-one-b" class="asset  asset-image at-xid-6a0163057a21c8970d01910268ca48970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01910268ca48970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Kinect-one-b" /></a><br />All of which needs much more console horsepower than the previous version of the Kinect technology – and keeping games responsive with the existing (and already long-in-the-tooth) Xbox 360 hardware was a major driver behind the decision to limit the resolution and ultimately accuracy of the original Kinect device – but the Xbox One looks set to deliver essentially 8x the performance of the Xbox 360. All of which looks very encouraging (if not downright amazing).</p>
<p>To say I’m impatient to get my hands on one of these is an understatement. I’m also very curious about how and when this tech will make it into an equivalent Kinect for Windows device, and how this will be reflected in an updated KfW SDK. At the lowest level, the current SDK provides RGB and depth frames – which are essentially captured by the two cameras built into the Kinect device – and I’m interested to know whether the “Active IR” data will be presented in a similar way, or whether the modified scanning technique will force an API change there.</p>
<p>The enhanced skeleton tracking capabilities will also lead to more skeleton information being presented, of course (apart from anything else, more joints being tracked will mean more – and probably reassigned – Joint IDs), but I’m sure there are more fundamental changes planned. Time will tell.</p>
<p style="text-align: left;">&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: API wishlist surveys - Spring 2013
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: api-wishlist-surveys-spring-2013
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/api-wishlist-surveys-spring-2013.html 
DATE: 05/20/2013 02:29:58 AM
-----
BODY:
<p>This year’s API wishlist surveys for Autodesk Maya and Autodesk 3ds Max are now live:</p>
<ul>
<li><a href="https://www.surveymonkey.com/s/Maya2014APISurvey" target="_blank">Autodesk Maya</a></li>
<li><a href="https://www.surveymonkey.com/s/3dsMax2014APISurvey" target="_blank">Autodesk 3ds Max</a></li>
</ul>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-pi"><img alt="API Survey" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Onlinesurvey" width="220" /></a><br />Our Engineering teams use the results from these surveys to help steer their ongoing API development priorities, release on release. If you have feedback or specific requests regarding our APIs, this is a great way to get them in front of the right people inside Autodesk.</p>
<p>The deadline for completing these surveys is&#0160;–&#0160;<strong>July 28th, 2013</strong>&#0160;– so if you’re interested in providing us with feedback, please don’t procrastinate: while I expect they’ll remain open a little longer, the deadline probably won’t be extended by very much.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-pi"><img alt="Chart Results" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Chart_results" width="180" /></a><br />And I will, of course, post the survey&#39; results link, once they&#39;re available sometimes in August.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: chris
EMAIL: chris.gibbs.mail@gmail.com
IP: 107.198.153.164
URL: 
DATE: 05/20/2013 04:25:20 PM
I am thinking of developing software for Maya/Max.  Does Autodesk reveal how many active paying Maya/Max users there are in the world?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.85.233
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 05/21/2013 01:31:15 AM
No, this is not an information I can share publicly. But if you are an ADN member and you got a good reason to know, we can have a discussion.

-cyrille
-----
COMMENT:
AUTHOR: Erik Johansson
EMAIL: erik.johansson.evegard@gmail.com
IP: 62.181.192.72
URL: 
DATE: 05/21/2013 02:31:05 AM
Back with another unrelated comment but comments sections closes awfully fast.

Is there anyway to avoid the special last step involving install_name_tool when installing PySide for Maya 2012/2013 in osx?

I tried just using DYLD_LIBRARY_PATH and PYTHONPATH for setting it up as on linux but it didn't work. Not too familiar with osx development but it seems like a strange step.

There is also some issues with the instructions that you might wan't to edit:
1.
export SHIBOKEN_DIR=/Users/myHomeDir/shiboken-1.1.2/_output
should be
export SHIBOKEN_DIR=/Users/myHomeDir/shiboken-1.1.2/_output/lib/cmake/Shiboken-1.1.2

2.
when cmaking
-DALTERNATE_QT_INCLUDE_DIR=$QTDIR/include
should be
-DALTERNATIVE_QT_INCLUDE_DIR=$QTDIR/include

3.
there is also a bug in the qt src
in src/plugins/bearer/corewlan "|" needs to be replaced with "||" otherwise qt wont compile

4.
The instructions when building qt for mac says something about that there is a bug in qt and files need to be copied for qmake to work. I skipped doing this and it made no difference.


-----
COMMENT:
AUTHOR: Erik Johansson
EMAIL: erik.johansson.evegard@gmail.com
IP: 83.227.56.210
URL: 
DATE: 05/21/2013 03:05:09 PM
So i figured out i can keep my PySide .so and .dylib files outside of the /Applications folder by linking them against @executable_app and using PYTHONPATH and DYLD_LIBRARY_PATH to find them but I can't get QtWebKit to work as the QtWebKit in maya is linked against @executable_app/phonon but phonon is not included. Is there any way to solve this?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.85.233
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 05/22/2013 12:23:51 AM
Hi Eric

I could compile Qt, PyQt, PySide without changing the code like you did, so that's really strange that you had to. Anyway, I can see phonon present in my distribution /Applications/Autodesk/maya2013/Maya.app/Contents/MacOS/phonon so I am not sure I understand your issue. I'll try to contact you by email and follow-up from there

-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: API webcast archives
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: api-webcast-archives
CATEGORY: 3ds Max
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Training
CATEGORY: WebBlogs

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/api-webcast-archives.html 
DATE: 05/13/2013 05:10:48 AM
-----
BODY:
<p>As part of our&nbsp;<a href="http://www.autodesk.com/adnopen" target="_blank">ADN Open</a> work to move our API content to more accessible (search-engine-findable) locations, I'm posting our webcast archives to this blog. Some of these recordings are old now, but still contain useful information for people on legacy releases. And, being recordings of live webcasts, they are not as polished as our DevTV recordings. Note that the developer center pages contains additional material which go along the latest training webcast listed below.</p>
<h3>3ds Max - <a href="http://www.autodesk.com/develop3dsmax" target="_self">http://www.autodesk.com/develop3dsmax</a></h3>
<table width="100%">
<thead>
<tr>
<th>Title</th>
<th width="15%">Language</th>
<th width="15%">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://download.autodesk.com/media/adn/3dsMax_July2012_Webcast_final_Recording.zip">3ds Max (C++)</a></td>
<td>English</td>
<td>July 2012</td>
</tr>
<tr>
<td><a href="http://download.autodesk.com/media/adn/3dsMax(Intermediate)Webcast.zip">3ds Max (Intermediate)</a></td>
<td>English</td>
<td>May 2009</td>
</tr>
</tbody>
</table>
<h3>Maya - <a href="http://www.autodesk.com/developmaya" target="_self">http://www.autodesk.com/developmaya</a></h3>
<table width="100%">
<thead>
<tr>
<th>Title</th>
<th width="15%">Language</th>
<th width="15%">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://download.autodesk.com/media/adn/MayaAPI_Webcast_Recordings.zip">Maya API (Python)</a></td>
<td>English</td>
<td>April 2012</td>
</tr>
<tr>
<td><a href="http://download.autodesk.com/media/adn/Maya_Intermediate_Webcast.zip">Maya (Intermediate)</a></td>
<td>English</td>
<td>May 2009</td>
</tr>
</tbody>
</table>
<h3>MotionBuilder - <a href="http://www.autodesk.com/developmotionbuilder" target="_self">http://www.autodesk.com/developmotionbuilder</a></h3>
<table width="100%">
<thead>
<tr>
<th>Title</th>
<th width="15%">Language</th>
<th width="15%">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://download.autodesk.com/media/adn/MotionBuilderWebcast_29May12to08June12.zip">MotionBuilder API (Python)</a></td>
<td>English</td>
<td>May 2012</td>
</tr>
<tr>
<td><a href="http://download.autodesk.com/media/adn/MotionBuilder_Beginner_Webcast.zip">MotionBuilder API (Beginner)</a></td>
<td>English</td>
<td>May 2009</td>
</tr>
</tbody>
</table>
<h3>FBX - <a href="http://www.autodesk.com/developfbx" target="_self">http://www.autodesk.com/developfbx</a></h3>
<table width="100%">
<thead>
<tr>
<th>Title</th>
<th width="15%">Language</th>
<th width="15%">Date</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://download.autodesk.com/media/adn/FBXSDKwebcast_Recordings.zip">FBX (C++)</a></td>
<td>English</td>
<td>June 2012</td>
</tr>
</tbody>
</table>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Call for proposals: Autodesk University 2013
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: call-for-proposals-autodesk-university-2013
CATEGORY: Autodesk
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/call-for-proposals-autodesk-university-2013.html 
DATE: 05/06/2013 09:22:58 AM
-----
BODY:
<p>As many of you will now be aware,&#0160;<a href="http://au.autodesk.com/?nd=call_for_proposals" target="_blank">the call for proposals for AU 2013 is now open</a>&#0160;and will remain so until May 19th. It’s always great to have people presenting fresh ideas at the conference, so think about whether you have something to share with fellow Autodesk customers/partners/developers and submit a proposal or two!</p>
<p>I&#39;ll follow-up in a few weeks with another call for presentation but for our ADN DevDays which will run just before AU (December 2nd) - you can see recording from last year <a href="http://area.autodesk.com/au2012/adn" target="_self">here</a>. If you come back in a few days on that link, you will be able to see more presentations than what was available until now.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Using Global Interpreter Locks (GIL) when developing Python code in C++
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: using-global-interpreter-locks-gil-when-developing-python-code-in-c
CATEGORY: 3ds Max
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: SoftImage

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/05/using-global-interpreter-locks-gil-when-developing-python-code-in-c.html 
DATE: 05/03/2013 08:54:59 AM
-----
BODY:
<p>Python uses a Global Interpreter Lock (GIL) to ensures that Python code in only executing in a single thread at a time.</p>
<p>When you use the Python C API and/or expose C++ code to Python, you have to re-acquire the GIL each time you call in a C Python API. This is also true when writing Python extensions for Maya or when using the Python C API from a Maya plug-ins.</p>
<p>You will need to add these calls in a few high-level places in your code, like this:</p>
<pre class="brush: cpp; toolbar: false;">PyGILState_STATE state = PyGILState_Ensure();
// call your python code here:
PyGILState_Release(state);</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Distributing plug-ins/files on Maya (and 3ds Max)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: distributing-plug-insfiles-on-maya-and-3ds-max
CATEGORY: 3ds Max
CATEGORY: Autodesk Exchange
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/distributing-plug-insfiles-on-maya-and-3ds-max.html 
DATE: 04/30/2013 08:57:45 AM
-----
BODY:
<p>You probably remember this <a href="http://around-the-corner.typepad.com/adn/2012/07/distributing-files-on-maya-maya-modules.html" target="_self">article</a>&#0160;where I described in details how to work with Maya Modules and integrate your files and plug-ins in Maya. This time, I am going to explain what changes were made in Maya to support the <a href="http://apps.exchange.autodesk.com" target="_self">Autodesk Exchange Store</a>.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768395890970b-pi" style="display: inline;"><img alt="Installer" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768395890970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768395890970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Installer" /></a></p>
<p>To submit an application / content package on Autodesk Exchange Store, you need to follow few but important rules. The application should be self-contained and easy to install for example. Self-contained means that all files should go in one single directory structure and outside the host application directory structure. In the past, I know, many people were copying their files directly into &#39;c:\Program Files\Autodesk\MayaNNNN&#39; or &#39;/Applications/Autodesk/MayaNNNN&#39;, but for Exchange this is not allowed and unacceptable. </p>
<p>The other thing with the legacy Maya Module approach was that you needed to have a text file posted under the user profile at a specific place, meaning the installer had to determine which Maya version you wanted to use in case you had many on your computer. Many people were instead having a readme to explain people to copy files here and here, to make changes in their Maya.env or&#0160;userPrefs.mel file, etc... and that was true as well for the Maya Bonus Tools ;)</p>
<p>The last but not least limitation was about initializing the application in Maya. Like the Maya Bonus Tools, you could provide a userSetup.mel to initialize your menu, shelve, plug-ins, ... but in remember that Maya load one and only one userSetup.mel file (and only the first one found :(</p>
<p>The Exchange approach is that you now put your application in one common place, and describe your application. Any Autodesk software watch that folder and if the application says &#39;I am for Maya 2014&#39;, Maya 2014 will load the application. If it says &#39;I am for Maya 2014, AutoCAD 2014 and 3ds Max 2014 &amp; 2015&#39;, these 4 app/version will load the application but not the others.</p>
<h3>Describe your application</h3>
<p>Let&#39;s take a quick look to my favorite little Maya Math node sample in Python. The XML description file looks like this:</p>
<pre class="brush: xml; toolbar: false;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;ApplicationPackage SchemaVersion=&quot;1.0&quot;
	ProductType=&quot;Application&quot;
	AutodeskProduct=&quot;Maya&quot;
	Name=&quot;MathNode&quot;
	Description=&quot;Autodesk Maya MathNode&quot;
	AppVersion=&quot;1.0.0&quot;
	Author=&quot;Autodesk&quot;
	AppNameSpace=&quot;com.autodesk.exchange.maya.mathnode&quot;
	HelpFile=&quot;./Contents/docs/index.html&quot;
	OnlineDocumentation=&quot;http://www.autodesk.com/maya&quot;
	ProductCode=&quot;*&quot;
	UpgradeCode=&quot;{52c87085-07d5-4cfa-b76e-e348553c30ac}&quot; &gt;
	
	&lt;CompanyDetails Name=&quot;Autodesk&quot;
		Phone=&quot; &quot;
		Url=&quot;http://www.autodesk.com&quot;
		Email=&quot;labs.plugins@autodesk.com&quot; /&gt;

	&lt;!-- Prevent to load in older version than Maya 2008 --&gt;
	&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win64|macOS|linux&quot; Platform=&quot;Maya&quot; SeriesMin=&quot;2008&quot; &#0160;/&gt;

	&lt;Components&gt;
		&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win64|macOS|linux&quot; Platform=&quot;Maya&quot; SeriesMin=&quot;2008&quot; /&gt;
		&lt;MayaEnv expr=&quot;MAYA_SCRIPT_PATH+:=shelves&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/plug-ins/asdkMathNode.py&quot; AutoLoad=&quot;True&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/scripts/AEasdkMathNodeTemplate.mel&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/scripts/MathNode_load.mel&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/icons/MathNode.png&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/shelves/MathNode_shelf.mel&quot; /&gt;
	&lt;/Components&gt;
	
&lt;/ApplicationPackage&gt;
</pre>
<p>The &#39;ApplicationPackage&#39; and the first &#39;RuntimeRequirements&#39; tags are the ones all Autodesk Application are watching to determine if the package if something they should eventually consider loading. The OS, Platform, can contain multiple values.</p>
<p>Each following &#39;Components&#39; tag will describe an entire application like here, or components. In short, I could have had something like:</p>
<pre class="brush: xml; toolbar: false;">	&lt;Components&gt;
		&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win64&quot; Platform=&quot;3dsMax&quot; SeriesMin=&quot;2013&quot; SeriesMax=&quot;2014&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/plug-ins/asdkMathNode-x64.dlu&quot; AutoLoad=&quot;True&quot; /&gt;
	&lt;/Components&gt;
	&lt;Components&gt;
		&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win32&quot; Platform=&quot;3dsMax&quot; SeriesMin=&quot;2013&quot; SeriesMax=&quot;2013&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/plug-ins/asdkMathNode-x86.dlu&quot; AutoLoad=&quot;True&quot; /&gt;
	&lt;/Components&gt;

	&lt;Components&gt;
		&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win64|macOS|linux&quot; Platform=&quot;Maya&quot; SeriesMin=&quot;2008&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/plug-ins/asdkMathNode.py&quot; AutoLoad=&quot;True&quot; /&gt;
	&lt;/Components&gt;

	&lt;Components&gt;
		&lt;RuntimeRequirements SupportPath=&quot;./Contents/docs&quot; OS=&quot;win64|macOS|linux&quot; Platform=&quot;Maya|3dsMax&quot; /&gt;
		&lt;ComponentEntry ModuleName=&quot;./Contents/docs/ReadMeFirst.txt&quot; /&gt;
	&lt;/Components&gt;
</pre>
<p>Which tells there is an application for:</p>
<ul>
<li>3ds Max 2013 - 32-bits</li>
<li>3ds Max 2013 &amp; 2014 - x64</li>
<li>Maya 2008 and beyond on Windows x64 / Max OSX, Linux</li>
</ul>
<p>and a readme for</p>
<ul>
<li>all OS,</li>
<li>3ds Max and Maya (all releases)</li>
</ul>
<p>Nothing really new for Maya, but no more user profile text file to tell where to find a module on disk. For 3ds Max this is a completely new way for plug-ins to work with 3ds Max and would recommend using that approach instead of copying into the 3ds Max directory structure.</p>
<h3>Autoload</h3>
<p>One new thing for Maya is that Maya will now call a &lt;moduleName&gt;_load.mel/.py file as soon as a module is detected. Is that _load script, it is your chance to initialize menus, shelves, or anything you want. Note this _load script is source&#39;d right before the userSetup.mel script which gives you a chance to setup your application environment and let the user to change it if he needs to.</p>
<p>But, Maya will also load modules at runtime. That means you would not need to restart Maya if you decide to install an Exchange compliant application (this can be turned off if you unload the &#39;autoLoader&#39; plug-in in the Plug-in Manager).</p>
<h3>Installer</h3>
<p>Because the files are self-contained, and we got an XML file which describe the application, it is very easy to create installers for the 3 platforms in few minutes. The MSI, PKG, and Shell script installers for Maya are entirely automated and takes only 5 minutes once you got your application working. There is no additional work to do - you give the path where to find the files, and the AppPacker tool reads the XML file and directory structure to produce all the installers. The ADN team will create these installers for you and will help you to make changes in your application for a better Exchange Store integration.</p>
<p>You are unsure where to start - go <a href="http://around-the-corner.typepad.com/adn/2013/04/a-new-distribution-channel-for-maya-3ds-max.html" target="_self">here</a>&#0160;and/or&#0160;<a href="http://usa.autodesk.com/adsk/servlet/index?id=17183245&amp;siteID=123112" target="_self">Autodesk Developer Center</a>&#0160;</p>
<p>You got plug-ins for year without installer and interested to have one without knowing where to start? I got the scripts and tools on GitHub and willing to share them with individuals. If interested, drop me a line with your <a href="https://github.com/" target="_self">GitHub</a> account name. In future, I&#39;ll make them in public repository, but at this time, I am still testing couple of more complex scenario.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Mark Jackson
EMAIL: 
IP: 83.223.200.2
URL: http://profile.typepad.com/jacksonmark2
DATE: 05/01/2013 01:09:27 AM
Thanks for the explanation Cyrille, I've been meaning to bust apart what you did in the Red9 installer xml for me, think I'll go take another look. 
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: a New Distribution Channel for Maya & 3ds Max
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: a-new-distribution-channel-for-maya-3ds-max
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/a-new-distribution-channel-for-maya-3ds-max.html 
DATE: 04/26/2013 01:16:06 AM
-----
BODY:
<p>With the release of Maya 2014 and 3ds Max 2014 the Autodesk Exchange site makes it easier for plug-in, content, and tutorial developers to distribute and sell their content more easily to Autodesk customers.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d43210c7d970c-pi" style="display: inline;"><img alt="Money" class="asset  asset-image at-xid-6a0163057a21c8970d017d43210c7d970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d43210c7d970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Money" /></a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d43210c7d970c-pi" style="display: inline;"></a>This is a new channel to make new customers and does not necessarily means that you have to switch from your existing distribution channel to this one entirely. You should really see that as a new oportunity for you and your future customers to work together.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901b9812a1970b-pi" style="float: right;"><img alt="Curious" class="asset  asset-image at-xid-6a0163057a21c8970d01901b9812a1970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01901b9812a1970b-320wi" style="margin: 0px 0px 5px 5px;" title="Curious" /></a>But behind the scene 3ds Max and Maya have both been mofidifed to support the Exchange Store for a better customer experience. So now, if you familiar with Mac OSX and the bundle approach, 3ds Max and Maya both have a modular bundle system in place to support plug-in application. A module (or bundle) is a self-contained directory which contains all the application files. 3ds Max and Maya (as well as other Autodesk applications) will watch these bundles and load them depending of what they are. In the next post, I&#39;ll go in details how to configure such system. Not only that was developed for Exchange, but 3rd party developers can take advantage of that system to install their application versus copying files in 3ds Max and Maya root directories. At the end, the ADN team developed some simple scripts and template for you to create installers in a very simple way. Curious? take a look to the &#39;Maya Bonus Tools&#39; or &#39;Bulge-O-Matic from&#0160;Di-O-Matic, Inc.&#39; apps or read the next post for more details.</p>
<p>The Autodesk Exchange pages can be found at:</p>
<ul>
<li>3ds Max -&#0160;<a href="http://www.autodesk.com/3dsmax-exchange" target="_self">http://www.autodesk.com/3dsmax-exchange</a>&#0160;</li>
<li>Maya - <a href="http://www.autodesk.com/maya-exchange" target="_self">http://www.autodesk.com/maya-exchange</a></li>
</ul>
<p>Both Maya and 3ds Max have direct links to the exchange app store from within the product under the help menu. In Maya go to &quot;Help &gt; Exchange Apps&quot; in the main menu. In 3ds Max go to &quot;Help &gt; Autodesk Product Information &gt; Exchange Apps&quot;.</p>
<p>According to the <a href="http://usa.autodesk.com/adsk/servlet/index?id=17183245&amp;siteID=123112" target="_self">Autodesk Exchange developer center</a> &quot;apps&quot; aren&#39;t restricted to plug-ins, and can be anything a customer will find useful. For example:</p>
<ul>
<li>Plug-ins</li>
<li>Standalone applications</li>
<li>Training tutorials</li>
<li>E-books</li>
<li>Content</li>
</ul>
<p>Note that at the current time there is no cost to sign-up and Autodesk is currently taking no commission, but may do so in the future. For more information on that <a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=20149725" target="_self">see the Publisher FAQ</a>.</p>
<p>You feel it is too complicated, or the information given on the FAQ and/or WEB page confusing? Contact the Exchange Store team, there is always solutions to a problem.</p>
<p>If you have enough information and want to get started publishing your content for 3ds Max or Maya, you can go directly the following links:</p>
<ul>
<li>3ds Max - <a href="http://apps.exchange.autodesk.com/Publisher/Description?productline=3DSMAX" target="_self">http://apps.exchange.autodesk.com/Publisher/Description?productline=3DSMAX</a></li>
<li>Maya - <a href="http://apps.exchange.autodesk.com/Publisher/Description?productline=MAYA" target="_self">http://apps.exchange.autodesk.com/Publisher/Description?productline=MAYA</a></li>
</ul>
<p>Happy content publishing!</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building SIP, and PyQt for Maya 2014
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: building-sip-and-pyqt-for-maya-2014
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/building-sip-and-pyqt-for-maya-2014.html 
DATE: 04/22/2013 07:06:40 AM
-----
BODY:
<p><strong>This is an updated version for Maya 2014&#39;&#0160;PyQt build instructions.</strong></p>
<p>This is an updated version of the Maya 2013 build instructions for PyQt and PySide (<a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html" target="_self">here</a>). The very good news is that with Maya 2014, there is no more need to build PySide as it is coming by default in Maya :)&#0160;</p>
<p>libxml, openSSL, OpenAL,&#0160;python2.7, qt-4.8.2-64, and tbb&#0160;are also coming by default in the Maya include and lib folder, so unless you have a very specific need, you would not need to rebuild any of those libraries like before. Note as well that there is a &#39;C:\Program Files\Autodesk\Maya2014\support\opensource&#39; folder now which contains some of the community source. <a href="http://www.autodesk.com/lgplsource" target="_self">http://www.autodesk.com/lgplsource</a> is also a location you want to remember for future.</p>
<p>I&#39;ll come back later with instructions to rebuild Qt itself for those who needs to, but again you do not need to build Qt to build PyQt anymore.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi"><img alt="Build-headacke" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a></p>
<p>
Maya 2014 also includes most of the tools we need to build PyQt without the need of compiling Qt source &amp; tools - so in this post we will see the easy way to build PyQt.</p>
<p>Download SIP and PyQt source from &#39;<a href="http://www.riverbankcomputing.co.uk" target="_self">http://www.riverbankcomputing.co.uk</a>&#39; - here I downloaded &#39;sip-4.14.5&#39; and &#39;PyQt-win-gpl-4.10&#39;. Unzip them in one folder, then you should get something like this:</p>
<h2>Mac</h2>
<p style="padding-left: 30px;"><em>/Users/cyrille/Documents/_Maya2014Scripts/sip-4.14.5</em><br /><em>/Users/cyrille/Documents/_Maya2014Scripts/PyQt-mac-gpl-4.10</em></p>
<p style="padding-left: 30px;"><em>&#39;/Users/cyrille/Documents/_Maya2014Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow the instructions from the API docs to setup your environment
(Developer Resources &gt; API Guide &gt; Setting up your build environment &gt;
Mac OS X environment, in the Maya Documentation)&#0160;</p>
<p>Untar&#0160;the /devkit/include/qt-4.8.2-include.tar.gz into /devkit/include/Qt</p>
<p>Copy /Resources/qt.conf into /bin/qt.conf and edit it like this:</p>
<pre class="bush: bash; toolbar: false;">[Paths]
Prefix=
Libraries=../MacOS
Binaries=../bin
Headers=../../../devkit/include/Qt
Data=..
Plugins=../qt-plugins
Translations=../qt-translations
</pre>
<p>Untar the qt-4.8.2-64-mkspecs.tar.gz into $MAYA_LOCATION/Maya.app/Contents/bin/mkspecs Unfortunately, this file is not present in the Maya Mac&#0160;distribution, so you either need to get it from your Window or Linux Maya distribution, or from the Qt Mac source. Make sure the qconfig.pri looks like this:</p>
<p>qconfig.pri</p>
<pre class="brush: bash; toobar: false;">#configuration
CONFIG += release def_files_disabled exceptions no_mocdepend stl x86_64 qt #qt_framework
QT_ARCH = macosx
QT_EDITION = OpenSource
QT_CONFIG +=  minimal-config small-config medium-config large-config full-config no-pkg-config dwarf2 phonon phonon-backend accessibility opengl reduce_exports ipv6 getaddrinfo ipv6ifname getifaddrs png no-freetype system-zlib nis cups iconv openssl corewlan concurrent xmlpatterns multimedia audio-backend svg script scripttools declarative release x86_64 qt #qt_framework

#versioning
QT_VERSION = 4.8.2
QT_MAJOR_VERSION = 4
QT_MINOR_VERSION = 8
QT_PATCH_VERSION = 2

#namespaces
QT_LIBINFIX = 
QT_NAMESPACE = 
QT_NAMESPACE_MAC_CRC = 

QT_GCC_MAJOR_VERSION = 4
QT_GCC_MINOR_VERSION = 2
QT_GCC_PATCH_VERSION = 1
</pre>
<p>You also need to create copy of the Qt lib files as fake .dylib files from the /MacOS directory.&#0160;The
script below will give you the commands to run to do that.</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.14.5
export MAYA_LOCATION=/Applications/Autodesk/maya2014

cd $SIPDIR
$MAYA_LOCATION/Maya.app/Contents/bin/mayapy ./configure.py --arch=x86_64
make
sudo make install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: shell; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export MAYA_LOCATION=/Applications/Autodesk/maya2014
export QTDIR=$MAYA_LOCATION/Maya.app/Contents
export QMAKESPEC=$QTDIR/mkspecs/macx-g++
export INCDIR_QT=$MAYA_LOCATION/devkit/include/Qt
export LIBDIR_QT=$QTDIR/MacOS

if [ ! -f $QMAKESPEC/qmake.conf ];
then
  echo &quot;You need to install qt-4.8.2-64-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;
  exit
fi
if [ ! -f $INCDIR_QT/QtCore/qdir.h ];
then
  echo &quot;You need to uncompress $MAYA_LOCATION/devkit/include/qt-4.8.2-include.tar.gz in $INCDIR_QT !&quot;
  exit
fi
# qt.conf - /Applications/Autodesk/maya2014/Maya.app/Contents/Resources
if [ ! -f $QTDIR/bin/qt.conf ];
then
  echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;
  exit
fi

test=`grep &quot;Data=../..&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Data=..&#39;&quot;
  exit
fi
test=`grep &quot;Headers=../../include&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
&#0160; echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=../../../devkit/include/Qt&#39;&quot;
&#0160; exit
fi
test=`grep &quot;Libraries=../lib&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
&#0160; echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Libraries =../MacOS&#39;&quot;
&#0160; exit
fi
test=`grep &quot;Plugins = qt-plugins&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Plugins=../qt-plugins&#39;&quot;
  exit
fi
test=`grep &quot;Translations = qt-translations&quot; $QTDIR/bin/qt.conf`
if [ ! -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Translations=../qt-translations&#39;&quot;
  exit
fi

for mod in Core Declarative Designer DesignerComponents Gui Help Multimedia Network OpenGL Script ScriptTools Sql Svg WebKit Xml XmlPatterns
do
  if [ ! -f $QTDIR/MacOS/libQt${mod}.dylib ];
  then
    echo &quot;You need to copy a fake Qt$mod dylib - cp $QTDIR/MacOS/Qt$mod $QTDIR/MacOS/libQt${mod}.dylib !&quot;
    #cp $QTDIR/MacOS/Qt$mod $QTDIR/MacOS/libQt${mod}.dylib
    exit
  fi
done
if [ ! -f $QTDIR/MacOS/libphonon.dylib ];
then
  echo &quot;You need to copy a fake phonon dylib - cp $QTDIR/MacOS/phonon $QTDIR/MacOS/libphonon.dylib !&quot;
  #cp $QTDIR/MacOS/phonon $QTDIR/MacOS/libphonon.dylib
  exit
fi

export DYLD_LIBRARY_PATH=$QTDIR/MacOS
export DYLD_FRAMEWORK_PATH=$QTDIR/Frameworks

export SIPDIR=$MAYAQTBUILD/sip-4.14.5
export PYQTDIR=$MAYAQTBUILD/PyQt-mac-gpl-4.10

cd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Linux</h2>
<p style="padding-left: 30px;"><em>/home/cyrille/Documents/_Maya2014Scripts/sip-4.14.5</em><br /><em>/home/cyrille/Documents/_Maya2014Scripts/PyQt-mac-gpl-4.10</em></p>
<p style="padding-left: 30px;"><em>&#39;/home/cyrille/Documents/_Maya2014Scripts&#39; being my local folder. Now the instructions, and bash scripts to build that stuff.</em></p>
<p>Follow
the instructions from the API docs to setup your environment (Developer
Resources &gt; API Guide &gt; Setting up your build environment &gt; Linux
environments (64 bit), in the Maya Documentation).</p>
<p>Edit your qt.conf file (/usr/autodesk/maya2014-x64/bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Untar the /include/qt-4.8.2-include.tar.gz into /include/Qt</p>
<p>Untart the /mkspecs/qt-4.8.2-mkspecs.tar.gz into /mkspecs</p>
<p>Make qmake, moc executables from the Maya bin directory</p>
<pre class="brush: shell; toolbar: false;">sudo chmod aog+x /usr/autodesk/maya2014-x64/bin/moc
sudo chmod aog+x /usr/autodesk/maya2014-x64/bin/qmake
</pre>
<p>Build &amp; Install SIP</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export SIPDIR=$MAYAQTBUILD/sip-4.14.5
export MAYA_LOCATION=/usr/autodesk/maya2014-x64

cd $SIPDIR
$MAYA_LOCATION/bin/mayapy ./configure.py
make
sudo make install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: bash; toolbar: false;">#!/usr/bin/env bash

MAYAQTBUILD=&quot;`dirname \&quot;$0\&quot;`&quot; # Relative
export MAYAQTBUILD=&quot;`( cd \&quot;$MAYAQTBUILD\&quot; &amp;&amp; pwd )`&quot; # Absolutized and normalized
cd $MAYAQTBUILD

export MAYA_LOCATION=/usr/autodesk/maya2014-x64
export QTDIR=$MAYA_LOCATION
export QMAKESPEC=$QTDIR/mkspecs/linux-g++-64
export INCDIR_QT=$MAYA_LOCATION/include/Qt
export LIBDIR_QT=$QTDIR/lib

if [ ! -f $QMAKESPEC/qmake.conf ];
then
  echo &quot;You need to install qt-4.8.2-mkspecs.tar.gz in $QTDIR/mkspecs !&quot;
  exit
fi
if [ ! -f $INCDIR_QT/QtCore/qdir.h ];
then
  echo &quot;You need to uncompress $MAYA_LOCATION/include/qt-4.8.2-include.tar.gz in $INCDIR_QT !&quot;
  exit
fi
# qt.conf - /Applications/Autodesk/maya2014/Maya.app/Contents/Resources
if [ ! -f $QTDIR/bin/qt.conf ];
then
  echo &quot;You need to copy $QTDIR/Resources/qt.conf in $QTDIR/bin !&quot;
  exit
fi

test=`grep &quot;Headers=../include/Qt&quot; $QTDIR/bin/qt.conf`
if [ -z &quot;$test&quot; ];
then
  echo &quot;You need to edit $QTDIR/bin/qt.conf to use &#39;Headers=../include/Qt&#39;&quot;
  exit
fi

export SIPDIR=$MAYAQTBUILD/sip-4.14.5
export PYQTDIR=$MAYAQTBUILD/PyQt-x11-gpl-4.10

cd $PYQTDIR
export PATH=$QTDIR/bin:$PATH
$QTDIR/bin/mayapy ./configure.py LIBDIR_QT=$LIBDIR_QT INCDIR_QT=$INCDIR_QT MOC=$QTDIR/bin/moc -w --no-designer-plugin -g
make -j 8
sudo make install
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Windows</h2>
<p style="padding-left: 30px;"><em>D:\__sdkext\_Maya2014 Scripts\sip-4.14.5</em><br /><em>D:\__sdkext\_Maya2014 Scripts\PyQt-win-gpl-4.10</em></p>
<p style="padding-left: 30px;"><em>&#39;D:\__sdkext\_Maya2014 Scripts&#39; being my local folder. Now the instructions and scripts to build that stuff.</em></p>
<p>Follow
the instructions from the API docs to setup your environment (Developer
Resources &gt; API Guide &gt; Setting up your build environment &gt; Windows
environment (64‐bit), in the Maya Documentation)</p>
<p>Edit your qt.conf file (C:\Program Files\Autodesk\Maya2014\bin) like below</p>
<pre>[Paths]<br />Prefix=<br />Libraries=../lib<br />Binaries=../bin<br />Headers=../include/Qt<br />Data=../<br />Plugins=../qt-plugins<br />Translations=../qt-translations</pre>
<p>Unzip the /include/qt-4.8.2-64-include.tar.gz into /include/Qt</p>
<p>Unzip the /mkspecs/qt-4.8.2-64-mkspecs.tar.gz into /mkspecs</p>
<p>Build &amp; Install SIP</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: &quot;%MAYAQTBUILD%&quot;
v:

set SIPDIR=v:\sip-4.14.5
set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 10.0
if [%LIBPATH%]==[] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2014
set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

cd %SIPDIR%
&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py
nmake
nmake install
</pre>
<p>Build &amp; Install PyQt</p>
<pre class="brush: shell; toolbar: false;">@echo off

set MAYAQTBUILD=%~dp0
set MAYAQTBUILD=%MAYAQTBUILD:~0,-1%
if exist v:\nul subst v: /d
subst v: &quot;%MAYAQTBUILD%&quot;
v:

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2014
if exist m:\nul subst m: /d
subst m: &quot;%MAYA_LOCATION%&quot;
set MAYA_LOCATION=m:

set QTDIR=%MAYA_LOCATION%
set MSVC_VERSION=2010
set QMAKESPEC=%QTDIR%\mkspecs\win32-msvc%MSVC_VERSION%
if not exist &quot;%QMAKESPEC%\qmake.conf&quot; (
	echo &quot;You need to uncompress %MAYA_LOCATION%\mkspecs\qt-4.8.2-64-mkspecs.tar.gz !&quot;
	goto :end
)
if not exist &quot;%MAYA_LOCATION%\include\Qt\QtCore\qdir.h&quot; (
	echo &quot;You need to uncompress %MAYA_LOCATION%\include\qt-4.8.2-64-include.tar.gz in %MAYA_LOCATION%\include\Qt !&quot;
	goto :end
)
findstr /L /C:&quot;Headers=../include/Qt&quot; %MAYA_LOCATION%\bin\qt.conf &gt;nul 2&gt;&amp;1
if ERRORLEVEL 1 (
	echo &quot;You need to edit %MAYA_LOCATION%\bin\qt.conf to use &#39;Headers=../include/Qt&#39;&quot;
	goto :end
)

set SIPDIR=v:\sip-4.14.5
set PYQTDIR=v:\PyQt-win-gpl-4.10

set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 10.0
if [%LIBPATH%]==[] call &quot;%MSVC_DIR%\VC\vcvarsall&quot; amd64

set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.7;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib

cd %PYQTDIR%
set PATH=%QTDIR%\bin;%PATH%
&quot;%MAYA_LOCATION%\bin\mayapy&quot; configure.py LIBDIR_QT=%QTDIR%\lib INCDIR_QT=%QTDIR%\include\Qt MOC=%QTDIR%\bin\moc.exe -w --no-designer-plugin
nmake
nmake install

:end
pause
</pre>
<p>You&#39;re done! go to the testing paragraph at the end of the article.</p>
<h2>Testing</h2>
<p>Copy and paste this example in the Maya Script Editor (in a Python tab), and execute the code:</p>
<pre class="brush: python; toolbar: false;">import sys
from PyQt4 import QtGui


class Example(QtGui.QWidget):
    
    def __init__(self):
        super(Example, self).__init__()
        
        self.initUI()
        
    def initUI(self):      

        self.btn = QtGui.QPushButton(&#39;Dialog&#39;, self)
        self.btn.move(20, 20)
        self.btn.clicked.connect(self.showDialog)
        
        self.le = QtGui.QLineEdit(self)
        self.le.move(130, 22)
        
        self.setGeometry(300, 300, 290, 150)
        self.setWindowTitle(&#39;Input dialog&#39;)
        self.show()
        
    def showDialog(self):
        
        text, ok = QtGui.QInputDialog.getText(self, &#39;Input Dialog&#39;, &#39;Enter your name:&#39;)
        
        if ok:
            self.le.setText(str(text))
        
ex = Example()
</pre>
<p>&#0160;If you see the dialog is showing, you are all set :)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: felix
EMAIL: felix.ulber@gmx.de
IP: 80.171.32.65
URL: 
DATE: 04/23/2013 08:01:48 AM
is there any certain need at all to use PyQt? If I understand right differences to PySide are small.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.162.119
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 04/23/2013 08:10:50 AM
Hi Felix
No, if you are happy with PySide, use PySide since it comes with Maya by default. These build instructions are for people who cannot move easily to PySide for legacy reasons. There are few minors differences such as changing the imports, and the big one is 

widget = shiboken.wrapInstance(long(ptr), QtCore.QObject)

you have to give shiboken (not sip) the actual type of object. You can't rely on sip to figure it out.

Otherwise, the port is very easy, but I know some people would prefer staying with PyQt.

-cyrille

-----
COMMENT:
AUTHOR: Peter
EMAIL: x@free-doom.com
IP: 31.211.206.203
URL: 
DATE: 04/24/2013 08:05:25 AM
Thanks, I'm not a programmer but use some plugins that use PyQT. Is it possible to make an installer for OSX or an easier tutorial?

I got lost in the beginning already... :-/
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.162.119
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 04/24/2013 08:42:45 AM
Hi Peter
I wish I could, but unfortunately I am not allowed to ship binaries. This post assumes you got the developer environment for Maya 2014 setup as documented in the Maya API Online Help (using Xcode 3.2.1, OSX SDK 10.6 and gcc 4.2.1 for OSX) - if your Mac is setup properly. 

-cyrille
-----
COMMENT:
AUTHOR: Al
EMAIL: deamonhunter@gmail.com
IP: 64.209.84.2
URL: 
DATE: 04/30/2013 08:32:19 PM
Hello Cyrille,
Nevermind my last comment. Did not realize these were .bat files. All is well. Thank you for these great tutorials.
Al.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Selection time in MotionBuilder isn't as fast as expected
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: selection-time-in-motionbuilder-isnt-as-fast-as-expected
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/selection-time-in-motionbuilder-isnt-as-fast-as-expected.html 
DATE: 04/17/2013 05:34:10 AM
-----
BODY:
<p>If you are using MotionBuilder 2012 and above, you should use the functions FBBeginChangeAllModels() and FBEndChangeAllModels() to accelerate the selection time otherwise the selection might not be smooth like in the UI.<br /><br />Here is an example:</p>
<pre class="brush: python; toolbar: false;">import time
from pyfbsdk import *

FBBeginChangeAllModels()
s_Time = time.clock()
all_Grp = FBSystem().Scene.Groups
for grp in all_Grp :
    for item in grp.Items :
        item.Selected = True
e_Time = time.clock()
FBEndChangeAllModels()
print &quot;Select&quot;,&quot;ProccesTime = %s&quot;%(e_Time - s_Time),&quot;OK&quot;
</pre>
<p>If now you try the same code without these 2 function calls, you see the difference immediately.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Erik Johansson
EMAIL: erik.johansson.evegard@gmail.com
IP: 62.181.192.72
URL: 
DATE: 04/18/2013 09:55:59 AM
Sorry to bug you in this comment field but could not comment anymore on the original post about compiling PySide for Maya.

Do you have any suggestions for using the Maya compiled PySide without putting it in ldconfig?
If I do so it conflicts with the systems main version of PySide which is compiled against an older Qt version.

I could ofc make an alias that sets LD_LIBRARY_PATH and PYTHONPATH before launching  maya but would like to use the regular bin if possible.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.162.119
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 04/22/2013 09:59:26 AM
Not really :(
I know it is sometimes possible to use PySide/PyQt packages built with a slightly different version of Qt, but this is not really recommended and only works (as far I know) with minors Qt/PySide/PyQt updates.
If anyone knows and can help, I'd be interested to know as well.

-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya, 3ds Max, SoftImage, Mudbox, MotionBuilder 2014 for developers
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-3ds-max-softimage-mudbox-motionbuilder-2014-for-developers
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: SoftImage

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/maya-3ds-max-softimage-mudbox-motionbuilder-2014-for-developers.html 
DATE: 04/11/2013 03:15:11 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b4fa00970c-pi" style="display: inline;"><img alt="3dsmax" class="asset  asset-image at-xid-6a0163057a21c8970d017d42b4fa00970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b4fa00970c-100wi" style="width: 100px;" title="3dsmax" /></a>&#0160;&#0160;<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea29357d970d-pi" style="display: inline;"><img alt="Maya" class="asset  asset-image at-xid-6a0163057a21c8970d017eea29357d970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea29357d970d-100wi" style="width: 100px;" title="Maya" /></a>&#0160;&#0160;<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea293707970d-pi" style="display: inline;"><img alt="Softimage" class="asset  asset-image at-xid-6a0163057a21c8970d017eea293707970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea293707970d-100wi" style="width: 100px;" title="Softimage" /></a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea293707970d-pi" style="display: inline;">
</a><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea293852970d-pi" style="display: inline;"><img alt="Mudbox" class="asset  asset-image at-xid-6a0163057a21c8970d017eea293852970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017eea293852970d-100wi" style="width: 100px;" title="Mudbox" /></a>&#0160;&#0160;<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3885f586970b-pi" style="display: inline;"><img alt="Motionbuilder" class="asset  asset-image at-xid-6a0163057a21c8970d017c3885f586970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3885f586970b-100wi" style="width: 100px;" title="Motionbuilder" /></a>&#0160;&#0160;<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b4ffa8970c-pi" style="display: inline;"><img alt="Gameware" class="asset  asset-image at-xid-6a0163057a21c8970d017d42b4ffa8970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b4ffa8970c-100wi" style="width: 100px;" title="Gameware" /></a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b4ffa8970c-pi" style="display: inline;"></a>Following the new &quot;origami&quot; theme</p>
<p><br />Tomorrow will be the first day where the&#0160;2014 family of Autodesk products will be available around the world.&#0160;You’ll no doubt find lots of information on the interwebs regarding the product’s features (including the <a href="http://area.autodesk.com/" target="_self">AREA</a>), so I’m going to focus specifically on the opportunities – and requirements – the new release presents to developers.</p>
<p>Firstly, ADN members should refer to the (as ever) thorough information produced by the ADN team and posted under the “Events” section of the ADN web site.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b47d1b970c-pi" style="display: inline;"><img alt="Holding-my-breath" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d42b47d1b970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b47d1b970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Holding-my-breath" /></a><br />I have been holding my breath for couple of weeks now, but I think it is time now to publically talk about what&#39;s coming.</p>
<p>In today’s post we’ll take a high-level look at 3ds Max 2014 / Maya 2014 for developers, and then drill into a couple of the specific areas over the coming days/weeks.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38858275970b-pi" style="display: inline;"><img alt="3dsmax-low" class="asset  asset-image at-xid-6a0163057a21c8970d017c38858275970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38858275970b-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="3dsmax-low" /></a></p>
<h3>Binary <span style="color: #00bf00;">compatible</span> release for 3ds Max</h3>
<p>The first thing to mention is that this release is binary application compatible with 3ds Max 2013. (If you’re not sure what this means,&#0160;<a href="http://around-the-corner.typepad.com/adn/2012/06/compatibility-of-maya-plug-ins-between-releases.html" target="_blank">this ancient – at least from this blog’s perspective – post</a>&#0160;should help.) Applications built for 3ds Max 2013 should just work with 3ds Max 2014. It’s also worth noting that we’re still targeting .NET Framework 4.0 with this release.</p>
<p>Reading between the lines, you should realise that we’re still building 3ds Max 2014 with the C++ compiler provided in Visual Studio 2010 SP1, for now (although we’re using the VS 2012 IDE with the 2010 platform toolset, in case that’s of interest to people).</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b48c33970c-pi" style="display: inline;"><img alt="Maya-low" class="asset  asset-image at-xid-6a0163057a21c8970d017d42b48c33970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d42b48c33970c-320wi" style="display: block; margin-left: auto; margin-right: auto;" title="Maya-low" /></a></p>
<h3>Binary <span style="color: #ff0000;">break</span> release for Maya (as always)</h3>
<p>Unlike 3ds Max, Maya is not binary compatible, so you will need to recompile your C++ plug-ins to get them work on Maya 2014. If you are programming using Python, the only change is that Maya 2014 is now using the Python 2.7.3 vs 2.6.4, but that should be a transparent change unless you need additional Python modules such as PyQt. We’re still building Maya 2014 with the C++ compiler provided in Visual Studio 2010 SP1 for Windows, for now (although we’re using the VS 2012 IDE with the 2010 platform toolset, in case that’s of interest to people). And gcc 4.1.2 for Linux, and Xcode 3.2.1 (gcc 4.2.1) for Mac OSX.</p>
<h3>Exchange Store for applications</h3>
<p>I’m pleased to announce that the&#0160;<a href="http://apps.exchange.autodesk.com/" target="_blank">Autodesk Exchange store</a>&#0160;is now open to all for app submissions for 3ds Max and Maya 2014. The Autodesk Exchnage store isn&#39;t new, it exists for almost 2 years now, but tomorrow we will officially launch it for anyone to submit plug-ins, scripts, etc...</p>
<p> Click on the link below to visit the store.</p>
<p><a href="http://apps.exchange.autodesk.com/" target="_blank"><img alt="exchange1" border="0" height="85" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b0177436848cb970d-pi" style="display: block; margin-left: auto; margin-right: auto;" title="exchange1" width="244" /></a></p>
<p>Once you’re in the store of your choice, sign in using your Autodesk Single-Sign-On account and click on the ‘publisher’ link to start submitting your app:</p>
<p><a href="http://apps.exchange.autodesk.com/Publisher/Description" target="_blank"><img alt="image001" border="0" height="106" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b0167688d4e25970b-pi" style="display: block; margin-left: auto; margin-right: auto;" title="image001" width="244" /></a></p>
<p>Next week, I&#39;ll blog to explain more on the requirements and how to prepare the application to be submitted.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Paintable Attributes on Custom Deformer Node 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: paintable-attributes-on-custom-deformer-node-
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/paintable-attributes-on-custom-deformer-node-.html 
DATE: 04/04/2013 07:52:31 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38574009970b-pi" style="display: inline;"><img alt="Paintable" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c38574009970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38574009970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Paintable" /></a></p>
<p>To create a custom deformer node in Maya, you would need to derive from MPxDeformerNode, and the documentation says to not override the compute() method unless required since the deform() method is called by the MPxDeformerNode&#39;s compute() method.</p>
<p>There is few exception to that recommendation. Exceptions are namely:</p>
<ul>
<li>Your node&#39;s deformation algorithm depends on the geometry type, which is not available in the deform() method,</li>
<li>Your node&#39;s deformation algorithm requires computing all of the output geometries simultaneously,</li>
</ul>
<p>So if you node deformation algorithm depends on the input geometry type, which is not available in the deform() method, or your node&#39;s deformation algorithm requires computing all of the output geometries simultaneously, you have to implement the compute() method as well. </p>
<p>The devkit splatDeformer sample is a good example as its deformation algorithm requires to know the geometry type.</p>
<p>Note that in case you implement your own compute() method, you will tell Maya not to call deform anymore - so remember to write your node code accordingly.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d428657e3970c-pi" style="display: inline;"><img alt="Yellow-painting" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d428657e3970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d428657e3970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Yellow-painting" /></a><br />If you already have an attribute in the deformer’s implementation, which you want to make paintable, you can call MEL command &quot;makePaintable&quot; like this:</p>
<p>&#0160; &#0160; &#0160;makePaintable -attrType &quot;multiFloat&quot; -sm &quot;deformer&quot; &quot;fStretch&quot; &quot;paintStretchGrowShrink&quot;;
</p>
<p>&quot;paintStretchGrowShrink&quot; being the attribute name in that example. </p>
<p>One thing to emphasize is in order to make an attribute paintable, it has to be a multi of multis. The multi attribute has to have a parent which is also a multi. The first level multi attribute is to record per vertex values, and the parent multi attribute is necessary to store values for multiple shapes.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya 2014 .Net API sample updates
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-2014-net-api-sample-updates
CATEGORY: .Net
CATEGORY: Cyrille Fauvel
CATEGORY: LINQ
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/04/maya-2014-net-api-sample-updates.html 
DATE: 04/02/2013 08:01:59 AM
-----
BODY:

-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Kinect, leapMotion, MoCap, Googles ... all legacy tools !!!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: kinect-leapmotion-mocap-all-legacy-tools-
CATEGORY: Cyrille Fauvel
CATEGORY: Events

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/kinect-leapmotion-mocap-all-legacy-tools-.html 
DATE: 04/01/2013 12:30:00 AM
-----
BODY:
<p><img alt="Xbox360" border="0" class="asset asset-image at-xid-6a0163057a21c8970d017c3804600a970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804600a970b-800wi" style="float: left; margin-right: 10px;" title="Xbox360" /></p>
<p>On January 2011, Microsoft came out with a revolutionary device named <a href="http://www.microsoft.com/en-us/kinectforwindows/" target="_self">Kinect</a>. While Microsoft made it for their&#0160;Xbox, many people used the Kinect to give computers eyes, ears, and the capacity to interact naturally with people by simply gesturing and speaking.</p>
<p style="margin-left: 10px; padding-left: 30px;">&#0160;</p>
<p>A lot of developers were really enthusiast to deliver new tools despite the limitation of that device in terms of speed and accuracy. However seeing the unexpected success and adoption by both developers and consumers. Microsoft decided to make a second version which can work better on computer and be used in a professional environment.</p>
<p>&#0160;</p>
<p><img alt="Leapmotion" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c38046775970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38046775970b-800wi" style="float: right; margin-left: 10px;" title="Leapmotion" /></p>
<p>Shortly after <a href="https://www.leapmotion.com/" target="_self">LeapMotion</a>&#0160;announced the avaibility of a compelling device dedicated to gesture - an area the Kinect could not directly do with good results. Both devices opened a complete new world of possibilities for gaming, working, and more.</p>
<p>&#0160;</p>
<p>&#0160;</p>
<p><img alt="LeapDJ" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c380479e8970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c380479e8970b-800wi" style="float: left; margin-right: 10px;" title="LeapDJ" /></p>
<p>&#0160;And nowadays with tablets we have also gesture on screen and can work anywhere we want without losing connection to our friends, community, and our data.</p>
<p>I still cannot believe we could even work differently before.</p>
<p>&#0160;</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804a105970b-pi" style="display: inline;"><img alt="Smartglass" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3804a105970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804a105970b-800wi" style="float: right;" title="Smartglass" /></a><br /><br /></p>
<p>And now <a href="http://www.google.com/glass/start/what-it-does/" target="_self">Google Glass</a>, <a href="http://www.vuzix.com/home/" target="_self">Vuzix with their Smart phone hand-free device</a> and few others who are announcing augmented reality sometimes in 3d, I thought we were going to a &#39;limited&#39; interactive world where real and virtual mix all together.</p>
<p>&#0160;</p>
<p>&#0160;</p>
<p>&#0160;</p>
<p>USA was definitively driving the innovation in that field&#0160;<strong>until today</strong>!</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804b69f970b-pi" style="display: inline;"></a><br /><strong>Facing the Hard Truths.</strong></p>
<p>A Russian company has just announced a new device based on the secret
Russian research from the&#0160;<a href="http://en.wikipedia.org/wiki/Cold_War" target="_self">cold war</a>&#0160;they had access to.</p>
<p>They introduced a revolutionary personal interface for human computer interaction reading your brain - But also interact with your brain to send imagery. No more needs of capture motion device, it reads what you want from your brain - no more keyboard, mouse, it detects what you want - no more screen, you don&#39;t see an images anymore, it is there in 3D.</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804b69f970b-pi"></a></p>
<p><img alt="Epoc" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3804b69f970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3804b69f970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Epoc" /></p>
<p>All this to tell you I lost couple of months of my life doing research on using &amp; programing these legacy devices like in my Kinect articles (<a href="http://around-the-corner.typepad.com/adn/2013/02/initial-fooling-around-with-kinect-and-maya.html" target="_self">Part 1</a>,&#0160;<a href="http://around-the-corner.typepad.com/adn/2013/02/using-the-microsoft-kinect-sdk-to-bring-a-basic-point-cloud-into-maya.html" target="_self">Part 2</a>) because they already all legacy devices now :(</p>
<p>Anyway,
I was really excited by all this until my boss came to me to say I had to
rewrite the complete Maya UI again- You can pre-order the device <a href="http://en.wikipedia.org/wiki/April_Fools&#39;_Day" target="_self">here</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: m
EMAIL: umcadop@gmail.com
IP: 147.47.123.126
URL: 
DATE: 04/08/2013 03:01:59 AM
you should check out the emotiv epoc eeg, which looks like your picture and has been around for a long time... so maybe the timeline you have is a bit off?
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building Qt, PyQt, PySide for Maya 2014 - Part 1 of 1
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: building-qt-pyqt-pyside-for-maya-2014-part-1-of-1
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/building-qt-pyqt-pyside-for-maya-2014-part-1-of-1.html 
DATE: 03/28/2013 04:10:40 AM
-----
BODY:
<p>This is an updated version of the Maya 2013 build instructions for PyQt and PySide (<a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html" target="_self">here</a>). The very good news is that with Maya 2014, there is no more need to build PySide as it is coming by default in Maya :) So unlike for Maya 2013, there won&#39;t be any Part 2 for PySide this time -</p>
<p>libxml, openSSL, OpenAL,&#0160;python2.7, qt-4.8.2-64, and tbb&#0160;are also coming by default in the Maya include and lib folder, so unless you have a very specific need, you would not need to rebuild any of those like before. Note as well that there is a &#39;C:\Program Files\Autodesk\Maya2014\support\opensource&#39; folder now which contains some of the community source.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi" style="display: inline;"><img alt="Build-headacke" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c320cc3ff970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a></p>
<h2>Building Qt</h2>
<p><strong><em>If you do not need another version of Qt than the one coming with Maya, skip that chapter !</em></strong></p>
<p>You don&#39;t really need to build Qt itself unless you need a home-modified version different than the one shipped with Maya. But if you decide to have your home-made Qt version, you will need to use the Maya modified version as a base to build your version. Many time people ask if they can upgrade the Maya Qt libs to newer version. The answer is unfortunately NO. You can modify and backport Qt fix into the Maya modified version, but unfortunately you need to use Qt 4.8.2 base for Maya 2014. Any other configuration will not be supported.</p>
<p> A copy of the customized Qt 4.8.2 source should be available on the Autodesk&#39;s Open Source web-site (<a href="http://www.autodesk.com/lgplsource" target="_self">http://www.autodesk.com/lgplsource</a>) and includes text files describing how to configure, build and install Qt for each platform supported by Maya. However, I am going to share my own scripts here to avoid you some headackes configuring your system.</p>
<p>You will also need to set up your environment accordingly to the API docs (Developer Resources &gt; API Guide &gt; Setting up your build environment in the Maya Documentation). And use the correct&#0160;<a href="http://docs.autodesk.com/MAYAUL/2014/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Compiler_Requirements.htm" target="_self">compilers</a>.</p>
<ul>
<li><a href="http://docs.autodesk.com/MAYAUL/2014/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Mac_OS_X_environment.htm" target="_self">Mac OS X environment</a></li>
<li><a href="http://docs.autodesk.com/MAYAUL/2014/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_environments_32bit_and_64bit.htm" target="_self">Linux environments (64 bit)</a></li>
<li><a href="http://docs.autodesk.com/MAYAUL/2014/ENU/Maya-API-Documentation/files/Setting_up_your_build_env_Windows_env_32bit_and_64bit.htm" target="_self">Windows environment (32‐bit and 64‐bit)</a></li>
</ul>
<p>Note here tha the Windows title is misleading - there is no 32-bit version of Maya 2014</p>
<p>And follow the instructions for building Qt coming from the following files included in qt-4.8.2-modified_for_maya_2014.zip (or in &#39;C:\Program Files\Autodesk\Maya2014\support\opensource\Qt&#39;):</p>
<ul>
<li>howToBuildQtOnMac_m2014.txt for MacOs</li>
<li>howToBuildQtOnLinux_m2014.txt for Linux x64</li>
<li>howToBuildQtOnWindows_m2014.txt for Windows win32 and x64</li>
</ul>
<p><span style="text-decoration: underline;">howToBuildQtOnMac_m2014.txt</span>&#0160;-&#0160;Let&#39;s start with&#0160;<strong><em>Mac</em></strong>. First, it is important to use the Snow Leopard 10.6 SDK, but if like me you already upgraded to the Mountain Lion version, you will need to modify the build configuration instructions to match your environment.&#0160;</p>
<p>If you do not do this, not only the Qt build will fail, but you would use the wrong SDK version. Other than this SDK issue, the instructions for building Qt on the Mac are ok.</p>
<p>Xcode 4.3.3 is the last version which includes the MacOSX10.6.sdk frameworkSDK. If you are using a newer version of Xcode, one will either need to copy the SDK from Xcode 4.3.3 or change the SDK used. Maya 2014 is built using the 10.6 SDK.</p>
<p>For the rest of the post, we will assume Qt is installed on&#0160;/Users/<em>myHomeDir</em>/qt-4.8.2</p>
<p><span style="text-decoration: underline;">howToBuildQtOnLinux_m2014.txt</span>&#0160;-&#0160;<strong><em>Linux</em></strong>&#0160;is another story. Not only Linux exists on many different distributions, but all the tools / libraries you need aren&#39;t necessarily present on your distribution. The Maya documentation is telling you all you need to know in case the machine is setup as a developer machine already with all the GCC, Qt, Maya requirements present.</p>
<p>The first thing described in the Maya 2014 documentation for building on Linux is that you need the GCC 4.1.2 compiler. See&#0160;<a href="http://docs.autodesk.com/MAYAUL/2014/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_compiler_requirement.htm" target="_self">here</a>. While the Maya documentation is saying all you need to build GCC, there are few things which aren&#39;t mentioned which can cause you problems if you aren&#39;t familiar with Linux.</p>
<p>First&#0160;<a href="http://gcc.gnu.org/install/" target="_self">compiling GCC</a>&#0160;has some&#0160;<a href="http://gcc.gnu.org/install/prerequisites.html" target="_self">prerequisites</a>&#0160;which require you to install couple of packages. If you unsure of what you are doing, the simplest would be to log as superuser and install this two group packages. Probably more than what you strictly need, but an easy way to get it right :)</p>
<p>yum groupinstall &quot;Developer Tools&quot;<br />yum groupinstall &quot;Developer Libraries&quot;</p>
<p>While we are at yum&#39;ing, you will also need 2 other packages for building Qt, so let&#39;s do it now</p>
<p>yum install glibc-devel.i686<br />yum install libXext-devel</p>
<p>Now, while you build GCC, you may got an error about MAKEINFO not present on your machine even if it is installed properly. In that case, the simplest is to go in the gcc-build directory and edit the Makefile file in &#39;vi&#39; or any text editor. Search for MAKEINFO in that file, and a replace the long line with missing information&#0160;by:</p>
<p>MAKEINFO = /usr/bin/makeinfo</p>
<p>After that follow the instructions, everything should be ok from there.</p>
<p>For the rest of the post, we will assume Qt is installed on&#0160;/usr/local/Trolltech/Qt‐4.8.2</p>
<p><span style="text-decoration: underline;">howToBuildQtOnWindows_m2014.txt</span>&#0160;-&#0160;While for&#0160;<strong><em>Windows</em></strong>&#0160;everything looks straight forward, I mean the only important thing is to have Visual Studio 2010 Service Pack 1 (or the Visual C++ Express 2010 Edition with Service Pack 1), it is not entirely true.</p>
<p>Linux and Mac instructions just tell you to install openssl or verify it is present on your machine. For Windows, the instructions to build Qt mention that you need to download a file named openssl-1.0.1c.zip - but no mention where that file is, and why it is needed. No worries, it is now distributed in Maya include and lib folder and already compiled for you, and the sources are in &#39;C:\Program Files\Autodesk\Maya2014\support\opensource\OpenSSL&#39;.</p>
<p>As a side note, I also wanted to mention that I did not use the JOM tools as specified in the instructions to avoid to use the Nokia Qt SDK, but instead stick using nmake. Making use of JOM speed up the build process, but this is extra few steps which aren&#39;t really needed. You can find JOM&#0160;<a href="ftp://ftp.qt.nokia.com/jom/" target="_self">here</a>&#0160;as well in case you want. In any case, the Windows instructions make mention of a 2010.05 version, but the URL mentioned in the document does not work. Visit&#0160;<a href="http://qt.digia.com/Product/Qt-SDK/">http://qt.digia.com/Product/Qt-SDK/</a>&#0160;for more details if you interested using it. I did not,</p>
<p>Now that we decided not to use JOM but nmake and that we know that the OpenSSL modified source are shipped with the Maya distribution, you can follow the instructions in the document and skip the ones which make reference to either both of JOM and OpenSSL. Note the documentation does not say to install Qt like for the Mac and Linux intructions, so do not forget that step by doing a &#39;nmake install&#39; at the end of the build. Otherwise you&#39;ll get error in the PyQt build.</p>
<p>For the rest of the post, we will assume Qt is installed on c:\qt-adsk-4.8.2<br />(It is always a good idea to use a subst drive rather than c: but this is a detail)</p>
<h2>Building SIP and&#0160;PyQt</h2>
<p>Rather than duplicating the required modified instructions here and in the PDF document available&#0160;<a href="http://images.autodesk.com/adsk/files/pyqtmaya2014.pdf" target="_self">here</a>&#0160;on the Autodesk WEB site, I updated the instructions directly in the PDF document.</p>
<p>The Maya 2014 distribution includes qmake.exe in its bin folder (I.e.: &#39;C:\Program Files\Autodesk\Maya2014\bin&#39;), so delete or rename it while you rebuild PyQt or you&#39;ll get strange errors.</p>
<h2>My build scripts</h2>
<p><strong><span style="text-decoration: underline;">Windows</span></strong></p>
<pre>build All.bat&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;: Runs all the following scripts in order
build setup.bat&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;: Environment variables
build OpenSSL.bat   : Builds openssl, while we do not need to ;)
build Qt.bat            : Builds Qt, don&#39;t need that either for building PyQt
build SIP.bat&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;: Builds SIP - <span style="color: #c00000;">required</span> to build PyQt
build PyQt.bat         : Builds PyQt

openssl-1.01c     &#0160;&#0160;&#0160;&#0160;: Directory which contains OpenSSL source code
qt-adsk-4.8.2         : Directory which contains modified Qt source code
sip-4.14.5        &#0160;&#0160;&#0160;&#0160;&#0160;&#0160;: Directory which contains SIP source code
PyQt-win-gpl-4.10    : Directory which contains PyQt source code</pre>
<p>Assuming you have a directory &quot;e:\somewhere\mydirectory&quot;, and you have the scripts above in it with the subfolders listed above. You need to modify the <strong>&#39;build setup.bat&#39;</strong> and <strong>&#39;build OpenSSL.bat&#39;</strong> to reflect any of your local machine directories. Note that for OpenSSL you will need to install a Perl interpreter (see line #11 in &#39;build OpenSSL.bat&#39;)</p>
<p>If you just want PyQt, execute:<br />&#0160; build SIP.bat<br />&#0160; build PyQt.bat&#0160;</p>
<p>OSX</p>
<p>Linux</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: US, M&E and EMEA team meeting
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: emea-team-meeting
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/emea-team-meeting.html 
DATE: 03/27/2013 05:30:00 AM
-----
BODY:
<p>The last month was unfortunately a lot of travels, and I neglited the blog a bit - sorry for this - I&#39;ll try to do that better next year.</p>
<p>
I have been travelling in the USA and Canada for our annual team meetings, and reviews, etc... too much meetings for me to be honest, but required.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bb11a9970d-pi" style="display: inline;"><img alt="Goldengate" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bb11a9970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bb11a9970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Goldengate" /></a><br />Last week I spent my time in Brest and Le Conquet (<a href="http://br.wikipedia.org/wiki/Konk-Leon" target="_self">Konk Leon</a> in Breton) with the European team. Brest is the <a href="https://maps.google.com/maps?q=plougonvelin+France&amp;hl=fr&amp;ie=UTF8&amp;ll=48.318821,-4.522247&amp;spn=0.730576,1.263428&amp;sll=48.300553,-4.520874&amp;sspn=0.730837,1.263428&amp;t=h&amp;hnear=Plougonvelin,+Finist%C3%A8re,+Bretagne,+France&amp;z=10" target="_self">western-most</a> point of northern France, my home by adoption. The European guys were very nice to save me another trip away from home and indeed happy to visit Brittany once (might be their last time ;) as the weather is always exciting and challenging, but the views spectacular.
A quick rainfall in the east and simultaneous glorious evening sunlight from the west produced a beautiful double rainbow.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817ec98970b-pi" style="display: inline;"><img alt="2rainbows" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3817ec98970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817ec98970b-800wi" style="width: 350px; display: block; margin-left: auto; margin-right: auto;" title="2rainbows" /></a><em>Jeremy under a double rainbow</em></p>
<p>
We had a meeting room in a converted chapel with a view straight out onto the Atlantic.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bb171e970d-pi" style="display: inline;"><img alt="Brittany_weather" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bb171e970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bb171e970d-800wi" style="width: 250px; display: block; margin-left: auto; margin-right: auto;" title="Brittany_weather" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Using augmented reality to preview the output of Project Pinocchio
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: using-augmented-reality-to-preview-the-output-of-project-pinocchio
CATEGORY: Animation
CATEGORY: Augmented reality
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Modeling
CATEGORY: Reality capture

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/using-augmented-reality-to-preview-the-output-of-project-pinocchio.html 
DATE: 03/25/2013 06:36:28 AM
-----
BODY:
<p>A huge thanks to Kean Walmsley, who was previously working with me in the ADN group but now an AutoCAD API architect based in Neuchatel - Switzerland, and provide the original article for this post.</p>
<p><a href="http://projectpinocchio.autodesk.com/" target="_blank">Project Pinocchio</a> is available on <a href="http://labs.autodesk.com/" target="_blank">Autodesk Labs</a>. Project Pinocchio is an online character generator that helps you&#0160;<em>“create, customize, and download your very own rigged 3D characters from a catalog of over 100 body types, outfits, hairstyles, and physical attributes in a few simple steps.”</em></p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bab9e1970d-pi" style="display: inline;"><img alt="Login" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bab9e1970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bab9e1970d-800wi" title="Login" /></a></p>
<p>Once you’ve signed in, it’s a simple process to create a character. You start by choosing your ancestor:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9babef5970d-pi" style="display: inline;"><img alt="Pinocchio1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9babef5970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9babef5970d-800wi" title="Pinocchio1" /></a><br />And you then work through and choose between various physical and clothing options… (I’ve used the “Edit” option on an existing character to go back through the options I’ve already chosen which is why the various pages are pre-populated).</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d4246c7ba970c-pi" style="display: inline;"><img alt="Pinocchio2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d4246c7ba970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d4246c7ba970c-800wi" title="Pinocchio2" /></a></p>
<p>Once all has been set up as you’d like, it’s time to publish. Project Pinocchio exports to .MB and .FBX formats. We want to get to .OBJ to load inside PointCloud Browser, so we’ll go for .FBX and make use of&#0160;<a href="http://usa.autodesk.com/adsk/servlet/pc/item?siteID=123112&amp;id=10775855" target="_blank">a converter to get to .OBJ</a>.</p>
<p>Here are the export options I chose:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38179cb9970b-pi" style="display: inline;"><img alt="Pinocchio3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c38179cb9970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38179cb9970b-800wi" title="Pinocchio3" /></a><br />Conversion to .OBJ is straightforward via the FBX converter tool for Mac or Windows:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38179d7a970b-pi" style="display: inline;"><img alt="Pinocchio_fbx" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c38179d7a970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c38179d7a970b-800wi" title="Pinocchio_fbx" /></a></p>
<p>Now we have an .OBJ it needs to be hosted on a web-server along with the .MTL material definition file and the corresponding texture map. One quirk I found: the version of PointCloud Browser I used crashed with a .JPG texture map, so I converted it to .PNG and adjusted the .MTL (which is a simple text format) to point to that, instead.</p>
<p>Here’s the texture map extracted from the .FBX by the conversion process (and if you think this looks freaky, try exporting without clothes: it looks&#0160;<em>really</em>&#0160;<a href="http://en.wikipedia.org/wiki/The_Silence_of_the_Lambs_(film)" target="_blank">Silence of the Lambs</a>):</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bacb39970d-pi" style="display: inline;"><img alt="Pinocchio4" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bacb39970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bacb39970d-800wi" title="Pinocchio4" /></a></p>
<p>Converting to PNG stopped the crash but didn’t result in the material being applied properly, so we still get something that isn’t completely satisfactory (see below for the results). Without being able to debug or run diagnostics on the PointCloud Browser tool, it’s hard to tell whether the material is now just being ignored because it’s not a .JPG. I’ve posted&#0160;<a href="http://forum.pointcloud.io/discussion/111/viewing-textured-meshes-from-obj-files-in-pointcloud-browser" target="_blank">a question</a>&#0160;on the PointCloud Browser forum, to see whether I’m missing something obvious (quite likely).</p>
<p>Here is&#0160;the slightly updated HTML page&#0160;that will display the Project Pinocchio-generated mesh inside a PointCloud Browser scene:</p>
<pre class="brush: html; toolbar: false;">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Project Pinocchio Preview&lt;/title&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0&quot; /&gt;
    &lt;meta name=&quot;viper-init-options&quot; content=&quot;manual&quot; /&gt;
    &lt;link
      rel=&quot;viper-app-icon&quot; type=&quot;images/png&quot;
      href=&quot;resources/images/appicon.jpg&quot; /&gt;
    &lt;script type=&quot;text/xml&quot; id=&quot;scene&quot;&gt;
      &lt;scene base=&quot;relative-baseplane&quot;&gt;
        &lt;light id=&quot;main_light&quot;
          intensity=&quot;1.0&quot;
          fade=&quot;constant&quot;
          ambient=&quot;0.2, 0.2, 0.2, 0.2&quot;
          diffuse=&quot;1.0, 1.0, 1.0, 1.0&quot;
          specular=&quot;1.0, 1.2, 1.2, 1.0&quot;
          position=&quot;3, 0.5, 2, 0&quot; /&gt;
        &lt;node
          id=&quot;character_node&quot;
          position=&quot;0, 0, 0&quot;
          rotation=&quot;90, 270, 0&quot;
          scale=&quot;0.04&quot;
          static=&quot;true&quot;&gt;
          &lt;model src=&quot;Sixth_Attempt.obj&quot; id=&quot;character_model&quot; /&gt;
        &lt;/node&gt;
      &lt;/scene&gt;
    &lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
      function onAppLoaded() {
        viper.requireRealityMap();
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body/&gt;
&lt;/html&gt;
</pre>
<p>&#0160;And here&#39;s what we get when loaded inside the PointCloud Browser iOS app:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bad2f7970d-popup" onclick="window.open( this.href, &#39;_blank&#39;, &#39;width=640,height=480,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0&#39; ); return false" style="float: left;"><img alt="Pinocchio5" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bad2f7970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bad2f7970d-800wi" style="width: 154px; margin: 0px 5px 5px 0px;" title="Pinocchio5" /></a>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bad7e7970d-popup" onclick="window.open( this.href, &#39;_blank&#39;, &#39;width=640,height=480,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0&#39; ); return false" style="float: left;"><img alt="Pinocchio6" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9bad7e7970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9bad7e7970d-200wi" style="width: 154px; margin: 0px 5px 5px 0px;" title="Pinocchio6" />
</a><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817b105970b-popup" onclick="window.open( this.href, &#39;_blank&#39;, &#39;width=640,height=480,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0&#39; ); return false" style="float: left;"><img alt="Pinocchio7" class="asset  asset-image at-xid-6a0163057a21c8970d017c3817b105970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817b105970b-200wi" style="width: 154px; margin: 0px 5px 5px 0px;" title="Pinocchio7" /></a></p>
<p style="clear: both;">&#0160;</p>
<p>Without a material being applied, the results look a little like a cross between Gandhi and&#0160;<a href="http://en.wikipedia.org/wiki/T-1000" target="_blank">the T-1000 from Terminator 2</a>. Hopefully I’ll find out if there’s some way to get the material applied properly, at which point I’ll post an update.</p>
<p><strong><em>Update:</em></strong></p>
<p>I tried this again in the office, this morning, after changing the texture from .TGA to .PNG (after switching from the original .JPG). And it worked! I’m not sure whether the change I made was the difference or not – because I’m 90% certain I’d tried that, previously – but anyway.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817bea4970b-pi" style="display: inline;"><img alt="Pinocchio8" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3817bea4970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3817bea4970b-800wi" title="Pinocchio8" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Possible Misuse of MScriptUtil in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: possible-misuse-of-mscriptutil-in-maya
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/possible-misuse-of-mscriptutil-in-maya.html 
DATE: 03/22/2013 04:39:13 AM
-----
BODY:
<p>Many of Maya&#39;s C++ API methods require that one or more of their parameters be passed as pointers or references. Their return values, too, can be pointers or references.</p>
<p>In Python parameters of class types are passed by reference but parameters of simple types, like integers and floats, are passed by value, making it impossible to call those API methods from Python as Maya the Python API was mainly generated automatically using Swig (let&#39;s call it Python 1.0). The <a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/class_m_script_util.html" title="Utility class for working with pointers and references in Python.">MScriptUtil</a>&#0160;class bridges this gap by providing methods which return pointers to values of simple types and which can extract values from such pointers. These pointers can also be used wherever an API method requires a reference to a simple type or an array of a simple type.</p>
<p>For example,&#0160;<a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/class_m_transformation_matrix.html#a4b5db5c3abe827a9e7c8b549893ff9e4" title="Set the shear component of the transformation matrix.">MTransformationMatrix::setShear()</a>&#0160;requires as its first parameter an array of three values of simple type &#39;double&#39;. To call setShear() from Python requires using&#0160;<a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/class_m_script_util.html" title="Utility class for working with pointers and references in Python.">MScriptUtil</a>&#0160;to create the array of doubles.</p>
<p>But because of its design, MScriptUtil is very easy to misuse and doing so can lead 
to errors and crashes in Maya. There are three main ways in which MScriptUtil is 
misused:&#0160;</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9a55018970d-pi" style="display: inline;"><img alt="Misuse" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9a55018970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9a55018970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Misuse" /></a></p>
<ol>
<li>Failing to initialize an MScriptUtil object&#39;s internal 
storage to the correct size.<br /><br />If you create an MScriptUtil object using 
the default constructor, e.g:<br />
<pre class="brush: python; toolbar: false;">su = OpenMaya.MScriptUtil()</pre>
<br />the object will have no internal storage allocated. If you subsequently 
attempt to get a pointer to its internal storage, e.g:<br />
<pre class="brush: python; toolbar: false;">ptr = su.asIntPtr()</pre>
<br />you will be getting back a pointer to a zero-sized memory 
block, which is not capable of holding anything and will likely crash if you 
attempt to use it.<br /><br />You must first ensure that the MScriptUtil object&#39;s 
internal storage is set for the number of elements you need. You can do this by 
either supplying initial values to the constructor:<br />
<pre class="brush: python; toolbar: false;">su = OpenMaya.MScriptUtil(1, 2) # Allocates storage for 2 elements.</pre>
<br />or 
calling one of the &#39;create&#39; methods:<br />
<pre class="brush: python; toolbar: false;">su = OpenMaya.MScriptUtil()
su.createFromInt(1, 2) # Allocates storage for 2 elements.
su.createFromDouble(5.7) # Allocates storage for 1 element.
su.createFromList([6, 12, -5, 9, 11]) # Allocates storage for 5 elements.</pre>
</li>
<li>Using an MScriptUtil pointer after its corresponding 
MScriptUtil object has been destroyed.<br />This most commonly manifests 
itself in the following way:<br />
<pre class="brush: python; toolbar: false;">ptr = OpenMaya.MScriptUtil(0).asIntPtr()
... go on to use ptr ...</pre>
<br />All 
of the as*Ptr() methods of MScriptUtil return pointers to storage internal to 
the MScriptUtil object. If the object is destroyed then the pointers become 
invalid and any attempt to use them will result in errors or crashes. In the 
example above the MScriptUtil object generated by the OpenMaya.MScriptUtil(0) 
call is destroyed as soon as the asIntPtr() has returned, so &#39;ptr&#39; will be 
invalid.<br /><br />To make this work properly, you must hang on to the MScriptUtil 
object until you no longer need its pointer:<br />
<pre class="brush: python; toolbar: false;">su = OpenMaya.MScriptUtil(0)
ptr = su.asIntPtr()
... go on to use ptr ...</pre>
</li>
<li>Using the same MScriptUtil object for multiple simultaneous 
pointers.<br />Each MScriptUtil object only contains a single block of 
storage. All calls to as*Ptr() will return pointers to the same block of 
storage. So if you do something like this:<br />
<pre class="brush: python; toolbar: false;">su = om.MScriptUtil(0.0)
xptr = su.asFloatPtr()
yptr = su.asFloatPtr()
zptr = su.asFloatPtr()
OpenMaya.MSomething.someFunc(xptr, yptr, zptr)</pre>
<br />it will either crash or you&#39;ll find that all three pointers point to the 
same value after the call.<br /><br />To make this work you must create a separate 
MScriptUtil object for each pointer:<br />
<pre class="brush: python; toolbar: false;">xsu = om.MScriptUtil(0.0)
xptr = xsu.asFloatPtr()
ysu = OpenMaya.MScriptUtil(0.0)
yptr = ysu.asFloatPtr()
zsu = OpenMaya.MScriptUtil(0.0)
zptr = zsu.asFloatPtr()
OpenMaya.MSomething.someFunc(xptr, yptr, zptr)</pre>
<br />Note that it is fine to reuse an MScriptUtil object for a new 
pointer so long as you no longer need the old pointer. E.g:<br />
<pre class="brush: python; toolbar: false;">su = om.MScriptUtil(0.0)
distPtr = su.asFloatPtr()
OpenMaya.MSomething.getDist(distPtr)
dist = su.getFloat(distPtr)
countPtr = su.asIntPtr()
OpenMaya.MSomething.getCount(countPtr)
count = su.getInt(countPtr)</pre>
</li>
</ol>
<h3>The good news</h3>
<p>The good news is that there is a second version of the Maya Python API (Python 2.0) which is better written and will get rid of the MScriptUtil class.</p>
<p>The Maya Python API 2.0 is a new version of the Maya Python API which provides a more Pythonic workflow and improved performance. Both the new and old APIs can co-exist in the same script but objects from the two different APIs cannot be used interchangeably.</p>
<p>The Python API 2.0 has a number of advantages over the original API:</p>
<ul>
<li>Array types are full Python sequences, including slice support.</li>
<li>Methods which take Maya array parameters will usually also take native Python sequences, such as arrays and tuples. Exceptions are made in some case for performance reasons.</li>
<li>The outputs of methods are usually returned in their return values, not through their parameter lists. Exceptions are made in some cases for performance reasons.</li>
<li>Methods which return multiple values (e.g. MFnFluid.getResolution) return them as a tuple or list, eliminating the need for MScriptUtil.</li>
<li>Object attributes are preferred over rather than set/get methods. For example you can now write <em>array.sizeIncrement=64</em>.</li>
<li>There are more types of exceptions used when methods fail. Not everything is a RuntimeError, as was the case in the old API.</li>
<li>The new API is generally faster than the old. Up to three times faster in some cases.</li>
</ul>
<h3>Using the Python API 2.0</h3>
<p>The new Python API modules are found in <em>maya.api</em>. For example:</p>
<pre class="brush: python; toolbar: false;">import maya.api.OpenMaya as om
</pre>
<p>Module names are the same as in the old API with the exception that the proxy classes (i.e. those beginning with <em>MPx</em>) no longer have their own module but reside in the same modules as other related classes. This more closely resembles the C++ API.</p>
<p>Class names are the same as in the old Python API and the C++ API. Method names are mostly the same with some differences where it affects the workflow. Some methods which simply get or set values on an object have been replaced with Python object attributes.</p>
<p>New and old API classes can be used within the same script, but their objects are not interchangeable. Thus, you can do this:</p>
<pre class="brush: python; toolbar: false;">import maya.api.OpenMaya as newOM
import maya.OpenMaya as oldOM

newAttrObj = newOM.MObject()
oldNodeObj = oldOM.MObject()
...
newAttrFn = newOM.MFnAttribute(newAttrObj)
oldNodeFn = oldOM.MFnDependencyNode(oldNodeObj)

# OKAY: Print names from old and new function sets.
print(&quot;Attribute name is %s.%s&quot; % (oldNodeFn.name(), newAttrFn.name))
</pre>
<p>but not this:</p>
<pre class="brush: python; toolbar: false;">import maya.api.OpenMaya as newOM
import maya.OpenMaya as oldOM

newAttrObj = newOM.MObject()
oldNodeObj = oldOM.MObject()
...

# BAD: Passing an old API MObject to a new API method.
newPlug = newOM.MPlug(oldNodeObj, newAttrObj)
</pre>
<p>Given that the class and method names are mostly identical between the two APIs there is a lot of potential for confusion so it&#39;s best not to mix them if you can avoid it.</p>
<p>When writing a plugin which uses the new API, the plugin must define a function called <em>maya_useNewAPI</em> so that Maya will know to pass it objects from the new API rather than the old one. E.g:</p>
<pre class="brush: python; toolbar: false;">def maya_useNewAPI():
    pass
</pre>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9a567cb970d-pi" style="display: inline;"><img alt="Feedback" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee9a567cb970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee9a567cb970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Feedback" /></a>
<p>We encourage users to provide feedback on this new Python API through the online Suggestion site available from the Maya Help Menu and through the Autodesk Developer Network.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Overriding Python sys.excepthook doesn't work in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: my-entry
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/03/my-entry.html 
DATE: 03/15/2013 06:13:01 AM
-----
BODY:
<p>If you override the Python sys.excepthook, it doesn&#39;t seem to get called on uncaught exceptions in Maya.</p>
<p>This is because it is not possible to override sys.excepthook directly as Maya already does that internally. However, since Maya 2011, there is a solution which will allow you to add your own exception hook. To perform an action when an exception occurs without modifying Maya&#39;s default printing of exceptions, do the following:
</p>
<pre class="brush: python; toolbar: false;">import maya.utils

def myExceptCB(etype, value, tb, detail=2):

    # do something here...

    print &quot;do something here...&quot;

    return maya.utils._formatGuiException(etype, value, tb, detail)

maya.utils.formatGuiException = myExceptCB
</pre>
<p>For older Maya releases, you would have to hack the file &#39;python.py&#39; in the Maya installation. There is a function &#39;formatException&#39; that you could change to do something when an exception happens.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Using FBX SDK to make animated user properties that are compatible with 3ds Max
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: using-fbx-sdk-to-make-animated-user-properties-that-are-compatible-with-3ds-max
CATEGORY: 3ds Max
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: MotionBuilder

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/using-fbx-sdk-to-make-animated-user-properties-that-are-compatible-with-3ds-max.html 
DATE: 02/27/2013 11:59:01 AM
-----
BODY:
<p>A huge thanks to&#0160;Kevin Vandecar, who supports both FBX and 3ds Max in the ADN M&amp;E team working with me, and provide the original article for this post.</p>
<p>This is a topic coming from one of our FBX SDK customers recently. Basically the animated properties were coming into MotionBuilder correctly, and after being exported from MotionBuilder would also come into 3ds Max properly. However, when coming directly into 3ds Max, the properties were not visible.</p>
<p>First, note that there is an issue identified in the 3ds Max FBX importer that can cause problems when the properties are named with uppercase letters. This is because MAXScript is not case sensitive, and so it cannot resolve those properly during the import process. Normally you should use lower case names to ensure compatibility with 3ds Max.</p>
<p>Next, in order for the animation to be brought in completely, you typically need to have a single animation stack (or “take”) that contains the animation curves. In order for the curve and the animation itself to be reflected in 3ds Max, you must also set the minimum and maximum values. Here is some simple sample code showing an animated double property.
</p>
<pre class="brush: cpp; toolbar: false;">// ...

// First create an FbxMarker to attach the user property to...
FbxNode* nodeMarker= ADN_FBXCreateMarker(scene, &quot;adn_marker&quot;, 10.f, root, FbxMarker::eSphere, FbxColor(255,255,0));

// Setup the animation stack...
FbxAnimStack* animStack = FbxAnimStack::Create(scene, &quot;take 001&quot;);

// Then create and attach the animated property...
AddAnimatedUserProperty(nodeMarker, animStack);
    
// ...

// where, AddAnimatedUserProperty is defined as:
void AddAnimatedUserProperty(FbxNode* node, FbxAnimStack* animStack)
{
    // create a new animation layer for this sequence.
    FbxAnimLayer* animBaseLayer	= FbxAnimLayer::Create(node-&gt;GetScene(), &quot;Anim Cut Layer&quot;);
	animStack-&gt;AddMember(animBaseLayer);

    // Create the property attached to the node.
    FbxProperty	prop = FbxProperty::Create(node, FbxDoubleDT, &quot;adn_double&quot;, &quot;ADN Double Property&quot;);

    // Setup the property
	if(prop.IsValid())
	{
        // Set intial value
		prop.Set(0.0);
        // Set approriate flags (it&#39;s a suer property and also will be animatable.
		prop.ModifyFlag(FbxPropertyAttr::eUser, true);
		prop.ModifyFlag(FbxPropertyAttr::eAnimatable, true);
        // Create the curve
		prop.CreateCurveNode(animBaseLayer);
        // Set the min and maximum values (needed for 3ds Max.)
        prop.SetMinLimit(-2.0);
        prop.SetMaxLimit(2.0);

        // Go back and obtain the curve... This could have been done above from create, but to show how to get it after it exists.
		FbxAnimCurve* fcurve = prop.GetCurve(animBaseLayer, &quot;adn_double&quot;, true);
		if (fcurve)
		{
            // setup the animated values...
			FbxTime time;
			int lKeyIndex = 0;

            // Start the key sequence
			fcurve-&gt;KeyModifyBegin();
			float f = 1.0;
            // Set the animated values
			for(int frame=0; frame &lt; 100; frame++)
			{
				time.SetFrame(frame);
				lKeyIndex = fcurve-&gt;KeyAdd(time);
				if (frame % 2)
					f+=.01f;
				else
					f-=.02f;
				fcurve-&gt;KeySet(lKeyIndex, time, f, FbxAnimCurveDef::eInterpolationCubic);
			}
            // end the key sequence
			fcurve-&gt;KeyModifyEnd();
		}
	}
}

</pre>
<p>As is usual, this is sample code so make sure to put in proper error checking, and test as appropriate in the context of your application.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Importing Python scripts from a different path than predefined ones
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: importing-python-scripts-from-a-different-path-than-predefined-ones
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/importing-python-scripts-from-a-different-path-than-predefined-ones.html 
DATE: 02/22/2013 02:33:48 AM
-----
BODY:
<p>This post applies to Maya, but MotionBuilder as well (or any Python based application).</p>
<p>The other day I wanted to source a Python script into Maya and he took me few minutes to realize there was no easy/automatic way to do this in Maya other than loading the script into the Maya Script editor and run it unlike with MEL and the source command where you can give the full path name of the MEL script.</p>
<p>Fine, but I wanted to do it from an application. Why that? I usually reply to that question why not ;)<br />No seriously, imagine you got Maya already running, you download a script, you got the choice to copy it to one of the Maya user&#39; profile &#39;scripts&#39; folders, and then using MEL, or C++ source the Python script using import. But what if you put the script somewhere else?</p>
<p>I first thought, well that is easy - all Python needs is to have the PYTHONPATH setup properly, and MEL gives us an easy way to change it. Something along this lines:</p>
<pre class="brush: cpp; toolbar: false;">{
	string $py =`getenv PYTHONPATH` ;
	string $me =&quot;/MyPath/scripts&quot; ;
	string $test =`match $me $py` ;
	if ( $test == &quot;&quot; ) {
		if ( `about -nt` ) {
			$py +=&quot;;&quot; + $me ;
		} else {
			$py +=&quot;:&quot; + $me ;
		}
		putenv PYTHONPATH $py ;
	}
}
</pre>
<p>The code is between {} to avoid global namespace clashing, but the getenv/putenv approach does not work, when you do a &#39;import myscript&#39; you&#39;ll get an error like this:</p>
<p>&#0160; &#0160; # Error: line 1: ImportError: file &lt;maya console&gt; line 1: No module named myscript #&#0160;</p>
<p>But if you read the Python documentation, that is supposed to work :(</p>
<p>The trick is that, maybe MEL updates the PYTHONPATH, but the Python engine did not saw the change. If you now run this code:</p>
<pre class="brush: python; toolbar: false;">import sys
for item in sys.path:
    print item
</pre>
<p>You won&#39;t see your new path, and this is why it does not work. So instead of doing the pure MEL code, you need to do it from Python, but then this is &#39;<a href="http://en.wikipedia.org/wiki/Chicken_or_the_egg" target="_self">The chicken or the egg causality dilemma</a>&#39; since to do it from Python we need to load our python script :(</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d41365782970c-pi" style="display: inline;"><img alt="Chicken_egg_dilema" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d41365782970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d41365782970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Chicken_egg_dilema" /></a></p>
<p>Again MEL comes to the rescue, and you can run this code instead:</p>
<pre class="brush: cpp; toolbar: false;">{
	string $me =&quot;/MyPath/scripts&quot; ;
	python (&quot;import sys&quot;) ;
	string $py[] =python (&quot;sys.path&quot;) ;
	if ( stringArrayCount ($me, $py) == 0 )
		python (&quot;sys.path.insert(0, &#39;&quot; + $me + &quot;&#39;)&quot;) ;
}
</pre>
<p>And next time you do &#39;import myscript&#39;, that will work just fine.</p>
<p>From that we could easily create a command to temporary add a path, source the python script into the Python engine as Python will never load again the script once it is loaded, even if you &#39;import&#39; it again. In Maya you need to use &#39;reload&#39; or &#39;force&#39; in Python.</p>
<p><strong>For the anecdote</strong>, we now have a scientific proof from genetic studies, that the egg was first %\</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Viktoras Makauskas
EMAIL: viktoras@neglostyti.com
IP: 78.63.216.185
URL: http://www.ngskintools.com
DATE: 02/25/2013 02:07:56 PM
Just curious - why did you went through all the MEL trouble when it's just "import sys; sys.path.append(r'/MyPath/scripts')" in a Python tab? 
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 8.19.13.73
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 02/26/2013 09:34:12 AM
Hi Viktoras

You're absolutely right, if you got a change to put that code in a button, menu, shelves - you do not need that. But if you are in C++ (without using Python C++ libs), .NET, then you're locked.   The are other situation where you would need this too, and I'll explain in more details in a future post.

-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Adding color to the Kinect Point cloud
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adding-color-to-the-kinect-point-cloud
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Kinect
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/adding-color-to-the-kinect-point-cloud.html 
DATE: 02/21/2013 11:30:00 PM
-----
BODY:
In the last post we created&#0160;
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Using the Microsoft Kinect SDK to bring a basic point cloud into Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: using-the-microsoft-kinect-sdk-to-bring-a-basic-point-cloud-into-maya
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Kinect
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/using-the-microsoft-kinect-sdk-to-bring-a-basic-point-cloud-into-maya.html 
DATE: 02/20/2013 01:34:02 AM
-----
BODY:
<p>Today’s post presents a very basic implementation of a point cloud – essentially equivalent to the code in&#0160;<a href="http://around-the-corner.typepad.com/adn/2013/02/initial-fooling-around-with-kinect-and-maya.html" target="_blank">this previous post</a>&#0160;– which makes use of the Microsoft Kinect SDK to bring the Kinect color image on a Maya image plan live. While for an image it was pretty straight forward to take the Kinect color image and use the Maya API MImage class to read that image. This time we are interested to get the depth information out of the Kinect sensor.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d412c946d970c-pi" style="display: inline;"><img alt="Depthmap" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d412c946d970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d412c946d970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Depthmap" /></a><br />The Kinect SDK provides a function – NuiTransformDepthImageToSkeleton() – which does everything for you. It transforms the image X, Y coordinates from the Depth image into space coordinates X, Y, Z. Nothing terrible for us to implement excepted the documentation is wrong telling to left shift the depth parameter by 3 bits ( see the comment in the code below ).&#0160;</p>
<p>No the real issue for us is to get it displayed into Maya properly. There is few options and as an exercise, we will play with all during this Kinect journey:</p>
<ol>
<li>the first one is to create a Maya locator: it has the advantage to be easy to implement, but does not render, nor to be very fast as you will need to redraw the locator very frequently.</li>
<li>use the Maya particle system (dynamics or nDynamics): this one sounds promising, but after a certain number of particles, there might be some limits which will impact Maya performance again. But it has the advantage to render as well as being standard to Maya.</li>
<li>use a specialized plug-in for point cloud like the AliceLabs Maya point cloud plug-in.</li>
</ol>
<p>Here is the Point Cloud acquisition code</p>
<pre class="brush: cpp; toolbar: false;">MPointArray &amp;KinectLocator::getPointCloud () {
	MPlug depthImageData (thisMObject (), KinectLocator::aDepthImageData) ;
	MPlug sizeData (thisMObject (), KinectLocator::size) ;

	int depthAddr =depthImageData.asInt () ;
	float multiplier =sizeData.asFloat () ;
	if ( depthAddr == 0 )
		return (mVertices) ;
	mVertices.clear () ;

	IFTImage *pDepthImage =(IFTImage *)depthAddr ;
	unsigned int depthWidth =pDepthImage-&gt;GetWidth (), depthHeight =pDepthImage-&gt;GetHeight () ;
	// Loop through the depth information
	USHORT *depthData =(USHORT *)pDepthImage-&gt;GetBuffer () ;
	for ( int y =0 ; y &lt; depthHeight ; y++ ) {
		for ( int x =0 ; x &lt; depthWidth ; x++, depthData++ ) {
			//usDepthValue
			//  Type: USHORT
			//  [in] The depth value in millimeters of the depth image pixel, shifted left by three bits. 
			//  The left shift enables you to pass the value from the depth image directly into this function.
			//
			//  http://social.msdn.microsoft.com/Forums/br/kinectsdknuiapi/thread/a657e563-b240-46e2-827d-02712b14ebc1
			//  You should pass the 16-bit value exactly as it appears in the depth frame, *without* applying a shift.
			//  d will be a short integer representing the distance in millimeters; s_z will be a float representing the
			//  same distance in meters. So if d is 1500, then s_z should be 1.5f.
			Vector4 realPoints ;
			if ( depthWidth == 320 )
				realPoints =NuiTransformDepthImageToSkeleton (x, y, *depthData) ;
			else if ( depthWidth == 640 )
				realPoints =NuiTransformDepthImageToSkeleton (x, y, *depthData, NUI_IMAGE_RESOLUTION_640x480) ;
			MPoint pt (realPoints.x * multiplier, realPoints.y * multiplier, realPoints.z * multiplier) ;
			mVertices.append (pt) ;
		}
	}
	return (mVertices) ;
}
</pre>
<p>Once you get the point array, you can displays these point in Maya .Based on the LocatorLib code from the <a href="http://labs.autodesk.com/utilities/ADN_plugins/catalog/" target="_self">Plug-in of the Month</a> available on <a href="http://labs.autodesk.com/utilities/ADN_plugins" target="_self">Autodesk Labs</a>, you modify the MPxLocatorNode::draw (M3dView &amp;view, const MDagPath &amp;path, M3dView::DisplayStyle style, M3dView::DisplayStatus status) method (or&#0160;myWireFrameDraw () /&#0160;myShadedDraw () methods in that sample) like below and you are done.</p>
<pre class="brush: cpp; toolbar: false;">void KinectLocator::myWireFrameDraw () {
	MPointArray vertices =getPointCloud () ;
	glPointSize (2) ;
	glBegin (GL_POINTS) ;
	for ( int i =0 ; i &lt; vertices.length () ; i++ ) {
		glVertex3f (vertices [i].x, vertices [i].y, vertices [i].z) ;
	}
	glEnd () ;
}
</pre>
<p>Here is finally the results:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d412c8bb9970c-pi" style="display: inline;"><img alt="Kinect_depth1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d412c8bb9970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d412c8bb9970c-800wi" style="width: 450px; display: block; margin-left: auto; margin-right: auto;" title="Kinect_depth1" /></a></p>
<p>and from a different Camera angle:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36fd32f9970b-pi" style="display: inline;"><img alt="Kinect_depth2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c36fd32f9970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36fd32f9970b-800wi" style="width: 450px; display: block; margin-left: auto; margin-right: auto;" title="Kinect_depth2" /></a><br />The data is still coming live from the Kinect Sensor via the&#0160;KinectDeviceNode node implemented in the previous post</p>
<p>Now I need to start looking at interpreting gestures, to see what can be done to supplement AutoCAD’s existing user interface features. Fun fun fun! :-)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: 123D Creature
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: 123d-creature
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: iOS
CATEGORY: Modeling
CATEGORY: Mudbox

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/123d-creature.html 
DATE: 02/14/2013 06:46:09 AM
-----
BODY:
<p>123D Creature is a creative modeling App that lets you build, sculpt, paint, render and 3D print original 3D characters directly on your iPad.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36dfde3d970b-pi" style="display: inline;"><img alt="123Creature" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c36dfde3d970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36dfde3d970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="123Creature" /></a><br />You can check out a teaser video on YouTube <a href="http://www.youtube.com/watch?v=t5gAkoGE6hs&amp;feature=youtu.be" target="_self">here</a></p>
<p>
App Store page with features and additional images <a href="https://itunes.apple.com/app/123d-creature/id594014056" target="_self">here</a></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Initial fooling around with Kinect and Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: initial-fooling-around-with-kinect-and-maya
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Kinect
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/initial-fooling-around-with-kinect-and-maya.html 
DATE: 02/07/2013 10:01:43 AM
-----
BODY:
<p>In a previous post, we talked about the Maya device API and mentioned I may try and write a device plug-in for the Kinect. There is few things I want to try with the Kinect:</p>
<ol>
<li>Some simple model capture using the Kinect’s RGB-D camera</li>
<li>Generate a point cloud&#0160;</li>
<li>Simple gesture-based control</li>
<li>And finally using the latest Kinect Fusion SDK create object meshes</li>
</ol>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36aba71a970b-pi" style="display: inline;"><img alt="Kinect" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c36aba71a970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c36aba71a970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Kinect" /></a>The first seemed a fun approach to test out the Kinect interface, although ultimately the currently-available precision (the resolution has apparently been limited to 640 x 480 to keep the processing snappy) would probably not prove usable for any real-world model capture.</p>
<p>So, for this first try we will do a live feed from the Kinect sensor to display dynamically inside Maya. In order to do that we will use the <a href="http://around-the-corner.typepad.com/adn/2012/12/maya-device-api.html" target="_self">Maya Device</a> API, and display the image on a imagePlane. Because, I do not want to have to go via a temporary file, I&#39;ll make-up my custom image plane to read the image data directly from memory.&#0160;</p>
<pre class="brush:cpp; toolbar:false;">class KinectImagePlane : public MPxImagePlane {
public:
	static MTypeId id ;
	static MObject aColorImageData ;

public:
	KinectImagePlane () ;
	virtual ~KinectImagePlane () ;

	virtual MStatus loadImageMap (const MString &amp;fileName, int frame, MImage &amp;image) ;
	virtual bool getInternalValueInContext (const MPlug &amp;, MDataHandle &amp;, MDGContext &amp;) ;
	virtual bool setInternalValueInContext (const MPlug &amp;, const MDataHandle &amp;, MDGContext &amp;) ;

	static void *creator () ;
	static MStatus initialize () ;

} ;
</pre>
<p>The aColorImageData attribute will actually be a memory address pointing directly to the Kinect image buffer, and we will feed the MImage with the data directly.</p>
<pre class="brush:cpp; toolbar:false;">//-----------------------------------------------------------------------------
MTypeId KinectImagePlane::id (0x00081052) ;
MObject KinectImagePlane::aColorImageData ;

//-----------------------------------------------------------------------------
KinectImagePlane::KinectImagePlane () : MPxImagePlane () {
}

KinectImagePlane::~KinectImagePlane () {
}

//-----------------------------------------------------------------------------
MStatus KinectImagePlane::loadImageMap (const MString &amp;fileName, int frame, MImage &amp;image) {
	MPlug colorImageData (thisMObject (), aColorImageData) ;
	int addr =colorImageData.asInt () ;

	if ( addr == 0 ) {
		image.readFromFile (&quot;c:/Users/cyrille/Pictures/default.jpg&quot;) ;
		return (MStatus::kSuccess) ;
	}
	IFTImage *pColorImage =(IFTImage *)addr ;
	unsigned int width =pColorImage-&gt;GetWidth (), height =pColorImage-&gt;GetHeight () ;
	unsigned int size =width * height ;
	unsigned int channels =pColorImage-&gt;GetBytesPerPixel () ;

	image.create (width, height, channels) ;
	//image.setPixels (m_pColorImage-&gt;GetBuffer (), m_pColorImage-&gt;GetWidth (), m_pColorImage-&gt;GetHeight ()) ;
	unsigned char *pixels =image.pixels () ;
	BYTE *buffer =pColorImage-&gt;GetBuffer () ;
	for ( unsigned int i =0 ; i &lt; size ; i++, pixels +=channels, buffer +=channels ) {
		pixels [0] =buffer [0] ;
		pixels [1] =buffer [1] ;
		pixels [2] =buffer [2] ;
		pixels [3] =255 - buffer [3] ; // the alpha seems to go the other way around
	}
	image.verticalFlip () ; // flip the image as the Kinect give it to us downside

	return (MStatus::kSuccess) ;
}

//-----------------------------------------------------------------------------
bool KinectImagePlane::getInternalValueInContext (const MPlug &amp;plug, MDataHandle &amp;handle, MDGContext &amp;context) {
	return (MPxImagePlane::getInternalValueInContext (plug, handle, context)) ;
}

bool KinectImagePlane::setInternalValueInContext (const MPlug &amp;plug, const MDataHandle &amp;handle, MDGContext &amp;context) {
	if ( plug == aColorImageData || plug == frameExtension) {
		setImageDirty () ;  // Force the imagePlane to refresh
		//return (true) ;
	}
	return (MPxImagePlane::setInternalValueInContext (plug, handle, context)) ;
}

//-----------------------------------------------------------------------------
void *KinectImagePlane::creator() {
	return new KinectImagePlane;
}

MStatus KinectImagePlane::initialize() {
	MFnNumericAttribute nAttr ;

	aColorImageData =nAttr.create (&quot;colorImageData&quot;, &quot;cid&quot;, MFnNumericData::kLong, 0) ;
	//nAttr.setStorable (false) ;
	//nAttr.setHidden (false) ;
	//nAttr.setReadable (true) ;
	//nAttr.setWritable (false) ;
	addAttribute (aColorImageData) ;
	
	return (MS::kSuccess);
}</pre>
<p>The IFTImage type (Kinect image buffer) is very similar to the Maya MImage format, and while the MImage::setPixels (IFTImage::GetBuffer ()) would in theory has worked straight out of the box, the alpha value seems to go the other way. I haven;t really yet explored that area, but changing the value fixed it.</p>
<p>And the register/deregister calls:</p>
<pre class="brush:cpp; toolbar:false;">plugin.registerNode (&quot;KinectImagePlane&quot;, KinectImagePlane::id, KinectImagePlane::creator, KinectImagePlane::initialize, MPxNode::kImagePlaneNode) ;
plugin.deregisterNode (KinectDeviceNode::id) ;
</pre>
<p>Now that becomes interesting - while we now have a way to display a Kinect memory image without reading a file from disk. WE need to connect to the Kinect sensor and using the Maya Device thread node &#39;MPxThreadedDeviceNode&#39;.</p>
<pre class="brush:cpp; toolbar:false;">class KinectDeviceNode : public MPxThreadedDeviceNode {
public:
	static MTypeId id ;
	static MObject aColorImageData ;
	static MObject aDepthImageData ;
	static MObject aSeed ;

	KinectSensor m_KinectSensor ;
	IFTImage *m_pColorImage ;
	IFTImage *m_pDepthImage ;
	NUI_IMAGE_TYPE m_imageType ;
	NUI_IMAGE_RESOLUTION m_imageRes ;
	NUI_IMAGE_TYPE m_depthType ;
	NUI_IMAGE_RESOLUTION m_depthRes ;
	bool m_bNearMode ;
	bool m_bSeatedSkeletonMode ;
public:
	KinectDeviceNode () ;
	virtual ~KinectDeviceNode () ;
	virtual void postConstructor () ;
	virtual MStatus compute (const MPlug &amp;plug, MDataBlock &amp;data) ;
	virtual void threadHandler () ;
	virtual void threadShutdownHandler () ;
	static void *creator () ;
	static MStatus initialize () ;
} ;
</pre>
<p>Here you need to remember that unlike MotionBuilder, <a href="http://around-the-corner.typepad.com/adn/2012/09/maya-api-thread-safe.html" target="_self">Maya is not multithreaded</a>, nor thread safe for most of its API. And that means the MPxThreadDeviceNode while being a separate thread, will not interact with Maya main thread if Maya is busy doing something else. In our example, you&#39;ll notice that our imagePlane framerate will freeze anytime you start doing something in Maya and this is the expected behavior.</p>
<p>The register/deregister calls first. Note the MPxNode::kThreadedDeviceNode type here:</p>
<pre class="brush:cpp; toolbar:false;">plugin.registerNode (&quot;KinectDeviceNode&quot;, KinectDeviceNode::id, KinectDeviceNode::creator, KinectDeviceNode::initialize, MPxNode::kThreadedDeviceNode);
plugin.deregisterNode (KinectDeviceNode::id) ;
</pre>
<p>Constructor/Destructor</p>
<pre class="brush:cpp; toolbar:false;">//-----------------------------------------------------------------------------
MTypeId KinectDeviceNode::id (0x00081051) ;
MObject KinectDeviceNode::aColorImageData ;
MObject KinectDeviceNode::aDepthImageData ;
MObject KinectDeviceNode::aSeed ;

static const LPCTSTR RES_MAP[] ={ &quot;80x60&quot;, &quot;320x240&quot;, &quot;640x480&quot;, &quot;1280x960&quot; } ;
static const LPCTSTR IMG_MAP[] ={ &quot;PLAYERID&quot;, &quot;RGB&quot;, &quot;YUV&quot;, &quot;YUV_RAW&quot;, &quot;DEPTH&quot; } ;

//-----------------------------------------------------------------------------
KinectDeviceNode::KinectDeviceNode () : MPxThreadedDeviceNode (),
	m_imageType(NUI_IMAGE_TYPE_COLOR),
	m_imageRes(NUI_IMAGE_RESOLUTION_640x480),
	m_depthType(NUI_IMAGE_TYPE_DEPTH_AND_PLAYER_INDEX),
	m_depthRes(NUI_IMAGE_RESOLUTION_320x240),
	m_bNearMode(true),
	m_bSeatedSkeletonMode(false),
	m_pColorImage(NULL),
	m_pDepthImage(NULL)
{
	// Prints mode params
	MString szTitleComplete ;
	szTitleComplete.format (&quot;Kinect -- Depth:^1s:^2s Color:^3s:^4s NearMode:^5s, SeatedSkeleton:^6s&quot;,
		IMG_MAP [m_depthType],
		(m_depthRes &lt; 0) ? &quot;Error&quot; : RES_MAP [m_depthRes],
		IMG_MAP [m_imageType],
		(m_imageRes &lt; 0) ? &quot;Error&quot; : RES_MAP [m_imageRes],
		m_bNearMode ? &quot;On&quot; : &quot;Off&quot;,
		m_bSeatedSkeletonMode ? &quot;On&quot; : &quot;Off&quot;
	) ;
	cout &lt;&lt; szTitleComplete &lt;&lt; endl ;
}

KinectDeviceNode::~KinectDeviceNode () {
	destroyMemoryPools () ;
	if ( m_pColorImage != NULL ) {
		m_pColorImage-&gt;Release () ;
		m_pColorImage =NULL ;
	}
	if ( m_pDepthImage != NULL ) {
		m_pDepthImage-&gt;Release () ;
		m_pDepthImage =NULL ;
	}
}

//-----------------------------------------------------------------------------
void KinectDeviceNode::postConstructor () {
	MObjectArray attrArray ;
	//attrArray.append (KinectDeviceNode::aColorImageData) ;
	//attrArray.append (KinectDeviceNode::aDepthImageData) ;
	attrArray.append (KinectDeviceNode::aSeed) ;
	setRefreshOutputAttributes (attrArray) ;

	// We&#39;ll be reading one set of 2 IFTImage pointer&#39;s and a seed number at a time
	createMemoryPools (12, 3, sizeof (LONG_PTR)) ;
}
</pre>
<p>While setRefreshOutputAttributes() takes an array, the array size must be 1 :( this is the current implementation limitation, but there is an easy workaround for that. It is also important in postConstructor() to create the memoryPools for the data to go from the device thread into the Maya DG evaluation and in our device node compute() method. Here we do create a pool of 12, but really, as we are using only one common buffer for the images, it is only important for the &#39;seed&#39; attribute which I&#39;ll come back on later.</p>
<pre class="brush:cpp; toolbar:false;">MStatus KinectDeviceNode::initialize () {
	MFnNumericAttribute nAttr ;

	//aColorImageData =nAttr.createAddr (&quot;colorImageData&quot;, &quot;cid&quot;) ;
	aColorImageData =nAttr.create (&quot;colorImageData&quot;, &quot;cid&quot;, MFnNumericData::kLong, 0) ;
	//nAttr.setStorable (false) ;
	//nAttr.setHidden (false) ;
	//nAttr.setReadable (true) ;
	//nAttr.setWritable (false) ;
	addAttribute (aColorImageData) ;
	attributeAffects (live, aColorImageData) ;
	attributeAffects (frameRate, aColorImageData) ;

	//aDepthImageData =nAttr.createAddr (&quot;depthImageData&quot;, &quot;did&quot;) ;
	aDepthImageData =nAttr.create (&quot;depthImageData&quot;, &quot;did&quot;, MFnNumericData::kLong, 0) ;
	//nAttr.setStorable (false) ;
	//nAttr.setHidden (false) ;
	//nAttr.setReadable (true) ;
	//nAttr.setWritable (false) ;
	addAttribute (aDepthImageData) ;
	attributeAffects (live, aDepthImageData) ;
	attributeAffects (frameRate, aDepthImageData) ;

	aSeed =nAttr.create (&quot;seed&quot;, &quot;sd&quot;, MFnNumericData::kDouble, 0.0) ;
	//nAttr.setHidden (true) ;
	addAttribute (aSeed) ;
	attributeAffects (live, aSeed) ;
	attributeAffects (frameRate, aSeed) ;

	attributeAffects (aSeed, aColorImageData) ; // Workaround to setRefreshOutputAttributes() limitation
	attributeAffects (aSeed, aDepthImageData) ;

	return (MS::kSuccess) ;
}
</pre>
<p>The Kinect sensor delivers 2 images, the RGBa image (color image) and the Depth image. For this post our imagePlane only use the color image, but our device node is exposing both for future uses.</p>
<p>And the magic happens here:</p>
<pre class="brush:cpp; toolbar:false;">void KinectDeviceNode::threadHandler () {
	FT_CAMERA_CONFIG videoConfig ;
	FT_CAMERA_CONFIG depthConfig ;
	FT_CAMERA_CONFIG *pDepthConfig =NULL ;

	cout &lt;&lt; &quot;KinectSensor Initialized&quot; &lt;&lt; endl ;
	HRESULT hr =m_KinectSensor.Init (m_depthType, m_depthRes, m_bNearMode, true/*m_bFallbackToDefault*/, m_imageType, m_imageRes, m_bSeatedSkeletonMode) ;
	m_KinectSensor.GetVideoConfiguration (&amp;videoConfig) ;
	m_KinectSensor.GetDepthConfiguration (&amp;depthConfig) ;
	pDepthConfig =&amp;depthConfig ;

	if ( m_pColorImage == NULL ) {
		m_pColorImage =FTCreateImage () ;
		m_pColorImage-&gt;Allocate (videoConfig.Width, videoConfig.Height, FTIMAGEFORMAT_UINT8_B8G8R8X8) ;
	}
	if ( m_pDepthImage == NULL ) {
		m_pDepthImage =FTCreateImage () ;
		m_pDepthImage-&gt;Allocate (depthConfig.Width, depthConfig.Height, FTIMAGEFORMAT_UINT16_D13P3) ;
	}
	setDone (false) ;
	while ( !isDone () ) {
		// Skip processing if we are not live
		if ( ! isLive () )
			continue ;

		MCharBuffer buffer ;
		MStatus status =acquireDataStorage (buffer) ;
		if ( !status )
			continue ;

		beginThreadLoop () ;
		{
			if ( m_KinectSensor.GetVideoBuffer () ) {
				HRESULT hrCopy =m_KinectSensor.GetVideoBuffer ()-&gt;CopyTo (m_pColorImage, NULL, 0, 0) ;
				if ( SUCCEEDED(hrCopy) &amp;&amp; m_KinectSensor.GetDepthBuffer () )
					hrCopy =m_KinectSensor.GetDepthBuffer ()-&gt;CopyTo (m_pDepthImage, NULL, 0, 0) ;
			}
			LONG_PTR *data =reinterpret_cast(buffer.ptr ()) ;
			data [0] =(LONG_PTR)m_pColorImage ;
			data [1] =(LONG_PTR)m_pDepthImage ;
			data [2] =(LONG_PTR)rand () ;
			pushThreadData (buffer) ;
		}
		endThreadLoop () ;
	}
	setDone (true) ;

	m_KinectSensor.Release () ;
	cout &lt;&lt; &quot;KinectSensor Released&quot; &lt;&lt; endl ;
}

void KinectDeviceNode::threadShutdownHandler () {
	// Stops the loop in the thread handler
	setDone (true) ;
}

MStatus KinectDeviceNode::compute (const MPlug &amp;plug, MDataBlock &amp;block) {
	if ( plug == aColorImageData || plug == aDepthImageData || plug == aSeed ) {
		// Access the data and update the output attribute
		MCharBuffer buffer ;
		if ( popThreadData (buffer) ) {
			// Relative data coming in
			LONG_PTR *data =reinterpret_cast(buffer.ptr ()) ;

			MDataHandle outputHandle =block.outputValue (aColorImageData) ;
			//outputHandle.asAddr () =reinterpret_cast(data [0]) ;
			outputHandle.asLong () =(int)data [0] ;
			outputHandle.setClean () ;

			outputHandle =block.outputValue (aDepthImageData) ;
			outputHandle.asLong () =(int)data [1] ;
			outputHandle.setClean () ;

			outputHandle =block.outputValue (aSeed) ;
			outputHandle.asDouble () =(double)data[2] ;
			outputHandle.setClean () ;

			block.setClean (plug) ;
			releaseDataStorage (buffer) ;
			return (MS::kSuccess) ;
		}
	}
	return (MS::kUnknownParameter) ;
}
</pre>
<p>What happens is that if the device is live, the threadHandler() will push data in the memory pool we created (up to 12 item). If we aren&#39;t consuming them, it will wait before pushing anymore, so while it is not relevant here to have a lot more pool, it might be important for motion capture for example if we do not want to miss any frame. In the example we do update within the same image buffers, but we do set the &#39;seed&#39; attribute with a random value to somehow guarantee in our example it is unique and will force the update.</p>
<p>Then, the device thread will mark the &#39;seed&#39; attribute dirty for that pool, and because our seed attribute affects both image buffer pointer attributes, Maya will mark them dirty too, and will call compute from the DG thread if someone needs the data.</p>
<p>In compute(), we do pop the pool and update the attribute with the image buffer pointers that if connected our imageplane will update the viewport display.</p>
<p>Now, start Maya, and run that little MEL script, and you&#39;re live on screen.</p>
<pre class="brush:cpp; toolbar:false;">file -f -new;
loadPlugin &quot;C:/Users/cyrille/Documents/Visual Studio 2010/Projects/MayaKinect/x64/Debug/MayaKinect.mll&quot;;
createNode &quot;KinectDeviceNode&quot;;
createNode &quot;KinectImagePlane&quot;;
connectAttr -f &quot;KinectImagePlane1.message&quot; &quot;perspShape.imagePlane[0]&quot;;
connectAttr -f &quot;KinectDeviceNode1.seed&quot; &quot;KinectImagePlane1.frameExtension&quot;;
connectAttr -f &quot;KinectDeviceNode1.colorImageData&quot; &quot;KinectImagePlane1.colorImageData&quot;;
setAttr &quot;KinectDeviceNode1.live&quot; 1;
</pre>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee84ef1ea970d-pi" style="display: inline;"><img alt="Kinect-color" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee84ef1ea970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee84ef1ea970d-800wi" title="Kinect-color" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Chris
EMAIL: chris.gibbs.mail@gmail.com
IP: 107.198.153.164
URL: 
DATE: 02/18/2013 03:02:51 PM
Brilliant.  I can't wait to see what you come up with next.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Can my custom node survive to delete
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: can-my-custom-node-survive-to-delete
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/02/can-my-custom-node-survive-to-delete.html 
DATE: 02/05/2013 11:06:34 AM
-----
BODY:
<p>When you use MDagModifier to delete the last shape under a transform, the transform is automatically deleted as well. That is the normal Maya behavior.&#0160;It helps to keep the scene clear of orphaned transforms and is consistent with MDagModifier::createNode(), which will automatically create a parent if none is specified when creating the node.</p>
<p>However, you need to know that&#0160;MDagModifier::reparentNode() would not delete empty parents when that happens. And the&#0160;&#39;delete&#39; command doesn&#39;t behave the same way since it uses the internal equivalent of MDGModifier to delete the node, which leaves the parent intact.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d40cb9734970c-pi" style="display: inline;"><img alt="Donotdeleteme" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d40cb9734970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d40cb9734970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Donotdeleteme" /></a><br />Said that if you want to protect a node from being deleted automatically by Maya when such situation occurs you can do so by using the MPxNode::setExistWithoutInConnections() and MPxNode::setExistWithoutOutConnections() methods which will tell Maya to not delete your node if you lose all your upstream and/or downstream connections.</p>
<p>&#0160;</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Michal
EMAIL: michal@cgarea.com
IP: 89.68.95.94
URL: http://cgarea.com
DATE: 02/07/2013 04:43:54 AM
Thankyou, this was very usefull tip for what I'm doing currently.
Perhaps you can give some tips on other problem I posted on area ? It related to custom shader nodes not appearing in hypershade:

http://area.autodesk.com/forum/autodesk-maya/sdk/custom-nodes-in-hypershade---problem-with-graphing-network/

thanks
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Conference recordings available
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-conference-recordings-available
CATEGORY: 3ds Max
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/adn-conference-recordings-available.html 
DATE: 01/31/2013 11:56:41 PM
-----
BODY:
<p>Not that it is something really new as they&#39;ve been posted late December for most of them, but last week we posted all the public ones <a href="http://area.autodesk.com/au2012/adn" target="_self">on Area</a>. You may remember <a href="http://around-the-corner.typepad.com/adn/2012/06/adn-devdays-au-las-vegas-2012-call-for-proposals.html" target="_self">an invite</a> posted last June for people to present at the ADN conference. These videos are the one people who were accepted presented. Other recordings will remain accessible to <a href="http://www.autodesk.com/joinadn" target="_self">ADN members</a> only until May/June time as they contain confidential information on 3ds Max &amp; Maya, ... next releases.</p>
<p><a href="http://area.autodesk.com/au2012/adn#"><img alt="Recording available" src="http://area.autodesk.com/assets/img/events/au2012/video_present.png" />&#0160;Adding Characters and Animations to Your Project in Real Time Using the Autodesk Animation Store</a></p>
<p><a href="http://area.autodesk.com/au2012/adn#"><img alt="Recording available" src="http://area.autodesk.com/assets/img/events/au2012/video_present.png" />&#0160;Pushing Autodesk® Maya® References</a></p>
<p><a href="http://area.autodesk.com/au2012/adn#"><img alt="Recording available" src="http://area.autodesk.com/assets/img/events/au2012/video_present.png" />&#0160;New Metadata for Autodesk® Maya®</a></p>
<p><a href="http://area.autodesk.com/au2012/adn#"><img alt="Recording available" src="http://area.autodesk.com/assets/img/events/au2012/video_present.png" />&#0160;An Autodesk® Maya® MEL Performance Profiler</a></p>
<p><a href="http://area.autodesk.com/au2012/adn#"><img alt="Recording available" src="http://area.autodesk.com/assets/img/events/au2012/video_present.png" />&#0160;Thinking Outside the Box with Autodesk® 3ds Max®</a></p>
<p>There is 7 more videos on the ADN portal which goes on details about new API/Features/Roadmap and initiatives for future. I hope to see you there next year same time, same place,</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Querying animation layers returns FBBox
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: querying-animation-layers-returns-fbbox
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/querying-animation-layers-returns-fbbox.html 
DATE: 01/30/2013 01:52:00 AM
-----
BODY:
<p>This is more a bug report with its workaround than anything else. But this one seems serious enough for me to bring it here. On MotionBuilder 2012 -&gt; 2013 (and on the current PR release), if you attempt to query an animation layer from the current take, an FBBox object will be returned.</p>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c365f6628970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c365f6628970b" style="display: block; margin-left: auto; margin-right: auto;" title="Boxes" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c365f6628970b-800wi" border="0" alt="Boxes" /></a>But on new scenes (yet to be saved), FBAnimationLayer objects will be returned for the two default animation layers. But for any new layer you add, only FBBox objects will be returned for those. If you then save the scene file, reopen it, FBBox objects are return for ALL of the animation layers. You'll get this issue whenever you try to iterate through the FBScene::Components object list property, or use the FBFindObjectByFullName() method.</p>
<p>To workaround that problem till the issue is fixed, you can instead use the FBAnimationLayer object like this:</p>
<pre class="brush:python; toolbar:no;">from pyfbsdk import *
FBApplication().FileNew()
lTake = FBSystem().Scene.Take[0]
lTake.CreateNewLayer()
lTake.CreateNewLayer()
for i in range (0, lTake.GetLayerCount()):
  print lTake.GetLayer(i)
FBApplication().FileSave(r"myscene.fbx")

FBApplication().FileNew()
FBApplication().FileOpen(r"myscene.fbx")
lTake = FBSystem().Scene.Take[0]
for i in range (0, lTake.GetLayerCount()):
  print lTake.GetLayer(i)
</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Managing Custom MEL Scripts and Plug-ins in a Production Environment
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: managing-custom-mel-scripts-and-plug-ins-in-a-production-environment
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/managing-custom-mel-scripts-and-plug-ins-in-a-production-environment.html 
DATE: 01/28/2013 07:25:00 AM
-----
BODY:
<h2>Introduction</h2>
<p>Managing numerous and complex MEL scripts and plug-ins can become difficult and inconsistent in production environments.</p>
<p>The following steps will ensure that your MEL scripts get sourced and your plug-ins will get loaded without error and with consistency throughout your production environment.</p>
<h3>1) Recommended method for MEL scripting:</h3>
<p>// Create several local procs in a .mel file.</p>
<p>// At the end of the file write one global proc that connects/calls to all these local procs.</p>
<p>// Name the global proc with the same name as that of the .mel file.</p>
<p>// Put the .mel file in one of the places listed under MAYA_SCRIPT_PATH.</p>
<p>The file testProc.mel should look like:</p>
<pre class="brush:cpp; toolbar:false;">proc proc1() {
  print ("\n proc1");
}

proc proc2() {
  print ("\n proc2");
}

global proc testProc() {
  print ("\n testProc");
  proc1;
  proc2;
}
</pre>
<p>Now keep in mind that the order DOES MATTER here. If the global proc was at the beginning of the script then this won't work. Notice that the source statement does not appear anywhere yet. This is the way most of the scripts that come with the Maya are written. Adding a new MEL file for every new global proc makes things predictable and reliable.</p>
<h3>2) Adding another global proc to the end of the file:</h3>
<p>If you want to add another global proc in the SAME file and make sure that it is available just like other global procs your testProc.mel should look like this:</p>
<pre class="brush:cpp; toolbar:false;">proc proc1() {
  print ("\n proc1");
}

proc proc2() {
  print ("\n proc2");
}

global proc testProc() {
  print ("\n testProc");
  proc1;
  proc2;
}

global proc testProc1() {
  print ("\n testProc1");
  testProc;
  proc1;
  proc2;
}
</pre>
<p>If you try to call testProc1 after starting a new session of Maya, it will not be recognized. One way to fix this is to source the file. This will make all the global procs in that file available. What you do is:</p>
<p># Add this line inside your userSetup.mel:<br />source testProc;</p>
<p>2a) However this defeats the purpose of having the automated system of making  available all the global procs sitting in the files that are in MAYA_SCRIPT_PATH. So, the following will work even without the source statement in the userSetup.mel:</p>
<pre class="brush:cpp; toolbar:false;">proc proc1() {
  print ("\n proc1");
}

proc proc2() {
  print ("\n proc2");
}

global proc testProc1() {
  print ("\n testProc1");
  proc1;
  proc2;
}

global proc testProc() {
  print ("\n testProc");
  testProc1;
}</pre>
<p>The above will work even without the source statement. Notice that although there are 2 global procs in the same file, testProc is still the top proc in terms of hierarchy since the flow of control goes like: testProc --&gt; testProc1 --&gt; proc1, proc2. Again, the order DOES MATTER.</p>
<p>2b) Another way of doing this would be:</p>
<pre class="brush:cpp; toolbar:false;">proc proc1() {
  print ("\n proc1");
}

proc proc2() {
  print ("\n proc2");
}

global proc testProc2() {
  print ("\n testProc2");
  testProc1;
  proc1;
  proc2;
}

global proc testProc1() {
  print ("\n testProc1");
  proc1;
  proc2;
}

global proc testProc() {
}
</pre>
<p>Now call the testProc from inside the userSetup.mel by adding the line:</p>
<pre class="brush:cpp; toolbar:false;">testProc;
</pre>
<p>Just calling the blank proc will make all the other global procs inside the testProc.mel available to you. But you will run into errors if you try to call the testProc1 BEFORE calling testProc.</p>
<h3>3) Dealing with loadPlugin and the commands from the plug-in:</h3>
<p>In this situation the userSetup.mel has MEL code like the following and gives you errors.</p>
<pre class="brush:cpp; toolbar:false;">
loadPlugin A;
source "B.mel";
someCommandFromThePluginA();</pre>
<p>(someCommandFromThePluginA which is sitting inside B.mel that is recognized only when the plugin A is loaded.) ...and you later run the command which comes from the B.mel file. It fails if it references anything from the plugin 'A'.</p>
<p>The solution is:</p>
<pre class="brush:cpp; toolbar:false;">
loadPlugin A;
evalDeferred("source \"B.mel\"");
someCommandFromThePluginA();</pre>
<p>The eval causes the eval'ed string to be compiled at runtime. By that point the plug-in is loaded and available. MEL considers source statements as compiler directives, so they are handled before the script is even run. The only way to get around that is to wrap the source statement in an eval.</p>
<p>Another working example of this would be:</p>
<pre class="brush:cpp; toolbar:false;">
string $plugin = "/usr/autodesk/maya/bin/plug-ins/Mayatomr.so";
loadPlugin($plugin);
int $ret=0;
while ($ret == 0) {
  $ret = `pluginInfo -q -loaded $plugin;`;
}
eval ("Mayatomr -mi -file " + $inFile + " -perframe 2 -padframe 0  -tabstop 8");
</pre>
<p>The loadPlugin and evalDeferred execute right away in batch mode since there is no such thing as "idle" in batch mode.</p>
<p>You can NEVER load a plug-in and expect to be able to use a command from that plug-in directly in the same .mel file.</p>
<p>So does it mean that for the most part, loadPlugin is a trivial to the point of being a "useless" MEL command? Well ...not quite. Most people write wrapper scripts to load the plug-in and then call something else.</p>
<p>In apiAnimCurveTest.mel try something like:</p>
<pre class="brush:cpp; toolbar:false;">
global proc int apiAnimCurveTest () {
  string $soName = "apiAnimCurveTest";
  if (`about -os` == "win64" || `about -os` == "win32" ) {
    $soName = $soName + ".mll";
  } else if (`about -os` == "linux" {
    $soName = $soName + ".so";
  } else {
    $soName = $soName + ".bundle";
  }
  // Make sure we can load our plugin
  if (!`pluginInfo -query -loaded $soName`) {
    if (catch (`loadPlugin $soName`)) {
      print ("### apiAnimCurveTest: Fatal error (startup): unable to load  " + $soName + "\n");
      return (1);
    }
  }
  // Force apiAnimCurveTestReal.mel to be reparsed by mel
  eval ("source apiAnimCurveTestReal.mel");
  int $errors = eval ("apiAnimCurveTestReal");
  return ($errors);
}
</pre>
<p>And then apiAnimCurveTestReal.mel can use the plug-in commands:</p>
<pre class="brush:cpp; toolbar:false;">
global proc int apiAnimCurveTestReal () {
  string $soName = "apiAnimCurveTest";
  if (`about -os` == "win64" || `about -os` == "win32" ) {
    $soName = $soName + ".mll";
  } else if (`about -os` == "linux" {
    $soName = $soName + ".so";
  } else {
    $soName = $soName + ".bundle";
  }
  // Make sure our plugin has been loaded
  if (!`pluginInfo -query -loaded $soName`) {
    print ("### apiAnimCurveTest: Fatal error (startup): unable to load "  + $soName + "\n");
    return (1);
  }
  // Create some animation
  apiAnimateAnObject;
  return (0);
}
</pre>
<p>4) Sourcing and "Unsourcing" global procs.</p>
<p>There might be a time when you want to have 2 versions of a script. i) V1 --&gt; when a certain plug-in is loaded. ii) V2 --&gt; when certain plug-in is not loaded. A good example of this is the AE*.mel scripts that come with the mr plug-in. These scripts override their usual AE counterparts when the plug-in gets loaded.</p>
<p>5) You can use the userSetup.mel as the entry point for deciding what gets loaded. One way of doing this would be to allow Maya to start up and then from inside the userSetup.mel call a global proc that will run a check on which plug-ins are loaded or should be loaded. You can also make use of the environment variables to store certain paths or trigger certain events.</p>
<p>For more working examples look at the integration of scripts and plug-ins inside the bonus tools pack.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: It works on my machine
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: it-works-on-my-machine
CATEGORY: Cyrille Fauvel
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/it-works-on-my-machine.html 
DATE: 01/24/2013 01:00:00 AM
-----
BODY:
<p>It isn&#39;t great, but... I&#39;ll give it the classic dev guarantee of &quot;it works on my machine&quot;.&#0160;</p>
<p><a href="http://www.thenetworkadministrator.com/top20.htm" target="_self">http://www.thenetworkadministrator.com/top20.htm</a></p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c35c1a634970b-pi" style="display: inline;"><img alt="Worksonmymachine" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c35c1a634970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c35c1a634970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Worksonmymachine" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Never ever use "unloadPlugin -force"!!!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: never-ever-use-unloadplugin-force
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/never-ever-use-unloadplugin-force.html 
DATE: 01/22/2013 03:29:23 AM
-----
BODY:
<p>I would encourage everyone to completely avoid use of the MEL command &quot;unloadPlugin –force pluginName&quot; or its Python equivalent cmds.unloadPlugin(&quot;pluginName&quot;, force=true). And, especially when writing vital tests.</p>
<p>The force flag of the unloadPlugin is a documented (and almost guaranteed way) of creating dangling pointers. Here&#39;s what Maya&#39;s User Manual has to say about it:</p>
<p style="padding-left: 30px;"><em>Unload the plug-in even if it is providing services. <span style="color: red;">This is not recommended.</span> If you unload a plug-in that implements a node or data type in the scene, those instances will be converted to unknown nodes or data and the scene will no longer behave properly. <span style="color: red;">Maya may become unstable or even crash.</span> If you use this flag you are advised to save your scene in MayaAscii format and restart Maya as soon as possible.</em></p>
<p>A plug-in which has a node in the DG (or a command in the undo queue) cannot be be safely unloaded. Forcing the unload will only create dangling pointers, memory corruption and might lead to crashes. The normal solution is simply to empty the DG and the undo queue by performing a &quot;file –new&quot;. Normally, you should be able to unload the plug-in afterward.<br /> <br />Unfortunately, there are some issues with MFnPlugin::registerModelEditorCommand().  Any plug-in registering a model editor command would immediately be marked as being unsafe to unload forever. Emptying the scene and the undo queue would not help. Getting of all UI elements created by the invocation on the registered model editor command would not help neither. I.e. There would be absolutely no way to safely unload the plug-in without creating dangling pointers, memory corruptions and potential crashes…</p>
<p>Forcing the plug-in to unload while it still has nodes present in the scene still isn&#39;t harmless. There&#39;s information about the node which Maya will need to make or break connections, set or get attribute values, delete the node, etc, and some of that information is lost when the plug-in unloads. Maya won&#39;t know that the data is no longer there so it can end up chasing bogus pointers with all the instability that brings.<br /><br />Alternatively if you want to store some settings in a scene without using a plug-in node, you can do one of the following:</p>
<ul>
<li>Store them in the scene&#39;s fileInfo database. See the &#39;fileInfo&#39; command for more details.</li>
<li>Create an instance of a low-overhead built-in node, like &#39;choose&#39;, and then add dynamic attrs to it to store your settings.</li>
<li>Same as the previous suggestion except that as of Maya 2013.5 you can also store the settings as metadata on the node.</li>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Include or precompiled
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: include-or-precompiled
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Maya
CATEGORY: Visual Studio
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/include-or-precompiled.html 
DATE: 01/17/2013 12:15:00 AM
-----
BODY:
<p>Usage of precompiled headers may significantly reduce compilation time, especially when applied to big header files or header files that include many other header files or header files that are included in many translation units. And when you consider template files, that will save you even more time.</p>
<p>The beauty of precompiled headers is that even if most of the time they are made per project, they do not have to. You could create a precompiled header (pch for Windows, or gch for GCC/Linux) with all your library includes once, and use/consume it from multiple project without to have to pre-recompile them.</p>
<p>However, many people do not take advantage of this features because they somewhat misuse it by including their own project headers into the collection, and each time they modify something, the precompiled header has to be recompiled. So no benefit... Really, someone should only put static header files in the collection, and almost never a project header unless they never change. The Maya, MotionBuilder, 3ds Max, SoftImage SDK/API headers are good candidates for that feature as once shipped with the product, they aren't supposed to change until the next version. Some other good guys are MFC, Boost, ATL, Qt, etc...</p>
<p>While working on a new version of the Maya C++/Python/.Net wizards, I started developing a master pre-compiled header for Maya API including some pragma directives to automate some of the settings such as an automatic library inclusion as we can see in Boost, ATL, MFC, ... The advantage of these pragma is that porting the plug-in to the next version of the devkit becomes very easy. But I'll come back to that another time.</p>
<p>The new C++ project wizard will create a file like the one below with some pre-processor directives as well to include/exclude some of the not always used API.</p>
<pre class="brush: cpp; toolbar: false;">//
//  Copyright 2012 Autodesk, Inc.  All rights reserved.
//
//  Use of this software is subject to the terms of the Autodesk license 
//  agreement provided at the time of installation or download, or which 
//  otherwise accompanies this software in either electronic or hard copy form.   
//

//-----------------------------------------------------------------------------
//- StdAfx.h : include file for standard system include files,
//-      or project specific include files that are used frequently,
//-      but are changed infrequently
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
//----- This file is preprocessor symbol driven.
//----- Define:
//----- _PYTHON_MODULE_ to include and import Python headers and libs in your project.
//----- _PYTHON_MODULE_ to include and import Python headers and libs in your project.
//----- _MAYA_QT_ to include and import Maya QT headers and libs in your project.
//----- _MAYA_VP2_ to include and import Maya Viewport 2.0 headers and libs in your project.

#include "mayaHeaders.h"

//-----------------------------------------------------------------------------
//----- If you need MFnPlugin definition more than once
//- MNoVersionString is needed on MacOS and Linux to avoid multiple MApiVersion definition
//#define MNoVersionString
//- MNoPluginEntry is needed on Windows platform to avoid multiple DllMain definition
//#define MNoPluginEntry
//#include &lt;maya/MFnPlugin.h&gt;

// Add your other lib headers here</pre>
<p>The "mayaHeaders.h" which have the Maya headers and pragma will be dependent of the Maya devkit version, and might be included in the Maya devkit in future.</p>
<pre class="brush: cpp; toolbar: false;">//
//  Copyright 2012 Autodesk, Inc.  All rights reserved.
//
//  Use of this software is subject to the terms of the Autodesk license 
//  agreement provided at the time of installation or download, or which 
//  otherwise accompanies this software in either electronic or hard copy form.   
//

//-----------------------------------------------------------------------------
#pragma once

#if defined(_MANAGED)
#pragma unmanaged
#pragma message(__FILE__ " Turning down managed code")
#endif

#if defined(_MANAGED) &amp;&amp; !defined(MNoMSTypedef)
//- The MS typedef can cause errors when linking with .NET libraries on Windows.
//- Use the MNoMSTypedef define to force all status codes to be prefixed by MStatus:: instead of MS::.
#define MNoMSTypedef
#pragma message(__FILE__ " Turning MNoMSTypedef on - MS typedef can cause errors when linking with .NET libraries on Windows.")
#endif

//-----------------------------------------------------------------------------
#ifdef NT_PLUGIN
#define EXPORT comment(linker, "/EXPORT:"__FUNCTION__"="__FUNCDNAME__)
#else
#define EXPORT 
#endif

//-----------------------------------------------------------------------------
#define MayaOk(a,b) \
	if ( !a ) { \
	a.perror (b) ; \
	return (a) ; \
	}
#define NodeRegisterOk(a) MayaOk(a,_T("registerNode"))
#define NodeUnregisterOk(a) MayaOk(a,_T("deregisterNode"))

//-----------------------------------------------------------------------------
//----- This file is preprocessor symbol driven.
//----- Define:
//----- _PYTHON_MODULE_ to include and import Python headers and libs in your project.

//-----------------------------------------------------------------------------
#ifdef NT_PLUGIN
#pragma comment (lib, "cg.lib")
#pragma comment (lib, "cgGL.lib")
#pragma comment (lib, "Cloth.lib")
#pragma comment (lib, "Foundation.lib")
#pragma comment (lib, "Image.lib")
#pragma comment (lib, "IMFbase.lib")
#pragma comment (lib, "libawxml2.lib")
#pragma comment (lib, "libHalf.lib")
#pragma comment (lib, "libIex.lib") // Link this always (2013 change). Otherwise: 4 missing symbols when linking
#if !defined(_MANAGED)
#pragma comment (lib, "libIlmImf.lib")
#endif
#pragma comment (lib, "libImath.lib")
#pragma comment (lib, "libmocap.lib")
#pragma comment (lib, "libzlib.lib")
#pragma comment (lib, "OpenMaya.lib")
#pragma comment (lib, "OpenMayaAnim.lib")
#pragma comment (lib, "OpenMayaFX.lib")
#pragma comment (lib, "OpenMayaRender.lib")
#pragma comment (lib, "OpenMayaUI.lib")
#ifdef _PYTHON_MODULE_
#pragma comment (lib, "python26.lib")
#endif
#pragma comment (lib, "tbb.lib")
#pragma comment (lib, "tbbmalloc.lib")
#endif

//-----------------------------------------------------------------------------
#include &lt;maya/MTypeId.h&gt;
#include &lt;maya/MTypes.h&gt;
#include &lt;maya/flib.h&gt;
#include &lt;maya/ilib.h&gt;
#include &lt;maya/M3dView.h&gt;
#include &lt;maya/MAngle.h&gt;
#include &lt;maya/MAnimControl.h&gt;
#include &lt;maya/MAnimCurveChange.h&gt;
#include &lt;maya/MAnimCurveClipboard.h&gt;
#include &lt;maya/MAnimCurveClipboardItem.h&gt;
#include &lt;maya/MAnimCurveClipboardItemArray.h&gt;
#include &lt;maya/MAnimMessage.h&gt;
#include &lt;maya/MAnimUtil.h&gt;
//#include &lt;maya/MApiVersion.h&gt;
#include &lt;maya/MArgDatabase.h&gt;
#include &lt;maya/MArgList.h&gt;
#include &lt;maya/MArgParser.h&gt;
#include &lt;maya/MArrayDataBuilder.h&gt;

// etc...
</pre>
<p>This current version (Maya 2013 / 2013 Extension 1&amp;2) full source is located <a href="http://around-the-corner.typepad.com/files/mayaHeaders.h" target="_self">here</a>,</p>
</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Do the Maya array data structures store their elements contiguously?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: do-the-maya-array-data-structures-store-their-elements-contiguously
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/do-the-maya-array-data-structures-store-their-elements-contiguously.html 
DATE: 01/15/2013 12:15:00 AM
-----
BODY:
<p>Maya array data structures such as MFloatArray, MIntArray, etc... store their elements contiguously in memory like std::vector does, but&#0160;that is an implementation detail and not guaranteed by the API.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c35c190bd970b-pi" style="display: inline;"><img alt="Array" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c35c190bd970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c35c190bd970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Array" /></a>At the time of the post and back to early release of Maya up to Maya 2013 Ext 2, the elements are currently stored contiguously.&#0160;So code based on that assumption may work today but might fail to do so in some future release of Maya. In practice that is unlikely to happen, but you never know.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk OrgOrgChart
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 0
BASENAME: autodesk-orgorgchart
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/autodesk-orgorgchart.html 
DATE: 01/10/2013 06:46:17 AM
-----
BODY:
<p>For something completely different than usual, here is an interesting graphical representation of the organisational changes Autodesk has been through in the last couple of years.</p>
<p>The OrgOrgChart (Organic Organization Chart) project looks at the evolution of a company structure over time. A snapshot of the Autodesk organizational hierarchy was taken each day between May 2007 and June 2011:</p>
<iframe width="420" src="http://www.youtube.com/embed/mkJ-Uy5dt5g" height="315" frameborder="0" allowfullscreen></iframe>
<p>
This representation is reminiscent of the Disk Tree visualization technique developed at Xerox Parc (Chi E.H., S.K. Card, 1999,&nbsp;<a href="http://www-users.cs.umn.edu/~echi/papers/infovis99/chi-wavs.pdf">Sensemaking of Evolving Web Sites Using Visualization Spreadsheets</a>,&nbsp;<em>Proceedings of the Symposium on Information Visualization (InfoVis '99)</em>, pp. 18-25), showing implicit and explicit affinities among information items and revealing relationships that are difficult to discover in traditional representations. Proximity or connections between items can reveal complex relationships in a comprehensive way, provide visual access to data structures, and enable detection of tendencies or patterns in the process.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MotionBuilder code convention change
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: motionbuilder-code-convention-change
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2013/01/motionbuilder-code-convention-change.html 
DATE: 01/09/2013 12:00:00 AM
-----
BODY:
<p>In the past, MotionBuilder classes may be prefixed with a &#39;H&#39;. The SDK now will enforce not using this syntax, and you will need to change your code accordingly. To avoid too much work here is a tip on doing it in VisualStudio or Notepad++ using Regular Expression.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c34cbeb26970b-pi" style="display: inline;"><img alt="Regexpr" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c34cbeb26970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c34cbeb26970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Regexpr" /></a></p>
<p>In copy paste form: </p>
<p>{^|:b|\(|,|&lt;}H{FB:i*}{[&amp;*\)&gt;]*:b*}</p>
<p>\1\2*\3</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Merry Christmas, Joyeux Noël, Fröhe Weihnachten, Buon Natale, 圣诞快乐, メリークリスマス
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: merry-christmas-joyeux-noël-fröhe-weihnachten-buon-natale-圣诞快乐-メリークリスマス
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/merry-christmas-joyeux-no%C3%ABl-fr%C3%B6he-weihnachten-buon-natale-%E5%9C%A3%E8%AF%9E%E5%BF%AB%E4%B9%90-%E3%83%A1%E3%83%AA%E3%83%BC%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%9E%E3%82%B9.html 
DATE: 12/24/2012 12:00:00 AM
-----
BODY:
<p>I&#39;ve just started an extended break with my family, so it&#39;s time for me to sign off and wish you all a very Merry Christmas (or Happy Holidays for those of you that are non-denominational in your festive activities) and the very best for 2013.</p>
<p>I&#39;ll be back online on January 9th (unless I end up having trouble keeping away from the computer :-)</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3efae78d970c-pi" style="display: inline;"><img alt="Merrychristmas" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3efae78d970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3efae78d970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Merrychristmas" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MotionBuilder eventAddPose callback called twice 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: motionbuilder-eventaddpose-callback-called-twice-
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Plug-in

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/motionbuilder-eventaddpose-callback-called-twice-.html 
DATE: 12/19/2012 06:53:54 PM
-----
BODY:
<p>The reason that the eventAddPose callback is called twice is because the new pose is connected to the scene and to the folder that contains the pose.
Just check the <em>lEvent.DstPlug</em> pointer and only consider the event when the DstPlug is the FBScene.</p>
<p>Note that for the
eventUpdatePose callback, you may receive it because the scene image
thumbnail shown in the pose tool is connected to the pose. However, there is no really good way of
finding out that a pose as been updated. Only internal data is updated on a pose when an update is done in MoBu, no connection is made, excepted for the
thumbnail - this is why you may see it there and not at other time.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Heading for ADN M&E Devdays & Devlab in Japan
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: heading-for-adn-me-devdays-devlab-in-japan
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/heading-for-adn-me-devdays-devlab-in-japan.html 
DATE: 12/18/2012 06:15:00 PM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee614f794970d-pi" style="display: inline;"><img alt="Japan" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee614f794970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee614f794970d-800wi" style="float: left;" title="Japan" /></a><br />Tokyo - Last stop in this tour before flying back home to celabrate Christmas. See what Devdays and Devlab are about <a href="http://around-the-corner.typepad.com/adn/2012/12/heading-for-adn-me-in-china.html" target="_self">here</a>.</p>
<p>The talks in Shanghai and Beijing were well recived and well attendeed. Unlike for AU, the talks were not recorded, but we had very good lectures and presenters talking about what they do and how. Interresting to see how China ramp-up very quickly in this difficult industry.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya Device API
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-device-api
CATEGORY: Animation
CATEGORY: C++
CATEGORY: Concurrent programming
CATEGORY: Cyrille Fauvel
CATEGORY: Kinect
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: MotionBuilder

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/maya-device-api.html 
DATE: 12/12/2012 09:26:20 PM
-----
BODY:
<p>Recently there was a lot of enthusiams around Virtual Production and use of Motion Capture. This <a href="http://www.businesswire.com/news/home/20120807005518/en/Autodesk-Lightstorm-Entertainment-Weta-Digital-Drive-Virtual" target="_self">article</a> really summarize what great future and fun we will get on that side.</p>
<p> But this is mainly about Virtual Production in general and mostly applied to MotionBuilder when it comes to Motion Capture. But there are many people asking - ok, but what about Maya and/or 3ds Max. I am not an expert on 3ds Max, but what I am going to say here is probably also applicable (but differently) to 3ds Max.</p>
<p>The main difference between MotionBuilder and Maya is that these &#0160;products were designed with 2 completely different vision in mind. MotionBuilder was for real-time animation. And Motion Capture is just a subset of the power of MotionBuilder. Whereas Maya was designed for complex content creation. 2 different visions, 2 different architectures.</p>
<p>The main issue for Maya is that whatever you do, it will never be real-time as the DG and the fact Maya is mostly single threaded will prevent real-time features of any kind. As a side note true real-time isn&#39;t possible anyway on a pre-emptive OS such as Linux, Windows, or OSX. There are ways to come near real-time, so I fear it depends what someone means by real-time.</p>
<p>Back on Maya - a long time ago there was an API for devices which has been retired in the 2010 release I think. But Maya 2013 has introduced a new device API back. That API comes with 3 samples.</p>
<p>There is a randomizer example which generates info and feeds it into Maya. Then there is a UDP based Linux only example and a game controller windows only example.</p>
<p>Internally, the Maya engineering team use these classes to send character information from MotionBuilder to Maya in our Live Stream feature which by the way also use the Human IK&#0160;character representation library. </p>
<p>
 
The class you want to look at in case you want to write device support in Maya is:
 
                <a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/class_m_px_threaded_device_node.html" target="_self">http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/class_m_px_threaded_device_node.html</a>. If you take a look at it, you will see that it contains some simple primitives for handling the starting and stopping of threads and the ability to pass data from a secondary thread to the primary (where Maya operates). It is important from there to understand what I said in a previous post, that you can really only use Maya API in the main Maya thread unless specified differently. So here, it means the device thread will only do something in Maya, if Maya is free and not in the middle of a DG evaluation for example - so not realtime. That also means, in case Maya is busy, that you will have to cache your device data and wait for Maya.</p>
<p>I&#39;ll probably use some free time to write a Kinect sample during the Chritmas break as I bought one recently. Will share the sample when it is ready.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: chris
EMAIL: fluidm3d@gmail.com
IP: 88.156.90.219
URL: 
DATE: 12/16/2012 02:31:44 PM
im looking forward to see your example using new device api in maya 2013. i tried the threaded approach with 2012 and it was quite unstable.
cheers
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 222.128.242.194
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 12/17/2012 04:47:07 AM
Hi Chris
Curious, because the API I am talking about was added in the 2013 version. But, yes, expect a sample to come early next year.
-cyrille
-----
COMMENT:
AUTHOR: chris
EMAIL: fluidm3d@gmail.com
IP: 88.156.90.219
URL: 
DATE: 12/19/2012 01:32:14 PM
i was using python threading trick together with udp recieve
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: A day in Shanghai
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: a-day-in-shanghai
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/a-day-in-shanghai.html 
DATE: 12/12/2012 09:03:55 PM
-----
BODY:
<p>Still on the road for the annual ADN M&amp;E devdays and sitting in the back of the room now I delivered the introduction presentation on &#39;why&#39; the cloud for M&amp;E is now important to our industry. Yesterday, I had the please and great surprise to see the whole ADN China team present in Shanghai who came for the AU China event, and we had a &#39;team&#39; dinner altogether finally, enjoying Shanghai specialties... You don&#39;t like Tofu much? you should try the spicy tofu preparation I had last night. I really enjoyed it ;)</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c348f488d970b-pi" style="display: inline;"><img alt="Shanghai-dinner" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c348f488d970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c348f488d970b-800wi" title="Shanghai-dinner" /></a></p>
<p><span style="font-size: 8pt;">From left to right - Xiaodong, Zhong (M&amp;E), Xianhua (ADN China Manager), Joe (Devtech China Manager), myself, and Daniel</span></p>
<p>Now, as I cannot really understand what my Chinese colleagues talk about (I do not speak, nor read Chinese unfortunately for me), I&#39;ll probably write couple of posts before the Christmas holidays starts...</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Heading for ADN M&E Devdays & Devlab in China
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: heading-for-adn-me-in-china
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/heading-for-adn-me-in-china.html 
DATE: 12/10/2012 02:02:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c34712ec4970b-pi" style="display: inline;"><img alt="China" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c34712ec4970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c34712ec4970b-800wi" style="float: left;" title="China" /></a><br />This week and next week, I&#39;ll be travelling through China and Japan (next week) for the ADN Devdays &amp; Devlab. I&#39;ll start in Shanghai, followed by Beijing.</p>
<h3>Devdays</h3>
<p>Devdays is a series of one day event across the world that Autodesk holds once a year where we invite members of the ADN (Autodesk Developer Network) and show the new stuff in the upcoming releases. Under NDA of course. ;-)</p>
<p>The whole idea of doing so is to educate development partners in advance of product changes that will affect their plug-ins and help them take decisions on future development.&#0160;This is a technical conference with very little marketing verbiage, but there is information about our 2-3 years plan for development even if we cannot guarantee for sure that anything will happen as planned.</p>
<h3>Devlab</h3>
<p>We found there are some&#0160;misunderstanding&#0160;about the format of ADN DevLab.  If you’re not already familiar with the format, then I hope this post will explain how Devlab works:<br /><br />The ADN Devdays Conference,  is our normal conference – a series of presentations on our future technology and strategy with general session in the morning and breakouts in the afternoon.<br /><br />Next day, we host a&#0160;Devlab which is a workshop (i.e. not a conference or a formal training class) and will be staffed by members of the ADN DevTech team and members of the Autodesk engineering teams whenever possible. The idea is that you bring your laptop, work on your code, and discuss your problems with us. Perhaps you need some general design advice; or you’d like some guidance on implementing a specific algorithm; or you’re having trouble isolating and fixing a bug in your code; or you just want to spend a day programming with Autodesk staff and your fellow ADN members available to answer your questions and chat about the products and APIs you’re using? You can come and go as you please - stay all day or just pop in when you want. If we cannot help on the spot, we will take your questions as homework and come back to you in the following week(s).<br /><br />We’ll have API experts available for the following products:<br /><br />•	Maya<br />• 3ds Max<br />•	FBX<br />•	SoftImage (Japan only)<br /><br />Please let us know if you’re interested in a product not in the above list so we can try to find someone to help you on the day (or confirm if no-one with those skills will be available). Also, it would be very helpful if you would send us details of any issue you’d like to discuss if you believe it may require particularly in-depth research – so we have the chance to prepare in advance.</p>
<h3>Europe?</h3>
<p>Devdays &amp; Devlab in US, China, Japan, India - but why not Europe?</p>
<p>Strangely, finding a good venue in Europe where we can get at least 30 (or more) developers in a room is more challenging than anywhere else. Is it because Europeans not ready to travel for such conference, or not interested? It is very hard to tell - but if you got a proposal, I&#39;d be happy to hear and organize that events in Europe as well.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Jefri Yeh
EMAIL: r4inm4ker@gmail.com
IP: 118.163.126.157
URL: http://brainyart.me
DATE: 12/10/2012 06:30:31 PM
Hi, 
Is there any chance that you're also going to Taiwan ? Thanks.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 222.128.242.194
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 12/17/2012 04:44:39 AM
Hi
Unfortunately, no
but as a general rule for everyone interested, if you can put 30 or more developers into a room (not all from the same company ;) - I'd be happy to discuss and come with members of the ADN team.
-cyrille
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya on .NET
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: maya-going-on-net
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Debugging
CATEGORY: Events
CATEGORY: LINQ
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: UI
CATEGORY: Visual Studio
CATEGORY: WCF
CATEGORY: Windows
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/12/maya-going-on-net.html 
DATE: 12/03/2012 10:09:52 AM
-----
BODY:
<p>For those of you who are already on the Maya Feedback Community forum (beta forum), it is probably not really new. But for all others, this is quite a big change - Maya will get a native .NET API for its Windows platform version.</p>
<p>So I am proud to announce the Maya .NET API here.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3e6aa8f5970c-pi" style="display: inline;"><img alt="DotNet" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3e6aa8f5970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3e6aa8f5970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="DotNet" /></a><br />The Maya .NET API is a new technology that 
allows Maya plug-in developers to harness the full power of Microsoft’s .NET 
Framework. With the Maya .NET API, developers extending Maya are now able 
to:
</p>
<ul>
<li>Access the Maya API in a friendly, idiomatic style that is familiar to .NET 
developers 
</li>
<li>Develop code faster and explore the SDK with Intellisense for Microsoft 
Visual Studio IDE 
</li>
<li>Leverage their development skillsets by using their favorite .NET language, 
such as C#, VB</li>
<li>Unleash the rich set of .NET Framework services when building Maya plug-ins, 
including Remoting, Language Integrated Query, Serialization, and advanced Web 
services 
</li>
<li>Integrate WPF/XAML user interfaces into their plugins by docking them into 
Maya’s Qt-based panels </li>
</ul>
The .NET API is currently still in BETA 
release, and we invite you to try it out and provide early feedback. Your 
participation, comments, and defect reports will all be greatly appreciated and 
help us to provide YOU with better software for developing the very best Maya 
plug-ins to make your production run better and make your Maya Artists 
happier!<br /><br />You can download the Maya .NET API BETA from the Maya 
Community Feedback homepage in the Downloads section. Please carefully read the 
included User’s Guide for limitations, important notes, and tips. Defects and 
comments can be logged with the Report Problem button in Maya Feedback 
Community. Also, you are invited to post actively in the .NET API User Forum, 
where Autodesk developers will be able to interact with you.<br />
<p>It is for Windows only and the .Net API is a thin C++/CLI layer around the MPx classes, whereas other classes where generated using SWIG and P/Invoke. That means that it does not support Mono and therefore do not support Linux and OSX.</p>
<p>The API will not be backward compatible while in theory it could be back-ported to previous releases (see my <a href="http://around-the-corner.typepad.com/adn/2012/05/enabling-net-in-a-maya-plug-in-.html" target="_self">post </a>from May 28th).</p>
<p>On the last beta version, we added many new things, and some were based on the feedback we received from Studios working with us on developing/finalizing that API.&#0160;</p>
<ol>
<li>The Maya’s plug-in manager now natively recognizes .NET plug-ins. .NET plug-ins 
now behave exactly like C++ plug-ins (except they must be named with a &quot;.nll.dll&quot; 
extension). That includes them being listed in the plug-in manager window, being 
able to load/unload them, using the same MEL commands to manage them as C++ 
plug-ins, and support for Maya Modules and MAYA_PLUG_IN_PATH. 
</li>
<li>Lots and lots of examples. See devkit\dotnet for a collection of many plugin 
examples ported to C# 
</li>
<li>Nifty WPF C# example. See devkit\dotnet\wpfexamples for a plugin shows off 
dynamic code compilation, LINQ queries over the Maya scene graph, a grid 
control, WPF user interface that docks with Qt, a 3D viewer in C#, and more! 
</li>
<li>Scene message callbacks are modeled as .NET events, and are even listed in 
Intellisense in Visual Studio 
</li>
<li>Visual Studio project template for generating boilerplate plug-in code. See 
the User’s Guide for the embedded ZIP file.</li>
</ol>
<p>What is really new and cool when using that API, is that you really feel developing on .Net vs. using the old Maya API approach. For example, you do not really need an entrypoint like in C++ or Python or even the creator() or initialize() function. Nor you need to register anything yourself by code. Instead you decorate your classes with attribute(s). Let me give you a simple &quot;Hello World&quot; sample and this is a very simple example.</p>
<p>This is the Python code :(</p>
<pre class="brush: python; toolbar: false;">import sys
import maya.OpenMaya as OpenMaya
import maya.OpenMayaMPx as OpenMayaMPx

# command
class HelloWorldCmd(OpenMayaMPx.MPxCommand):
	kPluginCmdName = &quot;spHelloWorld&quot;

	def __init__(self):
		OpenMayaMPx.MPxCommand.__init__(self)

	@staticmethod
	def cmdCreator():
		return OpenMayaMPx.asMPxPtr( HelloWorldCmd() )

	def doIt(self,argList):
		print &quot;Hello World!&quot;


# Initialize the script plug-in
def initializePlugin(plugin):
	pluginFn = OpenMayaMPx.MFnPlugin(plugin)
	try:
		pluginFn.registerCommand(
			HelloWorldCmd.kPluginCmdName, HelloWorldCmd.cmdCreator
		)
	except:
		sys.stderr.write(
			&quot;Failed to register command: %s\n&quot; % HelloWorldCmd.kPluginCmdName
		)
		raise

# Uninitialize the script plug-in
def uninitializePlugin(plugin):
	pluginFn = OpenMayaMPx.MFnPlugin(plugin)
	try:
		pluginFn.deregisterCommand(HelloWorldCmd.kPluginCmdName)
	except:
		sys.stderr.write(
			&quot;Failed to unregister command: %s\n&quot; % HelloWorldCmd.kPluginCmdName
		)
		raise
</pre>
<p>And the Maya .Net equivalent</p>
<pre class="brush: csharp; toolbar: false;">using System;
using Autodesk.Maya.Runtime;
using Autodesk.Maya.OpenMaya;
using Autodesk.Maya.OpenMayaMPx;

[assembly: MPxCommandClass(typeof(MayaNetPlugin.helloWorldCmd), &quot;helloWorldCmd&quot;)]

namespace MayaNetPlugin
{
	public class helloWorldCmd : MPxCommand, IMPxCommand {
		public override MStatus doIt(MArgList argl) {
			MGlobal.displayInfo(&quot;Hello World\n&quot;);
			return MStatus.kSuccess;
		}
	}
}
</pre>
<p>Nothing more, nothing less needed - Really!</p>
<p>And just to give you an idea on how simple it is - here is an abstract on how you could initialize node&#39;s attributes in .Net.</p>
<pre class="brush: csharp; toolbar: false;">[assembly: MPxNodeClass(typeof(MayaNetPlugin.myNode), &quot;myCSharpNode&quot;, 0x00000000)]

class myNode : MPxNode, IMPxNode {
  [MPxNodeNumeric(&quot;in&quot;, &quot;input&quot;, MFnNumericData.Type.kFloat, Storable = true)]
  public static MObject input = null;

  [MPxNodeNumeric(&quot;out&quot;, &quot;output&quot;, MFnNumericData.Type.kFloat, Storable = false, Writable = false)]
  [MPxNodeAffectedBy(&quot;input&quot;)]
  public static MObject output = null;

  override public MStatus compute(MPlug plug, MDataBlock dataBlock) {
    ...
  }
}
</pre>
<p>Excepted the code required in compute() this is it for your class node implementation.</p>
<p>If you interested helping us, please join on the beta forum or drop me a line!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: harry
EMAIL: harry@post.com
IP: 159.153.138.55
URL: 
DATE: 12/04/2012 01:12:03 PM
where to download the .NET feature,
what is "Maya Community Feedback homepage"?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.215.72
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 12/04/2012 11:48:37 PM
Hi Harry,

yes correct <a href="http://beta.autodesk.com">http://beta.autodesk.com</a> and ask to be on the Maya program. If you got any problem to join, let me know and I'll get you on.

cyrille-
-----
COMMENT:
AUTHOR: Maïckel Pasta
EMAIL: 
IP: 82.240.7.76
URL: http://profile.typepad.com/mackelpasta
DATE: 12/05/2012 02:54:45 PM
I've sent a request two days ago on the Community Feedback, but i can't access to the download page or anything else. I really want to try this new feature :)
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.84.144
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 12/06/2012 01:43:13 AM
Hi Maickel

can you drop me an email with your Community Feedback account, I'll get you on
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN M&E DevDays conference over ...
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: adn-me-devdays-conference-over-
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/adn-me-devdays-conference-over-.html 
DATE: 11/28/2012 06:55:07 AM
-----
BODY:
<p>I arrived safely in Las Vegas for AU2012 and finally done with the ADN M&amp;E DevDays conference. It was a lot of work to prepare and even more to deliver. But we had great success, and wonderful deep technical presentations delivered by Autodesk engineers, and external people from multiple Studios on concrete solutions and/or challenges. All presentations where good, but I wanted to highlight here to of them:</p>
<h2>Let&#39;s start by the OpenSubdiv presentation</h2>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee5b48bbf970d-pi" style="display: inline;"><img alt="Opensubdiv" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee5b48bbf970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee5b48bbf970d-800wi" style="float: right; margin: 4px;" title="Opensubdiv" /></a>Let&#39;s start by the OpenSubdiv presentation made by the Pixar GPU team. It was simply awesome!</p>
<p>Not only the demo were cool and effective by showing how it is working and how things work. But the team took the time to explain in details the internal structure, how to use it in your own application, and talk about their roadmap in improving things... What is also important to know is that it is an open source development project hosted on github. So anyone can contribute to make it even better. Please visit <a href="http://graphics.pixar.com/opensubdiv" target="_self">http://graphics.pixar.com/opensubdiv</a> for more information on this. Finally, I really want to thanks the Pixar GPU team to have given a stop in the ADN M&amp;E conference on their way to Siggraph APAC.</p>
<h2><strong>Next is Profiling vs Debugging</strong></h2>
<p>Ravi Jagannadhan from our consulting team here at Autodesk, made a very good presentation on profiling on how someone can improve Maya performance by spending a reasonable amount of time on profiling Maya. But my learnings here were that instead of talking about profiling C++ in Maya. Ravi get into the details on profiling everything else in Maya but C++. I learned that not only I can run profiling on MEL code, but the Maya DG itself. Why that? Well, we immediately had someone during Devlab which had an issue on performance in the DG, and with Ravi help we identified fairly easy what it was. I need to spend more time on this and practice myself. But I am pretty sure I&#39;ll write something on this in the next couple of weeks.</p>
<h2>Ooops! did I miss anything</h2>
<p>There was 12 other tracks on various subject such as references, OPENData, <a href="http://www.mixamo.com/" target="_self">Animation Store from Mixamo</a>, etc... So you definitely wanted to attend,</p>
<p>But I got a good and bad news for you! the good first, everything was recorded :) but not everything can be shared to public since some presentations contain confidential information. So the good and bad news is that more than half of the presentations will be posted within few weeks on the Autodesk AREA portal - <a href="http://area.autodesk.com/au2012/adn" target="_self">http://area.autodesk.com</a>, and some other with restricted access onto the ADN Sparks portal - <a href="http://adnsparks.autodesk.com" target="_self">http://adnsparks.autodesk.com</a>.&#0160;</p>
<h3>Not over...</h3>
<p>Wish me luck (and to Kevin as well), we both do our AU presentation today.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Heading for Autodesk University in Las Vegas
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: heading-for-autodesk-university-in-las-vegas
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/heading-for-autodesk-university-in-las-vegas.html 
DATE: 11/23/2012 05:04:27 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33e4dd80970b-pi" style="display: inline;"><img alt="AU2012" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c33e4dd80970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33e4dd80970b-800wi" style="float: left; margin: 5px;" title="AU2012" /></a></p>
<p><br /><em>AU is right around the corner (it&#39;s just so hard to believe!).&#0160;</em></p>
<p><em></em>This week is the last week before&#0160;<a href="http://au.autodesk.com/">Autodesk University</a>. Thousands are heading for Las Vegas during the week end and we will be ready for them with great speakers, classes, technology, Innovation forums, vendors,&#0160;<a href="http://www.augi.com/">AUGI</a>&#0160;Annual meeting, entertainment and more.</p>
<p> The ADN Developer Days on the Monday before AU will also be a great place to be to hear about what&#39;s coming next.</p>
<p>In this final week before AU, I am head down for my sessions and events by trying to avoid email to prevent distraction. I said trying... it is really hard to not do anything alike nowadays ;)</p>
<p>Each AU event is unique and I can’t wait to experience&#0160;<a href="http://au.autodesk.com/">AU 2012</a>, and then directly afterwards get some well needed rest and recovery, before doing an APC tour and deliver again these talk in Shanghai, Beijing and Tokyo. Returning home the day before Christmas :S</p>
<p>Hope to see you at AU!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MotionBuilder and Qt
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: motionbuilder-and-qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/motionbuilder-and-qt.html 
DATE: 11/21/2012 02:13:12 AM
-----
BODY:
<p>MotionBuilder UI uses Qt (very much like Maya) but where Maya uses a custom build of Qt, MotionBuilder used a standard Qt build - version 4.7.0 for MotionBuilder 2013.</p>
<p>
1-	Check the current version of QT used by MotionBuilder, see src/Components/ExternalLibraries/qt/src/corelib/global/qglobal.h for QT_VERSION_STR preprocessor.
</p>
<p>2-	Download Qt website (http://qt.nokia.com/downloads/windows-cpp). Check to download the SOURCE package (it is usually the link under the binary .exe package). The source package is named http://get.qt.nokia.com/qt/source/qt-win-opensource-src-4.X.X.zip.
3-	You know need to compile both the 32 bits and 64 bits version of Qt. You will also need to keep the pdbs to be able to debug Qt. I suggest to compile the 32 bits and 64 bits version in their own directory. I don’t know of any easy way to keep both set of binaries in the same dir.
4-	Unzip the Qt zip package in a folder. Name this folder qt-win-opensource-src-4.X.X_win32.
5-	To compile the 32 bits version of Qt:
a.	In Windows Start Menu, choose Programs -&gt; Microsoft Visual Studio 2008 -&gt; Visual Studio Tools -&gt; Visual Studio 2008 Command Prompt. This will pop a console.
b.	Go to your Qt installation directory. cd C:\\ qt-win-opensource-src-4.5.3_win32.
c.	At the prompt type: configure
d.	You will be asked the type of license, choose “o” (open source), then choose “y” (accept this license). This will build Qt with a LGPL license.
e.	Wait a very long time.
f.	When configure is done, at the prompt type: nmake.
g.	Wait a very long time.
6-	Unzip the Qt zip package in a folder. Name this folder qt-win-opensource-src-4.X.X_x64.
7-	To compile the 64 bits version of Qt (you need to be on a 64 bits machine and to have the correct set of compiler):
a.	From your qt-win-opensource-src-4.X.X_win32\bin folder, copy moc.exe and idc.exe into qt-win-opensource-src-4.X.X_x64\bin. This is because the configure.exe program is a 32 bits program and it will need other 32 bits program (moc and idc) to run.
b.	In Windows Start Menu, choose Programs -&gt; Microsoft Visual Studio 2008 -&gt; Visual Studio Tools -&gt; Visual Studio 2008 x64 Cross Tools Command Prompt. This will pop a console.
c.	Go to your Qt installation directory. Type at the prompt: cd C:\\ qt-win-opensource-src-4.X.X_x64.
d.	At the prompt type: configure
e.	You will be asked the type of license, choose “o” (open source), then choose “y” (accept this license). This will build Qt with a LGPL license.
f.	Wait a very long time.
g.	When configure is done, at the prompt type: nmake.
h.	Wait a very long time.
8-	You will now need to create a directory containing Qt headers. These headers will then be added to MoBu. Since Qt does some funky things in its include files it is not sufficient to copy only the include folders. You will need the following folders from the Qt distribution:
a.	\include
b.	src\corelib\: be sure to remove all .cpp files after.
c.	src\corelib\gui\: be sure to remove all .cpp files after.
d.	src\corelib\opengl\: be sure to remove all .cpp files after.
9-	Now you can install everything in MoBu:
10-	Copy the headers you just prepare in \src\Components\ExternalLibs\qt
11-	Copy the 32 bits libs from \lib to \platform\win32\Components\ExternalLibraries\qt\lib
a.	QtCore4.lib, QtCored4.lib
b.	QtGui4.lib, QtGuid4.lib
c.	QtOpenGl4.lib, QtOpenGld4.lib
12-	Copy the 32 bits libs from \lib to \platform\x64\Components\ExternalLibraries\qt\lib
13-	Copy the 32 bits dlls to \ bin\win32
a.	QtCore4.dll, QtCored4.dll
b.	QtGui4.dll, QtGuid4.dll
c.	QtOpenGl4.dll, QtOpenGld4.dll
d.	Don’t forget to also copy the 3 executables used with Qt:</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: C++ Qt custom widget to Python
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: c-qt-custom-widget-to-python
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plug-in
CATEGORY: Python
CATEGORY: Qt
CATEGORY: UI
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/c-qt-custom-widget-to-python.html 
DATE: 11/19/2012 12:06:43 PM
-----
BODY:
<p>While it is rather easy to create a composite widget using Python and/or a true custom widget using Python (see examples in PyQt distribution /examples/designer/plugins/widgets), it becomes very unintuitive when you use C++ :(</p>
<p>For this post we will be using a true custom Widget and go step by step on what you need to do to get it working and exposed in Maya. For this we will be using a clock (with seconds)</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee56508f9970d-pi" style="display: inline;"><img alt="Clock" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee56508f9970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee56508f9970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Clock" /></a></p>
<p>The first thing is to create the Widget itself. That step is pretty straight forward. Create your .h and .cpp file to make up your control.</p>
<pre class="brush:cpp; toolbar:false">//-----------------------------------------------------------------------------
#pragma once

#include &lt;QWidget&gt;
#include &lt;QtDesigner/QDesignerExportWidget&gt;

class QDESIGNER_WIDGET_EXPORT FullAnalogClock : public QWidget {
	Q_OBJECT

public:
	FullAnalogClock (QWidget *parent =NULL) ;

protected:
	virtual void paintEvent (QPaintEvent *event) ;

} ;</pre>
<p>What is important here is to note the presence of </p>
<pre>QDESIGNER_WIDGET_EXPORT</pre>
<p>This one is important if you want your control to be available and usable in the QtDesigner tool.</p>
<p>Because I prefer to avoid using qmake, I do include the metadata moc file and the end of my implementation file and generate it as a step rule in Visual Studio. But at this stage, it is perfectly ok to build your C++ control the Qt way...
</p>
<pre class="brush:cpp; toolbar:false">//-----------------------------------------------------------------------------
#include &quot;StdAfx.h&quot;
#include &quot;FullAnalogClock.h&quot;

FullAnalogClock::FullAnalogClock (QWidget *parent) : QWidget(parent) {
	QTimer *timer =new QTimer (this) ;
	connect (timer, SIGNAL(timeout ()), this, SLOT(update ())) ;
	timer-&gt;start (1000) ;
	setWindowTitle (tr(&quot;Analog Clock&quot;)) ;
	resize (200, 200) ;
	setVisible (true) ;
	setGeometry (100, 100, 200, 200);
}

void FullAnalogClock::paintEvent (QPaintEvent *) {
	static const QPoint hourHand [3] ={
		QPoint (7, 8),
		QPoint (-7, 8),
		QPoint (0, -40)
	} ;
	static const QPoint minuteHand [3] ={
		QPoint (7, 8),
		QPoint (-7, 8),
		QPoint (0, -70)
	} ;
	static const QPoint secondHand [2] ={
		QPoint (0, 8),
		QPoint (0, -70)
	} ;
	QColor hourColor (127, 0, 127) ;
	QColor minuteColor (0, 127, 127, 191) ;
	QColor secondColor (127, 127, 0, 191) ;
	int side =qMin (width (), height ()) ;
	QTime time =QTime::currentTime () ;

	QPainter painter (this) ;
	painter.setRenderHint (QPainter::Antialiasing) ;
	painter.translate (width () / 2, height () / 2) ;
	painter.scale (side / 200.0, side / 200.0) ;
	// Hour
	painter.setPen (Qt::NoPen) ;
	painter.setBrush (hourColor) ;
	painter.save () ;
	painter.rotate (30.0 * ((time.hour () + time.minute () / 60.0))) ;
	painter.drawConvexPolygon (hourHand, 3) ;
	painter.restore () ;
	painter.setPen (hourColor) ;
	for ( int i =0 ; i &lt; 12 ; ++i ) {
		painter.drawLine (88, 0, 96, 0) ;
		painter.rotate (30.0) ;
	}
	// Minute
	painter.setPen (Qt::NoPen) ;
	painter.setBrush (minuteColor) ;
	painter.save () ;
	painter.rotate (6.0 * (time.minute () + time.second () / 60.0)) ;
	painter.drawConvexPolygon (minuteHand, 3) ;
	painter.restore () ;
	painter.setPen (minuteColor) ;
	for ( int j =0 ; j &lt; 60 ; ++j ) {
		if ( (j % 5) != 0 )
			painter.drawLine (92, 0, 96, 0) ;
		painter.rotate (6.0) ;
	}
	// Second
	painter.setPen (secondColor) ;
	//painter.setBrush (secondColor) ;
	painter.setBrush (Qt::NoBrush) ;
	painter.save () ;
	painter.rotate (6.0 * time.second ()) ;
	painter.drawLine (secondHand [0], secondHand [1]) ;
	//painter.drawConvexPolygon (minuteHand, 3) ;
	painter.restore () ;
}

#include &quot;FullAnalogClock.moc&quot;
</pre>
<p>Now, the first thing that we prepared for, is to support the QtDesigner in case you want to be able to add, edit your control in a GUI environment. To do this, we need to make your DLL a Qt Plug-in. To do that, you need to have these symbols defined.</p>
<pre class="brush:cpp; toolbar:false">#define QT_PLUGIN
#define QT_SHARED
#define QT_NO_DEBUG 1
#define QDESIGNER_EXPORT_WIDGETS</pre>
<p>and have a Qt plug-in class defined</p>
<pre class="brush:cpp; toolbar:false">//-----------------------------------------------------------------------------
#pragma once

#include &lt;QtDesigner/QDesignerCustomWidgetInterface&gt;

class FullAnalogClockPlugin : public QObject, public QDesignerCustomWidgetInterface {
	Q_OBJECT
	Q_INTERFACES(QDesignerCustomWidgetInterface)
private:
	bool initialized ;

public:
	FullAnalogClockPlugin (QObject *parent =NULL) ;

	bool isContainer () const ;
	bool isInitialized () const ;
	QIcon icon () const ;
	QString domXml () const ;
	QString group () const ;
	QString includeFile () const ;
	QString name () const ;
	QString toolTip () const ;
	QString whatsThis () const ;
	QWidget *createWidget (QWidget *parent) ;
	void initialize (QDesignerFormEditorInterface *core) ;

} ;</pre>
<p>While the implementation of that class isn&#39;t very difficult there are few thing important like the name(), group() members which will tell the QtDesigner how to categorize your control in its UI. And the macro Q_EXPORT_PLUGIN2 to make your DLL a Qt plug-in.</p>
<pre class="brush:cpp; toolbar:false">//-----------------------------------------------------------------------------
#include &quot;StdAfx.h&quot;
#include &quot;FullAnalogClock.h&quot;
#include &quot;FullAnalogClockPlugin.h&quot;

#include &lt;QtPlugin%gt;

//-----------------------------------------------------------------------------
FullAnalogClockPlugin::FullAnalogClockPlugin (QObject *parent) : QObject(parent) {
	initialized =false ;
}

void FullAnalogClockPlugin::initialize (QDesignerFormEditorInterface * /* core */) {
	if ( initialized )
		return ;
	initialized =true ;
}

bool FullAnalogClockPlugin::isInitialized () const {
    return initialized ;
}

QWidget *FullAnalogClockPlugin::createWidget (QWidget *parent) {
	return new FullAnalogClock (parent) ;
}

QString FullAnalogClockPlugin::name () const {
	return &quot;FullAnalogClock&quot; ;
}

QString FullAnalogClockPlugin::group () const {
	return &quot;Display Widgets&quot; ;
}

QIcon FullAnalogClockPlugin::icon () const {
	return QIcon () ;
}

QString FullAnalogClockPlugin::toolTip () const {
	return &quot;FullAnalogClock clock&quot; ;
}

QString FullAnalogClockPlugin::whatsThis () const {
	return &quot;FullAnalogClock clock&quot; ;
}

bool FullAnalogClockPlugin::isContainer () const {
	return false ;
}

QString FullAnalogClockPlugin::domXml () const {
	return &quot;&lt;ui language=\&quot;c++\&quot;&gt;\n&quot;
		&quot; &lt;widget class=\&quot;FullAnalogClock\&quot; name=\&quot;FullAnalogClock\&quot;&gt;\n&quot;
		&quot;  &lt;property name=\&quot;geometry\&quot;&gt;\n&quot;
		&quot;   &lt;rect&gt;\n&quot;
		&quot;    &lt;x&gt;0&lt;/x&gt;\n&quot;
		&quot;    &lt;y&gt;0&lt;/y&gt;\n&quot;
		&quot;    &lt;width&gt;100&lt;/width&gt;\n&quot;
		&quot;    &lt;height&gt;100&lt;/height&gt;\n&quot;
		&quot;   &lt;/rect&gt;\n&quot;
		&quot;  &lt;/property&gt;\n&quot;
		&quot; &lt;/widget&gt;\n&quot;
		&quot;&lt;/ui&gt;&quot;;
}

QString FullAnalogClockPlugin::includeFile () const {
	return &quot;FullAnalogClock.h&quot; ;
}

Q_EXPORT_PLUGIN2(FullAnalogClockPlugin, FullAnalogClockPlugin)

#include &quot;FullAnalogClockPlugin.moc&quot;</pre>
<p>Build and copy your resulting dll into the Maya or your Qt &#39;qt-plugins\designer&#39; directory. And it should appear and work into your QtDesigner. It will also work if you create a .ui file using QtDesginer and load that .ui in Maya using the loadUI MEL command, I.e.:</p>
<pre class="brush:cpp; toolbar:false">$uiName= `loadUI -uiFile &quot;e:/clock.ui&quot;`;
showWindow $uiName;
</pre>
<p>and/or</p>
<pre class="brush:cpp; toolbar:false">$uiName= `loadUI -uiFile &quot;e:/clock.ui&quot;`;
dockControl -allowedArea &quot;all&quot; -area &quot;right&quot; -floating off -content $uiName -label &quot;Custom Dock1&quot;;
</pre>
<p>Now this is where it becomes tricky. Ok, but what about Python? if you use the Maya command loadUI, no change, but if you decide to use PyQt for example - that won&#39;t work as is. This is because PyQt needs a sip wrapper to work with Qt Widget written in C++. See this <a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html" target="_self">post</a> for more details.</p>
<p>The first thing is to create a .sip file</p>
<pre class="brush:cpp; toolbar:false">// Define the SIP wrapper to the FullAnalogClock library.

%Module(name=FullAnalogClock, keyword_arguments=&quot;Optional&quot;) 

%Import QtGui/QtGuimod.sip

%If (Qt_4_7_1 -)

class FullAnalogClock : public QWidget {

%TypeHeaderCode
#include &lt;FullAnalogClock.h&gt;
%End

public:
	FullAnalogClock(QWidget *parent /TransferThis/ = 0);
protected:
	virtual void resizeEvent(QResizeEvent *);
	virtual void paintEvent(QPaintEvent *e);
};
%End
</pre>
<p>Beyond the %Module, %Import - what is really important is to have the 2 virtuals resizeEvents() and paintEvents() present. Otherwise your control will not appear as SIP won&#39;t be able to make the connection from PyQt.</p>
<p>Next is to create a config file to build the SIP wrapper.</p>
<pre class="brush:python; toolbar:false">import os
import sipconfig
from PyQt4 import pyqtconfig

# The name of the SIP build file generated by SIP and used by the build
# system.
build_file = &quot;FullAnalogClock.sbf&quot;

# Get the PyQt configuration information.
config = pyqtconfig.Configuration()

# Get the extra SIP flags needed by the imported PyQt modules.  Note that
# this normally only includes those flags (-x and -t) that relate to SIP&#39;s
# versioning system.
pyqt_sip_flags = config.pyqt_sip_flags

# Run SIP to generate the code.  Note that we tell SIP where to find the qt
# module&#39;s specification files using the -I flag.
##os.system(&quot; &quot;.join([config.sip_bin, &quot;-c&quot;, &quot;.&quot;, &quot;-b&quot;, build_file, &quot;-I&quot;, config.pyqt_sip_dir, pyqt_sip_flags, &quot;FullAnalogClock.sip&quot;]))
config.sip_bin =&quot;s:\\Python\\sip&quot;
test =&quot; &quot; . join([config.sip_bin, &quot;-c&quot;, &quot;.&quot;, &quot;-b&quot;, build_file, &quot;-I&quot;, &quot;\&quot;&quot; + config.pyqt_sip_dir + &quot;\&quot;&quot;, pyqt_sip_flags, &quot;FullAnalogClock.sip&quot;])
os.system (test)

# We are going to install the SIP specification file for this module and
# its configuration module.

installs = []
installs.append([&quot;FullAnalogClock.sip&quot;, os.path.join(config.default_sip_dir, &quot;FullAnalogClock&quot;)])
installs.append([&quot;FullAnalogClockconfig.py&quot;, config.default_mod_dir])

# Create the Makefile.  The QtGuiModuleMakefile class provided by the
# pyqtconfig module takes care of all the extra preprocessor, compiler and
# linker flags needed by the Qt library.
makefile = pyqtconfig.QtGuiModuleMakefile(
    configuration=config,
    build_file=build_file,
    installs=installs
)

# Add the library we are wrapping.  The name doesn&#39;t include any platform
# specific prefixes or extensions (e.g. the &quot;lib&quot; prefix on UNIX, or the
# &quot;.dll&quot; extension on Windows).
makefile.extra_libs = [&quot;FullAnalogClock&quot;]
#makefile.CFLAGS.append(&quot;-l..&quot;)
#makefile.LFLAGS.append(&quot;-L../x64/Release&quot;)
# Generate the Makefile itself.
makefile.generate()

# Now we create the configuration module.  This is done by merging a Python
# dictionary (whose values are normally determined dynamically) with a
# (static) template.
content = {
    # Publish where the SIP specifications for this module will be
    # installed.
    &quot;FullAnalogClock_sip_dir&quot;:    config.default_sip_dir,

    # Publish the set of SIP flags needed by this module.  As these are the
    # same flags needed by the qt module we could leave it out, but this
    # allows us to change the flags at a later date without breaking
    # scripts that import the configuration module.
    &quot;FullAnalogClock_sip_flags&quot;:  pyqt_sip_flags
}

# This creates the FullAnalogClockconfig.py module from the FullAnalogClockconfig.py.in
# template and the dictionary.
sipconfig.create_config_module(&quot;FullAnalogClockconfig.py&quot;, &quot;FullAnalogClockconfig.py.in&quot;, content)
</pre>
<p>You also need a FullAnalogClockconfig.py.in, but this one can be empty or contains the following:</p>
<pre class="brush:python; toolbar:false">from PyQt4 import pyqtconfig

# These are installation specific values created when FullAnalogClock was configured.
# The following line will be replaced when this template is used to create
# the final configuration module.
# @SIP_CONFIGURATION@

class Configuration(pyqtconfig.Configuration):
    &quot;&quot;&quot;The class that represents FullAnalogClock configuration values.
    &quot;&quot;&quot;
    def __init__(self, sub_cfg=None):
        &quot;&quot;&quot;Initialise an instance of the class.

        sub_cfg is the list of sub-class configurations.  It should be None
        when called normally.
        &quot;&quot;&quot;
        # This is all standard code to be copied verbatim except for the
        # name of the module containing the super-class.
        if sub_cfg:
            cfg = sub_cfg
        else:
            cfg = []

        cfg.append(_pkg_config)

        pyqtconfig.Configuration.__init__(self, cfg)

class FullAnalogClockModuleMakefile(pyqtconfig.QtGuiModuleMakefile):
    &quot;&quot;&quot;The Makefile class for modules that %Import FullAnalogClock.
    &quot;&quot;&quot;
    def finalise(self):
        &quot;&quot;&quot;Finalise the macros.
        &quot;&quot;&quot;
        # Make sure our C++ library is linked.
        self.extra_libs.append(&quot;FullAnalogClock&quot;)

        # Let the super-class do what it needs to.
        pyqtconfig.QtGuiModuleMakefile.finalise(self)
</pre>
<p>and last do the build</p>
<pre class="brush:cpp; toolbar:false">@echo off

set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2013.5
set SIP=E:\sip-4.13.3
set PYQT=E:\PyQt-win-gpl-4.9.4
set MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 10.0
set MSVC_VERSION=2010
set QTDIR=v:\qt-adsk-4.7.1
set QMAKESPEC=win32-msvc%MSVC_VERSION%

subst s: /d
subst s: &quot;%MAYA_LOCATION%&quot;
set MAYA_LOCATION=s:

subst v: /d
subst v: &quot;E:\__sdkext\_Maya2013-5 Scripts&quot;

call &quot;%MSVC_DIR%\VC\vcvarsall.bat&quot; amd64

set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.6;%MAYA_LOCATION%\Python\include;%MAYA_LOCATION%\include\Qt;%MAYA_LOCATION%\include\QtCore;%MAYA_LOCATION%\include\QtGui;..
set LIB=%LIB%;%MAYA_LOCATION%\lib;..\..\Movie\x64\Release

e:
cd &quot;E:\Projects\CP2520\AnalogClock\sip&quot;
&quot;%MAYA_LOCATION%\bin\mayapy&quot; ./configure.py 

nmake
nmake install
</pre>
<p>Now go and run in Maya, you&#39;re done. The FullAnalogClock.pyd and FullAnalogClockconfig.py should have been copied into the Maya &#39;Python/Lib/site-packages&#39; directory. One little thing when you in Maya, you still need to teach Maya where to the find the dll. The following code should so it simply:</p>
<pre class="brush:python; toolbar:false">import sys, os
sys.path.append(&quot;C:/Program Files/Autodesk/Maya2013.5/qt-plugins/designer&quot;)
os.environ[&#39;PATH&#39;] =os.environ[&#39;PATH&#39;] + &quot;;C:/Program Files/Autodesk/Maya2013.5/qt-plugins/designer&quot;
</pre>
<p>The full code:</p>
<pre class="brush:python; toolbar:false">import sys, os
sys.path.append(&quot;C:/Program Files/Autodesk/Maya2013.5/qt-plugins/designer&quot;)
os.environ[&#39;PATH&#39;] =os.environ[&#39;PATH&#39;] + &quot;;C:/Program Files/Autodesk/Maya2013.5/qt-plugins/designer&quot;

import sip
from PyQt4 import QtCore, QtGui
import FullAnalogClock

import os, re, sys
import maya.cmds as cmds
import maya.OpenMayaUI as mui

global app
global videop

class videoPlayer(QtGui.QDialog):
	def __init__(self, parent  = None):
		QtGui.QWidget.__init__( self, parent )
		self.parent = parent
		self.setSizePolicy(QtGui.QSizePolicy.Expanding, QtGui.QSizePolicy.Preferred)
		self.resize(500,500)

		self.clock = FullAnalogClock.FullAnalogClock(self)
		self.clock.resize(100, 100)
		self.clock.setVisible(True)

		layout = QtGui.QHBoxLayout(self)
		layout.addWidget(self.clock)
		self.setLayout(layout)

def test():
	global app
	app = QtGui.QApplication.instance()
	ptr = mui.MQtUtil.mainWindow()
	win = sip.wrapinstance(long(ptr), QtCore.QObject)

	global videop
	videop = videoPlayer(win)
	videop.show()
	return videop

test()
</pre>
<p>And you&#39;ll get the following :)</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3df06dca970c-pi" style="display: inline;"><img alt="Clock-result" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3df06dca970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3df06dca970c-800wi" title="Clock-result" /></a><br /><em>Result with a a clock created using SIP/PyQt code (top)</em><br /><em> and using the .ui &amp; MEL command loadUI (bottom)</em></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: No 64bit integer attribute in Maya? no way!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: no-64bit-integer-attribute-in-maya-no-way
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plug-in
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/no-64bit-integer-attribute-in-maya-no-way.html 
DATE: 11/15/2012 01:30:00 AM
-----
BODY:
<p>Ok, but where is it?</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d700355970c-pi" style="display: inline;"><img alt="Where-is-it" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d700355970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d700355970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Where-is-it" /></a><br />If you take a look to the Maya API documentation you will find a lot of things about 64b support, but the only classes specific to 64b will be:</p>
<ul>
<li>the&#0160;MUint64Array which is an array of MUint64 data type,</li>
<li>the MFnUInt64ArrayData class which allows the creation and manipulation of the MUint64Array objects for use in the dependency graph when the MDataHandle::type() method returns kUInt64Array.</li>
</ul>
<p>The&#0160;MFnUInt64ArrayData /&#0160;MUint64Array /&#0160;MUint64 classes are present in the API to support Subdivision surface&#0160;(I.e.&#0160;MFnSubd /&#0160;MFnSubdNames /&#0160;MFnUint64SingleIndexedComponent /&#0160;MItSubdEdge /&#0160;MItSubdFace /&#0160;MItSubdVertex)</p>
<p>Now there are some other classes in the devkit like the Mint64 class, but you would not find it documented anywhere since there isn&#39;t any direct use of it anywhere in Maya or the Maya DG :(</p>
<p>There is currently no support of single signed / unsigned 64b integer attribute in Maya, but fortunately for us, Maya is versatile in a way that it can handle any data type (simple or complex). Anyone can eventually expose a custom attribute type. The example provided along this post demonstrate how to do this. But before we go into details there is one important thing to know before using 64b attributes in Maya. While the Maya API (C++ or Python) can work easily with 64b integer. MEL and the Python commands will not! This is because MEL is not 64b capable. The MEL engine is a 32b engine only, so you would not be able to query a 64b integer attribute value and store it into a MEL variable for example.</p>
<p><span style="text-decoration: underline;">Example:</span> assuming&#0160;myInt64 is a 64b integer attribute</p>
<pre class="brush: cpp; toolbar: false;">$val64 = 0xFFFFFFFF64; // that will fail since MEL cast it to 0x7FFFFFFF which is a signed 32b integer
setAttr sphere1.myInt64 $val64; // already wrong on the line above
setAttr sphere1.myInt64 0xFFFFFFFF64; // that will work, see below why
getAttr&#0160;sphere1.myInt64; // that will fail with an error, MEL will never return a value
</pre>
<p>getAttr fails because the MEL interpreter cannot handle 64b integer since MEL is a 32b engine. But then why setAttr is working fine to assign a 64b integer? Simply because the value is passed as a string and evaluated in by the C++ API vs MEL interpreter. However we can&#39;t read it back :(<br />Python setAttr/getAttr commands will behave exactly the same since the Python commands are wrapper of the MEL equivalent commands. So even if the Python interpreter can handle 64b integer variable, when it goes to the MEL interpreter, you&#39;ll get the same results. At the time of this post, only the API (C++ and Python) can work with 64b integer attribute.</p>
<h2>An 64b attribute implementation</h2>
<p>First we need to define and create the class which Maya will use to handle our 64b integer data. For this we will create and register a class in Maya using the MPxData&#0160;base class.</p>
<pre class="brush: cpp; toolbar: false;">class MInt64Data : public MPxData {};

MFnPlugin.registerData (MInt64Data::typeName, MInt64Data::id, MInt64Data::creator, MPxData::kData)
</pre>
<p>This is really the only thing you need to do to add 64b attribute support in Maya. The complete implementation for the&#0160;MInt64Data can be found in the sample <a href="http://around-the-corner.typepad.com/files/Int64AttributeData.zip" target="_self">here</a>&#0160;(<strong>Int64AttributeData</strong> sample). From there, when the plug-in is loaded in Maya, Maya can handle static, dynamic, and&#0160;extension attributes with 64b integer data type.</p>
<p>The sample also expose and exports a MFn class to handle the attribute data type from an API standpoint. The class is class&#0160;MFnInt64Data derived from MFnPluginData.</p>
<pre class="brush: cpp; toolbar: false;">class DLLIMPEXP MFnInt64Data : public MFnPluginData {};</pre>
<p>The&#0160;<strong>Int64AttributeDataNodes</strong> sample is there to supply a node which can connect to our 64b attributes and convert data back and force to string, so it they can be used to read/write 64b integer from MEL indirectly as string. It also use an unsigned int64 data type vs signed unlike the previous example.</p>
<p>The&#0160;<strong>Int64AttributeDataWC</strong> is another sample which tries to solve the MEL limitation another way by splitting a 64b attribute data in low and high word numbers into a MEL array.</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: November’s Plugin of the Month live on Autodesk Labs: MASH nodes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: novembers-plugin-of-the-month-live-on-autodesk-labs-mash-nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Plugin of the Month
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/novembers-plugin-of-the-month-live-on-autodesk-labs-mash-nodes.html 
DATE: 11/13/2012 02:44:00 AM
-----
BODY:
<p>Another month, another plugin. :-)</p>
<p>As&#0160;<a href="http://labs.blogs.com/its_alive_in_the_lab/2012/11/free-november-adn-plugin-of-the-month-mashnodes-for-maya.html" target="_blank">announced over on Scott’s blog</a>&#0160;a few days ago, the latest&#0160;<a href="http://labs.autodesk.com/utilities/ADN_plugins/" target="_blank">Plugin of the Month</a>&#0160;is now live. </p>
<p>MASH is a suite of Maya nodes, developed in-house at Mainframe, aimed at enabling their artists to create versatile &#39;motion design&#39; style animations. It offers a selection of effector nodes which can be daisy-chained together to generate a wide variety of customizable effects. It&#39;s fully controllable from both Maya&#39;s Attribute and Node Editors.</p>
<p>MASH has been tested in Maya 2013 on both Mac and PC; however, it should work on all Maya versions back to 2010. The source code has been provided as Python source code available in the plug-ins folder after install. The &#39;Waiter&#39; is the crux of MASH. It&#39;s a selection set, objects you drag onto the Waiter will be effected by the MASH network. The Waiters Attribute Editor is also the place to create nodes for the network, set the initial state for any objects and there&#39;s also a helper button to hook MASH up to a Maya instancer.</p>
<p>Thanks to <strong>Chris Hardcastle&#0160;</strong>and <strong>Ian&#0160;Waters</strong>&#0160;from Mainframe North Ltd who shared their plug-ins and code.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Vote for Visual Studio x64 Edit-and-Continue
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: vote-for-visual-studio-x64-edit-and-continue
CATEGORY: .Net
CATEGORY: 3ds Max
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Debugging
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: SoftImage
CATEGORY: Visual Studio
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/vote-for-visual-studio-x64-edit-and-continue.html 
DATE: 11/11/2012 11:07:00 PM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d5fa28d970c-pi" style="display: inline;"><img alt="Voted" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d5fa28d970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d5fa28d970c-120wi" style="float: left; padding: 7px;" title="Voted" /></a>A colleague in one of our product development teams pinged me today to ask for my support in voting up&#0160;<a href="http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2037667-x64-edit-and-continue" target="_blank">this request for Microsoft to implement x64 edit-and-continue</a>. I’m sure this isn’t the first time this topic has been raised with Microsoft – but hopefully it will be the last&#0160;<img alt="Winking smile" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b017d3d5bcd17970c-pi" />. I went ahead and added my votes. And what’s a blog for, if not to nudge your readers into helping each other out once in a while&#0160;<img alt="Smile" src="https://adndevblog.typepad.com/.a/6a0167607c2431970b017ee4d113ad970d-pi" />.</p>
<p>I know of many programmers who use Windows 32-bit on their dev machines purely for this feature in Visual Studio. Make your vote count.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya Stereoscopic Cameras
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-stereoscopic
CATEGORY: C++
CATEGORY: CG
CATEGORY: Cyrille Fauvel
CATEGORY: Films
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/maya-stereoscopic.html 
DATE: 11/08/2012 04:00:00 AM
-----
BODY:
<p>This post provides an in-depth discussion and review of stereoscopic cameras. We will focus specifically on Autodesk® Maya® software representations and how technical artists and programmers can take advantage of the core architecture to bring stereoscopic to their next production. This document will be very technical in focus and provides code samples, scripts, and high level mathematics for various components of the S3D pipeline. For those who do not have a programming background, code samples will be offset in separate boxes or included in the appendix so that they can be referenced later or skipped entirely.<br />Finally, we will skip the high level overview of stereoscopic 3D (S3D). For those readers that do not have a background about S3D or its business case, please refer to Stereoscopic Filmmaking White Paper [1] that provides a comprehensive introduction to S3D and the main business drivers. Additionally Ray Zone provides a history of S3D cinema [2].</p>
<p>An introduction to Maya Camera Model was posted <a href="http://around-the-corner.typepad.com/adn/2012/11/cameras-in-maya.html" target="_self">here</a>.</p>
<h2>Stereoscopic Camera Model</h2>
<p>The stereoscopic camera model is based on ability of the human perceptual image to take two unique perspective views and use that information to construct a 3D representation of the real world. It is not enough to simply have two perspective views and call the problem solved. There are human perceptual rules you must obey to create pleasing images. This section will not cover these human perceptual rules and assumes the reader has the necessary background before continuing [3] [1]. However we will provide formulas for some more advanced setups that allow higher level control over the stereo camera rig such that artists can more easily construct pleasing S3D imagery. This section focuses on how the concepts that are based on human binocular vision are replicated in a S3D world.</p>
<p>At the base of our representation is a two camera model. This makes sense because humans have two eyes. Therefore, we should create pairs of cameras to represent a set of eyes. A common trick in the industry is to represent this as a single camera with additional parameters to control pseudo second eye. The downside to this approach is that you have to add additional code to each place where knowledge about the camera is used and add these parameters. It is a better approach to augment existing work and simply build high-level tools that work on top of a single perspective camera model.</p>
<p>There are three different ways that we can position these cameras to achieve a stereoscopic effect.</p>
<ul>
<li><strong>Parallel</strong> – two cameras side-by-side look at infinity.</li>
<li><strong>Off-axis</strong> – using the film offset parameters that we described above.</li>
<li><strong>Toe-in</strong> – two cameras rotated in-ward focusing at a point in space.</li>
</ul>
<p>In S3D, we want to simulate a zero parallax effect with divergence and convergence without having to rotate cameras and create the toe-in or issues of vertical parallax [5]. We can use the math above to construct converging and diverging stereo images with zero parallax setting. Like all work before us, we assume two key parameters for this effect:</p>
<ul>
<li><strong>Zero Parallax</strong> (Z<sub>p</sub>) – point of convergence for a left and right stereo pair.</li>
<li><strong>Interaxial Distance</strong> (I<sub>d</sub>) – the instance between two virtual cameras.</li>
</ul>
<p>We see these parameters as the core definition to a S3D of which higher level tools to manipulate S3D cameras are constructed and other tools in the pipeline.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c333148c5970b-pi" style="display: inline;"><img alt="F1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c333148c5970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c333148c5970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="F1" /></a><strong><span style="text-decoration: underline;">Equation 1: Off-axis offset formula</span></strong></p>
<p>The above formula computes the film offset value for the left camera in a stereo camera pair. This is the main formula for <strong>off-axis</strong> S3D projection. This formula may vary slightly depending on how artists set up their camera rigs from studio to studio. For instance, some studios will choose to have a single camera be the master for all of their 2D images and augment that camera with a second camera. This has the benefit of encoding stereo as a second image in the 2D pipeline. This type of setup only removes the 0.5 multiplier in the above formula. Parallel rigs are equivalent to having a zero parallax setting at infinity and everything exists in theatre space [1].</p>
<p>Additionally, studios may elect to construct a toe-in based stereo image. A toe-in rig is rarely used as it will produce trapezoidal distortion and does not produce a true zero parallax plane [5].</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d51701970d-pi" style="display: inline;"><img alt="F2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee4d51701970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d51701970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="F2" /></a><strong><span style="text-decoration: underline;">Equation 2: toe-in camera rotation value</span></strong></p>
<p>Nonetheless, occasions arise where the need for a toe-in rig is necessary. The equation above computes the camera rotation for the left and right camera pairs. In this equation we do not compute the film offset – the value <em>O</em> of is 0. We are simply computing the rotation for each camera using right triangles. The computed rotation value is then applied to the left cameras as -R and to the right camera as R.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d51bbb970d-pi" style="display: inline;"><img alt="Toe-in" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee4d51bbb970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d51bbb970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Toe-in" /></a><span style="text-decoration: underline;"><strong>Figure 4: Toe-in</strong></span></p>
<p>Parallel or toe-in rigs will have their uses in different types of shots. The most common situation for toe-in rigs is in scenes where vertical parallax does not occur or is not evident. Good examples would be sequences where a single object is at the center of the screen with a black background or green screen.</p>
<p>Since there is only one place to look in the scene and the object is centered, there is minimal issue with vertical parallax. Although the topic is still very much debated [2] [6], in general the use of toe-in rigs is best avoided, since besides the potential for artifacts in the final images that can cause viewer eye strain, toe-in rigs also complicate processing further down the pipeline. Parallel rigs are often used for background objects where there is no obvious object drawing focus.</p>
<h2>Maya Stereo (S3D) Camera Rig</h2>
<p>In Autodesk Maya 2009, the stereo camera calculates the horizontal shift. Users specify the interaxial and zero parallax values, and the camera shift is computed to produce the appropriate parallax. The components for visualizing stereo images are completely abstracted from the components that define the camera rig, and Maya provides an API override the default camera rig. This allows users to customize Maya’s standard rig to a form that will fit their production pipeline. Also, the Maya rig was built so that it could be augmented with higher level tools. For instance, it is more intuitive for artists to use tools that pre-establish the I<sub>d</sub>&#0160;based on known limitations of the human visual system to fuse images. The Bercovitz formula [7] specifies the appropriate interaxial given the maximum desired separation, near object, the far object, the focal length and the focus distance, i.e., Z<sub>p</sub>. The Bercovitz model can be added into Autodesk Maya using the API and foundation math provided.</p>
<p>This section will summarize the behavior and structure of the Maya stereo camera and explain how to rigs can be hooked into the Maya application. Subsequent sections will introduce new camera rig models and illustrate by example how to add they camera model into Maya.</p>
<h3>Stereo Rig Structure</h3>
<p>A stereo camera rig is defined implicitly by the data that exists on the node and its position in the DAG hierarchy. So all UI automatically detects a stereo camera assuming you define your data accordingly. The definition of a stereo camera in Maya has 2 parts:</p>
<ul>
<li>All stereo camera rigs have a root transform and a camera shape hanging directly off of this camera transform. We call the camera shape the <strong>main camera</strong> and the root transform <strong>stereo rig root</strong>.</li>
<li>When Maya scans for cameras in the scene it checks to see if a camera is a stereo camera by going up one level to the stereo rig root and checks for the existence of the following attribute:<br />
<ul>
<li><em>stereoRigType</em> – a string attribute that defines the name of the stereo rig. Maya default stereo camera rig has the name ‘Stereo Camera’. Your rig type should be a unique string, ideally not something called ‘Stereo Camera’, although it is possible to name your camera ‘Stereo Camera’ and remove Maya’s stereo camera model.</li>
<li><em>centerCam</em> – is a message attribute that points to the main camera. This attribute does not necessarily have to point to a unique camera. In circumstances where the left camera is identical to the center camera this attribute can point to the left camera.</li>
<li><em>leftCam</em> – is a message attribute that points to the left camera.</li>
<li><em>rightCam</em> – is a message attribute that points to the right camera.</li>
</ul>
</li>
</ul>
<p>It is perfectly valid and possible to make a simple mono camera into a stereo camera by simply adding the attributes above.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d53973970d-pi" style="display: inline;"><img alt="Stereo-outliner" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee4d53973970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4d53973970d-800wi" style="float: right;" title="Stereo-outliner" /></a></p>
<p>Before continuing, it is important to note why we choose a data driven approach to representing stereo camera rigs. First, as a counter example, let’s describe a common, alternative, representation. The alternative implementation to this setup is to have a command / callback approach to querying information about the stereo camera. The user would register a series of commands with a manager. That manager would invoke those commands when ‘discovering’ or querying stereo rigs. The downside to this approach is that closes the access to the information to a specific script or API function so the information is not as transparent to the user. It also makes transporting the stereo rig in the pipeline more difficult because code must be written to support the rig in other software packages. In a data driven approach, the information about the stereo camera rig is transparent and easily transported to another software package without the need to transport the code that created the stereo cameras. This also makes it easy to augment existing tools with new tools without having the need to change custom tools.</p>
<p>The film pipeline is becoming more complex and it is necessary to transport the data created in one software package to another package transparently; so data driven representations are becoming increasingly more important. For stereo, in particular, the entire pipeline is affected and requires a holistic approach to dealing with the data transport [8].</p>
<p>The structure outlined above only makes stereo camera rigs visible to the Maya tools – particularly the stereoscopic visualization. However, it doesn’t provide an easy mechanism to create new cameras from within the Maya UI. Fortunately there is a manager that hooks into the creation UI to allow new camera rigs to be created from the Maya UI.</p>
<h3>Camera Creation Mechanism</h3>
<p>Camera creation is control via a stereoscopic rig manager (stereoRigManager). This is the only command / script registry that is used for S3D rigs. It is essential because no other representation exists in Maya to indicate how stereoscopic rigs are created. Everything is gathered implicitly from existing scene data as outline in the section above.</p>
<p>The Maya stereoscopic rig manager will accept Python or MEL scripts. New rig creation scripts are registered via the ‘-add’ flag on the stereo rig manager. The following text box below illustrates some examples.</p>
<pre class="brush: python; toolbar: false;"># Remember the default rig
defRigBefore = cmds.stereoRigManager(query=True, defaultRig=True)
# Register new rig types, using MEL or Python implementations.
cmds.stereoRigManager(add=[&#39;StereoCameraHier&#39;, &#39;Python&#39;, &#39;maya.app.stereo.stereoCameraHierarchicalRig.createRig&#39;])
cmds.stereoRigManager(add=[&#39;StereoCameraMulti&#39;, &#39;Python&#39;, &#39;maya.app.stereo.stereoCameraComplexRig.createRig&#39;])
cmds.stereoRigManager(add=[&#39;StereoCameraSimple&#39;, &#39;MEL&#39;, &#39;stereoCameraSimpleRig&#39;])
</pre>
<p style="text-align: center;"><strong><span style="text-decoration: underline;">Figure 5: Rig Manager Registration</span></strong></p>
<p>Via this rig manager, users can add scripts that create new stereo rigs. The responsibility of the script is to simply return the <strong>main camera</strong>, left camera, and right camera shapes. Since we assume that the <strong>stereo rig root</strong> is a direct parent of main camera we can find the rig root implicitly. When the command to create a new rig is issued from the UI the corresponding script is called. The script is expected to return the required camera shapes. The underlying tools will then add metadata attributes specified in the Stereo Rig Structure section automatically – it is not necessary for the script to create these attributes; however, if they exist then they are not overwritten.</p>
<p>There are a few important considerations when registering your own camera creation mechanism.</p>
<ul>
<li>The rig creation script is not saved out when a file is saved. So to integrate new tools into a Maya based S3D pipeline, it will be necessary to register a rig when Maya is first started. This can be customized in start-up scripts. This topic is outside the scope of this white paper, but there are many tools available to facilitate this process.</li>
<li>It is also possible to delete registered rigs using the ‘-delete’ flag. Users can even delete Maya’s default camera rig. However, when the default rig is deleted there must be another rig registered to replace it.</li>
</ul>
<h3>Simple Custom S3D Rig</h3>
<p>For illustrative purposes, we will outline a very simply camera rig structure. The structure will be a left / right camera with the right camera also acting as the master camera.</p>
<pre class="brush: cpp; toolbar: false;">global proc string[] stereoCameraSimpleRig()
{
string $basename = &quot;stereoCameraSimple&quot;;
// Create the root of the rig
//
string $root[] = `camera -name $basename`;
string $left[] = `camera -name ($basename+&quot;Left&quot;)`;
setAttr ($left[0]+&quot;.tx&quot;) -6.32;
parent $left[0] $root[0];
select -r $root[0];
return {$root[0], $left[1], $root[1]};
}
stereoRigManager -add &quot;simpleRig&quot; &quot;MEL&quot; &quot;stereoCameraSimpleRig&quot;;</pre>
<p style="text-align: center;"><strong><span style="text-decoration: underline;">Figure 6: Simple MEL script for Custom Rig</span></strong></p>
<h2>Visualizing</h2>
<p>A critical aspect to S3D production is visualizing the S3D image. Consideration must be given to how you will review the content. Maya has built-in support for visualizing a stereoscopic pair using several different viewing modes. In addition, it is important to have a process to review stereoscopic content. This process is outside the scope of this white paper but it is something that must be planned and considered. In some cases, there is a cost to consider as well.</p>
<p>At the very least, you should have a theatre-sized room where you can review the stereoscopic content comparable to the audience theatre. This is important because scale plays a big factor in the depth perception. A larger screen implies a larger separation between the projected images and scales the overall depth in the scene.</p>
<p>So to understand the scale of an S3D image you should always approve in mini-theatrical environment. Again, the Bercovitz formulas [7] provide mathematics to help set the appropriate separation based on the desired maximum pixel separation.</p>
<p>Viewing Methods</p>
<p>The technology keeps advancing and vendors are bringing 3D to the masses. At the current pace, technology companies want to install a 3D television in every household. It remains to be seen if this will happen. However, the technology by which to visualize S3D images varies greatly and is constantly changing. There are two main types of stereoscopic content:</p>
<ul>
<li><strong>Passive</strong> – the display or projector is altering the light such that each eye receives a unique perspective. The viewer typically wears a lightweight pair of glasses where each lens of the eyeglasses is sensitive to a different spectrum or polarization of the light.</li>
<li><strong>Active</strong> – this is where the glasses participate in the controlling what light reaches the eyes of the viewer. Active usually have electronics built directly into the glasses that are synchronized to an external source that is telling what lens should be open. The frequency by which this changes happens so rapidly that it is not perceived by the viewer.</li>
</ul>
<p>Maya supports several viewing methods covering the current spectrum of technologies including passive and active methods.</p>
<ol>
<li><strong>Anaglyph</strong> -- this is the traditional red / cyan glasses that you find in magazines or 3D movies. The nice thing about anaglyph is that it is cheap and easily accessible. Anaglyph in Maya is performed by simply filtering the green and blue color channels, drawing everything in the scene, then repeating the process with the right camera filter the red channel. Note that color bleeding can occur where the objects color passes through only one filter. There are alternative techniques to anaglyph that attempt to balance the colors so that they don’t bleed in the channels. Maya does not support this mode at the moment.</li>
<li><strong>Luminance Anaglyp</strong>h – this is similar to anaglyph mode although it converts all color channels to a luminance based model and then apply the red-cyan filtering.</li>
<li><strong>Stereo (Quadbuffer Mode)</strong> – this is the catch all mode for those who have dedicated hardware to visualize stereo. This is the stereo mode supported by mid-level to high-end NVidia Quadro based graphics cards. The output of this mode is controlled via graphics card driver. Maya can output directly to large screen environments using this mode. Typically the common viewing methods are<br /><ol type="a">
<li><strong>Shuttering glasses</strong> – an active based viewing system.</li>
<li><strong>Clone mode</strong> – each eye is sent on a different output of the graphics card.</li>
</ol></li>
<li><strong>Checkerboard</strong> – this mode is for displays that use an active method to display stereo. The pixels are interlaced in a checkerboard fashion and the display flickers between the two sets rapidly.</li>
<li><strong>Horizontal Interlaced</strong> – this mode is for displays that support a passive visualization of stereo content. This is achieved with a special manufacturing process on LCD screens that polarize the light depending on the pixel position.</li>
<li><strong>Freeview</strong> – this mode is for people who want to see a side-by-side view of the left and right cameras or those who are capable of ‘freeviewing’ stereo, i.e. look at a pair of images and fuse the images by controlling the ocular muscles of the eyes.</li>
</ol>
<p>These methods are the most common stereoscopic visualization techniques used at the time of the writing. Depending on the hardware will dictate the type of view mode.</p>
<h3>Hardware Considerations</h3>
<p>It is not practical to supply every artist with a machine that can display stereoscopic imagery. The focus should be on proper viewing rooms where groups of people can review the content. For the layout&#0160;artists, editorial, and compositors stereoscopic displays should be made available so that their work can be visualized as it is being completed and before it makes it to daily review. It is not the objective of this paper to recommend any particular piece of hardware, but rather to provide some guidelines to consider when making the investment in hardware:</p>
<ol>
<li><strong>Refresh Rate</strong> – the stereoscopic effect is achieved by showing each eye a unique perspective. So each eye must receive an image fast enough such that flicker is not visible. At least 120 Hz for vertical refresh rate is necessary to produce a smooth visual image.</li>
<li><strong>Polarized / Active</strong> – active glasses can be expensive. For occasional users on individual workstations they are nice. Some people also complain about eye fatigue with these types of glasses. Polarized are more on par with the final viewing medium and perfect for larger environments.</li>
<li><strong>Interlaced Displays</strong> – there is usually a loss of image resolution in these displays. For those artists who need to work with the original plates, i.e. editorial or DI, interlace is not the best suited display.</li>
<li><strong>Anaglyph is not that bad</strong> – for those artists who want to occasionally visualize the stereoscopic content, but it is not a necessary function, Analgyph is the way to go. It is cheap and easy to deploy. Sure it is a bit “retro”, but it works great for quick visualization.</li>
</ol>
<h2>Sharing S3D in the Pipeline</h2>
<p>This paper has only discussed the frontend scene construction of an S3D pipeline. Consideration must be given to stereoscopic scene construction as it is handed off to other parts of the pipeline. Particularly editing and editorial changes directly influence the stereoscopic setup in a scene. Human stereoscopic vision centers cannot handle the drastic changes in interocular, zero parallax value, and focal length. Any rapid cuts or edits of the former would likely cause an unpleasant viewing experience or severe headaches caused by the rapid transitions. Therefore if a series of sequences have been laid out and consideration was taken to make sure that the cuts did not cause visual processing problems by the audience, then any changes to a sequence must reconsider the sequence from a stereoscopic perspective as well. However, often in the editing process, re-rendering is not always a viable option.</p>
<p>Fortunately, it is possible to alleviate some of these issues by proper planning in the pipeline. For instance, it is possible to change the interaxial and zero parallax of rendered scene if you have the depth map and prior knowledge about the render settings, i.e. interaxial and zero parallax. Using various conversion formulas it is possible to adjust an image or a shot after it has been rendered to fit better with editorial transitions [8].</p>
<p>Editorial is just the beginning of the inter-relationships between the various production departments. Compositing now requires duplicating composites for the second camera. Digital intermediate requires color correction on both images to match. The Autodesk tool chain of Autodesk® Lustre® and Autodesk® Toxik™ help solve these problems by providing stereo tools that replicate work on a single image to the image’s other pair. Again, the pipeline must be prepared to handle this data.</p>
<ol>
<li>Be prepared for the extra storage cost – stereo requires another image to be rendered and will have double the frame cost in terms of storage. You may also need to transport the depth maps for each image to extract valuable depth information to re-adjust the stereo parallax.</li>
<li>Be prepared for the extra rendering cost – some renderers are not smart enough to keep the existing render state between rendering the other camera. Be sure to understand your rendering cost before starting production.</li>
<li>Use left or right image for mono version – because of the storage requirements, it is better to utilize the left or right eye for your mono channel, i.e. 2D version.</li>
<li>Keep the metadata – keep information about the zero parallax, interaxial, and stereo mode as you hand the data down the pipeline. This will help you make production tweaks to the images in compositing and DI stages.</li>
</ol>
<h2>Conclusion</h2>
<p>We have provided an in depth overview of the stereoscopic technology in Autodesk Maya software and how it can be leveraged to establish in an S3D pipeline. We discussed the Maya camera model and how this base can be used to construct stereoscopic cameras. We used this foundation to introduce the Maya stereo camera model and how that model can be extended with new tools. We reviewed the important metadata that must be transported in the pipeline to allow the greatest flexibility for change later. Finally we reviewed the display technology and some general considerations choosing S3D display medium.</p>
<h2>References</h2>
<p>Autodesk, Inc. (2008, October) www.autodesk.com. [<a href="http://images.autodesk.com/adsk/files/stereoscopic_whitepaper_final08.pdf" target="_self">Online</a>].</p>
<p>Ray Zone, Stereoscopic Cinema &amp; the Origins of 3-D Film, 1838-1952. USA: University Press of Kentucky, 2007.</p>
<p>Mason Woo, Jackie Neider, Tom Davis, and Dave Shreiner, OpenGL(R) Programming Guide Third Edition. Reading: Addison-Wesley, 1999.</p>
<p>Lenny Lipton, Foundations of the Stereoscopic Cinema.: Van Nostrand Reinhold, 1982.</p>
<p>Lenny Lipton. (2008, March) Lenny Lipton. [<a href="http://lennylipton.wordpress.com/2008/03/26/the-projection-dilemma-2/" target="_self">Online</a>].</p>
<p>František Mikšícek, &quot;Causes of Visual Fatigue and Its Improvements in Stereoscopy ,&quot; University of West Bohemia in Pilsen, Pilsen, Technical Report DCSE/TR-2006-04, 2006.</p>
<p>John Bercovitz, &quot;Image-side perspective and stereoscopy,&quot; in Stereoscopic Displays and Virtual Reality Systems, 1998, pp. 288-298.</p>
<p>Sebastian Sylwan, David MacDonald, and Jason Walter, &quot;Stereoscopic CG Camera Rigs and Associaed Metadata for Cinematic Production,&quot; in Stereoscopic Displays &amp; Applications, San Jose, 2009.</p>
<p>M. McKenna, &quot;Interactive viewpoint control and three-dimensional operations,&quot; in Symposium on Interactive 3D Graphics, New York, 1992, pp. 53-56.</p>
<p>H.S. Guo, Y. Asmuth, J. Kumar, R. Sawhney, &quot;Multi-view 3D estimation and applications to match move,&quot; in Multi-View Modeling and Analysis of Visual Scenes, 1999. (MVIEW &#39;99) Proceedings, Fort Collins, CO, USA, 1999, pp. 21-28.</p>
<h2>Appendix I – Camera Projection Code</h2>
<pre class="brush: cpp; toolbar:false;">void computeFilmFit(
	filmFit ffit,
	double filmFitOffset,
	double window_aspect,
	double aperture_x,
	double aperture_y,
	double &amp;scale_x,
	double &amp;scale_y,
	double &amp;translate_x,
	double &amp;translate_y )
	//
	// Description:
	// Helper method to compute the scale and translate ratios for the
	// given film fit.
	//
	// Objects will appear stretched - taller or wider -depending on
	// whether the aspect ratio of the film back is greater than or
	// smaller than the aspect ratio of the viewport. This behavior is
	// undesirable, but can be overcome by resizing the film back to
	// match the aspect ratio of the viewport. The user can make one of
	// four choices in resolving the film fit mis-match: always crop to
	// the smallest area (fill), always contain the horizontal or
	// vertical and crop in the opposite direction (horizontal and
	// vertical) or contain the largest area and include both horizontal
	// and vertical (overscan).
	//
{
	double film_aspect = aperture_x / aperture_y;
	switch (ffit) {
	case kFillFilmFit:
		if (window_aspect &lt; film_aspect) {
			scale_x = window_aspect / film_aspect;
		}
		else {
			scale_y = film_aspect / window_aspect;
		}
		break;
	case kHorizontalFilmFit:
		scale_y = film_aspect / window_aspect;
		if (scale_y &gt; 1.0) {
			translate_y = filmFitOffset *
				(aperture_y - (aperture_y * scale_y)) / 2.0;
		}
		break;
	case kVerticalFilmFit:
		scale_x = window_aspect / film_aspect;
		if (scale_x &gt; 1.0) {
			translate_x = filmFitOffset *
				(aperture_x - (aperture_x * scale_x)) / 2.0;
		}
		break;
	case kOverscanFilmFit:
		if (window_aspect &lt; film_aspect) {
			scale_y = film_aspect / window_aspect;
		}
		else {
			scale_x = window_aspect / film_aspect;
		}
		break;
	}
}

void computeViewingFrustum (
	double window_aspect,
	double&amp; left,
	double&amp; right,
	double&amp; bottom,
	double&amp; top,
	bool applyOverscan /* = false */,
	bool applySqueeze /* = false */) const
	//
	// Description:
	// Compute the position and size of the rectangular viewing
	// frustum in the near clipping plane. The result is ready to be
	// fed into the GL window() call (or to the OpenGL glFrustum()
	// call).
	//
{
	bool ortho = isOrtho();
	double squeeze = applySqueeze ? lensSqueezeRatio() : 1.0;
	double aperture_x, aperture_y;
	double offset_x, offset_y;
	double focal_to_near;
	if ( ortho ) {
		// There isn&#39;t really an aperture in orthographic view. User
		// define the width and height of the orthographic view.
		//
		aperture_x = orthoWidth();
		aperture_y = orthoWidth();
		if(shakeOverscanEnabled())
		{
			aperture_x *= shakeOverscan();
			aperture_y *= shakeOverscan();
		}
		offset_x = offset_y = 0.0;
		if(shakeEnabled())
		{
			offset_x += horizontalShake();
			offset_y += verticalShake();
		}
		if(stereoHorizontalImageTranslateEnabled())
		{
			offset_x += stereoHorizontalImageTranslate();
		}
		focal_to_near = 1.0;
	} else {
		if(shakeOverscanEnabled() ){
			aperture_x = horizontalFilmAperture() *
				shakeOverscan() * squeeze;
			aperture_y = verticalFilmAperture() * shakeOverscan();
		} else{
			aperture_x = horizontalFilmAperture() * squeeze;
			aperture_y = verticalFilmAperture();
		}
		offset_x = horizontalFilmOffset();
		offset_y = verticalFilmOffset();
		if( shakeEnabled() ){
			offset_x += horizontalShake();
			offset_y += verticalShake();
		}
		if(stereoHorizontalImageTranslateEnabled())
		{
			offset_x += stereoHorizontalImageTranslate();
		}
		offset_x *= squeeze;
		focal_to_near = nearClipPlane() /
			(focalLength() * MM_TO_INCH);
	}

	focal_to_near *= cameraScale();

	double scale_x = 1.0;
	double scale_y = 1.0;
	double translate_x = 0.0;
	double translate_y = 0.0;
	// Orthographic cameras have no notion of film fit offset.
	// Don&#39;t include film fit offset if we have an ortho
	// camera.
	//
	computeFilmFit( filmFit(),
		(ortho)?0.0:filmFitOffset(),
		window_aspect,
		aperture_x, aperture_y, scale_x, scale_y,
		translate_x, translate_y );
	if (applyOverscan) {
		double value = overscan();
		scale_x *= value;
		scale_y *= value;
	}
	left = focal_to_near *
		(-.5*aperture_x*scale_x+offset_x+translate_x);
	right = focal_to_near *
		( .5*aperture_x*scale_x+offset_x+translate_x);
	bottom = focal_to_near *
		(-.5*aperture_y*scale_y+offset_y+translate_y);
	top = focal_to_near *
		( .5*aperture_y*scale_y+offset_y+translate_y);
}

MMatrix postProjectionMatrix(double aspect/*=1.0)*/)
	//
	// Description:
	// Computes the matrix used for rotating the film back. This matrix
	// is used to postMultiply against the projection matrix.
	//
	// Arguments:
	// aspect - in most cases the aspect ratio scaling must be added
	// at the end of the post projection matrix. If we did it before
	// the postProjection then rotation would cause the image to skew
	// when scaled to the viewport. This parameter allows us to
	// add the aspect in at the end of our film roll calculations. It
	// has a default value of 1.0 when it is not used.
	//
	//
{
	MMatrix filmPMat, filmPInvMat, filmRoll,
		transMat, postMat, preMat;
	double frv = -filmRollValue();
	if ( fabs(frv) &gt; 0.0 ) {
		double hrp = horizontalRollPivot();
		double vrp = verticalRollPivot();
		filmRoll[0][0] = filmRoll[1][1] = cos(frv);
		filmRoll[1][0] = -(filmRoll[0][1] = sin(frv));
		filmPInvMat[3][0] = -( filmPMat[3][0] = hrp );
		filmPInvMat[3][1] = -( filmPMat[3][1] = vrp );
		filmRoll = filmPInvMat * filmRoll * filmPMat;
	}
	preMat[0][0] = preMat[1][1] = preScale();
	// During the perspective and orthographic projection matrix
	// construction the aspect ratio is stored in the computation.
	// When we add the post projection the 1.0/aspect will cancel the
	// aspect out and we will add it back in the end.
	//
	preMat[1][1] *= 1.0/aspect;
	postMat[0][0] = postMat[1][1] = postScale();
	// Add the aspect back in
	//
	postMat[1][1] *= aspect;
	transMat[3][0] = -filmTranslateH();
	transMat[3][1] = -filmTranslateV();
	if ( filmRollOrder() == kRotateTranslateFilmRoll ) {
		return preMat * filmRoll * transMat * postMat;
	} else {
		return preMat * transMat * filmRoll * postMat;
	}
}

MMatrix projectionMatrixNoPostPrj(
	double deviceAspectRatio) const
	//
	// Description:
	// Returns the projection matrix without the postProjectionMatrix
	// See T3dPort::perspective() and T3dPort::ortho().
	//
	// Arguments:
	// imageWidth - viewport width
	// imageHeight - viewport height
	// deviceAspectRatio - aspect ratio to squeeze image
	//
{
	MMatrix projection;
	float nearZ = (Tfloat)nearClipPlane();
	float farZ = (Tfloat)farClipPlane();
	if( (farZ - nearZ) &lt; 0.1f )
		farZ = nearZ + 0.1f;
	if ( isOrtho() ) {
		// Orthographic projection
		//
		double right, left, bottom, top;
		computeViewingFrustum( deviceAspectRatio,
			left, right, bottom, top, false, false );
		float diffRL = 1.0f / float(right - left);
		float diffTB = 1.0f / float(top - bottom);
		float diffFN = 1.0f / (farZ - nearZ);
		projection [0][0] = 2.0f * diffRL;
		projection [1][1] = 2.0f * diffTB;
		projection [3][0] = -float(right + left) * diffRL;
		projection [3][1] = -float(top + bottom) * diffTB;
		projection [2][2] = 2.0f * diffFN;
		projection [3][2] = (farZ + nearZ) * diffFN;
	}
	else {
		// Perspective projection
		//
		// Setup a perspective projection matrix using a rectangle // on the near clipping plane (left, right, bottom, top) and
		// distance to both clipping planes.
		double left, right, bottom, top;
		computeRenderingFrustum(deviceAspectRatio,
			left, right, bottom, top );
		float diffRL = float(right - left);
		diffRL = ( diffRL &lt; 0.000001f ) ? 100000.0f : 1.0f / diffRL;
		float diffTB = float(top - bottom);
		diffTB = ( diffTB &lt; 0.000001f ) ? 100000.0f : 1.0f / diffTB;
		float diffFN = 1.0f / (farZ - nearZ);
		float twoNear = 2.0f * nearZ;
		projection [0][0] = twoNear * diffRL;
		projection [1][1] = twoNear * diffTB;
		projection [2][0] = Tfloat(right + left) * diffRL;
		projection [2][1] = Tfloat(top + bottom) * diffTB;
		projection [2][3] = -1.0f;
		projection [3][3] = 0.0f;
		projection [2][2] = (farZ + nearZ) * diffFN;
		projection [3][2] = (twoNear * farZ) * diffFN;
	}
	return projection;
}

MMatrix projectionMatrix(
	int imageWidth,
	int imageHeight,
	double deviceAspectRatio) const
	//
	// Description:
	// Returns the projection matrix (with the post projection matrix).
	// Arguments:
	// imageWidth - viewport width
	// imageHeight - viewport height
	// deviceAspectRatio - aspect ratio to squeeze image
	//
{
	double aspect = (double) imageWidth / imageHeight;
	if (!isOrtho()) {
		aspect = deviceAspectRatio;
	}
	MMatrix prj = projectionMatrixNoPostPrj(deviceAspectRatio);
	return prj * postProjectionMatrix(aspect);
}
</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Mike Tetrick
EMAIL: tetrick.michael@gmail.com
IP: 68.62.59.136
URL: 
DATE: 11/29/2012 05:00:21 AM
Great read! I'm a little confused about the code samples that you've given...where would these be plugged in if someone wanted to create the Stereo Rig Manager?
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: An introduction to Maya Camera Model
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: cameras-in-maya
CATEGORY: C++
CATEGORY: CG
CATEGORY: Cyrille Fauvel
CATEGORY: Films
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/11/cameras-in-maya.html 
DATE: 11/06/2012 02:20:40 AM
-----
BODY:
<p>This post is an introduction to the Maya Camera Model which is a preamble to&#0160;an in-depth discussion and review of stereoscopic cameras.</p>
<h2>The Maya Camera Model</h2>
<p>
Virtual cameras have been around since the beginning of computer graphics (CG). They are an essential aspect to the creation of the imagery that is seen today and the math mimics the basic principles of real-world cameras. They are the first step to bringing the director’s vision to life. Like real-world cameras, virtual cameras have a focal length, depth of field, f-stop and focus distance. Unlike real-world cameras, virtual cameras have to be defined in every aspect. There is no such thing as a 35mm camera in the virtual world. Instead, a virtual camera is employed that projects in a format equivalent to a real world 35mm film camera.
The benefit of being able to control every aspect of the camera provides ultimate creative control. For instance, a camera can be placed anywhere in a virtual environment without physical constraints. Furthermore, many limitations of real world cameras, (for example lens distortion, chromatic aberration, fringing, breathing, etc.) which can cause problems in S3D production, are not present in CG cameras.
To understand how virtual cameras allow us to create better stereoscopic imagery, we must take a look at parameters that are available on a camera and the correlation to real-world cameras.</p>
<h2>Camera Parameters</h2>
<p>One characteristic found in cameras is perspective foreshortening. This effect is crucial to the illusion of 3D on a 2D image and it is even more critical to a S3D image as the foreshortening actually helps the human visual system process the image and re-construct in 3D.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33283509970b-pi" style="display: inline;"><img alt="Perspective-camera" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c33283509970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33283509970b-800wi" title="Perspective-camera" /></a><br /><span style="text-decoration: underline;"><strong>Figure 1: Perspective Projection</strong></span></p>
<p>Maya software constructs a projection matrix similar to the OpenGL® specification using the 6 parameters that define the viewing frustum of the camera. Figure 1 illustrates these 6 parameters. The camera frustum is the entire perspective viewing area of the camera and is composed of a left, right, top, bottom, near and far parts [2]. The Maya camera parameters translate directly to these 6 values which form a projection matrix. The Maya camera model is a very comprehensive representation of a virtual camera. For the purposes of S3D production we will only focus on the following parameters, which are illustrated in Figure 2:</p>
<ul>
<li><strong>Near Clip Plane</strong> – closest point from the camera that is visible to the camera.</li>
<li><strong>Far Clip Plane</strong> – furthest point from the camera that is visible to the camera.</li>
<li><strong>Film Back</strong> – mimicking a real-world camera there is a virtual film onto which images are projected.</li>
<li><strong>Film Aperture</strong>&#0160;(A) – the format of the projected image area. Normally this is expressed recalling common film formats, i.e., super 8, 35 mm, academy, HD, etc...</li>
<li><strong>Focal Length</strong>&#0160;(FL) – the type of lens. In virtual cameras this is either specified as a field of view or by focal length. Since CG cameras are based on a pinhole camera model, there is a perfect equivalence between the two representations.</li>
<li><strong>Film Offset</strong>&#0160;(O) – offset parameters that are applied on top of the film back projection area, represented in inches. It represents the shift of film along the back of the camera: up, down, left or right. This shift skews the projected region as depicted in Figure 1. Specifying a positive or negative value on the horizontal shift is equivalent to a horizontal image translation [3]. In fact, Autodesk Maya supports horizontal image translation as a separate parameter; however, in the context of this paper this will be ignored and all stereo computation will be performed with the above parameters.</li>
</ul>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d56a581970c-pi" style="display: inline;"><img alt="Pin-hole-camera" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d56a581970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d56a581970c-800wi" style="float: right;" title="Pin-hole-camera" /></a></p>
<p>The horizontal film offset allows us to shift the viewing region of the camera without actually moving the camera. The effect of this operation is a perspective shift that is equivalent to pixel shifting. However this pixel shifting is not a 2D effect. The entire digital scene has been shifted on the projected film back. In the digital world you are exposing a different part of an infinite piece of film. This allows us to manipulate the viewing region of a camera without physically moving the camera in space.<br />Often many people feel that the angle of view should be involved in the calculation; however, angle of view can be expressed as focal length with film aperture size. So Maya does not provide this as an attribute. Also, the shift provided by the Film Offset is not always equivalent in vertical and horizontal directions. For example, a .5 shift in the horizontal axis is not the same as a .5 shift in the vertical axis. This is due to the aspect ratio of the aperture which usually favors horizontal resolution over the vertical resolution.<br />It is important to consider the consequences of the viewing region when constructing the final projection matrix. Everything would be perfect if the aspect ratio of the viewport matched the aspect ratio of the projection matrix that we setup with the parameters specified above. Maya software users are free to resize the viewport to whatever resolution they feel necessary. This unfortunately can skew the image because the aspect ratio does not match the viewing area. Users can address this by factoring in the aspect ratio of the window to fit the viewing area. There are four different ways the fit can be performed and it is controlled by an attribute on the camera shape called <strong>Film Fit</strong>. (A complete implementation of the Maya projection matrix can be found in Appendix I – Camera Projection Code.)</p>
<h2>Mathematics</h2>
<p>Before we begin to describe the S3D camera, it is important review the formulas for shifting the frustum of a camera. We will use this perspective shift to create the effect of zero parallax with a pair of stereoscopic cameras. This formula will be the foundation for the S3D camera and is the basis for the projection matrix constructed in Appendix I.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33281494970b-pi" style="display: inline;"><img alt="Fustrum" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c33281494970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c33281494970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Fustrum" /></a></p>
<p>Each entry in the matrix is a side of the near plane illustrated in Figure 1. FL<sub>n</sub> is the distance to the focal plane to the near clip plane.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d56ae42970c-pi" style="display: inline;"><img alt="Horz-offset" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d56ae42970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d56ae42970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Horz-offset" /></a><span style="text-decoration: underline;"><strong>Figure 3: Horizontal Offset – Top (offset = 0.0), Bottom (offset = 0.25)</strong></span></p>
<p>The any offset value will shift the plane in space (see illustration in Figure 3). However, the shift does not affect the camera position. This will play an important part in S3D camera model which we will discuss next. Particularly it allows us to create the zero parallax effect where objects appear to appear in front of the screen.</p>
<p>Our eyes tend to converge; they rotate in-ward to focus on an object. This action is what our brain uses to build a 3D image in our brain. However, when projecting into a cinematic environment, not all audience members are focusing or sitting in the same location. So constructing images from rotated camera pairs will not provide the best image possible for an audience. There are occasions where a toe-in camera is acceptable, but that is a topic beyond this paper. We will only discuss the mathematics of a toe-in camera over a shifted stereoscopic camera.</p>
<p>On the next post, we have&#0160;an in-depth discussion and review of Maya stereoscopic cameras.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Debugging Python in Maya with Eclipse/Pydev
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: debugging-python-in-maya-with-eclipsepydev
CATEGORY: Cyrille Fauvel
CATEGORY: Debugging
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Test
CATEGORY: Tools
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/debugging-python-in-maya-with-eclipsepydev.html 
DATE: 10/31/2012 06:50:00 AM
-----
BODY:
<p>This post is a follow-up on the previous post <a href="http://around-the-corner.typepad.com/adn/2012/10/python-debugging-in-maya.html" target="_self">here</a>.</p>
<h2>Installing Eclipse &amp; Pydev</h2>
<p><strong>Note:</strong> On Windows: depending on whether you are on a 64 or 32
bit machine, make sure you install the correct version of Java and Eclipse.</p>
<ul>
<li>Install Java on your
machine if it isn’t yet done <a href="http://www.java.com/">http://www.java.com/<br /></a><a href="http://www.java.com/en/download/ie_manual.jsp?locale=en&amp;host=www.java.com:80">http://www.java.com/en/download/ie_manual.jsp?locale=en&amp;host=www.java.com:80<br /><br /></a></li>
<li>Go to&#0160;<a href="http://www.eclipse.org/downloads/">http://www.eclipse.org/downloads/</a> and then click ‘Eclipse Packages&#39;<br /><br />Choose any of the last ‘Packages’ version. It is not really important which one you download, could be the Java, Classic or C++ -it does not yet matter. Personally, I have chosen the C/C++ package and combined it later with the Java and PHP packages. These packages are ZIP files, so you can uncompress them on top of a previous one if you want.<br />Once installed, Start Eclipse and choose a workspace folder (your favorite place for Maya Python projects).</li>
<li>After Eclipse have fully started, go into -&gt; Help -&gt; Install New Softwares<br />Click on the ‘Add…’ button and fill the form with ‘Name=PyDev – Location=http://pydev.org/updates’</li>
<li>After you accepted the EULA and legal stuff, this should bring PyDev and PyDev Mylyn Integration (optional) into the list. Select them to install them.<br /><br /></li>
<li>Restart Eclipse</li>
</ul>
<p>You are almost ready!</p>
<h2>Configuring Eclipse</h2>
<p>You only need to do this section if you wish to execute a standard Python application or a Maya Standalone application. If you only want to debug Maya Python scripts and Maya plug-ins, feel free to skip these steps.</p>
<ul>
<li>Start Eclipse</li>
<li>Go into -&gt; Window -&gt; Preferences</li>
<li>Go into -&gt; PyDev -&gt; Interpreter – Python<br />
<ul>
<li>Python Interpreters -&gt; New…<br />
<ul>
<li>Interpreter Name = Python Maya</li>
<li>Interpreter Executable = ‘C:\Program Files\Autodesk\Maya2013\bin\mayapy.exe’</li>
</ul>
</li>
</ul>
</li>
<li>Accept all proposed path and include both paths below<br />
<ul>
<li>‘C:\Program Files\Eclipse\plugins\<strong><span style="color: #ff0000;">org.python.pydev_2.6.0.2012062818</span></strong>\pysrc’</li>
<li>‘C:\Program Files\Autodesk\Maya2013\bin\python26.zip’</li>
</ul>
</li>
</ul>
<p>If you also want to configure another interpreter for a standard Python application and have Python installed already, do so now by adding a second interpreter configuration. You can add as many as you want.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-pi" style="display: inline;"><img alt="Important" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768393cba970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-800wi" title="Important" /></a> Note the &#39;2.6.0.2012062818&#39; key in red above is changing depending of the Pydev version and it is important that you update it if you using a different version in future.</p>
<h2>Preparing
debugger scripts for Maya</h2>
<ul>
<li>Copy the attached Python script (<a href="http://around-the-corner.typepad.com/files/EclipsePydevMaya2013.zip" target="_self">debugmaya.py</a>) into ‘C:\Users\&lt;my profile&gt;\Documents\maya\scripts’<br /><br /><strong><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-pi" style="display: inline;"><img alt="Important" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768393cba970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-800wi" title="Important" /></a> IMPORTANT:</strong> Modify the path in the .py script to reflect the location where you have installed Eclipse (see line #18)</li>
</ul>
<ul>
<li>Copy the attached MEL script (<a href="http://around-the-corner.typepad.com/files/EclipsePydevMaya2013.zip" target="_self">scriptEditorPanel.mel</a>) into ‘C:\Users\&lt;profile&gt;\Documents\maya\2013-x64\prefs\scripts’</li>
<li>Copy the attached image (<a href="http://around-the-corner.typepad.com/files/EclipsePydevMaya2013.zip" target="_self">debug.png</a>) into ‘C:\Users\&lt;profile&gt;\Documents\maya\2013-x64\prefs\icons’</li>
</ul>
<p>You are now ready! You can start Maya</p>
<p><strong>NOTE:</strong> The paths mentioned above are for a Windows 64 bit machine. If you are running on a win32 machine, please adjust the path accordingly.</p>
<p><strong>NOTE:</strong> For other platforms, the procedure is the same excepted for the paths mentioned above.</p>
<h1>Let’s debug now</h1>
<p>First be aware that you can debug
both Maya Python scripts, Maya Python API plug-ins, and PyMel scripts, running
inside Maya or in standalone mode.</p>
<h2>Standalone
application</h2>
<ul>
<li>Start Eclipse</li>
<li>Create a new project
-&gt; File -&gt; New -&gt; Pydev Project (if you can’t see it, then go to -&gt;
File -&gt; New -&gt; Project… then expand the Pydev folder, select ‘Pydev
Project’, and click ‘Next’)
<ul>
<li>Give a ‘Project name’</li>
<li>Select 
<ul>
<li>Project type = Python</li>
<li>Grammar Version = 2.6</li>
<li>Interpreter&#0160; = Python Maya</li>
</ul>
</li>
<li><strong>Note:</strong> If you get
the ‘Open Associated Perspective?’ dialogue box, choose ‘Yes’</li>
<li>Finish</li>
</ul>
</li>
<li>Expand your project
node in the Pydev Package Explorer window</li>
<li>Select the ‘src’
node, right-click -&gt; New -&gt; Pydev Module
<ul>
<li>Give a ‘Name’ to your file (no extension)</li>
<li>Select Template = ‘Module: Main’</li>
<li>Finish</li>
</ul>
</li>
<li>Modify the code to
do something using Maya
<ul>
<li>Use the helloworld.py sample from ‘C:\Program
Files\Autodesk\Maya2013\devkit\applications\scripted’</li>
</ul>
</li>
</ul>
<p>You
are ready to run or debug your code now</p>
<p><strong>Note:</strong> There is nothing different to debug a standard Python
application here. Whether you continue using the mayapy.exe or you switch to
another interpreter. Eclipse can manage several Run/Debug configurations. See
Eclipse documentation for more details.</p>
<h2>Maya
Python script (and PyMel)</h2>
<p>This
time it is a bit more complicated. Since Maya scripts are running inside Maya,
we cannot launch mayapy.exe and expect to see maya.exe executing our script.
Instead, we need to use the remote debugging feature of Eclipse/PyDev. What is
Remote Debugging? In theory this feature is made to debug Python application
running on a different machine than yours. While it is possible to do this as
well with Maya Python, we are only interested to run it on the same machine at
this time. This is to simplify the configuration. However, remember you can
debug a script running in a Maya session running on another machine than yours.
How cool is that? ;)</p>
<p>Anyway,
let’s rock into our local debug Maya script debug session now. First, you
remember how we had to install a script called ‘debugmaya.py’ during install time;
this script will be used to connect Maya to the Eclipse Python remote debugger
server. This script will ‘alert’ Eclipse that someone is executing some Python
code and that we want to pass control to the Eclipse debugger. How to do this?</p>
<ul>
<li>In Eclipse, switch
to the debug perspective<br />
(see -&gt; Window -&gt; Open Perspective -&gt; Others… if you haven’t
configured your favorites yet)</li>
<li>You should now see 2
buttons in the Eclipse toolbar:
</li>
</ul>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="463">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee48be13b970d-pi" style="float: left;">
<img alt="Pydev-stopserver" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee48be13b970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee48be13b970d-800wi" style="margin: 0px 5px 5px 0px;" title="Pydev-stopserver" /></a>A red square P button with a tooltip saying ‘Pydev: stop the debugger server’
</td>
<td rowspan="2" valign="top" width="229">
<p>&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f289970b-pi" style="display: inline;"><img alt="Pydev-server" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32e7f289970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f289970b-800wi" title="Pydev-server" /></a></p>
</td>
</tr>
<tr>
<td valign="top" width="463">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f556970b-pi" style="float: left;">
<img alt="Pydev-startserver" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32e7f556970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f556970b-800wi" style="margin: 0px 5px 5px 0px;" title="Pydev-startserver" /></a>A green
  bug P button with a tooltip saying ‘Pydev: start the pydev server’
</td>
</tr>
</tbody>
</table>
<ul>
<li>Click on the ‘green
bug P’ button
<ul>
<li>On the ‘Console’ panel, you should now read ‘Debug Server at
port: 5678’</li>
<li>You should also see a debugger instance in the ‘Debug’
panel</li>
</ul>
</li>
<li>Now the remote
debugger is started, you can now start Maya</li>
<li>Open the Maya Script
Editor and select a Python tab and write the following code as an example (or
any code you’d like to debug)
<ul>
<li>import
sys</li>
<li>print
sys.path</li>
</ul>
</li>
<li>Launch the debugger
using the new ‘Debug’ button in the Script Editor (near the ‘Execute All’
button)<br />
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d169edc970c-pi" style="display: inline;"><img alt="Pydev-mayastartdebug" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d169edc970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d169edc970c-800wi" title="Pydev-mayastartdebug" /></a><br />If
everything was configured properly, you should see a few lines of text
displayed in the Maya history pane, after that it looks like Maya has frozen
but don’t panic, switch to Eclipse and see that Eclipse is pausing on a line
saying:<br />
<ul>
<li>pydevd.settrace()</li>
<li>This is the ‘alert’ signal from the remote application to
the debugger. This leaves you a chance to prepare your debugging session before
any code is executed. For example, you can set breakpoints in your code. </li>
</ul>
</li>
<li>However, if you pay
attention to the Maya history pane and the debugger panel, you’ll notice that
the Pydev debugger tells you two things:
<ul>
<li>Pydev debugger – &lt;module&gt; [&lt;maya console&gt;:NN]</li>
<li>Maya console – “#
pydev debugger: Unable to find real location for: &lt;maya console&gt;”</li>
</ul>
<p>This
is because the code which is in the Maya Script Editor has no physical file,
and Pydev needs a file to retrieve the code for the debugger.</p>
</li>
</ul>
<ul>
<li>Go into your
‘C:\Users\&lt;profile&gt;\Documents\maya\2013-x64\scripts’, you should find a
file named ‘__debug.py’. Drag and drop it into Eclipse. You should see the code
you put into your Maya Python tab in the Script Editor. Now, in the left grayed
margin either dbl-click or right-click to add a breakpoint on the print
statement and press F8 to resume execution. The debugger should now stop right
there, and now you have full access to your Maya/Python environments for
debugging purposes.</li>
</ul>
<p>You
can now debug a Maya script as well as a PyMel script.</p>
<h2>Maya
Python plug-ins </h2>
<p>Almost
the same as a ‘Python Script’, the only differences are:</p>
<ul>
<li>You load/unload
plug-ins as any other plug-ins</li>
<li>You need to modify
your plug-in script and add 2 lines at the top of the file</li>
</ul>
<p>import debugmaya<br />debugmaya.startDebug()</p>
<p><strong>If
your debugger is already started, skip the next 3 steps and go directly into
Maya</strong></p>
<ul>
<li>In Eclipse, switch
to the debug perspective<br />
(see -&gt; Window -&gt; Open Perspective -&gt; Others… if you haven’t
configured your favorites yet)</li>
<li>You should now see 2
buttons in the Eclipse toolbar:
</li>
</ul>
<table border="0" cellpadding="0" cellspacing="0">
<tbody>
<tr>
<td valign="top" width="463">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee48be13b970d-pi" style="float: left;">
<img alt="Pydev-stopserver" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee48be13b970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee48be13b970d-800wi" style="margin: 0px 5px 5px 0px;" title="Pydev-stopserver" /></a>A red square P button with a tooltip saying ‘Pydev: stop the debugger server’
</td>
<td rowspan="2" valign="top" width="229">
<p>&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f289970b-pi" style="display: inline;"><img alt="Pydev-server" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32e7f289970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f289970b-800wi" title="Pydev-server" /></a></p>
</td>
</tr>
<tr>
<td valign="top" width="463">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f556970b-pi" style="float: left;">
<img alt="Pydev-startserver" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32e7f556970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e7f556970b-800wi" style="margin: 0px 5px 5px 0px;" title="Pydev-startserver" /></a>A green
  bug P button with a tooltip saying ‘Pydev: start the pydev server’
</td>
</tr>
</tbody>
</table>
<ul>
<li>Click on the ‘green
bug P’ button<br />
<ul>
<li>On the ‘Console’ panel, you should now read ‘<strong>Debug Server at port: 5678</strong>’</li>
<li>You should also see a debugger instance in the ‘Debug’
panel
</li>
</ul>
</li>
<li>Now the remote
debugger is started, you can now start Maya</li>
<li>Go into the Plug-in
Manager and load your Python scripted plug-in (I used the sineNode.py sample
from the devkit folder)</li>
<li>Switch to Eclipse
and see that Eclipse is pausing on the same line we described in the previous
chapter.</li>
<li>Load your plug-in
code into Eclipse and put breakpoints in initializePlugin() and in the
sineNode.__init__() function. Press F8 to resume.<br />The
debugger should stop immediately into initializePlugin() at the position you
set the breakpoint. Press F8 again to resume execution.<br />Open
the Script Editor, and in a MEL tab execute the following code</li>
<p>createNode “spSineNode”<br /><br />
The debugger should stop into sineNode.__init__()
at the position you set the breakpoint. Press F8 again to resume execution.</p>
<li>In the Plug-in
Manager, unload and load the Python scripted plug-in again, and see the
debugger stopping again and again at your breakpoints</li>
</ul>
<p>You can now debug Maya scripted plug-ins.</p>
<h2>Advanced concepts</h2>
<h3>import
&amp; reload()</h3>
<p>One
important concept in Python is that import is executed only once. If you modify
your code, you need to use the function reload() to force Maya to refresh the
code changes. The debugmaya.py comes with an ImporterController which will take
care of cleaning your Python environment so you do not have to care about this
at all. However, you should be aware of what is done in the background. When
you load a Python module, Python keeps an internal reference in a dictionary to
avoid having to reload the same file definition multiple time. While it is good
for performance and cross references, it is a disaster for someone who wants to
debug the code, because it would mean to restart the application each time. To
avoid this problem, the debugger creates a singleton instance of the controller
and the controller makes a copy of the references dictionary. Then it replaces
the built-in import function. From there any new imported modules would be
reloaded each time when requested, but not the ones which were already loaded
before the debugger started.</p>
<h3>Debugging Python Maya native files</h3>
<p>All
Python Maya native files are zipped in the Python26.zip file. If you want to
step through that code you need to either modify PyDev to extract the file on
the fly, or you may explode Python26.zip file in
‘C:\Users\&lt;profile&gt;\Documents\maya\2013-x64\scripts’. Both solution will
work. But I do recommend to do this only when you need to debug Python native
files and only temporarily.&#0160;</p>
<h3>Will I be able to
step-in Maya Python function and API?</h3>
<p>
No, you can only step
through your own code. Maya functions and API are almost all written in C/C++.
Unless a Maya component was written in Python language and exposed in a
physical file, you wouldn’t be able to step through that code.</p>
<h3>Can
this solution be used in previous releases of Maya?</h3>
<p>Yes,
absolutely. All Maya versions with Python support can use this technique and add debugging support to Python. That includes releases starting from Maya 8.5.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Python debugging in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: python-debugging-in-maya
CATEGORY: Cyrille Fauvel
CATEGORY: Debugging
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Test
CATEGORY: Tools
CATEGORY: Visual Studio
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/python-debugging-in-maya.html 
DATE: 10/29/2012 01:13:03 AM
-----
BODY:
<p>With the power of the Maya API and the scriptability of MEL, Maya Python hits a sweet spot in Maya&#39;s suite of development tools. Being an interpreted language it allows for quick turnaround, making it perfect for rapid prototyping and with thousands or dedicated users around the world contributing modules to Python, Maya inherits a large and growing array of new capabilities.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e657b1970b-pi" style="display: inline;"><img alt="Debug" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32e657b1970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32e657b1970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Debug" /></a></p>
<p>However, debugging Python code in Maya has not made to be easy like it is with C++ and Visual Studio on Windows for example. We have seen Maya Script editor improvements in the Maya 2011 release with the integration of Qt, and the syntax color highlighting, but still no tools to help developers to test and debug their scripts. All you can do at this time, is really add some print() statement with meaningful message to tell you what’s happening in your code, but you have no control on the execution, nor it is easy and/or productive to create hundreds on print() messages and remove them at the end when your code is completed. While this is still a valid technique, it is a pain and counterproductive to have to do this when you know there is debugging tools around for doing this in a professional manner.</p>
<p>The idea, here, is to modify Maya in a way Python debugging capability would be nicely integrated into Maya to bring more power to Maya customers and make Python the first scripting choice for the customer and developer community. This will also bring to Maya developers a more robust and productive approach in developing scripts for Maya to automate their pipelines. The 2 advantages with this tool is that not only it make the production of scripts more easy and professional, but it makes the effort of learning Python code into Maya more easy. That means, non professional developers can easily learn and test their Python skills within Maya and later make Maya more powerful in their business.</p>
<p>Is it something completely new? No, there are Python debuggers around already, but none of them are integrated with Maya at all. They are generic Python debugger, for debugging generic Python code outside Maya. This post is to tightly integrate a Python debugger inside Maya to debug and test Maya Python scripts and Maya Python plug-ins inside Maya. The main difficulty apart integrating a debugger into Maya was to counter the fact Maya and Python store previously executed code into memory. This solution controls and teaches Maya to work with a debugger and let the debugger to control what code should be executed when and in which context and to avoid any interference with a scene.</p>
<p>At the end, after installing couple of files on the system, you will see a simple button next to the Execute button to start Executing your code, but in debug mode this time. From there, you can choose to step through your code and see intermediate results before executing the next instruction. This is clearly a plus for anyone who wants to use Python in Maya and will help the Python adoption from the Maya community.</p>
<p>But before going into the details, let&#39;s review the options we have today (not an exhaustive list)</p>
<h2>Python Debugger Options</h2>
<h3>The basics - The PDB debugger</h3>
<p>The PDB debugger is a standard part of every Python implementation. You can use it to step through the execution of a Python function one statement at a time. However PDB alone is not that helpful because even if it gives you the ability to access everything and step through the code, using it in Maya make things even more complicated.</p>
<p>After each command is executed PDB prints a line giving the module and line number of the next statement, as well as the name of the function that it is in followed by the statement itself, then a prompt for the next command. A debugger GUI can react to this to have a nice integration, but when run from within Maya the behavior is slightly different. Since Maya&#39;s Script Editor does not have a mechanism for responding to prompts within the Script Editor window, it instead displays a separate input window each time PDB prompts for a new command. You would, for example, enter your &#39;s&#39; or &#39;n&#39; command into the input field, then press Enter or click on the OK button to have PDB execute it. This can become rather cumbersome because each time the window appears, the focus is on the OK button, and so you must first change the focus to the input field, then enter your command and press Enter. Another issue is that even if you change this behavior, the window will keep coming back right in the middle of the screen making it hard to step through the code.</p>
<p>Dean Edmonds, the Maya API architect presented a solution to this problem in his ‘Advanced Maya Python’ talk at the Maya Developer Conference, and has shown how to make the interface smoother to use. However, despite what we can do, with this solution we would still miss all the debugger tools one may like to have (call stack, local/global variables, modules &amp; packages, etc...).</p>
<h3>Winpdb</h3>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d09aad7970c-pi" style="display: inline;"><img alt="Winpdb" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3d09aad7970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3d09aad7970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Winpdb" /></a></p>
<p><a href="http://winpdb.org/" target="_self">Winpdb </a>is a platform independent GPL Python debugger with support for multiple threads, namespace modification, embedded debugging, encrypted communication and is up to 20 times faster than pdb. It offers a user interface and all the&#0160;basics debug features. However the IDE is not that great to write code compared to some other tools available.</p>
<p>What is interesting and What we need for Maya is its ability to debug Python code running in another application. There is a good documentation <a href="http://winpdb.org/docs/embedded-debugging/" target="_self">here</a>&#0160;which explains how to do this.</p>
<h2>Python Debugger Options -&#0160;A true debugger</h2>
<h3>Eclipse and Pydev</h3>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db20a5970b-pi" style="display: inline;"><img alt="Eclipse" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32db20a5970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db20a5970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Eclipse" /></a>One
solution is to use an existing developer environment such as <a href="http://www.eclipse.org/">Eclipse</a>. Eclipse
is a collection of open source projects built on the Equinox OSGi run-time.
Eclipse started as a Java IDE, but has since grown to be much, much more.
Eclipse projects now cover static and dynamic languages; thick-client,
thin-client, and server-side frameworks; modeling and business reporting;
embedded and mobile. Eclipse is a versatile IDE which supports many programming
languages and can be extended by plug-ins. Eclipse also has a framework which
includes the ability to support a debugger environment. Why choose Eclipse?
This is because it is free and supports all the platforms Maya is running on.</p>
<p>Once
you have Eclipse installed, you still need to connect to PDB to be able to step
through Maya Python code. You may write your own Eclipse plug-in to establish
the connection with the Python kernel and debug core, but there is already a
free solution for you. Checkout <a href="http://pydev.org/">http://pydev.org/</a>&#0160;&#0160;</p>
<h4>PyDev
</h4>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db1ee3970b-pi" style="display: inline;"><img alt="Pydev_banner2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32db1ee3970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db1ee3970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Pydev_banner2" /></a></p>
<p>PyDev
is a Python IDE for Eclipse, which may be used in Python, Jython and IronPython
development. It has Pylint and Mylyn integration, syntax highlighting, code
analysis and many other features. Most importantly, it has the capability to
debug Python code which is what we are interested in today.</p>
<h3>Wing from Wingware</h3>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db24ac970b-pi" style="display: inline;"><img alt="Wing" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32db24ac970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32db24ac970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Wing" /></a><br />Definitely my favorite with Eclipse/PyDev. <a href="http://wingware.com/" target="_self">Wing</a>&#0160;is the most complete package for writing and debugging Python code and has a nice <a href="http://wingware.com/doc/howtos/maya" target="_self">Maya integration</a> very easy to install. Not only the integration with Maya is simple and already there, but it has almost everything you want to write &amp; debug Python code in Maya. Definitely an option to consider when writing/debuging Python code for Maya.</p>
<h3>PTVS - Python integration for Visual Studio</h3>
<p>This is the last one I have been using and it comes with the same feature set Eclipse/Pydev and Wing have. When I first tried it, it was very new but had everything there. Since it evolves a lot and a good choice. But you may be surprised how the connection between Maya/Python and the tool in hapening. Where Eclipse/PyDev &amp; Wing run like a server and wait for a signal from the code. With PTVS you&#39;ll attach Visual Studio to a process to debug. Just different! The main issue with PTVS is that it is a Windows only solution, so it won&#39;t apply to those of you using MacOS or Linux.</p>
<h2>To be continued...</h2>
<p>In the next post we will see in details how to plug Eclipse/Pydev into Maya to debug plug-ins and Maya Script editor code.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Eric Pavey
EMAIL: warpcat@gmail.com
IP: 64.111.160.30
URL: http://www.akeric.com
DATE: 10/29/2012 08:37:44 AM
+1 for Wing:  I've been using it for remote-debugging for years now:  Nothing like stepping through code in Wing, and watching Maya live update.  I don't know about the other software you mentioned, but I believe you can get remote debugging only with the 'pro' version of Wing, which is a couple hundred bucks these days.  Still, worth it IMO compared to the complexities of having to deal with setting up Eclipse.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Heading for London
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: heading-for-london
CATEGORY: Cyrille Fauvel
CATEGORY: Personal
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/heading-for-london.html 
DATE: 10/24/2012 12:00:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32b6f007970b-pi" style="display: inline;"><img alt="Images" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32b6f007970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32b6f007970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Images" /></a><br />I have a couple of posts, presentations, projects to finish up before going to AU in a couple of weeks, but this week I am travelling to London to visit <a href="http://www.dneg.com/" target="_self">DNeg</a>&#0160;and work with these folks on improving their in-house plug-ins and workfloa. DNeg is The Dark Knight Rises, Man of Steel, The Bourne Legacy, Skyfall, Snow White and the Huntsman, Rush, Battleship, Total Recall maker. I have to admit have seen them all :) That will be a very pleasant <strong>work</strong> trip I believe.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya Custom  Manipulators 
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: maya-custom-manipulators-
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Plug-in
CATEGORY: Samples

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/maya-custom-manipulators-.html 
DATE: 10/21/2012 11:03:00 PM
-----
BODY:
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbd4d63970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017d3cbd4d63970c" style="display: block; margin-left: auto; margin-right: auto;" title="Swiss-tool" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbd4d63970c-320wi" alt="Swiss-tool" width="250" /></a></p>
<h1>I. General Introduction</h1>
<p>A manipulator is a node that draws itself using 3D graphical
elements that respond to user events. While it is possible to change a node’s attribute values using Channel
Box, Graph Editor and etc., manipulators provides a more intuitive way of changing
attribute values: Manipulators provide a series of visual controls that users can
interactively move or adjust. The modification of these visual controls subsequently
is translated by manipulators into value changes and then applied to the nodes
attributes. The attribute values are modified directly by the manipulator and
not through the standard plug and connection mechanism used by other dependency
graph nodes.</p>
<p>Using the
manipulator, it is easier than typing modified values in the editors such as
Attribute Editor, Channel Box and etc. Users can see the immediate visual
feedback during operations. Therefore, manipulators quite often are used as an
interactive tool for animators to manipulate a specific object or custom nodes
in a scene. With custom manipulators, you will be able to create all types of
interactive custom tools (modeling tool, rigging tool, etc…) for animators in
different stages of animation production pipeline.</p>
<p>There are
several ways to create and activate manipulators: First, you can create a manipulator
on any node in the current scene at any time. You can also create and assign a
manipulator for a specific type of object. Another approach is to create a
context tool and associate the manipulator to the context tool so that whenever
it is active, the manipulator is active and ready to use. Manipulators are only
active when the “Show Manipulator Tool” or the associated context is active,
and the object that they correspond to is selected. For more information, see
Section 5 “Register Manipulators”.</p>
<p>When
manipulators are created, even though they are nodes, they are not visible in
the Hypergraph or Outliner, and they are not added to the Maya selection list.
Additionally, their attributes are not accessible from MEL or the attribute
editor, and they are not written to file. </p>
<p>Manipulators
are designed to operate on data types, ranging from integer and floating point
values to matrix data and can operate on one or more attribute values at the
same time.&nbsp;</p>
<h1>II. Maya Base Manipulators</h1>
<p>Maya defines a set of simple manipulators,
called <em>base manipulators</em>. These operate on a range of data types from a
single boolean, integer, or floating point value, to vectors of floating point
values of different lengths. The OpenMaya API
supports 12 base manipulator classes that can be combined to form a composite
manipulator. All the function set classes for these Maya base manipulators are
derived from MFnManip3D.</p>
<h2>FreePointTriadManip </h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4329bd3970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017ee4329bd3970d" title="Triadmanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee4329bd3970d-800wi" border="0" alt="Triadmanip" width="120" /></a><br />The
FreePointTriadManip provides a moveable point that can be moved anywhere. It
has axes for constrained x, y, and z movement and obeys grid snapping, point
snapping, and curve snapping. The FreePointTriadManip generates the 3D position
of the point. It is useful for specifying the position of an object in space.</p>
<p>One thing to note is that the
FreePointTriadManip is not corresponding to Maya’s internal moveManip, and it
is actually a subset of the moveManip. </p>
<p>The
API class for FreePointTriadManip is MFnFreePointTriadManip. This function set
class can be used to create the manipulator and set up some properties of this
manipulator. For example, MFnFreePointTriadManip::setDrawAxes() can be used to
set whether or not to draw the axes of the FreePointTriadManip.
MFnFreePointTriadManip::setSnapMode() can be used to set whether or not the
FreePointTriadManip should be in snap mode etc...</p>
<h2>RotateManip </h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328eb97d970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328eb97d970b" title="Rotatemanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328eb97d970b-800wi" border="0" alt="Rotatemanip" width="120" /></a><br />The RotateManip corresponds
to Maya built-in rotate manipulator, and it allows you to manipulate a 3d
rotation vector. &nbsp;The manipulator
consists of three constrained-axis rotation rings, a view rotation ring, and an
invisible trackball that allows the user to rotate in arbitrary directions on
the sphere. It supports the 3 rotation modes of the built-in rotate manipulator
(object space, global, gimbal) and allows constrained rotation on the x, y, z
and viewing axes. The vector generated by the manipulator is an Euler rotation
that is suitable for input to a rotation plug. &nbsp;</p>
<p>The API class for
RotateManip is MFnRotateManip. Simliar to MFnFreePointTriadManip, it provides
functions to create the manipulator and set up properties.&nbsp;</p>
<h2>ScaleManip </h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f1094970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328f1094970b" title="Scalemanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f1094970b-800wi" border="0" alt="Scalemanip" width="120" /></a><br />The ScaleManip
corresponds to Maya built-in scale manipulator and lets you manipulate relative
x, y, and z scaling values. The scale manipulator provides a central handle for
proportional scaling, and x, y, and z axis handles for non-proportional scaling
on each axis. The vector generated by the manipulator is a relative scaling
vector that is suitable for input to a scale plug.</p>
<p>The API class for
scaleManip is MFnScaleManip. Simliar to MFnFreePointTriadManip, it provides
functions to create the manipulator and set up properties.&nbsp;</p>
<h2>DirectionManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee432f5d8970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017ee432f5d8970d" title="Dirmanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee432f5d8970d-800wi" border="0" alt="Dirmanip" width="120" /></a><br />The DirectionManip lets
you specify a direction as defined by the vector from the start point to the
manipulator position. It uses a FreePointTriadManip to specify the end point of
a vector relative to a given start point. This manipulator generates a vector
from the start point to the end point.</p>
<p>The API class for DirectionManip
is MFnDirectionManip. Simliar to MFnFreePointTriadManip, it provides functions
to create the manipulator and set up properties of the manipulator.</p>
<h2><strong>DistanceManip</strong></h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f11ff970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328f11ff970b" title="Distmanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f11ff970b-800wi" border="0" alt="Distmanip" width="120" /></a><br />The DistanceManip lets
you manipulate a point that is constrained to move along a line. The distance
value is calculated from the start point of the line to the manipulated point.
This manipulator generates a single floating point value. Scaling factors can
be used to determine how long the manipulator appears when it is drawn. The API
class for DistanceManip is MFnDistanceManip.</p>
<h2>PointOnCurveManip </h2>
<p>The PointOnCurveManip
lets you manipulate a point constrained to move along a curve, in order to
specify the "u" curve parameter value. This manipulator generates a
single floating point value corresponding to the curve parameter. The API class
for PointOnCurveManip is MFnPointOnCurveManip.</p>
<h2>PointOnSurfaceManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdaa1f970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017d3cbdaa1f970c" title="Pointonsurf" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdaa1f970c-800wi" border="0" alt="Pointonsurf" width="120" /></a><br />The PointOnSurfaceManip
lets you manipulate a point constrained to move along a surface, in order to
specify the (u, v) surface parameter values. This manipulator generates two
floating point values corresponding to the surface (u, v) parameters. The API
class for PointOnSurfaceManip is MFnPointOnSurfaceManip.</p>
<h2>DiscManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f1417970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328f1417970b" title="Discmanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f1417970b-800wi" border="0" alt="Discmanip" width="120" /></a><br />The DiscManip lets you
rotate a disc in order to specify a rotation about an axis. This manipulator
generates a single floating point value corresponding to the rotation. The API
class for DiscManip is MFnDiscManip.</p>
<h2>CircleSweepManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f16ef970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328f16ef970b" title="Circlesweep" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f16ef970b-800wi" border="0" alt="Circlesweep" width="120" /></a><br />The CircleSweepManip
lets you manipulate a point constrained to move around a circle, in order to
specify a sweep angle. This manipulator generates a single floating point value
corresponding to the sweep angle. Although very similar to DiscManip, it
provides more options for specifying rotating angles. The API class for CircleSweepManip
is MFnCircleSweepManip.</p>
<h2>ToggleManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdae58970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017d3cbdae58970c" title="Togglemanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdae58970c-800wi" border="0" alt="Togglemanip" width="120" /></a><br />The ToggleManip lets
you switch between two modes or some on/off state. It is drawn as a circle with
or without a dot. When the mode is on, the dot is drawn in the circle and when
the mode is off, the circle is drawn without the dot. This manipulator
generates a boolean value corresponding to whether or not the mode is on or
off. The API class for ToggleManip is MFnToggleManip.</p>
<h2>StateManip</h2>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdb6d6970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017d3cbdb6d6970c" title="Statemanip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdb6d6970c-800wi" border="0" alt="Statemanip" /></a><br />The StateManip lets you
switch between multiple states. It is drawn as a circle with a notch. Each
click on the circle increments the value of the state (modulo the maximum
number of states). This manipulator generates an integer value corresponding to
the state of the manipulator. The API class for StateManip is MFnStateManip.</p>
<h2>CurveSegmentManip </h2>
<p>The CurveSegmentManip
lets you manipulate two points on a curve to specify a curve segment. This
manipulator generates two floating point values, which correspond to the
parameters of the start and end of the curve segment. The API class for CurveSegmentManip
is MFnCurveSegmentManip.</p>
<h1>III. Custom Manipulators</h1>
<p>There are several ways to work with manipulators, you could
either create a base manipulator
on any node in the current scene on the fly, or you could also create a
manipulator container and compose a custom manipulator by adding Maya base
manipulators into the container, furthermore, you can also create a brand new
type of manipulator node by using MPxManipulatorNode class and defining custom
drawing and picking of the manipulator node. Before we jump into more advanced topics
of creating a manipulator with MPxManipulatorNode, let’s first examine how to
work with Maya base manipulators to create the simplest manipulator on a node.</p>
<h2>a. Working with Maya Base Manipulators</h2>
<p>In the “Maya Base Manipulators”
section, we listed all the function set classes for Maya base manipulators. The
function set classes are responsible to create the base manipulators with corresponding
create() functions, and also set up some properties of the base manipulators depending
on their individual types. Most importantly, the function set classes are used
to set up relationships between values of visual controls on the manipulators
and values of the attributes (plugs) on nodes. In other words, these base
manipulator function set classes are responsible to communicate with attribute
(plugs) on nodes to set their values based on visual control values on
manipulator and also to set manipulator visual control values appropriately
with respect to the values of the attributes (plugs). In the following section,
we will take a closer look at how this communication works. We will use MFnDistanceManip
as an example.</p>
<h3>i. Communication between
Manipulators and Plugs on Nodes</h3>
<p>The communication between manipulators
and nodes can be done in one of two ways: simple one-to-one associations, or
through the use of more complex conversion functions. </p>
<p>The properties of the visual controls on a manipulator are
represented by float values or other types of data values, and these properties
are all registered on the manipulator with unique identifiers. The values are
called manip values, and the unique identifiers are manip indices. Some of the values
define the key property relate directly to an affordance of the manipulator.
For example, the MFnDistanceManip::distanceIndex() returns the index of the
manipulator property that relates directly to the distance of a DiscManip. &nbsp;Other values do not relate to an affordance of
the manipulator, but provide important information on the position or
orientation of the manipulator such as MFnDistanceManip::startPointIndex() and MFnDistanceManip::directionIndex().</p>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f25c9970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017c328f25c9970b image-full" style="display: block; margin-left: auto; margin-right: auto;" title="Manipplugs" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c328f25c9970b-800wi" border="0" alt="Manipplugs" /></a><br /><strong>One-to-One Mapping</strong></p>
<p>As the name indicates, one-to-one mapping basically synchronizes
manip values with attribute/plug values directly. In all the function set classes
for Maya base manipulators, there is always one function that has some form of
“connectToXXXPlug”. This is the function to establish the one-to-one mapping
relationship between manip values and attribute/plug values. In other words,
the manip value equals to the attribute/plug value, and vice versa.</p>
<p>In the case of MFnDistanceManip, the function
MFnDistanceManip::connectToDistancePlug() sets up the one-to-one relationship
between the manip value of distance manip and the corresponding “distance” attribute/plug
on a node. The following code in devkit project footPrintManip demonstrates a
good example of using this one-to-one mapping.</p>
<pre class="brush:cpp; toolbar:false;">MFnDistanceManip distanceManipFn (fDistanceManip) ;
MFnDependencyNode nodeFn (node) ;
MPlug sizePlug =nodeFn.findPlug ("size", &amp;stat) ;
if ( stat != MStatus::kFailure ) {
	distanceManipFn.connectToDistancePlug (sizePlug) ;
	…
}
</pre>
<p>The
following graph demonstrates the one-to-one mapping relationship between the
distance manip value and the value of “size” plug on a node.</p>
<p>
<a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdc015970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017d3cbdc015970c image-full" style="display: block; margin-left: auto; margin-right: auto;" title="Onetoone" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cbdc015970c-800wi" border="0" alt="Onetoone" /></a><br />After you set up the one-to-one mapping relationship,
whenever the manip value changes, the corresponding plug/attribute value
changes with it and vice versa.</p>
<p>One-to-one mapping is a very straightforward and convenient
approach to set up relationship between manip values and attribute/plug values,
however it may not be acceptable for more complex requirements. For example, in the above case what if you want to set
up the manip value to be 5 * the value of plug “size”? There is no way you can
set this up with one-to-one mapping. Also, when you move the node, the distance
manipulator will appear not showing up at the center of the node, and there is
no way to make the manipulator move along with the position of the node. In
situations where the position of a manipulator needs to be affected by the
position of an object, or a group of manipulators need to move together in a
specific way; a new approach (conversion functions) needs to be implemented.</p>
<p><strong>Conversion Functions</strong></p>
<p>Conversion functions are used to set up more
complex relationship between manip values and attribute/plug values. As the
name indicates, they are responsible to convert manip values to attribute/plug
values, and vice versa. In C++, they are implemented as callback methods. </p>
<p>There are two
types of conversion callback functions:&nbsp;</p>
<p><strong>plugToManip conversion</strong></p>
<p>A plugToManip conversion callback is used to convert
attribute/plug values to corresponding manip values. The implementation of
plugToManip conversion is achieved by calling MPxManipContainer::addPlugToManipConversionCallback().
Using manipulator container is the recommended approach to create a custom
manipulator from May base manipulators. In the following section “Manipulator
Containers”, all aspects of using MPxManipContainer class will be discussed in
detail.</p>
<p>As discussed earlier, every property of visual
controls has a corresponding index registered within the manipulator. In order
to set up plugToManip conversion relationship, when MPxManipContainer::addPlugToManipConversionCallback()
is called, the index of the manip value needs to be passed in. In every base
manipulator function set class, there are functions to retrieve different
indices for individual properties.</p>
<p>The following code in devkit project footPrintManip
illustrates how to retrieve index of the starting point of the manipulator and
pass it into addPlugToManipConversionCallback function call. The second
parameter of this function call is the callback conversion function, which is
responsible to calculate the manip value of this starting point based on some
attribute/plug values.&nbsp;</p>
<pre class="brush:cpp; toolbar:false;">unsigned startPointIndex =distanceManipFn.startPointIndex () ;
addPlugToManipConversionCallback (startPointIndex, (plugToManipConversionCallback)&amp;footPrintLocatorManip::startPointCallback) ;
</pre>
<p>The plugToManip conversion callback is responsible to
access attribute/plug values, calculate manip values based on custom algorithm
and return them. In this specific case, the callback function doesn’t request
attribute/plug values, instead, it retrieves the node translation in world
space and return this value to Maya. By doing so, it actually sets the start
point manip value to be the same as the node translation. The outcome of this
setting is that whenever the node moves, the manipulator moves along with it
and always appears in the center of the node.</p>
<pre class="brush:cpp; toolbar:false;">MManipData footPrintLocatorManip::startPointCallback (unsigned index) const {
	MFnNumericData numData ;
	MObject numDataObj =numData.create (MFnNumericData::k3Double) ;
	MVector vec =nodeTranslation () ;
	numData.setData (vec.x, vec.y, vec.z) ;
	return (MManipData (numDataObj)) ;
}
</pre>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee43312c0970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017ee43312c0970d image-full" style="display: block; margin-left: auto; margin-right: auto;" title="DistanceManip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee43312c0970d-800wi" border="0" alt="DistanceManip" /></a></p>
<p>One thing to note is that the conversion callback returns
a data type called MManipData. By returning this to Maya, the conversion
callback sets the manip value to what the MManipData represents. MManipData can
represent data that is either simple or complex. When it comes to complex data
types (such as such as matrices, curves, and arrays of data), MFnData or its
derived classes need to be used to create the data.</p>
<p><strong>manipToPlug conversion</strong></p>
<p>A manipToPlug conversion
callback is used to convert manip values to attribute/plug values. The
implementation of manipToPlug conversion is achieved by calling MPxManipContainer::addManipToPlugConversionCallback().The
corresponding plug needs to be passed in as the first parameter because the
callback needs to set attribute/plug values, it needs to know which
attribute/plug values to change.</p>
<p>In general, manipToPlug conversions are less
commonly used and there are several examples in the devkit. The following code
from rotateManip example project demonstrates using this technique with the
node’s “rotate” plug passed in.</p>
<pre class="brush:cpp; toolbar:false;">MFnDependencyNode nodeFn (node) ;
MPlug rPlug =nodeFn.findPlug ("rotate", &amp;stat) ;
…
rotatePlugIndex =addManipToPlugConversionCallback (rPlug, (manipToPlugConversionCallback)&amp;exampleRotateManip::rotationChangedCallback) ;
</pre>
<p>The addManipToPlugConversionCallback function call returns
the index (“rotatePlugIndex”) to identify which plug has been registered with
this callback. When the actual callback function is invoked, the index of the
plug value to be calculated will be passed in as the parameter of the function
call. The callback function then needs to distinguish if the passed-in value is
the index that is registered for this callback. If there is more than one plug
registered with this callback, a condition statement can be used to distinguish
different passed-in plug index and calculate corresponding manip values. &nbsp;In the rotationChangedCallback() below,&nbsp; the passed-in “index” is compared with
“rotatePlugIndex”. If they are equal, getConverterManipValue() is called with rotate
manip index to retrieve rotate manip value. By returning the rotate manip value
to Maya as a MManipData object, this callback function is setting the rotate
plug value to be the same as the rotate manip value. Depending on your specific
requirement, more complex value relationship between rotate plug value and
rotate manip value can be set up with this conversion callback function.</p>
<pre class="brush:cpp; toolbar:false;">MManipData exampleRotateManip::rotationChangedCallback (unsigned index) {
	MObject obj =MObject::kNullObj ;
	// If we entered the callback with an invalid index, print an error and
	// return.  Since we registered the callback only for one plug, all 
	// invocations of the callback should be for that plug.
	if ( index != rotatePlugIndex ) {
		MGlobal::displayError ("Invalid index in rotation changed callback!") ;
		// For invalid indices, return vector of 0's
		MFnNumericData numericData ;
		obj =numericData.create (MFnNumericData::k3Double) ;
		numericData.setData (0.0, 0.0, 0.0) ;
		return (obj);
	}
	MFnNumericData numericData ;
	obj =numericData.create (MFnNumericData::k3Double) ;

	MEulerRotation manipRotation ;
	if ( !getConverterManipValue (rotateManip.rotationIndex (), manipRotation) ) {
		MGlobal::displayError ("Error retrieving manip value") ;
		numericData.setData (0.0, 0.0, 0.0) ;
	} else {
		numericData.setData (manipRotation.x, manipRotation.y, manipRotation.z) ;
	}
	return MManipData (obj) ;
}
</pre>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee433177e970d-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d017ee433177e970d image-full" style="display: block; margin-left: auto; margin-right: auto;" title="RotateManip" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee433177e970d-800wi" border="0" alt="RotateManip" /></a></p>
<p>For more complete and in-depth explanation, you can go to
Maya API documentationà“API
Guide”à
“Manipulators”à
“Communication between manipulators and nodes”.</p>
<p>
Tips:</p>
<ol>
<li>C++
Conversion Functions vs. Python Conversion Functions<br />When looking at the MPxManipContainer class
documentation, people usually get confused by the many conversion and
conversion callback function names.&nbsp; Here
is a clarification: If you are writing python plug-in,
addManipToPlugConversion() and addPlugToManipConversion() (that are
specifically designed for writing python plug-ins) are the only functions to
register conversion callback functions. If you are writing C++ plug-ins, you
can either use addPlugToManipConversionCallback()/addManipToPlugConversionCallback()
functions or addManipToPlugConversion()/addPlugToManipConversion() functions to
register conversion callback functions.</li>
<li>Manip
index vs. plug index<br />Properties of visual controls have individual
index registered within the manipulator. For example, MFnDistanceManip::startPointIndex()
returns the index of the start point of the DistanceManip, MFnRotateManip::rotationIndex()
returns the index of rotation manip Value of the manipulator, etc. In order to
specify which manip value is set up with plugToManip conversion callback, manip
index needs to used when addPlugToManipConversionCallback() or addPlugToManipConversion()
is called.<br /><br />There is another concept of index called
plug index that is returned by addManipToPlugConversionCallback() and
addManipToPlugConversion() to identify which plug has been registered with
manipToPlug conversion callback. &nbsp;This
index usually is saved as a member variable and whenever the callback function
is invoked, it is used to compare with the requested-value plug index to decide
what values need to return for the requested-value plug.<br /><br />Manip indexes also are used to retrieve manip
values from getConverterManipValue() function call, and plug indexes are used
to retrieve plug values from getConverterPlugValue() function call.</li>
</ol>
<h2>b. Manipulator Containers</h2>
<p>It is recommended to create a manipulator
container and add one or more base manipulators to the container to compose a
new type of manipulator. It is also the most common way to create a custom
manipulator. This approach involves the following steps:</p>
<p style="padding-left: 30px;">i. create a custom manip container class derived from MPxManipContainer</p>
<p style="padding-left: 30px;">ii. &nbsp;add base manipulators to the
manip container class</p>
<p style="padding-left: 30px;">iii. define associations between the manipulator and the attribute on
the nodes they affect</p>
<p>Let’s examine these steps in detail:</p>
<h3>i. Create a custom
manip container class derived from MPxManipContainer</h3>
<p>In order to create
a custom manipulator you need to derive from MPxManipContainer and implement
some common functions of MPxNode such as the create() and initialize() functions.
Also when registering this custom node with MFnPlugin::registerNode in
initializePlugin() function, MPxNode::kManipContainer needs to used.</p>
<h3>ii. Add base
manipulators to the manip container class</h3>
<p>Maya base manipulators are added into custom manipulator
container classes in the MPxManipContainer::createChildren() function. This
method is usually called by Maya after this custom manip container class is set
up. MPxManipContainer class provides a set of member functions to add
individual Maya base manipulators, most of them named like this “addXXXManip”
with XXX being the manip name. The function returns an MDagPath object
representing the created base manipulator, which you can then use the corresponding
function set class to operate with later. &nbsp;Here is an example in the devkit project
footPrintManip adding distance manip into a custom manip container:</p>
<pre class="brush:cpp; toolbar:false;">MStatus footPrintLocatorManip::createChildren () {
	MStatus stat =MStatus::kSuccess ;

	MString manipName ("distanceManip") ;
	MString distanceName ("distance") ;

	MPoint startPoint (0.0, 0.0, 0.0) ;
	MVector direction (0.0, 1.0, 0.0) ;
	fDistanceManip =addDistanceManip (manipName,distanceName) ;

	MFnDistanceManip distanceManipFn (fDistanceManip) ;
	distanceManipFn.setStartPoint (startPoint) ;
	distanceManipFn.setDirection (direction) ;
	
	return (stat) ;
}
</pre>
<h3>iii. Define
associations between the manipulator and the attribute on the nodes they affect</h3>
<p>As its name indicates,
MPxManipContainer::connectToDependNode() method connects the manipulator to the
dependency node. It is also where the association is made between the
manipulator and the attribute(s)/plug(s) that it will communicate with. All the
operations to set up communication between manipulators and attribute(s)/plugs
(including one-on-one mapping and conversion functions) need to put into this
function call.</p>
<p>After mapping
relationships between manipulators and plugs are set up, there are two
additional methods that need to be called. The methods are
MPxManipContainer::finishAddingManips() and MPxManipContainer::connectToDependNode()
and must be called in that order. Also, MPxManipContainer::finishAddingManips()
must be called after all calls to connect to plugs have been made. MPxManipContainer::finishAddingManips
must be called only once. Devkit sample footPrintManip demonstrates the
following operations: creating a distance manip; applying MFnDistanceManip
function set class on the created distance manip; setting up one-on-one mapping
relationship between plug “size” and distance manip value; and setting up
plugToManip conversion to set up manip start point position.</p>
<pre class="brush:cpp; toolbar:false;">MStatus footPrintLocatorManip::connectToDependNode (const MObject &amp;node) {
	MStatus stat ;

	// Get the DAG path
	MFnDagNode dagNodeFn (node) ;
	dagNodeFn.getPath (fNodePath) ;

	// Connect the plugs
	//
	MFnDistanceManip distanceManipFn (fDistanceManip) ;
	MFnDependencyNode nodeFn (node) ;

	MPlug sizePlug =nodeFn.findPlug ("size", &amp;stat) ;
	if ( stat != MStatus::kFailure ) {
		distanceManipFn.connectToDistancePlug (sizePlug) ;
		unsigned startPointIndex =distanceManipFn.startPointIndex () ;
		addPlugToManipConversionCallback (startPointIndex, (plugToManipConversionCallback)&amp;footPrintLocatorManip::startPointCallback) ;

		finishAddingManips () ;
		MPxManipContainer::connectToDependNode (node) ;
	}
	return (stat) ;
}
</pre>
<h2>c. Custom Drawing of Custom Manipulators</h2>
<p>Constructing a manipulator by creating a manipulator container and
adding one or more base manipulators to it is the most common approach to
create a custom manipulator, and Maya base manipulators provide a great variety
of possibilities of custom manipulator. However there are still situations
where you want to have more customized control over different perspectives of a
manipulator. For example, with the above approach, the shape and drawing of
custom manipulators is limited/restricted to Maya base manipulators because MPxManipContainer::draw()
function only provides a M3dView parameter to add supplementary drawing onto
the manipulator. The custom manipulator’s shape is already decided by the
combination of Maya base manipulator shapes that are added into the current manip
container. Also, you don’t have control over the selection
on the manipulator components and the selecting behavior when user clicks on
the manipulator that is defined by Maya base manipulators internal
implementation.</p>
<p>A new manipulator class MPxManipulatorNode was introduced
with Maya 2009 to provide a new way to implement custom manipulators with
custom OpenGL drawing code. It offers developers with options for selecting
manipulator components (activating different handles) on custom manipulators.
This class can either work alone or work with the MPxManipContainer class.</p>
<h3>i. Custom Drawing </h3>
<p>MPxManipulatorNode::draw() method
is overridden to implement custom drawing of this custom manipulator. In OpenGL,
drawing and picking is done together. This method is also responsible to set up
for selection. Several functions are important to use within this method:</p>
<p>glFirstHandle(): When drawing a OpenGL pickable component, &nbsp;a name uniquely representing the OpenGL
component must be set. This method returns the unsigned int value which
represents the first available OpenGL handle to use. When one OpenGL component
drawing is finished, the int value can be added by 1 to represent the next OpenGL
component.</p>
<p>colorAndName(): This
method is used to set the color of the OpenGL component that is being drawn
next. It is also used to set the OpenGL name of the component so that picking
can be supported. The second parameter “glName” is the OpenGL name that
represents the component you are going to draw in the code next. The last
parameter “colorIndex” presents the color you want to use on the GL
component.&nbsp; In MPxManipulatorNode class,
there are several color methods which return color indexes that Maya use to
allow custom manipulators to have a similar look.&nbsp;</p>
<pre class="brush:cpp; toolbar:false;">void triadScaleManip::draw (M3dView &amp;view, const MDagPath &amp;path, M3dView::DisplayStyle style, M3dView::DisplayStatus status) {
	……

	// Begin the drawing
	view.beginGL () ;

	// Place before you draw the manipulator component that can
	// be pickable.
	MGLuint glPickableItem ;
	glFirstHandle (glPickableItem) ;

	// Top
	topName =glPickableItem ;
	colorAndName (view, glPickableItem, true, mainColor ()) ;
	gGLFT-&gt;glBegin (GL_LINES) ;
	gGLFT-&gt;glVertex3fv (tl) ;
	gGLFT-&gt;glVertex3fv (tr) ;
	gGLFT-&gt;glEnd () ;

	// Right
	glPickableItem++;
	rightName =glPickableItem ;
	colorAndName (view, glPickableItem, true, mainColor ()) ;
	gGLFT-&gt;glBegin (GL_LINES) ;
	gGLFT-&gt;glVertex3fv (tr) ;
	gGLFT-&gt;glVertex3fv (br) ;
	gGLFT-&gt;glEnd () ;

	// ...

	// End the drawing
	view.endGL () ;
}
</pre>
<h3>ii.
Updating Attributes/Plugs Values on Nodes</h3>
There are 2 ways for MPxManipulatorNode to
update attributes/plugs values:<ol>
<li>Update attribute/plugs values directly by
implementing functions related with mouse movement event:<br />In MPxManipulator class there are three functions to use to watch for
mouse movement events:<br />&nbsp; MPxManipulatorNode::doPress (M3dView &amp;view);<br />&nbsp; MPxManipulatorNode::doDrag (M3dView &amp;view);<br />&nbsp; MPxManipulatorNode::doRelease (M3dView &amp;view);<br />These are called when the manipulator receives
a corresponding mouse event including mouse
down, mouse drag and mouse release. Algorithms can be implemented to update
attributes/plugs values when these functions are called. For example, when
doPress() gets called, record mouse position as original position; when
doDrag() gets called, record mouse movement (direction and distance); when
doRelease() gets called, calculate the actual mouse movement values and apply
to node attributes/plugs.</li>
<li>Connect to a dependent node:<br />In order to
connect to a dependent node, the following steps need to be taken:<br />&nbsp; Call add*Value() in the postConstructor() of the manipulator node;<br />&nbsp; Call conectPlugToValue() in connectToDependNode();<br />&nbsp; Call set*Value() in one of the do*() functions;<br />In order to connect attributes/plugs directly to
manipulator values, manipulator values need to be created first on the
manipulator. There are several add*Value() to add manipulator values of
different types. After the manipulator values are created and added onto the
manipulator, one-to-one mapping relationship can be achieved by calling
connectPlugToValue() method within MPxManipulatorNode::connectToDependNode(). In
one of the do*() function, which gets triggered when the manipulator is
receiving corresponding mouse event, calling set*Value() will set the
corresponding manipulator value that will consequently set the attributes/plugs
value which is connected to current manipulator value.</li>
</ol>
<h1>V. Apply Manipulators</h1>
<p>After a
custom manipulator is created, there are two ways to apply the manipulator to
nodes. The manipulator can either be applied to work only on one specific type
of node, or it can be added to a custom context/tool so that it is applicable
to any node.</p>
<h2>a. Apply on one type of node</h2>
<p>In order to make a custom
manipulator work on one specific type of node, there are several steps to set
up the relationship between custom manipulator and node type:</p>
<p>i. The manipulator must be named
after the node type appended with “Manip”: For example, if the node type name
is “myNode”, the custom manipulator name should be “myNodeManip”.</p>
<p>ii. Register the node type in the
manipulator connect table in node class initialization. In the node class initialize()
function, add one function call:</p>
<p>MPxManipContainer::addToManipConnectTable(id);&nbsp; where “id” is the custom node type ID.</p>
<p>After you select the custom node in
the Maya scene and go to “Show Manipulator Tool”, the custom manipulator will show
up on the custom node.&nbsp;</p>
<h2>b. Apply in user-defined context</h2>
<p>Another approach to apply custom
manipulators is adding them into a custom context. Custom contexts are proxy
classes where you can implement interactive tools based on mouse events occurring within an interactive panel in Maya. </p>
<p>In MPxContext class, there are two functions to
work with manipulators: addManipulators() and deleteManipulators(). &nbsp;MPxContext::addManipulators() takes a
parameter of MObject that represents a custom manipulator. MPxManipContainer::newManipulator()
or MPxManipulatorNode::newManipulator() can be used to create a custom
manipulator that is passed into MPxContext::addManipulator() call. </p>
<p>In addition, MPxSelectionContext::toolOnSetup()
and MPxContext::toolOffCleanup() should be overridden so that toolOnSetup adds
a callback to update custom manipulators to work on different objects, and
toolOffCleanup removes the callback when the current tool is inactive.</p>
<h1>VI. Manipulator Examples</h1>
<p>Here is the list of manipulator examples available in the Maya
installation devkit folder:</p>
<p>customAttrManip:</p>
<p>This plug-in
demonstrates how to create user-defined manipulators on custom attributes of
nodes within a user-defined context. This custom manipulator is called customAttrManip
and is composed of three DistanceManips.</p>
<p>customTriadManip:</p>
<p>This plug-in
demonstrates how to create user-defined manipulators from a user-defined
context and apply the manipulator to custom attributes defined on a custom
transform node.&nbsp; The custom transform
node has three custom attributes define, TnoiseX, TnoiseY, and TnoiseZ.&nbsp; Three distance base manips are defined as the
custom manipulator and get attached to the noise attributes when selected. The
attachment of the manipulator is performed by an event callback that is registered
for toolOnSetup and SelectionChanged events.&nbsp;</p>
<p>moveManip:</p>
<p>It shows how
to create a manipulator from a context. The user-defined manipulator in
moveToolManip.cpp is called moveManip and consists of two base manipulators: a
FreePointTriadManip and a DistanceManip. </p>
<p>footPrintManip:</p>
<p>This plug-in example demonstrates how to use the
Show Manipulator Tool with a user-defined node and a user-defined manipulator.
The user-defined manipulator consists of a DistanceManip. It also demonstrates
how to write plugToManip conversion callback functions so that DistanceManip is
always following the location of the foot. </p>
<p>rotateManip:</p>
<p>This plug-in demonstrates the different modes of
the rotate base manipulator. The user-defined manipulator in rotateManip.cpp
consists of a rotate base manipulator and a state base manipulator. The state
manipulator is used to control the mode of the rotate manipulator: object mode,
world space mode, gimbal mode, and object mode with snapping. </p>
<p>componentScaleManip: </p>
<p>This plug-in demonstrates how to use the scale base
manipulator and also demonstrates a method for manipulating components. The
plug-in componentScaleManip.cpp consists of a scale base manipulator. The
manipulator works by attaching manipToPlug conversion callbacks for every
selected vertex. The conversion function computes the new vertex positions
using stored initial vertex positions and the scale manipValue. </p>
<p>surfaceBumpManip:</p>
<p>This plug-in example demonstrates how the
pointOnSurface base manipulator can be used to modify vertices close to the
param manipValue. The plug-in uses a manipToPlug conversion function as a
callback to update vertex positions on the NURBS surface.</p>
<p>swissArmyManip:</p>
<p>This plug-in is an
example of a user-defined manipulator, that is comprised of a variety of the
base manipulators: CircleSweepManip, DirectionManip, DiscManip, DistanceManip,
FreePointTriadManip, StateManip, ToggleManip, RotateManip, ScaleManip.</p>
<p>lineManip:</p>
<p>This example
demonstrates how to use the MPxManipulatorNode class along with a command to
create a user defined manipulator.&nbsp; The
manipulator created is a simple line which is an OpenGL pickable
component.&nbsp; As you move the pickable
component, selected transforms have their scale attribute modified. The line's
movements are restricted in a plane. A corresponding command is used to create
and delete the manipulator node and to support undo/redo etc.</p>
<p>squareScaleManip:</p>
<p>This example demonstrates how to use the
MPxManipulatorNode class along with a command to create a user defined
manipulator.&nbsp; The manipulator created is
a simple square with the 4 sides as OpenGL pickable components.&nbsp; As you move the pickable component, selected
transforms have their scale attribute modified. A corresponding command is used
to create and delete the manipulator node and to support undo/redo etc.</p>
<p>Find <a href="http://around-the-corner.typepad.com/files/triadscalemanip.rar" target="_self">here</a> a conpanion sample for this post.</p>
<p>This article was written by Naiqi Weng who is a member of the ADN team working with me at Autodesk. Naiqi is an expert on the Maya and MotionBuilder API.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Eric Pavey
EMAIL: warpcat@gmail.com
IP: 64.111.160.30
URL: http://www.akeric.com
DATE: 10/22/2012 09:12:33 AM
Great write-up on manips.  Appreciate all the 'behind the scenes' info.
-----
COMMENT:
AUTHOR: Jens Jebens
EMAIL: jensjebens@gmail.com
IP: 203.83.193.114
URL: 
DATE: 10/25/2012 03:10:17 PM
Thank you for posting this! Appreciated as well ;)
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Using LXML in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: using-lxml-in-maya
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/using-lxml-in-maya.html 
DATE: 10/17/2012 06:13:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3ca386dd970c-pi" style="display: inline;"><img alt="Python-xml-title" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3ca386dd970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3ca386dd970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Python-xml-title" /></a></p>
<p>Recently someone asked me if we could use <a href="http://lxml.de/" target="_self">lxml </a>inside Maya and it turns out that lxml can be used in Maya excepted the Linux version. If you wonder what is lxml, here is a quick description:&#0160;The lxml XML toolkit is a Pythonic binding for the C libraries&#0160;<a href="http://xmlsoft.org/">libxml2</a>&#0160;and&#0160;<a href="http://xmlsoft.org/XSLT/">libxslt</a>. It is unique in that it combines the speed and XML feature completeness of these libraries with the simplicity of a native Python API, mostly compatible but superior to the well-known&#0160;<a href="http://effbot.org/zone/element-index.htm">ElementTree</a>&#0160;API.</p>
<p>Libxml2 is the XML C parser and toolkit developed for the Gnome project (but usable outside of the Gnome platform).&#0160;</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32750a04970b-pi" style="display: inline;"><img alt="Libxml" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c32750a04970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c32750a04970b-800wi" title="Libxml" /></a><br />Because the Linux version of Maya uses a very old version of libxml2 (i.e. version 2.6.4) and that the least version lxml can be built with is version 2.6.14, it is impossible to make it working. And when I say least lxml version, it is an old one :(</p>
<p>lxml web site mentions that the workaround is to build lxml in static mode. But it turns out that Maya will continue to crash (I also tried the egg way with no luck).</p>
<p>Anyway, after debuging into Maya, the issue was showing when Python was referencing a dictionary libxml2 upon loading lxml.etree =&gt; dict.c - xmlDictReference(). And naturally no way to fix the issue from the lxml side.</p>
<p>A workaround, but cannot guarante you would not break any other Maya features is to replace the libawxml2.so from Maya with a newer version. I tried with lxml-2.3.5 and libxml2-2.7.8 and it worked great.</p>
<p>Here is my scripts in case you want to try</p>
<pre class="brush: bash; toolbar: false;">#!/bin/bash
export MAYA_LOCATION=/usr/autodesk/maya2013.5-x64
export MYHOME=/home/cyrille
export DEST=$HOME/output

# assuming libxml2 source was downloaded and untar in ~/libxml2
# and that libxslt is already on the machine or was built as well
cd ~/libxml2
./configure --prefix=$DEST --without-python --with-zlib
make clean &amp;&amp; make
make install

# assuming lxml was downloaded and untar in ~/lxml
cd ~/lxml
$MAYA_LOCATION/bin/mayapy ./setup.py build
# log as su
$MAYA_LOCATION/bin/mayapy ./setup.py install

mv $MAYA_LOCATION/lib/libawxml2.so $MAYA_LOCATION/lib/libawxml2.so.old
cp $DEST/lib/libxml2.so $MAYA_LOCATION/lib/libawxml2.so</pre>
<p>That should be it,</p>
<p>but do not forget you need GCC 4.1.2 as it always been for Maya 2013 - 2013.5</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: DynamicLighting & FrustumCulling in MotionBuilder
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: dynamiclighting-frustumculling-in-motionbuilder
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: MotionBuilder
CATEGORY: Rendering
CATEGORY: Shader

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/dynamiclighting-frustumculling-in-motionbuilder.html 
DATE: 10/15/2012 12:00:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c53d5ca970c-pi" style="display: inline;"><img alt="Shadow_caster_culling" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c53d5ca970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c53d5ca970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Shadow_caster_culling" /></a><br />If you want to manually specifying
Shadow Caster Culling during render pass, you could use the following functions on FBModel. This will give
you control per model instead of a global control. &#0160;</p>
<pre class="brush: cpp; toolbar: false;">/** Acquire no frustum culling request.
*&#0160;&#0160;\return Current no frustum culling request count after function call.
*/
int NoFrustumCullingRequire();

/** Release no frustum culling request.
*&#0160;&#0160;\return Current no frustum culling request count after function call.
*/
int NoFrustumCullingRelease();
</pre>
You can also use the ShaderPassTypeBegin()/End() to turn on / off frustum culling globally
&amp; temporarily.
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Lost in classes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: lost-in-classes
CATEGORY: .Net
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Events
CATEGORY: Games
CATEGORY: Maya
CATEGORY: Training
CATEGORY: Visual Studio
CATEGORY: WCF
CATEGORY: Windows
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/lost-in-classes.html 
DATE: 10/13/2012 10:40:18 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cb01dcd970c-pi" style="display: inline;"><img alt="Alone" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3cb01dcd970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3cb01dcd970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Alone" /></a>Both my class and&#0160;Kevin&#39;s one&#0160;at AU aren&#39;t yet full. If you haven&#39;t registered yet and going to AU, please give a stop to our classes, I promiss you&#39;ll not be disapointed. But for this you also need to register to these classes.</p>
<p>There’s more detail on the class timing &amp; description here:</p>
<a href="https://www.autodeskuniversity2012.com/connect/sessionDetail.ww?SESSION_ID=2520&amp;tclass=popup">Using .NET Programming in Autodesk® Maya®</a>
<ul>
<li>Wednesday, Nov 28, 10:00 AM - 11:30 AM</li>
</ul>
<p><strong>Kevin Vandecar</strong>, for the ADN M&amp;E team will also be presenting in this class:</p>
<a href="https://www.autodeskuniversity2012.com/connect/sessionDetail.ww?SESSION_ID=2177&amp;tclass=popup">Autodesk® 3ds Max® .NET API Introduction and Techniques</a>
<ul>
<li>Wednesday, Nov 28, 3:00 PM - 4:30 PM</li>
</ul>
<p>I&#39;ll be busy as well in assisting my other ADN colleagues in their class and round table. The AU promises to be very busy for me, but interesting too :)</p>
<p>On the Monday prior to AU starting, I’ll be running/presenting&#0160;<a href="http://au.autodesk.com/?nd=m_e_adn_conference_devlab&amp;und=1785" target="_blank">the ADN M&amp;E conference at AU</a>&#0160;for the second time. While I cannot go into much details about the morning session as we would present some confidential information, you can find the<a href="https://www.autodeskuniversity2012.com/connect/search.ww#loadSearch-searchPhrase=&amp;searchType=session&amp;tc=0&amp;sortBy=&amp;i(10010)=12461&amp;i(10000)=&amp;i(10007)=&amp;i(10041)=&amp;i(10001)=&amp;i(10160)=" target="_self">event agenda here</a>&#0160;and recommend that you&#0160;<strong>register to this FREE event</strong>&#0160;whether you come or not to AU.</p>
<p>&#0160;</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: FBX 2013.3 plugin for Maya2013.5 on Linux is not installed
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: fbx-20133-plugin-for-maya20135-on-linux-is-not-installed
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Linux
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/fbx-20133-plugin-for-maya20135-on-linux-is-not-installed.html 
DATE: 10/10/2012 02:59:00 AM
-----
BODY:
<h3>To
install the Maya FBX plug-in: </h3>
<ol>
<li>Find the 2013.3 FBX installer which is included with the Maya
2013.5 install package. </li>
<li>Remove
the old plug-in from the <em>/usr/Autodesk/maya&lt;ver&gt;/bin/plug-ins/
(</em>where <em>&lt;ver&gt;</em>
is the version of Maya you have installed,) directory by entering <em>rm –f fbxmaya.so</em> at the
command prompt. </li>
<li>Type
the following command to install the Maya FBX
plug-in: </li>
</ol>
<pre>./fbx&lt;ver&gt;_maya&lt;ver&gt;_linux_enu</pre>
<p>(Where <em>FBX&lt;ver&gt;</em> is the
version of the Maya FBX plug-in you have
installed). </p>
<p>This
installs the plug-in to the following directory: </p>
<p>/usr/Autodesk/maya&lt;<em>ver</em>&gt;/bin/plug-ins/
(where &lt;<em>ver</em>&gt;
is the version of Maya you have installed). </p>
<p>If you
install Maya in another folder, you can specify the path on the Command Line
after: ./fbx&lt;ver&gt;_maya&lt;ver&gt;_linux_enu /home/maya/mypath/ </p>
<p>(Where <em>FBX&lt;ver&gt;</em> is the
version of the Maya FBX plug-in you have
installed.) </p>
<ol>
<li>Start
Maya and navigate to <strong>Window</strong> &gt; <strong>Settings/Preferences</strong> &gt; <strong>Plug-in
Manager</strong>. </li>
<li>Activate
the <strong>Loaded</strong> option for <em>Fbxmaya.so</em> in the <strong>Plug-in Manager</strong>. </li>
<li>Activate
the <em>Fbxmaya.so </em><strong>Autoload</strong> option so Maya loads the Maya FBX plug-in automatically at start-up.</li>
</ol>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building Qt, PyQt, PySide for Maya 2013 - Part 2
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: building-qt-pyqt-pyside-for-maya-2013-part-2
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Tools
CATEGORY: UI
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013-part-2.html 
DATE: 10/08/2012 05:01:00 AM
-----
BODY:
<p>This is a continuation of the previous <a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html" target="_self">post</a> and this time we&#0160;will&#0160;focus on building PySide.</p>
<p>PySide [http://www.pyside.org/ or&#0160;http://qt-project.org/wiki/PySide/] is a python binding to the Qt library. Because Maya uses Qt internally, you can use the PySide modules in Maya python scripts to create custom UI. PySide does not have the same licensing as Maya, Qt, or Python. Please consult the PySide website for information about licensing for PySide.</p>
<p>Download Shiboken &amp; PySide:&#0160;<a href="http://qt-project.org/wiki/PySideDownloads" target="_self">http://qt-project.org/wiki/PySideDownloads</a></p>
<p>Download Cmake:&#0160;<a href="http://www.cmake.org/cmake/resources/software.html">http://www.cmake.org/cmake/resources/software.html</a></p>
<p>Maya 2013 uses Qt4.7.1 which is binary compatible with the latest version of PySide-1.1.2 (at time of writing, October 2012).</p>
<h2>Building Qt</h2>
<p>Like for PyQt, you need to build Qt from the Autodesk modified source, so before you start read the previous <a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html" target="_self">post</a>&#0160;on how to build Qt. There is nothing different here for building PySide.</p>
<h2>Building Shiboken and PySide</h2>
<p>Like SIP for PyQt, PySide needs a supplementary library to interface C++ code to Python, and this is Shiboken. The few first version of PySide was using Boost which is a great library for Python and many other things, but Boost has a large footprint compared to Shiboken, and PySide quickly moved to Shiboken instead of Boost.</p>
<h2><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c48ddbf970c-pi" style="display: inline;"><img alt="Pyside-rounded-corners" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c48ddbf970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c48ddbf970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Pyside-rounded-corners" /></a><br />Building Shiboken</h2>
<p>If you go to the PySide page you&#39;ll get instructions on <a href="http://www.pyside.org/docs/pyside-git/howto-build/shiboken.html#" target="_self">how to build Shiboken</a> for all platforms. But I found these instructions&#0160;are either wrong, too complicated, requires unneeded dependencies and all over the place. Because I hate to pollute my developer machine with all unnecessary tools, I reduced the build procedure to the minimum needed. That also make sense because I am not building PySide everyday.</p>
<p>However you will need to download Cmake&#0160;to build PySide and Shiboken. The Cmake utility is available <a href="http://www.cmake.org/cmake/resources/software.html" target="_self">here</a>. Download and unzip Cmake in a folder or install Cmake using the installer as you prefer. You may also want to install few additional libraries on Linux even they aren&#39;t strictly needed, but would avoid true-wrong error messages.</p>
<p style="padding-left: 30px;">yum install libxml2-devel libxslt-devel</p>
<p>For the rest of the post,&#0160;I assume you installed Cmake on the following folders:</p>
<ul>
<li>Windows x64 =&#0160;c:\cmake-2.8.9-win32-x86</li>
<li>OSX x86 64 bit = /Users/myHomeDir/cmake</li>
<li>Linux = ~/cmake</li>
</ul>
<p>To avoid script issues later on OSX, please go in the cmake folder and rename the &quot;CMake 2.8.9.app&quot; into&#0160;&quot;CMake-2.8.9.app&quot;. Apparently scripts do not like spaces even using the escape sequence.</p>
<h3><span style="text-decoration: underline;"><strong>Windows x64</strong></span></h3>
<p>The following instructions only apply to 64‐bit builds of Windows Shiboken. You will need to have Visual Studio 2010 SP1 with x64 tools installed. These instructions may also work with Visual Studio Express 2010 Edition. (qt-project.org instructions <a href="http://qt-project.org/wiki/Building_PySide_on_Windows" target="_self">here</a>)</p>
<ol>
<li>Extract the archive to a folder (e.g. C:\shiboken-1.1.2)</li>
<li>Start up a Visual Studio 2010 x64 Win64 Command Prompt</li>
<li>cd C:\shiboken-1.1.2</li>
<li>Setup the environment<br /><br />set CMAKE=c:\cmake-2.8.9-win32-x86\bin\cmake.exe<br />set QMAKE=c:\qt-adsk-4.7.1\qmake.exe<br />set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2013<br />set PYTHON_EXEC=&quot;%MAYA_LOCATION%\bin\mayapy.exe&quot;<br />set PYTHON_INC=&quot;%MAYA_LOCATION%\include\python2.6&quot;<br />set PYTHON_LIB=&quot;%MAYA_LOCATION%\lib\python26.lib&quot;<br /><br /></li>
<li>Create a directory _build<br /><br />mkdir _build<br />cd \shiboken-1.1.2\_build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />%CMAKE% -G &quot;NMake Makefiles&quot; -DQT_QMAKE_EXECUTABLE=%QMAKE% -DBUILD_TESTS=False -DPYTHON_EXECUTABLE=%PYTHON_EXEC% -DPYTHON_INCLUDE_DIR=%PYTHON_INC% -DPYTHON_LIBRARY=%PYTHON_LIB% -DCMAKE_BUILD_TYPE=Release ..<br /><br /></li>
<li>nmake</li>
<li>nmake install/fast<br /><br /><em>this will install files into &#39;C:\Program Files\shiboken&#39; and not in Maya&#39;s Python folder<br />&#0160;</em></li>
<li>copy &quot;C:\Program Files\shiboken\lib\site-packages\shiboken.pyd&quot; &quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages&quot;</li>
<li>copy &quot;C:\Program Files\shiboken\bin\shiboken-python2.6.dll&quot;&#0160;&quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages&quot;</li>
</ol>
<p>You&#39;re done.</p>
<h3><strong><span style="text-decoration: underline;">OSX x86 64 bit</span></strong></h3>
<p>The following instructions only apply to Mac 64‐bit builds of PyQt.&#0160;Note that in case you build on Lion (10.7) that you need the MacOS Snow Leopard SDK (10.6) to build Qt and Maya plug-ins.&#0160;(qt-project.org instructions&#0160;<a href="http://qt-project.org/wiki/Building_PySide_on_Linux" target="_self">here</a>)</p>
<ol>
<li>untar shiboken-latest.tar.bz2</li>
<li>cd shiboken-1.1.2</li>
<li>Setup the environment<br /><br />export CMAKE=/Users/<em>myHomeDir</em>/cmake/CMake-2.8.9.app/Contents/bin/cmake<br />export QMAKE=/Users/<em>myHomeDir</em>/qt-4.7.1/bin/qmake<br />export MAYA_LOCATION=/Applications/Autodesk/maya2013<br />export PYTHON_EXEC=$MAYA_LOCATION/Maya.app/Contents/bin/mayapy<br />export PYTHON_SITE=$MAYA_LOCATION/Maya.app/Contents/Frameworks/Python.framework<br />export PYTHON_INC=$PYTHON_SITE/Headers<br />export PYTHON_LIB=/usr/lib/libpython2.6.dylib<br /><br /></li>
<li>Create directories _output and _build<br /><br />mkdir _output<br />mkdir _build<br />cd _build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />$CMAKE -DQT_QMAKE_EXECUTABLE=$QMAKE -DBUILD_TESTS=False -DPYTHON_EXECUTABLE=$PYTHON_EXEC -DPYTHON_INCLUDE_DIR=$PYTHON_INC -DPYTHON_LIBRARY=$PYTHON_LIB -DCMAKE_BUILD_TYPE=Release -DENABLE_ICECC=0 -DCMAKE_OSX_SYSROOT=/Developer/SDKs/MacOSX10.6.sdk -DCMAKE_INSTALL_PREFIX=/Users/<em>myHomeDir</em>/shiboken-1.1.2/_output ..<br /><br /></li>
<li>make</li>
<li>make install/fast<br /><br /><em>At this time Shiboken is installed in &#39;/Users/myHomeDir/shiboken-1.1.2/_output&#39; and not in Maya&#39;s Python folder. Because binaries will need special treatments to work in Maya, please refer to the special Mac OSX install procedure at the end of this post after having built PySide below.</em></li>
</ol>
<h3><strong><span style="text-decoration: underline;">Linux x86 64 bit</span></strong></h3>
<p>The following instructions only apply to Linux 64‐bit builds of PySide.&#0160;The first thing described in the Maya 2013 documentation for building on Linux is that you need the GCC 4.1.2 compiler. See&#0160;<a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_compiler_requirement.htm" target="_self">here</a>&#0160;- details to rebuild GCC for Maya 2013 are in my previous post.&#0160;(qt-project.org instructions&#0160;<a href="http://qt-project.org/wiki/Building_PySide_on_Linux" target="_self">here</a>)</p>
<ol>
<li>untar shiboken-latest.tar.bz2</li>
<li>cd shiboken-1.1.2</li>
<li>Setup the environment<br /><br />export CMAKE=~/cmake/bin/cmake<br />export QTDIR=/usr/local/Trolltech/Qt-4.7.1<br />export QMAKE=$QTDIR/bin/qmake<br />export MAYA_LOCATION=/usr/autodesk/maya2013-x64<br />export PYTHON_EXEC=$MAYA_LOCATION/bin/mayapy<br />export PYTHON_INC=$MAYA_LOCATION/include/python2.6<br />export PYTHON_LIB=$MAYA_LOCATION/lib/libpython2.6.so<br />export CMAKE_C_COMPILER=/opt/gcc412/bin/gcc412<br />export CMAKE_CXX_COMPILER=/opt/gcc412/bin/g++412<br /><br /></li>
<li>Create directories _output and _build<br /><br />mkdir _output<br />mkdir _build<br />cd _build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />$CMAKE -DQT_QMAKE_EXECUTABLE=$QMAKE -DBUILD_TESTS=False -DPYTHON_EXECUTABLE=$PYTHON_EXEC -DPYTHON_INCLUDE_DIR=$PYTHON_INC -DPYTHON_LIBRARY=$PYTHON_LIB -DCMAKE_BUILD_TYPE=Release -DENABLE_ICECC=0 -DCMAKE_INSTALL_PREFIX=~/shiboken-1.1.2/_output -DCMAKE_C_COMPILER=$CMAKE_C_COMPILER -DCMAKE_CXX_COMPILER=$CMAKE_CXX_COMPILER&#0160;..<br /><br /></li>
<li>make</li>
<li>make install/fast<br /><br /><em>At this time Shiboken is installed in &#39;~/shiboken-1.1.2/_output&#39; and not in Maya&#39;s Python folder.<br /><br /></em></li>
<li>cd $MAYA_LOCATION/lib/python2.6/site-packages<br />cp ~/shiboken-1.1.2/_output/lib/libshiboken-python2.6.so.1.1.2 .<br />ln -s&#0160;libshiboken-python2.6.so.1.1.2&#0160;libshiboken-python2.6.so.1.1<br />ln -s&#0160;libshiboken-python2.6.so.1.1&#0160;libshiboken-python2.6.so<br />cp&#0160;~/shiboken-1.1.2/_output/lib/python2.6/site-packages/shiboken.so .</li>
<li>Create a file named shiboken.conf in /etc/ld.so.conf.d and add the following line<br /><br />/usr/autodesk/maya2013-x64/lib/python2.6/site-packages<br /><br /></li>
<li>sudo ldconfig</li>
</ol>
<h2>Building PySide</h2>
<p>Like for Shiboken, instructions on the PySide page are over complicated to my taste. While it is fine to use with minor adjustments, find below some instructions which I used to build PySide without downloading tools I do not need in my everyday work.</p>
<h3><strong><span style="text-decoration: underline;">Windows x64</span></strong></h3>
<p>The following instructions only apply to 64‐bit builds of Windows PySide. You will need to have Visual Studio 2010 SP1 with x64 tools installed. These instructions may also work with Visual Studio Express 2010 Edition.&#0160;(qt-project.org instructions&#0160;<a href="http://qt-project.org/wiki/Building_PySide_on_Windows" target="_self">here</a>)</p>
<p>One last minute update - the Maya 2013 Extension includes qmake.exe in its bin folder (I.e.: &#39;C:\Program Files\Autodesk\Maya2013.5\bin&#39;), so delete or rename it while you build PySide or you&#39;ll get strange errors later.</p>
<ol>
<li>Extract the archive to a folder (e.g. C:\pyside-qt4.8+1.1.2)</li>
<li>Start up a Visual Studio 2010 x64 Win64 Command Prompt</li>
<li>cd C:\pyside-qt4.8+1.1.2</li>
<li>Setup the environment<br /><br />set CMAKE=c:\cmake-2.8.9-win32-x86\bin\cmake.exe<br />set QMAKE=c:\qt-adsk-4.7.1\qmake.exe<br />set SHIBOKEN=&quot;C:\Program Files\shiboken&quot;<br />subst s: /d<br />subst s: %SHIBOKEN%<br />set SHIBOKEN_DIR=s:\lib\cmake\Shiboken-1.1.2<br /><br /></li>
<li>Create a directory _build<br /><br />mkdir _build<br />cd \pyside-qt4.8+1.1.2\_build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />%CMAKE% -G &quot;NMake Makefiles&quot; -DQT_QMAKE_EXECUTABLE=%QMAKE% -DBUILD_TESTS=False -DCMAKE_BUILD_TYPE=Release -DShiboken_DIR=%SHIBOKEN_DIR%&#0160;..<br /><br /></li>
<li>nmake</li>
<li>nmake install<br /><br /><em>this will install files into &#39;C:\Program Files\pysidebindings&#39; and not in Maya&#39;s Python folder<br />&#0160;</em></li>
<li>Create a folder PySide in Maya&#39;s Python folder<br /><br />mkdir &quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages\PySide&quot;<br /><br /></li>
<li>copy &quot;C:\Program Files\shiboken\bin\shiboken-python2.6.dll&quot;&#0160;&quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages\PySide&quot;</li>
<li>copy &quot;C:\Program Files\pysidebindings\bin\pyside-python2.6.dll&quot;&#0160;&quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages\PySide&quot;</li>
<li>copy &quot;C:\Program Files\pysidebindings\lib\site-packages\PySide\*.*&quot;&#0160;&quot;C:\Program Files\Autodesk\Maya2013\Python\Lib\site-packages\PySide&quot;</li>
</ol>
<p>You&#39;re done.</p>
<h3><strong><span style="text-decoration: underline;">OSX x86 64 bit</span></strong></h3>
<p>The following instructions only apply to Mac 64‐bit builds of PyQt.&#0160;Note that in case you build on Lion (10.7) that you need the MacOS Snow Leopard SDK (10.6) to build Qt and Maya plug-ins.&#0160;(qt-project.org instructions&#0160;<a href="http://qt-project.org/wiki/Building_PySide_on_Linux" target="_self">here</a>)</p>
<ol>
<li>untar pyside-latest.tar.bz2</li>
<li>cd pyside-qt4.8+1.1.2</li>
<li>Setup the environment<br /><br />export CMAKE=/Users/<em>myHomeDir</em>/cmake/CMake-2.8.9.app/Contents/bin/cmake<br />export QTDIR=/Users/<em>myHomeDir</em>/qt-4.7.1<br />export QMAKE=$QTDIR/bin/qmake<br />export SHIBOKEN_DIR=/Users/<em>myHomeDir</em>/shiboken-1.1.2/_output<br /><br /></li>
<li>Create directories _build and _output<br /><br />mkdir _output<br />mkdir _build<br />cd _build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />$CMAKE -DQT_QMAKE_EXECUTABLE=$QMAKE -DBUILD_TESTS=False -DCMAKE_BUILD_TYPE=Release -DCMAKE_OSX_SYSROOT=/Developer/SDKs/MacOSX10.6.sdk&#0160;-DShiboken_DIR=$SHIBOKEN_DIR -DCMAKE_INSTALL_PREFIX=/Users/<em>myHomeDir</em>/pyside-qt4.8+1.1.2/_output -DALTERNATE_QT_INCLUDE_DIR=$QTDIR/include&#0160;..<br /><br /></li>
<li>make</li>
<li>make install<br /><br /><em>At this time PySide is installed in &#39;/Users/myHomeDir/pyside-qt4.8+1.1.2/_output&#39; and not in Maya&#39;s Python folder. Because binaries will need special treatments to work in Maya, please refer to the special Mac OSX install procedure at the end of this post below.</em></li>
</ol>
<h3><span style="text-decoration: underline;"><strong>Linux x86 64 bit</strong></span></h3>
<p>The following instructions only apply to Linux 64‐bit builds of PySide.&#0160;The first thing described in the Maya 2013 documentation for building on Linux is that you need the GCC 4.1.2 compiler. See&#0160;<a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_compiler_requirement.htm" target="_self">here</a>&#0160;- details to rebuild GCC for Maya 2013 are in my previous post.&#0160;(qt-project.org instructions&#0160;<a href="http://qt-project.org/wiki/Building_PySide_on_Linux" target="_self">here</a>)</p>
<ol>
<li>untar pyside-latest.tar.bz2</li>
<li>cd pyside-qt4.8+1.1.2</li>
<li>Setup the environment<br /><br />export CMAKE=~/cmake/bin/cmake<br />export QMAKE=/usr/local/Trolltech/Qt-4.7.1/bin/qmake<br />export MAYA_LOCATION=/usr/autodesk/maya2013-x64<br />export SHIBOKEN_DIR=~/shiboken-1.1.2/_output/lib/cmake/Shiboken-1.1.2<br />export CMAKE_C_COMPILER=/opt/gcc412/bin/gcc412<br />export CMAKE_CXX_COMPILER=/opt/gcc412/bin/g++412<br />export LD_LIBRARY_PATH=$MAYA_LOCATION/lib</li>
<li>Create directories _build and _output<br /><br />mkdir _output<br />mkdir _build<br />cd _build<br /><br /></li>
<li>Generate makefiles using Cmake<br /><br />$CMAKE -DQT_QMAKE_EXECUTABLE=$QMAKE -DBUILD_TESTS=False -DCMAKE_BUILD_TYPE=Release -DShiboken_DIR=$SHIBOKEN_DIR -DCMAKE_C_COMPILER=$CMAKE_C_COMPILER -DCMAKE_CXX_COMPILER=$CMAKE_CXX_COMPILER -DCMAKE_INSTALL_PREFIX=~/pyside-qt4.8+1.1.2/_output ..<br /><br /></li>
<li>make</li>
<li>make install<br /><br /><em>At this time PySide is installed in &#39;~/pyside-qt4.8+1.1.2/_output&#39; and not in Maya&#39;s Python folder.<br /><br /></em></li>
<li>cd $MAYA_LOCATION/lib/python2.6/site-packages<br />mkdir PySide<br />cd PySide<br />cp ~/pyside-qt4.8+1.1.2/_output/lib/libpyside-python2.6.so.1.1.2 .<br />ln -s&#0160;libpyside-python2.6.so.1.1.2&#0160;libpyside-python2.6.so.1.1<br />ln -s&#0160;libpyside-python2.6.so.1.1&#0160;libpyside-python2.6.so<br />cp&#0160;~/pyside-qt4.8+1.1.2/_output/lib/python2.6/site-packages/PySide/* .</li>
<li>Create a file named pyside.conf in /etc/ld.so.conf.d and add the following line<br /><br />/usr/autodesk/maya2013-x64/lib/python2.6/site-packages/PySide<br /><br /></li>
<li>sudo ldconfig</li>
</ol>
<h2>Special instructions to finalize install on Mac OSX</h2>
<p>Ok, we now assume both Shiboken and PySide successfully built into&#0160;<em>&#39;/Users/myHomeDir/shiboken-1.1.2/_output&#39; </em>and&#0160;<em><em>&#39;/Users/myHomeDir/pyside-qt4.8+1.1.2/_output&#39;</em></em>.</p>
<p>Rather than a long description, I copied below my install script, you only need to adjust one (or two) path accordingly to your machine set-up.</p>
<ol>
<li>Copy&amp;Paste the script below into a script file (for example&#0160;my-pyside-install-script)</li>
<li>Edit the paths marked in code below to fit your machine set-up</li>
<li>sudo ./my-pyside-install-script</li>
</ol>
<h4><span style="text-decoration: underline;"><strong>Code to copy and paste into a bash script</strong></span></h4>
<pre class="brush: cpp; highlight: [3, 4, 9, 10]; toolbar: false;">#!/usr/bin/env bash

export MYHOME=/Users/myHomeDir
export DOCS=$MYHOME
export MAYA_LOCATION=/Applications/Autodesk/maya2013
export PYTHON_SITE=$MAYA_LOCATION/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages

# Config shiboken / PySide
export SHIBOKEN=$DOCS/shiboken-1.1.2/_output/lib
export PYSIDE=$DOCS/pyside-qt4.8+1.1.2/_output/lib

cd $PYTHON_SITE
cp $SHIBOKEN/libshiboken-python2.6.1.1.2.dylib .
ln -s libshiboken-python2.6.1.1.2.dylib libshiboken-python2.6.1.1.dylib
ln -s libshiboken-python2.6.1.1.dylib libshiboken-python2.6.dylib
cp $SHIBOKEN/python2.6/site-packages/shiboken.so .

mkdir PySide
cd PySide

cp $SHIBOKEN/libshiboken-python2.6.1.1.2.dylib .
ln -s libshiboken-python2.6.1.1.2.dylib libshiboken-python2.6.1.1.dylib
ln -s libshiboken-python2.6.1.1.dylib libshiboken-python2.6.dylib

cp $PYSIDE/libpyside-python2.6.1.1.2.dylib .
ln -s libpyside-python2.6.1.1.2.dylib libpyside-python2.6.1.1.dylib
ln -s libpyside-python2.6.1.1.dylib libpyside-python2.6.dylib

cp $PYSIDE/python2.6/site-packages/PySide/* .

# The following 4 lines are one single line each to execute properly
for mod in QtCore QtDeclarative QtDesigner QtDesignerComponents QtGui QtHelp QtMultimedia QtNetwork QtOpenGL QtScript QtScriptTools QtSql QtSvg QtWebKit QtXml QtXmlPatterns phonon; do find /Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide -name &quot;*.so&quot; -exec install_name_tool -change ${mod}.framework/Versions/4/${mod} @executable_path/${mod} {} \;;done;

for mod in QtCore QtDeclarative QtDesigner QtDesignerComponents QtGui QtHelp QtMultimedia QtNetwork QtOpenGL QtScript QtScriptTools QtSql QtSvg QtWebKit QtXml QtXmlPatterns phonon; do find /Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide -name &quot;*.dylib&quot; -exec install_name_tool -change ${mod}.framework/Versions/4/${mod} @executable_path/${mod} {} \;;done;

for mod in libpyside-python2.6.1.1.dylib libshiboken-python2.6.1.1.dylib ; do find /Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide -name &quot;*.so&quot; -exec install_name_tool -change ${mod} @executable_path/../Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide/${mod} {} \;;done;

for mod in libpyside-python2.6.1.1.dylib libshiboken-python2.6.1.1.dylib ; do find /Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide -name &quot;*.dylib&quot; -exec install_name_tool -change ${mod} @executable_path/../Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages/PySide/${mod} {} \;;done;
</pre>
<h2>Test PySide in Maya</h2>
<p>Simply copy and paste this code into a Maya Python tab in the script editor and run it. If it works, you are all set :)</p>
<pre class="brush: python; toolbar: false;">import sys
from PySide import QtCore, QtGui

class FormExample(QtGui.QWidget):
    def __init__(self):
        super(FormExample, self).__init__()
        self.initUI()
        
    def initUI(self):
        QtGui.QToolTip.setFont(QtGui.QFont(&#39;SansSerif&#39;, 10))
        self.setToolTip(&#39;This is my &lt;b&gt;QWidget&lt;/b&gt; widget tooltip&#39;)
        
        btn = QtGui.QPushButton(&#39;My Button&#39;, self)
        btn.setToolTip(&#39;This is my &lt;b&gt;QPushButton&lt;/b&gt;&#39;)
        btn.resize(btn.sizeHint())
        btn.move(50, 50)       
        
        self.setGeometry(300, 300, 250, 150)
        self.setWindowTitle(&#39;My Form Example&#39;)    
        self.show()
        
ex = FormExample()
</pre>
<p>ok we&#39;re done now :)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee407a0b6970d-pi" style="display: inline;"><img alt="Tired" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee407a0b6970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee407a0b6970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Tired" /></a><br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Kayla
EMAIL: kurnawszystkozajete@gmail.com
IP: 89.78.33.39
URL: 
DATE: 10/09/2012 09:31:51 AM
Can You write something about MPxContext and MPxContextCommand for Python? There is really a lack of information about this subject on the internet.
-----
COMMENT:
AUTHOR: Tony
EMAIL: zeroeffect27@hotmail.com
IP: 74.198.87.11
URL: 
DATE: 10/10/2012 03:53:57 AM
PySide and Qt are both LGPL licenses. Did you mean to say PySide and PyQt have different licenses?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.93.200
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/10/2012 09:24:02 AM
Hi Kyala,
Sure, I'll keep that in my list of thing to do, and it grows everyday ;)
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.93.200
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/10/2012 09:33:50 AM
Hi Tony
I am not a legal person, but our legal department told me last year, they are different and that as an Autodesk employee I need to be careful with that. Especially about termination...
-----
COMMENT:
AUTHOR: aj
EMAIL: aj@aol.com
IP: 64.251.81.66
URL: 
DATE: 11/05/2012 12:08:57 PM
You say you absolutely have to use Qt4.7.1.  However, I have compiled against 4.7.3 for both pyQt and PySide and there are no problems.  However, 4.7.4 does not compile correctly.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Building Qt, PyQt, PySide for Maya 2013 - Part 1
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: building-qt-pyqt-pyside-for-maya-2013
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Tools
CATEGORY: UI
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013.html 
DATE: 10/03/2012 12:29:00 AM
-----
BODY:
<p>To complete the <a href="http://around-the-corner.typepad.com/adn/2012/07/all-things-qt.html" target="_self">article</a> written by Kristine last month, I could not resist to go through the process of building these libraries myself on the 3 platforms Windows x64, Linux and MacOS (I tend not to work on win32 anymore). Unfortunately, the documentation provided by Autodesk isn&#39;t always very clear. Not I mean it is wrong or incorrect, but sometimes assumes you either know these Qt underneath requirements and/or Autodesk internal build procedures.</p>
<h2>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-pi" style="display: inline;"><img alt="Build-headacke" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c320cc3ff970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c320cc3ff970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Build-headacke" /></a><br />Building Qt</h2>
<p>Whatever you decide to do, you will need to build Qt using the Autodesk modified version of Qt. Many time people ask if they can upgrade the Maya Qt to a newer version. The answer is unfortunately NO. You can modify and backport Qt fix into the Maya modified version, but unfortunately you need to use Qt 4.7.1 base for Maya 2013. A
copy of the customized Qt 4.7.1 source is available from Autodesk&#39;s Open Source
web-site (<a href="http://www.autodesk.com/lgplsource">http://www.autodesk.com/lgplsource</a>)
and includes text files describing how to configure, build and install Qt for each
platform supported by Maya.</p>
<p>You will also need to set up your environment accordingly to the API docs
(Developer Resources &gt; API Guide &gt; Setting up your build environment in the Maya Documentation). And use the correct <a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Compiler_Requirements.htm" target="_self">compilers</a>.</p>
<ul>
<li><a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Mac_OS_X_environment.htm" target="_self">Mac OS X environment</a></li>
<li><a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_environments_32bit_and_64bit.htm" target="_self">Linux environments (64 bit)</a></li>
<li><a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_env_Windows_env_32bit_and_64bit.htm" target="_self">Windows
environment (32‐bit and 64‐bit)</a></li>
</ul>
<p>And follow the instructions for building Qt coming from the following files included in qt-4.7.1-modified_for_maya_2013.zip:</p>
<ul>
<li>howToBuildQtOnMac_m2013.txt for MacOs</li>
<li>howToBuildQtOnLinux_m2013.txt for Linux x64</li>
<li>howToBuildQtOnWindows_m2013.txt for Windows win32 and x64</li>
</ul>
<p><span style="text-decoration: underline;">howToBuildQtOnMac_m2013.txt</span> -&#0160;Let&#39;s start with <strong><em>Mac</em></strong>. First, it is important to use the Snow Leopard 10.6 SDK, but if like me you already upgraded to the Lion version, you will need to modify the build configuration instructions like below. Instead of&#0160;</p>
<p style="padding-left: 30px;">./configure -prefix /Users/<em>myHomeDir</em>/qt-4.7.1 -arch x86_64 -debug-and-release -no-rpath -silent -no-qt3support</p>
<p>do</p>
<p style="padding-left: 30px;">./configure -prefix /Users/<em>myHomeDir</em>/qt-4.7.1 -arch x86_64 -debug-and-release -no-rpath -silent -no-qt3support <strong>-sdk /Developer/SDKs/MacOSX10.6.sdk</strong></p>
<p>If you do not do this, not only the Qt build will fail, but you would use the wrong SDK version. You could eventually decide you prefer to change the Qt source code like on this Qt patch <a href="https://trac.macports.org/attachment/ticket/30262/qt4-mac-lion.diff" target="_self">post </a>to build on Lion, but remember that you should be using the 10.6 SDK version to build Maya 2013 plug-ins. And in case you decide to use the 10.7 SDK version anyway, you&#39;ll probably have other issue later in Maya and/or build Qt/PyQt.</p>
<p>Other than this SDK issue, the instructions for building Qt on the Mac are ok.</p>
<p>For the rest of the post, we will assume Qt is installed on&#0160;/Users/<em>myHomeDir</em>/qt-4.7.1</p>
<p><span style="text-decoration: underline;">howToBuildQtOnLinux_m2013.txt</span> -&#0160;<strong><em>Linux</em></strong> is another story. Not only Linux exists on many different distributions, but all the tools / libraries you need aren&#39;t necessarily present on your distribution. The Maya documentation is telling you all you need to know in case the machine is setup as a developer machine already with all the GCC, Qt, Maya requirements present.</p>
<p>The first thing described in the Maya 2013 documentation for building on Linux is that you need the GCC 4.1.2 compiler. See <a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/Setting_up_your_build_environment_Linux_compiler_requirement.htm" target="_self">here</a>. While the Maya documentation is saying all you need to build GCC, there are few things which aren&#39;t mentioned which can cause you problems if you aren&#39;t familiar with Linux.</p>
<p> First <a href="http://gcc.gnu.org/install/" target="_self">compiling GCC</a> has some <a href="http://gcc.gnu.org/install/prerequisites.html" target="_self">prerequisites</a> which require you to install couple of packages. If you unsure of what you are doing, the simplest would be to log as superuser and install this two group packages. Probably more than what you strictly need, but an easy way to get it right :)</p>
<p style="padding-left: 30px;">yum groupinstall &quot;Developer Tools&quot;<br />yum groupinstall &quot;Developer Libraries&quot;</p>
<p>While we are at yum&#39;ing, you will also need 2 other packages for building Qt, so let&#39;s do it now</p>
<p style="padding-left: 30px;">yum install
glibc-devel.i686<br />yum install libXext-devel</p>
<p>Now, while you build GCC, you may got an error about MAKEINFO not present on your machine even if it is installed properly. In that case, the simplest is to go in the gcc-build directory and edit the Makefile file in &#39;vi&#39; or any text editor. Search for MAKEINFO in that file, and a replace the long line with
missing information&#0160;by:</p>
<p style="padding-left: 30px;">MAKEINFO = /usr/bin/makeinfo</p>
<p>After that follow the instructions, everything should be ok from there.</p>
<p>For the rest of the post, we will assume Qt is installed on&#0160;/usr/local/Trolltech/Qt‐4.7.1</p>
<p><span style="text-decoration: underline;">howToBuildQtOnWindows_m2013.txt</span>&#0160;-&#0160;While for&#0160;<strong><em>Windows</em></strong>&#0160;everything looks straight forward, I mean the only important thing is to have Visual Studio 2010 Service Pack 1 (or the Visual C++ Express 2010 Edition with Service Pack 1), it is not entirely true.</p>
<p>Linux and Mac instructions just tell you to install openssl or verify it is present on your machine. For Windows, the instructions to build Qt mention that you need to download a file named openssl-1.0.0e.zip - but no mention where that file is, and why it is needed.</p>
<p>The
OpenSSL modified source is supposed to be included in the Maya modified archive or on the LPGL Autodesk page but at the time of this post it isn&#39;t. I am not sure of the exact reason, but the fact it is isn&#39;t posted makes impossible for someone outside Autodesk to rebuild a modified version of Qt for Windows that can be used safely in Maya. As far I know the OpenSSL modified source code is required for the Autodesk SyncHub module used for Autodesk&#39; Cloud solutions and interrop operations between Maya, Mudbox, etc... It affects directly QtNetwork.dll, and you would need this modified OpenSSL source if you want to recompile this DLL and post it into Maya bin directory. If you just need to build Qt for compiling other modules, but do not need to post a modified version or QtNetwork.dll, then you do not need that OpenSSL modified version. You can simply ignore the instructions about OpenSSL as I did for the rest of the post.</p>
<p>As a side note, I also wanted to mention that I did not use the JOM tools as specified in the instructions to avoid to use the Nokia Qt SDK, but instead stick using nmake. Making use of JOM speed up the build process, but this is extra few steps which aren&#39;t really needed. You can find JOM <a href="ftp://ftp.qt.nokia.com/jom/" target="_self">here</a>&#0160;as well in case you want. In any case, the Windows instructions make mention of a 2010.05 version, but the URL mentioned in the document does not work. Visit&#0160;<a href="http://qt.digia.com/Product/Qt-SDK/">http://qt.digia.com/Product/Qt-SDK/</a>&#0160;for more details if you interested using it. I did not,</p>
<p>Now that we decided not to use JOM but nmake and that we know that the OpenSSL modified source aren&#39;t available, you can follow the instructions in the document and skip the ones which make reference to either both of JOM and OpenSSL. Note the documentation does not say to install Qt like for the Mac and Linux intructions, so do not forget that step by doing a &#39;nmake install&#39; at the end of the build. Otherwise you&#39;ll get error in the PyQt build.</p>
<p>For the rest of the post, we will assume Qt is installed on c:\qt-adsk-4.7.1<br />(It is always a good idea to use a subst drive rather than c: but this is a detail)</p>
<h2>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c3be87f970c-pi" style="display: inline;"><img alt="Pyqt4" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c3be87f970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c3be87f970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Pyqt4" /></a><br />Building SIP and&#0160;PyQt</h2>
<p>Rather than duplicating the required modified instructions here and in the PDF document available <a href="http://images.autodesk.com/adsk/files/pyqtmaya2013.pdf" target="_self">here</a>&#0160;on the Autodesk WEB site, I updated the instructions directly in the PDF document.</p>
<p>One last minute update - the Maya 2013 Extension includes qmake.exe in its bin folder (I.e.: &#39;C:\Program Files\Autodesk\Maya2013.5\bin&#39;), so delete or rename it while you rebuild PyQt or you&#39;ll get strange errors.</p>
<h2>Building PySide</h2>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c3becad970c-pi" style="display: inline;"><img alt="Pyside1" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c3becad970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c3becad970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Pyside1" /></a></p>
<p>Meet in our next post for building PySide - <a href="http://around-the-corner.typepad.com/adn/2012/10/building-qt-pyqt-pyside-for-maya-2013-part-2.html" target="_self">Building Qt, PyQt, PySide for Maya 2013 - Part 2</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Eric Pavey
EMAIL: warpcat@gmail.com
IP: 64.111.160.30
URL: http://www.akeric.com
DATE: 10/03/2012 09:05:18 AM
What are the chances Autodesk will provide pre-compiled versions for users for future releases of Maya?  I got about as far as this post on my own before giving up (hit too many snags, the open ssl thing threw me for a loop) and just found a pre-compiled version online (2013 x64 win).  I'm reluctant to start authoring production-sensitive ui's that won't work in the next version of Maya until someone recompiles this stuff.  Thoughts?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.160.42
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/03/2012 09:20:04 AM
Hi Eric,
I know what you mean, that whole thing isn't an easy process for everyone. The main important point here is to remember you only need to recompile Qt source if you want to modify Qt source on your side which in this case Autodesk cannot provide you with your modified binaries. Maya ships Qt binaries and libraries that you can use directly. So the openssl comment is only relevant for those who wants to recompile Qt itself.

Now I guess your comment was on providing PyQt or PySide binaries (may be both ;) - We survey developers on our annual API survey for the last 2 years (i.e.: <a href="http://around-the-corner.typepad.com/adn/2012/06/api-wishlist-surveys.html)">http://around-the-corner.typepad.com/adn/2012/06/api-wishlist-surveys.html)</a> and we saw a fair amount of people using either PyQt and/or PySide, so we are thinking about it...

I did not posted the binaries here for legal implication in doing that, but I am ready to share my scripts on the 3 platforms for those interested.
-----
COMMENT:
AUTHOR: Lluis
EMAIL: ktmlleska@gmail.com
IP: 95.21.5.161
URL: 
DATE: 10/03/2012 02:17:56 PM
Hello,
I'm trying to install pyqt but when I'm in the step to build SIP I get some errors like this:

NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\amd64\nmake.exe"' : return code '0x2'

I use maya 2013 without the extension. And i don't have qmake.exe inside the folder:  ..\maya2013\bin
can you help me?
Thank you.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.160.42
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/03/2012 11:37:34 PM
Hi Luis
you do not need Qt to build SIP, so in theory it should work fine with this

subst v: whateverrootfolderyouwant
rem ex: subst v: e:\Users\cyrille\QtBuild
v:
cd \sip-4.13.3
SET MSVC_DIR=C:\Program Files (x86)\Microsoft Visual Studio 10.0
call "%MSVC_DIR%\VC\vcvarsall" amd64
set MAYA_LOCATION=C:\Program Files\Autodesk\Maya2013
set INCLUDE=%INCLUDE%;%MAYA_LOCATION%\include\python2.6;%MAYA_LOCATION%\Python\include
set LIB=%LIB%;%MAYA_LOCATION%\lib
"%MAYA_LOCATION%\bin\mayapy" configure.py
nmake
nmake install

Let me know if any problem
-----
COMMENT:
AUTHOR: Lluis
EMAIL: ktmlleska@gmail.com
IP: 88.13.163.66
URL: http://www.lluiscasals.blogspot.com
DATE: 10/04/2012 01:04:43 AM
Hi!
Thank you, it worked.
But now when I try to test I get another error:

My command is:
from PyQt4 import QtGui,QtCore, uic
import maya.cmds as cmds

uifile = '$d+"/test.ui"'
form, base = uic.loadUiType(uifile)

Error:
# Error: IOError: file C:\Program Files\Autodesk\Maya2013\bin\python26.zip\xml\etree\ElementTree.py line 579: 22 # 

Do You know why it happend?

The error is when execute the step: "form, base = uic.loadUiType(uifile)"

Thank you very much!
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.160.42
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/04/2012 01:51:53 AM
Hi Luis
without seeing the ui file, I can't really tell. I tried a simple ui file and it worked fine for me. Please copy me your code and I'll try. Contact me by email (email in my profile - <a href="http://around-the-corner.typepad.com/adn/cyrille-fauvel.html)">http://around-the-corner.typepad.com/adn/cyrille-fauvel.html)</a>
-----
COMMENT:
AUTHOR: Lluis
EMAIL: ktmlleska@gmail.com
IP: 88.13.163.66
URL: http://www.lluiscasals.blogspot.com
DATE: 10/04/2012 02:18:17 AM
Ok I will send you an e-mail.
Thank you.
-----
COMMENT:
AUTHOR: Lluis
EMAIL: ktmlleska@gmail.com
IP: 88.13.163.66
URL: http://www.lluiscasals.blogspot.com
DATE: 10/04/2012 07:37:55 AM
Thank you for your help, 
it is working now!
-----
COMMENT:
AUTHOR: Marco Giordano
EMAIL: 
IP: 217.91.36.246
URL: http://profile.typepad.com/marcogiordano
DATE: 10/08/2012 05:42:51 AM
Hello thanks for the great post ,I didn't test it yet but i will do that tonight , so far I used other tutorial.
Honestly is quite a pain to compile pyqt or pyside ( I am running into tons of errors and when i fix them other rises and so on ). I really hope autodesk will provide asap binaries at least for pyside for all platform (since pyside doesn't have license problems for distributing).It would be so nice from autodesk :)
-----
COMMENT:
AUTHOR: Jimmy Christensen
EMAIL: lithorus@gmail.com
IP: 87.116.24.164
URL: 
DATE: 10/08/2012 10:18:53 PM
I'm fairly certain that PySide can be shipped pre-compiled without any legal issues. I know for a fact that Nuke ships with them.
-----
COMMENT:
AUTHOR: Jimmy Christensen
EMAIL: lithorus@gmail.com
IP: 87.116.24.164
URL: 
DATE: 10/08/2012 10:20:40 PM
Actually, I've tested using Nuke's PySide in Maya and it seems to work fairly well (just remember to copy over the libshiboken-python2.6 library aswell).
-----
COMMENT:
AUTHOR: Andrew Grant
EMAIL: 
IP: 66.46.205.188
URL: http://profile.typepad.com/grantandrew1
DATE: 10/12/2012 09:28:50 AM
Hello, 

I am wondering if you can provide information about getting PyQt built for MotionBuilder?

Thanks!
-----
COMMENT:
AUTHOR: Ken Mohamed
EMAIL: kenmohamed@me.com
IP: 75.92.103.248
URL: 
DATE: 10/27/2012 04:21:42 PM
Hi Cyrille,
First, thanks for the post.  I'm attempting to build Qt for Maya on OS X-Lion.  The instructions for building the configuration using the -sdk switch if running Lion helped me over my first roadblock.

I'm still having trouble and was hoping that you could help.  

I built the configuration using:

./configure -prefix-install -arch x86_64  -debug-and-release -no-rpath -silent -no-qt3support -sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk -platform macx-g++

Then "make" ended with the following:
-----
linking ../../../../plugins/phonon_backend/libphonon_qt7.dylib
ld: warning: ignoring file /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks//QuickTime.framework/QuickTi\
me, missing required architecture x86_64 in file
mv -f libphonon_qt7_debug.dylib ../../../../plugins/phonon_backend/
ld: warning: ignoring file /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/System/Library/Frameworks//QuickTime.framework/QuickTi\
me, missing required architecture x86_64 in file
mv -f libphonon_qt7.dylib ../../../../plugins/phonon_backend/
make: *** [sub-plugins-make_default-ordered] Error 2
-----


Subsequently, after cleaning up ( make clean, make confclean ), I re-built the configuration with the change "-arch x_86"

This time, "make" ended with:

-----
linking ../../../../../../imports/QtWebKit/libqmlwebkitplugin.dylib
ld: file not found: phonon.framework/Versions/4/phonon for architecture i386
collect2: ld returned 1 exit status
make[2]: *** [../../../../../../imports/QtWebKit/libqmlwebkitplugin.dylib] Error 1
make[1]: *** [release-all] Error 2
make[1]: *** Waiting for unfinished jobs....
rm -f libqmlwebkitplugin_debug.dylib
linking ../../../../../../imports/QtWebKit/libqmlwebkitplugin_debug.dylib
ld: file not found: phonon.framework/Versions/4/phonon for architecture i386
collect2: ld returned 1 exit status
make[2]: *** [../../../../../../imports/QtWebKit/libqmlwebkitplugin_debug.dylib] Error 1
make[1]: *** [debug-all] Error 2
make: *** [sub-webkitdeclarative-make_default-ordered] Error 2
-----

Any suggestions would be greatly appreciated.
Thanks!
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 132.188.32.22
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/28/2012 04:18:37 AM
Hi Ken

You cannot use x_86, it should be x86_64.
and because you do not point to the 10.6.sdk, you are using the Lion 10.7 SDK which is the one by default on Lion.
It also means you are using Xcode 4 vs Xcode 3.2.1 as it is specified in the Maya document. I know it is not always obvious what happens during compilation but you have to follow the exact steps to get it working.

./configure -prefix /Users/myHomeDir/qt-4.7.1 -arch x86_64 -debug-and-release -no-rpath -silent -no-qt3support -sdk /Developer/SDKs/MacOSX10.6.sdk

If the /Developer/SDKs/MacOSX10.6.sdk does not exist on your system, that means you do not have the Xcode 3.2.1 compiler, nor the 10.6 SDK which are required. In that case please install them - they can be installed side by side to Xcode 4 and the 10.7 SDK.

Hope that will help,
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Custom Shapes in the Maya API
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: custom-shapes-in-the-maya-api-1
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Maya
CATEGORY: Modeling

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/custom-shapes-in-the-maya-api-1.html 
DATE: 09/30/2012 11:00:00 PM
-----
BODY:
<p>A
user-defined surface shape is one of the most complex types of nodes that can
be implemented within Maya. A number of supporting classes are required, and a
number of virtual methods must be properly implemented to get your class
working right with the various parts of Maya. The goal of this article is to
break down the process of creating the shape into manageable chunks, and to
provide details of each step of the process so that you can make good design
decisions as you decide how and what to implement for your custom shape.</p>
<p>We will start by
discussing the motivation for user-defined shapes. And continue step-by-step by
adding the methods used to support drawing, selection, components,
manipulation, history, sets and deformation. At each step we will show the minimum
needed to implement each level of functionality so that you can decide which
level of complexity is appropriate for the particular type of shape you want to
implement. As we add virtual methods to our shape, we will discuss the purpose
and the circumstances under which the methods are called. This paper also
covers some related areas such as deformers, sets (groupParts, groupIds), and
tweaks. See this previous <a href="http://around-the-corner.typepad.com/adn/2012/09/maya-deformer-architecture.html" target="_self">article</a> for more details.</p>
<p>In conjunction
with the post, I have provided a number of <a href="http://around-the-corner.typepad.com/files/customShapeSamples.zip" target="_self">example plug-ins</a>. These plug-ins
demonstrate the shape implementation at various stages: draw/select, settable
components, manipulatable components, etc... The shape represented in all of
these plug-ins is extremely simple à a 4-point line segment sometimes
drawn as a hermite curve. The goal of using such a simple, immediately
understandable shape is that we didn’t want the details of the shape type to
obscure details of the implementation of the node itself.</p>
<h3>MPxLocatorNode vs. MPxSurfaceShape</h3>
<p>Two classes
can be used to implement a shape within Maya. The most basic is the
MPxLocatorNode class. If your shape needs to support only drawing and
selection, it is best to derive from the MPxLocatorNode class. The
MPxLocatorNode class is derived from the same nodes as Maya’s internal locator
(crosshair) node.</p>
<p>The Maya
Developer’s Toolkit includes an example MPxLocatorNode called
footPrintNode.cpp. This example shows that deriving from MPxLocatorNode is
quite straightforward. Typically, the only virtual methods that need to be
overridden are:</p>
<ul>
<li>MPxLocatorNode::draw()</li>
<li>MPxLocatorNode::boundingBox()</li>
<li>MPxLocatorNode::isBounded()</li>
</ul>
<p>The draw
implementation typically would contain OpenGL calls to draw the shape. The
boundingBox and isBounded methods allow Maya to determine whether or not your
object is within the camera’s view. When the object is not within the view, the
draw method will not be invoked.</p>
<p>Selection of
nodes derived from MPxLocatorNode works automatically based on the
implementation of the above three routines. When the mouse click/drag falls
within the bounding box returned by your shape, Maya invokes the draw method
using OpenGL selection to determine whether the shape has been selected.</p>
<p>If you want
your shape to include any of the following, more advanced capabilities, you
must instead derive from MPxSurfaceShape:</p>
<ul>
<li>Component
selection or manipulation</li>
<li>History
operations</li>
<li>Sets</li>
<li>Deformers</li>
</ul>
<h3>Introduction to MPxSurfaceShape</h3>
<p>As a learning
tool, we begin our look at the MPxSurfaceShape class by implementing the same
functionality as an MPxLocatorNode using the MPxSurfaceShape class. In other
words, this section covers what is needed to implement <em>drawing and selection
without component</em>s for an MPxSurfaceShape.</p>
<p> An example plug-in implementing
this level of functionality has been provided with the post in the folder
called <strong><em>curveDrawSel</em></strong>. This example plug-in simply draws a
non-editable 4-point line segment, and is extremely similar to the
footPrintNode in its capabilities.</p>
<p>The
Developer’s Toolkit for Maya has an example MPxSurfaceShape example plug-in
called apiMeshShape. One improvement to note in the curveDrawSel plug-in over
the apiMeshShape is that we use OpenGL selection rather than simply saying that
the shape is selected any time a selection occurs within its bounding box.</p>
<h4>The UI class: MPxSurfaceShapeUI</h4>
<p>An MPxSurfaceShape cannot be
implemented as a single class in isolation. Instead, for any MPxSurfaceShape
that is implemented, a corresponding MPxSurfaceShapeUI class must also be
implemented. The duties of the UI class are drawing and selection. The
MPxSurfaceShape node class performs all other shape-related operations.</p>
<p>The MPxSurfaceShapeUI
methods that must be implemented are:</p>
<ul>
<li>MPxSurfaceShapeUI::getDrawRequests()</li>
<li>MPxSurfaceShapeUI::draw()</li>
<li>MPxSurfaceShapeUI::select()</li>
</ul>
<p>Maya documentation covers
the motivation and usage of these methods, and can be found under <strong><em>Developer
Resources: API Guide -&gt; Shapes -&gt; Drawing and Refresh</em></strong>.</p>
<h4>The shape node class: MPxSurfaceShape</h4>
<p>Now that the
UI class is handling drawing and selection, the only required methods within
MPxSurfaceShape are:</p>
<ul>
<li>MPxSurfaceShape::boundingBox()</li>
<li>MPxSurfaceShape::isBounded()</li>
</ul>
<p>These methods
are called by Maya to determine whether or not to invoke your node’s selection
and drawing methods based on the view frustum of the camera.</p>
<h4>Summary</h4>
<p>If you simply
want a shape to draw itself and be selectable, use the MPxLocatorShape as your
base class. Doing the same thing with the surfaceShape class wasn’t a whole lot
more difficult, but we had to use 2 classes instead of one, and we had to
implement 2 new methods (select and getDrawRequests) to implement functionality
that is handled automatically for the locator shape.</p>
<p>On the plus
side, we have more flexibility. If we wanted to do some alternative tricky
implementation of select rather than OpenGL select, the surfaceShape class does
allow this sort of customization while the locatorShape does not. But the main
reason to derive from MPxSurfaceShape is so that we can expand our shape to add
component handling.</p>
<h3>Component Handling</h3>
<p>In this
section, we add basic component handling to the shape. The example plug-in for
this section is provided in the folder called <strong><em>compCurveDrawSel</em></strong>.
Here we add support for customizing the shape of the curve by specifying the
component locations using the setAttr command. We do not yet allow the user to
select or move the components, only to specify their locations using setAttr or
connections.</p>
<h4>The component attribute</h4>
<p>The first
decision to be made is how we want to represent the components within the node.
In this example, like the existing apiMeshShape.cpp example, we will store the
components in the same attribute as some existing Maya shapes: the
“controlPoints” attribute. The controlPoints attribute is inherited from the
“controlPoint” node type – one of the base classes of MPxSurfaceShape. The
controlPoint node is also a base class of Maya’s nurbsSurface, mesh,
subdivSurface, nurbsCurve and lattice shapes. The nurbsSurface, nurbsCurve and
lattice types all make use of the “controlPoints” attribute. Meshes use their
own attribute to store vertices because of an architectural decision to use
floating point rather than double storage.</p>
<p style="text-align: center;">&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de77a0970d-pi" style="display: inline;"><img alt="ControlPoints" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744de77a0970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de77a0970d-800wi" title="ControlPoints" /><br /></a><em>Attribute documentation from the
controlPoint node’s controlPoints attribute.</em></p>
<p>The reason
for storing the control points in an attribute is threefold. First, because the
individual xyz components are numeric attributes, the attribute can be animated
and connected to other numeric attributes. Second, the Maya file format is
organized around attributes, and the controlPoints attribute data is saved to
file. The third reason is simply consistency. All the other shape nodes within
Maya store their points in a similar manner.</p>
<h4>Internal shape data</h4>
<p>We could
implement our shape by storing the controlPoint data solely in the datablock of
the plug-in node. The setAttr and getAttr commands will get and set data
directly into the datablock by default. If we did store the data solely in the
datablock, each time the draw method asked for the points, our code would use
an MArrayDataHandle to get the value of the controlPoints attribute from the
MDataBlock. For such a small shape as the curve in our example plug-in, these
operations would not be very expensive. However for a large shape with many
controlPoints, accessing points from the MArrayDataHandle class can be rather
tedious. </p>
<p>In addition,
many shapes have more information per component than solely the position. You
may want to store per-vertex tangency or connectivity information. For this
reason, many shapes within Maya choose to store their control point position
data separately from the datablock (for example in a geometry data attribute or
in an internal class member).</p>
<p>We chose to
store our shape data as an internal member of the node class. At this stage of
our example, our shape data can consist simply of an MPointArray. We call it
fCurvePoints and store it as a member of our node class.</p>
<h4>setInternalValue</h4>
<p>In order to
transfer the values that the user sets or connects to the controlPoints
attribute into our MPointArray class member, we implement the virtual method <strong><em>setInternalValue</em></strong>.
We take the data passed in and place it into our internal array. We also call </p>
<pre class="brush: cpp; toolbar: false;">MPxSurfaceShape::setInternalValue (plug, handle);
</pre>
<p>from our
override of <strong><em>setInternalValue</em></strong>. This call puts the controlPoint
data into the node’s datablock in addition to storing it in our MPointArray
class, and means that we do not need to implement getInternalValue. Instead, if
anyone (such as the getAttr command) asks for the value of the controlPoints
attribute, it will be handled by the DG, and will retrieve the value from the
datablock. Alternatively, if storage space was an issue, we would not need to
place the controlPoints into the datablock at all. In this case, we would
implement getInternalValue to retrieve and return the appropriate value from
our internal MPointArray.</p>
<p>One other
detail is necessary to keep our shape on screen up-to-date when the
controlPoints attribute is keyed (or is given some other input connection). We
need to change the method called from our UI class to retrieve the points. We
add the 2 lines shown below in bold:</p>
<pre class="brush: cpp; highlight: [2, 3]; toolbar: false;">void compCurveDrawSel::points(MPointArray points) {
  MDataBlock block =forceCache ();
  block.inputArrayValue (mControlPoints);
  points.setLength (sCurvePointCount);
  for (unsigned ii =0; ii &lt; sCurvePointCount; ii++)
    points.set (fCurvePoints [ii], ii);
}
</pre>
<p>This is only
necessary when there is an input connection to the controlPoints attribute
because of how dirty propagation and evaluation work within Maya. In other
words, when the user does a “setAttr” MEL command on the controlPoints
attribute, the data will be set immediately into the node and setInternalValue will be called. However, when there is
a connection to the controlPoints attribute, our node will be marked dirty
dirty, but setInternalValue does not get called unless our node
asks for the controlPoints value. When the controlPoints value is requested, it
will be dirty and will trigger evaluation of the connection. The addition of
the above 2 lines to the points method accomplishes the evaluation, and will
cause setInternalValue to be invoked, thereby updating the
fCurvePoints to the proper value.</p>
<h4>The bounding box, an optional performance improvement</h4>
<p>Our shape is
now controllable by the user, so its bounding box is variable. That means we
need to improve our bounding box handling. The boundingBox
method is called quite frequently -- each time the window refreshes. Therefore,
we don’t want to have an expensive calculation inside the boundingBox method. </p>
<p>To address
this, we will add 2 attributes to our shape representing the 2 corners of the
bounding box. We make these attributes affected by the controlPoints attributes
so that they will be marked dirty when the controlPoints are modified. These
are output attributes, so we implement a compute method that calculates the boundingBox based on the location of the controlPoints.</p>
<p>Now, when the
boundingBox method is called, it retrieves the
bounding corners from the datablock of the node. If the bounding corners are
not dirty, this is a very fast operation that simply references into the
datablock. If the corners are dirty, compute will be invoked to recalculate and
set the bounding box.</p>
<h4>Summary</h4>
<p>In this
section, we simply added support for user-settable and animatable control point
locations. We didn’t have to change our UI class at all. However, we did end up
implementing 2 new virtual methods (setInternalValue
and compute) and adding attributes to our node to improve the performance
of our bounding box calculation. </p>
<h3>Manipulation of components</h3>
<p>In this
section, we will add the ability to select and move individual components or
sets of components using both the manipulator and the move/rotate/scale
commands. The example plug-in demonstrating this additional capability is in
the folder called <strong><em>compCurveMovable</em></strong>.</p>
<p>Adding
support for component motion is a lot of work. This section covers the methods
and the additional class required, their purpose and when they are called from
Maya.</p>
<h4>The transformUsing() method</h4>
<p>The transformUsing method is called from the transformation MEL commands
such as move, rotate and scale. It is also called from the transform-related
manipulators such as translate, rotate and scale manips.</p>
<pre class="brush: cpp; toolbar: false;">virtual void transformUsing (
  const MMatrix&amp; mat,
  const MObjectArray&amp; componentList,
  MVertexCachingMode cachingMode,
  MPointArray* pointCache
);
</pre>
<p>Part of the
complexity of the transformUsing method is related to undo. The transformUsing method is called during both the original transform
command and during undo. During the initial command, the cachingMode will be
set to “save”. In undo, the cachingMode will be restored.</p>
<p>During
manipulator use, the cachingMode will be set to “save” initially, and “update”
subsequently. Undo of manipulations will have the cachingMode set to “restore”.
These settings can be better understood if we consider the motivation. Imagine
the user starts moving an object using the translate manipulator. In a single
mouse drag, the screen will refresh multiple times and the object will be
transformed in small increments by the many calls to transformUsing method. If the user then hits “Undo”, Maya wants to
restore the object to its original location in one operation, not multiple
calls to the transformUsing method.&#0160;</p>
<p>One thing to
note about our implementation of the transformUsing method is that we have implemented it
to transfer the motions directly into our class’s internal shape data
(fCurvePoints). One by-product of this is that it is now possible for our
internal data to be out of sync with the controlPoints attribute. The
manipulator links itself to the controlPoints attribute, and it needs to be
able to query the controlPoints attribute for the proper location of the point.
Therefore, we need to implement getInternalValue for our node.</p>
<h4>The getInternalValue() method</h4>
<p>Typically
you’ll implement getInternalValue for your node at the same time as you
implement setInternalValue. In the last chapter, we explained
why we were able to avoid implementing getInternalValue. Now there is no way to avoid it.
With the addition of transformation support, getInternalValue
is required to keep our node working right. The reason is that since transformUsing does not go through setInternalValue,
the transformation data never goes into the datablock. We implement getInternalValue so that it returns the requested
values from our internal fCurvePoints into the supplied handle argument.</p>
<h4>The componentToPlugs() method</h4>
<p>When a
transform manipulator is used on selected components, they call the componentToPlugs method to learn which plugs on your
shape node correspond to the selected components. The manipulator will query
these attribute values when it is determining where to draw itself.</p>
<p>This method is
also called when a command such as the setKeyframe command needs to determine
where to connect new animationCurves when a selected component is keyframed.</p>
<h4>Iterator Support</h4>
<p>Manipulators
in Maya require iterator support on shapes. This means that you need to add an
additional class, derived from MPxGeometryIterator. The following three virtual
methods also need to be added:</p>
<ul>
<li>geometryIteratorSetup</li>
<li>acceptsGeometryIterator(bool)</li>
<li>acceptsGeometryIterator(MObject&amp;,
     bool, bool)</li>
</ul>
<p>If you are
writing multiple user-defined shapes, you may well be able to share the same
iterator class amongst your shapes, although that will depend somewhat on how
you store the data within your shape class. If each shape has a very unique
data structure, it will probably make more sense to have a separate iterator
for each type of data.</p>
<p>How you
design your iterator will depend on your class itself, and what it needs to
support. As the seminar continues, we will be enhancing the iterator. For this
example, it is satisfactory to simply make the iterator store a pointer to our
shape, and loop through the shape’s points. The primary thing to consider when
writing your iterator is that it should not rely on any data that could be
destructed while the iterator is using it. For example, if geometryIteratorSetup is invoked with readOnly = false,
then you can expect the setPoint method to be called more than once.
Be sure that nothing in your implementation of setPoint
could cause the data held onto by the iterator to become stale.</p>
<h4>The UI Class</h4>
<p>The UI class
needs to be enhanced to support drawing and selection of the individual
components separately from the shape itself. This means expanding the getDrawRequests implementation to handle the case where the 2<sup>nd</sup>
argument (objectAndActiveOnly) is false.</p>
<pre class="brush: cpp; toolbar: false;">void compCurveMovableUI::getDrawRequests (
  const MDrawInfo &amp; info,
  bool objectAndActiveOnly,
  MDrawRequestQueue &amp; queue
);
</pre>
<p>When
objectAndActiveOnly is false, we will create and add an additional drawRequest
to the queue corresponding to the point components of our shape. If any of our
components are active, we also create a drawRequest for them.</p>
<p>When
components are drawn, our draw method will now get called more than once. We
modify our draw method to use the MDrawRequest::token() method to determine what should be
drawn.</p>
<p>When the user
selects in component mode, our select method needs to be able to handle it. In
component select mode, our shape will be hilited, and we use this as a cue to
determine whether or not to check for selected points.</p>
<h4>The matchComponent method</h4>
<p>Having
implemented all of the above, your node already supports the selection tool and
the transformation manipulators. But what if you manually enter the select or
move command and pass it a string that corresponds to your vertices?&#0160; The matchComponent method is used by Maya to create a
component corresponding to a string typed in by the user. </p>
<h3>Simple History Support</h3>
<p>The next
modification we will make to our shape is to support “simple” history. By
simple history, what we mean is that we are going to modify our shape so that
any node that outputs a data of type “vectorArray” can be provided as input to
our node. The figure below shows an example where we’ve connected the
particleShape’s position attribute into our curve node’s inputSurface
attribute.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f3f20970c-pi" style="display: inline;"><img alt="History" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c2f3f20970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f3f20970c-800wi" title="History" /><br /></a><em>The particleShape position drives the
location of the curve’s points.</em></p>
<p>By referring
to this as “simple” history, we are distinguishing it from more advanced types
of history covered in the next chapter such as deformer support and support for
component sets with history (groupParts nodes).</p>
<h4>Two forms of input: history and tweaks</h4>
<p>The trickiest
part of basic history support on a shape is that there are now two sources of
input for the position of the shape’s components.&#0160; Positions may be coming from the history
attribute.&#0160; In addition, the user can
make “tweaks” to the points, i.e. select and move them around or animate their
position. This data comes in as before, through the controlPoints attribute. As
a node designer, you must make a decision how you want to combine the history
data with the tweak data.&#0160; </p>
<p>In writing
this example shape, we chose to implement tweak handling in the same manner as
Maya’s internal shapes (nurbs, meshes, subds, lattices). These nodes all treat
tweaks as <em>relative</em> when the shape has history, and <em>absolute</em> when
the shape does not have history. The benefit of this approach is that the
tweaks made by the user can be combined with the input history even when the
history is animated.</p>
<p style="text-align: center;">&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de7dd3970d-pi" style="display: inline;"><img alt="Tweak_radius" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744de7dd3970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de7dd3970d-800wi" title="Tweak_radius" /><br /></a><em>Adding tweaks on sphere: radius=1 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Modifying history: radius=1.5</em></p>
<p>An
alternative approach would be to store the tweaks as absolute, regardless of
whether the shape has history. However, that would mean that when the history
changed, the tweaked points would need to either:</p>
<ul>
<li>lose
their tweaks to follow the history, or </li>
<li>stay
at the position defined by the tweaks, ignoring the new history</li>
</ul>
<p>Keep in mind that tweaks can be animated/connected
as well, so resetting the tweak attribute values on the fly as the history
changes is not really an option unless you want to prevent connections to them
when there is history. In the long run, how you implement your shape depends on
what you are trying to accomplish.</p>
<h4>Shape Input Data</h4>
<p>Thus far in
our example plug-ins, we have stored the shape data as a simple type,
MPointArray. In continuing this example, adding support for history might seem
like the appropriate time to switch our data to a more complex type, derived
from MPxGeometryData. Indeed, if we want to support component sets and
deformers, we must store our geometry data as an MPxGeometryData type. However,
at this stage in the example, we want to demonstrate the use of internal Maya
data types as the history attribute, so we will continue storing our data as an
MPointArray, and define our inputSurface attribute to accept data of type
MFnData::kVectorArray.</p>
<h4>The example plug-in</h4>
<p>The example
plug-in for this chapter is in the folder called <strong><em>compCurveSimpHist</em></strong>.
There is a MEL script in the folder called compCurveSimpSetup.mel which creates
the curve and attaches it to a particle shape. If you run the setup MEL script
and push play, you can see the curve points move along with the particles. You
can select points on the curve and tweak them to see how the tweaks interact
with the history.</p>
<h4>Adding the input surface attribute</h4>
<p>The most
obvious requirement is that we now need an input surface attribute. As
mentioned before, we are using an input data type of MFnData::kVectorArray for
the inputSurface. The inputSurface affects the boundingBox, and we will make it
an internal attribute, so that any time we evaluate it, we can transfer the
values from the input data into a local data member we’ll call fInputPoints.</p>
<p>When we add
the input attribute, it is also useful to override the virtual method:</p>
<pre class="brush: cpp; toolbar: false;">MObject compCurveSimpHist::localShapeInAttr() const;
</pre>
<p>This method
is called from a number of places such as:</p>
<ul>
<li>the attribute editor, when it
     builds its related node tabs</li>
<li>the channel box when it builds
     its “Inputs” list</li>
<li>the delete construction history
     operation (delete –ch MEL command)</li>
</ul>
<h4>Handling relative vs. absolute tweaks</h4>
<p>The other
primary job to be done to support history is to put in our history-dependent
handling for tweaks. </p>
<p><em>Internal
Data</em></p>
<p>Our previous
implementation of the shape had only one piece of internal data: the curve
points in absolute space. Now we will instead store 2 pieces of data: </p>
<ul>
<li>fCurvePoints (the history plus
     the tweaks)</li>
<li>fInputPoints (the history)</li>
</ul>
<p>We could
store a third array with the tweaks, but instead we will store the tweak data
directly in the datablock. There is no obvious advantage or disadvantage to
storing it in the datablock, but it does serve as an example of a different way
to store the data. You can decide how you want to store the tweaks in your own
node.</p>
<p><em>setInternalValue
</em>and<em>
getInternalValue</em></p>
<p>We modify
these virtual methods. They already had handling for the controlPoints
attribute, but we modify them so that when the shape has history, the data will
go directly to the datablock.</p>
<p><em>transformUsing</em></p>
<p>We implemented
transformUsing in the previous chapter. Its
responsibility is to tranfer motion from transform commands/manips into the
shape, and it bypasses setInternalValue. Since we are storing our tweaks in
the datablock when there is history, we need a way to transfer the motion from transformUsing into the datablock. We add a utility method called
updateControlPoints to do this, and call it from transformUsing
when there is history.</p>
<p><em>Getting the points for drawing/boundingBox</em></p>
<p>When we are
asked for the bounding box or need to draw the points, we want to make sure we
always have the most up-to-date representation of them. We add the lines shown
below to our boundingBox method and our points
method:</p>
<pre class="brush: cpp; toolbar: false;">if (fHasHistory) {
  block.inputValue (inputSurface);
  applyTweaks (block);
}
</pre>
<p>If the
history has changed, inputSurface will be dirty, and the call to inputValue
will invoke evaluation and a call to setInternalValue to make sure our fInputPoints are
up-to-date. The applyTweaks method will then add all of the tweaks
from the datablock to the fInputPoints.</p>
<p><em>The mHasHistoryOnCreateAttribute</em></p>
<p>One of the
attributes we inherit from the base class is the “mHasHistoryOnCreate”
attribute. This is an internal attribute which you can use to your advantage if
you want to know during file IO whether your shape will have history or not.
This is useful because during file IO, connectAttrs always come after setAttrs.
So when setInternalValue gets called for the controlPoints
attribute and you want to have different handling for history vs. non-history,
you can’t simply look for the connection to see if the shape has history or
not. By implementing setInternalValue and getInternalValue
for “mHasHistoryOnCreate” we are able to know during file IO whether there will
be history on our shape.</p>
<p>Because there
are several places in our node where we want to know whether or not there is
history, we also add overrides of the virtual methods</p>
<ul>
<li>connectionMade</li>
<li>connectionBroken</li>
</ul>
<p>This allows
us to set a boolean flag indicating whether or not there is history. This way
of storing whether there is history is optional, but checking this flag is
quite a bit more efficient than checking for input connections to the
inputSurface attribute.</p>
<h4>Summary</h4>
<p>Until now,
all of our previous examples have been fairly cut and dry. If you wanted to
make a user-defined shape with movable components, you basically have to follow
the basic plan outlined in chapters II-V. Where the creativity and design on
your part really starts coming into play is when you start adding support for
history. The implementation presented here is one way to go, and closely mimics
how shapes inside of Maya are implemented.</p>
<h3>Deformer Support – Background Info</h3>
<p>The term
deformer refers to any type of node derived from the base class “geometryFilter”.
Examples of deformers are lattices, clusters, nonlinears, and MPxDeformerNodes.
When you add a deformer to a shape, a number of things happen:</p>
<ul>
<li>The shape is copied. This copy of
     the shape is called the “intermediate object” and is placed in the history
     of the shape. (Subsequent deformers will reuse the existing intermediate
     object. New copies will not be added.)</li>
<li>a set gets created to store the
     components affected by the deformer</li>
<li>a tweak node is created to store
     subsequent tweaks made to the shape</li>
<li>the deformer node and any related
     auxiliary objects are created</li>
</ul>
<p>A typical
dependency graph set-up including deformers is shown below:</p>
<p style="text-align: center;">&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f4491970c-pi" style="display: inline;"><img alt="Deformer_shape" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c2f4491970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f4491970c-800wi" title="Deformer_shape" /><br /></a><em>Hypergraph view of deformers in
the history of a shape</em></p>
<p>At the far
right, pSphereShape is the deformed shape node. At the far left,
pSphereShapeOrig is the intermediate object. The intermediate object is
typically hidden (unless you disable its intermediateObject attribute), and is
at the head of every chain of deformers. It serves as a storage place for the
original undeformed positions of the shape.</p>
<p>In a typical
deformer chain, shape data flows out of the intermediate object and then flows
through each of the deformers. In this example, the deformers that are
traversed are tweak1, cluster1 and ffd1. In this example, only a single shape
flows through ffd1. However, most deformers can operate on any number of shapes
since the input and output geometry attributes of the deformer base class are
multis. The two exceptions to this rule are skinClusters and the wrap node.
Because of implementation details, the skinCluster and the wrap node can
operate on only a single geometry. Additional geometries connected to the
skinCluster and the wrap will be ignored.</p>
<h4>Sets on shapes with history</h4>
<p>Each deformer
is associated with a single set. It will deform only the points that are
included in its set. If you add points to a deformers using the sets command,
the deformer will automatically be wired up to the construction history of the
shape. Similarly, if you remove points from a set, the deformer will stop
acting upon those points. </p>
<p>Most sets in
Maya are composed of only a single node: the objectSet node. However, component
sets in Maya are different. Component sets are stored within the shape data
rather than within the objectSet node. The set is connected to a groupId node
per shape, and a groupParts node per &quot;construction-historied&quot;
shape.&#0160; If you look at the history of a
shape in the hypergraph, by default Maya will hide the groupParts and the groupId
because they clutter the view and are not of interest. If you turn on display
of &quot;auxiliary nodes&quot;, the groupParts and groupId will be drawn.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f45ae970c-pi" style="display: inline;"><img alt="Deformer_dg_group" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c2f45ae970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f45ae970c-800wi" title="Deformer_dg_group" /><br /></a><em>Hypergraph view showing the groupParts, groupId and objectSet node for an ffd
deformer. Note that the tweak node was deleted from this shape&#39;s history in order
to make the figure less cluttered.</em></p>
<p>The groupId
node is simply a means of storing an id that is unique within the scene for
fast look-up of the membership of the set within the shape&#39;s list of sets.</p>
<p>The
groupParts node stores component sets for shapes with construction history.
This is because as the shape data flows through the history, it may change its
numbering. Component lists are stored using the vertex index and some
construction history nodes modify the vertex numbering - for example, &quot;polySplit&quot;,
&quot;deleteComponent&quot;, etc. Because the groupParts is in the construction
history, it remains immune to the vertex numbering changes. It receives the
shape data before the vertices are renumbered. This architecture has proved
useful for certain poly modeling operations.</p>
<h4>Tweak Nodes</h4>
<p>A tweak is
the name given to translations of vertices on shapes in Maya. Shapes without
construction history are able to add tweak deltas directly into their vertex
position data. However, shapes with construction history need to store the
tweaks as deltas that get added to the shape data coming in through the history
attribute.</p>
<p>When a
deformer is added to a shape in Maya, we do lot of work to prevent tweaks from
existing on the shape. Why? In the previous chapter, we discussed how shapes
store tweaks as relative moves which get added to the history. The example
below shows how such a relative tweak would get added into a smooth skinned
surface.</p>
<p style="text-align: center;">&#0160;&#0160;<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f4629970c-pi" style="display: inline;"><img alt="Tweak_node" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c2f4629970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f4629970c-800wi" title="Tweak_node" /><br /></a><em><strong>Left:</strong> Salty the seal&#39;s
initial state.</em><br /><em><strong>Middle:</strong> Salty&#39;s nose was
tweaked (think Pinocchio).</em><br /><em><strong>Right:</strong> The neck joint is
rotated, causing the skin to deform. The tweak does not get deformed since is
added after the deformation.</em></p>
<p>In the above
picture (left), the user has skinned the seal shape to a skeleton so that
rotating the various joints creates a smooth skinning deformation. In a later
plot twist, Salty is beset by a strange Pinocchio-like spell. The user needed
to make Salty&#39;s nose grow, and accomplished this by translating a few vertices
over in X. For this example, there is no tweak node, so the vertex deltas are
stored on the shape node. It all looks ok until we rotate the neck. Now since
the tweaks get added after the skinning deformation, the deltas move the nose
vertices over in X even though Salty&#39;s nose is no longer aligned with the
X-axis.&#0160; In order for Salty to rotate his
head successfully, we need the skinning algorithm to act on Salty&#39;s tweaked
nose, instead of having the tweaks act on Salty&#39;s skinned nose.</p>
<p>To address
this issue, whenever there are deformers in the history of a shape, a tweak
deformer is created automatically and inserted at the front of the deformer
chain. If the shape being deformed had existing tweaks or animated CVs, the
tweaks &amp; animation are moved onto the tweak node. Otherwise, the tweak node
is left empty until the user grabs some cvs and moves them (or keys them). New
tweaks are also added to the tweak node (unless the user manually deletes it,
in which case we revert to the old behavior).</p>
<h3>Deformer Support – Implementation</h3>
<p>In this
section, we’ll present the changes necessary to upgrade our example plug-in so
that it will support deformers. The example code referred to here is in the
directory called <strong><em>compCurveDeformable</em></strong>. To try out this shape, use
the MEL script compCurveDefSetup to create this shape. Then add some deformers
to your shape, and move some vertices around.</p>
<h4>Geometry Data</h4>
<p>In order to
support either sets or deformers, it is necessary for the shape-related
attributes on the shape to be geometry data. You could use one of Maya’s
internal geometry data types, such as mesh data. Or you can write your own type
of geometry data derived from MPxGeometryData. For the purposes of this
example, we created our own data type, compCurveData. The data itself contains
a simple MPointArray. When implementing your own type of data, you need to
implement a number of virtual methods to support file io, geometry iteration
over the data, copy, and set creation. </p>
<p>Inside our
example plug-in, you will see that we have gotten rid of all of our internal
data (fInputPoints and fCurvePoints). We are now storing all of our data in the
datablock in the geometry attributes described next.</p>
<p>The change
from storing the data internally as a class member to storing it in a data type
required a lot of small changes to the code. Basically every place where we
were using fInputPoints, we now use the point array that is stored in the data
for the input shape. Every place where we were using fCurvePoints, we now use
the point array stored in the data for the cached shape.</p>
<h4>Geometry Attributes</h4>
<p>Any
deformable geometry requires at a minimum the following three attributes:</p>
<ul>
<li>input shape</li>
<li>cached shape</li>
<li>local output shape</li>
<li>world output shape</li>
</ul>
<p>The input
shape is where history gets connected into your node, as in the previous
example. The cached shape is the input shape plus the tweaks – generally
treated to be your node’s private storage place. The local and world output
shape attributes give other nodes the ability to connect downstream from your
shape’s data. The world output shape simply bundles the world matrix of the
shape with the local shape data. The shape data itself is still in local space.</p>
<h4>Geometry Attribute Overrides</h4>
<p>4 virtual
methods should be implemented to return the attributes corresponding to the
above 4 attributes:</p>
<ul>
<li>localShapeInAttr</li>
<li>cachedAttr</li>
<li>localShapeOutAttr</li>
<li>worldShapeOutAttr</li>
</ul>
<p>Of these
attributes, 2 are outputs and required us to add to our existing override of
the compute method to handle our 2 new outputs.</p>
<p>These
attributes are used in commands that want to know about history/future shape
attributes on your node. For example, the listHistory command will utilize
these methods to find the history or future (listHistory –future) of your node.
When a deformer is attached to a shape, it connects to the attribute returned
by the worldShapeOutAttr of the intermediate object and to the
localShapeInAttr of the deformed object.</p>
<h4>Overrides required for set support</h4>
<p>Three methods
must be added to our shape to support the creation of sets of our components:</p>
<ul>
<li>match: This method is used by the set creation code to
     determine whether the selected component type is valid for inclusion in a
     vertex-restricted sets. Since deformer sets must be vertex-restricted,
     your shape must override match to specify that its control point
     components satisfy the vertex restriction.</li>
<li>createFullVertexGroup: This method is used by the set
     creation code when it wants to create a set containing all of the control
     points in the entire shape. An example of when this would occur is if you
     select your shape as an object (rather than as in component-mode), and
     create a deformer. The deformer’s set would contain all of the vertex
     components of your shape as defined by the createFullVertexGroup method
     implementation.</li>
<li>geometryData: This method is used by the set
     creation and editing code to access the geometry data. Set information for
     components is stored with the geometryData. </li>
</ul>
<h4>Tweak node support</h4>
<p>You must
override the tweakUsing method to support movement of
controlPoints on shapes with tweak nodes in their history. The tweakUsing method is fairly similar to the transformUsing method, but it allows the tweaks to be transferred to
the tweak node rather than directly into the shape data itself.</p>
<h3>Conclusion</h3>
<p>Writing a
custom shapes is not trivial. However, if you start simple, and then add more
details, it’s not so difficult. We recomment that you build up your custom
shape piece by piece and get each part of it solid before you proceed to the
next. Hopefully the example plug-ins and material presented in this article will
provide a good starting point for this process.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Martin Karlsson
EMAIL: mrkarlsson@hotmail.com
IP: 64.37.167.162
URL: 
DATE: 10/17/2012 02:16:22 PM
I'm extending OpenMayaMPx.MPxLocatorNode. How do I know when the node is selected, please?

Goal is to draw lines with different color when selected.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.10.193.112
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/18/2012 11:33:00 PM
Hi Martin,
 
We posted a utility (with source code) recently on <a href="http://labs.autodesk.com/utilities/ADN_plugins">http://labs.autodesk.com/utilities/ADN_plugins</a> in case you want to see a full sample (LocatorLib utility). 
 
All is done in the draw() method, something like this:
 
void locatorLibBase::draw (M3dView &view, const MDagPath &path, M3dView::DisplayStyle style, M3dView::DisplayStatus status) {
  view.beginGL () ;
  if ( (style == M3dView::kFlatShaded)
  || (style == M3dView::kGouraudShaded)
  ) {
    // Push the color settings
    glPushAttrib (GL_CURRENT_BIT) ;
    if ( status == M3dView::kActive )
      view.setDrawColor (13, M3dView::kActiveColors);
    else
      view.setDrawColor (13, M3dView::kDormantColors);
    myShadedDraw () ;
    glPopAttrib () ;
  }
  myWireFrameDraw () ; // Draw the outline of the locator
  view.endGL () ;
}
 
The ( status == M3dView::kActive ) will tell you if it is selected or not, and like above you decide what colors you want.
 
Now this is for the legacy viewport. If you also want to support the Maya Viewport 2.0, you need another class and do something similar again. So you would need to derive an additional class from the MHWRender::MPxDrawOverride class and use the draw()' MHWRender::MDrawContext argument.
 
Hope that helps,

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk FBX 2013.3 update released
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: autodesk-fbx-20133-update-released
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: FBX

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/autodesk-fbx-20133-update-released.html 
DATE: 09/27/2012 09:00:00 AM
-----
BODY:
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee3cf4cb6970d-pi" style="display: inline;"><img alt="Fbx" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017ee3cf4cb6970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017ee3cf4cb6970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Fbx" /></a><br />FBX has released 2013.3 update and is available for download
via the <a href="http://www.autodesk.com/developfbx" target="_self">FBX Developer Center</a> page&#0160;or&#0160;<a href="http://usa.autodesk.com/fbx" target="_self">FBX product page</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya’s Deformer Architecture
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-deformer-architecture
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Maya
CATEGORY: Modeling

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/maya-deformer-architecture.html 
DATE: 09/25/2012 11:20:00 PM
-----
BODY:
<p>This post is the <strong>second</strong> of a series of post which will talk about public information and source code available on Maya algorithms. Not sure if you noticed it, but the first one was on the <a href="http://around-the-corner.typepad.com/adn/2012/08/maya-fluid-shader.html" target="_self">Maya Fluid Shader</a>. </p>
<p>Recently we had a request for more information about MFnSkinCLuster class as the documentation does not provide all the information about how the whole thing is working and the Maya devkit samples only access an already existing skinned mesh vs create.</p>
<p>The algorithm itself is widely
available on the web and is described in <a href="http://pubs.cs.uct.ac.za/archive/00000403/01/skinning_afrigraph.pdf" target="_self">this review paper</a>&#0160;(the one called “Skeletal Subspace Deformation”). The paper also gives a lot of references to other places where it is covered.</p>
<p>In Maya internals,&#0160;Deformer nodes are designed to contain algorithms that move points. Examples of deformers are lattices, blendShapes, skinning, and clusters. User-defined deformers can also be written the API using the MPxDeformerNode class.</p>
<p><strong>Deformers in the DG</strong><strong>&#0160;</strong></p>
<p>Deformers are placed in the construction history of the shape being deformed. A typical dependency graph set-up including deformers is shown below:</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de3ff6970d-pi" style="display: inline;"><img alt="Deformer_dg" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744de3ff6970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de3ff6970d-800wi" title="Deformer_dg" /></a><br /><em>Hypergraph
view of deformers in the history of a shape</em></p>
<p>At the far right, pSphereShape is the deformed shape node. At the far left, pSphereShapeOrig is the so-called intermediate object. The intermediate object is never displayed (unless you disable its intermediateObject attribute), but is at the head of every chain of deformers. It serves as a storage place for the original undeformed positions of the shape.</p>
<p>In a typical deformer chain, shape data flows out of the intermediate object and then flows through each of the deformers. In this example, the deformers that are traversed are highlighted in yellow: tweak1, cluster1 and ffd1. In this example, only a single shape flows through ffd1. However, most deformers can operate on any number of shapes since the input and output geometry attributes of the deformer base class are multis.
The two exceptions to this rule are skinClusters and the wrap node. Because of
implementation details, the skinCluster and the wrap node can operate on only a
single geometry. Additional geometries connected to the skinCluster and the wrap
will be ignored.</p>
The dotted lines in the hypergraph view above indicate that some auxiliary nodes are not displayed. In this case, the auxiliary nodes are groupParts nodes which are used to store component lists for the deformer sets.
<p><strong>Deformers and Sets</strong><strong>&#0160;</strong></p>
<p>Each deformer is associated with a single set. It will deform only the points that are included in its set. If you add points to a deformers using the sets command, the deformer will automatically be wired up to the construction history of the shape. Similarly, if you remove points from a set, the deformer will stop acting upon those points. The set used by the deformer is a vertex-restricted set: it can contain only vertices. Given a deformer, the easiest way to find its set is using the MFnGeometryFilter::deformerSet() method. The returned set can then be used to create an MFnSet which can be used to access membership information. For example:</p>
<pre class="brush: cpp; toolbar: false;">MFnGeometryFilter fnDeformer(defObject);
MObject setObject =fnDeformer.deformerSet();
MFnSet fnSet(setObject);
MSelectionList members;
fnSet.getMembers(members,false);
MItSelectionList itr(members);
for ( ; !itr.isDone(); itr.next() ) {
	MDagPath path;
	MObject components;
	itr.getDagPath(path, components);
	...
}
</pre>
<p>The findDeformersCmd.cpp example plug-in contains the entire source of the above code fragment.</p>
<p><strong>The GroupParts node and GroupId node</strong></p>
<p>Ideally, as a Maya user or API
developer, there is no reason to understand the groupParts node or the other
connections that Maya uses to represent sets. However, people frequently ask
about them, so here is some background information.</p>
<p>Most sets in Maya are composed of only a single node: the objectSet node. However, component sets in Maya are different.
Component sets are stored within the shape data rather than within the objectSet node. The set is connected to a groupId node per shape, and a groupParts node per &quot;construction-historied&quot; shape. If you look at the history of a shape in the hypergraph, by default Maya will hide the groupParts and the groupId because they clutter the view and are not of interest. If you turn on display of &quot;auxiliary nodes&quot;, the groupParts and groupId will be drawn.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3200cb7e970b-pi" style="display: inline;"><img alt="Deformer_dg_group" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3200cb7e970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3200cb7e970b-800wi" title="Deformer_dg_group" /></a><br /><em>Hypergraph
view showing the groupParts, groupId and objectSet node for an ffd deformer.
Note that the tweak node was deleted from this shape&#39;s history in order to make
the figure less cluttered.</em></p>
<p>The groupId node is simply a means
of storing an id that is unique within the scene for fast look-up of the
membership of the set within the shape&#39;s list of sets.</p>
<p>The groupParts node stores component
sets for shapes with construction history. This is because as the shape data
flows through the history, it may change its numbering. Component lists are
stored using the vertex index and some construction history nodes modify the
vertex numbering - for example, &quot;polySplit&quot;,
&quot;deleteComponent&quot;, etc. Because the groupParts is in the construction
history, it remains immune to the vertex numbering changes. It receives the
shape data before the vertices are renumbered. This architecture has proved
useful for certain poly modeling operations. However, it can also causes
problems. If you modify the history ahead of a groupParts, your set may no
longer going to contain reasonable indices. Or if you modify the topology after
a groupParts, it can then be very difficult to edit weights or other details
earlier in the dependency graph that rely on a different indexing scheme. </p>
<p>For example, let&#39;s say you create a
10x10 polyPlane with history. You select the upper vertices in the plane, and
then create a cluster. The cluster will act on the selected vertices, which are
contained in its set. Now you select the history node for the plane and modify
the plane&#39;s number of divisions from 10x10 to 9x10. The membership of the
cluster will now be quite different than that which you originally specified.
If you spent a lot of time weighting vertices, this can be pretty frustrating.
There are workarounds such as exporting the weight map before changing
topology, and then importing the weight map.</p>
<p style="text-align: center;">
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f1340970c-pi" style="display: inline;"><img alt="Cluster_10x10" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3c2f1340970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3c2f1340970c-800wi" title="Cluster_10x10" /></a><br /><em>Membership
of the cluster created on a 10x10 plane (left) and after history is modified to
9x10 (right)</em></p>
<p><strong>Deformers and Ordering</strong><strong>&#0160;</strong></p>
<p>The order that you add deformers to
an object makes a big difference in how they work in the scene since each
deformer takes the output of the previous deformer as its input. Here&#39;s an
example:</p>
We took a model of a giant and then added a sine
wave nonlinear deformer, and then added a cluster deformer. We then selected
the cluster and translated the cluster up in Y. Since the cluster is after the
sine wave, the giant in its sine wave position gets translated upwards by the
cluster node. Next, we reordered the cluster so that it is ahead of the sine
wave node in the dependency graph. Now, when the cluster is translated upwards,
it moves the top half of the giant out of the region of influence of the sine
wave deformer and as we move the cluster up and down we control which regions
of the man are deformed by the sine wave.
<p style="text-align: center;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3200d0e8970b-pi" style="display: inline;"><img alt="Deformer_ordering" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3200d0e8970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3200d0e8970b-800wi" title="Deformer_ordering" /></a><br /><em>Demonstration
of ordering of deformers:&#0160;initial
state (left), sine followed by translated cluster (middle), translated cluster
followed by sine (right)</em></p>
<p><strong>Tweak Nodes</strong><strong>&#0160;</strong></p>
<p>A tweak is the name given to
translations of vertices on shapes in Maya. Shapes without construction history
are able to add tweak deltas directly into their vertex position data. However,
shapes with construction history need to store the tweaks as deltas that get
added to the shape data coming in through the history attribute.</p>
When a deformer is added to a shape in Maya, we
do lot of work to prevent tweaks from existing on the shape. Why? Consider what
would happen otherwise:
<p style="text-align: center;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de5489970d-pi" style="display: inline;"><img alt="Tweak_node" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744de5489970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de5489970d-800wi" title="Tweak_node" /></a><em><span style="text-align: center;">Salty
the seal&#39;s initial state (left), Salty&#39;s nose was tweaked to make it grow - ok
(middle),&#0160;</span><span style="text-align: center;">Salty rotated his neck. We wanted the nose to
come along but it didn&#39;t - not ok (right)</span></em></p>
<p>In the above picture (left), the
user has skinned the seal shape to a skeleton so that rotating the various
joints creates a smooth skinning deformation. In a later plot twist, Salty
tells a lie, and is beset by a strange Pinocchio spell. The user needed to make
Salty&#39;s nose grow, and accomplished this by moving a few vertices over in X. In
this example, there is no tweak node, so the vertex deltas are stored on the
shape node. It all looks ok until we rotate the neck. Now since the tweaks get
added after the skinning deformation, the deltas move the nose vertices over in
X even though Salty&#39;s nose is no longer aligned with the X-axis.&#0160; Salty&#39;s
nose has turned into a strange flat protuberance instead of its original,
Pinocchio-esque coniness. In order for Salty to rotate his head successfully,
we need the skinning algorithm to act on Salty&#39;s tweaked nose, instead of
having the tweaks act on Salty&#39;s skinned nose.</p>
To address this issue, a tweak deformer is
created automatically and inserted at the front of the deformer chain. If the
shape being deformed had existing tweaks or animated CVs, the tweaks &amp;
animation are moved onto the tweak node. Otherwise, the tweak node is left
empty until the user grabs some cvs and moves them (or keys them). New tweaks
are also added to the tweak node (unless the user manually deletes it, in which
case we revert to the old behavior).
<p><strong>Deformers and Topology</strong><strong>&#0160;</strong></p>
<p>The word topology has several
meanings, but in this discussion, we are referring to the underlying structure
of the shape. For example, a mesh&#39;s topology defines how its vertices are
connected into edges, and edges connected into faces in order to build the
total mesh. The topology of a NURBS surface is its number of divisions in u,v.
In Maya&#39;s construction history, changing the topology of a shape frequently
reorders its vertices. For example, if you select some vertices in a polygon
with history and delete them, the polygon will reorder all subsequent vertices
in order to maintain a tight packing. </p>
Several Maya deformers store weights per-vertex
including:
<ul>
<li>clusters</li>
<li>rigid skinning (jointClusters)</li>
<li>smooth skinning (skinClusters)</li>
<li>plug-in deformers (MPxDeformerNode)</li>
</ul>
<p>Deformers store their weights
sparsely using the index of the weighted vertex. This can cause some anomolies
as discussed previously with component sets. Changing the vertex ordering prior
to the deformer will cause the weights to become correlated with new vertices.
Changing the vertex ordering after the deformer is ok in one sense, since the
construction history preserves the original topology into the deformer and only
modifies it later. However, it makes it difficult to figure out the indices for
the weights outside of compute since on the final shape the indices may have an
entirely different index than they have inside the deformer.</p>
<p><strong>Skinning</strong></p>
<p>Skinning is the name given in Maya to the
process of deforming a shape according to the transformations of joints or
other influence objects. There are two types of skinning in Maya: smooth and
rigid. Smooth skinning produces a skin that in general is smooth around joints
as soon as it is bound, though users will typically modify the weights to
achieve more customized affects. Rigid skinning produces a skin that initially
behaves as if it is parented to the joint that it is attached to. Then either
flexors can be added to produce smoothing around joints, or weights on the
rigid jointCluster node can be modified.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de6afc970d-pi" style="display: inline;"><img alt="Skinning" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744de6afc970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744de6afc970d-800wi" title="Skinning" /></a></p>
<p>The table above details some of the differences between smooth and rigid skinning. The most significant architectural detail is the fact that rigid skinning produces a single jointCluster per joint. That jointCluster is then shared by all skins that are rigidly bound to that joint. On the other hand, smooth skinning produces one skinCluster per skin, and all of the influences that affect that skin are connected to the skinCluster.
Smooth skinning in general is the easier technique for users, and its algorithm is quicker to compute (this of course is dependent on the number of influences that are given weights).</p>
<p><strong>Smooth Skinning</strong><strong>&#0160;</strong></p>
<p><em>Node configuration</em></p>
<p>In smooth skinning, there is one
skinCluster per skin. So unlike many deformers, you cannot modify the set
membership of a skinCluster to add additional skins. Each skin must have its
own skinCluster. You can modify the set membership of a skinCluster by removing
vertices -- for example if you wanted to skin only half of an object.</p>
<p>Given a skinCluster, there can be
any number of influence objects. The worldMatrix output of the influence
objects will be connected into the skinCluster&#39;s matrix attribute. The
attribute logicalIndex of this connection is used by the skinCluster to
correlate influences with their weights. The api method
MfnSkinCluster::indexForInfluenceObject lets you query the skinCluster to find
out the index of the associated influence object.</p>
<p>The weights for the skinCluster are
stored in the multi-multi attribute called weightList[].weights[]. The first
index of the multi is the index of the vertex. The second index is the index of
the influence object. The weights are in general stored sparsely, so that if
the user has only weighted a given vertex by 2 of the 50 influence objects,
only 2 elements will exist in the weights array for that vertex. The exception
is that if data exists in the datablock and is later set to 0 by some
operation. The zero-valued data will remain in the datablock until the file is
saved, at which time Maya&#39;s file save code will notice that the value 0.0 is
default data that does not need to be saved. The next time the file is read in,
only the non-zero valued elements will exist in the skinCluster.</p>
<p>The transformation of the joints at
the time of the bind in called the bindPose in Maya. The skinning algorithm
needs this information to do the deformation. The bindPose in Maya is stored in
a node called the dagPose node. It is stored in more detail than is needed by
the skinning algorithm because the extra information is&#0160; needed to help
Maya to restore the bindPose for the user.&#0160; </p>
<p>The dagPose node stores the world
matrix for all of the influences at the time of the bind. It also stores the
local matrix as a full transformation matrix (MTransformationMatrix), and
stores parenting information. Only the worldMatrix is used by the skinning
algorithm, and is contained in the skinCluster node in the bindPreMatrix
attribute, which is a multi-attribute that correlates its multi-index to that
of the related influence object. </p>
Note that for joints only, the bindMatrix is
also stored in the joint in the &quot;bindPose&quot; attribute. The joint has
some other bind-related attributes, but they are obsolete in Maya4.0 and remain
only for backwards compatibility when reading Maya1.0 files.
<p><em>Algorithm</em></p>
<p>Each point P is assigned a set of
weights {w1,w2,...,wn}, one weight for each of the &#39;n&#39; influence objects
affecting the skin with the default weight value being 0.&#0160; Typically, the
following holds:</p>
<p style="padding-left: 30px;">w1 + w2 + ... + wn = 1.0</p>
<p>Let Ti be the current world
transformation matrix of influence `i` and Bi be the world transformation
matrix of the same influence at the time of the bind.</p>
<p>If W(p) is the world position of P
at the time of the bind, then we compute Li(p) to be the position of point P in
the local coordinate system of influence i:</p>
<p style="padding-left: 30px;">Li(p)&#0160; =&#0160; Bi-1 * W(p)</p>
<p>We then compute what the world
position of the point would be if it was &quot;parented&quot; under transform
&#39;i&#39;:</p>
<p style="padding-left: 30px;">Ni(p)&#0160; = Ti * Li(p)</p>
<p>We multiply this world position by
the corresponding weight for influence i and get:</p>
<p style="padding-left: 30px;">Mi(p)&#0160; = wi * Ni(p)</p>
<p>We now add up all the Mi(p) to get
the deformed position of the point in world space:</p>
<p style="padding-left: 30px;">NewWorldPos(p)&#0160; = M1(p) + M2(p)
+ ... + Mn(p)</p>
Notice that all the rotations happen at the
joint/transform pivots and we do a linear interpolation using the weight to
compute the final point positions.
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: David Johnson
EMAIL: 
IP: 121.214.147.240
URL: http://profile.typepad.com/davidjohnson12
DATE: 09/27/2012 07:04:10 AM
"Ideally, as a Maya user or API developer, there is no reason to understand the groupParts node or the other connections that Maya uses to represent sets." That may be so, but in practice groupId and groupParts nodes are a constant source of problems especially when dealing with complex file referencing. So it is helpful to know something about their purpose.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Autodesk Maya 2013 Extension Release (codename “Barbaretta”)
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: autodesk-maya-2013-extension-release-codename-barbaretta
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/autodesk-maya-2013-extension-release-codename-barbaretta.html 
DATE: 09/23/2012 11:00:00 PM
-----
BODY:
<p>With the <a href="http://area.autodesk.com/assets/img/siggraph2012/2012-08-06_2013_dec_extension_releases.pdf" target="_blank">announcement</a>&#0160;made at
SIGGRAPH 2012, there is something important to note about the&#0160;<a href="http://usa.autodesk.com/adsk/servlet/pc/item?siteID=123112&amp;id=15500357" target="_blank">Extension release</a>!
Unlike past releases, this one <strong>will not be binary compatible</strong> with its
major release. In the past, a hotfix, Service Pack, and Extension release were
binary compatible with their respective major release; <strong>that&#39;s not the case this time!</strong></p>
<p><strong>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bfcc0f0970c-pi" style="display: inline;"><img alt="Breaking-chain" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bfcc0f0970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bfcc0f0970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Breaking-chain" /></a><br /></strong><span style="text-decoration: underline;">Here is an example to illustrate
what this means:</span></p>
<p>The Maya 2012 Extension release is
binary compatible with the Maya 2012 major release, which means C++ plug-ins
compiled using the Maya 2012 devkit can be loaded in the Maya 2012 Extension
release. Developers do not need to recompile their plug-ins to work in the Extension
release.</p>
<p>Unfortunately, the internal
changes required for the Maya 2013 Extension release made that compatibility
impossible to maintain. This means, Maya&#0160;C++ plug-in developers <strong>will need to
recompile their plug-ins</strong> to work in Maya 2013 Extension release using the
new devkit from the Extension release.</p>
<p>Python<sup>®</sup>
plug-ins aren&#39;t affected by the changes, but developers
may have to do code changes depending on the API they are using.</p>
<p><span style="text-decoration: underline;">New API and API changes:</span></p>
NOTE: This list is not exhaustive. It only covers those changes and additions which are likely to be of most interest to API users.
<h2>New API for reference edits</h2>
<ul>
<li>MItEdits&#0160;allows you to interate through a scene&#39;s reference edits.</li>
MEdit,&#0160;MAddRemoveAttrEdit,&#0160;MConnectDisconnectAttrEdit,&#0160;MFcurveEdit,&#0160;MParentingEdit&#0160;and&#0160;MSetAttrEdit&#0160;provide methods for querying information about specific types of edits.
<li>MFnReference&#0160;has been added to allow you to query individual file references.</li>
<li>MFnDependencyNode::isTrackingEdits()&#0160;can be used to determine if a reference node or assembly is tracking edits.</li>
<li>New edit-related message types have been added to&#0160;MSceneMessage: kBeforeLoadReferenceAndRecordEdits, kAfterLoadReferenceAndRecordEdits, kBeforeCreateReferenceAndRecordEdits, kAfterCreateReferenceAndRecordEdits.</li>
</ul>
<h2>New API for scene assemblies</h2>
<ul>
<li>MFnAssembly&#0160;can be used to query and modify assembly nodes, which are used to manage the various representations of a scene asset.</li>
<li>MPxAssembly&#0160;can be used to create custom assembly types</li>
<li>MPxRepresentation&#0160;can be used to create custom representations.</li>
</ul>
<h2>New API for generic metadata (blind data)</h2>
<ul>
<li>A number of classes have been added to create and operate on streams of generic data. Look in the API Reference for classes in the &quot;adsk::Data&quot; namespace (e.g.&#0160;adsk::Data::Stream, adsk::Data::Channel).</li>
<li>setMetadata()&#0160;and&#0160;deleteMetadata()&#0160;methods have been added to&#0160;MDGModifier.</li>
<li>setMetadata(),&#0160;deleteMetadata(),&#0160;metadata()&#0160;and&#0160;validateMetadata()&#0160;methods have been added to&#0160;MFnDependencyNode.</li>
<li>The&#0160;writesMetadata()&#0160;virtual method has been added to&#0160;MPxMayaAsciiFilter.</li>
</ul>
<h2>New API for URIs (Uniform Resource Identifiers)</h2>
<ul>
<li>The&#0160;MURI&#0160;class can be used to create URIs as well as query and modify the various components of a URI.</li>
<li>MPxFileResolver&#0160;can be used to create custom handlers to resolve specific URI schemes.</li>
</ul>
<h2>Viewport Rendering API Changes</h2>
<ul>
<li>DirectX11 support: kDirectX11 has been added to the DrawAPI enum.&#0160;MRenderer::drawAPI()&#0160;will return kDirectX11 if the current renderer supports DirectX11. If the drawing API is kDirectX11 then&#0160;MRenderer::GPUDeviceHandle()&#0160;will return a point to the DirectX device. Custom overrides derived from&#0160;MPxDrawOverride,&#0160;MPxGeometryOverride,&#0160;MPxShaderOverride&#0160;andMRenderOverride&#0160;can indicate that they support DirectX11 by including kDirectX11 in the bitmap returned by their&#0160;supportedDrawAPIs()&#0160;methods.</li>
<li>MRenderItem&#0160;consolidation: When multiple objects are compatible, their geometry can be consolidated into a single&#0160;MRenderItem, to provide better performance by concatening their index and vertex buffers.&#0160;isConsolidated()&#0160;returns true if the&#0160;MRenderItem&#0160;contains multiple objects and&#0160;sourceIndexMapping()&#0160;will return an&#0160;MGeometryIndexMapping&#0160;instance which describes how they have been consolidated into the buffers.</li>
<li>Custom display filters:&#0160;MFnPlugin::registerDisplayFilter()&#0160;has been added to allow the creation of new object filters which will show up on the viewport&#39;s &#39;Show&#39; menu.&#0160;setPluginDisplay()&#0160;andpluginObjectDisplay()&#0160;have been added to&#0160;M3dView&#0160;to control and query the state of these filters.&#0160;MDrawInfo::pluginObjectDisplayStatus()&#0160;has been added to provide that information to plugin shapes.</li>
<li>GPU-based gamma correction (aka &quot;sRGB write&quot;):&#0160;MRenderTargetManager::formatSupportsSRGBWrite()&#0160;has been added to determine if a given raster format supports GPU-based gamma correction and&#0160;MRenderOperation::enableSRGBWrite()&#0160;has been added to enable it for a given operation.</li>
<li>Explicit binding of shader effects.&#0160;MShaderInstance&#0160;now allows explicit control over the binding of shader effects (e.g. cgfx or fx files) via its new&#0160;bind()&#0160;and&#0160;unbind()&#0160;methods.&#0160;getPassCount()&#0160;andactivatePass()&#0160;can be used to determine which passes are enabled in the effect and&#0160;updateParameters()&#0160;can be used to update parameters with the overhead of rebinding.</li>
<li>MPxPrimitiveGenerator&#0160;has been added to allow the creation of new primitive types which can be used by&#0160;MPxShaderOverride&#0160;or by a custom renderer.</li>
<li>MPxVertexBufferMutator&#0160;has been added to allow the manipulation of custom vertex streams.</li>
<li>MPxIndexBufferMutator&#0160;has been added to allow the manipulation of custom index buffers.</li>
<li>MRenderUtilities&#0160;has been added to provide various utility functions for viewport rendering, such as setting the swatch background color, retrieving the draw contexts for swatches and the texture editor, and blitting a target to OpenGL or an&#0160;MImage.</li>
<li>setAllowsUnorderedAccess()&#0160;and&#0160;allowsUnorderedAccess()&#0160;have been added to&#0160;MRenderTargetDescription&#0160;to set and query whether a target supports simultaneous read/write access to its data by multiple threads.</li>
<li>MDrawContext::getPassContext()&#0160;has been added to return information about the current render pass. It returns an instance of the new&#0160;MPassContext&#0160;class.</li>
<li>lightType()&#0160;and&#0160;lightPath()&#0160;methods haved been added to&#0160;MLightParameterInformation, and several other methods have been added to work with StockParameterSemantics.</li>
<li>MGeometryUtilities::acquireReferenceGeometry()&#0160;has been added to return geometry for default reference primitives such as sphere, cube and plane. The caller is responsible for usingMGeometryUtilities::releaseReferenceGeometry()&#0160;to release the geometry when done with it.</li>
<li>MVertexBufferArray&#0160;has been added to allow arrays of&#0160;MVertexBuffers&#0160;to be passed between API methods.</li>
<li>EXT_frame_buffer_object support has been added to&#0160;MGLdefinitions</li>
<li>map()&#0160;and&#0160;unmap()&#0160;have been added to&#0160;MIndexBuffer&#0160;and&#0160;MVertexBuffer&#0160;to provide read-only access to their buffers&#39; contents.</li>
<li>resourceHandle()&#0160;methods have been added to&#0160;MIndexBuffer&#0160;and&#0160;MVertexBuffer&#0160;to set and retrieve graphics device dependent handles to hardware buffers.&#0160;hasCustomResourceHandle()&#0160;can be used to determine if a custom resource handle has been set.</li>
<li>castsShadows()&#0160;methods have been added to&#0160;MRenderItem&#0160;to query and modify whether the item casts shadows.&#0160;receivesShadows()&#0160;methods have been added to do the same for receiving shadows.</li>
<li>getEffectsBufferShader()&#0160;has been added to&#0160;MShaderManager. It performs the same function as&#0160;getEffectsFileShader()&#0160;except that the source code for the effect is contained in a memory buffer rather than a file.</li>
<li>rawData()&#0160;has been added to&#0160;MRenderTarget&#0160;and&#0160;MTexture&#0160;to return a copy of their currently mapped data.</li>
<li>Instances of the following classes can no longer be deleted directly but must instead be released using the appropriate method from the corresponding manager class:
<table border="1" cellpadding="4" cellspacing="0">
<tbody>
<tr>
<th>Instance Type</th><th>Release Method</th>
</tr>
<tr>
<td>MBlendState</td>
<td>MStateManager::releaseBlendState().</td>
</tr>
<tr>
<td>MDepthStencilState</td>
<td>MStateManager::releaseDepthStencilState().</td>
</tr>
<tr>
<td>MRasterizerState</td>
<td>MStateManager::releaseRasterizerState().</td>
</tr>
<tr>
<td>MRenderTarget</td>
<td>MRenderTargetManager::releaseRenderTarget().</td>
</tr>
<tr>
<td>MSamplerState</td>
<td>MStateManager::releaseSamplerState().</td>
</tr>
<tr>
<td>MShaderInstance</td>
<td>MShaderManager::releaseShader().</td>
</tr>
<tr>
<td>MTexture</td>
<td>MTextureManager::releaseTexture().</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h2>Miscellaneous</h2>
<ul>
<li>MFnFloatArrayData&#0160;has been added to complement the set of array data types which can be passed through a connection.</li>
<li>MLibrary::cleanup()&#0160;now takes an optional &#39;exitWhenDone&#39; parameter. Setting this to false allows control to return to the caller rather than forcing the application to exit.</li>
</ul>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Gabriel Gazzan
EMAIL: gabcorreo@zoho.com
IP: 186.52.44.54
URL: 
DATE: 10/02/2012 08:37:18 PM
Is Service Pack 2 also binary incompatible, or only Extension?
Thanks.

-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.160.42
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/02/2012 10:40:39 PM
The Extension release and the Service Pack are incompatible. The Service Pack 2 applies to Maya 2013 only and does not contain the Extension API/features. However, it contains almost the same list of bugfixes.
What is important to note for future is that there might be a Service Pack 3 or another Hotfix later in the year. This Service Pack or Hotfix would be release in 2 versions - one for 2013 and  one for the 2013 Extension.
-----
COMMENT:
AUTHOR: Gabriel Gazzan
EMAIL: gabcorreo@zoho.com
IP: 186.52.34.95
URL: 
DATE: 10/04/2012 09:34:12 PM
Very clear answer. Thanks!

-----
COMMENT:
AUTHOR: Federico
EMAIL: federico3d@gmail.com
IP: 149.5.33.26
URL: 
DATE: 10/23/2012 03:31:44 AM
Can 2013.5 and 2013 be installed side by side in the same computer? 

-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 132.188.32.22
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/23/2012 08:55:53 AM
Hi Frederico

Absolutely, they can run side by side
-----
COMMENT:
AUTHOR: Federico
EMAIL: federico3d@gmail.com
IP: 149.5.33.26
URL: 
DATE: 10/23/2012 10:48:32 AM
Thanks - could you explain how can I do that? i.e., how can I install 2013.5 as a standalone and not as a patch on 2013?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 132.188.32.22
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 10/23/2012 10:52:33 AM
Hi Federico

just run the Maya Extension release installer, it will install in a different directory. Note that the Extension release is not the same as the Service Pack Release. So if you have the installer complaining, you certainly not have the Extension installer but teh Service Pack installer.
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya API thread safe?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-api-thread-safe
CATEGORY: C++
CATEGORY: Concurrent programming
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: UI
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/maya-api-thread-safe.html 
DATE: 09/19/2012 01:19:08 AM
-----
BODY:
<p>In general it is not safe to assume any Maya API is threadsafe if it is not documented as being so. There can be internal caching or state being set, meaning functions that may seem threadsafe are in fact not. An example is MFnMesh::getVertexNormal(). These normals are evaluated lazily, meaning the first call to this function may trigger a full recompute of all normals, so two calls simultaneously may have bad consequences. One clunky way around this is to do one dummy call first to ensure the data is up to date. After that parallel queries should be fine. But I would not recommend anyone to depend on that behavior as Maya implementation may change in future and that trick might not work anymore. People in Maya engineering who nicely reviewed that post for me (thx to them :), are actively working on improving Maya&#39;s performances and their work may impact how things work internally. For that reason just assume none of these API are threadsafe and instead&#0160;you should stick to what is
explicitly documented as being threadsafe.
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bd6f942970c-pi" style="display: inline;"><img alt="Thread3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bd6f942970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bd6f942970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Thread3" /></a></p>
<p>If you want to do intersection operations, note that the closest point and intersect methods on MFnMesh are not threadsafe. However MMeshIntersector is threadsafe. Intersection operations on Nurbs and Subdivs are also not threadsafe.</p>
<p>The MPoint/MVector/MMatrix/MArray classes are thread-safe only in the sense that simultaneous accesses to distinct objects are safe, and simultaneous read accesses to shared objects are safe. If multiple threads access a single object, and at least one thread may potentially write, then the user is responsible for ensuring mutual exclusion between the threads during the object accesses.</p>
<p>
In terms of APIs, it is fine to use any threading API including native threads (pthreads/win32), OpenMP, or TBB. In Maya 2008, we added a threading API. (See classes MThreadPool, MThreadAsync, MMutexLock, MSpinLock, and example plug-ins threadTestCmd, threadTestWithLocksCmd). This API is designed to mimic a native threading API like pthreads/win32 threads, so existing code using native threads can be migrated over to it. The benefit of using the Maya API is that the code is run using the existing internal Maya thread pool. These internal threads respect thread count controls in Maya (eg the threadCount command) and also handle nested threading.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774487785c970d-pi" style="display: inline;"><img alt="Tbb-2" class="asset  asset-image at-xid-6a0163057a21c8970d01774487785c970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774487785c970d-200wi" style="width: 170px; display: block; margin-left: auto; margin-right: auto;" title="Tbb-2" /></a><br />The latter point means that it is possible to invoke a threaded region from inside another threaded region without causing oversubscription, as the threads are managed by a task manager (actually it is based on Intel&#39;s Threading Building Blocks technology). You do not have to use the Maya threading API, but if you don&#39;t you should ensure that the plug-in respects the current Maya thread count. (The MEL command &quot;threadCount -q -n&quot; will return the current number of threads to be used). This ensures that if the user wants to run multiple Maya sessions at the same time in single threaded mode, eg for rendering, your plug-in will play nice and also run single threaded. In general, use TBB for parallel complex situation in your code. Your TBB code will play nicely in the Maya threading environment as Maya TBB core will manager your threads as if they were Maya’s. But, I would recommend you to be careful when using TBB for some fairly easy loops as TBB may not necessarily&#0160;give you better results than single threaded code. </p>
<p><a href="http://www.threadingbuildingblocks.org/" target="_self">Intel&#39;s TBB</a> is the recommended alternative for Maya over all multithreading options you have,&#0160;and it is used internally in Maya. There should be no problem writing plug-ins using this API, but it is best to use the same version as that being used by Maya (versions available on that <a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html" target="_self">post</a>). It supports nested threading, and also provides a variety of threadsafe containers and a thread-aware memory allocator. Any comments or suggestions welcome - we want to make it as easy as possible to write multithreaded plug-ins for Maya without forcing you into one particular API or methodology.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31c4a9f4970b-pi" style="display: inline;"><img alt="Bras-de-fer" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c31c4a9f4970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31c4a9f4970b-800wi" style="margin: 0px auto 5px; display: block;" title="Bras-de-fer" width="170px" /></a></p>
<p>We would recommend using Intel&#39;s
TBB over OpenMP for these reasons:</p>
<ol>
<li>The Intel&#39;s TBB library has a broader scope of functionality that OpenMP.</li>
<li>It&#39;s a library only implementation, so it does not depend on the compiler support &quot;special&quot; pragmas.</li>
<li>In recent Maya development, we have been using almost exclusively TBB internally (because of point 1 and 2) to multi-thread parts of Maya.&#0160;So, indirectly using Intel TBB in Maya has been empirically proven…</li>
</ol>
<p>The advantage of OpenMP is that it is often simpler to use for simple cases. For example, parallelizing a loop often amounts to adding a single pragma. But, for slightly more complex cases TBB wins (tasks, thread-safe containers, locks, etc...).</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31a85959970b-pi" style="display: inline;"><img alt="Openmp" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c31a85959970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31a85959970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Openmp" width="150px" /></a></p>
<p>Note that OpenMP is fine as well, but not recommended. It is an easy way to add data parallelism to a plug-in. Internally Maya uses the Intel OpenMP library on all platforms as we have found it delivers very good performance, but it should be ok to use the VC++ version as well. Just be sure to be consistent, i.e. do not mix compilers where OpenMP constructs are implemented in each, since an OpenMP region declared by the Intel compiler will ignore any OpenMP locks declared by the Microsoft compiler and vice versa. If using VC++ OpenMP you again need to keep the thread count in sync with Maya. With the Intel compiler this is not necessary as Maya manages it internally.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bd6ffdd970c-pi" style="display: inline;"><img alt="Thread2" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bd6ffdd970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bd6ffdd970c-250wi" style="width: 250px; display: block; margin-left: auto; margin-right: auto;" title="Thread2" /></a></p>
<p>This article has been inspired by Martin Watt&#39; whitepaper available <a href="http://images.autodesk.com/adsk/files/multithreading_plug-ins_for_maya.pdf" target="_self">here</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: STL Export plug-in for Mudbox
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: while-it-is-not-an-official-feature-of-mudbox-there-is-an-stl-stereolithographyexporter-plug-in-included-in-the-mudbox-201
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Mudbox

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/while-it-is-not-an-official-feature-of-mudbox-there-is-an-stl-stereolithographyexporter-plug-in-included-in-the-mudbox-201.html 
DATE: 09/17/2012 01:00:00 AM
-----
BODY:
<p>While it is not an official feature of Mudbox, there is an STL (stereolithography)&#0160;exporter plug-in included in the Mudbox 2013 SDK. While you can compile it from scratch, it is released pre-compiled:</p>
<p>Windows:&#0160;C:\Program Files\Autodesk\Mudbox 2013\SDK\plugins\STLExport.mp<br />MacOS: /Applications/Autodesk/Mudbox 2013/SDK/plugins/libSTLExport.dylib&#0160; </p>
<p>Just copy it to the main plug-in folder:</p>
<p>Windows: C:\Program Files\Autodesk\Mudbox 2013\plugins\STLExport.mp<br />MacOS:&#0160;$HOME/Library/Application
Support/Autodesk/Mudbox 2013/Plugins/libSTLExport.dylib<br />or /Library/Application
Support/Autodesk/Mudbox 2012/Plugins/libSTLExport.dylib</p>
<p>You will now have STL as a support file format from the “File &gt; Export Selection ...” menu item.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31b9c8be970b-pi" style="display: inline;"><img alt="Mario4" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c31b9c8be970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31b9c8be970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Mario4" /></a></p>
<p>This is a very basic exporter (really,
just sample code), which does NOT do any work to prepare a mesh properly for
use by a stereolithography machine. For a mesh to properly be printed in 3d, it
must typically meet several conditions:</p>
<ol>
<li>The
mesh must be &quot;watertight&quot; (closed, with no gaps).</li>
<li>There must not be more faces than the
3d printer can handle.</li>
</ol>
<p>Note that this does not work for non-closed meshes (such as the default head), however the bull seemed to work fine when I exported and re-imported into Maya.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya and Node Types
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-and-node-types
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/maya-and-node-types.html 
DATE: 09/12/2012 12:45:00 AM
-----
BODY:
<p>In Maya, both intrinsic and user-defined Maya Objects are registered and recognized by their type identifier or type id. The basis of the type id system is a tag which is used at run-time to determine how to create and destroy Maya Objects, and how they are to be input/output from/to files. These tag-based identifiers are implemented by the class MTypeId.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bfd0f80970c-pi" style="display: inline;"><img alt="Darkvador" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bfd0f80970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bfd0f80970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Darkvador" /></a><br />Before going into more details, we need to come back briefly on that statement &quot;type identifier or type id&quot;. A type identifier is a string and actually the node name, like for example &#39;polySphere&#39; for the polygon sphere definition. The name is used for several things:</p>
<ul>
<li>be able to create the node via a MEL command. I.e. &#0160;&#0160;createNode polySphere;</li>
<li>save/read nodes in/from Maya ASCII file</li>
<li>give the default naming for a newly created node of that type</li>
</ul>
<p>A type id is a numerical 32 bits integer which is used by Maya internal to identify a node type at runtime. The Id is used for few other things:</p>
<ul>
<li>register/unregister the node into the Maya kernel</li>
<li>save/read nodes in/from Maya binary file</li>
</ul>
<p>Being a&#0160;32 bits integer, it is unlikely we have nodes with the same IDs in a file unless you do not register the ID for your nodes. This is why you will need to register a block before shipping a file with one custom node of yours inside.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744ac5f02970d-pi" style="display: inline;"><img alt="Fingerprint" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017744ac5f02970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017744ac5f02970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Fingerprint" /></a><br />The numeric ID ranges have been divided like this. Ids in range</p>
<ul>
<li>0 - 0x0007FFFF has been reserved for&#0160;plug-ins that will forever be internal to your site. But while we reserved those for your internal usage, I would recommend having your own range just in case you share a file and a plug-in with a customer, vendor or contractor many years later.</li>
<li>0x00080000 - 0x000FFFFF has been reserved for Maya devkit samples.&#0160;If you customize one of these plug-in&#0160;examples, you should change the id to avoid future conflicts.</li>
</ul>
<p>To get a
new range assigned to you, just go on <a href="http://www.autodesk.com/developmaya">http://www.autodesk.com/developmaya</a>
and scroll to the Tool section at the bottom of the page. You&#39;ll find a link
there to self register your ID range.</p>
<p>Now how to use these IDs is where the documentation isn&#39;t always very clear. So let review the 2 options we have to build a new MTypeId. There is two&#0160;MTypeId constructors.</p>
<ol>
<li>MTypeId&#0160; (unsigned int&#0160; id)&#0160;</li>
<li>and MTypeId&#0160; (unsigned int&#0160; prefix, unsigned int&#0160; id)</li>
</ol>
<p>What is important to understand is that the second constructor does something like this:</p>
<pre class="brush: cpp; toolbar: false;">fId = id &amp; 0x000000ff;
fId |= (prefix &amp; 0xffffff) &lt;&lt; 8;</pre>
<p>All it does is to clamp only the &#39;low&#39; 24b off the first argument vs. high order, and bitwise left shift by 8 that parameter. In case you&#39;ve been assigned a range like: (I indeed chose something complicated for the sample)</p>
<p style="padding-left: 30px;">0x00072DC0 - 0x00072E3F (128 Ids)</p>
<p>It means that you cannot use the second constructor as is since the low order part is equal C0. So you need to be careful on how to use that constructor.</p>
<p>To start with the first constructor, you can either do this</p>
<pre class="brush: cpp; toolbar: false;">MTypeId tp0 (0x00072DC0);
MTypeId tp1 (0x00072DC1);
MTypeId tp2 (0x00072DC2);
...
MTypeId tpx (0x00072E3F)</pre>
<p>But you cannot use the 2nd constructor as is. I.e.</p>
<pre class="brush: cpp; toolbar: false;">MTypeId wrongtp0 (0x00072D, 0);
MTypeId wrongtp1 (0x00072D, 1);
MTypeId wrongtpx (0x00072D, 128); // or 0x80</pre>
<p>because you would define Ids like this, and your range really starts a 0xC0 only:</p>
<pre class="brush: cpp; toolbar: false;">wrongtp0 =0x00072D00
wrongtp1 =0x00072D01
wrongtpx&#0160; =0x00072D80</pre>
<p>but you can do this</p>
<pre class="brush: cpp; toolbar: false;">MTypeId tp0 (0x00072D, 0xC0);
MTypeId tp1 (0x00072D, 0xC1);
...
MTypeId tpx (0x00072D, 0xFF); // not your last Id, but the last one valid for the 0x00072D&#0160;prefix
MTypeId tpy (0x00072E, 0x00);
...
MTypeId lasttp (0x00072E, 0x3F); // this is the 128i of your range</pre>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Registration open for AU 2012
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: registration-open-for-au-2012
CATEGORY: .Net
CATEGORY: 3ds Max
CATEGORY: AU
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Films
CATEGORY: Games
CATEGORY: Maya
CATEGORY: Mudbox
CATEGORY: Travel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/registration-open-for-au-2012.html 
DATE: 09/10/2012 12:00:00 AM
-----
BODY:
<p>I registered for AU 2012, a week ago as the AU site was opened for employees for testing. It is now open for anyone to register&#0160;<a href="https://www.autodeskuniversity2012.com/portal/newreg.ww" target="_blank">to attend</a>&#0160;and receive an early bird discount of $500 (before October 15).</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31bfb82b970b-pi" style="display: inline;"><img alt="Au2012" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c31bfb82b970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31bfb82b970b-800wi" title="Au2012" /></a><br />If you’re interested in seeing what classes are scheduled for this year’s AU – which will be held from Nov 27-29 in the Mandalay Bay Hotel, Las Vegas – you can&#0160;<a href="https://www.autodeskuniversity2012.com/connect/search.ww" target="_blank">browse the class catalog online</a>. Here are the classes I’m scheduled to deliver or participate in, for instance:</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177449d54aa970d-pi" style="display: inline;"><img alt="AU-cyrille" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0177449d54aa970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177449d54aa970d-800wi" title="AU-cyrille" /></a></p>
<p>There’s more detail on the class timing &amp; description here:</p>
<a href="https://www.autodeskuniversity2012.com/connect/sessionDetail.ww?SESSION_ID=2520&amp;tclass=popup">Using .NET Programming in Autodesk® Maya®</a>
<ul>
<li>Wednesday, Nov 28, 10:00 AM - 11:30 AM</li>
</ul>
<p><strong>Kevin Vandecar</strong>, for the ADN M&amp;E team will also be presenting in this class:</p>
<a href="https://www.autodeskuniversity2012.com/connect/sessionDetail.ww?SESSION_ID=2177&amp;tclass=popup">Autodesk® 3ds Max® .NET API Introduction and Techniques</a>
<ul>
<li>Wednesday, Nov 28, 3:00 PM - 4:30 PM</li>
</ul>
<p>I&#39;ll be busy as well in assisting my other ADN colleagues in their class and round table. The AU promises to be very busy for me, but interesting too :)</p>
<p>On the Monday prior to AU starting, I’ll be running/presenting&#0160;<a href="http://au.autodesk.com/?nd=m_e_adn_conference_devlab&amp;und=1785" target="_blank">the ADN M&amp;E conference at AU</a>&#0160;for the second time. While I cannot go into much details about the morning session as we would present some confidential information, you can find the <a href="https://www.autodeskuniversity2012.com/connect/search.ww#loadSearch-searchPhrase=&amp;searchType=session&amp;tc=0&amp;sortBy=&amp;i(10010)=12461&amp;i(10000)=&amp;i(10007)=&amp;i(10041)=&amp;i(10001)=&amp;i(10160)=" target="_self">event agenda here</a> and recommend that you <strong>register to this FREE event</strong> whether you come or not to AU.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-pi" style="display: inline;"><img alt="Important" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768393cba970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-800wi" title="Important" /></a> Tips: make sure to select the <strong>&#39;Autodesk Media &amp; Entertainment ADN Conference&#39; track</strong> to see the ADN M&amp;E Devdays agenda. And again all these classes are FREE.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bedfcec970c-pi" style="display: inline;"><img alt="Las vegas" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bedfcec970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bedfcec970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Las vegas" /></a><br />See you in Las Vegas! :-)</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Coming on Autodesk Labs… “Plug-in of the Month”
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: coming-on-autodesk-labs-plug-in-of-the-month-1
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: Plugin of the Month

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/coming-on-autodesk-labs-plug-in-of-the-month-1.html 
DATE: 09/06/2012 11:00:00 PM
-----
BODY:
<p>This is less an announcement of something we’re doing than it is a call for input (or perhaps a cry for help? ;-).</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31a92646970b-pi" style="display: inline;"><img alt="Plugin-of-the-month" class="asset  asset-image at-xid-6a0163057a21c8970d017c31a92646970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c31a92646970b-250wi" style="width: 250px; display: block; margin-left: auto; margin-right: auto;" title="Plugin-of-the-month" /></a></p>
<p>For the last 3 months, we started posting plug-ins on&#0160;<a href="http://labs.autodesk.com/">Autodesk Labs</a>&#0160;containing a “plug-in of the month, brought to you by the Autodesk Developer Network”. The plug-ins we’re providing will be simple productivity enhancing tools and utilities that streamline the use of one of our products.</p>
<p>The drivers behind this are to a) solve customer problems and b) demonstrate the benefits of investing in software customization. All the plug-ins we provide – with full source code, to show what goes on inside – will have taken a relatively small amount of time to develop (from half a day up to about a week), the idea being that nothing we deliver will be especially “out-of-reach” for someone wishing to invest in learning and using our APIs.</p>
<p>We already have a few plug-ins posted for M&amp;E:</p>
<ul>
<li><a href="http://labs.blogs.com/its_alive_in_the_lab/2012/07/free-adn-plugin-of-the-month-removeprefix-for-maya.html">RemovePrefix for Maya</a></li>
<li><a href="http://around-the-corner.typepad.com/adn/2012/08/a-mathematical-dg-node.html">a Mathematical DG Node</a>&#0160;or on <a href="http://labs.blogs.com/its_alive_in_the_lab/2012/08/free-august-adn-plugin-of-the-month-math-node-for-maya.html" target="_self">labs</a></li>
<li><a href="http://labs.blogs.com/its_alive_in_the_lab/2012/09/the-motionbuilder-shelf-free-adn-plugin-of-the-month-for-september.html" target="_self">The MotionBuilder Shelf</a>&#0160;made by Kristine</li>
</ul>
<p><a href="http://around-the-corner.typepad.com/adn/2012/08/a-mathematical-dg-node.html"></a></p>
<p>To help drive this forward, I’d really like to hear from this blog’s readership:</p>
<ul>
<li>Are there annoying issues you would like to see addressed (whether in an Autodesk product or via a simple utility)?</li>
<li>Do you have your own simple utility you would like you make available as a “plug-in of the month”?</li>
</ul>
<p>Regarding the second question: we’re encouraging people outside my team to provide plug-ins through this initiative, bringing attention to their development skills (as mentioned earlier we will – as a requirement – be making the source-code available for these plug-ins). We will, of course, be giving clear credit – on the website and in the plug-in’s ReadMe – to the person who developed and provided a particular plug-in.</p>
<p>If you have a topic for a plug-in you’d like to see my team develop or you have your own you’d like to make available as a “plugin of the month” on Autodesk Labs, please&#0160;<a href="mailto:cyrille.fauvel@autodesk.com" target="_self">send me an email</a>.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Access the Qt event loop in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: access-the-qt-event-loop-in-maya
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/access-the-qt-event-loop-in-maya.html 
DATE: 09/04/2012 11:00:00 PM
-----
BODY:
<p>Maya uses a customized 
version of Nokia&#39;s Open Source Qt 4.7.1 framework (for Maya 2013). </p>
<p>If you want to use Qt 
in your Maya plug-ins then you will have to use the same modified version as 
Maya. Most of the Qt modified libs ship with the Maya distribution (located in $MAYA_LOCATION/lib). So in theory you would not need build the libraries yourself unless you need more. Then it will require that you build a local copy of Qt from the customized 
source. </p>
<p>A copy of the 
customized Qt 4.7.1 source is available from Autodesk&#39;s Open Source web-site (<a href="http://www.autodesk.com/lgplsource" target="_blank">http://www.autodesk.com/lgplsource</a>) whereas the compressed file in the Maya distribution (the compressed file in the $MAYA_LOCATION/include/Qt folder) contains header file only. The WEB version includes text files 
describing how to configure, build and install Qt for each platform supported by 
Maya.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3189af9b970b-pi" style="display: inline;"><img alt="Qt4logo" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c3189af9b970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c3189af9b970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Qt4logo" width="150" /></a></p>
<p>I would also encourage you to read <a href="http://around-the-corner.typepad.com/adn/2012/07/all-things-qt.html" target="_self">Kristine&#39;s article</a> on Qt, PyQt, and PySide before anything.</p>
<p>If you were writing 
your own Qt application from scratch, you would need to create your own 
QCoreApplication or QApplication instance to handle your application&#39;s event 
loop. When writing a Maya plug-in, you must instead use Maya&#39;s own application 
object which can be retrieved using Qt&#39;s <em>qApp</em> macro.</p>
<pre class="brush: cpp">#include &lt;QtCore/QCoreApplication&gt;
QCoreApplication *app = qApp;</pre>
<p>From there you can use the Qt installEventFilter() method to trap all Application event.</p>
<pre class="brush: cpp">void QObject::installEventFilter (QObject *filterObj)</pre>
<p>In
standalone mode, Maya does only create a basic QCoreApplication. I.e. no
GUI, that is the most that Maya will do in batch mode. But Maya will nicely use any Qt application already running, so you need to create your
own Qt appplication before initializing Maya standalone libraries and then you can access the event loop as usual.</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01761784b84f970c-pi" style="display: inline;"><img alt="Logo_faq_tiny_50_pyqt" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01761784b84f970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01761784b84f970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Logo_faq_tiny_50_pyqt" /></a></p>
<table>
<tbody>
<tr>
<td><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c318d9569970b-pi" style="display: inline;"></a>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c318d9569970b-pi" style="display: inline;"><img alt="Pyside-rounded-corners" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c318d9569970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c318d9569970b-800wi" title="Pyside-rounded-corners" width="80" /></a></td>
<td>Note on PySide - while you will need to compile the PySide libraries yourself before using it, PySide solution is not different from what was written in C++ above. Same approach / same code almost. Before you ask the question - why Autodesk does not provide the compiled PySide libraries? To keep it simple, that is because of a legal reason.</td>
</tr>
<tr>
<td><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c318d9e84970b-pi" style="display: inline;"><img alt="Pyqt" class="asset  asset-image at-xid-6a0163057a21c8970d017c318d9e84970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c318d9e84970b-100wi" style="width: 80px;" title="Pyqt" /></a><br /></td>
<td>Same for PyQt, the code would not be much different, but you will still need to compile the PyQt libraries yourself.</td>
</tr>
</tbody>
</table>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: The ADN program opens its doors
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: the-adn-program-opens-its-doors
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: DevTV

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/09/the-adn-program-opens-its-doors.html 
DATE: 09/02/2012 11:00:00 PM
-----
BODY:
<p>There is big news from the Autodesk Developer Network team: there’s a new membership tier in town, and it’s&#0160;<strong>free</strong>!</p>
<p>
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bc6931c970c-pi" style="display: inline;"><img alt="Adnopen" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017d3bc6931c970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017d3bc6931c970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Adnopen" /></a><br /><a href="http://autodesk.com/adnopen" target="_blank">ADN Open</a>&#0160;is designed for people who are interested in developing with Autodesk software, but can’t justify the expense of $1,000+ dollars per year in membership fees.</p>
<p>Over the last year or more, we’ve been investing significant resources to put in place the infrastructure to support this free tier of ADN:</p>
<ul>
<li>Publishing a significant portion of our DevNotes – which were previously only available to ADN members – via our public DevBlogs.
<ul>
<li>The only exceptions will be deprecated or confidential material (we won’t be posting beta information via our DevBlogs, for instance).</li>
</ul>
</li>
<li>Increased presence on the API discussion groups
<ul>
<li>We’re working on integrating our back-end infrastructure with the API discussion groups – so that we know when standard &amp; professional ADN members have posted questions to the forums that we should answer. We’re also making sure we spend more time in the forums to help address questions coming in from ADN Open members, too.</li>
</ul>
</li>
<li>Making sure all our training material, DevTVs, etc. are publicly accessible via our&#0160;<a href="http://usa.autodesk.com/adsk/servlet/index?siteID=123112&amp;id=5781281" target="_blank">Developer Centers</a>
<ul>
<li>Including “<a href="http://autodesk.com/myfirstplugin" target="_blank">My First Plug-In</a>” material for novice programmers.</li>
</ul>
</li>
</ul>
<p>Which all adds up to the fact that many people for whom ADN was too expensive can now get the help they need to develop applications for Autodesk software.</p>
<p>There are still situations where companies will choose to pay for either standard or professional ADN membership, though:</p>
<ul>
<li>Access to software – whether beta or released – for development purposes</li>
<li>1-on-1 support from Autodesk</li>
<li>Pre-release information about Autodesk products, including an invitation to our annual DevDays tour</li>
<li>The ability to publish company and product information on&#0160;<a href="http://partnerproductsme.autodesk.com" target="_blank">Autodesk’s Partner Products &amp; Services website</a></li>
</ul>
<p>And of course ADN Standard and Professional members will also benefit greatly from being able to use standard search engines (such as Google) to research issues without logging in to the ADN extranet.</p>
<p>Here’s a comparison of the various membership tiers, to help you determine which is right for you:</p>
<table border="1" cellpadding="1" cellspacing="0" width="477">
<tbody>
<tr>
<td valign="top" width="219">
<p><strong>&#0160;</strong></p>
</td>
<td valign="top" width="54">
<p><strong>&#0160;&#0160; Open</strong></p>
</td>
<td valign="top" width="100">
<p><strong>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; Standard</strong></p>
</td>
<td valign="top" width="102">
<p><strong>&#0160;&#0160;&#0160; Professional</strong></p>
</td>
</tr>
<tr>
<td valign="top" width="219">Discussion group support</td>
<td valign="top" width="54">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="100">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="102">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
</tr>
<tr>
<td valign="top" width="219">Access to public KB content</td>
<td valign="top" width="54">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="100">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="102">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
</tr>
<tr>
<td valign="top" width="219">Access to NDA KB content</td>
<td valign="top" width="54">&#0160;</td>
<td valign="top" width="100">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="102">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
</tr>
<tr>
<td valign="top" width="219">1-on-1 support response time</td>
<td valign="top" width="54">&#0160;</td>
<td valign="top" width="100">3 business days</td>
<td valign="top" width="102">&#0160; 1 business day</td>
</tr>
<tr>
<td valign="top" width="219">Software for development use</td>
<td valign="top" width="54">&#0160;</td>
<td valign="top" width="100">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="102">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
</tr>
<tr>
<td valign="top" width="219">Company info on&#0160;<a href="http://partnerproductsme.autodesk.com" target="_blank">partner products</a></td>
<td valign="top" width="54">&#0160;</td>
<td valign="top" width="100">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
<td valign="top" width="102">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; ●</td>
</tr>
<tr>
<td valign="top" width="219"><a href="http://usa.autodesk.com/adsk/servlet/item?siteID=123112&amp;id=19350673" target="_blank">Cost</a></td>
<td valign="top" width="54">&#0160;&#0160;&#0160;&#0160; Free</td>
<td valign="top" width="100">1,400-3,800 $/€</td>
<td valign="top" width="102">&#0160; 2,300-5,600 $/€</td>
</tr>
</tbody>
</table>
<p>If you’d like to understand more about the rationale behind this change, I recommend reading&#0160;<a href="http://adndevblog.typepad.com/autocad/2012/08/introducing-adn-open.html" target="_blank">this blog post by Stephen Preston</a>.</p>
<p>photo credit:&#0160;<a href="http://www.flickr.com/photos/seagers/1805045379/">seagers</a>&#0160;via&#0160;<a href="http://photopin.com/">photo pin</a>&#0160;<a href="http://creativecommons.org/licenses/by-nc-sa/2.0/">cc</a></p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Ian
EMAIL: ian@mainframe.co.uk
IP: 78.105.168.246
URL: 
DATE: 09/03/2012 08:58:44 AM
Is it possible to get unique MTypeIds with ADN Open?
Cheers.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 2.11.211.105
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 09/03/2012 09:15:02 AM
Sure! Actually anyone can register Maya node IDs (and should register some if they intend to share files outside their companies).

For this go to <a href="http://www.autodesk.com/developmaya">http://www.autodesk.com/developmaya</a> and go to the 'Register a Maya Developer Node ID Block' section. You'll find a link there to self-register your ID block.
-----
COMMENT:
AUTHOR: بترول الخفجي
EMAIL: jonathan.zimmer@gmail.com
IP: 84.235.73.235
URL: http://www.alkhafji.info/
DATE: 09/25/2012 07:19:53 PM
Hi there, I want to subscribe for this web site to take latest updates, so where can i do it please help out.
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.95.166
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 09/25/2012 10:43:42 PM
Need Direct Development Support and Development Software? ADN Standard and Professional Membership
ADN Standard and Professional membership include direct one on one software development support by Autodesk software engineers, and access to most Autodesk products for use in developing, testing, supporting and marketing your solutions that work with Autodesk products – as well as marketing support. Learn more about the various Membership Options of ADN. <a href="http://www.autodesk.com/joinadn">http://www.autodesk.com/joinadn</a>
-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: How I Plan a Tool…
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: how-i-plan-a-tool
CATEGORY: 3ds Max
CATEGORY: FBX
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: SoftImage

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/how-i-plan-a-tool.html 
DATE: 08/31/2012 02:08:00 AM
-----
BODY:
<p>This post isn’t super technical but more of peak into my thought process when creating tools, I think it is worth sharing and I would love to have other’s feedback if you have other thoughts that work for you.</p>
<p>I was once asked by an attendee from one of my Maya API trainings if I could share some wisdom with them about writing a tool. How do I plan my work? How do I start thinking about the way I am going to code it? They find they come across the &quot;blank canvas&quot; syndrome when starting to code plug-ins and tools.</p>
<p style="text-align: center;">&#0160; <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177442650f7970d-pi" style="display: inline;"><img alt="Blank_canvas_sm" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0177442650f7970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177442650f7970d-800wi" title="Blank_canvas_sm" /></a></p>
<p>So this is my view, Cyrille for example might have a completely different approach, which would fall under the “to each their own” category! ;) (Maybe he will share his views with you ;))</p>
<p>I am not really a professional artist or an Autodesk application super user per say, so generally I get my tool ideas from people that do fall into those categories.  You soon discover what really drives the creation of a tool is the need for the tool! If there is no need no one will likely use the tool and that’s not what we are looking for in tool creation.</p>
<p><strong>Determining the need…</strong><br />Let’s say that some functionality is missing our Autodesk product or that some functionality needs to be quicker/more efficient or a feature needs to be more accessible, and then a custom tool would be the solution to all of these problems. It’s not mandatory for you too to solve any one of these things but if you want your tool to actually get used then it’s a good idea! ;)</p>
<p>Once the need is determined from someone that would benefit from your tool, you will then need to start understanding the user’s needs.</p>
<p><strong>Understanding the user’s needs…</strong><br />The first thing you should do is to write out the tools in words, meaning your enter your tool this happens then that happens, etc. Because I can guarantee you at some point in the functionality of the tool you will make an assumption of something that is not exactly what the user needs, and let me tell you it’s way easier to change something when your planning then at that end after you have coded it.<br />For example if your tool needs a user interface, it would make sense to either drawing out the UI by hand or using a WSIWIG (What you see is what you get) tool like Qt Designer to mock up what you’re thinking then check back with the requester and see if that’s actually what they are thinking, because you would be surprised how people describe things and actually mean something completely different.</p>
<p>Back in my computer science education days, we had to even draw out a UML(Unified Modeling Language) chart of what happens when and where, I can’t say I actually do this as formally as this now, but I definitely do some chicken scratch drawing of this in some form or another, so when I start coding it is truly is easier, as all the logical thinking is already done, and I have worked through the what will “happen here” stages.</p>
<p>After I have the master plan in place and it aligns with what the users action need, I then figure out how to do it in the software application (MotionBuilder, Maya, FBX, etc.), then I can write the code for it.</p>
<p><strong>Understanding the software…</strong><br />In certain application such as Autodesk MotionBuilder, the SDK commands are really reflective of the UI usage, such as several actions in the UI is usually several Python calls. So implementing the tool can be a little more straightforward in this case, including understanding the limitation of the SDK.&#0160; However, this is not the case in all applications such as Autodesk Maya; the API architecture is very different from the UI usage so more thought would have to be put in to understanding the API for a Maya plug-in and since Maya is very powerful, there are not a lot of obvious limitations, they fall more into small workflows things that can be trickier to spot when planning.</p>
<p>The key to planning is breaking down the problem into little bits, once you realize what steps need to be done then you can find this functionality in the API of your choice class documentation which can take some time. I usually start with the name of the functionality and look for that word in the search section for the class documentation, and kind of start from there.</p>
<p>So the important thing to remember is talk to people see what they need and want, then PLAN, PLAN, PLAN by making sure you understand the problem people want you to solve because if you don’t it makes coming up with&#0160;the solution a lot more challenging :)</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Creating a New Attribute from MPlug
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: creating-new-attribute-from-mplug
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/creating-new-attribute-from-mplug.html 
DATE: 08/27/2012 02:08:00 AM
-----
BODY:
<p>Have you ever wanted to create a new attribute from the definition of an existing one, such as kTransform? However you cannot get the proper type from the attribute since MDataHanle::type() returns kInvalid:</p>
<pre class="brush: cpp; toolbar: false;">
// Create attribute for future access
MDataHandle hData =plug.asMDataHandle();

MFnTypedAttribute typedAttr;
MFnAttribute fnAttr;
fnAttr.setObject( plug.attribute() );
MString sName =fnAttr.name();
MString sShortName =fnAttr.shortName();
MFnData::Type type =hData.type();
MObject newAttr =typedAttr.create( sName, sShortName, type, MObject::kNullObj, &st );
if ( MS::kSuccess == st ) {
   // Add a dynamic attribute to procfx
   st = MFnDependencyNode( pNode-&gt;thisMObject() ).addAttribute( newAttr, MFnDependencyNode::kLocalDynamicAttr );
   if ( MS::kSuccess  != st ) {
      assert( false );
   }
}
</pre>
<p>MDataHandle will only give you information about the data currently in an attribute, not about the attribute itself. A generic attribute may accept multiple data types.</p>
<p>Along a similar vein, attributes of more complex types, such as kMesh, often don't have a default values. If such an attribute has not yet been given a value, then MDataHandle will come back empty, with a type of kInvalid.</p>
<p>So you really need to stick with MFnAttribute and its derivatives, as well as the various Maya commands for querying attributes: attributeQuery, attributeInfo and getAttr.</p>
<p>For the specific task you're trying to perform - copying an existing attribute from one node to another - the simplest approach is to use MFnAttribute::getAddAttrCmd() to get the 'addAttr' command required to recreate the source attribute, then apply that command to the target node.</p>
<p>Failing that, you can take an MObject containing the attribute to be copied, call its apiType() method and compare that against the various attribute type constants in MFn.h (kNumericAttribute, kDoubleAngleAttribute, kEnumAttribute, etc). Then load the attribute into the corresponding functionset (MFnNumericAttribute, MFnUnitAttribute, MFnEnumAttribute, etc) which will allow you query the remaining info you need to recreate the attribute on another node.</p>
<p>One place where this latter approach may get tricky is if the attribute is using a plug-in data type. MObject::apiType() will return MFn::kTypedAttribute, but I don't know of any sure-fire way of determining the MTypeId of the data type, other than going back to MFnAttribute::getAddAttrCmd() and parsing it out of the returned command string.</p>
<p>You could use MDataHandle::typeId(), but as I pointed out above you might end up getting kInvalid back if the attribute does not yet have a value. What we should really do here is add an attrTypeId() method to MFnTypedAttribute because MFnTypedAttribute has two versions of its create() method: one takes an MFnData constant and creates an attribute of the corresponding standard data type, the other takes an MTypeId and is used to create an attribute of the corresponding plugin data type...one day....</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: MFnBase class copy constructor is now private
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: mfnbase-class-copy-constructor-is-now-private
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/mfnbase-class-copy-constructor-is-now-private.html 
DATE: 08/23/2012 11:00:00 PM
-----
BODY:
<p>In Maya 2013 devkit, some changes in C++ headers were required to avoid problems in Maya internals when C++ plug-ins were using the API. This changes will require to do some code change and recompile the affected plug-ins. One of this change is the copy constructor becoming private for the MFnBase class and all its descendant classes such as MFnDepencyNode, MFnDagNode, etc... where it used to be public by default in the past. I said &#39;by default&#39; because the class definition never explicitly define the copy constructor, but instead the C++ compiler automatically generated a &#39;memory&#39; copy constructor.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e0bbc970b-pi" style="display: inline;"><img alt="MFnBase" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c316e0bbc970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e0bbc970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="MFnBase" /></a></p>
<p>Unfortunately, this is an intentional change. The copy constructor on functionsets was never meant to be public but was automatically being generated by the compiler. Use of the copy constructor on functionsets results in internal corruption within Maya (which is also why the assignment operator has always been private).
</p>
<p>The only good and safe approach is to initialize another instance of the functionset on the same object. I.e.:</p>
<pre class="brush: cpp; toolbar: false;">MFnDependencyNode anotherFnDepNode (fnDepNode.object ()) ;
</pre>
<p>If you want a functionset to be passed as a method&#39; argument, use a reference. I.e.:</p>
<pre class="brush: cpp; toolbar: false;">void myFunction (MFnDependencyNode &amp;fnDepNode) {
   ...
}
</pre>
<p>&#0160;
<a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e1a47970b-pi" style="display: inline;"><img alt="Dontdoit" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017c316e1a47970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017c316e1a47970b-800wi" title="Dontdoit" /></a></p>
<p>Don&#39;t do this, but if you are desperate for a quick solution while your code was running ok for many years, you can use that trick to recompile your plug-in. But still I would strongly recommend you to make the require code change if you do not want to be in trouble later.</p>
<p>Here is what you could do - simply edit the MFnBase.h class and put the copy constructor back to public. Then the compiler will stop complaining and you will be able to recompile without code change, but corrupt Maya internals like in the past.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Adding a Custom Cursor in MCursor in Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: adding-a-custom-cursors-in-mcursor-in-maya
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: Qt
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/adding-a-custom-cursors-in-mcursor-in-maya.html 
DATE: 08/22/2012 02:15:00 AM
-----
BODY:
<p>To create a custom cursor when using MPxContext::SetCursor, a cursor requires two XBM images: one for the mask, which defines which bits are transparent and which opaque, and one for the color, which defines which bits are white and which are black.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017617364f1a970c-pi" style="display: inline;"><img alt="Cursor" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017617364f1a970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017617364f1a970c-800wi" title="Cursor" /></a></p>
<p>If you look at an XBM image file you&#39;ll see that it&#39;s just a snippet of C code which defines macros giving the width and height of the image, and an array of unsigned char. E.g:</p>
<p>#define HtumbleCursorMask_width 16<br />#define HtumbleCursorMask_height 16<br />static unsigned char HtumbleCursorMask_bits[] = {<br />&#0160; 0xc0, 0x07, 0xe0, 0x0f, 0xf0, 0xdf, 0xf8, 0xff, 0x3c, 0xf8, 0x1e, 0xf8,<br />&#0160; 0x1e, 0xfc, 0x00, 0xfc, 0x7e, 0x00, 0x7e, 0xf0, 0x3e, 0xf0, 0x3e, 0x78,<br />&#0160; 0xfe, 0x3f, 0xf6, 0x1f, 0xe0, 0x0f, 0xc0, 0x07, };</p>
<p>So you can include the two XBM image files directly into the C++ source for your plug-in, and then pass the sizes and arrays to the MCursor constructor.</p>
<p>This will only work if the XBM image is known at compile time and doesn&#39;t change. If you want to dynamically create a cursor at runtime from an arbitrary pair of XBM files then you would have to either write some code to parse the information from the files or find a library routine to do it for you. It&#39;s probably possible to do it with the Qt&#39;s image classes (QImage, QBitmap, QPixmap) but I haven&#39;t tried it myself.</p>
<p>One suggestion I have heard is overriding an existing cursor by replacing the contents of the header files,&#0160;however this&#0160;will not work for these reasons:</p>
<p>1) The header files were only read when Maya was built, not at runTime. They&#39;re not even shipped to you.</p>
<p>2) Since the switch to Qt we no longer use those XBM files for cursors. Instead we use PNG files. There should be a constructor for MCursor which takes a PNG file, but we don&#39;t yet have that.</p>
<p>3) Even the PNG files which Maya now uses are only used when Maya is built and do not get shipped to you. Their contents are embedded into a Qt resource file. So overriding the PNGs won&#39;t work, either.</p>
<p>An example of a custom cursor is in the Devkit sample lassoTool.</p>
<p>Here is the required XBM information:</p>
<p>Files used for:<br />Cursors</p>
<p>File Format:<br />xbm</p>
<p>Requirements:<br />16x16<br />transparent background</p>
<p>Created with this application:<br />xpaint</p>
<p>Naming conventions:<br />H&lt;name&gt;Cursor.h<br />H&lt;name&gt;CursorMask.h</p>
<p>Where used:<br />Mouse pointer</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya 2013 SAP coming
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-2013-sap-coming
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: WebBlogs

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/maya-2013-sap-coming.html 
DATE: 08/20/2012 12:00:00 AM
-----
BODY:
<p>As you may have heard by now Autodesk announced <strong><a href="http://usa.autodesk.com/adsk/servlet/pc/item?siteID=123112&amp;id=15500357" target="_self">Maya 2013 Service Advantage Pack</a></strong>&#0160;at Siggraph 2012, Los Angeles. There are 3 key features in this coming release including support for DirectX 11 Shader with HLSL support, the new File Path Editor, and the Scene Assembly workflow. Features? but API too :)</p>
<p>Check-out this <a href="http://area.autodesk.com/blogs/stevenr/maya-2013-sap-scene-assembly" target="_self">link </a>for more details from Steven Roselle.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Introduction to MotionBuilder OpenReality SDK Programming DevTV Video
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: introduction-to-motionbuilder-openreality-sdk-programming-devtv-video
CATEGORY: C++
CATEGORY: DevTV
CATEGORY: Films
CATEGORY: Games
CATEGORY: Kristine Middlemiss
CATEGORY: MotionBuilder
CATEGORY: Training

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/introduction-to-motionbuilder-openreality-sdk-programming-devtv-video.html 
DATE: 08/17/2012 02:08:00 AM
-----
BODY:
<p>I have just recently completed a MotionBuilder DevTV, called “Introduction to MotionBuilder OpenReality SDK Programming”.</p>
<p>This is located on the public Autodesk MotionBuilder Developer Center page, under the title DevTV:</p>
<p><a href="http://www.autodesk.com/developmotionbuilder">http://www.autodesk.com/developmotionbuilder</a></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743fb5849970d-pi" style="display: inline;"></a> <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743fb5907970d-pi" style="display: inline;"><img alt="Dfd" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743fb5907970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743fb5907970d-800wi" title="Dfd" /></a></p>
<p>This is a quick start guide (1.5 hours), the primary goal is:</p>
<ul>
<li>How to sit down and write your first plug-in</li>
<li>Learn the general structure and capability of the SDK</li>
<li>Where to go to find out more</li>
</ul>
<p>The target audience for this DevTV material:</p>
<ul>
<li>Familiar with the MotionBuilder&#0160;product </li>
<li>Has some programming experience, but not necessarily an expert </li>
<li>Has never before seen the SDK I am presenting </li>
</ul>
<p>Enjoy!</p>
<p>Kristine<br /><br /></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Convert Maya World Coordinates to Screen Coordinates
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: convert-maya-world-coordinates-to-screen-coordinates
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/convert-maya-world-coordinates-to-screen-coordinates.html 
DATE: 08/15/2012 12:00:00 AM
-----
BODY:
<p>Usually you can use M3dView::worldToView() to convert world coordinates to screen space coordinates, however there may be situations where you need to convert them manually, for example, you want to know what the screen coordinates would be even if they are outside the viewport. In this case, you need to convert them manually, vis using the M3dView class method.</p>
<p>1. Let’s say we have the world space point “vertex_corner”, you need to multiply it by the modelView and projection matrices,</p>
<pre class="brush: cpp; toolbar: false;">MPoint corner = vertext_corner * (modelViewMatrix * projectionMatrix);
</pre>
<p>you ends up with 'corner', which is a point in homogenous coordinates</p>
<p>2. Get the size of the viewport</p>
<pre class="brush: cpp; toolbar: false;">unsigned int viewport_x, viewport_y, viewport_width, viewport_height;
maya_view.viewport(viewport_x, viewport_y, viewport_width, viewport_height);
</pre>
<p>3. In a homogenous coordinate system there is an additional coordinate, called 'w', by which all of the other coordinates have been multiplied. <a href="http://en.wikipedia.org/wiki/Homogeneous_coordinates" target="_self">Homogenous coordinates</a> which are multiples of each other all refer to the same point in space. So (-1.5, 0.6, 0.0 3.0) is the same point in space as (-0.5, 0.2, 0.0, 1.0)</p>
<p>The first thing you need to do is to divide the x and y coords by w to get them into normalized form:</p>
<pre class="brush: cpp; toolbar: false;">corner.x / corner.w;  (-1.5 / 3.0 -&gt; -0.5)
corner.y / corner.w;  ( 0.6 / 3.0 -&gt;&nbsp; 0.2)
</pre>
<p>That leaves you with a point in which x ranges from -1.0 to +1.0 across the width of the viewport, and y ranges from -1.0 to +1.0 across its height.</p>
<p>You wants values which range from (0, 0) to (viewWidth, viewHeight), so the first thing you need to do is to get rid of the negative values by offsetting the coordinates by 1.0 so that they range from 0.0 to 2.0:</p>
<pre class="brush: cpp; toolbar: false;">
corner.x/corner.w + 1.0;  (-0.5 + 1.0 -&gt; 0.5)
corner.y/corner.w + 1.0;  ( 0.2 + 1.0 -&gt; 1.2)
</pre>
<p>Then you divide them by 2 so that they range from 0.0 to 1.0:</p>
<pre class="brush: cpp; toolbar: false;">
(corner.x / corner.w + 1.0) / 2.0;  (0.5 / 2.0 -&gt; 0.25)
(corner.y / corner.w + 1.0) / 2.0;  (1.2 / 2.0 -&gt; 0.60)
</pre>
<p>Finally, you multiplies the x coord by the width and the y coord by the height to get the final pixel positions:</p>
<pre class="brush: cpp; toolbar: false;">
(viewport_width)(corner.x / corner.w + 1.0) / 2.0;  (0.25 * 1024 -&gt; 256)
(viewport_height)(corner.y / corner.w + 1.0) / 2.0; (0.60 * 768&nbsp; -&gt; 460)
</pre>
<p>The final formula is something like this:</p>
<pre class="brush: cpp; toolbar: false;">
CPoint pointWin;
pointWin.x =static_cast&lt;int&gt;(static_cast&lt;double&gt;(viewport_width) * (corner.x / corner.w + 1.0) / 2.0);
pointWin.y =static_cast&lt;int&gt;(static_cast&lt;double&gt;(viewport_height) * (corner.y / corner.w + 1.0) / 2.0);
</pre>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: What's a callback and what's its purpose?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: whats-a-callback-and-whats-its-purpose
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MotionBuilder

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/whats-a-callback-and-whats-its-purpose.html 
DATE: 08/13/2012 02:08:00 AM
-----
BODY:
<p>A callback is something you can setup to watch a specific behaviour, and when that behaviour is performed you do something special which is out of the normal behaviour or functionality of MotionBuilder (or Maya).</p>
<p>Here is my everyday English example of a callbacks :)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017616ca6b54970c-pi" style="display: inline;"><img alt="Images" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017616ca6b54970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017616ca6b54970c-800wi" title="Images" /></a><br />You assign me to watch a front door, and when people come in the door I hand them a visitor pass, without me watching the front door people would just come through the door and never get a visitors pass.</p>
<ul>
<li>Kristine = callback</li>
<li>front door = MotionBuilder</li>
<li>visitor pass = is the something special behaviour</li>
</ul>
<p>So in MotionBuilder (or Maya), let’s say I want everyone to follow a special naming convention for their scene files,&#0160;then I would set up a callback to watch anytime someone creates a new file. Then when this happens&#0160;MotionBuilder calls a function in my code to save the file with a special name.</p>
<p>A very important thing to point out is that callbacks are efficient in MotionBuilder and Maya,&#0160;so you do not need to be concerned, that they will&#0160;slow down the application even though a callback is always watching what you told it to watch.</p>
<p>Callbacks allow you to add&#0160;an personal level of customization to your production, studio or project. Since we cannot anticipate all&#0160;the different usages of callbacks we just keep it very open where you can monitor most things in MotionBuilder and Maya. But having&#0160;said this,&#0160;this also means you must set the callbacks up yourself, since the combination of things to watch and&#0160;things to do could be endless.</p>
<p>Another example is when someone changes a property, you maybe want to give them a warning…but how will you know when the user changes the property? They could do it at any time during their session usage, and you want the warning to be triggered right after they change it, not at a hard coded point of time... so here is where you want to setup a callback on property values, that will output a warning when this occurs.</p>
<p>Enjoy,</p>
<p>Kristine</p>
<p>&#0160;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Felix
EMAIL: felix.ulber@gmx.de
IP: 87.167.227.193
URL: 
DATE: 08/13/2012 04:12:30 AM
Nice, thanks. Concerning Maya, I would really like to learn more about this. Are we just talking about scriptJobs here (that's the way I allways use(d) in scripts, even in python-times), or are there some other, 'more up to date' possibilities, e.g. using python and api?
-----
COMMENT:
AUTHOR: mtmy
EMAIL: characterTD@me.com
IP: 204.15.204.161
URL: 
DATE: 08/15/2012 07:26:15 AM
Hi Kristine,

How would you register a callback on a newly created shapeNode's transform?
I want to have a callback added within a py node plugin:

def postConstructor(self):
    nodeFn = OpenMaya.MFnDependencyNode(self.thisMObject())
    nodeFn.setName("hape#" % self.typeName())

    dpath = OpenMaya.MDagPath()
       OpenMaya.MDagPath.getAPathTo(self.thisMObject(), dpath)

    dpath.transform()
    self._cbchild = OpenMaya.MDagMessage.addChildAddedDagPathCallback( dpath, self._childAdded, nodeFn )

The problem I'm having is that the transform's dag path is not recognized at this stage and the callback cannot be registered.

I cannot add the shape node's dagPath as I want to get a callback whenever a child is parented underneath the transform.

Do you have any solution to this issue?

-----
COMMENT:
AUTHOR: Kristine Middlemiss
EMAIL: kristine.middlemiss@autodesk.com
IP: 70.42.29.3
URL: 
DATE: 08/17/2012 12:11:52 PM
Hi Felix,

The concept of callbacks is somewhat general in Maya, then there is specific channels to implement them, as you mentioned ScriptJobs is definitely one way to do it, which can be accessed through MEL or Python Scripting commands.

And then another way to do it would be using the C++ or Python API, using the class MMessage and all the children classes located under it, you would choose a specific child class based on what functionality you wanted to watch and setup a call back on, you can take a look at the Maya API Docs online here for more information on MMessage and it's children classes:

<a href="http://usa.autodesk.com/adsk/servlet/item?id=16707768&siteID=123112">http://usa.autodesk.com/adsk/servlet/item?id=16707768&siteID=123112</a>

Also there is some good samples of this in the devkit that comes with Maya, 

Hope that answers your question, 

Kristine
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: cyrille.fauvel@autodesk.com
IP: 95.172.88.8
URL: 
DATE: 08/21/2012 02:28:34 AM
Hi mtmy

Adding a ChildAddedDagPathCallback is possible on DAG nodes only. If your node is not a DAG node and/or if the callback signature is not correct, the callback will not work.

I modified the rockingTransform node sample like below and I got a print on the Maya output window whenever I add a child to it. Let us know if you still experiencing an issue on your side.

Hope that helps
cyrille

def childAdded (dgchild, dgparent, clientData):
  print "Hello World!"

class rockingTransformNode(OpenMayaMPx.MPxTransform):
  def postConstructor(self): 
    thisNode = self.thisMObject()
    dagFn =OpenMaya.MFnDagNode (thisNode); 
    dpath = OpenMaya.MDagPath() 
    dagFn.getPath (dpath)
    print dpath.fullPathName()
    self._cbchild =OpenMaya.MDagMessage.addChildAddedDagPathCallback(dpath, childAdded)

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Avoid Gimbal Lock for Rotation/Direction Maya Manipulators
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: avoid-gimbal-lock-for-rotationdirection-maya-manipulators
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/avoid-gimbal-lock-for-rotationdirection-maya-manipulators.html 
DATE: 08/10/2012 12:00:00 AM
-----
BODY:
<p>In the past few weeks, my colleague Naiqi Weng had to work on an issue where someone had a Maya manipulator that contains both a rotateManip and a directionManip, which controlled one single “rotate” attribute. The manipulator was working fine excepted under some specific rotations where the directional manipulator &quot;pops&quot; the object&#39;s rotation. She noticed that when this was happening there was two axes on top of each other when looking at the rotateManip and the rotateMode was in &quot;Gimbal&quot; mode, which would mean that this was happening due to gimbal lock.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743e0b7ab970d-pi" style="display: inline;"><img alt="Gimbal" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743e0b7ab970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743e0b7ab970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Gimbal" /></a></p>
<p>Having more than one manipulators control one single attribute is not a recommended way to work with manipulators.</p>
<p>Gimbal lock is the loss of one&#0160;<a href="http://en.wikipedia.org/wiki/Degree_of_freedom_(mechanics)">degree of freedom</a>&#0160;in a three-dimensional space that occurs when the axes of two of the three&#0160;<a href="http://en.wikipedia.org/wiki/Gimbal">gimbals</a>&#0160;are driven into a parallel configuration, &quot;locking&quot; the system into&#0160;<a href="http://en.wikipedia.org/wiki/Rotation">rotation</a>&#0160;in a degenerate two-dimensional space. The only way to avoid gimbal lock is to use quaternion instead of euler to represent rotations.</p>
<p>In this specific situation, unless both rotate manip and direction manip use quaternion, the gimbal lock behavior can NOT be avoided. Quaternion can uniquely identify a rotation, but when it is converted into euler rotation, it loses one degree of freedom information. Let’s say you have rotated your object with your rotate manipulator, and you used the quaternion rotation. Now you want your direction manip to follow the rotate manipulator rotates, you convert the quaternion to euler rotation and get an angle of what the current direction manip should be, however you will never tell whether this direction manip should rotation from original direction to this angle from clock wise, or counter clock wise, because either way, you get the same end result, which is the current direction manip location.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743e0b713970d-pi" style="display: inline;"><img alt="Gimbal_locks" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743e0b713970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743e0b713970d-800wi" title="Gimbal_locks" /></a><br />Quaternion is a 4D representation which represents 3D rotation, that’s why it is sufficient to avoid any ambiguities, while euler is 3D representation and the gimbal lock ambiguity cannot be removed in this representation.&#0160;Quaternion is a data type suitable for defining object orientation and rotations. Quaternions are easier to work with than matrices and using quaternions helps to avoid gimbal lock problem like in case of Euler angles usage.&#0160;</p>
<p>Tasks like smooth interpolation between three-dimensional rotations and building rotation by vector are fairly simpler to solve with quaternions than with Euler angles or matrices. Industrial grade inertial trackers and many other orientation sensors can return rotational data in quaternion form, also to avoid gimbal lock problem, and make such values easier to filter by interpolation.</p>
<p>Unfortunately the Maya manipulator API are not exposed for quaternions yet. For now, the only workaround would be to track the rotation direction of the objects manually.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Small Annoying Things Maya Forum
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: small-annoying-things-maya-forum
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/small-annoying-things-maya-forum.html 
DATE: 08/08/2012 02:08:00 AM
-----
BODY:
<p><strong>Please help us identify things that bother you when you’re working in Maya that we can easily fix.</strong></p>
<p><a href="http://mayafeedback.autodesk.com/forums/160518-small-annoying-things-to-fix-in-maya-forum">http://mayafeedback.autodesk.com/forums/160518-small-annoying-things-to-fix-in-maya-forum</a>&#0160;</p>
<p>Suggest and vote for annoying little quirks or problems in Maya you want us to fix, and get others to vote for your ideas.<br /><br />Describe both the steps to show the issue, and how you would prefer it. Enter each idea separately (we’ll remove items with multiple ideas).<br /><br />Put larger issues in the <a href="http://mayaautodesk.uservoice.com/forums/160514-ideas-for-maya-forum">Ideas for Maya</a> forum. We’ll move issues that are not small (even if they are annoying) to this forum — if so, you’ll get your votes back.</p>
<p>There is a &quot;scripting and api&quot; category,&#0160;there you can&#0160;add your&#0160;small annoying things for the Python or C++ API :)</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: a Mathematical DG Node
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: a-mathematical-dg-node
CATEGORY: Animation
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Dynamics
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Plugin of the Month
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/a-mathematical-dg-node.html 
DATE: 08/06/2012 12:00:00 AM
-----
BODY:
<p>Many of you probably knows about the sineNode available in the Maya devkit written in C++ and/or Python. This example is very useful if you interested running the sin() function. But there is several limitations which make this example a bit dry.</p>
<p>First, it is just the sin() function and with this approach it means you would need to create as many &#39;math&#39; node you want mathematical functions.</p>
<p>Second, it has one input and one output parameter only, so it limits you in a way that you need to combine many nodes to do more complicated expression such as sum(), degree to radian, etc... before going to sin(). And may be few more after...</p>
<p>So you&#39;ll hit the wall pretty fast... <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016769054697970b-pi" style="display: inline;"><img alt="Wall_crash" class="asset  asset-image at-xid-6a0163057a21c8970d016769054697970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016769054697970b-200wi" style="width: 200px;" title="Wall_crash" /></a></p>
<p>with a big DG graph for a fairly simple operation.</p>
<p><strong>What are the solutions?</strong></p>
<p>One obvious is to use the Maya Expression system.&#0160;Maya&#39;s evaluation of Expressions depends on the contents of the expression – sometimes you have to force the evaluation - whereas, for a node, the Maya DG will always do it for you when needed. Debugging a Maya Expression is not easy either (no tools are available), and requires a knowledge of MEL. And it is pretty slow :( so I would not recommend using it everywhere.</p>
<p><img alt="Cgdna" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167690558aa970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167690558aa970b-800wi" style="color: #0000ee; display: block; margin-left: auto; margin-right: auto;" title="Cgdna" /></p>
<div>Another one is to create a series of specialized nodes (one for each possible math function you want) and design them in a way that they will do anything you want. You would write them like the sineNode() and&#0160;probably choose C++ for getting best performance. There are very useful nodes written by <strong>moto @ cgdna</strong>&#0160;available <a href="http://www.cgdna.com/web/mathematic-nodes-main" target="_self">here</a>&#0160;(implemented in C++ and using Boost). A full description is also available <a href="http://www.creativecrash.com/maya/downloads/scripts-plugins/rendering/other-renderers/c/mathematic-nodes-mentalray-support---2" target="_self">here</a>.</div>
<div>
<p>Fortunately, because they are written in C++, they are fast - Unfortunately, it means it is a library of Nodes, which needs maintenance (be recompiled for every release/platform), and they are not extensible.</p>
<p>Still a very good solution, but there is another one which makes a single node the ultimate choice, with a small performance hit. This is using Python and the fact Python can evaluation expression on the fly vs C++ which can&#39;t.</p>
<p>In this example, we will use the Python fundamentals of the best of any interpreted languages. To start we will create 3 input float attributes and 1 output float attribute. But the number of inputs and outputs could be bigger, that won&#39;t cause any problem for Python and our node. In a future version, I&#39;ll make the number of input attributes dynamic. So anyone could decide he needs 5 vs 3, and do the same for outputs. Input attributes are of type &#39;float&#39;, but in theory it could potentially be strings too since the Python interpreter would cope with that easily. That is another advantage of using Python vs C++ that we may take a look in another post. But let&#39;s keep it simple for now and use floats.</p>
<p>Here is my node attribute definition:</p>
<pre class="brush: python; toolbar: false;"># Input
exprSt =OpenMaya.MFnStringData ()
exprStCreator =exprSt.create (&quot;a&quot;)
tAttr =OpenMaya.MFnTypedAttribute ()
asdkMathNode.expression =tAttr.create (&quot;expression&quot;, &quot;expr&quot;, OpenMaya.MFnStringData.kString, exprStCreator)
tAttr.setStorable (1)
tAttr.setKeyable (False)

nAttr =OpenMaya.MFnNumericAttribute ()
asdkMathNode.aIn =nAttr.create (&quot;aIn&quot;, &quot;a&quot;, OpenMaya.MFnNumericData.kFloat, 0.0)
nAttr.setStorable (1)
asdkMathNode.bIn =nAttr.create (&quot;bIn&quot;, &quot;b&quot;, OpenMaya.MFnNumericData.kFloat, 0.0)
nAttr.setStorable (1)
asdkMathNode.cIn =nAttr.create (&quot;cIn&quot;, &quot;c&quot;, OpenMaya.MFnNumericData.kFloat, 0.0)
nAttr.setStorable (1)
	
# Output
nAttr =OpenMaya.MFnNumericAttribute ()
asdkMathNode.result =nAttr.create (&quot;result&quot;, &quot;res&quot;, OpenMaya.MFnNumericData.kFloat, 0.0)
nAttr.setStorable (1)
nAttr.setWritable (1)
	
# Setup node attributes
asdkMathNode.addAttribute (asdkMathNode.expression)
asdkMathNode.addAttribute (asdkMathNode.aIn)
asdkMathNode.addAttribute (asdkMathNode.bIn)
asdkMathNode.addAttribute (asdkMathNode.cIn)
asdkMathNode.addAttribute (asdkMathNode.result)
	
asdkMathNode.attributeAffects (asdkMathNode.expression, asdkMathNode.result)
asdkMathNode.attributeAffects (asdkMathNode.aIn, asdkMathNode.result)
asdkMathNode.attributeAffects (asdkMathNode.bIn, asdkMathNode.result)
asdkMathNode.attributeAffects (asdkMathNode.cIn, asdkMathNode.result)
</pre>
<p>In this implementation, in addition to the float attributes, we created a string attribute to handle the mathematical expression. But we will come back on this one. What is important here is to note that each numerical attributes has a default value - otherwise Python won&#39;t be happy with us later.</p>
<p>Ok nothing really new yet, but let&#39;s now talk about the 2 Python principles we are going to use. Symbols defined in the global state are always available for use in a Python expression, and Python eval() function evaluate a formatted Python expression string as if it was code written by the developer. The <em>expression&#0160;</em>argument is parsed and evaluated as a Python expression (technically speaking, a condition list) using the&#0160;<em>globals</em> and <em>locals</em> dictionaries as global and local namespace. That simply means that the string can contain any Python valid code to be executed on the fly.</p>
<p>In that case, as long out a, b , c input attributes are copied into some a, b, c Python symbols in the local or global dictionaries, eval() will just use them and parse/execute the code contained into the string. Here we go! not only can&#0160;we&#0160;use a mathematical expression, but we can use plain Python code and custom Python functions.</p>
<p>Our compute() custom node method becomes:</p>
<pre class="brush: python; toolbar: false;">def compute (self, plug, dataBlock):
	if ( plug == asdkMathNode.result ):
		exprHandle =dataBlock.inputValue (asdkMathNode.expression)
		exprStData =OpenMaya.MFnStringData (exprHandle.data ())
		exprSt =exprStData.string ()
		# This is where our Maya Node&#39; Attributes become Python Symbols
		aHandle =dataBlock.inputValue (asdkMathNode.aIn)
		a =aHandle.asFloat ()
		bHandle =dataBlock.inputValue (asdkMathNode.bIn)
		b =bHandle.asFloat ()
		cHandle =dataBlock.inputValue (asdkMathNode.cIn)
		c =cHandle.asFloat ()

		# This where the magic plays
		# We also handle the fact that the Python Expression may not be valid
		try:
 			result =eval (exprSt)
 		except:
 			sys.stderr.write (&quot;Expression %s failed&quot; % exprSt)
			raise

  		outputHandle =dataBlock.outputValue (asdkMathNode.result)
 		outputHandle.setFloat (result)
 		dataBlock.setClean (plug)
 		return
 	return OpenMaya.kUnknownParameter
</pre>
<p>As long as exprSt contains valid Python code and the expression returns a number - our node will be fully functional. Python&#39;&#0160;mathematical functions being written in C/C++, the performance hit is very minimal.</p>
<p>You can find the ready code on <a href="http://labs.autodesk.com/" target="_self"></a>my github repo <a href="https://github.com/cyrillef/MayaMathNode">here</a>, and the installer on the Autodesk AppStore <a href="https://apps.autodesk.com/MAYA/en/Detail/Index?id=212304226072872821&amp;appLang=en&amp;os=Win64&amp;autostart=true">here</a>.</p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: What do I mean by a “handle”…?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: what-do-i-mean-by-a-handle
CATEGORY: C++
CATEGORY: FBX
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: Python
CATEGORY: SoftImage

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/what-do-i-mean-by-a-handle.html 
DATE: 08/03/2012 02:08:00 AM
-----
BODY:
<p>Through my years at Autodesk/Alias, I have done a lot of teaching and education (some is recorded and some is not), but some things you might catch me saying during training are… “Now you get the handle to the object”, or “this now returns the handle to the object”, but what the heck does that really mean? I will know try to explain my colloquialism below using MotionBuilder Python SDK code as an example.</p>
<h2>A Handle in Programming Terms</h2>
<p>What I mean by a handle is what the constructor of a class returns when you create an object.</p>
<p>For example:</p>
<p><span style="color: #008000;">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; from</span> <span style="color: #0000ff;">pyfbsdk</span> <span style="color: #008000;">import</span> <span style="color: #666666;">*</span></p>
<p>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; lModel <span style="color: #666666;">=</span> FBModelCube(<span style="color: #ba2121;">&quot;Kristine&quot;</span>)</p>
<p>Here lModel is&#0160;the &quot;handle&quot; to&#0160;the FBModelCube object instance/copy. In this specific case you have your class definition of FBModelCube which would has been originally created by the MotionBuilder developers (we only let you create copies of this class, so you do not mess with the original version).</p>
<p>Once you have a &quot;handle&quot; to the object you want to have in your scene/file,&#0160;you can use the class functions and attributes on your new copy to manipulate your copy.</p>
<p>The concept &quot;handle&quot; is more of a visual naming convention than anything else, think of it like a door handle to hold onto the copy/instance of your FBModelCube object so that you can work with it.&#0160;</p>
<p>See this will still create an object:</p>
<p>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; FBModelCube(<span style="color: #ba2121;">&quot;Kristine&quot;</span>)</p>
<p>But since you didn’t assign a variable to hold the handle to your object you would not be able to access it for further manipulation.</p>
<p>But if you choose to use a function from the instance of the copy such as GetSelectedPointsCount (), like this:</p>
<p>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; pointCount = lModel.GetSelectedPointCount()</p>
<p>pointCount is not a handle to the instance, it is just an integer holding the SelectedPointCount, where lModel is the handle to the object.</p>
<p>Just to clarify, handles can only be created when you create an instance of the class in the Python Reference Guide, such as FBModelCube. The documentation called these ‘constructors’.</p>
<p>This concept is applicable to any object oriented programming language, this would fall into MotionBuilder SDK, Maya API, Mudbox SDK, FBX SDK, and Softimage SDK (and 3ds Max SDK)!</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya Fluid Shader
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-fluid-shader
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Dynamics
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/08/maya-fluid-shader.html 
DATE: 08/02/2012 01:11:50 AM
-----
BODY:
<p>Today, we will talk about the dedicated Maya fluid shader workflow. Usually people who has their own fluid shader wants to mimic the Maya one, so we review in details what one needs to do.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9f80a970d-pi" style="display: inline;"><img alt="Smoke" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743d9f80a970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9f80a970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Smoke" /></a><br /><br /></p>
<p><strong><span style="text-decoration: underline;">The general flow of the fluid shading computation is:</span></strong></p>
<ol>
<li>Compute the desired grid values for a point within the volume           
<ul>
<li>for example density or temperature</li>
<li>the value at the point is determined by the grid values interpolated using the desired interpolation method (described in the attachment )&#0160;</li>
</ul>
</li>
<li>Multiply the resulting value by the scale for that value, for example densityScale.&#0160;</li>
<li>Modulate the value based on any texturing for that attribute (for example opacity texture)&#0160;</li>
<li>Clip to result 0-1&#0160;</li>
<li>Apply the bias to the resulting value... the bias shifts the range 0-1 so that the values tend to be pushed more towards 1 or zero depending on the bias value.&#0160;</li>
<li>Use the result to look up the ramp value.</li>
</ol>
<p><strong>Find here some pseudo code which describes the overall fluids chain for shading:</strong></p>
<pre class="brush: python; toolbar: false;"># For a given point in space get the interpolated grid or
# gradient value (which grid is determined by attributes 
# such as opacityInput)
# If renderInterpolator is smooth then quadratic interpolation
# is used otherwise it linearly interpolates grid values.
# For example the opacity grid times the opacity scale value)

inputValue =interpolatedGridValue * gridValueScale

# Apply the built in noise texturing (they would need to 
# determine how to best simulate our noise methods if they 
# want to match those)
# Note that if one is getting an opacity value then the 
# texture gain would be opacityTexGain.

inputValue *=1 - textureGain + textureGain * noise_factor
# Apply the bias
if ( inputBias != 0.0 )
  if ( inputBias &lt; -0.99 )
    inputBias =-0.99 # avoid divide by zero
  float pval =(inputBias - 1) / (-inputBias - 1)
  if ( inputValue &lt; 0 )
    inputValue =0 # protect power function from negative
  inputValue =powf (inputValue, pval)
</pre>
<p><strong><span style="text-decoration: underline;">Bias computation: <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9f425970d-pi" style="display: inline;"><img alt="Bias" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743d9f425970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9f425970d-800wi" title="Bias" width="150" /></a><br /></span></strong></p>
<p>The bias is applied to the value after all the other calculations (not simply added in). It basically shifts where the center (0.5) value will be while leaving 0 and 1 the same. Generally for users it is important that their grid*scale value ends up with values between 0-1, as values outside this range simply get clipped. Then we apply the bias to the clipped 0-1 values to adjust the distribution (avoids needing ramps with all indices near 0 or 1). The setup is as follows:</p>
<pre class="brush: python; toolbar: false;">Ramp Indice =bias (textureFunction (inputGrid * gridScale))
</pre>
<p>Here is the math to apply the bias. InputVal is the grid value after scaling and texturing.</p>
<pre class="brush: python; toolbar: false;">float pval =(inputBias - 1.0) / (-inputBias - 1.0)
if ( pval &lt; 0)
  indice =0
else
  indice =powf (inputVal, pval)
</pre>
<p><strong><span style="text-decoration: underline;">The Density values remapping for rendering:</span></strong></p>
<p>The default settings map a 0-2 density range to 0-1 opacity values on the fluid (the densityScale defaults to 0.5, a value of 1 would map 1-1 density and opacity), which is then scaled by the transparency (which is a 3 channel rgb transparency).</p>
<p>(Other renderers might instead map 0-inf grid densities to 0-1 opacity)</p>
<p><strong><span style="text-decoration: underline;">Implementation of texture type:</span></strong></p>
<p>It contains perlin noise, billow, volume wave, wispy, spacetime. Except for perlin noise, how another noise types were computed?</p>
<p>Here is an overview:</p>
<p><strong>Perlin noise</strong>: standard noise, although animating time will offset the different iteration frequencies in different directions. <a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9fb0d970d-pi" style="float: right;"><img alt="Perlin_noise" class="asset  asset-image at-xid-6a0163057a21c8970d017743d9fb0d970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743d9fb0d970d-200wi" style="width: 200px; margin: 0px 0px 5px 5px;" title="Perlin_noise" /></a></p>
<p><strong>SpaceTime</strong>: perlin noise, but with a added dimension that is mapped to the time parameter (this has the time animation with the least bias)</p>
<p><strong>Wispy</strong>: perlin noise where the texture coordinates are offset by a second perlin noise. Time animation animates the offset of the different frequencies in the texture offset noise.</p>
<p><strong>Volume wave</strong>: each frequency is a cluster of sine waves along random vectors. Time offsets the input coordinate to the sin function.</p>
<p><strong>Billow</strong>: this is a grid where each grid contains a point with a radius. The point position within the grid cell is randomized and the radius randomized. The time animation involves orbiting each point about the center of the voxel.</p>
<p>Maya 2D noise texture uses the same underlying code.</p>
<p><strong><span style="text-decoration: underline;">The formula for texGain is:</span></strong>&#0160;</p>
<pre class="brush: python; toolbar: false;">val =inputgrid * gridScale
if ( gain &lt; 1 )
  val *=(1 - gain + gain * textureValue)
else
  val *=gain * textureValue
</pre>
<p><strong>If texture coordinate is fixed, the texture input P is just point of each center position of voxel in object space? How does coordinate speed affect P.&#0160;</strong>&#0160;</p>
<p>Coordinates are scaled relative to the size attribute on the fluid. I believe zero is the center of the fluid. Coordinate speed is only when the coordinates are defined as a dynamic simulating grid, in which case the simulation advection scales the grid velocity by the coordinate speed. (In terms of shaders, you simply need to export the coordinate grid and use that if it is dynamic)&#0160;</p>
<p><strong>In noise parameter: It contains ratio, threshold, depth max, frequency ratio. I have known that the meaning of these parameters, but how the frequency ratio be computed to affect ratio?</strong>&#0160;</p>
<p>The frequency ratio determines the change in space (coordinate) scaling for each iteration of the noise, while the ratio scales the magnitude of the noise each iteration.&#0160; They do not affect each other directly and in general if one lowers the frequency ratio one needs to increase the ratio (as well as max iterations) to preserve the character of the noise.</p>
<p><strong><span style="text-decoration: underline;">COMPUTING SPEED input for fluid ramps:</span></strong></p>
<p>Starting with the raw grid velocity the formula to compute the ramp lookup index:</p>
<pre class="brush: python; toolbar: false;">inputVal =1.0 - 1.0 / (1.0 + magnitude (velocity * velocityScale) * 0.1)
</pre>
<p>The inputVal then get modified by the bias function.</p>
<p><strong><span style="text-decoration: underline;">Computing EdgeDropoff:</span></strong></p>
<p>The edge dropoff affects the transparency used for the final fluid render (as opposed to the opacity input ). The dropoff can optionally be a grid.&#0160;&#0160;</p>
<p><strong>In the grid case:</strong></p>
<pre class="brush: python; toolbar: false;">falloff =interpolatedFalloffGridValue (point)
if ( edgeDropoff &gt; 0.9999 )
  opacityMult =0
else
  opacityMult =powf (falloff, edgeDropoff / (1 - edgeDropoff))
</pre>
<p><strong>in the linear gradient case(xyz axis):</strong></p>
<pre class="brush: python; toolbar: false;"># Determine a distance from the center to the boundary of the 
# dropoff shape (cube, sphere, cone) or the simple linear gradient 
# along a particular axis:
dist =gradientDistance # this is the 0-1 distance along an axis
if( edgeDropoff&#0160; &gt; 0.9999 )
  opacityMult =0
else
  opacityMult =powf (dist, edgeDropoff / (1 - edgeDropoff))
</pre>
<p><strong>in the shape case (cube, sphere, cone)</strong></p>
<pre class="brush: python; toolbar: false;">dist =distanceFromCenter (point, dropoffShape) # this is a 0-1 distance from center to boundary of shape
dist =(1 - dist) / edgeDropoff
opacityMult =float(sin ((dist - 0.5) * PI) * 0.5 + 0.5)
</pre>
<p>The cube case is a little more complex than what is described above… basically we&#0160; do the dropoff defined above( with the sin function) for each axis then the resulting density mult is the factor for each of the axis values multiplied together.</p>
<p><strong><span style="text-decoration: underline;">How the ramps are indexed:</span></strong></p>
<p>u is the interpolant between the indices, ranging between 0-1. L1 and L2 are the luminosity of the two indices being interpolated.&#0160;</p>
<p><strong>exponential up:</strong></p>
<pre class="brush: python; toolbar: false;">u =u * u
</pre>
<p><strong>exponential down:</strong></p>
<pre class="brush: python; toolbar: false;">u =1 - (1 - u * u)
</pre>
<p><strong>smooth:</strong></p>
<pre class="brush: python; toolbar: false;">u =(cos ((u + 1) * PI) + 1) * 0.5
</pre>
<p><strong>bump:</strong></p>
<pre class="brush: python; toolbar: false;">if ( l1 &gt; l2 )
  u =sin (u * PI / 2)
else
  u =sin ((u - 1) * PI / 2) + 1
</pre>
<p><strong>spike:</strong></p>
<pre class="brush: python; toolbar: false;">if ( l1 &lt; l2 )
  u =sin (u * PI / 2)
else
  u =sin ((u - 1) * PI / 2 ) + 1
</pre>
<p><strong><span style="text-decoration: underline;">How Inflection is computed:</span></strong></p>
<pre class="brush: python; toolbar: false;">if ( inflection )
  if ( nval &gt; 0 )
    nval =nval * 2 - 1
  else
    nval =-nval * 2 - 1

</pre>
<p>Where nval is noise value.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Looking at undo in regards to deleting attributes and nodes
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: looking-at-undo-in-regards-to-deleting-attributes-and-nodes
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/looking-at-undo-in-regards-to-deleting-attributes-and-nodes.html 
DATE: 07/30/2012 02:08:00 AM
-----
BODY:
<p>Today, I want to talk about the recommended way of handling the deletion of attributes and nodes within Maya through the wise guidance of Dean Edmonds (Autodesk Maya API Architect). We will examine this potential solution for this scenario:</p>
<p style="text-align: left;"><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768d4beec970b-pi" style="display: inline;"><img alt="Image" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768d4beec970b image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768d4beec970b-800wi" title="Image" /></a><br />Let’s say you have plug-in that has a connection to a user defined attributes on other objects in a scene. You may write some code that detects that if the node is deleted, then the user defined attributes on the connected objects are deleted.</p>
<p>One way to do this maybe through the passThroughToOne() method and in there you traverse the graph to the connected nodes. Then using the executeCommandOnIdle() method run the MEL command deleteAttr on the unwanted attribute, which supports undo.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743b00a30970d-pi" style="display: inline;"><img alt="Image" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017743b00a30970d image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017743b00a30970d-800wi" title="Image" /></a><br />Let’s examine some better ways, as well as looking at the downfalls. Let&#39;s define some terminology first. When I say &quot;deleteNode command&quot; I mean whatever command caused your node to be deleted. When I say &quot;deleteAttr command&quot; I mean the &#39;deleteAttr&#39; your node is trying to execute when it is deleted.</p>
<p>Potentially you could use executeCommandOnIdle(), however this would cause a problem. If you executed the deleteAttr command immediately then it should end up being included in the same undo chunk as the deleteNode command.</p>
<p>So the first question is to ask is why are you using executeCommandOnIdle() rather than just executeCommand() and see if there are other ways of addressing those problems.</p>
<p>However if you really do need to do the deleteAttr command using executeCommandOnIdle() then you can use the &#39;undoInfo -stateWithoutFlush off&#39; command to temporarily disable the undo queue just before doing the deletion, then &#39;undoInfo -stateWithoutFlush on&#39; immediately after. E.g:</p>
<p>&#0160;&#0160;&#0160; MString cmd = MString( &quot;undoInfo -swf off; deleteAttr &quot;) + attrName + &quot;; undoInfo -swf on;&quot;;<br />&#0160;&#0160;&#0160; MGlobal::executeCommandOnIdle(cmd);</p>
<p>The one thing to point out though, is you need to be very careful, that no other scene-modifying commands execute while the undo queue is off.</p>
<p>You will then need a way to restore the deleted attribute when the deleteNode command is undone. There are a couple of ways of doing that. The most flexible is probably to create an MPxCommand which does nothing in its doIt() but restores the attribute in its redoIt(). So when your node is deleted, it would do something like this:</p>
<p>&#0160;&#0160;&#0160; MString cmd = MString(&quot;myRestoreAttr &quot;) + attrName;<br />&#0160;&#0160;&#0160; MGlobal::executeCommand(cmd, false, true /* add it to the undo queue */);</p>
<p>&#0160;&#0160;&#0160; cmd = MString( &quot;undoInfo -swf off; deleteAttr &quot;) + attrName + &quot;; undoInfo -swf on;&quot;;<br />&#0160;&#0160;&#0160; MGlobal::executeCommandOnIdle(cmd);</p>
<p>When the node is deleted, &#39;myRestoreAttr&#39; command will be executed. It won&#39;t do anything but it will be added to the same undo chunk as the deleteNode command.</p>
<p>Then, during the next idle cycle, the attribute will be deleted.</p>
<p>When the deleteNode command is undone, it will undo the &#39;myRestoreAttr&#39; command, which will add the attr back onto the target node.</p>
<p>There are some potential problems with this approach:</p>
<p>1) The timing might not work out. The attribute needs to be restored before the deleteNode command attempts to reconnect your node to it. That will all depend upon how you detect the node deletion. Hopefully one of MNodeMessage::addNodeAboutToDeleteCallback() or addNodePreRemovalCallback() will do the trick.</p>
<p>2) The attribute disconnection done by the deleteNode command may use the attribute&#39;s internal pointer for the reconnection, not its name, in which case Maya will probably crash. To get around that, rather than using a &#39;deleteAttr&#39; command to delete the attribute, use another MPxCommand which uses an MDGModifier to delete it. It would share that MDGModifier with the &#39;myRestoreAttr&#39; command which could then use it to undo the attribute deletion. That way it&#39;s still the same original attribute being restored and Maya&#39;s internal pointers to it will still be valid.</p>
<p>3) There&#39;s no guarantee that the idle command will have had a chance to execute before the node deletion is undone. That means that &#39;myRestoreAttr&#39; may be called while the attribute is still there. Note that the MDGModifier solution to problem 2 above will take care of this since undoing an MDGModifier which hasn&#39;t been done yet will have no effect.</p>
<p>4) The fact that the idle command may not be called before the node deletion is undone also means that it might execute *after* the node deletion has been undone. So if you are not careful you will end up trying to delete the attribute while your node is still connected to it. How you address that depends upon how your code is set up, but it should be pretty straightforward.</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE:  3ds Max and Maya API wishlist surveys closing
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: -3ds-max-and-maya-api-wishlist-surveys-closing
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/-3ds-max-and-maya-api-wishlist-surveys-closing.html 
DATE: 07/26/2012 11:00:00 PM
-----
BODY:
<p><img alt="Last_chance" class="asset  asset-image at-xid-6a0163057a21c8970d016768cf3d6c970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768cf3d6c970b-120wi" style="margin: 0px 5px 5px 0px; float: right;" title="Last_chance" /></p>
<p>Just a friendly reminder that our&#0160;<a href="http://around-the-corner.typepad.com/adn/2012/06/api-wishlist-surveys.html" target="_blank">3ds Max and Maya API wishlist surveys</a> closing. If you want to have a&#0160;chance to influence Max and Maya API future - it is today!</p>
<ul>
<li><a href="http://www.zoomerang.com/Survey/WEB22FY5JJ4YYS" target="_blank">Autodesk Maya</a></li>
<li><a href="http://www.zoomerang.com/Survey/WEB22FY5KP4ZPD" target="_blank">Autodesk 3ds Max</a></li>
</ul>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-pi" style="display: inline;"><img alt="API Survey" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017615cde264970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Onlinesurvey" width="220" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Setting a user event within Maya
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: setting-a-user-event-within-maya
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/setting-a-user-event-within-maya.html 
DATE: 07/25/2012 02:41:00 AM
-----
BODY:
<p>I was looking through some interesting questions that have come into ADN in the past, and thought I would share this one, it was about the possibility of setting a user event with a scriptJob (Maya Command).</p>
<p>There are no MEL commands to create user events and the scriptJob command cannot be used to wait for them.</p>
<p>However, you can do both in a Python script using API calls.</p>
<p>Here&#39;s how you would register a new user event type called &#39;myEvent&#39;:</p>
<p>&#0160;&#0160;&#0160;&#0160;<span style="color: #0000ff;">import</span> maya.OpenMaya <span style="color: #0000ff;">as</span> om<br />&#0160;&#0160;&#0160; om.MUserEventMessage.registerUserEvent<span style="color: #ff0000;">(</span><span style="color: #80c0ff;">&#39;myEvent&#39;</span><span style="color: #ff0000;">)</span></p>
<p>To have a function called &#39;myFunc&#39; execute whenever the event occurs:</p>
<p>&#0160;&#0160;&#0160;&#0160;<span style="color: #0000ff;">def</span> myFunc<span style="color: #ff0000;">(</span>data<span style="color: #ff0000;">):</span><br />&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; print<span style="color: #ff0000;">(</span><span style="color: #80c0ff;">&#39;Got a myEvent event!&#39;</span><span style="color: #ff0000;">)</span></p>
<p>&#0160;&#0160;&#0160; callbackId =om.MUserEventMessage.addUserEventCallback<span style="color: #ff0000;">(</span><span style="color: #80c0ff;">&#39;myEvent&#39;</span>, myFunc<span style="color: #ff0000;">)</span></p>
<p>To send a &#39;myEvent&#39; event:</p>
<p>&#0160;&#0160;&#0160; om.MUserEventMessage.postUserEvent<span style="color: #ff0000;">(</span><span style="color: #80c0ff;">&#39;myEvent&#39;</span><span style="color: #ff0000;">)</span></p>
<p>To remove the callback function when done:</p>
<p>&#0160;&#0160; &#0160;om.MUserEventMessage.removeCallback<span style="color: #ff0000;">(</span>callbackId<span style="color: #ff0000;">)</span></p>
<p>Enjoy</p>
<p>~Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Eric Pavey
EMAIL: warpcat@gmail.com
IP: 64.111.160.30
URL: http://www.akeric.com
DATE: 07/26/2012 01:05:51 PM
Nice simple breakdown, thanks.  I've not used that type of callback yet, but now it's a lot more approachable.  Thanks :)
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Mudbox compiler versions
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: mudbox-compiler-versions
CATEGORY: C++
CATEGORY: CG
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Mudbox
CATEGORY: OpenGL
CATEGORY: Qt
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/mudbox-compiler-versions.html 
DATE: 07/23/2012 03:29:13 AM
-----
BODY:
<p>Lots of talk about Maya recently, but to reflect my post on <a href="http://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html" target="_self">compiler versions for Maya</a>, here is a list of the various OS and compiler you would need to build plug-ins on Mudbox. Note that Mudbox plug-ins are C++ only compared to Maya. But Mudbox uses <a href="http://developer.nvidia.com/object/cg_toolkit.html" target="_self">CG </a>and <a href="http://qt.nokia.com/products/" target="_self">Qt </a>a lot, so most of the time you would need to support those too. <a href="http://www.opengl.org/" target="_self">OpenGL </a>is also an option.</p>
<p>Visual Studio Express compiler is not officially supported, but less the fact you won&#39;t have the best code optimization generation, it should work.</p>
<p><br /><img alt="" border="0" src="http://area.autodesk.com/th.gen/?n/p76pw-wef6p-skniv-2q19z:780x3000.jpg" style="float: right;" width="220px" /></p>
<p>OS &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Compiler</p>
<p><strong><strong>Mudbox&#0160;</strong>2013</strong></p>
<p>Windows<br />32bit &#0160;Win7 SP1 &#0160; &#0160; &#0160; Visual Studio 2008 SP1&#0160;<br />64bit &#0160;Win7x64 SP1 &#0160;Visual Studio 2008 SP1</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL 6.0, FC14 &#0160; &#0160; &#0160; &#0160; &#0160; gcc 4.1.2</p>
<p>Mac<br />64bit&#0160;&#0160;&#0160;&#0160;SnowLeopard 10.7.x &#0160; &#0160; &#0160;Xcode3.2.1</p>
<ul>
<li>Qt 4.7.1 (included in SDK)</li>
<li>OpenGL 2.0 or later</li>
<li>CG 3.0.0015 (included in SDK)</li>
<li><a href="http://www.autodesk.com/mudbox-sdkdoc-2013-enu" target="_self">SDK Help</a></li>
</ul>
<p><strong><strong>Mudbox</strong> 2012</strong></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;XP SP3, Win7 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; Visual Studio 2008 SP1&#0160;<br />64bit&#0160;&#0160;&#0160;&#0160;XPx64 SP2, Winx64 &#0160; &#0160;Visual Studio 2008 SP1&#0160;</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL5.5, FC14 &#0160; &#0160; &#0160; &#0160; &#0160; gcc 4.1.2&#0160;</p>
<p>Mac<br />64bit&#0160;&#0160;&#0160;&#0160;Snow Leopard 10.6.5 &#0160; XCode 3.2.1</p>
<ul>
<li>Qt 4.7.1&#0160;(included in SDK)</li>
<li>OpenGL 2.0 or later</li>
<li>CG 3.0.0.7&#0160;(included in SDK)</li>
<li><a href="http://www.autodesk.com/mudbox-sdkdoc-2012-enu" target="_self">SDK Help</a></li>
</ul>
<p><img alt="Source-code-programming" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167673f53f1970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Source-code-programming" /></p>
<p>Note that for previous releases, there was no Linux version of Mudbox.</p>
<p><strong>Mudbox 2011&#0160;</strong></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;Xp SP3, Win7 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Visual Studio 2008 SP1<br />64bit&#0160;&#0160;&#0160;&#0160;Xpx64 SP2, Win7x64 &#0160; &#0160;Visual Studio 2008 SP1</p>
<p>Mac<br />64bit&#0160;&#0160;&#0160;&#0160;Leopard 10.6.2 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; XCode 3.2.1</p>
<ul>
<li>Qt 4.5.3&#0160;(included in SDK)</li>
<li>OpenGL 2.0 or later<strong><strong><br /></strong></strong></li>
<li><a href="http://www.autodesk.com/mudbox-docs-v2011-sdkguide" target="_self">SDK Help</a></li>
</ul>
<p><strong><strong>Mudbox&#0160;</strong>2010&#0160;</strong></p>
<p>Windows<br />32bit &#0160; Xp SP2 &#0160; &#0160; &#0160; &#0160; &#0160; &#0160; &#0160;Visual Studio 2008 SP1<br />64bit&#0160;&#0160;&#0160;Xp x64 SP2 &#0160; &#0160; &#0160; &#0160;Visual Studio 2008 SP1</p>
<p>Mac<br />32bit&#0160;&#0160;&#0160;&#0160;Leopard 10.5.7 &#0160; XCode 3.0</p>
<ul>
<li>Qt 4.5.2&#0160;(included in SDK)&#0160;</li>
<li>OpenGL 2.0 or later</li>
</ul>
<ul>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Using a MEL/Python Script to Load Plug-Ins
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: using-a-mel-script-to-load-plug-ins
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/using-a-mel-script-to-load-plug-ins.html 
DATE: 07/20/2012 03:05:00 AM
-----
BODY:
<p>You may come across a time where you want to tell Maya to  load/unload a plug-in during &quot;plug-in load time&quot; (i.e. while Maya is  launching) or maybe you have certain plug-ins that conflict with each other,  and you would like to have an automatic way of unloading (or &quot;not&quot; loading)  various plug-ins.</p>
<p>To go about doing this there are four options, I highly recommend option 1, as it is the most perdictable and safest.</p>
<h3>Option 1: Using Maya API</h3>
<p>Within the class MSceneMessage there are callbacks for monitoring  plug-in loading:</p>
<ol>
<li>kBeforePluginLoad</li>
<li>kAfterPluginLoad</li>
<li>kBeforePluginUnload</li>
<li>kAfterPluginUnload</li>
</ol>
<p>Whether you use the method addCallback which just allows you  to add additional functionality after one of the above actions or you use the  method addCheckCallback which allows you to abort the above actions all  together and have Maya do something different (like load another plug-in).</p>
<h3>Option 2: Modifying  userPrefs.mel</h3>
<p>Maya determines which plug-ins should be loaded or not from the userPrefs.mel  file (found in the folder: /username/maya/x.x/prefs/). The lines that do this  are at the bottom of the file. They go something like:  evalDeferred(&quot;autoLoadPlugin( ..... ); So a simple but messy solution is  to comment out the lines which load plug-ins you don&#39;t want loaded, in the  userPrefs.mel file.</p>
<h3>Option 3: Modifying initialPluginLoad.mel</h3>
<p>If the first solution is too messy and is not automated (i.e. you have to  re-edit the userPrefs.mel file each time), another possible but solution is to  edit the file: /scripts/startup/initialPluginLoad.mel and add something like  this at the end of the initialPluginLoad function: if (`exists userPluginLoad`)  eval &quot;source userPluginLoad&quot;; Then put userPluginLoad.mel somewhere  on your script path, and this script file should contain something like:</p>
<p>if (`about -batch`)<br /> {<br /> &#0160;&#0160;&#0160; catch(`loadPlugin  &quot;batchPlugin1&quot;`);<br /> &#0160;&#0160;&#0160; catch(`loadPlugin  &quot;batchPlugin2&quot;`);<br /> &#0160;&#0160;&#0160; // ...<br /> }<br /> else<br /> {<br /> &#0160;&#0160;&#0160; catch(`loadPlugin  &quot;interactivePlugin1&quot;`);<br /> &#0160;&#0160;&#0160; catch(`loadPlugin  &quot;interactivePlugin2&quot;`); <br /> &#0160;&#0160;&#0160; // ...<br /> }</p>
<p>By doing this, please note the following:</p>
<ul>
<li>This bypasses the standard autoload feature of plug-ins. If  you set a plug-in to autoload, it will be loaded before Maya gets to  userPluginLoad.mel.</li>
<li>These files normally should NOT be edited, and great caution  must be taken if you decide to proceed in doing so.</li>
<li>The userPluginLoad.mel script should just be MEL code, not a  MEL procedure. The above example assumes that sourcing the script will do all  the work. </li>
</ul>
<h3>Option 4: Modifying autoLoadPlugin.mel</h3>
<p>Plug-ins that are set to autoload are loaded by the MEL script  &quot;autoLoadPlugin.mel&quot;. This script is actually invoked directly from  C++ code or by the user&#39;s preference file, so there is no easy way that you can  avoid having this script invoked... BUT you can change what it does. If you  rewrite autoLoadPlugin.mel to simply ignore some plug-ins if Maya is in batch  mode, then you may be able to do what you want. The other alternative is to  modify the user&#39;s preferences (userPrefs.mel) to remove the offending  autoLoadPlugin command, as indicated in the first solution. This is more  complicated because you have to restore the user&#39;s preferences again, after you  are done with the batch mode. It may not be too bad, if all you&#39;ve got to do is  use the `system` MEL command to invoke OS shell command (e.g. cp, mv, etc...)  to create a &quot;backup&quot; of the original prefs to restore in the end.</p>
<p>Enjoy,</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Dirtying a Maya MPlug for Array Attribute
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: dirtying-a-maya-mplug-for-array-attribute
CATEGORY: C++
CATEGORY: Custom Nodes
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/dirtying-a-maya-mplug-for-array-attribute.html 
DATE: 07/18/2012 06:03:50 AM
-----
BODY:
<p>In Maya API, there is no way to explicitly set a plug dirty. However there is a MEL command &quot;dgdirty()&quot; to do exactly that. The MEL command takes the plug name and optionally the index if the plug is an array. I.e. &#39;dgdirty myNode.myattribute[1]&#39;. In this example you set dirty the second element of your array plug.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176168b7944970c-pi" style="display: inline;"><img alt="Node_connections" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0176168b7944970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176168b7944970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Node_connections" /></a>There is also a MEL command to determine is a plug is dirty or not - that command is simply named &quot;isDirty()&quot;. From a Python or C++ you can use the MGlobal::executeCommand() to execute the above two MEL commands, while in Python you can also use the command directly since you can now mix command and API call within the same Python script.</p>
<p>However there is an issue we need to consider - In case plugs are array plugs, you may create what we call internally “fat connection”. A “fat connection” happens when&#0160;connecting array plugs at the root level vs elements. And if the plugs are dynamic as well, there is no way of knowing how many children need to be connected until the evaluation is completed. This is a perfect scenario where &quot;fat connection&quot; are made. It is therefore impossible to dirty a single element with this type of connection because the connection doesn’t even know if that element exists, or even if that element will keep the same logical index on the next evaluation. Since the information required to connect the multi-element is only generated by an evaluation there is no way to do it automatically, ...</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177437195fe970d-pi" style="display: inline;"><img alt="Connection_broken" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0177437195fe970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177437195fe970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Connection_broken" /></a></p>
<p>... you have to do it manually (and manage any changes in the size or indexes of the element in the output array).</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01676896a18c970b-pi" style="display: inline;"><img alt="Connections" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01676896a18c970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01676896a18c970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Connections" /></a><br />Therefore, even if you explicitly call the &quot;dgdirty()&quot; command on individual element plug,&#0160;it may only dirty the root plug. Since this command sends a dirty message to a “connected” plug only, and the i&#39;th element plug has no connection itself, it will not dirty this element plug. Therefore the compute() function will not get triggered when the value of the element plug is requested.  The compute() function will only be triggered when the root plug is requested.</p>
<ol> </ol>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Kristine Middlemiss
STATUS: Publish
ALLOW COMMENTS: 0
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: kristine-middlemiss

UNIQUE URL: https://around-the-corner.typepad.com/adn/kristine-middlemiss.html 
DATE: 07/16/2012 07:28:33 AM
-----
BODY:
<p><img src="https://around-the-corner.typepad.com/adn/kristine-middlemiss.jpg" /></p>
<p>Kristine joined Alias in 2005, which was acquired by Autodesk in 2006; Kristine is currently a Senior Developer Consultant with the Autodesk Developer Network providing developer support, and education for partners and customers on the Media &amp; Entertainment API’s for Maya, MotionBuilder and FBX. She loves the flexibility of her role including the customer facing opportunities which lets her share her enthusiasm for these products with others. Kristine has an Honours, Bachelor of Computing Degree with a major in Computer Science and a minor in Fine Art from the University of Guelph (Canada) as well as a certificate in Computer Animation from Humber College (Canada).&nbsp;&nbsp;</p>
<p>She calls Toronto, Ontario her home, well really Newmarket but no one knows where that is J In her spare time Kristine loves to spend time with her family and friends, watching the latest movies and in the winter months she volunteers with the Canadian Ski Patrol promoting ski safety and providing first aid when needed.</p>
<p>Kristine can be contacted <a href="mailto:kristine.middlemiss@autodesk.com">by email</a>, but please don't expect her to provide support: if you need support for our products or APIs, please visit Autodesk's <a href="http://support.autodesk.com/">support website</a>, use our <a href="http://discussion.autodesk.com/">discussion groups</a> or post a question via your reseller or the <a href="http://adn.autodesk.com/">Autodesk Developer Network website</a>, if you're a member.</p>
<p><strong>Disclaimer</strong><br />If you need an official Autodesk company response or a contact for press-related activities please contact <a href="http://www.autodesk.com/pressroom">Autodesk Public Relations</a>.</p>
<p>The contents of this site are my own personal opinions and do not represent my employer's view in any way. In addition, my thoughts and opinions often change, and as a weblog is intended to provide a semi-permanent point-in-time snapshot you should not consider out-of-date posts to reflect my current thoughts and opinions.</p>
<p>The code provided in this blog is provided "as is" and with all faults. I (and my employer) specifically disclaim any implied warranty of merchantability or fitness for a particular use. The operation of the code provided is not warranted to be uninterrupted or error free.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: All Things Qt
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: all-things-qt
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/all-things-qt.html 
DATE: 07/16/2012 02:03:00 AM
-----
BODY:
<p>Okay, let me re-phrase that, “All Things Qt….and Maya” :)</p>
<p>In the past couple of years I have been getting more and  more interested and into Qt, why you ask? Because it’s fun to develop things  that are visual! I am what you would call a “Visual Learner” if I can see it or  picture it with my mind’s eye, and then I will understand it a lot quicker! And  reason two; there are Python wrappers for Qt!!! (Need I say more ;)…? But  seriously, they make it pretty easy to create custom UI, and who doesn’t like  easy!</p>
<p>(I am having a bit of picture envy from Cyrille’s post so I  will try to spice mine up a bit)</p>
<p>First I am going to pimp myself out, and go over my  resources that hopefully you will find helpful and education on how to tackle  Qt in Maya.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176165c3728970c-pi" style="display: inline;"><img alt="Df" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0176165c3728970c image-full" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176165c3728970c-800wi" title="Df" /></a></p>
<p>The AREA AU Masterclass home page: <a href="http://area.autodesk.com/masterclasses*">http://area.autodesk.com/masterclasses*</a>&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;</p>
<ul>
<li>To view any of the Masterclasses you will have  to sign-up for a free AREA login, so if you don’t have one you will not be able  to view the links below until you log in.</li>
</ul>
<h3><strong>Oh my… Maya is Qt ||  Masterclass</strong></h3>
<p>If you are diving into Qt in Maya, you will find there  really isn’t a lot of resources available, which was the reasoning behind this training  is called “Oh my… Maya is Qt”. This one hour video is an overview of all the  different Qt technologies/ways to work with Maya in Qt, depending on your  programming level and skills you can pick from my video what best suits you!</p>
<p><strong>Agenda</strong></p>
<ul>
<li>Introducing Qt</li>
<li>How Qt fits into Maya</li>
<li>&#0160;Ways to  work with Qt &#0160;        
<ul>
<li>Qt Designer</li>
<li>PyQt/PySide</li>
<li>Maya API</li>
<li>Qt SDK </li>
</ul>
</li>
</ul>
<p><strong>Viewing Location: </strong></p>
<ul>
<li>The AREA &gt; AU Masterclass &gt; <a href="http://area.autodesk.com/masterclasses/masterclass/class2_q4_2011">Oh my…  Maya is Qt</a></li>
<li> <span class="asset  asset-generic at-xid-6a0163057a21c8970d016768675f60970b"><a href="http://around-the-corner.typepad.com/files/sample-files.zip">Download Sample Files</a></span></li>
</ul>
<h3><strong>The Wonderful World  of PyQt, PySide and Autodesk Maya || Masterclass</strong></h3>
<p>Hot off the press! In this Masterclass I focused  specifically on PyQt and PySide and how to work with them in Maya. This one  hour video go into specifically compares the two Python Qt frameworks, and  which is the best of you, looking at the pro’s and con’s, as well as it comes  along with some real world samples.</p>
<p><strong>Agenda</strong></p>
<ul>
<li>How Qt fits into Maya</li>
<li>What is PySide and PyQt</li>
<li>How PySide and PyQt fit into Maya</li>
<li>Why use PyQt/PySide in Maya</li>
<li>PyQt vs. PySide</li>
<li>Working with PyQt</li>
<li>Working with PySide</li>
<li>Resources</li>
</ul>
<p><strong>Viewing Location: </strong></p>
<ul>
<li>The AREA &gt; AU Masterclass &gt; <a href="http://area.autodesk.com/masterclasses/masterclass/class2_q2_2012_kristine_middlemiss">The  Wonderful World of PyQt, PySide and Autodesk Maya</a></li>
<li> <span class="asset  asset-generic at-xid-6a0163057a21c8970d017743425014970d"><a href="http://around-the-corner.typepad.com/files/maya_pyqt_pyside_samples_kmiddlemiss.zip">Download Sample Files</a></span></li>
</ul>
<h3><strong>Advanced Graphical  User Interfaces with Qt || Book Chapter</strong></h3>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176165c4344970c-pi" style="display: inline;"><img alt="Xd" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0176165c4344970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176165c4344970c-800wi" title="Xd" /></a><br /><strong></strong><br /> I got the unique opportunity to participate and write a  chapter for the newest Maya API text book, called <strong>Maya Python for Games and  Film: A Complete Reference for Maya Python and the Maya Python API</strong> , my chapter was chapter 8 <strong>Advanced Graphical User Interfaces with Qt. </strong>I was approached by the author Adam,(our paths had crossed, a few years  back, in a training course), this was a great experience and I definitely learned  a lot about publishing, especially how much work it is, so kudos to all authors  and editors.</p>
<ul>
<li>Adam Mechtley and Ryan Trowbridge. <strong>Maya  Python for Games and Film: A Complete Reference for Maya Python and the Maya  Python API</strong>. Morgan Kaufmann, 2011. ISBN-10: 0123785782 </li>
<li><a href="http://www.maya-python.com/">Companion  Site</a></li>
</ul>
<p>Enjoy,</p>
<p>Kristine</p>
<ul>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Happy Bastille Day!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: happy-bastille-day
CATEGORY: Cyrille Fauvel
CATEGORY: Personal

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/happy-bastille-day.html 
DATE: 07/13/2012 11:00:00 PM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314c1e3970d-pi" style="display: inline;"><img alt="Bastille-day-flag" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01774314c1e3970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314c1e3970d-800wi" style="display: block; margin-left: auto; margin-right: auto; width: 260px;" title="Bastille-day-flag" /></a></p>
<p>With Kristine we found interesting that Canadian, Americans, and French have all their national day early July. I know different reasons, but still...</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314db88970d-pi" style="display: inline;"><img alt="Bastille-day" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01774314db88970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314db88970d-800wi" style="float: right;" title="Bastille-day" /></a><br />&#39;Bastille Day&#39; is the name given in English-speaking countries to the French National Day, which is celebrated on the 14th of July each year. In France, it is formally called &#39;La Fête Nationale&#39; (The National Celebration) and commonly le quatorze juillet (the fourteenth of July). It commemorates the the anniversary of the storming of the Bastille on 14 July 1789; the anniversary of the storming of the Bastille fortress-prison was seen as a symbol of the uprising of the modern nation, and of the reconciliation of all the French inside the constitutional monarchy which preceded the First Republic, during the French Revolution.</p>
<p>That&#39;s what history says... The truth is that there was only 2 or 3 murderers/thieves in that prison at that time, but the Bastille was also the main armory inside the city and the true reason why it falls.</p>
<p>Festivities and official ceremonies are held all over France and usually starts on July 13th which is a Friday this year which is why I am not working today ;)</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314e3b1970d-pi" style="display: inline;"><img alt="Friday13" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01774314e3b1970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01774314e3b1970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Friday13" /></a><br />That reminds me now that USA defeated Bristish with the help of French and the French Navy at Yorktown in 1781 - only 8 years before the French revolution.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Maya Programming: The Beginning
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-programming-the-beginning
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/maya-programming-the-beginning.html 
DATE: 07/11/2012 01:18:37 PM
-----
BODY:
<p>…Computer Programming…. Does that sound scary and yet inviting all at the same time?</p>
<p>Are you ever curious to dive into programming and Maya? Are you a power user of Maya, or maybe interested in customizing or automating work flows? Are looking to take your work to the next level and challenge yourself, but not sure where to start… Here I will provide you with some places to start so you can get familiar with scripting so that you are more comfortable and less overwhelmed.</p>
<p>&quot;Maya User, I would like to introduce you to the Script Editor&quot;, it is found here in the UI, with a default install it is placed at the bottom-right of the Maya application:</p>
<p><img alt="ScriptEditorLocation" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0133f0d2ab37970b-800wi" /></p>
<p>When you click on the Script Editor you see this UI pop-up:</p>
<p><img alt="ScriptEditor" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0134841cb9c2970c-800wi" /></p>
<p>The Script Editor has numerous features and functionality, the documentation covers what each button does, so look into the help documentation for more information if you are curious to know this UI (User Interface)&#0160;inside and out.</p>
<p>We like to think of the Script Editor as having two halves, top half (Command History) and bottom half (Command Editor). The key now it making these two halves work for you, to help you learn how to script.</p>
<p><strong>Step One: Monitoring the Command History.</strong></p>
<p>Something that Maya does that is pretty special is for&#0160;almost all actions that you perform in the UI; Maya outputs the equivalent MEL command into the Command History pane of the Script Editor. Super Cool!!</p>
<p>In addition the&#0160;Command History pane, displays any feedback such as results, warnings, or errors returned by Maya, which can be helpful not only when learning scripting!</p>
<p>So in other words, for every work flow in the UI, it tells you the MEL solution.&#0160;In time, you&#0160;will figure out how&#0160;we get from Point A (Maya Action)&#0160;to Point B (MEL Command for the Maya Action), knowing where you are going is half the battle, doing it on your own is the other half the battle.</p>
<p>If you don’t see the MEL Commands executed you need to make sure you have not suppressed them and that the History Output is selected for both MEL and Python.</p>
<p><img alt="6-14-2010 10-35-41 AM" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0134841cc20b970c-800wi" /></p>
<p><strong>Step Two: Piecing together code in the Command Editor.</strong></p>
<p>This is where the famous copy and paste comes in handy, copy from the top panel and paste in the bottom panel to piece together your custom automation work flow.</p>
<p>However this is the part where you need to be curious, and what I am mean by curious is that you&#0160;have to want to look up all the parts of the command so that you can start to learn what commands do what and what the flag and flag parameter syntax is about. This is the fundamental structure of scripting, so it’s important to understand it. To look up the different commands you can find these in the Help Documentation, hot-key F1.</p>
<p>No one is expecting you to memorize anything, you don&#39;t need to pull out of your head&#0160;a MEL command at the drop of a hat, that&#39;s what command docs are for, there over 600 Maya commands so don&#39;t stress about learning them, the key is learning how to use the documentation efficiently.</p>
<p>Once you get more comfortable with using Maya Commands and the syntax you can start diving into programming basics such as data types, variables, for loops, etc. With these programming structures you can create scripts that are what we like to call more intelligent, because they can do different things based on what is happening in the scene. But we will leave that for another day.</p>
<p><strong>Step Three: Saving your beautiful scripts for Later.</strong></p>
<p>Once you have put together a script, you can drag it into the shelf inside the Maya UI to save it for later and re-use it over and over. To complete this highlight your new script:</p>
<p><img alt="6-14-2010 11-13-08 AM" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0133f0f28414970b-800wi" /></p>
<p>Press the &#39;Alt&#39; key while dragging your highlighted script into the Shelf tab of your choice, you are then prompted with whether the code is MEL or Python:</p>
<p><img alt="6-14-2010 11-07-22 AM" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0133f0f28d19970b-800wi" /></p>
<p>The final result now is your code in the Shelf; press the new button to execute it:</p>
<p><img alt="6-14-2010 11-15-26 AM" border="0" src="https://mayastation.typepad.com/.a/6a01156fc44c77970b0133f0f29629970b-800wi" /></p>
<p><strong>Real World Example: Applying Step One through Three.</strong></p>
<p>An example of a real life work flow could be to set up a scene the way you want it every time, so all you have to do when you come into Maya is click one button to get&#0160;all the default things you want in your scene&#0160;setup.<span style="color: black; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;;"> </span></p>
<p><span style="color: black; mso-fareast-font-family: &#39;Times New Roman&#39;; mso-bidi-font-family: &#39;Courier New&#39;;">If we want to ensure nothing is in the scene, let’s do a file new, and we see this line in the Script Editor, let’s copy it ‘file -f -new;’, transpose it into Python, we need to make sure we import the maya.cmds module:</span></p>
<p>import maya.cmds as cmds</p>
<p>cmds.file(f=True, new=True)</p>
<p>Now we want to create two spheres, so we copy those MEL commands and transpose them into Python:</p>
<p>cmds.polySphere (ch=True, o=True, r=27.080953)</p>
<p>cmds.polySphere (ch=True, o=True, r=5.580194)</p>
<p>&#0160;</p>
<p>Full Script:</p>
<p>&#0160;</p>
<p>import maya.cmds as cmds</p>
<p>cmds.file(f=True, new=True)</p>
<p>cmds.polySphere (ch=True, o=True, r=27.080953)</p>
<p>cmds.polySphere (ch=True, o=True, r=5.580194)</p>
<p>I realize this sample is somewhat easy, but starting to script can be this easy, just remember be curious always look up flags, for example, what is the flag &#39;ch on the command PolySphere, what type of value does it take, etc.</p>
<p>Enjoy</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Distributing files on Maya -  Maya modules
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: distributing-files-on-maya-maya-modules
CATEGORY: Cyrille Fauvel
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/distributing-files-on-maya-maya-modules.html 
DATE: 07/09/2012 01:00:00 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768395890970b-pi" style="display: inline;"><img alt="Installer" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768395890970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768395890970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Installer" /></a></p>
<p>How many of you struggle with installers and making Maya work with your content files which you may have to support multiple release, language, and platform? I know it is a hard work, and never easy...&#0160;While working on a project for the next major Maya release, I had to make some research and chose on the technology to use for redistributing applications and contents for Maya. One nice feature in Maya is the support for ‘modules’ – see the API Guide topic <a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/GUID-9E096E39-AD0D-4E40-9B2A-9127A2CAD54B.htm" target="_self">here</a>.</p>
<p>Modules are in fact a replicate of the Maya directory structure, where you put your application or content/asset files. That is a very nice approach to isolate ‘your’ files vs Maya files. So in case you apply a Maya hotfix or service pack, your application(s) will remain untouched, and that will also help you to maintain your files. Maya will work with your isolated files as if they were in the Maya directory structure.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167683959a6970b-pi" style="display: inline;"><img alt="Installer" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167683959a6970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167683959a6970b-800wi" style="float: right;" title="Installer" /></a></p>
<p>The only thing you need to do is to create a text file (.txt or .mod) and put it somewhere in the Maya’ MAYA_MODULE_PATH search path. I would recommend to install the module file including the path of the plug-in into &quot;[CommonFileFolder]Alias Shared\Modules\Maya\[&lt;version_number&gt;]&quot; directory for Windows <span style="color: #737373;">(/Users/Shared/Autodesk/maya/[&lt;version_number&gt;] for MacOS, and /usr/autodesk/modules/maya/[&lt;version_number&gt;-x64] for Linux)</span>, where  is the version number of Maya which your plug-in supports. Maya uses the module file to locate and load the plug-in. But the  is optional since you can specify that ‘condition’ in your module file itself. It is really your choice whether you want to distribute for 1 single version of Maya, or multiple.</p>
<p>The file can contain multiple ‘module’ definition and is very open to describe what it is.<br />A very simple syntax:</p>
<p style="padding-left: 30px;"><span style="color: #737373;">+ [Conditions] ModuleName ModuleVersion ModulePath</span></p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-pi" style="display: inline;"><img alt="Important" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d016768393cba970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016768393cba970b-800wi" title="Important" /></a>&#0160;A relative path here is relative to the location of the module definition file itself.</p>
<p>Let’s ignore the optional conditions for now, and note that the only real important thing is the definition of the module’ path. In this Module Path, you will replicate the Maya directory structure, and put your files where Maya would expect to find them. For example put MEL scripts into the ‘scripts’ folder, xpm files into the ‘icon’ folder, etc…<br /> The module name and version are important to be unique, so Maya can handle module smoothly and gives you information about modules loaded. See this 1 line definition example:</p>
<p style="padding-left: 30px;"><span style="color: #737373;">+ CyrilleModule 1.0.0.1 C:\Program Files\Cyrille Software\MyApp</span></p>
<p>Conditions is a way to tell Maya whether when a module should be loaded for a specific instance of Maya.<br />See this example:</p>
<p style="padding-left: 30px;"><span style="color: #737373;">+ PLATFORM:win32 CyrilleModule 1.0.0.1 C:\Users\Cyrille\MyApp</span><br /><span style="color: #737373;"> + PLATFORM:win64 CyrilleModule 1.0.0.1 C:\Users\Cyrille\MyApp</span><br /><span style="color: #737373;">+ PLATFORM:mac CyrilleModule 1.0.0.1 /Users/Cyrille/MyApp</span></p>
<p>Here using the same ‘directory’ structure, I do tell Maya to load my module from a specific location depending we’re running on a Mac or Windows. And since there is no definition for Linux, Maya will not load that module on a Linux Platform even if the files are installed on my Linux box. From there I would create a Maya like directory structure for my application (or content) regardless of my target architecture(s). You can create loading conditions based on PLATFORM (win32/win64/mac/linux), LOCALE (en_US/js_JP/zh_CN), and the Maya version MAYAVERSION.</p>
<p>There is one last thing important about modules which will make the use of modules the ultimate choice for redistributing applications/contents on Maya. A module definition file can also alterate System Variables at load time and with preprocessor symbols expansion. For example, you could write something like this:</p>
<p style="padding-left: 30px;"><span style="color: #737373;">+ CyrilleModule 1.0.0.1 C:\Users\Cyrille\MyApp</span><br /><span style="color: #737373;"> PATH+:=bin</span><br /><span style="color: #737373;"> PATH+=C:\Program Files\Autodesk\FBX\FBXConverter\2013.1\bin</span><br /><span style="color: #737373;"> MAYA_PLUG_IN_RESOURCE_PATH+:=resources/${FPPUILang}</span></p>
<p>and that would tell Maya to update the OS search path to add my module ‘bin’ folder to the PATH variable (relative to the module path, I.e. +:=) whereas the absolute path will jsut be added (I.e. +=) and to modify the MAYA_PLUG_IN_RESOURCE_PATH as well. Again these are controlled by the ‘Conditions’, so you get the real power to control how Maya should be setup to work with your module.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176162e6b53970c-pi" style="display: inline;"><img alt="Important" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0176162e6b53970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176162e6b53970c-800wi" title="Important" /></a>&#0160;A relative path here is relative to the module location. Here the PATH ‘bin’ modification, becomes ‘C:\Users\Cyrille\MyApp\bin’. This is because of the relative notation using the character &#39;:&#39;</p>
<p>= is single variable assignment<br />+= is to append to an existing variable<br />:= is single variable assignment, but for a path relative to the module location<br />+:= is to append a path relative to the module location to an existing variable</p>
<p>However, this is not a perfect solution. There is 2 things modules won’t address automatically:</p>
<ol>
<li>One common issue on any platform is the binary dependency search path. Modules won’t solve that issue for you, you will still need to make sure libraries/dll can be found by the OS as Maya will not solve that for you.</li>
<li>The second limitation is related to Mentalray Shaders. Shader definition files (those ending in .mi) must go into either Maya&#39;s own mentalray/include directory or one of the directories in the user&#39;s MI_CUSTOM_SHADER_PATH environment variable. Shader libraries (those ending in .so or .dll) must go into Maya&#39;s own mentalray/lib directory, or one of the directories in the user&#39;s MI_CUSTOM_SHADER_PATH environment variable, or one of the directories in the user&#39;s MI_LIBRARY_PATH environment variable.</li>
</ol>
<p>Note that on both limitations there is a ‘module’ approach solution, but you will need to had some definition yourself as explained above with the system variable modification syntax.</p>
<p>Another issue is that it is very common to use a userSetup.mel (.py) script to do some initialization, but Maya will load only one userSetup.mel, and the first one found in its script search path. That means any setup scripts in modules might be ignored by Maya if the user defines its own setup script, or if another module is first in the search order and have a userSetup.mel file present. Something to remember... a workaround is to use the module &#39;/scripts/startup&#39; folder and have your initialization code posted there, or use a userSetup.py file instead. There is other workarounds, but too complicated compare to this one.</p>
<p>Based on this, if you need to write an installer for the 3 platforms, it becomes as easy as unzipping a file on the system and copy a .mod file.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Dave
EMAIL: floppydj@gmail.com
IP: 122.105.118.128
URL: 
DATE: 07/09/2012 04:21:46 PM
Hi,

I have been using the module system for a few years now as well!

Are the platform, version and path modifications things you mention in here only new, ie only available in 2013?
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.33.152
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 07/10/2012 01:20:37 AM
Hi Dave,

yes, this is correct - Conditions are available starting the 2013 release. I should have mention it in my post.

Thx for the catch.
-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Top 10 Autodesk Maya Python API Gotchas When Getting Started
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: top-10-autodesk-maya-python-api-gotchas-when-getting-started
CATEGORY: Autodesk
CATEGORY: Kristine Middlemiss
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/top-10-autodesk-maya-python-api-gotchas-when-getting-started.html 
DATE: 07/05/2012 11:14:00 PM
-----
BODY:
<ol start="10">
  <li><strong>Not Understanding the Difference between Python Script and  Python API</strong> <br />
  Maya  has four programming interfaces, two of which are using the  Python language. It&rsquo;s important to know the distinction between the terminology  of Python Script and the Python API, because they each access different  functionality within Maya (with very little overlap). The other two interfaces are  Maya Embedded Language (MEL) and the C++ API. </li>
</ol>
<ol start="9">
  <li><strong>Python Plug-in  Disclosure </strong><br />
    You cannot hide your Python API code  from users! If you&rsquo;re a games developer looking to create Python plug-ins  in-house and not worried about protecting your code, then feel free to code  away. But it you want to protect, or commercialize and sell your hard work, you  should consider using C++ to create your plug-ins.</li>
</ol>
<ol start="8">
  <li><strong>Must use Autodesk  Specific Version of Qt for Building PyQt</strong><br />
  Building PyQt to work with Maya  is a three step process. First you need to compile Qt using the Autodesk's  Modified Qt Source Code (new for 2012) that is located on the Autodesk.com  site. Then you need to compile SIP (generates Python bindings for C++) against  your built Qt libraries. Last, you need to compile PyQt against your built SIP  libraries. Check the website for the correct versions or you could have some  difficulties down the road in your tools.</li>
</ol>
<ol start="7">
  <li><strong>Awareness of Potential  Python API Performance Penalties</strong><br />
  In certain situations when  computation involves complex or many API calls, the Python API may take a  performance penalty compared to the C++ API. This is because the Python API  sits on top of the C++ API. This results in an extra level of conversion  through C++ and as well as Python is an interpreted language which is slower by  nature. For example if you are thinking of doing a Python API shader, C++ will  be the better choice, but for most other tasks Python is perfect!</li>
</ol>
<ol start="6">
  <li><strong>Working with Multiple Versions of Maya Equals Multiple Versions  of Python</strong><br />
  If you are working on multiple  versions of Maya, then you need to keep in mind that you will need to have multiple  version of Python. Also if you are using PyQt, multiple versions of PyQt will  need to be installed on your computer. As nice as it would be to use the same  version of Python and PyQt for every version of Maya, it&rsquo;s just not realistic  as things are always improving in the Python and PyQt releases. Keep yourself  educated in the Maya documentation for the versions that are used in each major  release, and on which platform.</li>
</ol>
<ol start="5">
  <li><strong>Your Python API Code  is not Working, and you cannot find the Problem </strong><br />
  When working with the Python  API, like all humans, you will have errors or code you want to debug; but how  the heck do you debug it? Unfortunately, there are no out-of-the-box tools in  Maya, but there are some good solutions available. Cyrille Fauvel from Autodesk  has integrated a Maya Python debugger into the Eclipse IDE. The details are  available on Autodesk.com, at the Maya Developer Center page. Dean Edmonds also  from Autodesk has integrated the PDB debugger into the Script Editor within  Maya by overriding the stdin and stout functions. Also, if you Google &ldquo;Python  in Maya&rdquo; group you will see other solutions.</li>
</ol>
<ol start="4">
  <li><strong>Knowing when and how  to Use MScriptUtil Class</strong><br />
  Many of the API methods in Maya  require that one or more of their parameters be passed as pointers or  references (return values can be pointers or references as well). Because  Python does not have the concept of references or pointers, you will need the  utility class called MScriptUtil for working with those pointers and references  in Python. MScriptUtil bridges this gap between Python and its underlying C++  API. When you see the characters * or &amp; in the documentation for simple  data types like integers and floats, think MScriptUtil!</li>
</ol>
<ol start="3">
  <li><strong>The Reference  Documentation is written for C++, but you are Using Python</strong><br />
  If you do not know C++, at  first glance the reference documentation will be very confusing!&nbsp; But don&rsquo;t worry; just put your eye blinders  on to certain things when reading it. Because Python is a more simplified  language than C++ (but none the less powerful), there are certain components in  the documentation you can ignore. For example the class MString and  MStringArray are not available in Python and instead you will work with strings  as they are in native Python. Another example is that there is no MStatus class  in Python and instead you will use standard Python error checking (try, except,  catch). Try to think of this as having a mini translator going on in your  brain, you see MStatus, so you just ignore it!
  </li>
  </ol>
<ol start="2">
  <li><strong>Trying to live in  a Bubble and Teach Yourself Everything </strong><br />
    There is no possible way to memorize  or learn every single Maya API class, so don&rsquo;t be shy to use the resources  available. As they say &ldquo;Be Resourceful&rdquo; and learn from others successes,  mistakes and questions. Maya has been around for over ten years, and there is  lots of API information out there (www.autodesk.com/developmaya). Also, you can  check out the new book &ldquo;Maya Python for Games and Film: A Complete Reference  for Maya Python and the Maya Python API&rdquo; by Adam Mechtley and Ryan Trowbridge.</li>
</ol>
<ol start="1">
  <li><strong>Not Fully  Grasping the Maya Architecture and How the Python API Leverages It</strong><br />
  If you don&rsquo;t completely understanding  the Maya architecture, command engine and the Dependency Graph, you will run  into trouble as your tools get more complex. Take the time to learn these  components as they are very different than any other animation product. Because  of this complexity, it makes Maya more flexible and powerful than any other  product. Check out the free Maya Python API webcast recording located here (www.autodesk.com/developmaya)</li>
</ol>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya MMeshIntersector and memory
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-mmeshintersector-and-memory
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Geometry
CATEGORY: Maya
CATEGORY: Modeling
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/maya-mmeshintersector-and-memory.html 
DATE: 07/04/2012 01:19:00 AM
-----
BODY:
<p>Before anything &#39;<strong>Happy 4th of July</strong>&#39; to our american readers!</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615dfa961970c-pi" style="display: inline;"><img alt="Usa flag" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017615dfa961970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615dfa961970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Usa flag" /></a><br />In the documentation of MMeshIntersector::create(MObject &amp;meshObject, const MMatrix &amp;matrix), it says &quot;This method creates the data required by the intersector. It is a heavy operation that should be called only when necessary.&quot;</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b10cea970d-pi" style="display: inline;"><img alt="Tg_tut11_3" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017742b10cea970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b10cea970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Tg_tut11_3" width="200" /></a><br />Internally, that class will tessellate the mesh, if it hasn&#39;t already been, and will build an octree for its triangles, which is going to be at least as heavy as the mesh itself and probably heavier.</p>
<p>However there are three ways for doing mesh intersection&#0160;in Maya:</p>
<ul>
<li>First, MFnMesh::intersect() which is not threaded and very slow. But it has no memory overhead.</li>
<li>Second, MFnMesh:closestIntersection() which uses grid-based intersection and is super-fast with very little memory overhead. Not threaded either, but fast.</li>
<li>Third, MMeshIntersector which is fast but uses an octree which consumes memory. Its main advantage is that its fully threaded.</li>
</ul>
<p>From one of my colleague experience, the grid-based intersection works well, but it really depends on how often you plan to do an intersection test on the same object, how many polygons the object has, and whether you can take advantage of multi-threading.</p>
<p>If you want to limit memory overhead, I think the grid-based approach will be very svelte in terms of usage. I know that the octree can get big on larger geometries.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Are you looking to rewrite some of our Maya default scripts?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: are-you-looking-to-rewrite-some-of-our-maya-default-scripts
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python
CATEGORY: UI

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/07/are-you-looking-to-rewrite-some-of-our-maya-default-scripts.html 
DATE: 07/01/2012 05:25:00 PM
-----
BODY:
<p style="text-align: center;">First things first Happy Canada Day to all my fellow Canadians :)</p>
<p><a href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742cd132a970d-pi" style="display: inline;"><img alt="Images" border="0" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742cd132a970d-800wi" style="margin-right: auto; margin-left: auto; display: block;" title="Images" /></a></p>
<p>Are you looking to rewrite some of our Maya default scripts? In your environment, likely you will get to the point where you want to customize some of the MEL scripts that either builds the Maya UI or that create the functionality in Maya. To do this it means you will have to rewrite/change some of Maya’s default scripts.</p>
<h2>Rewrite/Change a MEL script</h2>
<p>Let’s examine all the ways to rewrite/change a MEL script with the help of Dean Edmonds our API Architect:</p>
<h3>Option 1: Use the &#39;callbacks&#39; command</h3>
<blockquote>
<p><strong><em>PROS:</em></strong> Least intrusive.Easy to implement. Least chance of hidden surprises. Doesn&#39;t interfere with other plugi-ns&#39; overrides. Can be done and undone dynamically (e.g. when plugin loads and unloads).<br /> <br /> <strong><em>CONS: </em></strong>Will only work if the &#39;callbacks&#39; command happens to provide the override that you&#39;re looking for.</p>
</blockquote>
<h3>Option 2: Place your own version of the script in a directory which appears earlier in MAYA_SCRIPT_PATH than Maya&#39;s version</h3>
<blockquote>
<p><em><strong>PROS:</strong></em> Easy to implement. Few surprises. Can be done and undone dynamically with a bit of extra work. Works well in a small shop.</p>
<p><em><strong>CONS:</strong></em> Can interfere with other plugins&#39; overrides of the same script. Can be difficult to manage as a 3rd-party plugin or in a large shop where you don&#39;t have control over paths.</p>
</blockquote>
<h3>Option 3: Source your own script which  overrides only those procedures you&#39;re interested in</h3>
<blockquote>
<p>For example, let&#39;s say that you wanted to replace Maya&#39;s &#39;strip&#39; and  &#39;startsWith&#39; commands, which are both implemented in MEL, with your own  versions, whenever your plugin was loaded. First, you would create a script  file, with a different name, which contained your versions of the strip() and  startsWith() global procs:<br /> myOverrides.mel:<br /> <br /> global proc string strip(string $str)<br /> {<br /> &#0160;&#0160;&#0160; string $result = $str;<br /> &#0160;&#0160;&#0160; &lt;do your own stuff&gt;<br /> &#0160;&#0160;&#0160; return $result;<br /> }<br /> <br /> global proc int startsWith(string $s, string $prefix)<br /> {<br /> &#0160;&#0160;&#0160; int $result = false;<br /> &#0160;&#0160;&#0160; &lt;do your own stuff&gt;<br /> &#0160;&#0160;&#0160; return $result;<br /> }<br /> <br /> When your plugin loads it would do the following:<br /> source strip.mel; &#0160; &#0160; &#0160; &#0160;&#0160; &#0160;  &#0160;&#0160;&#0160; // To make sure that Maya&#39;s versions are loaded.<br /> source startsWith.mel;<br /> source myOverrides.mel;&#0160;&#0160;&#0160; // To override Maya&#39;s versions with  your own.<br /> <br /> When your plugin unloads, it should restore Maya&#39;s version:<br /> source strip.mel;<br /> source startsWith.mel;<br /> <br /> <em><strong>PROS:</strong></em> Your script doesn&#39;t need to override every procedure in the target  script, only the ones you want to change. Doesn&#39;t require any control over  paths, so works well in any environment. Can be done and undone dynamically.  Less chance of interfering with other plugins&#39; overrides than option (b).<br /> <br /> <em><strong>CONS:</strong></em> You can only override global procs: if you need to override a local proc  then you will need to override every proc which calls it to call your own  instead. You cannot call local procs from Maya&#39;s version of the script: if you  need to then you&#39;ll have to reproduce them in your own script. Some places in  Maya explicitly source certain script files: if that happens to the one you&#39;re  overriding then your override will be undone. There&#39;s still a possibility of  interfering with other plugins&#39; overrides, though the chances are lessened.</p>
</blockquote>
<h2>Rewrite/Change a Python script</h2>
<p>Okay that&#39;s great, but what about super cool Python :) Can we do the same as MEL? For Python there&#39;s really just one best way of doing it: replace methods  dynamically at runTime.</p>
<h3>Only Option: replace methods dynamically at runTime</h3>
<blockquote>
<p>Let&#39;s say that you want to add a hook into the listCommandPorts() method in  CommandPort.py. You could do that using the following script at runTime:<br /> import maya.app.general.CommandPort as CommandPort<br /> <br /> originalMethod = CommandPort.listCommandPorts<br /> <br /> def myListPorts():<br /> &#0160;&#0160;&#0160; myHook()<br /> &#0160;&#0160;&#0160; return originalMethod()<br /> <br /> CommandPort.listCommandPorts = myListPorts<br /> <br /> Now whenever anyone in the current Maya process calls  maya.app.general.CommandPort.listCommandPorts() they&#39;ll actually be calling  your myListPorts() method.<br /> <br /> When you no longer need the hook, be sure to put the original method back:<br /> CommandPort.listCommandPorts = originalMethod<br /> <br /> One thing to keep in mind is that if you&#39;re replacing a non-static member  method of a class, remember to include the &#39;self&#39; parameter at the start of the  parameter list.<br /> <br /> <em><strong>PROS:</strong></em> Easy to implement. If you&#39;re just adding a hook and then calling through  to the original method, it works very well with other plugins&#39; overrides since  they just chain together.<br /> <br /> <em><strong>CONS</strong></em>: If your override can&#39;t call through to the original method then it can  interfere other plugins&#39; overrides.</p>
</blockquote>
<p>Enjoy!</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: Updated Maya API Documentation Online and New Python API Learning Path
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: updated-maya-api-documentation-online-and-new-python-api-learning-path
CATEGORY: Animation
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Qt

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/updated-maya-api-documentation-online-and-new-python-api-learning-path.html 
DATE: 06/29/2012 07:14:06 AM
-----
BODY:
<p>We have updated the Maya 2013 API Documentation, so please download the latest version here:</p>
<p><a href="http://www.autodesk.com/me-sdk-docs">http://www.autodesk.com/me-sdk-docs</a></p>
<p>Within the updated documentation there are two major additions which have been done by Martin Ashton are API documentations Guru:</p>
<p>First, we have&#0160;&#0160;a brand new Maya Python Learning Path<br /><br /><a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/GUID-856DDB26-93E7-493D-A1D4-60C4CBA38B9C.htm">http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/files/GUID-856DDB26-93E7-493D-A1D4-60C4CBA38B9C.htm</a></p>
<p>Second,&#0160;a class taxonomy – all classes arranged according to subject/concept<br /><br /><a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/_maya.html">http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/cpp_ref/_maya.html</a></p>
<p>Enjoy!</p>
<p>Kristine</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: API wishlist surveys
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: api-wishlist-surveys
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: Maya

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/api-wishlist-surveys.html 
DATE: 06/27/2012 01:00:00 AM
-----
BODY:
<p>This year’s API wishlist surveys for Autodesk Maya and Autodesk 3ds Max are now live:</p>
<ul>
<li><a href="http://www.zoomerang.com/Survey/WEB22FY5JJ4YYS" target="_blank">Autodesk Maya</a></li>
<li><a href="http://www.zoomerang.com/Survey/WEB22FY5KP4ZPD" target="_blank">Autodesk 3ds Max</a></li>
</ul>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-pi" style="display: inline;"><img alt="API Survey" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017615cde264970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017615cde264970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Onlinesurvey" width="220" /></a><br />Our Engineering teams use the results from these surveys to help steer their ongoing API development priorities, release on release. If you have feedback or specific requests regarding our APIs, this is a great way to get them in front of the right people inside Autodesk.</p>
<p>The deadline for completing these surveys is&#0160;– <strong>July 25th, 2012</strong> – so if you’re interested in providing us with feedback, please don’t procrastinate: while I expect they’ll remain open a little longer, the deadline probably won’t be extended by very much.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-pi" style="display: inline;"><img alt="Chart Results" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d017742b3ab56970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d017742b3ab56970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Chart_results" width="180" /></a><br />And I will, of course, post the survey&#39; results link, once they&#39;re available sometimes in August.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Expose your code to Python - Deploy & Consume
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: expose-your-code-to-python-deploy-consume
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Mudbox
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/expose-your-code-to-python-deploy-consume.html 
DATE: 06/25/2012 07:05:00 AM
-----
BODY:
<p>If you want to know in details follow that <a href="http://packages.python.org/distribute" target="_blank">link</a>&#0160;- or use this <a href="http://packages.python.org/distribute/setuptools.html" target="_blank">tools</a></p>
<p>But since Python is already installed on your Maya (or MotionBuilder) distribution, it is fairly easy to distribute your Python &#39;module&#39; onto other machines for these products. However depending on what you did while compiling your module, you may run into couple of issues. It is never simple, isn&#39;t it? let&#39;s take the simple approach and we see the downfalls later.</p>
<p>In case you did use the correct version of the Python headers/libraries (or Boost on MotionBuilder - using the same Boost version as MotionBuilder), that will help a lot and make it very simple. If it is a pure Python module (not plug-in), just drop your module into the &#39;site-packages&#39; folder. If it is a C++ plug-in, exposing a Python API, it does not matter - put it anywhere you want but you still need to load it as a plug-in into Maya (or MotionBuilder).</p>
<p>If you&#39;re using Boost, you need to make sure Boost libraries are in the OS search path for libraries. Otherwise, your module will silently fail to load in the Python interpreter. This is true only for products not having Boost installed already, so you can skip that task for MotionBuilder.</p>
<p>Where it becomes complicated is when you either don&#39;t match the same Python/Boost versions and/or have dependencies on other modules. And here, I am afraid there isn&#39;t any single easy answer, but Kristine and I will be happy to help to identify the problem. Today, I do experiment some Python 3.0 bridge on Maya and may blog about this later in the year. This post ends the serie of exposing your C++ code to Python...</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177429c551d970d-pi" style="display: inline;"><img alt="The_end" class="asset  asset-image at-xid-6a0163057a21c8970d0177429c551d970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0177429c551d970d-200wi" style="width: 200px; display: block; margin-left: auto; margin-right: auto;" title="The_end" /></a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: What’s New in the FBX 2013 SDK?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: whats-new-in-the-fbx-2013-sdk
CATEGORY: C++
CATEGORY: FBX
CATEGORY: Kristine Middlemiss
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Python
CATEGORY: Visual Studio
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/whats-new-in-the-fbx-2013-sdk.html 
DATE: 06/22/2012 02:26:00 AM
-----
BODY:
<ul type="disc">
<li>The FBX SDK animation system has been completely redesigned.</li>
<li>Take nodes, take node containers, current takes, and FCurves have all been replaced by animation stacks (FbxAnimStack), animation layers (FbxAnimLayer) animation curve nodes (FbxAnimCurveNode), and animation curves (FbxAnimCurve).</li>
<li>The classes in the FBX SDK have all been renamed using the &quot;Fbx&quot; prefix, instead of &quot;KFbx&quot; or &quot;K&quot;. All structures have also been renamed with the same prefix, including global functions and enumerations. We did this to make the SDK simpler and more consistent.</li>
<li>The FbxFile class has been exposed in fbxfile.h. This class will be a basic utility class used by the FBX SDK to open/read/write/close files.</li>
<li>The FbxFileUtils class will expose all static functions related to file handling, such as remove, rename</li>
<li>The FbxPathUtils class will expose all static functions related to file path handling, such as IsRelative, Clean</li>
<li>Many FBX SDK functions which required file paths as inputs have been updated to support UTF-8. The parameter names were updated to reflect this change.</li>
<li>Removed the KFbxMemoryAllocator class. Instead, use handler setter functions: FbxSetMallocHandler located in fbxalloc.h</li>
<li>Removed all KFCurveFilter classes. Please use FbxAnimCurveFilter instead. It will be part of the animation refactoring that started in the 2011 version.</li>
<li>The FbxLight class has been augmented to support area lights and barn doors.</li>
<li>The FbxGeometryBase class has been augmented to support render options: PrimaryVisibility, CastShadow and ReceiveShadow.</li>
<li>It will now be possible to retrieve the &quot;long&quot; version string of the FBX SDK via the function FbxManager::GetVersion(true). This will allow developers to get the version string of this library along with the name and the revision number.</li>
<li>The FBX SDK will use secure versions of CRT calls on the Windows platform. It will no longer be necessary to disable these warnings when including the FBX SDK headers.</li>
<li>Changed how objects are stored in the manager to help increase performance and reduce memory.</li>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Expose your code to Python - get Boost 'ed!
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: expose-your-code-to-python-get-a-boost
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: FBX
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/expose-your-code-to-python-get-a-boost.html 
DATE: 06/20/2012 02:00:00 AM
-----
BODY:
<p>Some house cleaning first...</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158be5f0970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d0176158be5f0970c" style="display: block; margin-left: auto; margin-right: auto;" title="Boost" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158be5f0970c-800wi" border="0" alt="Boost" /></a></p>
<p>"Boost provides free peer-reviewed portable C++ source libraries". <a href="http://www.boost.org/">http://www.boost.org/</a></p>
<p>The Boost C++/Python binding library is just one member of the boost C++ library collection at <a href="http://www.boost.org/">http://www.boost.org</a></p>
<p>It is quick and easy to export C++ to Python using Boost. Boost is also designed to be minimally intrusive on your C++ design. In most cases, you should not have to alter your C++ classes in any way in order to use them with Boost Python. The system should simply reflect your C++ classes and functions into Python. Boost Python bindings are written in pure C++, using no tools other than your editor and your C++ compiler.</p>
<p><a href="http://www.boost.org/doc/libs/1_49_0/libs/python/doc/index.html">http://www.boost.org/doc/libs/1_49_0/libs/python/doc/index.html</a></p>
<p>Documentation at: <a href="http://www.boost.org/libs/python/">http://www.boost.org/libs/python/</a><br />Find binaries at: <a href="http://boost.teeks99.com/">http://boost.teeks99.com</a><br />Tutorial:&nbsp;<a href="http://www.boost.org/doc/libs/1_49_0/libs/python/doc/tutorial/doc/html/python/exposing.html">http://www.boost.org/doc/libs/1_49_0/libs/python/doc/tutorial/doc/html/python/exposing.html</a></p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158be6d1970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d0176158be6d1970c" style="display: block; margin-left: auto; margin-right: auto;" title="GetBoost" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158be6d1970c-800wi" border="0" alt="GetBoost" /></a></p>
<p>OK, so now let's see how it looks like: Like in the previous <a href="http://around-the-corner.typepad.com/adn/2012/06/expose-your-code-to-python-the-python-way.html" target="_blank">post</a> something simple.</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;boost/python.hpp&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">namespace</span> python =boost::python ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">void</span> say_hello (<span style="color: blue;">char</span> *name) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; printf (<span style="color: #a31515;">"Hello %s!\n"</span>, name) ;</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">BOOST_PYTHON_MODULE (PyCyrille) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; python::def (<span style="color: #a31515;">"say_hello"</span>, say_hello) ;</p>
<p style="margin: 0px;">}</p>
</div>
<p>Yes this is it :) nice isn't it?</p>
<p>And now here is a very simple class exposed.</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;boost/python.hpp&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">namespace</span> python =boost::python ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">class</span> CyrilleClass {</p>
<p style="margin: 0px;"><span style="color: blue;">private</span>:</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">int</span> mInt ;</p>
<p style="margin: 0px;"><span style="color: blue;">public</span>:</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">float</span> mFloat ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; CyrilleClass () : mInt(-1), mFloat(-1) {}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">int</span> inc () { <span style="color: blue;">return</span> (++mInt) ; }</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">int</span> dec () { <span style="color: blue;">return</span> (--mInt) ; }</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">int</span> _get () { <span style="color: blue;">return</span> (mInt) ; }</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">void</span> _set (<span style="color: blue;">int</span> i) { mInt =i ; }</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">} ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">BOOST_PYTHON_MODULE (PyCyrille) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; python::class_&lt;CyrilleClass&gt;(<span style="color: #a31515;">"CyrilleClass"</span>)</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .def(<span style="color: #a31515;">"inc"</span>, &amp;CyrilleClass::inc)</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .def(<span style="color: #a31515;">"dec"</span>, &amp;CyrilleClass::dec)</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .def(<span style="color: #a31515;">"_get"</span>, &amp;CyrilleClass::_get)</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .def(<span style="color: #a31515;">"_set"</span>, &amp;CyrilleClass::_set)</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .def_readwrite(<span style="color: #a31515;">"mFloat"</span>, &amp;CyrilleClass::mFloat)</p>
<p style="margin: 0px;"><span style="background-color: white; font-size: 10pt;">&nbsp; &nbsp; &nbsp; &nbsp; ;</span></p>
<p style="margin: 0px;">}</p>
</div>
<p>You see excepted the BOOST_PYTHON_MODULE&nbsp;block, which remains fairly easy to understand, there is nowhere complicated thing like PYINC(), PyInitialize(), etc... and I do not have to care about the GIL state. Wow, I like that !</p>
<p>But there is a price for this - Boost adds an additional memory footprint to Maya, and you better choose (or recompile) Boost using the same compiler Maya used (I.e. Visual Studio 2010 SP1 for the Windows platform). For MotionBuiler, that is probably the way to go as the MotionBuilder Python API was created using Boost - just make sure to use the same Boost libraries.</p>
<p>Next time, we will see how to deploy C++ (or Boost) Python extension into applications.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: What’s New in the MotionBuilder 2013 SDK?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: whats-new-in-the-motionbuilder-2013-sdk
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Qt
CATEGORY: Visual Studio
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/whats-new-in-the-motionbuilder-2013-sdk.html 
DATE: 06/18/2012 01:21:00 AM
-----
BODY:
<ul type="disc">
  <li>Programming Environment and Code Refactoring Changes</li>
  <ul type="circle">
    <li>MotionBuilder and its distributed plug-ins are now compiled using Visual Studio 2010 (Service Pack 1).</li>
    <li>FBContainer has been renamed to FBVisualContainer for uniformity of cross-product naming schemes. </li>
    <li>const correctness improvements. </li>
    <li>Although not enforced in this release, we recommend that the &quot;H&quot; prefix in classes such as HFBPlug be removed and replaced by the pointer suffix &quot;*&quot;, for example: FBPlug*. This change is intended to facilitate the use of the documentation system in the near future. </li>
    <li>FBShader has been heavily refactored for performance.</li>
  </ul>
  <li>New Classes</li>
  <ul type="circle">
    <li>FBSyncReference - Will allow the MotionBuilder application to sync its time with a device's time. For more information, consult the ordevicesync_device plugin. </li>
    <li>FBTimeCode - A timecode contains the time and frame information used to identify a specific moment in a timeline, often used in video and audio production. This class can help in the conversion of a point in time from one framerate domain to another. </li>
    <li>FBHUD, FBHUDElement - These classes represent the new Heads-Up Display (HUD) feature in MotionBuilder. A HUD will be connected to a camera, and appears as a 2D overlay. This overlay can be used to display information about the take: the current time and frame number </li>
    <li>FBFileMonitoringManager - This class can be used to help monitor operating system file events. By contrast, the event properties in FBApplication will only monitor events triggered within the MotionBuilder application.</li>
    <li>FBNamespace - This class has been exposed to help facilitate the use of namespaces among scene elements. Functions: FBFindModelByLabelName(), FBFbxOptions::NamespaceList, FBFbxOptions::SetNamespaceList(), FBFbxOptions::GetNamespaceList(), and the FBScene's namespace related functions (FBScene::NamespaceImport()) can filter, select, import and export scene elements using namespaces.</li>
  </ul>
  <li>New Methods and Added Functionality </li>
  <ul type="circle">
    <li>FBAnimationNode::KeyCandidate(), FBPropertyAnimatable::KeyAt() - These functions &nbsp;provide the ability to key at a given time without moving time. </li>
    <li>FBSystem.ConfigPath, FBSystem.UserConfigPath, FBSystem.TempPath - These properties respectively will define MotionBuilder software&rsquo;s directory paths for config files, user config files, and temporary files. </li>
    <li>FBAudioClip - A substantial amount of functionality has been added to this class. Consult the header files and class documentation for more information. </li>
    <li>FBMenuManager - Functionality has been added to this class to help manipulate and remove MotionBuilder software&rsquo;s UI top menu bar. </li>
    <li>FBComponent::GetFullName() - Retrieves an object's unique name. </li>
    <li>FBStory, FBStoryFolder, FBStoryTrack - Added the capability to record stories on disk with properties: FBStory::RecordToDisk and FBStoryFolder::RecordClipPath. </li>
    <li>FBDevice::ModelBindingCreate, FBDevice::ModelBindingRootsList - These functions allow you to create a model binding from a device, or obtain a list of possible root models which can be bound to the device. </li>
    <li>FBModel - Exposed additional properties to facilitate custom rendering. Viewport dimensions can be set in the model, which will only be updated and valid during custom renderer callbacks (FBModel::CameraViewportX, FBModel::CameraViewportY, FBModel::CameraViewportWidth, FBModel::CameraViewportHeight). Motion blur properties have also been added: FBModel::MotionBlurIntensity, FBModel::UseMotionBlur, FBModel::UseRealTimeMotionBlur. </li>
    <li>FBModelNull, FBModelMarker - Overloaded several FBModel base class functions in these subclasses to help increase user customization. These functions are: FBModelMarker/FBModelNull::FbxStore(), FBModelMarker/FBModelNull::FbxRetrieve(), FBModelMarker/FBModelNull::FbxGetObject(), and FBModelMarker/FBModelNull::FbxGetObjectSubType(). </li>
    <li>FBMaterial - Custom material support, and added sample project (OpenRealitySDK/Samples/miscellaneous/material_template) </li>
    <li>FBRenderer - Added new functionality: FBRenderer::GetViewingCamera() to obtain the current camera, FBRenderer::InPicking() to determine if the renderer will be in the picking phase, and a variety of certain other functions and properties related to picking. </li>
    <li>FBAudioRenderOptions() - This class has been added to help specify audio rendering options, which can be passed as a parameter to FBApplication::AudioRender(). Consult the Scripts/Samples/Audio/AudioRendering.py sample for more details. </li>
    <li>FBEvaluateManager - Added functionality will allow for computationally intensive tasks to be registered and run as callbacks in a background thread (FBEvaluateManager::RegisterEvaluationGlobalFunction(), FBEvaluateManager::UnregisterEvaluationGlobalFunction())</li>
  </ul>
  <li>Misc and Optimizations</li>
  <ul type="circle">
    <li>Optimized functions FBFindObjectByFullName() and FBDeleteObjectsByNames(). </li>
    <li>Optimized the merging of multiple files transaction workflow: FBMergeTransactionBegin(), FBMergeTransactionEnd().</li>
  </ul>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Expose your code to Python - the Python way
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: expose-your-code-to-python-the-python-way
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/expose-your-code-to-python-the-python-way.html 
DATE: 06/15/2012 02:00:00 AM
-----
BODY:
<p>In a previous <a title="Maya and Python a love story?" href="http://around-the-corner.typepad.com/adn/2012/06/maya-and-python-a-love-story.html" target="_self">post</a>, I quickly explained why Python isn't secure and may be a bad guy performance wise. One option to solve the two issues at the same time is to write your code in C++ for example. And in case you still want to access the C++ functionality, you expose it to Python. There is several way to do this, you either expose your code to Python using:</p>
<ul>
<li>the Python SDK</li>
<li>Swig</li>
<li>Boost</li>
</ul>
<p>SWIG is a software development tool that connects programs written in C and C++ with a variety of high-level programming languages. SWIG is used with different types of languages including common scripting languages such as Perl, PHP, Python, Tcl and Ruby. <a href="http://www.swig.org/">http://www.swig.org/</a><br />To use SWIG you construct an interface file which defines classes, functions, variables, and constants. Then pass the interface file to a command line utility which produces an additional source file with the bindings that make your C++ code accessible to the script language.</p>
<p>While Swig is very popular and often used by programmers, you need to teach Swig how to handle the different types. Otherwise it is fairly easy to use and do mistakes ;) like in the first Maya Python implementation (called Python 1.0). The Python SDK and Boost are more interesting and we will quickly look how to do this today and the following post.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d016767963a7b970b-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d016767963a7b970b" style="display: block; margin-left: auto; margin-right: auto;" title="Python-logo" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d016767963a7b970b-800wi" border="0" alt="Python-logo" /></a></p>
<p><strong><span style="text-decoration: underline;">The Python way first</span></strong></p>
<p>In theory, this is what you would need to do for pure C++/Python and not using Maya API:</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;Python.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">#pragma</span> <span style="color: blue;">comment</span> (<span style="color: blue;">lib</span>, <span style="color: #a31515;">"python26.lib"</span>)</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">static</span> PyObject *say_hello (PyObject *self, PyObject *args) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">const</span> <span style="color: blue;">char</span> *name =NULL ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( !PyArg_ParseTuple (args, <span style="color: #a31515;">"s"</span>, &amp;name) )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> (NULL) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; printf (<span style="color: #a31515;">"Hello %s! (from Python)\n"</span>, name) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; Py_INCREF (Py_None) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; Py_RETURN_NONE ;</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">static</span> PyMethodDef HelloMethods[] = {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; {<span style="color: #a31515;">"say_hello"</span>, say_hello, METH_VARARGS, <span style="color: #a31515;">"say_hello(self, str)"</span>},</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; {NULL, NULL, 0, NULL}</p>
<p style="margin: 0px;">} ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">PyMODINIT_FUNC initPyCyrille(<span style="color: blue;">void</span>) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; (<span style="color: blue;">void</span>)Py_InitModule (<span style="color: #a31515;">"PyCyrille"</span>, HelloMethods) ;</p>
<p style="margin: 0px;">}</p>
</div>
<p><span style="color: #888888;">[Output the module as PyCyrille.pyd on Windows / PyCyrille.so on Linux]</span></p>
<p>But exposing directly from a Maya plug-in, you need a different approach&nbsp;<span style="color: #8b8b8b;">(assuming Maya 2012 or Maya 2013, otherwise use the correct Python version number)</span>.</p>
<p>Note: replace&nbsp;<span style="color: #800000;">$MAYA_LOCATION</span> by your install path</p>
<ul>
<li>Create a new Maya C++ plug-in project</li>
<li>In the “C++” -&gt; “General” -&gt; “AdditionalIncludeDirectories” include <span style="color: #800000;">$MAYA_LOCATION</span>\include</li>
<li>In the “Linker” -&gt; “Input” -&gt; “AdditionalDependencies” add <span style="color: #800000;">$MAYA_LOCATION</span>\lib\python26.lib</li>
<li>In your code add&nbsp; &nbsp;
<div style="font-family: Courier New; font-size: 10pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">#include&nbsp;</span><span style="color: #a31515;">&lt;python2.6/Python.h&gt;</span></p>
</div>
</li>
<li>in the plug-in&nbsp;<span style="font-family: 'Courier New'; font-size: 10pt; color: #a31515;">initializePlugin</span><span style="font-family: 'Courier New'; font-size: 10pt;">()</span>method, initialize the Python kernel and register your Python functions - see code below.</li>
</ul>
<p>But what is important to know at this point is that since Maya main thread is not a Python thread you need to register the GIL (thread state structure) towards that thread so the Python interpreter can see it and execute your code without crashing Maya. You do this using the pair&nbsp;<span style="background-color: white; font-family: 'Courier New'; font-size: 10pt;">PyGILState_Ensure()</span>and&nbsp;<span style="background-color: white; font-family: 'Courier New'; font-size: 10pt;">PyGILState_Release()</span>.</p>
<p>Last, do not call the&nbsp;PyFinalize() method from the uninitializePlugin() method since Maya will do that only when it will be necessary.</p>
<p>The complete sample code</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white;">
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;python2.6/Python.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">#pragma</span> <span style="color: blue;">comment</span> (<span style="color: blue;">lib</span>, <span style="color: #a31515;">"python26.lib"</span>)</p>
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;maya/MGlobal.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;maya/MSelectionList.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;maya/MFnPlugin.h&gt;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">static</span> PyObject *say_hello (PyObject *self, PyObject *args) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">const</span> <span style="color: blue;">char</span> *name =NULL ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( !PyArg_ParseTuple (args, <span style="color: #a31515;">"s"</span>, &amp;name) )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> (NULL) ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; PyGILState_STATE state =PyGILState_Ensure () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MSelectionList list ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MGlobal::getActiveSelectionList (list) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">unsigned</span> <span style="color: blue;">int</span> nb =list.length () ;</p>
<p style="margin: 0px;">&nbsp; &nbsp; PyGILState_Release (state)&nbsp;;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; printf (<span style="color: #a31515;">"Hello %s, %d object(s) selected! (from Maya)\n"</span>,name,nb);</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; Py_INCREF (Py_None) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; Py_RETURN_NONE ;</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: blue;">static</span> PyMethodDef HelloMethods [] ={</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; {&nbsp;<span style="color: #a31515;">"say_hello"</span>, say_hello, METH_VARARGS, <span style="color: #a31515;">"say_hello(self, str)"&nbsp;</span>},</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; { NULL, NULL, 0, NULL }</p>
<p style="margin: 0px;">} ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">PLUGIN_EXPORT MStatus initializePlugin (MObject obj)&nbsp;<span style="background-color: white; font-size: 10pt;">{</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MGlobal::displayInfo (<span style="color: #a31515;">"Initializing PyCyrille"</span>) ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MStatus stat ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MFnPlugin plugin (obj, <span style="color: #a31515;">"vendor"</span>, <span style="color: #a31515;">"version"</span>, <span style="color: #a31515;">"any"</span>, &amp;stat) ;</p>
<p style="margin: 0px;"><span style="background-color: white; font-size: 10pt;">&nbsp; &nbsp;&nbsp;</span><span style="color: blue;">if</span><span style="background-color: white; font-size: 10pt;"> ( !stat )</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span>&nbsp;(MS::kFailure) ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( !Py_IsInitialized () )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Py_Initialize () ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( Py_IsInitialized () ) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; PyGILState_STATE state =PyGILState_Ensure () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; PyObject *module =Py_InitModule (<span style="color: #a31515;">"PyCyrille"</span>, HelloMethods) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Py_INCREF (module) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; PyGILState_Release (state) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span>&nbsp;(MS::kSuccess) ;</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">PLUGIN_EXPORT MStatus uninitializePlugin(MObject obj)&nbsp;<span style="background-color: white; font-size: 10pt;">{</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; MFnPlugin plugin (obj) ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">// Do not call Py_Finalize()</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//Py_Finalize();</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span>&nbsp;(MS::kSuccess) ;</p>
<p style="margin: 0px;">}</p>
</div>
<p><span style="color: #888888;">[Output the module as a standard Maya plug-in]</span></p>
<p><span style="color: #888888;">Note on MacOS, I'll recommend to use distutils to compile your plug-in, instead of Xcode. Specifically, the problem is that you probably link to a different instance than the one you tihnk. distutils solves this problem for you because it knows which Python to link to and which flags to use by way of the Python interpreter you invoke with setup.py</span></p>
<p>OK, that's it for the hardcore technical details on exposing C++ to Python. In the next post we'll see how to do the same thing using Boost&nbsp;(and you can trust me when I say that's going to be a whole lot simpler than this post, honestly! :-)</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Kristine Middlemiss
AUTHOR EMAIL: kristine.middlemiss@autodesk.com
TITLE: What’s New in the Maya 2013 API?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: whats-new-in-the-maya-2013-api
CATEGORY: C++
CATEGORY: Kristine Middlemiss
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Python
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/whats-new-in-the-maya-2013-api.html 
DATE: 06/13/2012 04:14:52 AM
-----
BODY:
<ul type="disc">
  <li>The &ldquo;devkit/plug-ins&rdquo; folder has been reorganized so       that the plug-in associated files are encapsulated under one folder and the       plug-in project will be parented under a single parent solution file       called &ldquo;Plug-ins.sln&rdquo;</li>
  <li>The module support for plug-in distribution has been       improved so that you will be able to more easily create a distributable       deployment of your plug-in. </li>
  <li>New attribute pattern API classes </li>
  <ul type="circle">
    <li>MAttributePattern: class that will provide a pattern of attributes to be applied to nodes as dynamic attributes or to node classes as extension attributes.</li>
    <li>MAttributePatternArray: class that will provide methods for manipulating arrays of attribute patterns.</li>
    <li>MPxAttributeFactory: base class added for user-defined attribute pattern factories.</li>
  </ul>
  <li>New threaded device node classes added for creating threaded Maya device nodes</li>
  <ul type="circle">
    <li>MPxThreadedDeviceNode: base class added for creating threaded Maya device nodes.</li>
    <li>MPxClientDeviceNode: extension of MPxThreadedDeviceNode, intended for creating Maya devices that act as clients.</li>
    <li>MCharBuffer (MPxThreadedDeviceNode.h): utility class added to deal with reference to a char* type.</li>
  </ul>
  <li>A group of new classes added under namespace MHWRender       to work with index buffer and vertex buffer in Viewport 2.0 </li>
  <ul type="circle">
    <li>MComponentDataIndexing: added class for storing index mapping when vertices are shared</li>
    <li>MComponentDataIndexingList: added class that defines a list of MComponentDataIndexing objects&nbsp;&nbsp;&nbsp; </li>
    <li>MHWGeometryUtilities: added a utility class for rendering geometry in Viewport 2.0, its wireframeColor() function will get the final wireframe color the draw can use.</li>
    <li>MGeometryExtractor: added base class for extracting renderable geometry, constructed an instance of this class to populate buffers with vertex and indexing data.</li>
    <li>MIndexBufferDescriptor (MHWGeometry.h): added class represents a description of an indexing scheme, indexing type, primitive type, primitive stride and component information.</li>
    <li>MIndexBufferDescriptorList (MHWGeometry.h): added a list of MIndexBufferDescriptor objects.</li>
    <li>MLightParameterInformation (MDrawContext.h): added a class for providing lighting information, which will allow for access to various per-light information accessible via the MDrawContext class in Viewport 2.0.</li>
    <li>MPxVertexBufferGenerator: added a base class for user defined vertex buffer generators.</li>
  </ul>
  <li>New classes added to provide callback hook into Maya software&rsquo;s       drag-and-drop mechanism. </li>
  <ul type="circle">
    <li>MExternalDropCallback: This class will be used to register callbacks to gain access to Maya software&rsquo;s drag-and-drop information during dropping an external object to Maya. You can replace or augment Maya software&rsquo;s drop behavior for external drag-and-drop operations. </li>
    <li>MExternalDropData: a class that represents data that a drag-and-drop operation carries if dragging from an external application and dropping onto Maya. It typically will arrive from a MExternalDropCallback callback method.</li>
  </ul>
</ul>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Michael
EMAIL: m_idczak@wp.pl
IP: 89.75.167.47
URL: 
DATE: 06/14/2012 10:39:58 AM
Maybe its noob question but why in Maya 2013 Python API MImage class is omitted?
-----
COMMENT:
AUTHOR: Kristine Middlemiss
EMAIL: kristine.middlemiss@autodesk.com
IP: 209.51.184.11
URL: 
DATE: 06/14/2012 11:12:43 AM
All questions are good, can you just clarify for me where you are seeing the MImage for Python API is beign omitted? I don't see that in my post or documentation...
-----
COMMENT:
AUTHOR: Michael
EMAIL: m_idczak@wp.pl
IP: 89.75.167.47
URL: 
DATE: 06/14/2012 11:30:46 AM
I didnt mean Your post but this page:
<a href="http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/python-api/index.html">http://docs.autodesk.com/MAYAUL/2013/ENU/Maya-API-Documentation/python-api/index.html</a>
In documentation for Maya 2012 Python and C++ were described together, now its on separete page  and i dont see that class or I just missed something.
-----
COMMENT:
AUTHOR: Kristine Middlemiss
EMAIL: kristine.middlemiss@autodesk.com
IP: 209.51.184.11
URL: 
DATE: 06/14/2012 11:40:31 AM
Oh, I am with you now! Thanks for explaining! So this is Python 2.0 and it's going to take a couple of releases to finish as you have noticed everything is not there yet including MImage, it will come in time. If you need MImage continue to use the Python 1.0 that has everything you need in this namespace:

import maya.OpenMaya as OpenMaya

rather then the Python 2.0 namespace:

import maya.api.OpenMaya as newOpenMaya 

This actually would be a good post topic on explaining the how Python 2.0 is additional to the original 1.0.

Kristine
-----
COMMENT:
AUTHOR: Michael
EMAIL: m_idczak@wp.pl
IP: 89.75.167.47
URL: 
DATE: 06/14/2012 11:45:45 AM
I felt that it was a silly question, thanks!
-----
COMMENT:
AUTHOR: Kristine Middlemiss
EMAIL: kristine.middlemiss@autodesk.com
IP: 209.51.184.11
URL: 
DATE: 06/14/2012 11:51:18 AM
Nah, all questions are great! :)
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: ADN Devdays @ AU Las Vegas 2012 - Call for Proposals
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: adn-devdays-au-las-vegas-2012-call-for-proposals
CATEGORY: Autodesk
CATEGORY: Conferences
CATEGORY: Cyrille Fauvel
CATEGORY: Films
CATEGORY: Games

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/adn-devdays-au-las-vegas-2012-call-for-proposals.html 
DATE: 06/11/2012 03:45:00 AM
-----
BODY:
<p>We are looking for presenters for the newly added <strong>Autodesk Developer Network (ADN) M&amp;E Conference. </strong>If you or someone you know would like the opportunity to present, please submit a proposal including the duration of your presentation. The ADN M&amp;E Conference is a great way to share your current API’s, tips &amp; tricks or knowledge about solving production challenges. Please keep in mind, the focus and audience of the ADN conference is developers.</p>
<ul>
<li>Classes need to have a WOW factor that speaks to M&amp;E developers as well as architects and engineers </li>
<li>Feature Autodesk’s Digital Entertainment Creation tools: 3ds Max, Maya, Motionbuilder, Mudbox, Max Design, Entertainment Creation Suite, etc...</li>
<li>Speakers can be both Autodesk employees as well as customers, including API developers, script writers, etc...</li>
<li>Please contact <a href="mailto:cyrille.fauvel@autodesk.com">Cyrille Fauvel</a> if you are interested in presenting or if you require more information.</li>
</ul>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-pi" style="display: inline;"><img alt="Au_twitter_icon_128x128_normal" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0176158bd10c970c" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0176158bd10c970c-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Au_twitter_icon_128x128_normal" /></a></p>
<p><strong><span style="text-decoration: underline;">OVERVIEW</span></strong></p>
<p><strong>1. ADN M&amp;E Conference @ AU</strong></p>
<p><strong>On November 26<sup>th</sup></strong>, the Media &amp; Entertainment (M&amp;E) team at<strong> </strong>Autodesk University will host a free Autodesk Developer Network (ADN) Conference. The ADN Conference is a great place to hear about upcoming M&amp;E product releases and changes in our API. Attend and share your experience as a developer and network with fellow ADN partners and the ADN team.</p>
<p>Watch out some of the talks from last year on Area - <a href="http://area.autodesk.com/au2011">http://area.autodesk.com/au2011</a> or more on the <a href="http://adnsparks.autodesk.com/adn/servlet/item?siteID=6681818&amp;id=18969388">ADN portal</a></p>
<p>Feel free to forward this invite to people you know, good presenters, and sure you’d like to hear talking about technology. But remember we are looking for programming oriented lectures.</p>
<p style="text-align: center;"><span style="color: #c00000;"><strong>Submit your proposal by July 8th</strong></span></p>
<p><strong>2.&#0160;</strong><strong>DevLab @ AU</strong></p>
<ol> </ol>
<p>On<strong> November 27<sup>th</sup></strong>, the DevLab will be free for all ADN members. Network with fellow ADN partners, ask the DevTech team for programming advice, bring your laptop and work on your code, and gain insight from industry experts. For information about becoming an ADN member, visit <a href="http://www.autodesk.com/applyadn">Autodesk Developer Network</a>.</p>
<p><strong>Important</strong> <strong>note</strong>: Non-ADN members <strong>must sign</strong> an NDA to attend the ADN M&amp;E Conference before arriving on site. Forms will be available upon Registration.</p>
<p><strong>3.&#0160;</strong><strong>About Autodesk University – M&amp;E</strong></p>
<p><a href="http://au.autodesk.com/?nd=e2011">Autodesk University User Conference and Exhibition</a>, Las Vegas - Autodesk University&#39;s flagship event is an annual conference and exhibition in Las Vegas where design and entertainment professionals from around the world attend classes, keynotes, product demonstrations, exhibits and networking events. Attendees can share ideas, work together to solve problems, and form professional relationships. Attendees also get year-round access to over 500 online classes on the Autodesk University website.</p>
<ul>
<li><strong>This year Media &amp; Entertainment will offer</strong></li>
many classes in the AU curriculum, an M&amp;E Innovation Forum, an Autodesk Developer Network Conference and a DevLab.
<li>You&#39;ll learn from top-rated working professionals in the fields of AEC, Automotive and Transportation, CAD Management, Civil Infrastructure, Design Technology Management, Education, Government, Manufacturing, <strong>Media &amp; Entertainment</strong>, Geospatial, Utilities &amp; Telecommunication, Design Visualization, and many more.</li>
<li>Instructors are selected based on their technical expertise and communication skills, as well as their proposals to address issues relevant to their industries today. Industry experts, magazine and Internet columnists, authors, and technical gurus are all assembled in one place for you to connect with and learn from. Here, you will glean information about niche markets you won&#39;t find anywhere else.</li>
</ul>
<p>See <a href="http://au.autodesk.com/?nd=e2012_event">http://au.autodesk.com/?nd=e2012_event</a></p>
<p>Have a great day!</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Cloud & mobile series summary
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: cloud-mobile-series-summary
CATEGORY: AJAX
CATEGORY: Android
CATEGORY: Cloud
CATEGORY: Cyrille Fauvel
CATEGORY: iOS
CATEGORY: JSON
CATEGORY: Mobile
CATEGORY: SaaS
CATEGORY: WebBlogs

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/cloud-mobile-series-summary.html 
DATE: 06/09/2012 04:56:00 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01676716d5c2970b-pi" style="display: inline;"><img alt="Cloud-mobile" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d01676716d5c2970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01676716d5c2970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Cloud-mobile" /></a><br />My former colleague Kean Walmsley (now in the AutoCAD Engineering team) wrote a serie of articles on Could and Mobile technologies and learning path that is worth reading. Even if it sometimes focus on AutoCAD, it is general enough to apply on any development. It talks about Unity3d, Android, iOS, HTML5/WebGL, WinRT.</p>
<p>Check-out this <a href="http://through-the-interface.typepad.com/through_the_interface/2012/06/cloud-mobile-series-summary.html">article</a></p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya compiler versions
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: maya-compiler-versions
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: Visual Studio
CATEGORY: Windows
CATEGORY: XCode

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/maya-compiler-versions.html 
DATE: 06/07/2012 02:16:00 PM
-----
BODY:
<p>Like promised the other day, here is a complete map of compiler and libraries used by Maya</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-pi" style="display: inline;"><img alt="Source-code-programming" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167673f53f1970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f53f1970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Source-code-programming" /></a><br /><br /></p>
<p>OS&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;Compiler</p>
<p><span style="text-decoration: underline;"><strong>Maya 2013</strong></span></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;Win7 &#0160; &#0160; &#0160; &#0160; Visual Studio 2010 SP1, Intel 12.0.4.196&#0160;<br />64bit&#0160;&#0160;&#0160;&#0160;Win7x64&#0160;&#0160;&#0160;&#0160;Visual Studio 2010 SP1, Intel 12.0.4.196</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL 6.0, FC14&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; gcc 4.1.2, Intel 11.1.073</p>
<p>Mac<br />64bit&#0160;&#0160;&#0160;&#0160;SnowLeopard 10.6.8 &#0160; &#0160; &#0160; &#0160;Xcode3.2.1 gcc 4.2.1, Intel 11.1.089</p>
<ul>
<li>Embedded Python - Internal to Maya 2.6.4</li>
<li>Qt 4.7.1</li>
<li>TBB 3.0u7</li>
<li>DirectX SDK June 2010</li>
<li>MR 3.10</li>
<li>Linux base build is RHEL 6.0/CentOS 6.0</li>
</ul>
<p><strong><span style="text-decoration: underline;">Maya 2012</span></strong></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;XP SP2 &#0160; &#0160; &#0160; &#0160; Visual Studio 2008 SP1 + ATL security update, Intel 11.1.067&#0160;<br />64bit&#0160;&#0160;&#0160;&#0160;XPx64 SP2&#0160;&#0160;&#0160;&#0160;Visual Studio 2008 SP1 + ATL security update, Intel 11.1.067&#0160;</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL5.1 &#0160; &#0160; &#0160; &#0160;gcc 4.1.2, Intel 11.1.073&#0160;</p>
<p>Mac<br />64bit&#0160;&#0160;&#0160;&#0160;Snow Leopard 10.6.4 &#0160;&#0160;&#0160;&#0160; XCode 3.2.1, gcc 4.2.1, Intel 11.1.089</p>
<ul>
<li>Embedded&#0160;Python - Internal to Maya 2.6.4</li>
<li>Qt 4.7.1</li>
<li>TBB 3.u5</li>
<li>DirectX SDK Feb 2010</li>
<li>MR 3.9</li>
</ul>
<p><span style="text-decoration: underline;"><strong>Maya 2011&#0160;</strong></span></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;Xp SP2 &#0160; &#0160; &#0160; &#0160; Visual Studio 2008 SP1, Intel 11.1.051<br />64bit&#0160;&#0160;&#0160;&#0160;Xpx64 SP2&#0160;&#0160;&#0160;&#0160;Visual Studio 2008 SP1, Intel 11.1.051</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL5.1 &#0160; &#0160; &#0160; gcc 4.1.2, Intel 11.1.059&#0160;</p>
<p>Mac<br />32bit&#0160;&#0160;&#0160;&#0160;Leopard 10.5.x&#0160;&#0160;&#0160;&#0160;XCode 3.1.2, gcc 4.0.1, Intel 111.076<br />64bit&#0160;&#0160;&#0160;&#0160;Leopard 10.5.x&#0160;&#0160;&#0160;&#0160;XCode 3.1.2, gcc 4.0.1, Intel 11.1.076&#0160;</p>
<ul>
<li>Embedded&#0160;Python - Internal to Maya 2.6.4</li>
<li>If building on Snow Leopard 10.6.x, would use XCode 3.2.1 (default compiler series on SL)</li>
<li>Qt 4.5.3</li>
<li>TBB 2.2 update 1</li>
<li>DirectX SDK Aug 2009</li>
<li>MR 3.8</li>
</ul>
<p><strong><span style="text-decoration: underline;">Maya 2010&#0160;</span></strong></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;Xp SP2&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;Visual Studio 2008 SP1, Intel 10.1.022<br />&#0160;64bit&#0160;&#0160;&#0160;Xp x64 SP2 &#0160;Visual Studio 2008 SP1, Intel 10.1.022</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL5.1 gcc 4.1.2, Intel 11.0.083</p>
<p>Mac<br />32bit&#0160;&#0160;&#0160;&#0160;Leopard 10.5.6&#0160;&#0160;&#0160;XCode 3.0, gcc 4.0.1, Intel 11.0.064<br />64bit&#0160;&#0160;&#0160;&#0160;Leopard 10.5.6&#0160;&#0160;&#0160;XCode 3.0, gcc 4.0.1, Intel 11.0.064</p>
<ul>
<li>Embedded&#0160;Python - Internal to Maya 2.6.1</li>
</ul>
<p><span style="text-decoration: underline;"><strong>Maya 2009</strong></span></p>
<p>Windows<br />32bit&#0160; XP SP2&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; vc8.0+SP1+qtHotfix, Intel 10.1.013<br />64bit&#0160; XP x64 SP2 &#0160; &#0160;vc8.0+SP1+qtHotfix, Intel 10.1.013</p>
<p>Linux<br />64bit&#0160;&#0160;&#0160;&#0160;RHEL4.4 &#0160; &#0160; &#0160;gcc 4.1.2 Intel 9.1.039</p>
<p>Mac<br />32bit&#0160;&#0160;&#0160;&#0160;Tiger 10.4.11&#0160;&#0160;&#0160;&#0160;XCode 2.4.1, gcc 4.0.1, Intel 10.1.007*</p>
<ul>
<li>Embedded&#0160;Python - Internal to Maya 2.5.1</li>
<li>DirectX SDK Nov 2007</li>
<li>TBB 2.1.014</li>
</ul>
<p><span style="text-decoration: underline;"><strong>Maya 2008</strong></span></p>
<p>Windows<br />32bit&#0160;&#0160;&#0160;&#0160;vc8.0 + SP1 + qtHotfix, Intel 9.1.034<br /> 64bit&#0160;&#0160;&#0160;&#0160;vc8.0 + SP1 + qtHotfix&#0160;</p>
<p>Linux<br /> 32bit&#0160;&#0160;&#0160;&#0160;gcc 4.1.2 Intel 9.1.039<br />64bit&#0160;&#0160;&#0160; gcc 4.1.2 Intel 9.1.039</p>
<p>Mac<br />32bit&#0160;&#0160;&#0160;&#0160;XCode 2.4.1, gcc 4.0.1, Intel 9.1.037*</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Nicolas Chaverou
EMAIL: nicolas.chaverou@golaem.com
IP: 82.228.130.135
URL: http://www.golaem.com
DATE: 06/11/2012 12:42:38 AM
Excellent post et excellente idée de blog: on va suivre tout ça avec attention chez Golaem.
D'ailleurs on voulait s'abonner au flux RSS du blog mais il semblerait qu'il soit un peu defaillant (il n'y a toujours que le post de Welcome).

Je ne sais pas si tu as moyen de configurer quoique ce soit pour le remettre en route, mais ça pourrait être utile pour fidéliser les lecteurs 
-----
COMMENT:
AUTHOR: Cyrille Fauvel
EMAIL: 
IP: 81.53.221.201
URL: http://profile.typepad.com/6p0163057a21c8970d
DATE: 06/11/2012 01:27:21 AM
Thx Nicolas for raising the issue - I have fixed the problem now, the new feeds is <a href="http://feeds.feedburner.com/typepad/around-the-corner">http://feeds.feedburner.com/typepad/around-the-corner</a>

-cyrille
-----
COMMENT:
AUTHOR: Narann
EMAIL: fevrier.dorian@yahoo.fr
IP: 82.234.112.26
URL: http://www.fevrierdorian.com/blog/
DATE: 06/29/2012 06:52:39 AM
Very instructive post. Thank you! :)
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Compatibility of Maya plug-ins between releases
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: compatibility-of-maya-plug-ins-between-releases
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: GCC
CATEGORY: Linux
CATEGORY: Mac
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python
CATEGORY: Visual Studio
CATEGORY: Windows

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/compatibility-of-maya-plug-ins-between-releases.html 
DATE: 06/05/2012 02:31:00 PM
-----
BODY:
<div>
<p>This is a huge topic, so I&#39;m not going to be able to do it justice in this one post.</p>
<p>Plug-ins developed using Maya&#39;s APIs need to be ported and&#0160;tested&#0160;on each major releases&#0160;to make sure they work with a new release of the&#0160;Maya platform. For several generations of&#0160;Maya we have consistently broken binary&#0160;plug-in compatibility every major releases. To make plug-ins work on interim hotfix, service pack, they might need minor porting work to migrate their use of the API and/or use new API, but we do test to minimize the pain experienced by our developers.</p>
<p>Also, applications implemented using different APIs typically require different efforts to port from one release to the next. Generally MEL, Python&#0160;codes are fairly portable between releases. Python plug-ins are a little more portable than C++ plug-ins, but as the&#0160;Python API has been evolving quickly we have so far not always enforced compatibility, Moving forwards I would expect to see more stability and release-to-release compatibility in our&#0160;Python API to Maya when the Python 2.0 implementation will be fully completed.</p>
<p>Architecturally Maya C++ plug-ins are closest to Maya&#39;s core (in terms of their implementation) so it is really for these modules that developers - whether external or internal to Autodesk - need to spend most development effort when application compatibility is broken.</p>
<p>So why do we break compatibility at all? Well there are a few reasons...</p>
<ol>
<li>Sometimes we simply want to update API classes, to add new methods etc... While we can add non-virtual methods during an API-compatible release, adding virtual methods might change a module&#39;s v-table and breaks compatibility.</li>
<li>We also need to update our internal architecture or use of technology. An example of this is our extensive use of Viewport 2.0 in Maya 2012. This is a deep - and wide-reaching - change to the way&#0160;Maya handles&#0160;viewport display&#0160;internally, and has therefore impacted many&#0160;Maya&#0160;plug-ins using&#0160;Viewport API.</li>
<li>Finally we also want to take advantage of the latest compiler technology to build Maya.&#0160;Maya 8.5-2012 were built with Visual Studio 2008 Service Pack 1, Maya 2013 was built with Visual Studio 2010 Service Pack1 (on Windows, for other platform, I am going to post a more complete map). It&#39;s important for us to remain on a supported compiler version, in order to be able to get critical issues addressed by Microsoft (or others), but beyond that it also provides us with new development capabilities, and stay synch with what most developers want to use&#0160;outside.</li>
</ol>
<p>The third point has some subtleties: a pure C++ API could (in theory) be version independent, but whenever C-runtime or&#0160;library classes are used in function signatures (or class derivations), then you do become more closely linked to the specific version of the compiler used to build the API provider (i.e. Maya). So while clients of C++ APIs don&#39;t automatically need to use the same compiler version as the API provider, plug-ins using Maya C++ API do have this requirement. Also strictly speaking you could use some other compiler with Maya, but it is not guaranteed it will always work nicely, and will increase the memory footprint of the running Maya instance.</p>
<p>It&#39;s ADN&#39;s job to help minimize our developers&#39; pain on both these fronts, whether when dealing with migration issues or helping explain the additional features and APIs available in a new release of one of our products.</p>
</div>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Maya and Python a love story?
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: maya-and-python-a-love-story
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: MEL
CATEGORY: Python

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/06/maya-and-python-a-love-story.html 
DATE: 06/03/2012 11:25:48 AM
-----
BODY:
<p>With version 8.5, Maya introduced Python as a complementary language to MEL and C++. I have to say, Python isn’t my preference (sorry Kristine – she is a big fan of Python ;). I said it isn’t my preference but not because of what Python is or can do, but because of the indentation requirements and syntax scheme. I feel returning to my Lisp experience with AutoCAD 25 years ago where if you had forgotten a parenthesis somewhere, your code would not execute properly, and you don’t know why up front&nbsp;%\. I would have preferred myself a more elegant syntax wise language such as PHP or Javascript. Javascript being more popular than Python as well.</p>
<p><a class="asset-img-link" style="display: inline;" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d01761534fd82970c-pi"><img class="asset  asset-image at-xid-6a0163057a21c8970d01761534fd82970c" style="display: block; margin-left: auto; margin-right: auto;" title="Love-story" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d01761534fd82970c-800wi" border="0" alt="Love-story" /></a></p>
<p>Anyway, Python is very popular in WEB programing and is now as well in the Maya scripting ecosystem. Every year I am running an API survey in the developer community and I can see a trend on the Python adoption. Python is there and to stay.</p>
<p>Back to the technical side. Python is very powerful like all the other scripting languages, but before anything I need to clarify one thing which did confuse people a lot in the past. There is 2 implementation of Python in Maya.</p>
<ol>
<li>the command interpreter</li>
<li>the API</li>
</ol>
<p>The command interpreter is an attempt to replace MEL as the scripting language of Maya while Maya still heavily use MEL for all its UI paradigm. Also the command interpreter implementation wasn’t really design like it should have been. For example the following code isn’t taking any advantages of the Python language. If you wonder why that is, the answer is that it was generated automatically using some strange rules to simplify the port at that time. But once it is there, you can’t change it :(</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white;">
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">import</span> maya<span style="color: blue;">.</span>cmds <span style="color: blue;">as</span> cmds</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; cmds<span style="color: blue;">.</span>polySphere <span style="color: teal;">(</span>r<span style="color: teal;">=</span>’5’<span style="color: teal;">)</span></p>
</div>
<p>Chad Dombrova from ‘Luma Pictures’ made an attempt with PyMel to solve that issue (Note that PyMel is now part of the Maya distribution even if PyMel isn’t maintained by Autodesk). PyMel solves a lot of syntax issue for the please of Python developers.</p>
<p>The API implementation was also generated automatically using SWIG. SWIG is very powerful, but as any automatic instrumentation, it does only was it was told to do. This is why you can find a 1 to 1 match between the C++ and Python API with very few additions on the Python side to convert C++ types to Python and vice et versa. One of the is that since Python do not have notion of pointers and that the Maya C++ API uses pointers in some places, the Maya team had to adjust the API accordingly. See the MScriptUtil Python class for example.</p>
<p>Another thing to note is that the Python API was not accessible in the Script editor at the beginning, but since few releases it is. That means you can mix commands and API calls all together in your Python code – a nice plus for Python.</p>
<p>But the real question is why using Python versus MEL / C++?</p>
<p>The question isn’t really easy to answer, but I’ll try to give some hints for you to decide what is best for you.</p>
<p>First, be aware that Python is an interpreted language and that means it can have a performance hit vs C++. Someone may tell, yes interpreted but you can compile it. Don’t trust that guy – unfortunately, that guy should have said precompiled, because Python is never compiled, it remains an interpreted language. All precompile means is that the ASCII formatted is precompiled is a simpler / lighter component that the Python interpreter would not need to parse and verify syntax. Performance wise this has almost no impact.</p>
<p>In practice, using Python to call a Maya command or a Maya API would not have any significant performance hit. That is because the Maya Python implementation is a thin wrapper of its MEL or C++ equivalent. Where Python is bad at for Maya is when you do either compute any non Maya API or call a limited set of the Maya API where Maya needs to convert Python types to Maya types and vice et versa. On this last item, the performance hit will show up only if you do this in a loop for a big number of iteration.</p>
<p>Second, I mentioned in the previous paragraph the notion of precompile Python module. Someone can decide to not send its .py file, but the .pyo/.pyc file instead. The code will execute fine on the machine and Python would be happy with that as it creates these anyway from the .py file before executing. But do not think it is a way for you to protect your IP – it is fairly easy to decompile and retrieve the original source code (with losing the function, variable names). But it is a good way to redistribute modules and prevent end users to make any changes in your code easily.</p>
<p>Third, Python is a great tool at prototyping, the Maya API architect does this a lot – prototyping in Python and do the final implementation in C++. Because you do not need to compile the workflow for development/testing is a lot simpler.</p>
<p>Finally, like C++ (but unlike MEL) you can debug Python code using WinG, Eclipse, Visual Studio, etc… I'll talk more specifically about this in a future post.&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Enabling .Net in a Maya plug-in  
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
ALLOW PINGS: 1
BASENAME: enabling-net-in-a-maya-plug-in-
CATEGORY: .Net
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: Maya
CATEGORY: WCF
CATEGORY: Windows
CATEGORY: WPF

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/enabling-net-in-a-maya-plug-in-.html 
DATE: 05/28/2012 12:00:00 AM
-----
BODY:
<p>Maya API is exposed in C++ or Python only. There is no .Net API, but in case someone needs to use a .Net assembly in his plug-in, here some code and instructions on how to proceed.</p>
<div style="font-family: Courier New; font-size: 8pt; color: black; background: white; class="fff";">
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&lt;metahost.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: blue;">#pragma</span> <span style="color: blue;">comment</span>(<span style="color: blue;">lib</span>, <span style="color: #a31515;">&quot;mscoree.lib&quot;</span>)</p>
<p style="margin: 0px;"><span style="color: blue;">#include</span> <span style="color: #a31515;">&quot;mscorlib.tlh&quot;</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: green;">//#include &lt;Mscoree.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: green;">//#include &lt;comdef.h&gt;</span></p>
<p style="margin: 0px;"><span style="color: green;">//#import </span></p>
<p style="margin: 0px;"><span style="color: green;">//&nbsp;&nbsp;&nbsp; &quot;C:\\WINDOWS\\Microsoft.NET\\Framework\\v1.1.4322\\mscorlib.tlb&quot;</span></p>
<p style="margin: 0px;"><span style="color: green;">//&nbsp;&nbsp;&nbsp; raw_interfaces_only rename( &quot;ReportEvent&quot;, &quot;reportEvent&quot; )</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">ICLRMetaHost *pMetaHost =NULL ;</p>
<p style="margin: 0px;">ICLRRuntimeInfo *pRuntimeInfo =NULL ;</p>
<p style="margin: 0px;">ICorRuntimeHost *pCorRuntimeHost =NULL ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">CComPtr&lt;mscorlib::_Assembly&gt; spMyAssembly ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: green;">//- Call InitializeCLR() from initializePlugin()</span></p>
<p style="margin: 0px;"><span style="color: blue;">bool</span> InitializeCLR (PCWSTR pszVersion <span style="color: green;">/* =L&quot;v4.0.30319&quot; */</span>) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; ::CoInitialize (NULL) ;</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- ICorRuntimeHost and ICLRRuntimeHost are the two CLR hosting</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- interfaces supported by CLR 4.0. Here we demo the</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- ICorRuntimeHost interface that was provided in .NET v1.x,</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- and is compatible with all .NET Frameworks.</span></p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Load and start the .NET runtime.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; HRESULT hr =CLRCreateInstance (CLSID_CLRMetaHost,</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IID_PPV_ARGS(&amp;pMetaHost)) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Get the ICLRRuntimeInfo corresponding to a particular CLR</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- version. It supersedes CorBindToRuntimeEx with</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- STARTUP_LOADER_SAFEMODE.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; hr =pMetaHost-&gt;GetRuntime (pszVersion,</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IID_PPV_ARGS(&amp;pRuntimeInfo)) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Check if the specified runtime can be loaded into the</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- process. This method will take into account other runtimes</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- that may already be loaded into the process and set</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- pbLoadable to TRUE if this runtime can be loaded in an</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- in-process side-by-side fashion.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; BOOL fLoadable =<span style="color: blue;">false</span> ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; hr =pRuntimeInfo-&gt;IsLoadable (&amp;fLoadable) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( FAILED(hr) || !fLoadable )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> (<span style="color: blue;">false</span>) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Load the CLR into the current process and return a runtime</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- interface pointer. ICorRuntimeHost and ICLRRuntimeHost are</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- the two CLR hosting interfaces supported by CLR 4.0. Here</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- we demo the ICorRuntimeHost interface that was provided in</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- .NET v1.x, and is compatible with all .NET Frameworks.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; hr =pRuntimeInfo-&gt;GetInterface (CLSID_CorRuntimeHost,</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; IID_PPV_ARGS(&amp;pCorRuntimeHost)) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; hr =pCorRuntimeHost-&gt;Start () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> (hr == S_OK) ;</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: green;">//- Call TerminateCLR() from uninitializePlugin()</span></p>
<p style="margin: 0px;"><span style="color: blue;">void</span> TerminateCLR () {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; spMyAssembly.Release () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( pMetaHost )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pMetaHost-&gt;Release () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( pRuntimeInfo )</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pRuntimeInfo-&gt;Release () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">if</span> ( pCorRuntimeHost ) {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green;">//- Note that after a call to Stop, the CLR cannot be</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green;">//- reinitialized into the same process. This step is</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green;">//- usually not necessary. You can leave the .NET</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span style="color: green;">//- runtime loaded in your process.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; HRESULT hr =pCorRuntimeHost-&gt;Stop () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; pCorRuntimeHost-&gt;Release () ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; }</p>
<p style="margin: 0px;">}</p>
<p style="margin: 0px;">&nbsp;</p>
<p style="margin: 0px;"><span style="color: green;">//- Call LoadMyAssembly() from initializePlugin()</span></p>
<p style="margin: 0px;"><span style="color: green;">//- After that you can call your .Net assembly code.</span></p>
<p style="margin: 0px;"><span style="color: blue;">bool</span> LoadMyAssembly () {</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Load the NET assembly.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Get a pointer to the default AppDomain in the CLR.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; CComPtr&lt;IUnknown&gt; spAppDomainThunk ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; HRESULT hr =pCorRuntimeHost-&gt;GetDefaultDomain (</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &amp;spAppDomainThunk) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; CComQIPtr&lt;mscorlib::_AppDomain&gt; spDefaultAppDomain</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (spAppDomainThunk) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Load the .NET assembly.</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: green;">//- Must resides in Maya bin folder or GAC</span></p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; bstr_t bstrMyAssembly (_T(<span style="color: #a31515;">&quot;myAssembly&quot;</span>)) ;</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; hr =spDefaultAppDomain-&gt;Load_2(bstrMyAssembly,&amp;spMyAssembly);</p>
<p style="margin: 0px;">&nbsp;&nbsp;&nbsp; <span style="color: blue;">return</span> (hr == S_OK) ;</p>
<p style="margin: 0px;">}</p>
</div>
<p>Note that you can also use the .Net Interop API to access the Maya C++ API, if you wish to access Maya API from .Net code, but I would recommend not to. Instead expose a .Net functionality class that you can call from your code. The sample above is really how to get access from a Maya plug-in to a .Net assembly not using Maya. But we will explore more on this in a following post.</p>
<p>&nbsp;</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Webcast in the making
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: webcast-in-the-making
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: C++
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Training
CATEGORY: WebBlogs

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/webcast-in-the-making.html 
DATE: 05/26/2012 02:33:11 AM
-----
BODY:
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f67fb970b-pi" style="display: inline;"><img alt="Learn-online" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167673f67fb970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f67fb970b-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Learn-online" /></a><br />I thought I’d mention one of the projects we’re working on in DevTech right now. While the Maya Python training as been delivered already (and recorded - see my previous post), there is more coming:</p>
<ol>
<li>
<p>MotionBuilder/OpenReality SDK (Python/C++)<br /> starting on May 29th 2012 - 1 hour per day during 9 days</p>
</li>
<li>
<p>3ds Max SDK (C++)<br /> starting on July 16th 2012 for English - 1 hour per day during 10 days<br /> July 30th 2012 for Japanese - 1 hour per day during 10 days</p>
</li>
<li>
<p>FBX (C++)++)<br /> starting on June 18th 2012 for English - 1 hour per day during 5 days<br /> September 3rd 2012 for Japanese - 1 hour per day during 5 days</p>
</li>
</ol>
<p>Note these trainings are best to be attended to get a better experience and be able to ask questions to our API expert delivering the training. But they will be recorded and posted on the developer pages on Autodesk.com few weeks after the end.</p>
<p>Register <a href="http://www.adskconsulting.com/adn/cs/api_course_sched.php" target="_blank">here </a>to attend.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Getting started with Autodesk's APIs
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: getting-started-with-autodesks-apis
CATEGORY: 3ds Max
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel
CATEGORY: DevCasts
CATEGORY: DevTV
CATEGORY: FBX
CATEGORY: Maya
CATEGORY: MotionBuilder
CATEGORY: Python
CATEGORY: Training

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/getting-started-with-autodesks-apis.html 
DATE: 05/26/2012 02:20:39 AM
-----
BODY:
<table>
<tbody>
<tr>
<td>
<p>Autodesk has a wide range of products that expose Application Programming Interfaces (APIs), to the point that it can be a bit overwhelming for developers new to our products. A great place to look for introductory information around developing with Autodesk software is the Developer Center on Autodesk.com:</p>
<ul>
<li><a href="http://www.autodesk.com/developer">http://www.autodesk.com/developer</a></li>
</ul>
<p>From here you will be able to navigate to individual Developer Centers for a number of our products, some of which I’ve provided direct links to below:</p>
<ul>
<li><a href="http://www.autodesk.com/developmaya">http://www.autodesk.com/developmaya</a> <em>(Maya)</em></li>
<li><a href="http://www.autodesk.com/develop3dsMax">http://www.autodesk.com/develop3dsMax</a> <em>(3ds Max)</em></li>
<li><a href="http://www.autodesk.com/developmotionbuilder">http://www.autodesk.com/developmotionbuilder</a> <em>(MotionBuilder)</em></li>
<li><a href="http://www.autodesk.com/developfbx">http://www.autodesk.com/developfbx</a> <em>(FBX)</em></li>
</ul>
</td>
<td><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f7ed9970b-pi" style="display: inline;"><img alt="Beginner2" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0167673f7ed9970b" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0167673f7ed9970b-800wi" title="Beginner2" /></a><br /></td>
</tr>
</tbody>
</table>
<p>Each of these Developer Centers contains a collection of resources that you, as an Autodesk developer, can harness to implement software based on an Autodesk platform, integrated with Autodesk product or service, or containing Autodesk component technology.</p>
<p>For instance, the Maya Developer Center contains the <strong>Maya Python API Training Webcast Archive</strong>, the training material my team uses when training aspiring Maya Python developers around the world (note C++ developers would benefit from the training as well since the Maya C++ and Python API are almost a 1 to 1 match). These Developer Centers also contain information on how to access the various developer-related documentation that ship with our products and SDKs.</p>
<p>Aside from offline learning resources, you’ll also find links to the discussion groups and to the Autodesk Developer Network, should you need to get support from other members of the Autodesk development community or directly from Autodesk.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Introduction to DevTech
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 1
BASENAME: introduction-to-devtech
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/introduction-to-devtech.html 
DATE: 05/26/2012 02:09:07 AM
-----
BODY:
<p>I&#39;m very pleased to be part of a great team at Autodesk: the M&amp;E Developer Technical Services team (DevTech M&amp;E), whose focus is on providing high quality services to members of the Autodesk Developer Network (ADN Sparks). Aside from providing technical support for programming-related questions, we also write technical solutions, present at technical conferences like GDC, AU, ... , provide API training and mentoring (a specific type of short-term consulting), and liaise regularly with our Engineering teams.</p>
<p><a class="asset-img-link" href="http://around-the-corner.typepad.com/.a/6a0163057a21c8970d0163064dcb8b970d-pi" style="display: inline;"><img alt="Devtech" border="0" class="asset  asset-image at-xid-6a0163057a21c8970d0163064dcb8b970d" src="https://around-the-corner.typepad.com/.a/6a0163057a21c8970d0163064dcb8b970d-800wi" style="display: block; margin-left: auto; margin-right: auto;" title="Devtech" /></a><br />The team is spread around the world: (from left to right) Kristine Middlemiss and Naiqi Weng are based in Toronto (Canada), Kevin Vandecar is based in Manchester (USA), and Akira Kudo based in Tokyo (Japan). Everyone in the team is a programming expert focusing on multiple products and wearing many hats… We believe very strongly that providing hands-on support is a great way to develop strong technical skills that are of use in other parts of our job, so everyone in the team (managers included) is involved in answering questions from our ADN members.</p>
<p>The team currently covers most of the spectrum of Autodesk products exposing APIs. Support for non Media &amp; Entertainment products is handled by another team within the company, but we share tools (such as our web-based case-submission front-end) and processes.</p>
<p>You’ll hopefully get to know members of DevTech M&amp;E as time goes on – I’ll be using this blog to showcase their work, sharing some of the tips and techniques they use (and discover) as part of their respective jobs.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Cyrille Fauvel
STATUS: Publish
ALLOW COMMENTS: 0
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: cyrille-fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/cyrille-fauvel.html 
DATE: 05/15/2012 08:32:30 AM
-----
BODY:
<p>Cyrille has been with Autodesk since 1993 focusing on providing programming support, consulting, training and evangelism to external developers. He has worked for Autodesk in a number of countries: he started his career in the Switzerland and has – so far – working from Switzerland, the United States and France. He and his family have now settled back in Brittany the home land of Cyrille’s wife. Cyrille’s current position is Manager of the ADN Sparks (or ADN M&amp;E), the worldwide team of API gurus providing technical services through the Autodesk Developer Network.</p>
<p>Cyrille can be contacted <a href="mailto:cyrille.fauvel@autodesk.com">by email</a>, but please don't expect him to provide support: if you need support for our products or APIs, please visit Autodesk's <a href="http://support.autodesk.com/">support website</a>, use our <a href="http://discussion.autodesk.com/">discussion groups</a>, visit the <a href="http://area.autodesk.com/">AREA</a> community  portal with dedicated M&amp;E blogs and discussion group or post a question via your reseller or the <a href="http://adn.autodesk.com/">Autodesk Developer Network website</a>, if you're a member.</p>
<p><strong>Disclaimer</strong><br />If you need an official Autodesk company response or a contact for press-related activities please contact <a href="http://www.autodesk.com/pressroom">Autodesk Public Relations</a>.</p>
<p>The contents of this site are my own personal opinions and do not represent my employer's view in any way. In addition, my thoughts and opinions often change, and as a weblog is intended to provide a semi-permanent point-in-time snapshot you should not consider out-of-date posts to reflect my current thoughts and opinions.</p>
<p>The code provided in this blog is provided "as is" and with all faults. I (and my employer) specifically disclaim any implied warranty of merchantability or fitness for a particular use. The operation of the code provided is not warranted to be uninterrupted or error free.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Welcome   
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: wysiwyg
ALLOW PINGS: 0
BASENAME: welcome
CATEGORY: Autodesk
CATEGORY: Cyrille Fauvel

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/welcome.html 
DATE: 05/15/2012 08:16:47 AM
-----
BODY:
<p>Welcome to “Around the Corner”, a blog dedicated to plug-in developers working with Maya, MotionBuilder, FBX and any other technology that strikes our fancy at the moment of blogging. This blog is maintained by Cyrille Fauvel and Kristine Middlemiss, who are 2/6’s of the Media &amp; Entertainment worldwide team of API gurus providing technical services through the Autodesk Developer Network.</p>
<p>When either of us comes across some information on programming for Autodesk technologies that we think you’ll be interested in, then you can expect it to be posted here. That will be technical (how-to) solutions derived from answering questions from ADN partners and from Autodesk forum users, sample projects, white papers screencasts, conference presentation material, and other information derived from our work. This blog is a vehicle to put lots of up to date information in one place so you can easily find what you need to solve your programming problems.</p>
<p>Here is some information about us…</p>
<p>[Cyrille Fauvel]… A little about Cyrille… I have worked with a number of Autodesk’s products and APIs over the years – my background is mainly with AutoCAD and Maya’s APIs, but I’ve also spent some serious time with RealDWG, AutoCAD OEM, Inventor and FBX (as well as with MapGuide, 3ds Max but that’s going back a bit :-). These days a good portion of my time is spent on team coordination and business development, but I do still get involved in technical issues on a regular basis (and even answer the odd support question coming in from an ADN member).</p>
<p>[Kristine Middlemiss]…Most often sitting in Toronto’s Autodesk office, I get the unique opportunity to be somewhat of a jack of all trades to the Media &amp; Entertainment API world! &#0160;What I mean by this is I get to do all the things I love; coding, educating, supporting, mentoring, writing, organizing, and most importantly talking J I am pretty excited about starting this blog, and sharing with you what I know, what I don’t know, and all the things in-between.&#0160; I recently saw on a friends Facebook page this quote by Einstein which stuck with me because I feel it’s so true: “If you can’t explain it simply, you don’t understand it well enough”, this will be my motto for all my blog posts, wish me luck!</p>
<p>If you have suggestions for interesting topics to cover in this blog, please feel free to contact us at <a href="mailto:aroundthecorner@autodesk.com">aroundthecorner@autodesk.com</a>. Neither our blog nor our email accounts should be considered channels for receiving support, however, and we make no guarantees that we will be able to address topics that are proposed. But please do feel free to drop us a line.</p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
COMMENT:
AUTHOR: Patrick EMIN
EMAIL: webmaster@augifr.fr
IP: 109.0.210.72
URL: http://www.augifr.fr
DATE: 06/08/2012 10:42:31 AM
Thanks for this new blog, more and more developpers ressources are made available and this is a good thing because ressources were scarce before that...
-----
--------
AUTHOR: Cyrille Fauvel
AUTHOR EMAIL: cyrille.fauvel@autodesk.com
TITLE: Welcome to your new TypePad blog!
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 1
ALLOW PINGS: 0
BASENAME: welcome-to-your-new-typepad-blog

UNIQUE URL: https://around-the-corner.typepad.com/adn/2012/05/welcome-to-your-new-typepad-blog.html 
DATE: 05/11/2012 09:46:40 AM
-----
BODY:
<h3><span style='color: #0060bf;'><strong>Welcome! This is the first post on your new TypePad blog.</strong> </span></h3><p><strong>This post is in a Draft state</strong> which means only you can see it. We've included this post so you can have something to work with when choosing a design for your blog. To choose a design, click the Design tab at the top of this page and then click the "Choose a Theme" button. </p><p><strong>To delete this post,</strong> click the Posts tab at the top of this page. That's where you'll see all of the posts that you create. Click on the drop-dowm menu and choose "Delete."</p><p><strong>To write your first post</strong>, click the Compose button at the top of this page. </p>
-----
EXTENDED BODY:

-----
EXCERPT:

-----
KEYWORDS:

-----
--------
