---
layout: "post"
title: "Adjusting zoom to fit in the Forge viewer"
date: "2019-03-14 11:38:56"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk"
original_url: "https://www.keanw.com/2019/03/adjusting-zoom-to-fit-in-the-forge-viewer.html "
typepad_basename: "adjusting-zoom-to-fit-in-the-forge-viewer"
typepad_status: "Publish"
---

<p>A question came up during <a href="https://www.keanw.com/2019/03/at-the-forge-accelerator-in-dublin.html" target="_blank">this week’s Forge Accelerator in Dublin</a> that I thought would be of broader interest. It related to the fact that the Forge viewer’s default behaviour when you double-click the background and perform a zoom-to-fit isn’t always desirable. In this case the developer was fine with a zoom-to-fit being performed, but felt the resultant view wasn’t a good enough fit.</p><p>Here’s the default zoom level on double-click in <a href="http://dasher360.com" target="_blank">Dasher 360</a>, for instance:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a46ee235200d-pi"><img width="500" height="312" title="Zoom to fit" style="margin: 30px auto; float: none; display: block;" alt="Zoom to fit" src="/assets/image_688381.jpg"></a></p><p>As you can see the model remains quite far from the camera.</p><p>The good news is that debugging into the Forge viewer source, you can easily see where this calculation happens, and it’s based on a few variables that can be modified in your custom application.</p><p>From your GuiViewer3D instance, you can access the following properties via the navigation object:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a46ee239200d-pi" target="_blank"><img width="500" height="283" title="Default navigation state" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Default navigation state" src="/assets/image_112997.jpg" border="0"></a></p><p>The main variables – with the default value of 0.05 – are FIT_TO_VIEW_HORIZONTAL_MARGIN and FIT_TO_VIEW_VERTICAL_MARGIN. This means – as far as I can tell from the code – that the camera will be moved 5% further away than the position at which it has a tight fit for the model.</p><p>The obvious thing to try is to set these to zero. I actually found this made very little difference (probably exactly 5%, in fact ;-), so ended up tweaking the variables to move the camera a bit more radically.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a4938719200b-pi" target="_blank"><img width="500" height="283" title="Modified navigation state" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Modified navigation state" src="/assets/image_554378.jpg" border="0"></a></p><p>Setting these two variables to –0.5 (moving the camera 50% closer to the target) and tweaking FIT_TO_VIEW_VERTICAL_OFFSET to 0.15 resulted in a much better fit, at least for this model. (As a hint, it’s much easier to set a breakpoint – such as in the computeFit ot fitBounds function – and then modify the state in the browser before you end up adding custom code to your application… this is a handy way to work out what the best values are for your particular application requirements.)</p><p>Here’s how it looks with these tweaks:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a445c014200c-pi"><img width="500" height="312" title="Zoom to fit better" style="margin: 30px auto; float: none; display: block;" alt="Zoom to fit better" src="/assets/image_653974.jpg"></a></p><p>I’m heading back a bit early from a great week, here in Dublin. I’ll post a brief summary when I’m back home tomorrow.</p><p><br></p><p><br></p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a46ee235200d-pi"><br></a></p>
