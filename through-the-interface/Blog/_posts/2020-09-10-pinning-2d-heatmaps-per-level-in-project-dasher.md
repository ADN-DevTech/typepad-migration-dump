---
layout: "post"
title: "Pinning 2D heatmaps per-level in Project Dasher"
date: "2020-09-10 18:09:55"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk Research"
  - "IoT"
original_url: "https://www.keanw.com/2020/09/pinning-2d-heatmaps-per-level-in-project-dasher.html "
typepad_basename: "pinning-2d-heatmaps-per-level-in-project-dasher"
typepad_status: "Publish"
---

<p>So far in this series we’ve looked at <a href="https://www.keanw.com/2020/08/displaying-a-2d-heatmap-when-surface-shading-inside-dasher.html" target="_blank">creating 2D heatmaps</a>, <a href="https://www.keanw.com/2020/08/creating-a-resizable-square-panel-inside-the-forge-viewer.html" target="_blank">making them resizable</a>, and then <a href="https://www.keanw.com/2020/09/viewing-multiple-heatmaps-inside-project-dasher.html" target="_blank">adding lots of them</a> inside <a href="https://dasher360.com" target="_blank">Project Dasher</a>.</p><p>I’ve mentioned a few times – and I’ve seen the same commented via LinkedIn – that viewing data from multiple building floors at the same time would be beneficial. As a reminder, here’s what happens when you change floors with the current implementation:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026be410402b200d-pi" target="_blank"><img width="500" height="312" title="Showing floors" style="margin: 30px auto; float: none; display: block;" alt="Showing floors" src="/assets/image_335159.jpg"></a></p><p>The UX to implement some kind of “pinning” mechanism was non-trivial, but possible. The way I ended up thinking about this was as follows:</p><ul><li>We still want generic panels that will show data for a particular sensor type from whichever level is currently being displayed (as we have in the above GIF).</li><li>These panels can be “pinned” for the current level, which will change the panel’s title and pinning status.</li><li>It’s possible to have both a generic panel for the current level as well as one that’s been pinned: these will look the same, except for the title.</li><ul><li>In this case it shouldn’t be possible to pin the generic panel or unpin the pinned one, as we don’t want multiple, identical panels (whether generic or pinned).</li></ul></ul><p>That’s the logic, anyway. I went ahead and implemented it, and it works pretty well. Here’s how you can pin heatmaps for different level – you can see how pinning gets enabled or disabled for individual panels in the case of a “name conflict”:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20263e964220e200b-pi" target="_blank"><img width="500" height="312" title="Pinning and unpinning" style="margin: 30px auto; float: none; display: block;" alt="Pinning and unpinning" src="/assets/image_702594.jpg"></a></p><p>This is currently a little clunky, in that it’s complicated to navigate through the various layer/sensor type combinations and find the ones you want. We’re thinking of how to streamline that process, so watch this space on that front.</p><p>We’ve also been thinking about how to integrate MEP (etc.) data into these 2D views… understanding the mechanical systems in the building can be very valuable when making sense of occupant comfort data. We’re looking into what’s possible there, too, so the next couple of weeks should be pretty interesting!</p><p>In the meantime, here’s an animation showing pinned sensor panels for data from <a href="https://www.keanw.com/2020/08/project-dasher-at-kingspans-ikon-building.html" target="_blank">Kingspan’s IKON building</a>, as this has a variety of active sensors across multiple floors and shows off the capability nicely:</p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20263e9642212200b-pi" target="_blank"><img width="500" height="312" title="Pinned IKON heatmaps" style="margin: 30px auto; float: none; display: block;" alt="Pinned IKON heatmaps" src="/assets/image_640369.jpg"></a>
