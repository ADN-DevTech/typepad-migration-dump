---
layout: "post"
title: "AutoCAD integration samples for Kinect for Windows 2 &ndash;Part 2"
date: "2014-08-26 15:23:53"
author: "Kean Walmsley"
categories:
  - "AutoCAD"
  - "AutoCAD .NET"
  - "Kinect"
  - "Point clouds"
  - "Reality capture"
original_url: "https://www.keanw.com/2014/08/autocad-integration-samples-for-kinect-for-windows-2-part-2.html "
typepad_basename: "autocad-integration-samples-for-kinect-for-windows-2-part-2"
typepad_status: "Publish"
---

<p>Following on from <a href="http://through-the-interface.typepad.com/through_the_interface/2014/08/autocad-integration-samples-for-kinect-for-windows-2-part-1.html" target="_blank">the introduction to this series</a> – and to the Kinect for Windows v2 sensor – it’s time to take a closer look at some of <a href="http://through-the-interface.typepad.com/files/KinectSamples-v2.0.zip" target="_blank">the AutoCAD integration samples</a>.</p>  <p>At the core of the Kinect sensor’s capabilities are really two things: the ability to capture <strong>depth</strong> data and to detect people’s <strong>bodies</strong> in the field of view. There are additional bells and whistles such as audio support, Kinect Fusion and face tracking, but the foundation is really about RGB-D input and the additional runtime analysis required to track humans.</p>  <p>Let’s take a look at both of these. I’ve captured the below animated GIFs – keeping them as lightweight as possible, so the site still loads in a reasonable time – that demonstrate these two foundational capabilities.</p>  <p>Capturing point clouds in AutoCAD can be achieved with the original <strong>KINECT</strong> command (along with variants such as <strong>KINBOUNDS</strong> and <strong>KINSNAPS</strong>, which enable clipping and timelapse capture, respectively).</p>  <p>Here’s an example capture with a lot of the frames edited out: the point here is to show the approximate quality of the capture, rather than the smoothness of the processing.</p>  <br/> <a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201a73e08ef40970d-pi"><img title="The KINECT command" style="display: inline" alt="The KINECT command" src="/assets/image_410171.jpg" width="470" height="373" /></a> <br/> <br/>  <p>This is all from a single frame of RGB-D data – you can clearly capture much more with Kinect Fusion (which we’ll look at next time).</p>  <p>The above point cloud has 183,810 points (the theoretical maximum being 512 x 424 = 217,088 points, given the resolution of the depth camera). This is a fair bit higher than with KfW v1, which had a theoretical depth resolution of 320 x 240 (i.e. a max of 76,800 points), although it seemed to give you more when you mapped 640 x 480 RGB data to depth. You were presumably getting multiple adjacent – and potentially differently coloured – pixels with the same depth values, as the generated point clouds could indeed contain up to about 300K points. The quality of the depth data is certainly better with KfW v2 while the processing is also snappier.</p>  <p>For instance, let’s take a look at skeleton tracking, which can be shown inside AutoCAD using the <strong>KINSKEL</strong> command:</p>  <br/> <a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201a73e08ef4a970d-pi"><img title="The KINSKEL command" style="display: inline" alt="The KINSKEL command" src="/assets/image_109268.jpg" width="470" height="373" /></a> <br/> <br/>   <p>(There’s also a command that displays point cloud data overlaid with the skeleton data – the <strong>KINBOTH</strong> command – but I’m not showing it in this post. You can imagine how it works. :-)</p>  <p>Skeleton tracking is much smoother and cleaner than before – it’s much less jerky and with fewer flailing limbs – even if we’re still a ways off doing industrial-strength <a href="http://en.wikipedia.org/wiki/Motion_capture" target="_blank">Mo-cap</a>. The joint count has increased to 25 from the previous 20: there’s an additional joint in the neck and two more in each of the hands. Which means you get hand tracking – you can see whether the hand is open or closed, between the fingertips and the thumb – although not finger tracking, even if the sensor resolution is probably now sufficient for that, too.</p>  <p>Aside from the increase in the number of joints, their placement is now more biologically accurate, too. The hips and neck are much closer to where they are in real life with this version of the device.</p>  <p>This more precise skeletal tracking can clearly enable tighter application integrations. For instance, as we saw with <a href="http://through-the-interface.typepad.com/through_the_interface/2013/12/merry-christmas.html" target="_blank">this previous post</a>, the <strong>KINEXT2</strong> command – which sweeps pipes along the path through the air that your hand takes – can now use the distance between your thumb and your fingertips to specify the diameter of the circular extrusion profile. Which is much more precise than using the distance between both hands. (In fact the <strong>KINNEAR</strong> system variable – which previously enabled the now-redundant “near mode” with KfW v1 – is now only used to choose between these two different approaches for specifying the profile radius.)</p>  <p>Other commands for drawing geometry are also still there in the application, of course, such as <strong>KINPOLY</strong> – for drawing 3D polylines in space – and <strong>KINEXT</strong> – which works in a similar way to KINEXT2, but this this time with a pre-specified profile radius.</p>  <p>That’s it for this run through of the basic commands integrating depth and skeleton data into AutoCAD. In the next post we’ll move on to two more advanced capabilities, face tracking and Kinect Fusion.</p>
