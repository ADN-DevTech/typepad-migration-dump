---
layout: "post"
title: "Enabling Visual Studio Code&rsquo;s integrated web debugging"
date: "2017-02-01 11:32:25"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk"
  - "Debugging"
  - "JavaScript"
  - "Visual Studio"
original_url: "https://www.keanw.com/2017/02/enabling-visual-studio-codes-integrated-web-debugging.html "
typepad_basename: "enabling-visual-studio-codes-integrated-web-debugging"
typepad_status: "Publish"
---

<p>Yesterday I finally took the time to work on one of those tasks that had previously never quite bubbled up to the top of my priority list. Since I’ve been working on <a href="http://dasher360.com" target="_blank">Dasher 360</a> I’ve put up with using the developer tools built into Chrome for debugging. While these are pretty good – especially with source-map support, allowing us to debug the source TypeScript code – which is the main reason I haven’t taken the time to do otherwise, they do have their limitations: just for instance, you very often start to edit code in the debugger before realising you’re not modifying the source itself. This regularly drives me crazy.</p> <p>So it was that I took the time to work out how to use a couple of VS Code’s debugging capabilities. Both my co-developer – Simon Breslav – and I have ended up gravitating towards VS Code as our primary IDE. He’s using it on Windows while I use it on a Mac, which is in itself pretty cool – as well as being a good test of whether what we’re doing (and creating) is cross-platform. He’s out on vacation, this week, so it’ll be interesting to see whether the stuff I’ve done works over there without modification.</p> <p>The first of VS Code’s debugging capabilities of interest to our project – and one that is integrated directly into the tool – is the ability to debug <a href="https://nodejs.org/" target="_blank">Node.js</a> (i.e. server-side JavaScript). For now there’s not a significant amount of code on our server-side, although this will change, over time. My main reason for wanting this piece to work is for the ability to fire off a build – and launch the server, once it’s complete – without having to switch to a command prompt or terminal window.</p> <p>The second – which needs to be <a href="https://marketplace.visualstudio.com/items?itemName=msjsdiag.debugger-for-chrome" target="_blank">installed via an extension</a> – is the ability to integrate with Chrome debugging. This was ultimately the bigger priority for where we are today.</p> <p>Both of these capabilities are enabled via the same mechanism: you need to add a <em>launch.json</em> file to your project’s <em>.vscode</em> folder. To integrate your build process, you’ll probably need to have a <em>tasks.json</em> defining that, too.</p> <p>Here’s our current <em>launch.json</em>:</p> <div style="font-size: 8pt; font-family: courier new; background: white; color: black; line-height: 140%"> <p style="margin: 0px">{</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"version"</span>: <span style="color: #a31515">"0.3.0"</span>,</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"configurations"</span>: [</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"name"</span>: <span style="color: #a31515">"Launch server"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"type"</span>: <span style="color: #a31515">"node"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"request"</span>: <span style="color: #a31515">"launch"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"program"</span>: <span style="color: #a31515">"${workspaceRoot}/src/server/index.js"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"stopOnEntry"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"args"</span>: [],</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"cwd"</span>: <span style="color: #a31515">"${workspaceRoot}"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"preLaunchTask"</span>: <span style="color: #a31515">"build"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"runtimeExecutable"</span>: <span style="color: blue">null</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"runtimeArgs"</span>: [</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #a31515">"--nolazy"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ],</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"env"</span>: {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"NODE_ENV"</span>: <span style="color: #a31515">"development"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"console"</span>: <span style="color: #a31515">"internalConsole"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"sourceMaps"</span>: <span style="color: blue">false</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; },</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"name"</span>: <span style="color: #a31515">"Attach to server"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"type"</span>: <span style="color: #a31515">"node"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"request"</span>: <span style="color: #a31515">"attach"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"port"</span>: 5000,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"address"</span>: <span style="color: #a31515">"localhost"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"restart"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"sourceMaps"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"localRoot"</span>: <span style="color: #a31515">"${workspaceRoot}"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"remoteRoot"</span>: <span style="color: blue">null</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; },</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"name"</span>: <span style="color: #a31515">"Launch localhost (sourcemaps)"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"type"</span>: <span style="color: #a31515">"chrome"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"request"</span>: <span style="color: #a31515">"launch"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"url"</span>: <span style="color: #a31515">"http://localhost:5000"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"webRoot"</span>: <span style="color: #a31515">"${workspaceRoot}/build/public"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"sourceMapPathOverrides"</span>: {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"/source/*"</span>: <span style="color: #a31515">"${workspaceRoot}/*"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; },</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"name"</span>: <span style="color: #a31515">"Launch Dasher 360 staging"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"type"</span>: <span style="color: #a31515">"chrome"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"request"</span>: <span style="color: #a31515">"launch"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"sourceMaps"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"url"</span>: <span style="color: #a31515">"http://dasher-staging.not-the-real-url.com"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; },</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"name"</span>: <span style="color: #a31515">"Launch Dasher 360 production"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"type"</span>: <span style="color: #a31515">"chrome"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"request"</span>: <span style="color: #a31515">"launch"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"sourceMaps"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"url"</span>: <span style="color: #a31515">"http://dasher360.com"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p> <p style="margin: 0px">&nbsp; ]</p> <p style="margin: 0px">}</p> <p style="margin: 0px">&nbsp;</p></div> <p>It defines a couple of options for the Node server, although I admit that I’ve really only used the “launch” option, for now. “Attach” does seem to work, but my goal is to keep things in one place wherever possible.</p> <p>On the front-end debugging side we have the ability to launch the localhost – with the ability to debug our TypeScript via source-maps, yay! – as well as the staging and production instances.</p> <p>Here’s the <em>tasks.json</em> file that the “Launch server” configuration depends on for the build (for which we use gulp).</p> <div style="font-size: 8pt; font-family: courier new; background: white; color: black; line-height: 140%"> <p style="margin: 0px">{</p> <p style="margin: 0px">&nbsp; <span style="color: green">// See http://go.microsoft.com/fwlink/?LinkId=733558</span></p> <p style="margin: 0px">&nbsp; <span style="color: green">// for the documentation about the tasks.json format</span></p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"version"</span>: <span style="color: #a31515">"0.1.0"</span>,</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"command"</span>: <span style="color: #a31515">"gulp"</span>,</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"isShellCommand"</span>: <span style="color: blue">true</span>,</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"args"</span>: [<span style="color: #a31515">"--no-color"</span>],</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"showOutput"</span>: <span style="color: #a31515">"always"</span>,</p> <p style="margin: 0px">&nbsp; <span style="color: #2e75b6">"tasks"</span>: [</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; {</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"taskName"</span>: <span style="color: #a31515">"build"</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"args"</span>: [],</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"isBuildCommand"</span>: <span style="color: blue">true</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"isWatching"</span>: <span style="color: blue">false</span>,</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #2e75b6">"problemMatcher"</span>: [</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color: #a31515">"$tsc"</span></p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ]</p> <p style="margin: 0px">&nbsp;&nbsp;&nbsp; }</p> <p style="margin: 0px">&nbsp; ]</p> <p style="margin: 0px">}</p> <p style="margin: 0px">&nbsp;</p></div> <p>I’d like to add other tasks to this file, but it currently only seems to support having a single one (unless you jump through some hoops that quickly mean you have an OS-specific solution, I expect).</p> <p>Now when I debug I first launch the server, which also fires off a build…</p> <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201bb0973eec1970d-pi" target="_blank"><img title="First we launch the server" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 30px auto; display: block; padding-right: 0px; border-top-width: 0px" border="0" alt="First we launch the server" src="/assets/image_931371.jpg" width="500" height="320"></a></p> <p>Then I go and launch Chrome to open it…</p> <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201b7c8d0cd56970b-pi" target="_blank"><img title="Then we launch Chrome" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 30px auto; display: block; padding-right: 0px; border-top-width: 0px" border="0" alt="Then we launch Chrome" src="/assets/image_987209.jpg" width="500" height="320"></a></p> <p>At which point I have active debug sessions for both the server- and client-side code.</p> <p>There’s almost certainly some further streamlining we can do with this process, but I’m pretty happy with how it’s working, for now. And the ability to debug directly from VS Code – and integrate code changes right into the project – is going to be fantastic.</p>
