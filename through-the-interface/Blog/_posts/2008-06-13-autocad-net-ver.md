---
layout: "post"
title: "AutoCAD .NET version of the ObjectARX BlockView sample"
date: "2008-06-13 13:22:14"
author: "Kean Walmsley"
categories:
  - "AutoCAD"
  - "AutoCAD .NET"
  - "Graphics system"
  - "ObjectARX"
  - "User interface"
original_url: "https://www.keanw.com/2008/06/autocad-net-ver.html "
typepad_basename: "autocad-net-ver"
typepad_status: "Publish"
---

<p>Fenton Webb, from DevTech Americas, has been beavering away on a .NET port of the ObjectARX BlockView sample (found on the ObjectARX SDK under samples/graphics/BlockView). Thanks, Fents! :-)</p>  <p><a href="http://through-the-interface.typepad.com/through_the_interface/files/blockview.NET%20V1.zip">Here is the C# source project</a> for Visual Studio 2005. To build it you will almost certainly need to remap the <em>acdbmgd.dll</em> and <em>acmgd.dll</em> assembly references in the project.</p>  <p>One important note: if you load this project and try to view the BlockViewDialog in the Visual Studio Designer, the Visual Studio application will almost certainly crash. This is because the Designer is attempting to load into the dialog the GsPreviewCtrl component which depends on AutoCAD (and therefore cannot be instantiated outside of the AutoCAD process). At least that's what appears to be happening.</p>  <p>To temporarily allow the dialog to load - so you can make changes to the dialog's menu, etc. - you will need to edit the C# code in the BlockViewDialog.Designer.cs file. There are two edits that are needed - one that declares a variable for the control (lines 650-651) and one that instantiates it (lines 107-108):</p>  <p>Comment out line 650 and uncomment line 651, so...</p>  <div style="font-size: 8pt; font-family: courier new; background: white; color: black">   <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 650</span>&#160;&#160;&#160;&#160; <span style="color: blue">private</span> <span style="color: #2b91af">GsPreviewCtrl</span> mPreviewCtrl;</p>    <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 651</span>&#160;&#160;&#160;&#160; <span style="color: green">//private System.Windows.Forms.Panel mPreviewCtrl;</span></p>    <p style="font-size: 8pt; margin: 0px"><span style="color: green"></span></p> </div>  <p>... becomes...</p>  <div style="font-size: 8pt; font-family: courier new; background: white; color: black">   <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 650</span>&#160;&#160;&#160;&#160; <span style="color: green">//private GsPreviewCtrl mPreviewCtrl;</span></p>    <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 651</span>&#160;&#160;&#160;&#160; <span style="color: blue">private</span> System.Windows.Forms.<span style="color: #2b91af">Panel</span> mPreviewCtrl;</p>    <p style="font-size: 8pt; margin: 0px">&#160;</p> </div>  <p>And do the same for lines 107 and 108, so...</p>  <div style="font-size: 8pt; font-family: courier new; background: white; color: black">   <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 107</span>&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: green">//this.mPreviewCtrl = new System.Windows.Forms.Panel();</span></p>    <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 108</span>&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">this</span>.mPreviewCtrl = <span style="color: blue">new</span> <span style="color: #2b91af">GsPreviewCtrl</span>();</p>    <p style="font-size: 8pt; margin: 0px">&#160;</p> </div>  <p>... becomes...</p>  <div style="font-size: 8pt; font-family: courier new; background: white; color: black">   <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 107</span>&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">this</span>.mPreviewCtrl = <span style="color: blue">new</span> System.Windows.Forms.<span style="color: #2b91af">Panel</span>();</p>    <p style="font-size: 8pt; margin: 0px"><span style="color: #2b91af">&#160; 108</span>&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: green">//this.mPreviewCtrl = new GsPreviewCtrl();</span></p>    <p style="font-size: 8pt; margin: 0px"><span style="color: green"></span></p> </div>  <p>Then the dialog should load properly in the Visual Studio Designer, with no crash (although you'll need to change the code back to the way it was to build the application, of course).</p>  <p>As for what the application does, here's the original sample's ReadMe, updated to reflect the new application's behaviour:</p>  <div style="font-size: 8pt; font-family: courier new; background: white; color: black">   <p style="font-size: 8pt; margin: 0px">------------------------</p>    <p style="font-size: 8pt; margin: 0px"><strong>Block View Sample Readme</strong></p>    <p style="font-size: 8pt; margin: 0px">------------------------</p>    <br />    <p style="font-size: 8pt; margin: 0px">- <strong>NETLOAD</strong> the BlockView.NET.dll module</p>    <p style="font-size: 8pt; margin: 0px">- Run command <strong>BView</strong> at the AutoCAD command line.</p>    <p style="font-size: 8pt; margin: 0px">- Default operation is to display the current drawing using the current view settings of the current drawing.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>Function Descriptions</strong></p>    <p style="font-size: 8pt; margin: 0px">---------------------</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>File-&gt;Open</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Opens an existing drawing into the Block View dialog (by clearing the GraphicsSystem.View).</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>File-&gt;Output Image to Disk</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows you to output a JPG;BMP;TIFF;PNG files as a snaphot of the current view shown in the BlockView dialog.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>File-&gt;AcGsDevice Config</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">View or edit the current GraphicsSystem.Device configuration settings.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>View-&gt;Zoom</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows Zoom Extents/Zoom Window/Zoom In-Out functionality</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>View-&gt;Settings-&gt;Show</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows the toggling of various GraphicsSystem.View settings such as Linetype/Material and Sectioning</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>View-&gt;Render Mode</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows you to switch the rendering mode.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>View-&gt;View Style</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows you to change the view style of the GraphicsSystem.View. It has the same options as the SHADEMODE command.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>Tools-&gt;ReMap Colors-&gt;Custom</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Allows you to remap the color palette. This is particularily useful if you want to show a GraphicsSystem.View as a paperspace layout, with a white background. In this case you will need to remap white entities to appear in a different color.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>Tools-&gt;ReMap Colors-&gt;Standard Colors</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Restores the Color Palette back to the original one.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>Tools-&gt;Add an Entity-&gt;To This Database</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Adds an entity to the Model Space and adds to the GraphicsSystem.View.</p>    <br />    <p style="font-size: 8pt; margin: 0px"><strong>Tools-&gt;Add an Entity-&gt;Temporary</strong></p>    <br />    <p style="font-size: 8pt; margin: 0px">Adds an entity just to the GraphicsSystem.View.</p>    <p style="font-size: 8pt; margin: 0px">&#160;</p> </div>  <p>Here's a quick snapshot of the BlockView dialog with a conceptual view of the standard 3D view sample:</p>  <p><a onclick="window.open(this.href, &#39;_blank&#39;, &#39;width=641,height=454,scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left=0,top=0&#39;); return false" href="http://through-the-interface.typepad.com/.shared/image.html?/photos/uncategorized/2008/06/13/blockview_conceptual.png"><img title="Blockview_conceptual" style="float: none; margin: 30px auto; display: block" border="0" alt="Blockview_conceptual" src="/assets/blockview_conceptual.png" width="300" height="212" /></a></p>  <p><strong><em>Update:</em></strong></p>  <p align="left">Head on over to <a href="http://adndevblog.typepad.com/autocad/2014/04/graphic-changes-in-autocad-2015.html" target="_blank">the ADN DevBlog</a> for an updated version of this sample for AutoCAD 2015 onwards.</p>
