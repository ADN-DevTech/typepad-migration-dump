---
layout: "post"
title: "Using DesignScript to visualize prime numbers in AutoCAD"
date: "2012-11-08 11:02:52"
author: "Kean Walmsley"
categories:
  - "AutoCAD"
  - "DesignScript"
  - "Geometry"
original_url: "https://www.keanw.com/2012/11/using-designscript-to-visualize-prime-numbers-in-autocad.html "
typepad_basename: "using-designscript-to-visualize-prime-numbers-in-autocad"
typepad_status: "Publish"
---

<p>In <a href="http://through-the-interface.typepad.com/through_the_interface/2012/11/using-autocad-to-hunt-prime-numbers.html" target="_blank">the last post</a> we looked at some amazing visualizations of prime numbers created by Carlos Paris. I also mentioned I’d try my hand at replicating the basic visualization using DesignScript: it’s a good fit for solving this kind of problem (we want to create lots of repeated geometry based on the results of mathematical expressions).</p>  <p>Incidentally, some readers of this blog have expressed an interest in learning more about DesignScript. I’ve roped in Robert Aish and Luke Church to share some of their insights into the design of – and uses for – the language, and so they’ll be sharing guest posts via this blog at some point over the coming weeks. Rather than go into details myself in this post, I’ll focus purely on the language features I’ve used to generate and explore the primes visualization.</p>  <p>I should also mention that the code in this post just creates circles: I haven’t gone as far as identifying primes based on the number of circles that intersect at a particular point (we’ll look at that next time). The code uses the “brute force” approach to creating circles: it creates them for every index rather than just focusing on multiples of primes (as Carlos observed this is a valid optimization for this technique, although it would seem to defeat the object in our case: we’d ideally like to use geometry to determine which numbers are primes, rather than using our knowledge of prime numbers to create the geometry :-).</p>  <p>The DesignScript code itself is really simple:</p>  <p><span style="font-family: courier new; color: blue; font-size: 8pt">import</span><span style="font-family: courier new; color: black; font-size: 8pt">(</span><span style="font-family: courier new; color: brown; font-size: 8pt">&quot;ProtoGeometry.dll&quot;</span><span style="font-family: courier new; color: black; font-size: 8pt">);      <br />      <br /></span><span style="font-family: courier new; color: blue; font-size: 8pt">def</span><span style="font-family: courier new; color: black; font-size: 8pt"> create_circles(d, x)      <br />{       <br /><span>&#160; </span>k = </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">..x/d;      <br /><span>&#160; </span>cen = Point.ByCoordinates((<span style="font-family: courier new; color: brown; font-size: 8pt">0.5</span> + k) * </span><span style="font-family: courier new; color: black; font-size: 8pt">d, </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">, </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">);      <br /><span>&#160; </span></span><span style="font-family: courier new; color: blue; font-size: 8pt">return</span><span style="font-family: courier new; color: black; font-size: 8pt"> = Circle.ByCenterPointRadius(cen, d/<span style="font-family: courier new; color: brown; font-size: 8pt">2</span>);       <br />}       <br />      <br />cirs = create_circles(</span><span style="font-family: courier new; color: brown; font-size: 8pt">1</span><span style="font-family: courier new; color: black; font-size: 8pt">..</span><span style="font-family: courier new; color: brown; font-size: 8pt">500</span><span style="font-family: courier new; color: black; font-size: 8pt">, </span><span style="font-family: courier new; color: brown; font-size: 8pt">1500</span><span style="font-family: courier new; color: black; font-size: 8pt">);<o:p></o:p></span></p>  <p>The code makes use of a couple of range expressions: one to generate a row of k circles of a particular diameter (d) that add up to a total width of x (I chose to do it that way rather than have rows with larger radii extending beyond the others, although be warned that the last major circle is going to be incomplete, as not all circles extend to the full extent of x) and the other is simply to generate a row of circles for radii from 1 to 500. Fairly neat and succinct.</p>  <p>Here are the results (with layer 0 changed to a pretty colour):</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2017d3d680302970c-pi" target="_blank"><img style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Prime visualization courtesy of DesignScript" border="0" alt="Prime visualization courtesy of DesignScript" src="/assets/image_532246.jpg" width="474" height="285" /></a></p>  <p>If you want to use DesignScript’s associativity to explore the results of varying the radius and overall length, you can try stepping through this version of the code:</p>  <p><span style="font-family: courier new; color: blue; font-size: 8pt">import</span><span style="font-family: courier new; color: black; font-size: 8pt">(</span><span style="font-family: courier new; color: brown; font-size: 8pt">&quot;ProtoGeometry.dll&quot;</span><span style="font-family: courier new; color: black; font-size: 8pt">);      <br />      <br /></span><span style="font-family: courier new; color: blue; font-size: 8pt">def</span><span style="font-family: courier new; color: black; font-size: 8pt"> create_circles(d, x)      <br />{       <br /><span>&#160; </span>k = </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">..x/d;      <br /><span>&#160; </span>cen = Point.ByCoordinates((</span><span style="font-family: courier new; color: brown; font-size: 8pt">0.5</span><span style="font-family: courier new; color: black; font-size: 8pt"> + k) * d, </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">, </span><span style="font-family: courier new; color: brown; font-size: 8pt">0</span><span style="font-family: courier new; color: black; font-size: 8pt">);      <br /><span>&#160; </span></span><span style="font-family: courier new; color: blue; font-size: 8pt">return</span><span style="font-family: courier new; color: black; font-size: 8pt"> = Circle.ByCenterPointRadius(cen, d/</span><span style="font-family: courier new; color: brown; font-size: 8pt">2</span><span style="font-family: courier new; color: black; font-size: 8pt">);      <br />}       <br />      <br />n = </span><span style="font-family: courier new; color: brown; font-size: 8pt">500</span><span style="font-family: courier new; color: black; font-size: 8pt">;      <br />x = n * </span><span style="font-family: courier new; color: brown; font-size: 8pt">3</span><span style="font-family: courier new; color: black; font-size: 8pt">;      <br />cirs = create_circles(</span><span style="font-family: courier new; color: brown; font-size: 8pt">1</span><span style="font-family: courier new; color: black; font-size: 8pt">..n, x);      <br />      <br />n = </span><span style="font-family: courier new; color: brown; font-size: 8pt">300</span><span style="font-family: courier new; color: black; font-size: 8pt">;      <br />n = </span><span style="font-family: courier new; color: brown; font-size: 8pt">700</span><span style="font-family: courier new; color: black; font-size: 8pt">;      <br />x = n * </span><span style="font-family: courier new; color: brown; font-size: 8pt">4</span><span style="font-family: courier new; color: black; font-size: 8pt">;<o:p></o:p></span></p>  <p>Using the DesignScript editor’s “Run Debug” feature, we can step through to the assignment of cirs, and see the same results as the previous image (although here we’ll zoom out):</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2017c333983dd970b-pi" target="_blank"><img style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Zoomed out view" border="0" alt="Zoomed out view" src="/assets/image_609613.jpg" width="474" height="285" /></a></p>  <p>Stepping through the next line that sets n to 300 results in both x and cirs being re-evaluated (you’ll also step through those lines as the changes ripple through the evaluation graph).</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2017ee4dd4cfd970d-pi" target="_blank"><img style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="With n set to 300" border="0" alt="With n set to 300" src="/assets/image_950814.jpg" width="474" height="285" /></a></p>  <p>And the same for setting n to 700:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2017d3d6803c4970c-pi" target="_blank"><img style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="With n set to 700" border="0" alt="With n set to 700" src="/assets/image_968091.jpg" width="474" height="285" /></a></p>  <p>Setting x to 4n results in just cirs being re-evaluated:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2017d3d6803f9970c-pi" target="_blank"><img style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="And with x set to 4n" border="0" alt="And with x set to 4n" src="/assets/image_302490.jpg" width="474" height="285" /></a></p>  <p>In the next post, we’ll take a look at automating the process of identifying primes based on this geometry: we’re switching to .NET for that code, as it provides better access to AutoCAD’s selection mechanism (something that will be necessary if determining primes based on numbers of intersecting circles).&#160; </p>
