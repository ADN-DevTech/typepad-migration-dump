---
layout: "post"
title: "Interested in space analysis for Dynamo and Refinery?"
date: "2019-02-21 19:23:15"
author: "Kean Walmsley"
categories:
  - "Autodesk Research"
  - "Dynamo"
  - "Generative design"
original_url: "https://www.keanw.com/2019/02/interested-in-space-analysis-for-dynamo-and-refinery.html "
typepad_basename: "interested-in-space-analysis-for-dynamo-and-refinery"
typepad_status: "Publish"
---

<p>Over the last few weeks colleagues in Autodesk Research have been building the foundations for a space analysis package that can be used for generative design workflows in Dynamo. We’d love to hear from you if you’re interested in taking it for a spin.</p><p>But first, a little background…</p><p>We’ve known we’ve needed to get better performance when analysing 2D and 3D spaces since embarking on the <a href="https://www.autodeskresearch.com/projects/autodesk-mars" target="_blank">original layout of the new MaRS office in Toronto</a> as part of <a href="https://www.autodeskresearch.com/projects/project-discover" target="_blank">Project Discover</a>: the approach we had worked well – as I think is clear from <a href="https://www.architectmagazine.com/project-gallery/autodesk-mars-office_o" target="_blank">the results of the project</a> – but it wasn’t in a state that could usefully be shared externally.</p><p><br></p><p><iframe width="500" height="281" src="https://player.vimeo.com/video/193915345?title=0&amp;byline=0&amp;portrait=0" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></p><p><br></p><p>For Project Discover we used 2D space analysis to calculate various metrics that scored the individual layouts:</p><ul><li>Adjacency</li><li><a href="https://www.autodeskresearch.com/publications/buzz-metric-graph-based-method-quantifying-productive-congestion-generative-space" target="_blank">Buzz</a></li><li>Productivity</li><li>Views to outside</li><li>Daylight</li></ul><p>The first two are largely about calculating paths between various locations, while the last three are implemented by ray-casting. These approaches are definitely connected, though: you need to specify boundaries (and barriers) that the various algorithms will “see”. It’s our belief that there’s value in having a unified approach… we’ll see if that turns out to be true. :-)</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2022ad3e41bc0200b-pi" target="_blank"><img width="500" height="193" title="Project Discover metrics" style="margin: 30px auto; border-image: none; float: none; display: block; background-image: none;" alt="Project Discover metrics" src="/assets/image_318283.jpg" border="0"></a></p><p>If you’re interested in learning more about Project Discover’s goals (along with the additional “workstyle preference” metric, which correlates daylight and distraction values to individuals’ surveyed preferences), then you should definitely check out <a href="https://www.autodeskresearch.com/publications/project-discover-application-generative-design-architectural-space-planning" target="_blank">this SimAUD paper</a>.</p><p><iframe width="550" height="309" src="https://player.vimeo.com/video/250507352?title=0&amp;byline=0&amp;portrait=0" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></p><p>Anyway, we know this is going to be a common requirement for generative design workflows in the AEC space – for architectural layouts but also for a multitude of other use-cases – so we thought we’d build something that meets our needs and could be used externally, too.</p><p>We’ve started by focusing on “shortest path” calculations, which use a grid-based network to calculate the quickest routes between points in a 2D space.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2022ad3c47479200d-pi" target="_blank"><img width="500" height="304" title="Shortest single path" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Shortest single path" src="/assets/image_417896.jpg" border="0"></a></p><p>Because generative workflows often call for calculating the shortest path between one point (a desk, say) and multiple destinations (various other desks and amenities), the library has been designed to do that in one go. This should help a lot when running heavy analyses with Refinery, for instance.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2022ad3e41bcc200b-pi" target="_blank"><img width="500" height="305" title="Shortest path from multiple start points" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Shortest path from multiple start points" src="/assets/image_348130.jpg" border="0"></a></p><p>We decided to write the library in C++ and build it into a zero-touch node for use with Dynamo. We did this partly to help with performance, but also because we need the same capability to be usable with the <a href="https://autodesk.github.io/sydevs" target="_blank">SyDEVS</a> simulation framework (but that’s a topic for another day).</p><p>Here’s a quick video of an early version of the Dynamo integration, to give you a sense of how it works.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2022ad39e5fe6200c-pi" target="_blank"><img width="500" height="305" title="Shortest path" style="margin: 30px auto; float: none; display: block;" alt="Shortest path" src="/assets/image_619788.jpg"></a></p><p>Our intention is to make this available via the Dynamo Package Manager: once that happens I’ll definitely post again with information on how to find it.</p><p>We’d love to hear from you, in the meantime… is this valuable? What should we focus on, beyond 2D path-finding and <a href="https://www.keanw.com/2016/02/isovist-analysis-in-dynamo-studio.html" target="_blank">isovists</a>? Should we just hit pause and contribute to an existing effort? (We think what we’re doing will be especially useful for generative design workflows with major performance requirements, but it’s very possible there’s already something out there that meets these needs today. Either way, let us know!)</p><p>I’ll hopefully get the chance to discuss this more with people at the upcoming <a href="https://twitter.com/UKDynUG/status/1097974979440857094" target="_blank">UK Dynamo User Group Hackathon, being held on April 5th &amp; 6th in London</a>. (I’ll just be there on the 5th… <a href="https://www.keanw.com/2019/02/february-fun-and-march-madness.html" target="_blank">my schedule around that time is pretty hectic</a>, so I unfortunately won’t be staying for the whole event.)</p>
