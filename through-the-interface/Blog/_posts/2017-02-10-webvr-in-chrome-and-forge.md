---
layout: "post"
title: "WebVR in Chrome and Forge"
date: "2017-02-10 15:15:18"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk"
  - "HTML"
  - "JavaScript"
  - "Virtual Reality"
original_url: "https://www.keanw.com/2017/02/webvr-in-chrome-and-forge.html "
typepad_basename: "webvr-in-chrome-and-forge"
typepad_status: "Publish"
---

<p>There’s a lot happening in the world of <a href="https://webvr.info/" target="_blank">WebVR</a> at the moment. Today’s big news is that Chrome 56 has now been released for Android, bringing <a href="https://blog.google/products/chrome/experience-virtual-reality-web-chrome/" target="_blank">WebVR support to Daydream phones</a> (other devices to follow). This is an important landmark on the journey towards ubiquitous WebVR-capable devices. At some point we’ll be getting a desktop version of Chrome that has WebVR, too: for now I’m still testing with Chromium, as suggested by the <a href="https://webvr.info/get-chrome/" target="_blank">WebVR download instructions</a>.</p> <p>The other noteworthy event – at least from Autodesk’s perspective – is the release of v2.13 of the Forge viewer. This brings some VR-related functionality I’ve been waiting for impatiently for the last few years. I’ve been chomping at the bit to get not only VR support in the Forge viewer – which happened with v.2.12 – but to get a turntable navigation mode, where your head movements map to the rotation of the model you’re examining. This is as opposed to a first person, or “look around” navigation style. Some people use the terms exocentric vs. egocentric for this distinction.</p> <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201b8d25eb42a970c-pi"><img title="Vrok It with the latest Forge viewer" style="float: none; margin: 30px auto; display: block" alt="Vrok It with the latest Forge viewer" src="/assets/image_116824.jpg" width="500" height="281"></a></p> <p>Anyway, I’ve needed this mode of navigation for <a href="http://vrok.it" target="_blank">Vrok-It</a>, which – up until now – has made use of two independent (but connected by code) instances of the Forge viewer, managing their respective cameras based on the tilting of the device. Which is fine (or tolerable, anyway) for Google Cardboard, but didn’t bring the capability to other WebVR-capable devices (such as a PC running tethered VR such as Oculus Rift or HTC Vive). The new version opens that door, which is really cool.</p> <p>To enable this mode in the new viewer, you need to set the experimental flag when you initialize it:</p> <p> <div style="font-size: 8pt; font-family: courier new; background: white; color: black; line-height: 140%"> <p style="margin: 0px">&nbsp;</p> <p style="margin: 0px"><span style="color: blue">var</span> config = {</p> <p style="margin: 0px">&nbsp; extensions: [<span style="color: #a31515">'Autodesk.Viewing.WebVR'</span>],</p> <p style="margin: 0px">&nbsp; experimental: [<span style="color: #a31515">'webVR_orbitModel'</span>]</p> <p style="margin: 0px">}</p> <p style="margin: 0px">&nbsp;</p> <p style="margin: 0px"><span style="color: blue">var</span> viewer = <span style="color: blue">new</span> Autodesk.Viewing.Viewer3D(container, config);</p> <p style="margin: 0px">&nbsp;</p></div> <p>An alternative is to pass the flag when you load the extension manually in your code:</p> <p> <div style="font-size: 8pt; font-family: courier new; background: white; color: black; line-height: 140%"> <p style="margin: 0px">viewer.loadExtension(<span style="color: #a31515">'Autodesk.Viewing.WebVR'</span>, { experimental: [<span style="color: #a31515">'webVR_orbitModel'</span>] });</p> <p style="margin: 0px">&nbsp;</p></div> <p>The <a href="http://vrok.it/v2" target="_blank">latest version of Vrok-It</a> – which I’ve kept separate until the Forge viewer turntable navigation is no longer considered experimental – uses this new capability to pretty good effect. Here’s a video – recorded on my Nexus 5X phone – showing it in action:</p> <p align="center">&nbsp;</p> <p align="center"><iframe height="281" src="https://www.youtube-nocookie.com/embed/ATHhIAmwuTE?rel=0&amp;showinfo=0" frameborder="0" width="500" allowfullscreen></iframe></p> <p align="center">&nbsp;</p> <p>You can try it yourself even if you have an older version of Chrome (or another browser) on Android/iOS: the Forge viewer will automatically load the polyfill to support browsers that aren’t yet WebVR-native.</p> <p>On a related note, I’m really encouraged to see the amount of attention being paid to mobile support – whether for VR or otherwise – by the Forge viewer team. For instance, you can also enable “model consolidation” – from v2.12 – by using these flags (the latter of which is optional):</p> <p> <div style="font-size: 8pt; font-family: courier new; background: white; color: black; line-height: 140%"> <p style="margin: 0px"><span style="color: blue">var</span> initializerOptions = {</p> <p style="margin: 0px">&nbsp; env: <span style="color: #a31515">'AutodeskProduction'</span>,</p> <p style="margin: 0px">&nbsp; useConsolidation: <span style="color: blue">true</span>,</p> <p style="margin: 0px">&nbsp; consolidationMemoryLimit: 150 * 1024 * 1024 <span style="color: green">// 150MB - Optional, defaults to 100MB</span></p> <p style="margin: 0px">}</p> <p style="margin: 0px">Autodesk.Viewing.Initializer(initializerOptions, <span style="color: blue">function</span> () {</p> <p style="margin: 0px">&nbsp; <span style="color: green">// ...</span></p> <p style="margin: 0px">});</p> <p style="margin: 0px">&nbsp;</p></div> <p>This flag optimizes the loaded model for faster rendering using mesh consolidation and hardware instancing. It does require more memory – and can’t be used with optimizations such as progressive rendering – but should give significant performance benefits.</p> <p>I’ve integrated the flag into the Vrok-It code – which is <a href="https://github.com/KeanW/vrok-it" target="_blank">completely public and available on GitHub</a> – in case you want to see how it works.</p> <p>It’s great to see things moving ahead with WebVR. I continue to be really enthusiastic about its ability to bring VR – and, particularly, content created using Autodesk tools and shared through Forge – to anyone with a smartphone.</p>
