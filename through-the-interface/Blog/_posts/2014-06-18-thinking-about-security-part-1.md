---
layout: "post"
title: "Thinking about security &ndash; Part 1"
date: "2014-06-18 15:07:00"
author: "Kean Walmsley"
categories:
  - "AutoCAD"
  - "AutoCAD .NET"
  - "JavaScript"
  - "ObjectARX"
  - "Security"
original_url: "https://www.keanw.com/2014/06/thinking-about-security-part-1.html "
typepad_basename: "thinking-about-security-part-1"
typepad_status: "Publish"
---

<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201a511d003e7970c-pi" target="_blank"><img alt="r00t" border="0" height="264" src="/assets/image_865644.jpg" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin: 20px auto; display: block; padding-right: 0px; border-width: 0px;" title="r00t" width="394" /></a>We’ve been getting some interesting responses back from <a href="https://www.surveymonkey.com/s/Maestro_Security" target="_blank">the AutoCAD Security Survey</a> that has been posted over on <a href="https://beta.autodesk.com/project/forum/topic.html?cap=980140D72927483E9A17C07A2063BCA9&amp;forid={2673B773-C819-42A8-B9F8-DE9FF0B9247A}" target="_blank">the AutoCAD Futures beta forum</a>. (If you haven’t already responded, we’d appreciate you taking the time to do so: it’ll probably take you less time than reading the rest of this blog post. Then please come back and finish reading this, too. ;-) The survey is intended to gauge whether the safeguards <a href="http://through-the-interface.typepad.com/through_the_interface/2012/08/service-pack-1-for-autocad-2013.html" target="_blank">we first introduced in AutoCAD 2013 SP1</a> (and then further enhanced with the SECURELOAD mechanism in AutoCAD 2014) are properly understood and considered valuable.</p>
<p>From some of the feedback we’ve seen so far from the survey, it seems there are people out there who have concerns that introducing a JavaScript API somehow increases AutoCAD’s vulnerability to malicious code. I suspect this is due to the general sense that accessing the Internet is somehow what causes malicious code to infect computers, and that desktop software is inherently safer in nature.</p>
<p>This isn’t quite right. Yes, having computers connected to the Internet does increase their chances of being infected by malware, but it’s just one way of getting malicious code onto your system: aside from the obvious risks of malware coming across on pluggable media (CDs, DVDs, USB keys, etc.) recent research shows that <a href="http://www.theregister.co.uk/2014/06/12/israel_develops_next_stuxnet_attack_vector_electro_emanations/" target="_blank">it’s now possible to bridge the air gap</a>, which is just plain scary.</p>
<p>Ignoring that last point, for now, system security ultimately comes down to <strong><span style="text-decoration: underline;">trust</span></strong>. If you’re running AutoCAD on Windows, you (or perhaps your IT department) have placed trust in Microsoft and Autodesk to provide executable code that behaves in line with your expectations. Every time you install additional software onto your system – or open a DWG file that has been sent to you, more on this later – you are trusting the source of those bits.</p>
<p>Operating systems – especially those in the mobile space – are increasingly sandboxed, which means applications don’t have access to the APIs that could do naughty things on your system (sometimes the user gets the chance to approve or veto, sometimes the APIs are simply not there). This is also partially true on the desktop – where users can run with limited privileges – but to a far lesser extent.</p>
<p>Desktop AutoCAD does not run within an OS sandbox and neither does it provide nor enforce use of its own sandbox for applications, so application code that executes inside AutoCAD generally has the privileges accorded to the current OS user. As an AutoCAD user, you need to think carefully before running any custom application code inside AutoCAD, irrespective of the mechanism used to get it onto your system.</p>
<p>Software vendors are increasingly providing curated online marketplaces (a.k.a App Stores ;-) in an attempt to address both the discoverability of applications but also to increase the level of trust users have in them: typically some level of QA has been performed by the vendor to decrease the chances of these applications doing bad things. This is certainly true of <a href="http://apps.exchange.autodesk.com/acd/en/Home/Index" target="_blank">Autodesk Exchange</a>, for instance.</p>
<p>Running a custom module that happens to access the internet to download HTML and JavaScript which then gets executed locally <strong>isn’t fundamentally less secure than local executable code</strong>. In fact the nature of our hosting means that the code can run in the browser sandbox and only call into a limited set of functions that we make available to it. Alright, so these functions allow the HTML/JavaScript to call into .NET or native code, whether exposed as a callable function or a command, but then the application modules need to be present (and <em>trusted</em>) to provide these functions.</p>
<p>And the user isn’t free to browse to any web-page from an AutoCAD-hosted HTML dialog: it’s the local .NET or ObjectARX application that decides which pages to load into the browser, and if that application is doing something malicious then it’s much simpler to do so directly than loading a web-page to do it.</p>
<p>We introduced the SECURELOAD system variable to make people think carefully about the source of the application code they’re loading and running. If you don’t know or trust the source of executable code then you should not run it. Although it’s possible to do so – and it removes the annoyance factor of seeing this dialog on a regular basis – <strong>you should not disable the SECURELOAD feature</strong>. You should configure it to load modules you trust automatically but leave it enabled, otherwise.</p>
<p>The same goes for drawings you receive from untrusted sources: people may not realise this, but security researchers have found <a href="http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2013-3665" target="_blank">vulnerabilities in our DWG processing code</a> (which have since been <a href="http://knowledge.autodesk.com/support/autocad/downloads/caas/downloads/content/autodesk-C2-AE-autocad-C2-AE-code-execution-vulnerability--E2-80-93-security-hotfix.html" target="_blank">patched for AutoCAD 2011-2014</a> and fixed in AutoCAD 2015) that could allow users to execute malicious code that’s delivered as part of a specially crafted DWG file. We have a team focused on shoring up AutoCAD’s security to reduce the risk associated with this kind of attack, but this is really to point out that users need to <strong>think about trust whenever they load an application or open a DWG file from an unknown source</strong>.</p>
<p>In the next post I’m going to give some more context as to why all this matters (I would have included it here, but today’s post is already long enough). I’ll also introduce some resources that will hopefully make you think differently about security, as well as serving as some really interesting summer reading (honest!).</p>
<p><span style="color: #666666;">photo credit: </span><a href="http://www.flickr.com/photos/schill/4813392151/"><span style="color: #666666;">Schill</span></a><span style="color: #666666;"> via </span><a href="http://photopin.com"><span style="color: #666666;">photopin</span></a><a href="http://creativecommons.org/licenses/by/2.0/"><span style="color: #666666;">cc</span></a></p>
