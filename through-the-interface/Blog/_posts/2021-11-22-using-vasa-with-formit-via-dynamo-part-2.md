---
layout: "post"
title: "Using VASA with FormIt via Dynamo &ndash; Part 2"
date: "2021-11-22 18:31:42"
author: "Kean Walmsley"
categories:
  - "Autodesk"
  - "Autodesk Research"
  - "Dynamo"
  - "FormIt"
  - "Generative design"
  - "Geo-location"
  - "VASA"
original_url: "https://www.keanw.com/2021/11/using-vasa-with-formit-via-dynamo-part-2.html "
typepad_basename: "using-vasa-with-formit-via-dynamo-part-2"
typepad_status: "Publish"
---

<p>In <a href="https://www.keanw.com/2021/11/using-vasa-with-formit-via-dynamo-part-1.html" target="_blank">the last post</a> we looked at using <a href="https://www.keanw.com/2021/09/introducing-vasa-for-voxel-based-architectural-space-analysis.html" target="_blank">VASA</a> from within Dynamo for FormIt to solve mazes generated by <a href="https://www.keanw.com/2021/11/autodesk-formit-and-its-javascript-api.html" target="_blank">a cool plugin created by Brett from the FormIt team</a>. The Dynamo graph we saw used VASA in “3D mode” – where the voxel height is higher than 1 – but that came with the added need to create a floor for the maze (something that isn’t too hard, as we know the exact dimensions and location of the maze).</p><p>In today’s post we’re looking at how VASA might be used to perform pathfinding operations at the urban scale, taking geometry from FormIt that has been generated by the <a href="https://formit.autodesk.com/blog/post/3d-context-in-formit/" target="_blank">awesome new 3D Context Creator plugin</a> created by <a href="https://www.matterlab.co/" target="_blank">our friends at matterlab</a>. Here’s some geometry inside FormIt that has been generated for the centre of Neuchâtel, the city closest to my home.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20282e1327dc8200b-pi" target="_blank"><img width="500" height="315" title="Neuch&acirc;tel downtown in FormIt" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Neuch&acirc;tel downtown in FormIt" src="/assets/image_4612.jpg" border="0"></a></p><p>The geometry that’s created is also fairly predictable, in the sense that you specify a radius for the area for which you want geometry to be pulled in. That said, it’s still a setting that would need copying across to be embedded in the graph, which isn’t ideal if it can be avoided.</p><p>Going with pathfinding in “2D mode” simply means slicing the bottom voxel from the overall voxel model and using that as the basis for the pathfinding operations. Rhys showed this very well in <a href="https://www.keanw.com/2021/11/a-video-on-pathfinding-with-vasa.html" target="_blank">his recent video on VASA’s pathfinding capability</a> (here’s <a href="https://youtu.be/Jwm3mSnJWAA?t=1714" target="_blank">a direct link to the section of the video that relates to this</a>). This means that no “ground plane” is needed.</p><p>Here’s <a href="https://through-the-interface.typepad.com/files/VASA-Formit-GeoContext.dyn" target="_blank">the Dynamo graph I created to pull across the geometry and perform some pathfinding</a>:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20278805a0600200d-pi" target="_blank"><img width="500" height="158" title="A Dynamo graph using VASA with 3D Context Creator output" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="A Dynamo graph using VASA with 3D Context Creator output" src="/assets/image_19511.jpg" border="0"></a></p><p>Turning on the display of the voxel model, you can see it’s really only one voxel high. (If you displayed the “traversable” voxels, instead, you’d see the inverse of this pattern.)</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20282e1327e5c200b-pi" target="_blank"><img width="500" height="312" title="2D voxels inside Dynamo" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="2D voxels inside Dynamo" src="/assets/image_208891.jpg" border="0"></a></p><p>Here’s a path that’s been calculated through the city centre.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026bdf022454200c-pi" target="_blank"><img width="500" height="312" title="A simple VASA path through Neuchatel" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="A simple VASA path through Neuchatel" src="/assets/image_618161.jpg" border="0"></a></p><p>The start and end points are going to vary for each project, clearly, so I find it simplest to preview and select them inside the “node view” and then manipulate then directly inside the “3D view”. If you’re doing it right, you should get a 3D gizmo displayed:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20282e1327e6f200b-pi" target="_blank"><img width="500" height="312" title="Enabling direct manipulation of the destination point" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Enabling direct manipulation of the destination point" src="/assets/image_977502.jpg" border="0"></a></p><p>And then you can start to have fun dragging the point(s) around – if the graph is set for automatic calculation then you should see fairly responsive results:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20278805a2ca0200d-pi" target="_blank"><img width="500" height="312" title="VASA for urban pathfinding" style="margin: 30px auto; float: none; display: block;" alt="VASA for urban pathfinding" src="/assets/image_249102.jpg"></a></p><p>All being well the resulting path should appear back in FormIt for Windows (although as we saw last time, sometimes you need to run the graph a second time for this to happen):</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026bdf0225ed200c-pi" target="_blank"><img width="500" height="312" title="Our path back inside FormIt" style="margin: 30px auto; border-image: none; float: none; display: block; background-image: none;" alt="Our path back inside FormIt" src="/assets/image_184463.jpg" border="0"></a></p><p>It’s great to see VASA working in combination with such handy tools. In the next post in the extended series – which probably won’t come until next week, at this stage – we’ll take a look at how VASA can be used via the (currently unpublished) WebAssembly version of the toolkit to enable purely web-based workflows. It’s really just a streamlining of what’s possible from Dynamo on Windows – such as we’ve seen in this sub-series of posts – but it will hopefully give a sense for how WebAssembly is changing the game for browser-based applications.</p>
