---
layout: "post"
title: "Exposing a RESTful web service for use inside AutoCAD using the ASP.NET Web API &ndash; Part 1"
date: "2012-04-04 11:43:13"
author: "Kean Walmsley"
categories:
  - "ASP.NET"
  - "AutoCAD"
  - "AutoCAD .NET"
  - "F#"
  - "REST"
  - "SaaS"
  - "Web/Tech"
original_url: "https://www.keanw.com/2012/04/exposing-a-restful-web-service-for-use-inside-autocad-using-the-aspnet-web-api-part-1.html "
typepad_basename: "exposing-a-restful-web-service-for-use-inside-autocad-using-the-aspnet-web-api-part-1"
typepad_status: "Publish"
---

<p><a href="http://through-the-interface.typepad.com/through_the_interface/2012/03/moving-to-the-cloud.html" target="_blank">As promised</a>, here begins the technical portion of the series on moving application functionality to the cloud.</p>
<p>As suggested, we’re going to take code from a couple of <a href="http://through-the-interface.typepad.com/through_the_interface/2012/02/circle-packing-in-autocad-creating-an-apollonian-gasket-using-f-part-2.html" target="_blank">previous</a> <a href="http://through-the-interface.typepad.com/through_the_interface/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-2.html" target="_blank">posts</a> and put it in the cloud (although not immediately – first we’re going to move it to a local web-service, consume that in AutoCAD, and then look at our various cloud-hosting options).</p>
<p>So why did I choose these two pieces of code, in particular? A couple of reasons: firstly, they both implement “behind-the-scenes” algorithms that are independent of AutoCAD – a typical piece of <a href="http://en.wikipedia.org/wiki/Business_logic" target="_blank">business logic</a> that companies might choose to place behind a web-service, in my opinion – and, secondly, they are both implemented in F#, which gives us an opportunity to abstract away technology from the user (it removes the need to deploy a separate class library built using F# from our application).</p>
<p>We’re going to use <a href="http://asp.net" target="_blank">ASP.NET</a> for this effort, which is <a href="http://en.wikipedia.org/wiki/ASP.NET" target="_blank">Microsoft’s application framework for creating web-sites and applications</a>. To expose our web-services (as opposed to a web-site), we’re going to make use of the <a href="http://asp.net/web-api" target="_blank">ASP.NET Web API</a> feature, which is brand new in the as-yet-unreleased <a href="http://asp.net/mvc/mvc4" target="_blank">ASP.NET MVC 4</a>.</p>
<p>Let’s first resolve some acronyms…</p>
<p>ASP.NET is the .NET-based version of ASP, which standards for <a href="http://en.wikipedia.org/wiki/Active_Server_Pages" target="_blank">Active Server Pages</a> rather than Application Service Provider.</p>
<p>ASP.NET MVC is a framework that sits on top of ASP.NET (which perhaps makes it a meta-framework or even a meta-meta-framework, if you consider the CLR :-) allowing web developers to use the <a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank">Model-View-Controller</a> <a href="http://en.wikipedia.org/wiki/Architectural_pattern" target="_blank">architectural pattern</a> (a type of <a href="http://en.wikipedia.org/wiki/Design_pattern" target="_blank">design pattern</a>) to implement web-sites. MVC encourages a clean separation of data (the model) from the way it is presented (the view) and interacted with (the controller).</p>
<p>It’s not specifically interesting to us in today’s post – where we’re simply using MVC 4 to get at the Web API feature – but it’s generally an interesting paradigm for web-site exposure.</p>
<p>And the hot news around MVC and the Web API is that <a href="http://weblogs.asp.net/scottgu/archive/2012/03/27/asp-net-mvc-web-api-razor-and-open-source.aspx" target="_blank">they are now open source</a>, which means you can browse and even contribute to <a href="http://aspnetwebstack.codeplex.com" target="_blank">the source</a>, should you be so inclined.</p>
<p>So why use an unreleased (albeit open source) technology for this post? The short answer is that the Web API makes it incredibly easy to expose <a href="http://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">RESTful web-services</a>. I’ve briefly mention REST a <a href="http://through-the-interface.typepad.com/through_the_interface/2008/06/getting-to-know.html" target="_blank">few</a> <a href="http://through-the-interface.typepad.com/through_the_interface/2009/09/searching-the-web-from-inside-autocad-using-the-bing-api-and-net.html" target="_blank">times</a> in the past, but it’s been a while. I fully expect to be making increasing use of web-services implementing REST over the coming years, though.</p>
<p>I won’t go into the steps needed to install ASP.NET MVC 4, but I will just say that there are a few different ways of getting it, right now: you can install <a href="http://asp.net/mvc/mvc4" target="_blank">the Beta for Visual Studio 2010</a>, you can install <a href="http://www.microsoft.com/visualstudio/11/en-us/downloads#express" target="_blank">Visual Studio 11 Express Beta for Web</a>, or you can install <a href="http://www.microsoft.com/visualstudio/11/en-us/downloads" target="_blank">Visual Studio 11 Ultimate Beta</a>. I was a little unlucky, in that I had Visual Studio 11 Professional Beta installed – which meant I lost some time trying to install MVC 4 Beta on to of it, before I realised I actually needed to upgrade to Ultimate – but I got there in the end. One thing to bear in mind for later: at the time of writing it seems the Windows Azure .NET SDK doesn’t support Visual Studio 11, so I may have some hurdles to face when I get to that point. So sticking with VS2010 may prove the best option, for those of you who haven’t yet gone with VS11 (they can sit side-by-side, anyway, which is how I’ll probably manage the Azure deployment).</p>
<p>With MVC 4 installed, I went ahead and looked at the project types to create. If you want a good foundational article on using the Web API to use C# to expose web-services, <a href="http://stephenwalther.com/blog/archive/2012/03/05/introduction-to-the-asp-net-web-api.aspx" target="_blank">take a look at this one</a>. In our case, we want to use F# on the server, so I ended up choosing <a href="http://visualstudiogallery.msdn.microsoft.com/3d2bf938-fc9e-403c-90b3-8de27dc23095?SRC=VSIDE" target="_blank">an online project template that gives us both C# and F# in an MVC 4 app</a>:</p>
<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764a004cb970b-pi"><img alt="New F# Web API project" border="0" height="328" src="/assets/image_297231.jpg" style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-width: 0px;" title="New F# Web API project" width="474" /></a></p>
<p>We then get to specify that we want an Web API project and that we don’t (for the purposes of this simple example) care about testing:</p>
<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764a004d7970b-pi"><img alt="Choosing a Web API project" border="0" height="205" src="/assets/image_254587.jpg" style="background-image: none; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; display: block; padding-right: 0px; margin-right: auto; border-width: 0px;" title="Choosing a Web API project" width="304" /></a></p>
<p>This creates some nice boilerplate code that makes it really easy to expose our web-services. In the next post we’ll flesh out this project, hooking it up with our existing F# code to expose a couple of web-services for consumption inside our AutoCAD application.</p>
