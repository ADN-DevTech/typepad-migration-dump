---
layout: "post"
title: "Creating a resizable square panel inside the Forge viewer"
date: "2020-08-24 16:08:00"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk Research"
  - "IoT"
  - "User interface"
original_url: "https://www.keanw.com/2020/08/creating-a-resizable-square-panel-inside-the-forge-viewer.html "
typepad_basename: "creating-a-resizable-square-panel-inside-the-forge-viewer"
typepad_status: "Publish"
---

<p>In <a href="https://keanw.com/2020/08/displaying-a-2d-heatmap-when-surface-shading-inside-dasher.html" rel="noopener" target="_blank">this recent post</a> we looked at a new 2D heatmap capability that we’ve added to <a href="http://dasher360.com" target="_blank">Project Dasher</a>. In this post we look at what was needed to make this heatmap resizable – but with a fixed aspect ratio – as well as being movable and displayed with a transparent background.</p><p>Luckily, <a href="https://keanw.com/2017/02/creating-a-transparent-movable-panel-inside-the-forge-viewer.html" rel="noopener" target="_blank">this previous post</a> shows how to create a transparent, movable window – which we already use to show our surface shading legend – so we were able to use that as a basis for today’s implementation.</p>
<p>Firstly, let’s take a look at it working. Note the fact the window is basically invisible unless hovered over, at which point we see a shadow effect at its border.</p>
<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026be41ad513200d-pi" target="_blank"><img alt="Move and scale" height="312" src="/assets/image_809005.jpg" style="margin: 30px auto; float: none; display: block;" title="Move and scale" width="500" /></a></p>
<p>So there are two main features we wanted to add: the ability to maintain the panel’s aspect ratio (which in this case is 1, as we want it to be square) and the ability for the user to resize it (while keeping it square :-).</p>
<p>Let’s start with the second one… in this case I went ahead and modified the TransparentDockingPanel class to have an option that specifies that we want the panel to be resizable. Here’s the modified class (in TypeScript, as is usual for this project), which – when initialized – checks the options.resize flag, and if it’s set we create the footer that’s needed to resize the panel:</p><p><div class="vscode" style="white-space: pre;"><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialWidth</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">300</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialHeight</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">400</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">minWidth</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">100</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">minHeight</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">100</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(197, 134, 192);">export</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">class</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">TransparentDockingPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">extends</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">Autodesk</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(78, 201, 176);">Viewing</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(78, 201, 176);">UI</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(78, 201, 176);">DockingPanel</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">constructor</span><span style="color: rgb(212, 212, 212);">(</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">Element</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">any</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; ) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">super</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">dockRight</span><span style="color: rgb(212, 212, 212);"> = !!</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">dockRight</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">dockBottom</span><span style="color: rgb(212, 212, 212);"> = !!</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">dockBottom</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">style</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialWidth</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialHeight</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minWidth</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minWidth</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">minWidth</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minHeight</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minHeight</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">minHeight</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">classList</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">classList</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">classList</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">add</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&#39;modelStructurePanel&#39;</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(206, 145, 120);">&#39;docking-panel&#39;</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(206, 145, 120);">&#39;transparentPanel&#39;</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">for</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">additionalClass</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">of</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">classes</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">classList</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">add</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">additionalClass</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(220, 220, 170);">initialize</span><span style="color: rgb(212, 212, 212);">(): </span><span style="color: rgb(78, 201, 176);">void</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// Only create movement handlers (for the dialog body), by default,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// with options for title/close/resize.</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// super.initialize();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">initializeMoveHandlers</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);"> = (&lt;</span><span style="color: rgb(78, 201, 176);">any</span><span style="color: rgb(212, 212, 212);">&gt;</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">options</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">createTitleBar</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">titleLabel</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">appendChild</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">setTitle</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">titleLabel</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(79, 193, 255);">options</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">close</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">closer</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">createCloseButton</span><span style="color: rgb(212, 212, 212);">();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">appendChild</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">closer</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">resize</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">footer</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">createFooter</span><span style="color: rgb(212, 212, 212);">();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">appendChild</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">self</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">footer</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div></div><p>I’ve gone ahead and added additional options for creating a title and a close button: while we’re not going to use these now, at some point it’s likely we’ll want to add multiple heatmaps – and make it easy for the user to dismiss them – so having a close button and a descriptive label for each could well prove useful.</p><p>In case you’re wondering, the footer (and title/close button) creation code is simply taken from the initialization code for the Autodesk.Viewing.UI.DockingPanel class. The main difference in our class is that these become options rather than standard behaviour.</p>
<p>The other piece – to keep the panel square – we do from the child ResizableDockingPanel class. This contains a MutationObserver to keep an eye on the panel’s style, and checks for when the width and height are modified. During the onResize() event we take the minimum of the width and height – and use that as the value for both, assuming it isn’t below a minimum threshold – and then set that back on the panel but also use it to resize the panel contents (in this case our heatmap).</p><p><div class="vscode" style="white-space: pre;"><div><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> { </span><span style="color: rgb(156, 220, 254);">TransparentDockingPanel</span><span style="color: rgb(212, 212, 212);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(206, 145, 120);">&#39;./TransparentDockingPanel&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">400</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">100</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialPadding</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">30</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(197, 134, 192);">export</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">class</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">ResizableSquarePanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">extends</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">TransparentDockingPanel</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">number</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">number</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">_contents</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">HTMLElement</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(220, 220, 170);">_resizeContents</span><span style="color: rgb(212, 212, 212);">: (</span><span style="color: rgb(156, 220, 254);">elem</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">HTMLElement</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">number</span><span style="color: rgb(212, 212, 212);">) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">void</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">constructor</span><span style="color: rgb(212, 212, 212);">(</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">Element</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">contents</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">HTMLElement</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">any</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; ) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">super</span><span style="color: rgb(212, 212, 212);">(</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; {...</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">, ...{</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">classes</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);"> [...(</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">classes</span><span style="color: rgb(212, 212, 212);"> || []), </span><span style="color: rgb(206, 145, 120);">&#39;resizableSquarePanel&#39;</span><span style="color: rgb(212, 212, 212);">],</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">minWidth</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minSize</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">minHeight</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minSize</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">padding</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">padding</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialPadding</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">resize</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">true</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; }}</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; );</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">padding</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialPadding</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// Set the options for top/left/bottom/right</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// (we cannot set both left and right or both top and bottom)</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">style</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">top</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">top</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">left</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">left</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">bottom</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">bottom</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">right</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">right</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">top</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">top</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">top</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">left</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">left</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">left</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">bottom</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">h</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(79, 193, 255);">clientHeight</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">top</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(79, 193, 255);">h</span><span style="color: rgb(212, 212, 212);"> - </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);"> - </span><span style="color: rgb(79, 193, 255);">bottom</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">right</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">w</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(79, 193, 255);">clientWidth</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">left</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(79, 193, 255);">w</span><span style="color: rgb(212, 212, 212);"> - </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);"> - </span><span style="color: rgb(79, 193, 255);">right</span><span style="color: rgb(212, 212, 212);">) + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">contents</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">contents</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">resizeObserver</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">new</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">MutationObserver</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">onResize</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">bind</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">));</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">resizeObserver</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">observe</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">cont</span><span style="color: rgb(212, 212, 212);">, {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">attributes</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">true</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">attributeFilter</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);"> [</span><span style="color: rgb(206, 145, 120);">&#39;style&#39;</span><span style="color: rgb(212, 212, 212);">]</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; });</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">set</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">contents</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(156, 220, 254);">value</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">HTMLElement</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_contents</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">value</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(156, 220, 254);">value</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">appendChild</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(156, 220, 254);">value</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">centerContents</span><span style="color: rgb(212, 212, 212);">();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">onResize</span><span style="color: rgb(212, 212, 212);">();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">set</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(220, 220, 170);">contentsResizer</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(220, 220, 170);">value</span><span style="color: rgb(212, 212, 212);">: (</span><span style="color: rgb(156, 220, 254);">elem</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">HTMLElement</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">number</span><span style="color: rgb(212, 212, 212);">) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">void</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">_resizeContents</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(220, 220, 170);">value</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(220, 220, 170);">centerContents</span><span style="color: rgb(212, 212, 212);">(): </span><span style="color: rgb(78, 201, 176);">void</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_contents</span><span style="color: rgb(212, 212, 212);"> &amp;&amp; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);"> !== </span><span style="color: rgb(86, 156, 214);">undefined</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// Hopefully this will center the heatmap by using the padding offset</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">hs</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_contents</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">hs</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">top</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">hs</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">left</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(220, 220, 170);">onResize</span><span style="color: rgb(212, 212, 212);">(): </span><span style="color: rgb(78, 201, 176);">void</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// Keep our panel square</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">container</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">style</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">width</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(220, 220, 170);">parseInt</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(181, 206, 168);">10</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">height</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(220, 220, 170);">parseInt</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(181, 206, 168);">10</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">dim</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">Math</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">min</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">width</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(79, 193, 255);">height</span><span style="color: rgb(212, 212, 212);">); </span><span style="color: rgb(106, 153, 85);">// Choose the smallest side</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">Math</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">max</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">dim</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);">); </span><span style="color: rgb(106, 153, 85);">// Clamp it to the minimum size</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);"> !== </span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_size</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">style</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);"> + </span><span style="color: rgb(206, 145, 120);">&#39;px&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);"> = (</span><span style="color: rgb(79, 193, 255);">size</span><span style="color: rgb(212, 212, 212);"> - (</span><span style="color: rgb(181, 206, 168);">2</span><span style="color: rgb(212, 212, 212);"> * </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_padding</span><span style="color: rgb(212, 212, 212);">));</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">_resizeContents</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">_resizeContents</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_contents</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div></div><p>Note that we can’t set the _resizeContents member during the constructor of any base class – super() calls can’t use the ‘this’ keyword – so we have a separate property set to properly create one of these panels.</p>
<p>Here’s how we’re using this class inside Dasher:</p><p><div class="vscode" style="white-space: pre;"><div><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> { </span><span style="color: rgb(156, 220, 254);">ResizableSquarePanel</span><span style="color: rgb(212, 212, 212);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(206, 145, 120);">&#39;../../core/ResizableSquarePanel&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(212, 212, 212);"> { </span><span style="color: rgb(156, 220, 254);">Heatmap2d</span><span style="color: rgb(212, 212, 212);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(206, 145, 120);">&#39;../../core/Heatmap2d&#39;</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">400</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">100</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">initialPadding</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(181, 206, 168);">30</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(197, 134, 192);">export</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">class</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">SurfaceShadingHeatmapPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(86, 156, 214);">extends</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(78, 201, 176);">ResizableSquarePanel</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">private</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">_heatmap</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">Heatmap2d</span><span style="color: rgb(212, 212, 212);">;</span></div><div><br /></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">constructor</span><span style="color: rgb(212, 212, 212);">(</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">Element</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">heatmap</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(78, 201, 176);">Heatmap2d</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">string</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">?: </span><span style="color: rgb(78, 201, 176);">any</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; ) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">super</span><span style="color: rgb(212, 212, 212);">(</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">parentContainer</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">id</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">heatmap</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">canvas</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">title</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; {...</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">, ...{ </span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">classes</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);"> [...(</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">classes</span><span style="color: rgb(212, 212, 212);"> || []), </span><span style="color: rgb(206, 145, 120);">&#39;surfaceShadingHeatmap2d&#39;</span><span style="color: rgb(212, 212, 212);">],</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">minSize</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">minSize</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">minSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialSize</span><span style="color: rgb(212, 212, 212);">,</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">padding</span><span style="color: rgb(156, 220, 254);">:</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(156, 220, 254);">options</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">padding</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">initialPadding</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; }},</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; );</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">contentsResizer</span><span style="color: rgb(212, 212, 212);"> =</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; (</span><span style="color: rgb(156, 220, 254);">elem</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);">) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">hm</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_heatmap</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// The heatmap is scaled by half in CSS, as this gives a much better</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(106, 153, 85);">// quality result (we double the desired size before passing it on)</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">size</span><span style="color: rgb(212, 212, 212);"> * </span><span style="color: rgb(181, 206, 168);">2</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(212, 212, 212);"> (</span><span style="color: rgb(79, 193, 255);">hm</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">width</span><span style="color: rgb(212, 212, 212);"> !== </span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);"> || </span><span style="color: rgb(79, 193, 255);">hm</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">height</span><span style="color: rgb(212, 212, 212);"> !== </span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);">) {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">hm</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">setSize</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(79, 193, 255);">side</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; </span><span style="color: rgb(79, 193, 255);">hm</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">render</span><span style="color: rgb(212, 212, 212);">();</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160;&#0160;&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160;&#0160;&#0160; };</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(86, 156, 214);">this</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(156, 220, 254);">_heatmap</span><span style="color: rgb(212, 212, 212);"> = </span><span style="color: rgb(156, 220, 254);">heatmap</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div></div><p>Here’s the CSS that manages the shadow effect shown on-hover as well as changing the resizer and close button icons from light to dark:</p><p><div class="vscode" style="white-space: pre;"><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-title</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-color</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">transparent</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">border-bottom</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">unset</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-footer-resizer</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-image</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(220, 220, 170);">url</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PHBhdGggZD0iTS41IDYuNWw2LTZNNC41IDYuNWwxLjUzNi0xLjUzNiIgc3Ryb2tlPSIjQkVDOEQyIi8+PHBhdGggZD0iTTEuNSA2LjVsNi02TTUuNSA2LjVsMS41MzYtMS41MzYiIHN0cm9rZT0iIzkzOUNBNSIvPjwvZz48L3N2Zz4=&quot;</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel:hover</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-footer-resizer</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-image</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(220, 220, 170);">url</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOCIgaGVpZ2h0PSI3IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSI+PHBhdGggZD0iTS41IDYuNWw2LTZNNC41IDYuNWwxLjUzNi0xLjUzNiIgc3Ryb2tlPSIjQkVDOEQyIi8+PHBhdGggZD0iTTEuNSA2LjVsNi02TTUuNSA2LjVsMS41MzYtMS41MzYiIHN0cm9rZT0iIzRBNTU1QiIvPjwvZz48L3N2Zz4=&quot;</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-close</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-image</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(220, 220, 170);">url</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLjQ1NSAxMC45OTdhLjUuNSAwIDAxLS4zMS0uODVsMTAtMTBhLjUwMi41MDIgMCAwMS43MS43MWwtMTAgMTBhLjUuNSAwIDAxLS40LjE0eiIgZmlsbD0iIzk0OTQ5RiIvPjxwYXRoIGQ9Ik0xMC40NTcgMTEuMDA3YS41LjUgMCAwMS0uMzEtLjE1bC0xMC0xMGEuNTAyLjUwMiAwIDAxLjcxLS43MWwxMCAxMGEuNS41IDAgMDEtLjQuODZ6IiBmaWxsPSIjOTM5Q0E1Ii8+PC9nPjwvc3ZnPg==&quot;</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel:hover</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-close</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-image</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(220, 220, 170);">url</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzRBNTU1QiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNLjQ1NSAxMC45OTdhLjUuNSAwIDAxLS4zMS0uODVsMTAtMTBhLjUwMi41MDIgMCAwMS43MS43MWwtMTAgMTBhLjUuNSAwIDAxLS40LjE0eiIvPjxwYXRoIGQ9Ik0xMC40NTcgMTEuMDA3YS41LjUgMCAwMS0uMzEtLjE1bC0xMC0xMGEuNTAyLjUwMiAwIDAxLjcxLS43MWwxMCAxMGEuNS41IDAgMDEtLjQuODZ6Ii8+PC9nPjwvc3ZnPg==&quot;</span><span style="color: rgb(212, 212, 212);">)</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.transparentPanel</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-footer</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">background-color</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">unset</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">border-top</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">unset</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div><div><br /></div><div><span style="color: rgb(215, 186, 125);">.dasher-page</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.adsk-viewing-viewer</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.surfaceShadingHeatmap2d.docking-panel</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(156, 220, 254);">box-shadow</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">unset</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">&amp;</span><span style="color: rgb(215, 186, 125);">:hover</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">box-shadow</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(181, 206, 168);">1px</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(181, 206, 168);">1px</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(181, 206, 168);">10px</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(181, 206, 168);">0</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(220, 220, 170);">rgba</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(181, 206, 168);">0</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(181, 206, 168);">0</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(181, 206, 168);">0</span><span style="color: rgb(212, 212, 212);">, </span><span style="color: rgb(181, 206, 168);">.2</span><span style="color: rgb(212, 212, 212);">);</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; </span><span style="color: rgb(86, 156, 214);">&amp;</span><span style="color: rgb(212, 212, 212);">&#0160;</span><span style="color: rgb(215, 186, 125);">.docking-panel-title</span><span style="color: rgb(212, 212, 212);"> {</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">display</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">flex</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">justify-content</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(206, 145, 120);">center</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">font-weight</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(181, 206, 168);">400</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160;&#0160;&#0160; </span><span style="color: rgb(156, 220, 254);">font-size</span><span style="color: rgb(212, 212, 212);">: </span><span style="color: rgb(181, 206, 168);">14pt</span><span style="color: rgb(212, 212, 212);">;</span></div><div><span style="color: rgb(212, 212, 212);">&#0160; }</span></div><div><span style="color: rgb(212, 212, 212);">}</span></div></div><p>The feature works quite well. Here’s a longer animation showing the new panel but also cycling through different types of sensor data:</p>
<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026bde8b0c55200c-pi" rel="noopener" target="_blank"><img alt="Heatmaps both 2D and 3D blog" height="312" src="/assets/image_697018.jpg" style="margin: 30px auto; float: none; display: block;" title="Heatmaps both 2D and 3D blog" width="500" /></a></p>
<p>If you want to play around with this yourself, <a href="http://dasher360.com/share/oVAM3dF7M?level=2&amp;shade=Temperature&amp;start=2020-07-01T00:00:00.000Z&amp;end=2020-07-10T23:59:00.007Z&amp;current=2020-07-01T00:00:00.000Z&amp;padding=5&amp;play=1&amp;loop=1&amp;speed=4&amp;sensors=1&amp;fixPlots=1&amp;resolution=1H&amp;h2d=1&amp;view=pos|-82.9,-50.9,37.6|tgt|60.4,77.7,-55.9" target="_blank">here’s a link</a>.</p>
<p>Thinking about where this feature could go in the future: the same mechanism could easily be used to display multiple heatmaps concurrently, which would allow us to compare and contrast different sensor feeds and even simulation results. This would take a bit more UX work, to establish how best to choose the sensor type per heatmap (etc.), but it should provide some interesting analysis capabilities.</p></p></p></p></p>
