---
layout: "post"
title: "Sphere packing in AutoCAD: creating an Apollonian packing using F# &ndash; Part 3"
date: "2012-02-22 06:07:00"
author: "Kean Walmsley"
categories:
  - "3D printing"
  - "AutoCAD"
  - "AutoCAD .NET"
  - "F#"
  - "Fractals"
  - "Solid modeling"
original_url: "https://www.keanw.com/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-3.html "
typepad_basename: "sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-3"
typepad_status: "Publish"
---

<p>As suggested in <a href="http://through-the-interface.typepad.com/through_the_interface/2012/02/sphere-packing-in-autocad-creating-an-apollonian-packing-using-f-part-2.html" target="_blank">the last post</a>, today we’re going to take the results of running the code from that post and use them to generate a hollowed-out sphere. A big thanks to Francesco Tonioni, from our Product Support team in Neuchatel, who spent some time throwing ideas around on a lazy (but very cold) Sunday afternoon, contributing significantly to this post.</p>
<p>A few minor changes to the code were needed: rather than creating the spheres at exactly the size at which they were generated by the F# code, I adjusted the C# code to multiply the radius by 0.98 and use that instead (simply to avoid spheres touching and therefore making it harder for the Autodesk Shape Manager component to effectively perform the Boolean subtract). I also adjusted the code to only make the inversion spheres transparent – not the outer sphere (which also got reduced in radius by 2%). I then manually scaled the outer sphere by 1.05 (which is probably more than was strictly needed, but anyway).</p>
<p>We used AutoCAD’s SUBTRACT command to subtract the results of the packing from the outer sphere. This took some time to complete, but we ended up with a partially hollowed sphere that could then be sectioned to expose its insides:</p>
<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016762aaa162970b-pi" target="_blank"><img alt="Our carved out sphere" border="0" height="511" src="/assets/image_53904.jpg" style="background-image: none; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; padding-top: 0px; border-width: 0px;" title="Our carved out sphere" width="475" /></a></p>
<p>I don’t have access to a 3D printer (and frankly doubt that current technology would allow this to be printed, given the need for support material when building arches), but I did look a little into the mass properties of this – and the original sphere – using the MASSPROP command. The original sphere has a mass/volume of 4.5639, while our hollowed version has a mass/volume of 1.1752 (i.e. it’s about a quarter of the mass).</p>
<p>Not very surprising – and I’m sure this could be tweaked downwards with a deeper packing and perhaps a smaller percentage change in our spheres’ radii – but nonetheless interesting.</p>
<p>To take this further, I’ve been working on a different packing strategy that provides better overall strength, as well as considering non-spherical volumes. When initially looking into these directions, I was very grateful for pointers from Alex Fielder (who sent me a link to <a href="http://cg.in.tu-clausthal.de/research/protosphere/index.shtml" target="_blank">this interesting technique</a>, which generates spheres that are optimally sized for filling an arbitrary volume rather than for strength) and Stephen Preston (who pointed me towards papers on <a href="http://www.mathematik.uni-kl.de/~redenbach/Ecs10_Redenbach.pdf" target="_blank">randomly-tessellated foams structures</a> and <a href="http://www.pilat.org/docs/607project.pdf" target="_blank">wasp-inspired construction algorithms</a>, as well as getting me thinking about <a href="http://en.wikipedia.org/wiki/Artificial_life" target="_blank">artificial life</a>-inspired algorithms).</p>
<p>I’ve ended up thinking along different lines – which is actually more in line with <a href="http://through-the-interface.typepad.com/through_the_interface/2012/01/generating-hyperbolic-tessellations-inside-autocad-using-net.html" target="_blank">the original hyperbolic tessellation approach</a> – but we’ll see more in the next post.</p>
