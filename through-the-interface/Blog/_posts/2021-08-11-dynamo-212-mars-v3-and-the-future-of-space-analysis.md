---
layout: "post"
title: "Dynamo 2.12, MaRS v3 and the future of Space Analysis"
date: "2021-08-11 11:13:41"
author: "Kean Walmsley"
categories:
  - "Autodesk"
  - "Autodesk Research"
  - "Dynamo"
  - "Generative design"
  - "Robotics"
original_url: "https://www.keanw.com/2021/08/dynamo-212-mars-v3-and-the-future-of-space-analysis.html "
typepad_basename: "dynamo-212-mars-v3-and-the-future-of-space-analysis"
typepad_status: "Publish"
---

<p>The latest update to Dynamo Core (which for now you can use via <a href="https://dynamobuilds.com" target="_blank">Dynamo Sandbox</a>) has some really interesting enhancements, both in terms of usability and performance. Check out Sol Amour’s two <a href="https://dynamobim.org/dynamo-core-2-12-release-part-1-2/" target="_blank">blog</a> <a href="https://dynamobim.org/dynamo-core-2-12-release-part-2-2/" target="_blank">posts</a> that introduce Dynamo Core 2.12.</p><p>As it had been a while since I’d tried the MaRS graph in a new drop of Dynamo, I went ahead and loaded it.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20278803f65f0200d-pi" target="_blank"><img width="500" height="312" title="Loading V2 of the MaRS graph in Dynampo Sandbox 2.12" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Loading V2 of the MaRS graph in Dynampo Sandbox 2.12" src="/assets/image_607241.jpg" border="0"></a></p><p>I immediately noticed a couple of things: it was referencing an old, now-deprecated version of the Solar Analysis package, so I updated to the latest &amp; greatest version on my system and then reloaded the graph to allow me to opt into a reference update.</p><p>I was also informed that there was still a dependency on IronPython 2 for certain Python nodes. This was a bit of a surprise, because I thought I’d worked through and migrated each of these (I was actually loading a partially migrated version of the graph, not the V2 graph that was posted publicly). It turns out I’d missed a few. The fact there was a warning message on load was really helpful, and the migration assistance made the migration of individual nodes a breeze – much better than <a href="https://www.keanw.com/2020/07/dynamo-27-migrating-mars-to-cpython3.html" target="_blank">my previous manual attempts at migration</a>! Information on both these features can be found in <a href="https://dynamobim.org/why-has-dynamo-switched-to-python-3-should-i-update-too/" target="_blank">this blog post</a> from a few months ago.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20278803f67e4200d-pi" target="_blank"><img width="500" height="346" title="An IronPython node, pre-migration" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="An IronPython node, pre-migration" src="/assets/image_823929.jpg" border="0"></a></p><p>One thing that I found myself missing was a <a href="https://www.keanw.com/2018/07/introducing-warnamo-a-dynamo-package-for-managing-warnings-and-errors.html" target="_blank">Warnamo</a>-like tool that allowed me to find the various IronPython nodes: while the nodes helpfully state whether they’re CPython or not, finding all the Python nodes in a large graph can be a challenge. Each time I migrated another one, I’d save and reload the graph, thinking “this time I must have found the last straggler!”, only to see the IronPython warning once again on load. For the very last node that needed migrating – which I’d given up trying to find visually – I resorted to loading the .DYN in a text editor, finding the one Python node mentioning “IronPython”: I then scanned through the file for the node’s ID, finding it in a known category that I could then locate and scan visually in the Dynamo editor. I got there in the end. <a href="https://github.com/KeanW/Warnamo" target="_blank">The source code for Warnamo is on GitHub</a>, in case anyone’s motivated to modify it to help with Python migration. :-)</p><p>Anyway, <a href="https://autode.sk/mars-graph" target="_blank">the updated, all-CPython MaRS graph (v3) is now posted available</a>. For those of you interested in earlier versions, you can find <a href="https://autode.sk/mars-graph-v1" target="_blank">them</a> <a href="https://autode.sk/mars-graph-v2" target="_blank">here</a>.</p><p>This migration work doesn’t actually highlight any enhancements in Dynamo 2.12, of course, but at least you can now use Dynamo 2.12 to load this version of the MaRS graph with up-to-date package references and no warnings.</p><p>One updated feature that I really wanted to check out was node auto complete, something I last tried <a href="https://www.keanw.com/2020/12/have-you-tried-node-auto-complete-in-dynamo-29.html" target="_blank">with Dynamo 2.9</a>. It now has support for custom nodes, which is fantastic – I found I could build up a non-trivial graph using <a href="https://www.keanw.com/2019/04/using-the-space-analysis-package-for-pathfinding-and-visibility-in-dynamo.html" target="_blank">Space Analysis</a> – a core component of the MaRS graph – using pretty much only the node auto complete feature. In Space Analysis we’re mostly naming the output ports via the type name – something that’s currently a requirement for forward completion (a term I just made up, by the way) – although we’ll have to go through and use type annotations in a future update, I expect.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026bdee77f43200c-pi" target="_blank"><img width="500" height="390" title="A graph using Space Analysis built with node auto complete in Dynamo 2.12" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="A graph using Space Analysis built with node auto complete in Dynamo 2.12" src="/assets/image_452356.jpg" border="0"></a></p><p>Here’s a quick GIF showing the custom node support in action (stolen shamelessly from Sol’s post):</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2026bdee77ecf200c-pi"><img width="500" height="292" title="Custom Nodes Auto Complete" style="margin: 30px auto; float: none; display: block;" alt="Custom Nodes Auto Complete" src="/assets/image_703430.jpg"></a></p><p>Speaking of future updates to Space Analysis… my colleague, Rhys Goldstein, has been working on taking the concepts used to implement Space Analysis to the next level. Space Analysis – cool as it is – is very much 2D-centric. Rhys has been working on “adding a D” to the library, which brings the ability to perform spatial analyses – such as pathfinding and daylight/visibility analysis – in 3D. This effort is coming along nicely, so expect to hear more news on that in the coming weeks/months.</p><p>Working with the next version of Space Analysis (which we’ll call Space Analysis++ for the purposes of this post) has me thinking about possibilities beyond Dynamo and Generative Design workflows. Space Analysis++ (like Space Analysis) is based on a C++ library that has been wrapped for use with Dynamo, but could also be used in environments such as Forge (if built as WebAssembly via Emscripten – something we’ll dig into at some point on this blog). This raises the possibility of doing some really interesting in-browser calculations for emergency egress, etc.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20278803f67e6200d-pi" target="_blank"><img width="500" height="333" title="Spot in the Boston BuildSpace" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Spot in the Boston BuildSpace" src="/assets/image_593810.jpg" border="0"></a></p><p>Which brings me to my last sub-topic for this post, the chance to work with <a href="https://www.bostondynamics.com/spot" target="_blank">Spot</a>. Our Technology Centers team has been working with <a href="https://www.bostondynamics.com/" target="_blank">Boston Dynamics</a> to secure access to one of their dog-like robots, and is currently reviewing proposals for residency projects that would harness the <a href="https://dev.bostondynamics.com/" target="_blank">Spot SDK</a> to explore the areas of ‘<em>offline path planning and simulation (leveraging XR workflows, game engines, BIM, digital twin, etc); coordination of streaming dynamic sensors and the collection of reality capture data across multiple platforms; hardware interoperability and heterogeneous fleets of robots; the integration of machine learning and computer vision to improve the usability of multiple tools and enhance safety protocols and responses; the integration of new sensing payloads</em>’. See <a href="https://www.linkedin.com/pulse/autodesk-technology-centers-call-proposals-on-site-sophia-zelov-aia" target="_blank">this post</a> to find out more and hopefully apply.</p><p>As an Autodesk employee I don’t think I’m eligible to submit my own project, but I do think there are some fantastic possibilities of combining a technology such as Space Analysis++ with Spot. If anyone applies, gets accepted and wants to find out more, then please do get in touch!</p>
