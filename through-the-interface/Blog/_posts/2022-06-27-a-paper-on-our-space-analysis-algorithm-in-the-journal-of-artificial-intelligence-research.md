---
layout: "post"
title: "A paper on our space analysis algorithm in the Journal of Artificial Intelligence Research"
date: "2022-06-27 18:15:00"
author: "Kean Walmsley"
categories:
  - "Autodesk Research"
  - "Dynamo"
  - "Generative design"
original_url: "https://www.keanw.com/2022/06/a-paper-on-our-space-analysis-algorithm-in-the-journal-of-artificial-intelligence-research.html "
typepad_basename: "a-paper-on-our-space-analysis-algorithm-in-the-journal-of-artificial-intelligence-research"
typepad_status: "Publish"
---

<p>I’m very happy to share the news that <a href="https://jair.org/index.php/jair/article/view/13544" target="_blank">a paper authored by current and former members of Autodesk Research</a> has been published in the open access <a href="https://www.jair.org/" target="_blank">Journal of Artificial Intelligence Research (JAIR)</a>. The paper is entitled “Path Counting for Grid-Based Navigation” and talks in depth about the algorithm developed to power the <a href="https://www.keanw.com/2019/03/the-space-analysis-package-for-dynamo-and-refinery-is-now-available.html" target="_blank">Space Analysis package for Dynamo</a>.</p><p>Here’s the paper’s abstract, to tickle your fancy:</p><blockquote><p>Counting the number of shortest paths on a grid is a simple procedure with close ties to Pascal’s triangle. We show how path counting can be used to select relatively direct grid paths for AI-related applications involving navigation through spatial environments. Typical implementations of Dijkstra’s algorithm and A* prioritize grid moves in an arbitrary manner, producing paths which stray conspicuously far from line-of-sight trajectories. We find that by counting the number of paths which traverse each vertex, then selecting the vertices with the highest counts, one obtains a path that is reasonably direct in practice and can be improved by refining the grid resolution. Central Dijkstra and Central A* are introduced as the basic methods for computing these central grid paths. Theoretical analysis reveals that the proposed grid-based navigation approach is related to an existing grid-based visibility approach, and establishes that central grid paths converge on clear sightlines as the grid spacing approaches zero. A more general property, that central paths converge on direct paths, is formulated as a conjecture. </p></blockquote><p>If you’re curious about the techniques used to implement Space Analysis, or if you’re interested in pathfinding in general, then I do recommend taking a look at the paper. It explores how adding “path counting” to more traditional pathfinding algorithms such as Dijkstra’s and A* produces straighter, more direct grid paths.<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a2eec9ee93200d-pi" target="_blank"><img alt="Central path in a real building" border="0" height="224" src="/assets/image_411012.jpg" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" title="Central path in a real building" width="500" /></a><p>This approach was inspired by <a href="https://en.wikipedia.org/wiki/Pascal%27s_triangle" target="_blank">Pascal’s triangle</a>, and is an efficient way to get higher quality paths out of the classic pathfinding algorithms.<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a30d40193f200b-pi" target="_blank"><img alt="Pascal&#39;s triangle" height="240" src="/assets/image_243018.jpg" style="margin: 30px auto; float: none; display: block;" title="Pascal&#39;s triangle" width="260" /></a><p style="text-align: center">Image: <a href="https://commons.wikimedia.org/w/index.php?curid=3902538" target="_blank">By Hersfold on the English Wikipedia</a><p>Without going deep into the theory, here’s an animation made from figures in the paper that shows how path counting can be used to find more direct paths.<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a30d414e49200b-pi" target="_blank"><img alt="Path counting" height="227" src="/assets/image_667188.jpg" style="margin: 30px auto; float: none; display: block;" title="Path counting" width="500" /></a><p>This technique also deals with obstacles.<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a308d3e6e7200c-pi" target="_blank"><img alt="Obstacles" height="227" src="/assets/image_138854.jpg" style="margin: 30px auto; float: none; display: block;" title="Obstacles" width="500" /></a><p>While the paper focuses primarily on navigation (or pathfinding), it does touch on the work we’ve done around visibility analysis, mainly as this helps describe how central grid paths will converge on direct sightlines as the resolution of the grid becomes finer.<p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a30d414fa9200b-pi" target="_blank"><img alt="Visibility" height="281" src="/assets/image_855056.jpg" style="margin: 30px auto; float: none; display: block;" title="Visibility" width="375" /></a><p>In case you’re not familiar with the historical context of this work, it was originally started to enable the generative design of the Autodesk office in the MaRS district of Toronto. (It wasn’t used for the original <a href="https://www.autodesk.com/research/projects/project-discover" target="_blank">Project Discover</a> but rather for <a href="https://www.autodesk.com/autodesk-university/article/Hands-Project-Rediscover-Generatively-Designing-Autodesk-Toronto-Office-2020" target="_blank">Project Rediscover</a>, where we published a similar workflow using readily available Autodesk tools.)</p><p>We needed pathfinding and visibility analysis to implement a number of the metrics that would be used to score individual designs. For instance:</p><ul><li>When calculating <strong>adjacency</strong> we had to measure the average distance between people’s desks and key features such as amenities and elevators.</li><li>For <strong>buzz</strong> we had to measure possible congestion by aggregating the adjacency paths and looking for areas with heavy traffic (and whether this is a good or a bad thing has clearly <a href="https://www.keanw.com/2020/05/an-update-on-our-post-covid-office-layout-explorations.html" target="_blank">shifted over the last three years</a>).</li><li>For <strong>distraction</strong> we used visibility analysis to check whether people would have any colleagues in their field of view when sat at their desks.</li></ul><p>Here’s a visualization of these and other metrics from a generative run using <a href="https://autode.sk/mars-graph" target="_blank">the MaRS graph</a>.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e202a308d3ce32200c-pi" target="_blank"><img alt="Project Rediscover" height="284" src="/assets/image_884928.jpg" style="margin-right: auto; margin-left: auto; float: none; display: block;" title="Project Rediscover" width="500" /></a></p><p>Why was path counting important for this project? With traditional grid-based pathfinding methods, the resulting paths can stray significantly from the obvious line-of-sight headings, which we worried might bias the results of some of our analyses. We found that adding a counting step makes these paths go straight, or at least relatively straight, making us much more confident in the quality of the metrics we were computing for generative design.</p><p>Since creating and publishing this package, we’ve realized that this new method could be used for other applications, such as for video games or path planning in robotics. For instance, here’s <a href="https://www.redblobgames.com/pathfinding/a-star/implementation.html#troubleshooting-ugly-path" target="_blank">a site that talks about the problem of ugly paths in the context of video game development</a>. That realization led to the team running a number of experiments and developing the theory, and ultimately publishing the concept in a general artificial intelligence journal.</p><p>We hope you find the paper an interesting read.</p><p>Finally, congratulations to my co-authors – Rhys, Jacky, Alex, Simon and Azam – for this publication. It was quite the journey getting it out there, but very much worth the effort: this is a really interesting contribution to the field and I’m looking forward to seeing how it gets adopted.</p></p></p></p></p></p></p></p></p></p></p></p>
