---
layout: "post"
title: "Automating operations inside Dasher"
date: "2020-04-08 14:29:01"
author: "Kean Walmsley"
categories:
  - "APS (Forge)"
  - "Autodesk Research"
  - "IoT"
original_url: "https://www.keanw.com/2020/04/automating-operations-inside-dasher.html "
typepad_basename: "automating-operations-inside-dasher"
typepad_status: "Publish"
---

<p>In <a href="https://www.keanw.com/2020/04/come-and-try-the-latest-dasher-now-with-a-new-timeline.html" target="_blank">the last post</a> I neglected to remind people of Kiosk Mode, a great way to see some of <a href="http://dasher360.com" target="_blank">Dasher</a>’s features. Simply click on the filmstrip button at the bottom of Dasher’s vertical toolbar and move the cursor off to the side (this just stops the button from staying highlighted when the cursor gets hidden). Then just sit back and see how Dasher works.</p><p align="center"><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a4f9aa47200d-pi" target="_blank"><img width="174" height="450" title="Launching Kiosk Mode" style="display: inline;" alt="Launching Kiosk Mode" src="/assets/image_764690.jpg"></a></p><p>Here are some posts talking about <a href="https://www.keanw.com/2017/03/implementing-a-demo-mode-inside-the-forge-viewer-part-1.html" target="_blank">how</a> <a href="https://www.keanw.com/2017/03/implementing-a-demo-mode-inside-the-forge-viewer-part-2.html" target="_blank">this</a> <a href="https://www.keanw.com/2017/03/implementing-a-demo-mode-inside-the-forge-viewer-part-3.html" target="_blank">works</a>. Kiosk Mode knows about various Dasher extensions and can automate their usage. There’s a fair amount of complexity in the mechanism, but it works well enough.</p><p>Over the weekend I started work on a new capability that leverages some of the work done in Kiosk Mode, this time to expose a set of URL parameters to automate operations when Dasher starts. You might think of it as a Dasher API, but it’s not really a full API, rather a way to automate some initial steps when Dasher loads.</p><p>For instance, it might be used to integrate Dasher into a larger system that already knows something about what’s happening in the building: it might have identified a discrepancy or problem in the data coming from a certain sensor (or area) during a specific time period, and want to present this data – contextualised in 3D by Dasher – to the user via a handy link.</p><p>It might also be a mechanism that’s used by someone to share a view on some specific data with a colleague… perhaps they’ve found something interesting and want to get a second opinion on it.</p><p>Anyway, I’ve started working on the automation mechanism, and have fleshed out the following parameters/operations:</p><ul><li><strong>basId</strong> (string)
<ul><li>The name of the sensor to display data for (we can extend to support a list of sensors, if needed) </li></ul></li></ul><ul><li><strong>level</strong> (number) 
<ul><li>The level to display or 'auto', which will display the level of the specified sensor</li></ul></li></ul><ul><li><strong>shade</strong> (string) 
<ul><li>The sensor type for which to display surface shading data or 'auto', which will use the type of the specified sensor</li></ul></li></ul><ul><li><strong>start</strong> (date string) 
<ul><li>Start time/date for the time selection </li></ul></li></ul><ul><li><strong>end</strong> (date string) 
<ul><li>End time/date for the time selection </li></ul></li></ul><ul><li><strong>padding</strong> (number) 
<ul><li>Amount of padding (in days) either side of time selection </li></ul></li></ul><ul><li><strong>loop</strong> (bool) 
<ul><li>Whether to loop the display of data </li></ul></li></ul><ul><li><strong>play</strong> (bool) 
<ul><li>Whether to start the playing of data </li></ul></li></ul><ul><li><strong>speed</strong> (number) 
<ul><li>The speed at which to play the data (1X, 2X, 4X, 8X, 16X) </li></ul></li></ul><ul><li><strong>sensors </strong>(bool) 
<ul><li>Whether to display the sensor locations </li></ul><li><strong>occlusion</strong> (bool) 
<ul><li>Whether to enable sensor occlusion by geometry </li></ul></li></ul><ul><li><strong>skeletons</strong> (bool) 
<ul><li>Whether to enable the skeleton extension </li></ul></li></ul><ul><li><strong>zoom</strong> (number) 
<ul><li>A zoom factor for the model display </li></ul></li></ul><ul><li><strong>orbit </strong>(number – degrees) 
<ul><li>An orbit angle or 'auto', which will calculate the angle based on sensor position </li></ul></li></ul><ul><li><strong>layers</strong> (string) 
<ul><li>A string containing layer names and values, separated by | 
<li>Values are 0 to 3 for Off, On, Highlight and X-Ray, respectively 
<li>e.g. 'Architectural|1|Mechanical|3', which sets Architectural to On and Mechanical to X-Ray. </li></ul><li><strong>theme</strong> (string) 
<ul><li>darkgray, darkblue, lightgray </li></ul></li></ul><p>You – or the Dasher site, once I flesh out a URL builder feature – would build a URL such as the following (this is currently non-operational, as I haven’t pushed the capability live on dasher360.com, as yet):</p><p><a href="https://dasher360.com/share/oVAM3dF7M?basId=default_421120005&amp;level=auto&amp;shade=auto&amp;sensors=1&amp;play=1&amp;loop=1&amp;start=2020-04-01T00:00:00.000Z&amp;end=2020-04-03T00:00:00.000Z&amp;padding=0.5&amp;speed=4&amp;theme=darkblue&amp;zoom=1.2&amp;orbit=auto&amp;layers=Architectural|1|Mechanical|1" target="_blank">https://dasher360.com/share/oVAM3dF7M?basId=default_421120005&amp;level=auto&amp; shade=auto&amp;sensors=1&amp;play=1&amp;loop=1&amp;start=2020-04-01T00:00:00.000Z&amp;end=2020-04-03T00:00:00.000Z&amp;padding=0.5&amp;speed=4&amp;theme=darkblue &amp;zoom=1.2&amp;orbit=auto&amp; layers=Architectural|1|Mechanical|1</a></p><p>Breaking it down, this URL will launch Dasher and then:</p><ul><li>load the graph for sensor with the ID of “default_421120005”</li><li>isolate the geometry on the level the sensor is on</li><li>launch surface shading for the type of the sensor (in this case CO2)</li><li>display the sensor locations</li><li>play the timeline</li><li>set the timeline to loop/repeat</li><li>set the start of the time selection to be midnight on April 1st, 2020</li><li>set the end of the time selection to be midnight on April 3rd, 2020</li><li>show a 1/2 day padding on either side of our time selection</li><li>set the playback speed to 4X</li><li>set the theme to “dark blue”</li><li>zoom in to the model with a factor of 1.2</li><li>orbit the model automatically to get close to the sensor location</li><li>set the Architectural and Mechanical layers to “on”</li></ul><p>Here’s a quick video of how this kind of URL will load a Dasher model and specify these various visualization options:</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e2025d9b4464bb200c-pi" target="_blank"><img width="500" height="312" title="Loading Dasher with parameters" style="margin: 30px auto; float: none; display: block;" alt="Loading Dasher with parameters" src="/assets/image_115518.jpg"></a></p><p>I think I’ve thought of the main parameters that will be of use to people, although I’m sure there are additional usage scenarios that will come up, over time. For instance, I can certainly imagine people wanting multiple sensor plots to be loaded (and perhaps we’ll have the idea of a primary one which drives the various “auto” parameters).</p><p>If any additional parameters occured to you as you were reading this – or you have thoughts on other ways this might be useful – then please post a comment!</p>
