---
layout: "post"
title: "Creating krpano scenes from A360 stereo panorama renderings &ndash; Part 2"
date: "2016-03-11 14:45:42"
author: "Kean Walmsley"
categories:
  - "Virtual Reality"
original_url: "https://www.keanw.com/2016/03/creating-krpano-scenes-from-a360-stereo-panorama-renderings-part-2.html "
typepad_basename: "creating-krpano-scenes-from-a360-stereo-panorama-renderings-part-2"
typepad_status: "Publish"
---

<p>In <a href="http://through-the-interface.typepad.com/through_the_interface/2016/03/creating-krpano-scenes-from-a360-stereo-panorama-renderings-part-1.html" target="_blank">the last post</a> we introduced the idea of a tool that can pull down stereo panoramas rendered in A360 and use them to create a local, aggregate scene for viewing in the Google Cardboard-compatible krpano viewer.</p> <p>Today we’re going to start looking at the specifics of such a tool, firstly by describing the structure of an A360 stereo panorama and how we can convert it to a format supported by krpano.</p> <p>You’re likely to have URLs in one of two formats for your A360-rendered stereo panoramas:</p> <ul> <li><a title="http://pano.autodesk.com/pano.html?url=jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19" href="http://pano.autodesk.com/pano.html?url=jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19" target="_blank">http://pano.autodesk.com/pano.html?url=jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19</a>  <ul> <li>This is a “Preview on your phone” URL, that isn’t published in the gallery</li></ul> <li><a title="https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/panorama/pano.html?url=151117/1155/38fdf88d" href="https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/panorama/pano.html?url=151117/1155/38fdf88d" target="_blank">https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/panorama/pano.html?url=151117/1155/38fdf88d</a>  <ul> <li>This is a stereo panorama that has been published to the <a href="https://gallery.autodesk.com/a360rendering/projects" target="_blank">A360 gallery</a></li></ul></li></ul> <p>It’s fairly easy to work out the files that make up the actual panoramas, based on these URLs. Using Chrome’s Developer Tools you can pretend to be a mobile device and then load each of the pages…</p> <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201bb08c71cb2970d-pi" target="_blank"><img title="The spoofed page" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 0px auto 30px; display: block; padding-right: 0px; border-top-width: 0px" border="0" alt="The spoofed page" src="/assets/image_175260.jpg" width="500" height="403"></a>Then it’s a simple matter of checking the Network tab to see the images etc. that the page loads.</p> <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201b7c8227cc8970b-pi" target="_blank"><img title="The loaded images" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 30px auto 0px; display: block; padding-right: 0px; border-top-width: 0px" border="0" alt="The loaded images" src="/assets/image_186331.jpg" width="500" height="403"></a></p> <p>Here are the two images loaded by the first one, for instance:</p> <ul> <li><a href="http://pano.autodesk.com/jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19L.jpg" target="_blank">http://pano.autodesk.com/jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19L.jpg</a>  <li><a href="http://pano.autodesk.com/jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19L.jpg" target="_blank">http://pano.autodesk.com/jpgs/15847dfd-ba8e-4397-9022-0fba2ea5ad19L.jpg</a></li></ul> <p>And here are the images loaded by the second:</p> <ul> <li><a href="https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/151117/1155/38fdf88d/imageL.0.jpg" target="_blank">https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/151117/1155/38fdf88d/imageL.0.jpg</a>  <li><a href="https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/151117/1155/38fdf88d/imageR.0.jpg" target="_blank">https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/151117/1155/38fdf88d/imageR.0.jpg</a></li></ul> <p>While the format for preview vs. published is slightly different, you can see that the URL of each of the left and right images is closely linked to the original’s: you can basically work out how to get to the two images from the original without too much difficulty (and the source for the project that I’ll share, before too long, shows exactly how to do this).</p> <p>The images themselves – whether for the left or the right eye – have a similar structure: they’re cube maps.</p> <p><a href="https://d1zjbwmh9kbk11.cloudfront.net/a360-rendering/151117/1155/38fdf88d/imageR.0.jpg"><img title="Cube map for our sink panorama" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; float: none; padding-top: 0px; padding-left: 0px; margin: 30px auto; display: block; padding-right: 0px; border-top-width: 0px" border="0" alt="Cube map for our sink panorama" src="/assets/image_764162.jpg" width="504" height="87"></a></p> <p>Each cube map can be considered as six separate images that can be mapped onto the faces of a cube, the Left, Front, Right, Back, Down and Up directions respectively, going from left to right across the aggregate image. The length of each face’s side will depend on the rendered resolution: the preview images I found were 1024 on a side (which means 6144 width for the aggregate image) while the published one mentioned earlier is 1536 on a side (9216 width for the aggregate).</p> <p>For krpano we’ll extract these into separate files, as well as creating a low-res preview image that comprises the Left, Front, Right, Back, Up and Down images, but this time stacked vertically rather than horizontally.</p> <p>We’ll create standard versions at 1536 on a side and mobile versions at 1024.</p> <p>For the thumbnail images… there is a thumbnail associated with each panorama, but I haven’t worked out how to determine its URL. Instead of spending time on it, I decided to just take the Front image and pull out a portion from the centre of that. We’ll also round off the corners to make a nice circular image, saving it as a PNG to allow us to get transparency for the border.</p> <p>That’s basically all there is to the format of the data we pull down… in the next post we’ll talk about the approach for creating the XML format as well as the label text images for our various scenes. After that we’ll be ready to take a look at the finished code.</p>
