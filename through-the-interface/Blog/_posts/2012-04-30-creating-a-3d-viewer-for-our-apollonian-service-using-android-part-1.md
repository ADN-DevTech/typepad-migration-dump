---
layout: "post"
title: "Creating a 3D viewer for our Apollonian service using Android &ndash; Part 1"
date: "2012-04-30 14:06:39"
author: "Kean Walmsley"
categories:
  - "Android"
  - "Java"
  - "Mobile"
  - "SaaS"
original_url: "https://www.keanw.com/2012/04/creating-a-3d-viewer-for-our-apollonian-service-using-android-part-1.html "
typepad_basename: "creating-a-3d-viewer-for-our-apollonian-service-using-android-part-1"
typepad_status: "Publish"
---

<p>In <a href="http://through-the-interface.typepad.com/through_the_interface/2012/04/calling-a-web-service-from-a-unity3d-scene.html" target="_blank">the last post</a>, we looked at an approach for bringing data from <a href="http://apollonian.cloudapp.net" target="_blank">our Apollonian web-service</a> into a Unity3D scene. Our next “off piste” look at consuming data from this web-service is on the Android platform.<a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016304f89d27970d-pi" target="_blank"><img align="right" alt="Android logo" border="0" height="155" src="/assets/image_404251.jpg" style="background-image: none; margin: 0px 0px 10px 10px; padding-left: 0px; padding-right: 0px; display: inline; float: right; padding-top: 0px; border: 0px;" title="Android logo" width="133" /></a></p>
<p>This is my first serious attempt at mobile development (ignoring some fooling around I did with Embedded Visual C++ for Windows Mobile, way back when) although I have spent some time looking at <a href="http://through-the-interface.typepad.com/through_the_interface/winrt/" target="_blank">WinRT</a> (which basically means I’ve now built a Windows Phone 8 app, I suspect :-).</p>
<p>So why did I choose Android, rather than iOS? No real reason: <a href="http://through-the-interface.typepad.com/through_the_interface/2011/12/inventory-heading-home-from-au.html" target="_blank">I have both iOS and Android devices</a>, and just picked one to start with. Although if I’m honest, deep-down I suspected the learning curve for a C# programmer would be shallower to learn Java that it would be with Objective-C. That was probably a reasonable assumption – I’ve found working with Eclipse and the Android stack pretty quick to adjust to, at least – but that doesn’t mean it’s a good reason to choose a platform, of course: I’ll certainly take the plunge and try to do something comparable with iOS, when I get the chance.</p>
<p>I’m not actually going to post code, today, as I’m still making some “final” tweaks to get the UI right. But I will talk about the development process I’ve been following, so far.</p>
<p>Let’s start with some technology choices (beyond the choice of the Android platform, of course)…</p>
<p>To develop a 3D app for Android, it seems the logical choice is to use <a href="http://www.khronos.org/opengles" target="_blank">OpenGL ES</a>, as the Android SDK supports it directly. Whether you go for OpenGL ES <a href="http://www.khronos.org/opengles/1_X/" target="_blank">1.0</a> or <a href="http://www.khronos.org/opengles/2_X/" target="_blank">2.0</a> seems to depend on the age of hardware you want to support: as I’m primarily targeting the Kindle Fire – the only Android device I currently possess – I was able to go with 2.0.</p>
<p>I was loathe to code against OpenGL directly – as it’s a C-based, procedural API – so I went a-hunting for an object-oriented layer. My first discovery was <a href="http://code.google.com/p/min3d" target="_blank">min3D</a>, but that was based on OpenGL ES 1.0. But from there I discovered a more recent framework written by <a href="https://twitter.com/#!/masdennis" target="_blank">Dennis Ippel</a> – who had previously worked on min3D – called <a href="http://www.rozengain.com/blog/2011/08/23/announcing-rajawali-an-opengl-es-2-0-based-3d-framework-for-android/" target="_blank">Rajawali</a>. Rajawali is an open source, object-oriented framework <a href="https://github.com/MasDennis/Rajawali" target="_blank">available on GitHub</a> that saves you from having to deal with the mess-C-ness (ouch) of OpenGL ES 2.0.</p>
<p>On to my first Android/Rajawali app…</p>
<p>I followed the steps outlined in <a href="http://developer.android.com/sdk/installing.html" target="_blank">this “getting started” resource</a>, to at least get the development environment set up. I went with “API level 10”, which apparently equates to Android 2.3.3 (the Kindle Fire runs a customised version of Android 2.3.4, it seems, so this was as high as I felt I could safely go and still have it work). The Android SDK manager was helpful for getting hold of the version I wanted (although I ended up bringing down a few older versions, before settling on 2.3.3).</p>
<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016765ebde98970b-pi" target="_blank"><img alt="Android SDK Manager" border="0" height="324" src="/assets/image_110747.jpg" style="background-image: none; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; padding-top: 0px; border: 0px;" title="Android SDK Manager" width="430" /></a></p>
<p>Rather than going through <a href="http://developer.android.com/resources/tutorials/hello-world.html" target="_blank">the typical “Hello World” tutorial</a>, I went directly across to follow <a href="http://www.rozengain.com/blog/2011/08/24/rajawali-tutorial-1-basic-setup-a-sphere" target="_blank">the basic Rajawali tutorial</a>. The fact it dealt with creating a sphere seemed like a bonus. :-)</p>
<p>I was impressed with how quickly I got the basic app working, although it took me a while to work out how best to debug it. The standard device emulator that comes with the Android SDK <strong>does not support the use of OpenGL ES 2.0</strong>, which means you have to debug via a physical device. I started by manually building my application into an .apk file and transferring it across via USB and opening/installing it via ES File Explorer (this appears to be <a href="http://www.ubergizmo.com/2011/11/kindle-fire-sideload/" target="_blank">a fairly standard approach for side-loading apps onto the Kindle Fire</a>). This process became old pretty quickly, I have to admit, and I didn’t have much information passed back on things that didn’t work.</p>
<p>Luckily, I came across these instructions for <a href="http://g-ecx.images-amazon.com/images/G/01/sdk/Connecting_your_Kindle_Fire_to_ADB.pdf" target="_blank">connecting the Kindle Fire to ADB</a> (ADB is the <a href="http://developer.android.com/guide/developing/tools/adb.html" target="_blank">Android Debug Bridge</a>, by the way, and manages the connections with your development system and both physical and virtual Android devices), which allowed me to debug directly on the Kindle Fire from Eclipse via USB. This allowed me to step through code on the device and get information on any unhandled exceptions that occurred, greatly streamlining the development process.</p>
<p>OK, that’s about it for today’s post. To give you a taste of where we’re heading… in the next post post we’re going to build an application that allows us to query and view the various levels of our <a href="http://en.wikipedia.org/wiki/Apollonian_sphere_packing" target="_blank">Apollonian sphere packing</a>:</p>
<p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168eaee3bae970c-pi" target="_blank"><img alt="Level 1" border="0" height="149" src="/assets/image_180187.jpg" style="background-image: none; margin: 20px 9px 20px 3px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="Level 1" width="89" /></a><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168eaee3bc6970c-pi" target="_blank"><img alt="Level 2" border="0" height="149" src="/assets/image_28212.jpg" style="background-image: none; margin: 20px 9px 20px 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px; border: 0px;" title="Level 2" width="89" /></a><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016304f89d7b970d-pi" target="_blank"><img alt="Level 3" border="0" height="149" src="/assets/image_194206.jpg" style="background-image: none; margin: 20px 9px 20px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="Level 3" width="89" /></a><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016765ebded4970b-pi" target="_blank"><img alt="Level 4" border="0" height="149" src="/assets/image_775769.jpg" style="background-image: none; margin: 20px 9px 20px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="Level 4" width="89" /></a><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168eaee3c0a970c-pi" target="_blank"><img alt="Level 5" border="0" height="149" src="/assets/image_668743.jpg" style="background-image: none; margin: 20px 0px; padding-left: 0px; padding-right: 0px; display: inline; padding-top: 0px; border: 0px;" title="Level 5" width="89" /></a></p>
<p>The entire app is going to comprise of around 1,000 lines of code – which I think is pretty good, considering. We’ll implement some rudimentary UI for changing levels, progress bars for both download and processing, and even touch gestures such as pinch-zoom, drag-rotation and swipe-spinning.</p>
