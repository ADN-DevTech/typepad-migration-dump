---
layout: "post"
title: "Hosting our ASP.NET Web API project on Windows Azure &ndash; Part 2"
date: "2012-04-18 11:10:00"
author: "Kean Walmsley"
categories:
  - "ASP.NET"
  - "Azure"
  - "SaaS"
original_url: "https://www.keanw.com/2012/04/hosting-our-aspnet-web-api-project-on-windows-azure-part-2.html "
typepad_basename: "hosting-our-aspnet-web-api-project-on-windows-azure-part-2"
typepad_status: "Publish"
---

<p>In <a href="http://through-the-interface.typepad.com/through_the_interface/2012/04/hosting-our-aspnet-web-api-project-on-windows-azure-part-1.html" target="_blank">the last post</a>, we added a <a href="http://microsoft.com/azure" target="_blank">Windows Azure</a> deployment project to the ASP.NET Web API project we <a href="http://through-the-interface.typepad.com/through_the_interface/2012/04/exposing-a-restful-web-service-for-use-inside-autocad-using-the-aspnet-web-api-part-1.html" target="_blank">created</a> <a href="http://through-the-interface.typepad.com/through_the_interface/2012/04/exposing-a-restful-web-service-for-use-inside-autocad-using-the-aspnet-web-api-part-2.html" target="_blank">previously</a>. In this post, we’re going to go ahead and publish our project on Windows Azure.</p>  <p>To get this started, we right-click the deployment project in Visual Studio’s Solution Explorer and select “Publish”…</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168ea4bbe15970c-pi" target="_blank"><img alt="Right-clicking our deployment project and clicking Publish" border="0" height="272" src="/assets/image_774659.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Right-clicking our deployment project and clicking Publish" width="166" /></a>… which brings up the “Windows Azure Publish Sign In” dialog.</p>  <p>At this stage, you probably don’t yet have an Azure subscription. Whether you do or not, click the link on the dialog to proceed:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764fd6db4970b-pi" target="_blank"><img alt="Download your credentials" border="0" height="266" src="/assets/image_660792.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Download your credentials" width="394" /></a></p>  <p>If you don’t yet have a subscription, it’s at this point that you’ll be prompted with the options available to you. I personally signed up for a 3-month trial subscription, for which – by logging in – I can then download credentials to my local system.</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20163045631f9970d-pi" target="_blank"><img alt="Downloading credentials" border="0" height="272" src="/assets/image_969719.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Downloading credentials" width="454" /></a></p>  <p>I’m then able to go back to my Publish dialog and import these credentials:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764fd6e54970b-pi" target="_blank"><img alt="Windows Azure Publish Sign In dialog" border="0" height="266" src="/assets/image_972082.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Windows Azure Publish Sign In dialog" width="394" /></a></p>  <p>Now we’re ready to really start publishing to Azure. Our next step is to choose a name (which will be used to form the URL *.cloudapp.net that you’ll use to access your web-site and/or -service).</p>  <p>You also get to choose your hosting location – in this case I’m going to deploy to Western Europe… partly because it’s the closest location to me, personally, but also because the Eastern US data center (which would have split the difference nicely between here and the US) doesn’t yet have a caching service available (something we’ll look at in the next post).</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20167654a1b12970b-pi" target="_blank"><img alt="Choosing a name and a hosting location" border="0" height="266" src="/assets/image_978261.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Choosing a name and a hosting location" width="394" /></a></p>  <p>For the sake of this example, we’re going to break the cardinal rule of web development and push our deployment straight into production (rather than publishing to staging, testing it and then promoting it from there).</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016304093041970d-pi" target="_blank"><img alt="Our publish settings" border="0" height="266" src="/assets/image_700304.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Our publish settings" width="394" /></a></p>  <p>We can also set some credentials to allow us Remote Desktop access to the instances we create, helping us troubleshoot any tricky issues:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764fd6ebd970b-pi" target="_blank"><img alt="Remote desktop options" border="0" height="183" src="/assets/image_238187.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Remote desktop options" width="244" /></a></p>  <p>And then it should be a simple matter of hitting Publish…</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016764fd6ee1970b-pi" target="_blank"><img alt="Publish Summary - ready to go!" border="0" height="266" src="/assets/image_155344.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Publish Summary - ready to go!" width="394" /></a></p>  <p>… and sitting back and waiting for VS to deploy the project to Azure:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168e9fef50d970c-pi" target="_blank"><img alt="Our Azure activity log" border="0" height="92" src="/assets/image_95637.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Our Azure activity log" width="394" /></a></p>  <p>In the meantime, we can shoot across to the very-handy Windows Azure Management Portal, by logging in at <a href="http://windows.azure.com">http://windows.azure.com</a>:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e2016304093110970d-pi" target="_blank"><img alt="Logging in" border="0" height="275" src="/assets/image_422545.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Logging in" width="459" /></a></p>  <p>This provides access to our Azure subscriptions and services:</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e20168e9fef5d4970c-pi" target="_blank"><img alt="The Windows Azure Management Portal" border="0" height="308" src="/assets/image_758618.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="The Windows Azure Management Portal" width="474" /></a></p>  <p>From this page, it’s straightforward to perform various tasks such as checking usage and billing, promoting staging to production, and stopping or deleting running services.</p>  <p>Once the project is live, we can access <a href="http://apollonian.cloudapp.net" target="_blank">the main web-page</a> (which I went ahead and customized to provide some information about our web-services):</p>  <p><a href="http://through-the-interface.typepad.com/.a/6a00d83452464869e201630409318d970d-pi" target="_blank"><img alt="Our web-page describing the available web-services" border="0" height="431" src="/assets/image_651944.jpg" style="background-image: none; border-right-width: 0px; margin: 20px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="Our web-page describing the available web-services" width="474" /></a></p>  <p>And, of course, the web-services are available below this site, e.g.:</p>  <p><a href="http://apollonian.cloudapp.net/api/circles/5/3">http://apollonian.cloudapp.net/api/circles/5/3</a></p>  <p><a href="http://apollonian.cloudapp.net/api/spheres/5/3">http://apollonian.cloudapp.net/api/spheres/5/3</a></p>  <p>Now that this site is live, it remains for us to adjust our AutoCAD-specific code to consume the data from the cloud rather than the local service. Once we’ve done that, I’ll post the project for the server deployment as well as our local AutoCAD-based client.</p>  <p>But before that, in the next post we’re going to look at some decisions related to the economics of cloud hosting, particularly around adding a caching service (one of Azure’s PaaS features) and reducing the size of our cloud-hosted VM instances.</p>  <p><strong><em>Update</em></strong></p>  <p>While preparing the next post, I decided to adjust the JSON format slightly, shortening “Radius” and “Curvature” to “R” and “C”, respectively. This reduces the data transferred by a reasonable amount (about 8% for spheres and 14% for circles), and I decided to go ahead and do it now, before we create more dependencies on the service and end up with a versioning issue.</p>
