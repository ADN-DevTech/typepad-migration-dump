---
layout: "post"
title: "Capturefinery updated to help track down errors"
date: "2019-05-23 22:26:52"
author: "Kean Walmsley"
categories:
  - "Autodesk Research"
  - "Dynamo"
  - "Generative design"
original_url: "https://www.keanw.com/2019/05/capturefinery-updated-to-help-track-down-errors.html "
typepad_basename: "capturefinery-updated-to-help-track-down-errors"
typepad_status: "Publish"
---

<p>I <a href="https://www.keanw.com/2019/05/introducing-capturefinery-a-dynamo-package-that-creates-presentation-graphics-for-refinery-studies.html" target="_blank">talked recently</a> about <a href="http://github.com/KeanW/Capturefinery" target="_blank">a Dynamo view extension I created to capture presentation graphics</a> (primarily animated GIFs) from the entries in the “hall of fame” of a particular Refinery study. This has been super-useful, internally, but not just for creating fancy graphics.</p><p>Early on we realised that it was a great way to identify problems in Dynamo graphs: we could see the occasional error state (with the yellow text at the bottom left of the screen) flash past, indicating that a Dynamo run had completed with warnings and/or errors. Presumably the errors haven’t stopped the metrics from being evaluated and therefore have the design added to the hall of fame.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a4895f9b200d-pi" target="_blank"><img width="500" height="312" title="Design with errors" style="margin: 30px auto; border: 0px currentcolor; border-image: none; float: none; display: block; background-image: none;" alt="Design with errors" src="/assets/image_379733.jpg" border="0"></a></p><p>When using the previous version of the tool to track down errors, we had to jump through some hoops: inside the animated GIF and the stored single image frames we could find a task that caused errors, and then use the numbers associated with the metrics displayed in the graph to find the task in the Refinery study – usually by using two of the metrics in the scatterplot. When you select and run it in Dynamo, you see the errors that you can then troubleshoot. A big pain, though.</p><p>So I decided to copy some code from <a href="http://github.com/KeanW/Warnamo" target="_blank">Warnamo</a> to help detect when an error has occurred during a run. We then flag that design as having errors, so that we can siphon these problematic designs off at the end and put them in their own set of “hall of shame” GIFs. :-)</p><p>This was super-helpful… especially as we started tagging the JPGs captured for individual designs with a “<em>-error</em>” suffix. But it didn’t solve the pain of tracking them down in Refinery.</p><p>The next step was to pull out a subset of the designs – the ones that cause errors – and create a new <em>RefineryResults.json</em> (inside a new folder named after the original study but with a “<em>-errors</em>” suffix) that could be read and executed by Capturefinery.</p><p>Again, a useful step, but if you ran it in Capturefinery it would run through the full set of designs and leave you with the last one’s input settings inside Dynamo. The ideal would be to have some UI that allowed you to run (and capture) a specific design. Providing the ability to select the start index and the number of tasks to capture from a particular study is actually super-helpful: you can capture a solution set in chunks, or evaluate (and debug) a single design. Very handy for tracking down and fixing problems, especially when you use it in conjunction with Warnamo to zoom in on the errors in a complex graph.</p><p>Here’s the current version of the tool in action. It shows the list of studies – including those that have been created previously by the tool when it came across errors – and will show you the number of designs included before you go and choose to capture the graphics for designs that could lock your machine up for hours.</p><p><a href="https://through-the-interface.typepad.com/.a/6a00d83452464869e20240a46012cb200c-pi"><img width="500" height="342" title="Capturefinery for errors - low resolution" style="margin: 30px auto; float: none; display: block;" alt="Capturefinery for errors - low resolution" src="/assets/image_431171.jpg"></a></p><p>(This is a really crappy-looking GIF, but I didn’t want to embed a 15MB file in this post. If you’d like to see a higher-resolution version, <a href="https://through-the-interface.typepad.com/files/Capturefinery%20for%20errors%20-%20full%20resolution.gif" target="_blank">there’s one here.</a>)</p><p>The results of the Capturefinery are much as we saw in the previous version, although you now get more GIFs (i.e. there are a new set for the designs that completed with errors).</p><p>I think this tool is now getting closer to being publishable via the package manager: most of the reason not to was related to not having a very developed UX, but I feel this update is a substantial improvement. I’ll see if I can get it up there during the coming weeks.</p><p>I’m heading back across to FHNW, this afternoon, to give another (after <a href="https://www.keanw.com/2019/01/in-brugg.html" target="_blank">this one from earlier in the year</a>) evening lecture on Generative Design for the <a href="https://www.fhnw.ch/de/weiterbildung/architektur-bau-geomatik/digitales-bauen/mas-fhnw-digitales-bauen" target="_blank">Masters in Digital Building program</a>. This time I have more examples to show – including the campus layout example and the Project Rediscover graph – so I think it should be a good session.</p>
